
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z$ be a complex number. If $z^3 = 8i$, $\operatorname{Im}(z) > 0$, and $\operatorname{Re}(z) > 0$, then $z = \sqrt{3} + i$.

Proof: The polar form of $8i$ is $8e^{i\pi/2}$. The cube roots of $8i$ are therefore given by $z_k = 2e^{i(\frac{\pi/2 + 2k\pi}{3})}$ for $k=0, 1, 2$. Evaluating for each value of $k$, we find the set of solutions for $z$ is $\{\sqrt{3}+i, -\sqrt{3}+i, -2i\}$. Applying the condition $\operatorname{Im}(z) > 0$ to this set eliminates the root $-2i$, leaving the possible solutions as $\{\sqrt{3}+i, -\sqrt{3}+i\}$. Finally, applying the condition $\operatorname{Re}(z) > 0$ to this set of possible solutions uniquely determines the solution to be $z = \sqrt{3}+i$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z$ be a complex number.", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1]", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition (z : \u2102) \n  (h1 : z^3 = 8 * I) \n  (h2 : 0 < z.re) \n  (h3 : 0 < z.im) :\n  z = Real.sqrt 3 + I := by sorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean declaration (z : \u2102) correctly captures that z is a complex number", "The Lean formalization introduces the condition z^3 = 8 * I which is not mentioned in the natural language premise", "The Lean formalization introduces the condition 0 < z.re which is not mentioned in the natural language premise", "The Lean formalization introduces the condition 0 < z.im which is not mentioned in the natural language premise", "The Lean formalization introduces a conclusion z = Real.sqrt 3 + I while the natural language explicitly states there are no conclusions in this premise step"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean declaration (z : \u2102) correctly captures that z is a complex number', 'The Lean formalization introduces the condition z^3 = 8 * I which is not mentioned in the natural language premise', 'The Lean formalization introduces the condition 0 < z.re which is not mentioned in the natural language premise', 'The Lean formalization introduces the condition 0 < z.im which is not mentioned in the natural language premise', 'The Lean formalization introduces a conclusion z = Real.sqrt 3 + I while the natural language explicitly states there are no conclusions in this premise step']"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "If $z^3 = 8i$", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1]\n\u2022 $z^3 = 8i$ [tc_2]", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition (z : \u2102) \n  (h1 : z^3 = 8 * I) \n  (h2 : 0 < z.re) \n  (h3 : 0 < z.im) :\n  z = Real.sqrt 3 + I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Both state that z is a complex number", "Both state z^3 = 8i, where Lean's '8 * I' is equivalent to '8i'", "Lean introduces an additional condition '0 < z.re' (positive real part) that is not mentioned in the natural language statement", "Lean introduces an additional condition '0 < z.im' (positive imaginary part) that is not mentioned in the natural language statement", "Lean concludes with a specific value for z (\u221a3 + i), but the natural language explicitly states there are no new derived facts in this premise step"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Both state that z is a complex number', \"Both state z^3 = 8i, where Lean's '8 * I' is equivalent to '8i'\", \"Lean introduces an additional condition '0 < z.re' (positive real part) that is not mentioned in the natural language statement\", \"Lean introduces an additional condition '0 < z.im' (positive imaginary part) that is not mentioned in the natural language statement\", 'Lean concludes with a specific value for z (\u221a3 + i), but the natural language explicitly states there are no new derived facts in this premise step']"}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "$\\operatorname{Im}(z) > 0$", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1]\n\u2022 $z^3 = 8i$ [tc_2]\n\u2022 $\\operatorname{Im}(z) > 0$ [tc_3]", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition (z : \u2102) \n  (h1 : z^3 = 8 * I) \n  (h2 : 0 < z.re) \n  (h3 : 0 < z.im) :\n  z = Real.sqrt 3 + I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean declaration 'z : \u2102' perfectly captures that z is a complex number", "The Lean condition 'z^3 = 8 * I' perfectly matches the mathematical statement z\u00b3 = 8i, where I represents the imaginary unit", "The natural language only requires Im(z) > 0, but the Lean formalization adds an extra condition 'h2 : 0 < z.re' requiring the real part to be positive. This introduces a contradicting logical component not present in the original conditions"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean declaration 'z : \u2102' perfectly captures that z is a complex number\", \"The Lean condition 'z^3 = 8 * I' perfectly matches the mathematical statement z\u00b3 = 8i, where I represents the imaginary unit\", \"The natural language only requires Im(z) > 0, but the Lean formalization adds an extra condition 'h2 : 0 < z.re' requiring the real part to be positive. This introduces a contradicting logical component not present in the original conditions\"]"}, "type": "condition"}, "tc_4": {"id": "tc_4", "natural_language": "$\\operatorname{Re}(z) > 0$", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1]\n\u2022 $z^3 = 8i$ [tc_2]\n\u2022 $\\operatorname{Im}(z) > 0$ [tc_3]\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_4]", "dependencies": ["tc_1", "tc_2", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition (z : \u2102) \n  (h1 : z^3 = 8 * I) \n  (h2 : 0 < z.re) \n  (h3 : 0 < z.im) :\n  z = Real.sqrt 3 + I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Both declare z as a complex number", "Both state z^3 = 8i (8 * I in Lean notation)", "Both require the real part of z to be positive, just different notation for the same condition", "Both require the imaginary part of z to be positive, just different notation for the same condition", "The Lean theorem introduces a conclusion z = \u221a3 + i that is not present in the natural language statement, which only lists conditions without any conclusions"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Both declare z as a complex number', 'Both state z^3 = 8i (8 * I in Lean notation)', 'Both require the real part of z to be positive, just different notation for the same condition', 'Both require the imaginary part of z to be positive, just different notation for the same condition', 'The Lean theorem introduces a conclusion z = \u221a3 + i that is not present in the natural language statement, which only lists conditions without any conclusions']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "The polar form of $8i$ is $8e^{i\\pi/2}$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^3 = 8i$ [tc_2];\n\u2022 $\\operatorname{Im}(z) > 0$ [tc_3];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_4];\nTherefore, we conclude:\n\u2022 The polar form of $8i$ is $8e^{i\\pi/2}$ [l1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem polar_form (z : \u2102) \n  (h1 : z^3 = 8 * I) \n  (h2 : 0 < z.re) \n  (h3 : 0 < z.im) :\n  (8 : \u2102) * I = 8 * Complex.exp (I * Real.pi / 2) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem polar_form (z : \u2102) \n  (h1 : z^3 = 8 * I) \n  (h2 : 0 < z.re) \n  (h3 : 0 < z.im) :\n  (8 : \u2102) * I = 8 * Complex.exp (I * Real.pi / 2) := by\n  have h4 : (8 : \u2102) * I = 8 * Complex.exp (I * Real.pi / 2) := by\n    have h5 : Complex.exp (I * Real.pi / 2) = Complex.I := by\n      -- Prove that e^(i\u03c0/2) = i using Euler's formula\n      have h6 : Complex.exp (I * Real.pi / 2) = Complex.exp (Complex.I * (Real.pi / 2)) := by\n        ring_nf\n        <;> simp [Complex.ext_iff, Complex.I_re, Complex.I_im]\n        <;> norm_num\n      rw [h6]\n      -- Use the known value of e^(i\u03c0/2)\n      have h7 : Complex.exp (Complex.I * (Real.pi / 2)) = Complex.I := by\n        rw [Complex.exp_eq_exp_re_mul_sin_add_cos]\n        simp [Complex.ext_iff, Complex.I_re, Complex.I_im, Real.exp_zero, mul_zero, add_zero]\n        <;>\n        (try norm_num) <;>\n        (try ring_nf) <;>\n        (try field_simp [Real.pi_pos.le]) <;>\n        (try norm_num) <;>\n        (try\n          {\n            simp [Real.sin_pi_div_two, Real.cos_pi_div_two]\n            <;>\n            norm_num\n          })\n        <;>\n        (try\n          {\n            simp_all [Complex.ext_iff, Complex.I_re, Complex.I_im, Real.exp_zero, mul_zero, add_zero]\n            <;>\n            norm_num\n            <;>\n            linarith [Real.pi_pos]\n          })\n        <;>\n        (try\n          {\n            norm_num [Real.sin_pi_div_two, Real.cos_pi_div_two]\n            <;>\n            linarith [Real.pi_pos]\n          })\n      rw [h7]\n    rw [h5]\n    <;>\n    simp [Complex.ext_iff, Complex.I_re, Complex.I_im]\n    <;>\n    norm_num\n    <;>\n    simp_all [Complex.ext_iff, Complex.I_re, Complex.I_im]\n    <;>\n    norm_num\n    <;>\n    linarith [Real.pi_pos]\n  exact h4", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 91, "endLine": 15, "endColumn": 20, "data": "unsolved goals\nI z : \u2102\nh1 : z ^ 3 = 8 * I\nh2 : 0 < z.re\nh3 : 0 < z.im\n\u22a2 (Complex.exp (I * \u2191\u03c0 * (1 / 2))).re = (Complex.exp (\u2191\u03c0 * Complex.I * (1 / 2))).re \u2227\n    (Complex.exp (I * \u2191\u03c0 * (1 / 2))).im = (Complex.exp (\u2191\u03c0 * Complex.I * (1 / 2))).im"}, {"line": 59, "column": 4, "endLine": 59, "endColumn": 26, "data": "linarith failed to find a contradiction\nI z : \u2102\nh1 : (z ^ 3).re = 8 * I.re \u2227 (z ^ 3).im = 8 * I.im\nh2 : 0 < z.re\nh3 : 0 < z.im\nh5 : (Complex.exp (I * \u2191\u03c0 / 2)).re = 0 \u2227 (Complex.exp (I * \u2191\u03c0 / 2)).im = 1\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The complex number type declaration is correctly captured with (z : \u2102)", "The cubic equation z\u00b3 = 8i is correctly formalized as z^3 = 8 * I", "The imaginary part condition Im(z) > 0 is correctly expressed as 0 < z.im", "The real part condition Re(z) > 0 is correctly expressed as 0 < z.re", "The polar form conclusion is correctly formalized using Complex.exp and Real.pi, expressing 8i = 8e^(i\u03c0/2)", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem polar_form_counterexample : \u00ac (\u2200 (z : \u2102) (I : \u2102), z^3 = 8 * I \u2192 0 < z.re \u2192 0 < z.im \u2192 (8 : \u2102) * I = 8 * Complex.exp (I * Real.pi / 2)) := by\n  have h_main : \u2203 (z : \u2102) (I : \u2102), z^3 = 8 * I \u2227 0 < z.re \u2227 0 < z.im \u2227 (8 : \u2102) * I \u2260 8 * Complex.exp (I * Real.pi / 2) := by\n    use (1 + Complex.I)\n    use ((-1 + Complex.I) / 4 : \u2102)\n    constructor\n    \u00b7 -- Prove (1 + Complex.I) ^ 3 = 8 * ((-1 + Complex.I) / 4)\n      norm_num [Complex.ext_iff, pow_three, Complex.ext_iff, Complex.I_mul_I, Complex.I_mul_I]\n      <;>\n      simp_all [Complex.ext_iff, pow_three, Complex.I_mul_I, Complex.I_mul_I]\n      <;>\n      norm_num <;>\n      ring_nf <;>\n      norm_num <;>\n      simp_all [Complex.ext_iff, pow_three, Complex.I_mul_I, Complex.I_mul_I]\n      <;>\n      norm_num <;>\n      linarith\n    \u00b7 constructor\n      \u00b7 -- Prove 0 < (1 + Complex.I).re\n        norm_num [Complex.ext_iff, pow_three, Complex.ext_iff, Complex.I_mul_I, Complex.I_mul_I]\n      \u00b7 constructor\n        \u00b7 -- Prove 0 < (1 + Complex.I).im\n          norm_num [Complex.ext_iff, pow_three, Complex.ext_iff, Complex.I_mul_I, Complex.I_mul_I]\n        \u00b7 -- Prove (8 : \u2102) * ((-1 + Complex.I) / 4) \u2260 8 * Complex.exp (((-1 + Complex.I) / 4) * Real.pi / 2)\n          intro h\n          have h\u2081 := h\n          simp [Complex.ext_iff, Complex.exp_re, Complex.exp_im, Complex.ext_iff, pow_three, Complex.I_mul_I, Complex.I_mul_I] at h\u2081\n          <;>\n          (try norm_num at h\u2081) <;>\n          (try ring_nf at h\u2081) <;>\n          (try\n            {\n              have h\u2082 : Real.exp (-Real.pi / 8) > 0 := Real.exp_pos (-Real.pi / 8)\n              have h\u2083 : Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              have h\u2084 : Real.exp (-Real.pi / 8) * Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              have h\u2085 : (4 : \u211d) * Real.exp (-Real.pi / 8) * Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              -- Use the fact that the product is positive to derive a contradiction with -2 < 0\n              have h\u2086 : Real.pi > 3 := by\n                have := Real.pi_gt_31415\n                norm_num at this \u22a2\n                <;> linarith\n              have h\u2087 : Real.pi / 8 > 0 := by positivity\n              have h\u2088 : Real.exp (-Real.pi / 8) > 0 := Real.exp_pos (-Real.pi / 8)\n              have h\u2089 : Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              nlinarith [Real.pi_gt_three, Real.sqrt_nonneg 2, Real.sqrt_nonneg (2 + Real.sqrt 2),\n                Real.sq_sqrt (show (0 : \u211d) \u2264 2 by norm_num),\n                Real.sq_sqrt (show (0 : \u211d) \u2264 2 + Real.sqrt 2 by positivity)]\n            }) <;>\n          (try\n            {\n              have h\u2082 : Real.exp (-Real.pi / 8) > 0 := Real.exp_pos (-Real.pi / 8)\n              have h\u2083 : Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              have h\u2084 : Real.exp (-Real.pi / 8) * Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              have h\u2085 : (4 : \u211d) * Real.exp (-Real.pi / 8) * Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              have h\u2086 : Real.pi > 3 := by\n                have := Real.pi_gt_31415\n                norm_num at this \u22a2\n                <;> linarith\n              have h\u2087 : Real.pi / 8 > 0 := by positivity\n              have h\u2088 : Real.exp (-Real.pi / 8) > 0 := Real.exp_pos (-Real.pi / 8)\n              have h\u2089 : Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              nlinarith [Real.pi_gt_three, Real.sqrt_nonneg 2, Real.sqrt_nonneg (2 + Real.sqrt 2),\n                Real.sq_sqrt (show (0 : \u211d) \u2264 2 by norm_num),\n                Real.sq_sqrt (show (0 : \u211d) \u2264 2 + Real.sqrt 2 by positivity)]\n            }) <;>\n          (try\n            {\n              have h\u2082 : Real.exp (-Real.pi / 8) > 0 := Real.exp_pos (-Real.pi / 8)\n              have h\u2083 : Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              have h\u2084 : Real.exp (-Real.pi / 8) * Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              have h\u2085 : (4 : \u211d) * Real.exp (-Real.pi / 8) * Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              have h\u2086 : Real.pi > 3 := by\n                have := Real.pi_gt_31415\n                norm_num at this \u22a2\n                <;> linarith\n              have h\u2087 : Real.pi / 8 > 0 := by positivity\n              have h\u2088 : Real.exp (-Real.pi / 8) > 0 := Real.exp_pos (-Real.pi / 8)\n              have h\u2089 : Real.sqrt (2 + Real.sqrt 2) > 0 := by positivity\n              nlinarith [Real.pi_gt_three, Real.sqrt_nonneg 2, Real.sqrt_nonneg (2 + Real.sqrt 2),\n                Real.sq_sqrt (show (0 : \u211d) \u2264 2 by norm_num),\n                Real.sq_sqrt (show (0 : \u211d) \u2264 2 + Real.sqrt 2 by positivity)]\n            })\n  -- Use the existence of a counterexample to show that the original statement is false\n  intro h\n  obtain \u27e8z, I, hz, hzre, hzim, hne\u27e9 := h_main\n  have h\u2082 := h z I hz hzre hzim\n  apply hne\n  exact h\u2082"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "The cube roots of $8i$ are therefore given by $z_k = 2e^{i(\\frac{\\pi/2 + 2k\\pi}{3})}$ for $k=0, 1, 2$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^3 = 8i$ [tc_2];\n\u2022 $\\operatorname{Im}(z) > 0$ [tc_3];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_4];\n\u2022 The polar form of $8i$ is $8e^{i\\pi/2}$ [l1];\nTherefore, we conclude:\n\u2022 The solutions to $z^3 = 8i$ are of the form $z_k = 2e^{i(\\frac{\\pi/2 + 2k\\pi}{3})}$ for $k \\in \\{0, 1, 2\\}$ [l2].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (z : \u2102) \n  (h1 : z^3 = 8 * I) \n  (h2 : 0 < z.re) \n  (h3 : 0 < z.im) :\n  z = Real.sqrt 3 + I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (z : \u2102) \n  (h1 : z^3 = 8 * Complex.I) \n  (h2 : 0 < z.re) \n  (h3 : 0 < z.im) :\n  z = Real.sqrt 3 + Complex.I := by\n  have h4 : z.re ^ 3 - 3 * z.re * z.im ^ 2 = 0 := by\n    have h4\u2081 := h1\n    simp [Complex.ext_iff, pow_three, Complex.ext_iff, pow_two, pow_three, Complex.I_mul_I,\n      Complex.I_mul_I, Complex.I_mul_I, Complex.ext_iff, pow_two, pow_three] at h4\u2081 \u22a2\n    <;>\n    (try ring_nf at h4\u2081 \u22a2) <;>\n    (try norm_num at h4\u2081 \u22a2) <;>\n    (try nlinarith [sq_nonneg (z.re - z.im), sq_nonneg (z.re + z.im)]) <;>\n    (try linarith) <;>\n    (try nlinarith)\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two, pow_three, Complex.I_mul_I]\n        <;>\n        ring_nf at *\n        <;>\n        norm_num at *\n        <;>\n        nlinarith [sq_nonneg (z.re - z.im), sq_nonneg (z.re + z.im)]\n      })\n  \n  have h5 : 3 * z.re ^ 2 * z.im - z.im ^ 3 = 8 := by\n    have h5\u2081 := h1\n    simp [Complex.ext_iff, pow_three, Complex.ext_iff, pow_two, pow_three, Complex.I_mul_I,\n      Complex.I_mul_I, Complex.I_mul_I, Complex.ext_iff, pow_two, pow_three] at h5\u2081 \u22a2\n    <;>\n    (try ring_nf at h5\u2081 \u22a2) <;>\n    (try norm_num at h5\u2081 \u22a2) <;>\n    (try nlinarith [sq_nonneg (z.re - z.im), sq_nonneg (z.re + z.im)]) <;>\n    (try linarith) <;>\n    (try nlinarith)\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two, pow_three, Complex.I_mul_I]\n        <;>\n        ring_nf at *\n        <;>\n        norm_num at *\n        <;>\n        nlinarith [sq_nonneg (z.re - z.im), sq_nonneg (z.re + z.im)]\n      })\n  \n  have h6 : z.re > 0 := h2\n  have h7 : z.im > 0 := h3\n  \n  have h8 : z.re = Real.sqrt 3 := by\n    have h8\u2081 : z.re ^ 2 = 3 * z.im ^ 2 := by\n      have h8\u2082 : z.re * (z.re ^ 2 - 3 * z.im ^ 2) = 0 := by\n        nlinarith\n      have h8\u2083 : z.re > 0 := h6\n      have h8\u2084 : z.re ^ 2 - 3 * z.im ^ 2 = 0 := by\n        apply mul_left_cancel\u2080 (show (z.re : \u211d) \u2260 0 by linarith)\n        nlinarith\n      nlinarith\n    have h8\u2082 : 3 * z.re ^ 2 * z.im - z.im ^ 3 = 8 := h5\n    have h8\u2083 : z.im = 1 := by\n      have h8\u2084 : z.re ^ 2 = 3 * z.im ^ 2 := h8\u2081\n      have h8\u2085 : 3 * z.re ^ 2 * z.im - z.im ^ 3 = 8 := h5\n      have h8\u2086 : 3 * (3 * z.im ^ 2) * z.im - z.im ^ 3 = 8 := by\n        calc\n          3 * (3 * z.im ^ 2) * z.im - z.im ^ 3 = 3 * z.re ^ 2 * z.im - z.im ^ 3 := by\n            rw [h8\u2084]\n            <;> ring_nf\n          _ = 8 := h8\u2085\n      have h8\u2087 : 9 * z.im ^ 3 - z.im ^ 3 = 8 := by\n        ring_nf at h8\u2086 \u22a2\n        <;> linarith\n      have h8\u2088 : 8 * z.im ^ 3 = 8 := by linarith\n      have h8\u2089 : z.im ^ 3 = 1 := by linarith\n      have h8\u2081\u2080 : z.im > 0 := h7\n      have h8\u2081\u2081 : z.im = 1 := by\n        nlinarith [sq_nonneg (z.im - 1), sq_nonneg (z.im + 1)]\n      exact h8\u2081\u2081\n    have h8\u2084 : z.re ^ 2 = 3 * z.im ^ 2 := h8\u2081\n    have h8\u2085 : z.im = 1 := h8\u2083\n    have h8\u2086 : z.re ^ 2 = 3 := by\n      rw [h8\u2085] at h8\u2084\n      norm_num at h8\u2084 \u22a2\n      <;> nlinarith\n    have h8\u2087 : z.re > 0 := h6\n    have h8\u2088 : z.re = Real.sqrt 3 := by\n      apply Eq.symm\n      rw [Real.sqrt_eq_iff_sq_eq (by positivity) (by positivity)]\n      nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show (0 : \u211d) \u2264 3 by norm_num)]\n    exact h8\u2088\n  \n  have h9 : z.im = 1 := by\n    have h9\u2081 : z.re ^ 2 = 3 * z.im ^ 2 := by\n      have h9\u2082 : z.re * (z.re ^ 2 - 3 * z.im ^ 2) = 0 := by\n        nlinarith\n      have h9\u2083 : z.re > 0 := h6\n      have h9\u2084 : z.re ^ 2 - 3 * z.im ^ 2 = 0 := by\n        apply mul_left_cancel\u2080 (show (z.re : \u211d) \u2260 0 by linarith)\n        nlinarith\n      nlinarith\n    have h9\u2082 : 3 * z.re ^ 2 * z.im - z.im ^ 3 = 8 := h5\n    have h9\u2083 : z.re = Real.sqrt 3 := h8\n    have h9\u2084 : z.re ^ 2 = 3 := by\n      rw [h9\u2083]\n      norm_num [Real.sqrt_eq_iff_sq_eq]\n      <;>\n      nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]\n    have h9\u2085 : 3 * (3 : \u211d) * z.im - z.im ^ 3 = 8 := by\n      calc\n        3 * (3 : \u211d) * z.im - z.im ^ 3 = 3 * z.re ^ 2 * z.im - z.im ^ 3 := by\n          rw [h9\u2084]\n          <;> ring_nf\n        _ = 8 := h9\u2082\n    have h9\u2086 : 9 * z.im - z.im ^ 3 = 8 := by\n      ring_nf at h9\u2085 \u22a2\n      <;> linarith\n    have h9\u2087 : z.im > 0 := h7\n    have h9\u2088 : z.im = 1 := by\n      nlinarith [sq_nonneg (z.im - 1), sq_nonneg (z.im + 1)]\n    exact h9\u2088\n  \n  have h10 : z = Real.sqrt 3 + Complex.I := by\n    have h10\u2081 : z.re = Real.sqrt 3 := h8\n    have h10\u2082 : z.im = 1 := h9\n    have h10\u2083 : z = \u27e8Real.sqrt 3, 1\u27e9 := by\n      apply Complex.ext <;> simp_all [Complex.ext_iff, pow_two]\n      <;> norm_num <;>\n      (try ring_nf at * <;> nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]) <;>\n      (try linarith) <;>\n      (try nlinarith)\n    rw [h10\u2083]\n    <;> simp [Complex.ext_iff, pow_two, Complex.I_mul_I]\n    <;> norm_num <;>\n    (try ring_nf at * <;> nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]) <;>\n    (try linarith) <;>\n    (try nlinarith)\n    <;>\n    (try simp_all [Complex.ext_iff, pow_two, Complex.I_mul_I])\n    <;>\n    (try norm_num)\n    <;>\n    (try linarith)\n    <;>\n    (try nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)])\n  \n  rw [h10]\n  <;> simp [Complex.ext_iff, pow_two]\n  <;> norm_num\n  <;>\n  (try ring_nf at * <;> nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]) <;>\n  (try linarith) <;>\n  (try nlinarith)", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization has major inconsistencies with the natural language. First, it completely omits the premise about the polar form of 8i [l1]. Second, and more critically, the conclusion is fundamentally different: the natural language concludes with the general form of all solutions z_k = 2e^(i(\u03c0/2 + 2k\u03c0)/3) for k \u2208 {0, 1, 2}, while the Lean only concludes with the specific solution z = \u221a3 + I. Although \u221a3 + I is mathematically correct as the unique solution satisfying the given constraints, the Lean formalization fails to capture the key logical component about the general solution form that is central to the natural language statement.", "Wrong dependencies in Lean4 tactics!"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization has major inconsistencies with the natural language. First, it completely omits the premise about the polar form of 8i [l1]. Second, and more critically, the conclusion is fundamentally different: the natural language concludes with the general form of all solutions z_k = 2e^(i(\u03c0/2 + 2k\u03c0)/3) for k \u2208 {0, 1, 2}, while the Lean only concludes with the specific solution z = \u221a3 + I. Although \u221a3 + I is mathematically correct as the unique solution satisfying the given constraints, the Lean formalization fails to capture the key logical component about the general solution form that is central to the natural language statement.']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Evaluating for each value of $k$, we find the set of solutions for $z$ is $\\{\\sqrt{3}+i, -\\sqrt{3}+i, -2i\\}$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^3 = 8i$ [tc_2];\n\u2022 $\\operatorname{Im}(z) > 0$ [tc_3];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_4];\n\u2022 The polar form of $8i$ is $8e^{i\\pi/2}$ [l1];\n\u2022 The solutions to $z^3 = 8i$ are of the form $z_k = 2e^{i(\\frac{\\pi/2 + 2k\\pi}{3})}$ for $k \\in \\{0, 1, 2\\}$ [l2];\nTherefore, we conclude:\n\u2022 The set of all solutions to $z^3 = 8i$ is $\\{\\sqrt{3}+i, -\\sqrt{3}+i, -2i\\}$ [l3].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 :\n  {z : \u2102 | z^3 = 8 * I \u2227 0 < z.re \u2227 0 < z.im} = \n  {Real.sqrt 3 + I} := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 :\n  {z : \u2102 | z^3 = 8 * I \u2227 0 < z.re \u2227 0 < z.im} = \n  {Real.sqrt 3 + I} := by\n  apply Set.ext\n  intro z\n  simp only [Set.mem_setOf_eq, Set.mem_singleton_iff]\n  constructor\n  \u00b7 -- Prove the forward direction: if z satisfies the conditions, then z = Real.sqrt 3 + I\n    intro h\n    have h\u2081 : z ^ 3 = 8 * I := h.1\n    have h\u2082 : 0 < z.re := h.2.1\n    have h\u2083 : 0 < z.im := h.2.2\n    -- Use the fact that the only positive real and imaginary solution is Real.sqrt 3 + I\n    have h\u2084 : z = Real.sqrt 3 + I := by\n      -- Compute the cube of z and compare with 8i\n      have h\u2085 : (z.re : \u211d) > 0 := by exact_mod_cast h\u2082\n      have h\u2086 : (z.im : \u211d) > 0 := by exact_mod_cast h\u2083\n      have h\u2087 : (z.re : \u211d) ^ 3 - 3 * (z.re : \u211d) * (z.im : \u211d) ^ 2 = 0 := by\n        simp [Complex.ext_iff, pow_three, pow_two, Complex.ext_iff, Complex.I_mul_I] at h\u2081\n        norm_num at h\u2081 \u22a2\n        <;>\n        (try ring_nf at h\u2081 \u22a2) <;>\n        (try norm_num at h\u2081 \u22a2) <;>\n        (try nlinarith [sq_nonneg (z.re - Real.sqrt 3), sq_nonneg (z.im - 1),\n          Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]) <;>\n        (try\n          {\n            nlinarith [sq_nonneg (z.re - Real.sqrt 3), sq_nonneg (z.im - 1),\n              Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]\n          })\n        <;>\n        (try\n          {\n            nlinarith [sq_nonneg (z.re - Real.sqrt 3), sq_nonneg (z.im - 1),\n              Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]\n          })\n      have h\u2088 : 3 * (z.re : \u211d) ^ 2 * (z.im : \u211d) - (z.im : \u211d) ^ 3 = 8 := by\n        simp [Complex.ext_iff, pow_three, pow_two, Complex.ext_iff, Complex.I_mul_I] at h\u2081\n        norm_num at h\u2081 \u22a2\n        <;>\n        (try ring_nf at h\u2081 \u22a2) <;>\n        (try norm_num at h\u2081 \u22a2) <;>\n        (try nlinarith [sq_nonneg (z.re - Real.sqrt 3), sq_nonneg (z.im - 1),\n          Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]) <;>\n        (try\n          {\n            nlinarith [sq_nonneg (z.re - Real.sqrt 3), sq_nonneg (z.im - 1),\n              Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]\n          })\n        <;>\n        (try\n          {\n            nlinarith [sq_nonneg (z.re - Real.sqrt 3), sq_nonneg (z.im - 1),\n              Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]\n          })\n      have h\u2089 : (z.re : \u211d) = Real.sqrt 3 := by\n        have h\u2089\u2081 : 0 < (z.re : \u211d) := by positivity\n        have h\u2089\u2082 : 0 < (z.im : \u211d) := by positivity\n        have h\u2089\u2083 : (z.re : \u211d) ^ 3 - 3 * (z.re : \u211d) * (z.im : \u211d) ^ 2 = 0 := h\u2087\n        have h\u2089\u2084 : 3 * (z.re : \u211d) ^ 2 * (z.im : \u211d) - (z.im : \u211d) ^ 3 = 8 := h\u2088\n        have h\u2089\u2085 : (z.im : \u211d) = 1 := by\n          nlinarith [sq_nonneg ((z.re : \u211d) - Real.sqrt 3), sq_nonneg ((z.im : \u211d) - 1),\n            Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num),\n            sq_nonneg ((z.re : \u211d) - Real.sqrt 3), sq_nonneg ((z.im : \u211d) - 1)]\n        have h\u2089\u2086 : (z.re : \u211d) = Real.sqrt 3 := by\n          rw [h\u2089\u2085] at h\u2089\u2083\n          have h\u2089\u2087 : (z.re : \u211d) ^ 3 - 3 * (z.re : \u211d) * (1 : \u211d) ^ 2 = 0 := by simpa using h\u2089\u2083\n          have h\u2089\u2088 : (z.re : \u211d) > 0 := by positivity\n          have h\u2089\u2089 : (z.re : \u211d) = Real.sqrt 3 := by\n            nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num),\n              sq_nonneg ((z.re : \u211d) - Real.sqrt 3)]\n          exact h\u2089\u2089\n        exact h\u2089\u2086\n      have h\u2081\u2080 : (z.im : \u211d) = 1 := by\n        have h\u2081\u2080\u2081 : 0 < (z.re : \u211d) := by positivity\n        have h\u2081\u2080\u2082 : 0 < (z.im : \u211d) := by positivity\n        have h\u2081\u2080\u2083 : (z.re : \u211d) ^ 3 - 3 * (z.re : \u211d) * (z.im : \u211d) ^ 2 = 0 := h\u2087\n        have h\u2081\u2080\u2084 : 3 * (z.re : \u211d) ^ 2 * (z.im : \u211d) - (z.im : \u211d) ^ 3 = 8 := h\u2088\n        have h\u2081\u2080\u2085 : (z.im : \u211d) = 1 := by\n          nlinarith [sq_nonneg ((z.re : \u211d) - Real.sqrt 3), sq_nonneg ((z.im : \u211d) - 1),\n            Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num),\n            sq_nonneg ((z.re : \u211d) - Real.sqrt 3), sq_nonneg ((z.im : \u211d) - 1)]\n        exact h\u2081\u2080\u2085\n      have h\u2081\u2081 : z = Real.sqrt 3 + I := by\n        apply Complex.ext <;> simp_all [Complex.ext_iff, pow_two, pow_three] <;>\n          (try ring_nf at * <;> norm_num at * <;> nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]) <;>\n          (try linarith) <;>\n          (try nlinarith)\n      exact h\u2081\u2081\n    -- Conclude that z = Real.sqrt 3 + I\n    rw [h\u2084]\n  \u00b7 -- Prove the reverse direction: if z = Real.sqrt 3 + I, then it satisfies the conditions\n    intro h\n    rw [h]\n    constructor\n    \u00b7 -- Prove that (Real.sqrt 3 + I)^3 = 8 * I\n      norm_num [Complex.ext_iff, pow_three, pow_two, Complex.ext_iff, Complex.I_mul_I,\n        Real.sqrt_eq_iff_sq_eq]\n      <;>\n      ring_nf <;>\n      norm_num <;>\n      (try\n        {\n          nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]\n        }) <;>\n      (try\n        {\n          field_simp [Real.sqrt_eq_iff_sq_eq] <;>\n          ring_nf <;>\n          norm_num <;>\n          nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]\n        })\n    \u00b7 -- Prove that the real and imaginary parts are positive\n      constructor\n      \u00b7 -- Prove that the real part is positive\n        exact Real.sqrt_pos.mpr (by norm_num)\n      \u00b7 -- Prove that the imaginary part is positive\n        norm_num [Complex.ext_iff]\n        <;>\n        simp_all [Complex.ext_iff, pow_two, pow_three]\n        <;>\n        norm_num\n        <;>\n        linarith [Real.sqrt_nonneg 3]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 21, "column": 72, "endLine": 39, "endColumn": 12, "data": "unsolved goals\nI z : \u2102\nh : z ^ 3 = 8 * I \u2227 0 < z.re \u2227 0 < z.im\nh\u2082 : 0 < z.re\nh\u2083 : 0 < z.im\nh\u2085 : z.re > 0\nh\u2086 : z.im > 0\nh\u2081 : -(z.re * z.im ^ 2 * 3) + z.re ^ 3 = I.re * 8 \u2227 z.re ^ 2 * z.im * 3 - z.im ^ 3 = I.im * 8\n\u22a2 -(z.re * z.im ^ 2 * 3) + z.re ^ 3 = 0"}, {"line": 40, "column": 72, "endLine": 58, "endColumn": 12, "data": "unsolved goals\nI z : \u2102\nh : z ^ 3 = 8 * I \u2227 0 < z.re \u2227 0 < z.im\nh\u2082 : 0 < z.re\nh\u2083 : 0 < z.im\nh\u2085 : z.re > 0\nh\u2086 : z.im > 0\nh\u2087 : z.re ^ 3 - 3 * z.re * z.im ^ 2 = 0\nh\u2081 : -(z.re * z.im ^ 2 * 3) + z.re ^ 3 = I.re * 8 \u2227 z.re ^ 2 * z.im * 3 - z.im ^ 3 = I.im * 8\n\u22a2 z.re ^ 2 * z.im * 3 - z.im ^ 3 = 8"}, {"line": 65, "column": 10, "endLine": 67, "endColumn": 77, "data": "linarith failed to find a contradiction\ncase h1.h\nI z : \u2102\nh : z ^ 3 = 8 * I \u2227 0 < z.re \u2227 0 < z.im\nh\u2081 : z ^ 3 = 8 * I\nh\u2082 : 0 < z.re\nh\u2083 : 0 < z.im\nh\u2085 : z.re > 0\nh\u2086 : z.im > 0\nh\u2087 : z.re ^ 3 - 3 * z.re * z.im ^ 2 = 0\nh\u2088 : 3 * z.re ^ 2 * z.im - z.im ^ 3 = 8\nh\u2089\u2081 : 0 < z.re\nh\u2089\u2082 : 0 < z.im\nh\u2089\u2083 : z.re ^ 3 - 3 * z.re * z.im ^ 2 = 0\nh\u2089\u2084 : 3 * z.re ^ 2 * z.im - z.im ^ 3 = 8\na\u271d : z.im < 1\n\u22a2 False failed"}, {"line": 83, "column": 10, "endLine": 85, "endColumn": 77, "data": "linarith failed to find a contradiction\ncase h1.h\nI z : \u2102\nh : z ^ 3 = 8 * I \u2227 0 < z.re \u2227 0 < z.im\nh\u2081 : z ^ 3 = 8 * I\nh\u2082 : 0 < z.re\nh\u2083 : 0 < z.im\nh\u2085 : z.re > 0\nh\u2086 : z.im > 0\nh\u2087 : z.re ^ 3 - 3 * z.re * z.im ^ 2 = 0\nh\u2088 : 3 * z.re ^ 2 * z.im - z.im ^ 3 = 8\nh\u2089 : z.re = \u221a3\nh\u2081\u2080\u2081 : 0 < z.re\nh\u2081\u2080\u2082 : 0 < z.im\nh\u2081\u2080\u2083 : z.re ^ 3 - 3 * z.re * z.im ^ 2 = 0\nh\u2081\u2080\u2084 : 3 * z.re ^ 2 * z.im - z.im ^ 3 = 8\na\u271d : z.im < 1\n\u22a2 False failed"}, {"line": 99, "column": 4, "endLine": 115, "endColumn": 10, "data": "unsolved goals\ncase h.mpr.left\nI z : \u2102\nh : z = \u2191\u221a3 + I\n\u22a2 \u221a3 * I.re ^ 2 * 3 - \u221a3 * I.im ^ 2 * 3 + 3 * I.re * 3 + (\u221a3 ^ 3 - I.re * I.im ^ 2 * 3) + I.re ^ 3 = I.re * 8 \u2227\n    \u221a3 * I.re * I.im * 6 + 3 * I.im * 3 + (I.re ^ 2 * I.im * 3 - I.im ^ 3) = I.im * 8"}, {"line": 119, "column": 33, "endLine": 119, "endColumn": 44, "data": "unsolved goals\nI z : \u2102\nh : z = \u2191\u221a3 + I\n\u22a2 0 < ?m.169084"}, {"line": 127, "column": 8, "endLine": 127, "endColumn": 37, "data": "linarith failed to find a contradiction\ncase h.mpr.right.right.h\nI z : \u2102\nh : z.re = \u221a3 + I.re \u2227 z.im = I.im\na\u271d : 0 \u2265 I.im\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The natural language states that the set of ALL solutions to z\u00b3 = 8i is {\u221a3+i, -\u221a3+i, -2i}, but the Lean formalization defines a different set: only those solutions that also satisfy Re(z) > 0 AND Im(z) > 0, which equals {\u221a3 + i}. The Lean formalization is finding a filtered subset of solutions rather than the complete solution set mentioned in the natural language conclusion.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language states that the set of ALL solutions to z\u00b3 = 8i is {\u221a3+i, -\u221a3+i, -2i}, but the Lean formalization defines a different set: only those solutions that also satisfy Re(z) > 0 AND Im(z) > 0, which equals {\u221a3 + i}. The Lean formalization is finding a filtered subset of solutions rather than the complete solution set mentioned in the natural language conclusion.']"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Applying the condition $\\operatorname{Im}(z) > 0$ to this set eliminates the root $-2i$, leaving the possible solutions as $\\{\\sqrt{3}+i, -\\sqrt{3}+i\\}$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^3 = 8i$ [tc_2];\n\u2022 $\\operatorname{Im}(z) > 0$ [tc_3];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_4];\n\u2022 The polar form of $8i$ is $8e^{i\\pi/2}$ [l1];\n\u2022 The solutions to $z^3 = 8i$ are of the form $z_k = 2e^{i(\\frac{\\pi/2 + 2k\\pi}{3})}$ for $k \\in \\{0, 1, 2\\}$ [l2];\n\u2022 The set of all solutions to $z^3 = 8i$ is $\\{\\sqrt{3}+i, -\\sqrt{3}+i, -2i\\}$ [l3];\nTherefore, we conclude:\n\u2022 $z$ must be in the set $\\{\\sqrt{3}+i, -\\sqrt{3}+i\\}$ [l4].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 (z : \u2102) \n  (tc_1 : z^3 = 8 * I) \n  (tc_2 : 0 < z.re) \n  (tc_3 : 0 < z.im) \n  (l1 : (8 : \u2102) * I = 8 * Complex.exp (I * Real.pi / 2))\n  (l2 : \u2200 k : \u2124, k \u2208 ({0, 1, 2} : Set \u2124) \u2192 \n    (2 : \u2102) * Complex.exp (I * (Real.pi / 2 + 2 * (k : \u211d) * Real.pi) / 3) ^ 3 = 8 * I)\n  (l3 : {z : \u2102 | z^3 = 8 * I} = {Real.sqrt 3 + I, -Real.sqrt 3 + I, -2 * I}) :\n  z \u2208 ({Real.sqrt 3 + I, -Real.sqrt 3 + I} : Set \u2102) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 (z : \u2102) \n  (tc_1 : z^3 = 8 * I) \n  (tc_2 : 0 < z.re) \n  (tc_3 : 0 < z.im) \n  (l1 : (8 : \u2102) * I = 8 * Complex.exp (I * Real.pi / 2))\n  (l2 : \u2200 k : \u2124, k \u2208 ({0, 1, 2} : Set \u2124) \u2192 \n    (2 : \u2102) * Complex.exp (I * (Real.pi / 2 + 2 * (k : \u211d) * Real.pi) / 3) ^ 3 = 8 * I)\n  (l3 : {z : \u2102 | z^3 = 8 * I} = {Real.sqrt 3 + I, -Real.sqrt 3 + I, -2 * I}) :\n  z \u2208 ({Real.sqrt 3 + I, -Real.sqrt 3 + I} : Set \u2102) := by\n  have h4 : z \u2208 ({Real.sqrt 3 + I, -Real.sqrt 3 + I, -2 * I} : Set \u2102) := by\n    have h4\u2081 : z \u2208 {z : \u2102 | z ^ 3 = 8 * I} := by\n      simpa using tc_1\n    rw [l3] at h4\u2081\n    simpa using h4\u2081\n  have h5 : z \u2260 -2 * I := by\n    intro h\n    have h\u2081 : z.re = 0 := by\n      rw [h]\n      simp [Complex.ext_iff, Complex.I_mul_I]\n      <;> norm_num\n    have h\u2082 : 0 < z.re := tc_2\n    linarith\n  have h6 : z \u2208 ({Real.sqrt 3 + I, -Real.sqrt 3 + I} : Set \u2102) := by\n    simp only [Set.mem_insert_iff, Set.mem_singleton_iff] at h4 \u22a2\n    rcases h4 with (rfl | rfl | rfl)\n    \u00b7 -- Case z = Real.sqrt 3 + I\n      simp [Set.mem_insert_iff, Set.mem_singleton_iff]\n    \u00b7 -- Case z = -Real.sqrt 3 + I\n      simp [Set.mem_insert_iff, Set.mem_singleton_iff]\n    \u00b7 -- Case z = -2 * I\n      exfalso\n      apply h5\n      <;> simp_all [Complex.ext_iff, Complex.I_mul_I, pow_two, pow_three]\n      <;> norm_num\n      <;>\n      (try\n        {\n          nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]\n        })\n  exact h6", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 20, "column": 26, "endLine": 23, "endColumn": 18, "data": "unsolved goals\nI z : \u2102\ntc_1 : z ^ 3 = 8 * I\ntc_2 : 0 < z.re\ntc_3 : 0 < z.im\nl1 : 8 * I = 8 * Complex.exp (I * \u2191\u03c0 / 2)\nl2 : \u2200 k \u2208 {0, 1, 2}, 2 * Complex.exp (I * (\u2191\u03c0 / 2 + 2 * \u2191\u2191k * \u2191\u03c0) / 3) ^ 3 = 8 * I\nl3 : {z | z ^ 3 = 8 * I} = {\u2191\u221a3 + I, -\u2191\u221a3 + I, -2 * I}\nh4 : z \u2208 {\u2191\u221a3 + I, -\u2191\u221a3 + I, -2 * I}\nh : z = -2 * I\n\u22a2 I.re = 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The complex number assumption is correctly captured through the type declaration z : \u2102", "The equation z\u00b3 = 8i is correctly represented as z^3 = 8 * I, but the parameter label is inconsistent (tc_1 vs tc_2)", "The condition Im(z) > 0 is correctly represented as 0 < z.im, with correct labeling", "The condition Re(z) > 0 is correctly represented as 0 < z.re, but labeled as tc_2 instead of tc_4", "The polar form equation is correctly formalized using Complex.exp and appropriate constants", "The solution form statement has a major logical difference - it states that the expressions cubed equal 8i, rather than stating these are the actual solutions to the equation", "The solution set is correctly represented with the proper complex number expressions", "The conclusion correctly identifies the subset of solutions satisfying the given constraints", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The complex number assumption is correctly captured through the type declaration z : \u2102', 'The equation z\u00b3 = 8i is correctly represented as z^3 = 8 * I, but the parameter label is inconsistent (tc_1 vs tc_2)', 'The condition Im(z) > 0 is correctly represented as 0 < z.im, with correct labeling', 'The condition Re(z) > 0 is correctly represented as 0 < z.re, but labeled as tc_2 instead of tc_4', 'The polar form equation is correctly formalized using Complex.exp and appropriate constants', 'The solution form statement has a major logical difference - it states that the expressions cubed equal 8i, rather than stating these are the actual solutions to the equation', 'The solution set is correctly represented with the proper complex number expressions', 'The conclusion correctly identifies the subset of solutions satisfying the given constraints']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Finally, applying the condition $\\operatorname{Re}(z) > 0$ to this set of possible solutions uniquely determines the solution to be $z = \\sqrt{3}+i$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^3 = 8i$ [tc_2];\n\u2022 $\\operatorname{Im}(z) > 0$ [tc_3];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_4];\n\u2022 The polar form of $8i$ is $8e^{i\\pi/2}$ [l1];\n\u2022 The solutions to $z^3 = 8i$ are of the form $z_k = 2e^{i(\\frac{\\pi/2 + 2k\\pi}{3})}$ for $k \\in \\{0, 1, 2\\}$ [l2];\n\u2022 The set of all solutions to $z^3 = 8i$ is $\\{\\sqrt{3}+i, -\\sqrt{3}+i, -2i\\}$ [l3];\n\u2022 $z$ must be in the set $\\{\\sqrt{3}+i, -\\sqrt{3}+i\\}$ [l4];\nTherefore, we conclude:\n\u2022 $z = \\sqrt{3}+i$ [ts_1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition (z : \u2102) \n  (h1 : z^3 = 8 * I) \n  (h2 : 0 < z.re) \n  (h3 : 0 < z.im) :\n  z = Real.sqrt 3 + I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition (z : \u2102) \n  (h1 : z^3 = 8 * Complex.I) \n  (h2 : 0 < z.re) \n  (h3 : 0 < z.im) :\n  z = Real.sqrt 3 + Complex.I := by\n  have h4 : z.re ^ 3 - 3 * z.re * z.im ^ 2 = 0 := by\n    -- Extract the real part of the equation z^3 = 8i\n    have h5 := h1\n    simp [Complex.ext_iff, pow_three, pow_two, Complex.ext_iff, Complex.I_mul_I, Complex.ext_iff, Complex.I_mul_I] at h5 \u22a2\n    -- Simplify the expressions to get the real part equation\n    <;> ring_nf at h5 \u22a2 <;> norm_num at h5 \u22a2 <;>\n    (try linarith) <;>\n    (try nlinarith) <;>\n    (try\n      {\n        nlinarith [sq_nonneg (z.re - z.im), sq_nonneg (z.re + z.im)]\n      }) <;>\n    (try\n      {\n        nlinarith [sq_nonneg (z.re - z.im), sq_nonneg (z.re + z.im)]\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_three, pow_two, Complex.ext_iff, Complex.I_mul_I, Complex.ext_iff]\n        <;> ring_nf at *\n        <;> norm_num at *\n        <;> nlinarith [sq_nonneg (z.re - z.im), sq_nonneg (z.re + z.im)]\n      })\n  \n  have h5 : 3 * z.re ^ 2 * z.im - z.im ^ 3 = 8 := by\n    -- Extract the imaginary part of the equation z^3 = 8i\n    have h6 := h1\n    simp [Complex.ext_iff, pow_three, pow_two, Complex.ext_iff, Complex.I_mul_I, Complex.ext_iff, Complex.I_mul_I] at h6 \u22a2\n    -- Simplify the expressions to get the imaginary part equation\n    <;> ring_nf at h6 \u22a2 <;> norm_num at h6 \u22a2 <;>\n    (try linarith) <;>\n    (try nlinarith) <;>\n    (try\n      {\n        nlinarith [sq_nonneg (z.re - z.im), sq_nonneg (z.re + z.im)]\n      }) <;>\n    (try\n      {\n        nlinarith [sq_nonneg (z.re - z.im), sq_nonneg (z.re + z.im)]\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_three, pow_two, Complex.ext_iff, Complex.I_mul_I, Complex.ext_iff]\n        <;> ring_nf at *\n        <;> norm_num at *\n        <;> nlinarith [sq_nonneg (z.re - z.im), sq_nonneg (z.re + z.im)]\n      })\n  \n  have h6 : z.re ^ 2 = 3 * z.im ^ 2 := by\n    have h7 : z.re > 0 := h2\n    have h8 : z.re ^ 3 - 3 * z.re * z.im ^ 2 = 0 := h4\n    have h9 : z.re * (z.re ^ 2 - 3 * z.im ^ 2) = 0 := by linarith\n    have h10 : z.re ^ 2 - 3 * z.im ^ 2 = 0 := by\n      apply mul_left_cancel\u2080 (show (z.re : \u211d) \u2260 0 by linarith)\n      linarith\n    linarith\n  \n  have h7 : z.im = 1 := by\n    have h8 : 3 * z.re ^ 2 * z.im - z.im ^ 3 = 8 := h5\n    have h9 : z.re ^ 2 = 3 * z.im ^ 2 := h6\n    have h10 : z.im > 0 := h3\n    have h11 : 3 * (3 * z.im ^ 2) * z.im - z.im ^ 3 = 8 := by\n      calc\n        3 * (3 * z.im ^ 2) * z.im - z.im ^ 3 = 3 * z.re ^ 2 * z.im - z.im ^ 3 := by\n          rw [h9]\n          <;> ring\n        _ = 8 := by rw [h8]\n    have h12 : 9 * z.im ^ 3 - z.im ^ 3 = 8 := by\n      ring_nf at h11 \u22a2\n      <;> linarith\n    have h13 : 8 * z.im ^ 3 = 8 := by linarith\n    have h14 : z.im ^ 3 = 1 := by linarith\n    have h15 : z.im = 1 := by\n      have h16 : z.im > 0 := h3\n      have h17 : z.im ^ 3 = 1 := h14\n      have h18 : z.im = 1 := by\n        nlinarith [sq_nonneg (z.im - 1), sq_nonneg (z.im + 1)]\n      exact h18\n    exact h15\n  \n  have h8 : z.re = Real.sqrt 3 := by\n    have h9 : z.re > 0 := h2\n    have h10 : z.re ^ 2 = 3 * z.im ^ 2 := h6\n    have h11 : z.im = 1 := h7\n    have h12 : z.re ^ 2 = 3 := by\n      calc\n        z.re ^ 2 = 3 * z.im ^ 2 := h10\n        _ = 3 * (1 : \u211d) ^ 2 := by rw [h11]\n        _ = 3 := by norm_num\n    have h13 : z.re = Real.sqrt 3 := by\n      have h14 : z.re > 0 := h2\n      have h15 : z.re ^ 2 = 3 := h12\n      have h16 : z.re = Real.sqrt 3 := by\n        apply Eq.symm\n        rw [Real.sqrt_eq_iff_sq_eq] <;> nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show (0 : \u211d) \u2264 3 by norm_num)]\n      exact h16\n    exact h13\n  \n  have h9 : z = Real.sqrt 3 + Complex.I := by\n    have h10 : z.re = Real.sqrt 3 := h8\n    have h11 : z.im = 1 := h7\n    have h12 : z = \u27e8Real.sqrt 3, 1\u27e9 := by\n      apply Complex.ext <;> simp [h10, h11, Complex.ext_iff]\n      <;> ring_nf <;> norm_num\n    rw [h12]\n    <;> simp [Complex.ext_iff, pow_two, pow_three, Complex.ext_iff, Complex.I_mul_I]\n    <;> ring_nf\n    <;> norm_num\n    <;>\n    (try\n      {\n        nlinarith [Real.sqrt_nonneg 3, Real.sq_sqrt (show 0 \u2264 3 by norm_num)]\n      })\n  \n  apply h9", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 4}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all essential mathematical components from the natural language. The core equation z\u00b3 = 8i is properly represented as z^3 = 8 * I, the constraints on real and imaginary parts are correctly translated as 0 < z.re and 0 < z.im, and the conclusion z = \u221a3 + i is accurately stated as z = Real.sqrt 3 + I. While the natural language provides detailed intermediate mathematical reasoning about polar forms and solution sets, the Lean theorem statement appropriately focuses on the logical structure (hypotheses \u2192 conclusion) that captures the essential mathematical claim. The intermediate steps would naturally belong in the proof rather than the theorem statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_4", "label": "tc_4", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    