
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $X_1, \dots, X_n$ be a sequence of pairwise uncorrelated random variables. Suppose each variable has the same mean $E[X_i] = \mu$ and the same finite variance $Var(X_i) = \sigma^2$. Let the sample mean be defined as $\bar{X}_n = \frac{1}{n} \sum_{i=1}^n X_i$. Then, the expectation of the sample mean is $E[\bar{X}_n] = \mu$, its variance is $Var(\bar{X}_n) = \frac{\sigma^2}{n}$, and for any $\epsilon > 0$, the probability of deviation from the mean is bounded by $P(|\bar{X}_n - \mu| \ge \epsilon) \le \frac{\sigma^2}{n\epsilon^2}$.

Proof: First, we determine the expectation of the sample mean. Using the definition of $\bar{X}_n$ and the linearity of expectation, we find $E[\bar{X}_n] = E\left[\frac{1}{n} \sum_{i=1}^n X_i\right] = \frac{1}{n} \sum_{i=1}^n E[X_i]$. Since we are given that $E[X_i] = \mu$ for all $i$, this simplifies to $E[\bar{X}_n] = \frac{1}{n} \sum_{i=1}^n \mu = \mu$. 

Next, we compute the variance. From the properties of variance and the definition of $\bar{X}_n$, it follows that $Var(\bar{X}_n) = Var\left(\frac{1}{n} \sum_{i=1}^n X_i\right) = \frac{1}{n^2} Var\left(\sum_{i=1}^n X_i\right)$. As the random variables are pairwise uncorrelated, the variance of their sum is the sum of their variances: $Var\left(\sum_{i=1}^n X_i\right) = \sum_{i=1}^n Var(X_i)$. Therefore, by combining the last two results, we get $Var(\bar{X}_n) = \frac{1}{n^2} \sum_{i=1}^n Var(X_i)$. Using the given condition $Var(X_i) = \sigma^2$, we calculate the final variance: $Var(\bar{X}_n) = \frac{1}{n^2} \sum_{i=1}^n \sigma^2 = \frac{\sigma^2}{n}$.

Finally, we establish the probability bound. We use the principle of Chebyshev's inequality, which states that for any random variable $Y$ with a finite mean $E[Y]$ and finite variance $Var(Y)$, the inequality $P(|Y - E[Y]| \ge \epsilon) \le \frac{Var(Y)}{\epsilon^2}$ holds for any $\epsilon > 0$. By applying this principle to the random variable $Y = \bar{X}_n$ and substituting our previously derived results for its mean and variance, we conclude that $P(|\bar{X}_n - \mu| \ge \epsilon) \le \frac{\sigma^2}{n\epsilon^2}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $X_1, \\dots, X_n$ be a sequence of pairwise uncorrelated random variables.", "statement": "Premise:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (X : \u2115 \u2192 \u211d \u2192 \u211d) (n : \u2115) (\u03bc \u03c3 : \u211d) (\u03b5 : \u211d)\n(tc_1 : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n  \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n(tc_2 : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n(tc_3 : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2)\n(tc_4 : 0 < \u03b5)\n(tc_5 : 0 < \u03c3^2)\n(tc_6 : 0 < n)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly represents the sequence of random variables X\u2081, ..., X\u2099 as X : \u2115 \u2192 \u211d \u2192 \u211d with the constraint that i < n, which is mathematically equivalent to the natural language description", "The pairwise uncorrelated condition in tc_1 correctly formalizes the mathematical concept that for distinct random variables Xi and Xj, their covariance is zero (equivalently, E[XiXj] = E[Xi]E[Xj])", "The additional conditions tc_2 through tc_6 are extra constraints not mentioned in the natural language premise, but as noted in the instructions, extra conditions that are logically consistent are acceptable and don't constitute an inconsistency"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "Suppose each variable has the same mean $E[X_i] = \\mu$ and the same finite variance $Var(X_i) = \\sigma^2$.", "statement": "Premise:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (n : \u2115) (\u03bc \u03c3 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n(tc_1 : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n  \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n(tc_2 : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n(tc_3 : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2)\n(tc_4 : 0 < \u03c3^2)\n(tc_5 : 0 < n)", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean condition tc_1 correctly formalizes pairwise uncorrelatedness using the definition that E[X_i * X_j] = E[X_i] * E[X_j] for i \u2260 j. The integral notation represents expectation in the continuous case.", "The Lean condition tc_2 correctly formalizes E[X_i] = \u03bc for all i < n using integral notation for expectation.", "The Lean condition tc_3 correctly formalizes Var(X_i) = \u03c3\u00b2 using the identity Var(X) = E[X\u00b2] - (E[X])\u00b2 = E[X\u00b2] - \u03bc\u00b2, so E[X\u00b2] = \u03bc\u00b2 + \u03c3\u00b2. The additional constraints tc_4 and tc_5 are reasonable mathematical assumptions not contradicting the natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let the sample mean be defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$.", "statement": "Definition:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2];\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem def_1 (n : \u2115) (\u03bc \u03c3 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (tc_1 : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (tc_2 : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (tc_3 : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2)\n  (tc_4 : 0 < \u03c3^2)\n  (tc_5 : 0 < n) :\n  let X_bar : \u211d \u2192 \u211d := fun x => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x\n  (\u222b x, X_bar x = \u03bc) \u2227 \n  (\u222b x, (X_bar x)^2 = \u03bc^2 + \u03c3^2 / n) \u2227\n  (\u2200 \u03b5 : \u211d, 0 < \u03b5 \u2192 \u222b x, (abs (X_bar x - \u03bc) \u2265 \u03b5) \u2264 \u03c3^2 / (n * \u03b5^2)) := by sorry", "lean_pass": false, "error_msg": [{"line": 17, "column": 20, "endLine": 17, "endColumn": 48, "data": "failed to synthesize\n  NormedAddCommGroup Prop\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "tc_3": {"id": "tc_3", "natural_language": "for any $\\epsilon > 0$", "statement": "Premise:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2];\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 $\\epsilon$ is a real number such that $\\epsilon > 0$ [tc_3].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_3 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (\u03b5 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_epsilon : 0 < \u03b5)\n  (h_uncorr : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x\n  (\u222b x, X_bar x = \u03bc) \u2227 \n  (\u222b x, (X_bar x)^2 = \u03bc^2 + \u03c3^2 / n) \u2227\n  (\u222b x, (X_bar x - \u03bc)^2 \u2265 \u03b5^2 \u2192 1 \u2264 \u03c3^2 / (n * \u03b5^2)) := by sorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The uncorrelatedness condition in Lean correctly captures pairwise uncorrelatedness using the integral formulation E[XiXj] = E[Xi]E[Xj]", "The expectation condition perfectly matches with E[Xi] = \u03bc for all i < n", "The variance condition is correctly formulated using E[Xi\u00b2] = \u03bc\u00b2 + \u03c3\u00b2 which is equivalent to Var(Xi) = \u03c3\u00b2", "The sample mean definition in Lean exactly matches the mathematical definition as (1/n) * sum of Xi", "The epsilon positivity condition \u03b5 > 0 is perfectly captured. The additional constraints h_pos (n > 0) and h_sigma (\u03c3\u00b2 > 0) are reasonable mathematical assumptions that don't contradict the natural language"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "Using the definition of $\\bar{X}_n$ and the linearity of expectation, we find $E[\\bar{X}_n] = E\\left[\\frac{1}{n} \\sum_{i=1}^n X_i\\right] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2];\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 $\\epsilon$ is a real number such that $\\epsilon > 0$ [tc_3].\nTherefore, we conclude:\n\u2022 $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$ [l1].", "dependencies": ["tc_1", "tc_2", "def_1", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x\n  \u222b x, X_bar x = \u03bc := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x\n  \u222b x, X_bar x = \u03bc := by\n  intro X_bar\n  have h1 : \u222b x, X_bar x = (1 / n : \u211d) * \u2211 i in Finset.range n, \u222b x, X i x := by\n    calc\n      \u222b x, X_bar x = \u222b x, (1 / n : \u211d) * \u2211 i in Finset.range n, X i x := by\n        simp [X_bar]\n      _ = (1 / n : \u211d) * \u222b x, \u2211 i in Finset.range n, X i x := by\n        -- Factor out the constant (1 / n : \u211d) from the integral\n        rw [MeasureTheory.integral_mul_left]\n      _ = (1 / n : \u211d) * \u2211 i in Finset.range n, \u222b x, X i x := by\n        -- Use the linearity of the integral to swap the sum and the integral\n        have h : \u222b x, \u2211 i in Finset.range n, X i x = \u2211 i in Finset.range n, \u222b x, X i x := by\n          -- Prove that the integral of the sum is the sum of the integrals\n          classical\n          -- Use induction on the finite set Finset.range n\n          have h\u2082 : \u2200 (s : Finset \u2115), \u222b x : \u211d, \u2211 i in s, X i x = \u2211 i in s, \u222b x : \u211d, X i x := by\n            intro s\n            induction' s using Finset.induction_on with i s hi ih\n            \u00b7 simp\n            \u00b7 have h\u2083 : \u222b x : \u211d, \u2211 j in insert i s, X j x = \u222b x : \u211d, (X i x + \u2211 j in s, X j x) := by\n                congr 1\n                <;> simp_all [Finset.sum_insert, hi]\n                <;> congr 1\n                <;> ext x\n                <;> simp_all [add_comm]\n              rw [h\u2083]\n              have h\u2084 : \u222b x : \u211d, (X i x + \u2211 j in s, X j x) = \u222b x : \u211d, (X i x + (\u2211 j in s, X j) x) := by\n                simp [Finset.sum_apply]\n              rw [h\u2084]\n              have h\u2085 : \u222b x : \u211d, (X i x + (\u2211 j in s, X j) x) = \u222b x : \u211d, X i x + \u222b x : \u211d, (\u2211 j in s, X j) x := by\n                apply MeasureTheory.integral_add\n              rw [h\u2085]\n              have h\u2086 : \u222b x : \u211d, (\u2211 j in s, X j) x = \u2211 j in s, \u222b x : \u211d, X j x := by\n                simp_all [Finset.sum_apply]\n              rw [h\u2086]\n              <;> simp_all [Finset.sum_insert, hi]\n              <;> ring\n              <;> simp_all [add_assoc]\n          -- Apply the general result to Finset.range n\n          have h\u2083 := h\u2082 (Finset.range n)\n          exact h\u2083\n        -- Substitute the result back into the expression\n        rw [h]\n        <;> simp [Finset.mul_sum]\n        <;> ring\n        <;> norm_cast\n  \n  have h2 : (1 / n : \u211d) * \u2211 i in Finset.range n, \u222b x, X i x = (1 / n : \u211d) * \u2211 i in Finset.range n, \u03bc := by\n    have h3 : \u2200 i \u2208 Finset.range n, \u222b x, X i x = \u03bc := by\n      intro i hi\n      have h4 : i < n := Finset.mem_range.mp hi\n      exact h_mean i h4\n    calc\n      (1 / n : \u211d) * \u2211 i in Finset.range n, \u222b x, X i x = (1 / n : \u211d) * \u2211 i in Finset.range n, (\u222b x, X i x) := by rfl\n      _ = (1 / n : \u211d) * \u2211 i in Finset.range n, \u03bc := by\n        apply congr_arg (fun x => (1 / n : \u211d) * x)\n        apply Finset.sum_congr rfl\n        intro i hi\n        rw [h3 i hi]\n  \n  have h3 : (1 / n : \u211d) * \u2211 i in Finset.range n, \u03bc = \u03bc := by\n    have h4 : (\u2211 i in Finset.range n, \u03bc : \u211d) = n * \u03bc := by\n      simp [Finset.sum_const, Finset.card_range]\n      <;> ring\n    have h5 : (n : \u211d) \u2260 0 := by\n      norm_cast\n      <;> linarith\n    calc\n      (1 / n : \u211d) * \u2211 i in Finset.range n, \u03bc = (1 / n : \u211d) * (n * \u03bc : \u211d) := by rw [h4]\n      _ = \u03bc := by\n        field_simp [h5]\n        <;> ring\n        <;> field_simp [h5]\n        <;> ring\n  \n  have h4 : \u222b x, X_bar x = \u03bc := by\n    calc\n      \u222b x, X_bar x = (1 / n : \u211d) * \u2211 i in Finset.range n, \u222b x, X i x := h1\n      _ = (1 / n : \u211d) * \u2211 i in Finset.range n, \u03bc := h2\n      _ = \u03bc := h3\n  \n  exact h4", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 39, "column": 16, "endLine": 39, "endColumn": 48, "data": "tactic 'apply' failed, failed to unify\n  \u222b (a : ?\u03b1), ?f a + ?g a \u2202?\u03bc = \u222b (a : ?\u03b1), ?f a \u2202?\u03bc + \u222b (a : ?\u03b1), ?g a \u2202?\u03bc\nwith\n  \u222b (x : \u211d), X i x + (\u2211 j \u2208 s, X j) x = \u222b (x : \u211d), X i x + \u222b (x : \u211d), (\u2211 j \u2208 s, X j) x\nn : \u2115\n\u03bc \u03c3 : \u211d\nX : \u2115 \u2192 \u211d \u2192 \u211d\nh_pos : 0 < n\nh_mean : \u2200 i < n, \u222b (x : \u211d), X i x = \u03bc\nX_bar : \u211d \u2192 \u211d := fun x => 1 / \u2191n * \u2211 i \u2208 Finset.range n, X i x\ni : \u2115\ns : Finset \u2115\nhi : i \u2209 s\nih : \u222b (x : \u211d), \u2211 i \u2208 s, X i x = \u2211 i \u2208 s, \u222b (x : \u211d), X i x\nh\u2083 : \u222b (x : \u211d), \u2211 j \u2208 insert i s, X j x = \u222b (x : \u211d), X i x + \u2211 j \u2208 s, X j x\nh\u2084 : \u222b (x : \u211d), X i x + \u2211 j \u2208 s, X j x = \u222b (x : \u211d), X i x + (\u2211 j \u2208 s, X j) x\n\u22a2 \u222b (x : \u211d), X i x + (\u2211 j \u2208 s, X j) x = \u222b (x : \u211d), X i x + \u222b (x : \u211d), (\u2211 j \u2208 s, X j) x"}, {"line": 46, "column": 18, "endLine": 46, "endColumn": 38, "data": "simp_all made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The pairwise uncorrelated condition [tc_1] is completely missing from the Lean formalization, which is a key assumption in the natural language premise.", "The variance condition Var(Xi) = \u03c3\u00b2 is mentioned in natural language but not formalized in Lean. The parameter \u03c3 is declared but never constrained.", "The sample mean definition is correctly captured in both natural language and Lean formalization using the same mathematical structure.", "The condition \u03b5 > 0 [tc_3] is stated as an assumption in natural language but is completely absent from the Lean formalization.", "The conclusion captures the same mathematical result (expectation of sample mean equals \u03bc) but the Lean version doesn't explicitly show the intermediate form (1/n) \u2211\u1d62\u208c\u2081\u207f E[X\u1d62] mentioned in natural language.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The pairwise uncorrelated condition [tc_1] is completely missing from the Lean formalization, which is a key assumption in the natural language premise.', 'The variance condition Var(Xi) = \u03c3\u00b2 is mentioned in natural language but not formalized in Lean. The parameter \u03c3 is declared but never constrained.', 'The sample mean definition is correctly captured in both natural language and Lean formalization using the same mathematical structure.', 'The condition \u03b5 > 0 [tc_3] is stated as an assumption in natural language but is completely absent from the Lean formalization.', \"The conclusion captures the same mathematical result (expectation of sample mean equals \u03bc) but the Lean version doesn't explicitly show the intermediate form (1/n) \u2211\u1d62\u208c\u2081\u207f E[X\u1d62] mentioned in natural language.\"]"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Since we are given that $E[X_i] = \\mu$ for all $i$, this simplifies to $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n \\mu = \\mu$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2];\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 $\\epsilon$ is a real number such that $\\epsilon > 0$ [tc_3];\n\u2022 $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$ [l1].\nTherefore, we conclude:\n\u2022 $E[\\bar{X}_n] = \\mu$ [ts_1].", "dependencies": ["tc_1", "tc_2", "def_1", "tc_3", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 \n  (n : \u2115) (\u03bc : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc) :\n  \u222b x, (1 / n : \u211d) * \u2211 i in Finset.range n, X i x = \u03bc := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Mathlib.MeasureTheory.Integral.Integral\nimport Mathlib.MeasureTheory.Integral.SetIntegral\nimport Mathlib.MeasureTheory.Integral.MulIntegral\nimport Mathlib.MeasureTheory.Integral.LpSpace\n\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 \n  (n : \u2115) (\u03bc : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc) :\n  \u222b x, (1 / n : \u211d) * \u2211 i in Finset.range n, X i x = \u03bc := by\n  have h_sum_integrals : \u2211 i in Finset.range n, \u222b x, X i x = (n : \u211d) * \u03bc := by\n    calc\n      \u2211 i in Finset.range n, \u222b x, X i x = \u2211 i in Finset.range n, \u03bc := by\n        apply Finset.sum_congr rfl\n        intro i hi\n        have h\u2081 : i < n := Finset.mem_range.mp hi\n        have h\u2082 : \u222b x, X i x = \u03bc := h_mean i h\u2081\n        rw [h\u2082]\n      _ = (n : \u211d) * \u03bc := by\n        simp [Finset.sum_const, Finset.card_range]\n        <;> ring_nf\n        <;> field_simp [h_pos.ne']\n        <;> ring_nf\n  \n  have h_main : \u222b x, (1 / n : \u211d) * \u2211 i in Finset.range n, X i x = \u03bc := by\n    have h\u2081 : \u222b x, (1 / n : \u211d) * \u2211 i in Finset.range n, X i x = (1 / n : \u211d) * \u222b x, \u2211 i in Finset.range n, X i x := by\n      -- Use the linearity of the integral to factor out the scalar (1/n)\n      have h\u2082 : \u222b x, (1 / n : \u211d) * \u2211 i in Finset.range n, X i x = (1 / n : \u211d) * \u222b x, \u2211 i in Finset.range n, X i x := by\n        -- Use the property of integrals to factor out the scalar\n        rw [\u2190 integral_mul_left]\n        <;>\n        (try simp [Finset.sum_range_succ, add_assoc]) <;>\n        (try ring_nf) <;>\n        (try field_simp) <;>\n        (try norm_cast) <;>\n        (try linarith)\n      -- The result follows directly from the above step\n      exact h\u2082\n    rw [h\u2081]\n    -- Case analysis on whether the sum is integrable\n    by_cases h\u2082 : Integrable (fun x : \u211d => \u2211 i in Finset.range n, X i x)\n    \u00b7 -- Case: The sum is integrable\n      -- Use the fact that the integral of the sum is the sum of the integrals\n      have h\u2083 : \u222b x, \u2211 i in Finset.range n, X i x = \u2211 i in Finset.range n, \u222b x, X i x := by\n        -- Use the integral_sum lemma to interchange the integral and the sum\n        have h\u2084 : \u222b x, \u2211 i in Finset.range n, X i x = \u2211 i in Finset.range n, \u222b x, X i x := by\n          -- Use the integral_sum lemma\n          have h\u2085 : \u2200 i \u2208 Finset.range n, Integrable (X i) := by\n            intro i hi\n            have h\u2086 : i < n := Finset.mem_range.mp hi\n            have h\u2087 : Integrable (fun x : \u211d => \u2211 i in Finset.range n, X i x) := h\u2082\n            have h\u2088 : i \u2208 Finset.range n := hi\n            have h\u2089 : Integrable (X i) := by\n              -- Use the fact that if the sum is integrable, then each term is integrable\n              apply Finset.Integrable.of_sum _ _ h\u2088\n              exact h\u2087\n            exact h\u2089\n          -- Apply the integral_sum lemma\n          calc\n            \u222b x, \u2211 i in Finset.range n, X i x = \u2211 i in Finset.range n, \u222b x, X i x := by\n              rw [integral_sum]\n              <;> intro i hi <;>\n                exact h\u2085 i hi\n            _ = \u2211 i in Finset.range n, \u222b x, X i x := by rfl\n        -- The result follows directly from the above step\n        exact h\u2084\n      -- Substitute the sum of integrals for the integral of the sum\n      rw [h\u2083]\n      -- Simplify using the sum of integrals equals n * \u03bc\n      have h\u2084 : (\u2211 i in Finset.range n, \u222b x, X i x : \u211d) = (n : \u211d) * \u03bc := by\n        exact h_sum_integrals\n      rw [h\u2084]\n      -- Simplify the expression (1/n) * (n * \u03bc) to \u03bc\n      have h\u2085 : (n : \u211d) \u2260 0 := by positivity\n      field_simp [h\u2085]\n      <;> ring_nf\n      <;> field_simp [h\u2085]\n      <;> linarith\n    \u00b7 -- Case: The sum is not integrable\n      -- Use the fact that the integral of a non-integrable function is 0 in Lean\n      have h\u2083 : \u222b x, \u2211 i in Finset.range n, X i x = 0 := by\n        -- Use the definition of the integral for non-integrable functions\n        simp_all [integral_undef]\n      -- Substitute 0 for the integral of the sum\n      rw [h\u2083]\n      -- Use the fact that if the sum is not integrable, then at least one X i is not integrable\n      have h\u2084 : \u03bc = 0 := by\n        -- Prove that \u03bc = 0 by showing that at least one X i is not integrable\n        by_contra h\u2085\n        -- If \u03bc \u2260 0, then all X i must be integrable\n        have h\u2086 : \u2200 i \u2208 Finset.range n, Integrable (X i) := by\n          intro i hi\n          by_contra h\u2087\n          have h\u2088 : \u00acIntegrable (X i) := h\u2087\n          have h\u2089 : i < n := Finset.mem_range.mp hi\n          have h\u2081\u2080 : \u222b x, X i x = \u03bc := h_mean i h\u2089\n          have h\u2081\u2081 : \u222b x, X i x = 0 := by\n            simp_all [integral_undef]\n          have h\u2081\u2082 : \u03bc = 0 := by linarith\n          contradiction\n        -- If all X i are integrable, then the sum is integrable, which contradicts h\u2082\n        have h\u2087 : Integrable (fun x : \u211d => \u2211 i in Finset.range n, X i x) := by\n          apply Finset.Integrable.sum\n          intro i hi\n          exact h\u2086 i hi\n        contradiction\n      -- Substitute \u03bc = 0 into the expression (1/n) * 0\n      rw [h\u2084]\n      <;> simp [h_pos.ne']\n      <;> field_simp [h_pos.ne']\n      <;> ring_nf\n      <;> simp_all\n      <;> linarith\n  \n  exact h_main", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 28, "column": 14, "endLine": 28, "endColumn": 31, "data": "unknown identifier 'integral_mul_left'"}, {"line": 28, "column": 12, "endLine": 28, "endColumn": 31, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.4240\nn : \u2115\n\u03bc : \u211d\nX : \u2115 \u2192 \u211d \u2192 \u211d\nh_pos : 0 < n\nh_mean : \u2200 i < n, \u222b (x : \u211d), X i x = \u03bc\nh_sum_integrals : \u2211 i \u2208 Finset.range n, \u222b (x : \u211d), X i x = \u2191n * \u03bc\n\u22a2 \u222b (x : \u211d), 1 / \u2191n * \u2211 i \u2208 Finset.range n, X i x = 1 / \u2191n * \u222b (x : \u211d), \u2211 i \u2208 Finset.range n, X i x"}, {"line": 39, "column": 18, "endLine": 39, "endColumn": 28, "data": "unknown identifier 'Integrable'"}, {"line": 46, "column": 42, "endLine": 46, "endColumn": 52, "data": "unknown identifier 'Integrable'"}, {"line": 49, "column": 22, "endLine": 49, "endColumn": 32, "data": "unknown identifier 'Integrable'"}, {"line": 51, "column": 22, "endLine": 51, "endColumn": 32, "data": "unknown identifier 'Integrable'"}, {"line": 53, "column": 20, "endLine": 53, "endColumn": 51, "data": "unknown constant 'Finset.Integrable.of_sum'"}, {"line": 54, "column": 14, "endLine": 54, "endColumn": 22, "data": "no goals to be solved"}, {"line": 59, "column": 18, "endLine": 59, "endColumn": 30, "data": "unknown identifier 'integral_sum'"}, {"line": 59, "column": 18, "endLine": 59, "endColumn": 30, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.6765\nn : \u2115\n\u03bc : \u211d\nX : \u2115 \u2192 \u211d \u2192 \u211d\nh_pos : 0 < n\nh_mean : \u2200 i < n, \u222b (x : \u211d), X i x = \u03bc\nh_sum_integrals : \u2211 i \u2208 Finset.range n, \u222b (x : \u211d), X i x = \u2191n * \u03bc\nh\u2081 : \u222b (x : \u211d), 1 / \u2191n * \u2211 i \u2208 Finset.range n, X i x = 1 / \u2191n * \u222b (x : \u211d), \u2211 i \u2208 Finset.range n, X i x\nh\u2082 : sorry\nh\u2085 : (i : \u2115) \u2192 i \u2208 Finset.range n \u2192 sorry\n\u22a2 \u222b (x : \u211d), \u2211 i \u2208 Finset.range n, X i x = \u2211 i \u2208 Finset.range n, \u222b (x : \u211d), X i x"}, {"line": 81, "column": 18, "endLine": 81, "endColumn": 32, "data": "unknown identifier 'integral_undef'"}, {"line": 79, "column": 57, "endLine": 81, "endColumn": 33, "data": "unsolved goals\nn : \u2115\n\u03bc : \u211d\nX : \u2115 \u2192 \u211d \u2192 \u211d\nh_pos : 0 < n\nh_mean : \u2200 i < n, \u222b (x : \u211d), X i x = \u03bc\nh_sum_integrals : \u2211 i \u2208 Finset.range n, \u222b (x : \u211d), X i x = \u2191n * \u03bc\nh\u2081 : \u222b (x : \u211d), (\u2191n)\u207b\u00b9 * \u2211 i \u2208 Finset.range n, X i x = (\u2191n)\u207b\u00b9 * \u222b (x : \u211d), \u2211 i \u2208 Finset.range n, X i x\nh\u2082 : \u00acsorry\n\u22a2 \u222b (x : \u211d), \u2211 i \u2208 Finset.range n, X i x = 0"}, {"line": 89, "column": 40, "endLine": 89, "endColumn": 50, "data": "unknown identifier 'Integrable'"}, {"line": 92, "column": 21, "endLine": 92, "endColumn": 31, "data": "unknown identifier 'Integrable'"}, {"line": 96, "column": 22, "endLine": 96, "endColumn": 36, "data": "unknown identifier 'integral_undef'"}, {"line": 95, "column": 39, "endLine": 96, "endColumn": 37, "data": "unsolved goals\nn : \u2115\n\u03bc : \u211d\nX : \u2115 \u2192 \u211d \u2192 \u211d\nh_pos : 0 < n\nh_mean : \u2200 i < n, \u222b (x : \u211d), X i x = \u03bc\nh_sum_integrals : \u2211 i \u2208 Finset.range n, \u222b (x : \u211d), X i x = \u2191n * \u03bc\ni : \u2115\nh\u2081 : \u222b (x : \u211d), (\u2191n)\u207b\u00b9 * \u2211 i \u2208 Finset.range n, X i x = 0\nh\u2083 : \u222b (x : \u211d), \u2211 i \u2208 Finset.range n, X i x = 0\nh\u2085 : \u00ac\u03bc = 0\nh\u2088 : \u00acsorry\nh\u2089 : i < n\n\u22a2 False"}, {"line": 100, "column": 18, "endLine": 100, "endColumn": 28, "data": "unknown identifier 'Integrable'"}, {"line": 101, "column": 16, "endLine": 101, "endColumn": 37, "data": "unknown constant 'Finset.Integrable.sum'"}, {"line": 102, "column": 10, "endLine": 102, "endColumn": 20, "data": "no goals to be solved"}], "tries": 4}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the final conclusion ts_1 and the essential mathematical relationship, but it omits several assumptions mentioned in the natural language (pairwise uncorrelation, variance conditions, \u03b5 > 0, and the linearity property l1). While these missing components don't affect the validity of the specific conclusion being proven, they represent contextual information that was part of the original mathematical setup. The core logical meaning is preserved, but the formalization is incomplete relative to the full natural language description.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The Lean formalization correctly captures the final conclusion ts_1 and the essential mathematical relationship, but it omits several assumptions mentioned in the natural language (pairwise uncorrelation, variance conditions, \u03b5 > 0, and the linearity property l1). While these missing components don't affect the validity of the specific conclusion being proven, they represent contextual information that was part of the original mathematical setup. The core logical meaning is preserved, but the formalization is incomplete relative to the full natural language description.\"]"}, "solved_negation": null, "type": "solution"}, "l2": {"id": "l2", "natural_language": "From the properties of variance and the definition of $\\bar{X}_n$, it follows that $Var(\\bar{X}_n) = Var\\left(\\frac{1}{n} \\sum_{i=1}^n X_i\\right) = \\frac{1}{n^2} Var\\left(\\sum_{i=1}^n X_i\\right)$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2];\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 $\\epsilon$ is a real number such that $\\epsilon > 0$ [tc_3];\n\u2022 $E[\\bar{X}_n] = \\mu$ [ts_1].\nTherefore, we conclude:\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} Var\\left(\\sum_{i=1}^n X_i\\right)$ [l2].", "dependencies": ["tc_1", "tc_2", "def_1", "tc_3", "l1", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_uncorr : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x\n  \u222b x, (X_bar x - \u03bc)^2 = (1 / n^2 : \u211d) * \u2211 i in Finset.range n, \u222b x, (X i x - \u03bc)^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_uncorr : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x\n  \u222b x, (X_bar x - \u03bc)^2 = (1 / n^2 : \u211d) * \u2211 i in Finset.range n, \u222b x, (X i x - \u03bc)^2 := by\n  intro X_bar\n  have h1 : (\u222b x, (X_bar x - \u03bc)^2) = (1 / (n : \u211d)^2) * \u222b x, (\u2211 i in Finset.range n, (X i x - \u03bc))^2 := by\n    have h1\u2081 : \u2200 (x : \u211d), (X_bar x - \u03bc)^2 = (1 / (n : \u211d)^2) * (\u2211 i in Finset.range n, (X i x - \u03bc))^2 := by\n      intro x\n      have h1\u2082 : X_bar x = (1 / (n : \u211d)) * \u2211 i in Finset.range n, X i x := rfl\n      rw [h1\u2082]\n      have h1\u2083 : ((1 / (n : \u211d) : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) = (1 / (n : \u211d) : \u211d) * \u2211 i in Finset.range n, (X i x - \u03bc) := by\n        calc\n          ((1 / (n : \u211d) : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) = (1 / (n : \u211d) : \u211d) * \u2211 i in Finset.range n, X i x - (1 / (n : \u211d) : \u211d) * (n : \u211d) * \u03bc := by\n            field_simp [h_pos.ne']\n            <;> ring_nf\n            <;> field_simp [h_pos.ne']\n            <;> ring_nf\n          _ = (1 / (n : \u211d) : \u211d) * (\u2211 i in Finset.range n, X i x - (n : \u211d) * \u03bc) := by\n            ring_nf\n            <;> field_simp [h_pos.ne']\n            <;> ring_nf\n          _ = (1 / (n : \u211d) : \u211d) * \u2211 i in Finset.range n, (X i x - \u03bc) := by\n            have h1\u2084 : (\u2211 i in Finset.range n, X i x - (n : \u211d) * \u03bc) = \u2211 i in Finset.range n, (X i x - \u03bc) := by\n              calc\n                (\u2211 i in Finset.range n, X i x - (n : \u211d) * \u03bc) = \u2211 i in Finset.range n, X i x - \u2211 i in Finset.range n, (\u03bc : \u211d) := by\n                  simp [Finset.sum_const, nsmul_eq_mul]\n                  <;> ring_nf\n                _ = \u2211 i in Finset.range n, (X i x - \u03bc) := by\n                  rw [Finset.sum_sub_distrib]\n            rw [h1\u2084]\n            <;> ring_nf\n      calc\n        ((1 / (n : \u211d)) * \u2211 i in Finset.range n, X i x - \u03bc) ^ 2 = ((1 / (n : \u211d)) * \u2211 i in Finset.range n, (X i x - \u03bc)) ^ 2 := by rw [h1\u2083]\n        _ = (1 / (n : \u211d)) ^ 2 * (\u2211 i in Finset.range n, (X i x - \u03bc)) ^ 2 := by\n          ring_nf\n          <;> field_simp [h_pos.ne']\n          <;> ring_nf\n        _ = (1 / (n : \u211d) ^ 2) * (\u2211 i in Finset.range n, (X i x - \u03bc)) ^ 2 := by\n          field_simp [pow_two]\n          <;> ring_nf\n          <;> field_simp [h_pos.ne']\n          <;> ring_nf\n    have h1\u2082 : (\u222b x, (X_bar x - \u03bc)^2) = \u222b x, (1 / (n : \u211d)^2) * (\u2211 i in Finset.range n, (X i x - \u03bc))^2 := by\n      congr\n      ext x\n      rw [h1\u2081 x]\n    have h1\u2083 : (\u222b x, (1 / (n : \u211d)^2) * (\u2211 i in Finset.range n, (X i x - \u03bc))^2) = (1 / (n : \u211d)^2) * \u222b x, (\u2211 i in Finset.range n, (X i x - \u03bc))^2 := by\n      -- Use the fact that the integral of a constant times a function is the constant times the integral of the function\n      have h1\u2084 : \u222b x, (1 / (n : \u211d)^2 : \u211d) * (\u2211 i in Finset.range n, (X i x - \u03bc))^2 = (1 / (n : \u211d)^2 : \u211d) * \u222b x, (\u2211 i in Finset.range n, (X i x - \u03bc))^2 := by\n        -- Use the linearity of the integral to factor out the constant\n        have h1\u2085 : (\u222b x, (1 / (n : \u211d)^2 : \u211d) * (\u2211 i in Finset.range n, (X i x - \u03bc))^2) = (1 / (n : \u211d)^2 : \u211d) * \u222b x, (\u2211 i in Finset.range n, (X i x - \u03bc))^2 := by\n          -- Use the fact that the integral of a constant times a function is the constant times the integral of the function\n          have h1\u2086 : (\u222b x, (1 / (n : \u211d)^2 : \u211d) * (\u2211 i in Finset.range n, (X i x - \u03bc))^2) = (1 / (n : \u211d)^2 : \u211d) * \u222b x, (\u2211 i in Finset.range n, (X i x - \u03bc))^2 := by\n            -- Use the linearity of the integral to factor out the constant\n            simp [MeasureTheory.integral_mul_left]\n          exact h1\u2086\n        exact h1\u2085\n      rw [h1\u2084]\n    calc\n      (\u222b x, (X_bar x - \u03bc)^2) = \u222b x, (1 / (n : \u211d)^2) * (\u2211 i in Finset.range n, (X i x - \u03bc))^2 := by rw [h1\u2082]\n      _ = (1 / (n : \u211d)^2) * \u222b x, (\u2211 i in Finset.range n, (X i x - \u03bc))^2 := by rw [h1\u2083]\n  \n  have h2 : (\u222b x, (\u2211 i in Finset.range n, (X i x - \u03bc))^2) = \u2211 i in Finset.range n, \u2211 j in Finset.range n, \u222b x, (X i x - \u03bc) * (X j x - \u03bc) := by\n    calc\n      (\u222b x, (\u2211 i in Finset.range n, (X i x - \u03bc))^2) = \u222b x, (\u2211 i in Finset.range n, (X i x - \u03bc)) * (\u2211 j in Finset.range n, (X j x - \u03bc)) := by\n        congr\n        ext x\n        ring_nf\n      _ = \u222b x, \u2211 i in Finset.range n, \u2211 j in Finset.range n, (X i x - \u03bc) * (X j x - \u03bc) := by\n        congr\n        ext x\n        have h2\u2082 : (\u2211 i in Finset.range n, (X i x - \u03bc)) * (\u2211 j in Finset.range n, (X j x - \u03bc)) = \u2211 i in Finset.range n, \u2211 j in Finset.range n, (X i x - \u03bc) * (X j x - \u03bc) := by\n          calc\n            (\u2211 i in Finset.range n, (X i x - \u03bc)) * (\u2211 j in Finset.range n, (X j x - \u03bc)) = \u2211 i in Finset.range n, \u2211 j in Finset.range n, (X i x - \u03bc) * (X j x - \u03bc) := by\n              rw [Finset.sum_mul]\n              <;>\n                simp [Finset.mul_sum]\n              <;>\n                rw [Finset.sum_comm]\n              <;>\n                simp [mul_assoc, mul_comm, mul_left_comm]\n            _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, (X i x - \u03bc) * (X j x - \u03bc) := by rfl\n        rw [h2\u2082]\n      _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, \u222b x, (X i x - \u03bc) * (X j x - \u03bc) := by\n        have h2\u2083 : (\u222b x, \u2211 i in Finset.range n, \u2211 j in Finset.range n, (X i x - \u03bc) * (X j x - \u03bc)) = \u2211 i in Finset.range n, \u2211 j in Finset.range n, \u222b x, (X i x - \u03bc) * (X j x - \u03bc) := by\n          -- Use the linearity of the integral to factor out the sum over i\n          calc\n            (\u222b x, \u2211 i in Finset.range n, \u2211 j in Finset.range n, (X i x - \u03bc) * (X j x - \u03bc)) = \u2211 i in Finset.range n, \u222b x, \u2211 j in Finset.range n, (X i x - \u03bc) * (X j x - \u03bc) := by\n              -- Use the linearity of the integral to factor out the sum over i\n              simp [MeasureTheory.integral_finset_sum]\n              <;>\n                (try simp_all [Finset.sum_mul, Finset.mul_sum, mul_assoc, mul_comm, mul_left_comm])\n              <;>\n                (try\n                  {\n                    apply Finset.sum_congr rfl\n                    intro i _\n                    apply Continuous.integrableOn_Ioi\n                    continuity\n                  })\n              <;>\n                (try\n                  {\n                    apply Continuous.integrableOn_Ioi\n                    continuity\n                  })\n            _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, \u222b x, (X i x - \u03bc) * (X j x - \u03bc) := by\n              -- Use the linearity of the integral to factor out the sum over j\n              apply Finset.sum_congr rfl\n              intro i _\n              have h2\u2084 : (\u222b x, \u2211 j in Finset.range n, (X i x - \u03bc) * (X j x - \u03bc)) = \u2211 j in Finset.range n, \u222b x, (X i x - \u03bc) * (X j x - \u03bc) := by\n                -- Use the linearity of the integral to factor out the sum over j\n                simp [MeasureTheory.integral_finset_sum]\n                <;>\n                  (try simp_all [Finset.sum_mul, Finset.mul_sum, mul_assoc, mul_comm, mul_left_comm])\n                <;>\n                  (try\n                    {\n                      apply Finset.sum_congr rfl\n                      intro j _\n                      apply Continuous.integrableOn_Ioi\n                      continuity\n                    })\n                <;>\n                  (try\n                    {\n                      apply Continuous.integrableOn_Ioi\n                      continuity\n                    })\n              rw [h2\u2084]\n              <;>\n                simp_all [Finset.sum_mul, Finset.mul_sum, mul_assoc, mul_comm, mul_left_comm]\n              <;>\n                (try\n                  {\n                    apply Finset.sum_congr rfl\n                    intro j _\n                    apply Continuous.integrableOn_Ioi\n                    continuity\n                  })\n              <;>\n                (try\n                  {\n                    apply Continuous.integrableOn_Ioi\n                    continuity\n                  })\n        rw [h2\u2083]\n        <;>\n          simp_all [Finset.sum_mul, Finset.mul_sum, mul_assoc, mul_comm, mul_left_comm]\n        <;>\n          (try\n            {\n              apply Finset.sum_congr rfl\n              intro i _\n              apply Continuous.integrableOn_Ioi\n              continuity\n            })\n        <;>\n          (try\n            {\n              apply Continuous.integrableOn_Ioi\n              continuity\n            })\n  \n  have h3 : \u2200 (i j : \u2115), i \u2208 Finset.range n \u2192 j \u2208 Finset.range n \u2192 i \u2260 j \u2192 (\u222b x, (X i x - \u03bc) * (X j x - \u03bc)) = 0 := by\n    intro i j hi hj hij\n    have h3\u2081 : i < n := Finset.mem_range.mp hi\n    have h3\u2082 : j < n := Finset.mem_range.mp hj\n    have h3\u2083 : i \u2260 j := hij\n    have h3\u2084 : \u222b x, (X i x - \u03bc) * (X j x - \u03bc) = \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) := by\n      congr\n      ext x\n      ring_nf\n    rw [h3\u2084]\n    have h3\u2085 : \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) = (\u222b x, X i x * X j x) - \u03bc * (\u222b x, X i x) - \u03bc * (\u222b x, X j x) + \u03bc * \u03bc := by\n      -- Use the linearity of the integral to split the integral into four parts\n      have h3\u2085\u2081 : \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) = (\u222b x, X i x * X j x) - \u222b x, (\u03bc * X i x) - \u222b x, (\u03bc * X j x) + \u222b x, (\u03bc * \u03bc : \u211d) := by\n        -- Use the linearity of the integral\n        calc\n          \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) = \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) := rfl\n          _ = (\u222b x, X i x * X j x) - \u222b x, (\u03bc * X i x) - \u222b x, (\u03bc * X j x) + \u222b x, (\u03bc * \u03bc : \u211d) := by\n            -- Use the linearity of the integral\n            have h\u2083 : \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) = (\u222b x, X i x * X j x) - \u222b x, (\u03bc * X i x) - \u222b x, (\u03bc * X j x) + \u222b x, (\u03bc * \u03bc : \u211d) := by\n              have h\u2084 : \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) = \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) := rfl\n              rw [h\u2084]\n              -- Use the linearity of the integral\n              have h\u2085 : \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) = (\u222b x, X i x * X j x) - \u222b x, (\u03bc * X i x) - \u222b x, (\u03bc * X j x) + \u222b x, (\u03bc * \u03bc : \u211d) := by\n                -- Use the linearity of the integral\n                calc\n                  \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) = \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) := rfl\n                  _ = (\u222b x, X i x * X j x) - \u222b x, (\u03bc * X i x) - \u222b x, (\u03bc * X j x) + \u222b x, (\u03bc * \u03bc : \u211d) := by\n                    -- Use the linearity of the integral\n                    have h\u2086 : \u222b x, (X i x * X j x - \u03bc * X i x - \u03bc * X j x + \u03bc * \u03bc) = (\u222b x, X i x * X j x) - \u222b x, (\u03bc * X i x) - \u222b x, (\u03bc * X j x) + \u222b x, (\u03bc * \u03bc : \u211d) := by\n                      -- Use the linearity of the integral\n                      simp [integral_add, integral_sub, integral_mul_left, integral_mul_right, mul_assoc]\n                      <;>\n                        (try\n                          {\n                            apply Continuous.integrableOn_Ioi\n                            continuity\n                          })\n                      <;>\n                        (try\n                          {\n                            apply Continuous.integrableOn_Ioi\n                            continuity\n                          })\n                      <;>\n                        (try\n                          {\n                            apply Continuous.integrableOn_Ioi\n                            continuity\n                          })\n                      <;>\n                        (try\n                          {\n                            apply Continuous.integrableOn_Ioi\n                            continuity\n                          })\n                    rw [h\u2086]\n                  _ = (\u222b x, X i x * X j x) - \u222b x, (\u03bc * X i x) - \u222b x, (\u03bc * X j x) + \u222b x, (\u03bc * \u03bc : \u211d) := by rfl\n              rw [h\u2085]\n            rw [h\u2083]\n          _ = (\u222b x, X i x * X j x) - \u222b x, (\u03bc * X i x) - \u222b x, (\u03bc * X j x) + \u222b x, (\u03bc * \u03bc : \u211d) := by rfl\n      have h3\u2085\u2082 : \u222b x, (\u03bc * X i x) = \u03bc * (\u222b x, X i x) := by\n        -- Factor out the constant \u03bc from the integral\n        simp [integral_mul_left]\n      have h3\u2085\u2083 : \u222b x, (\u03bc * X j x) = \u03bc * (\u222b x, X j x) := by\n        -- Factor out the constant \u03bc from the integral\n        simp [integral_mul_left]\n      have h3\u2085\u2084 : \u222b x, (\u03bc * \u03bc : \u211d) = \u03bc * \u03bc := by\n        -- Integrate the constant \u03bc * \u03bc\n        simp [integral_const]\n        <;>\n          field_simp [h_pos.ne'] <;>\n            ring_nf <;>\n              norm_num <;>\n                linarith\n      -- Combine the results to get the final expression\n      calc\n        (\u222b x, X i x * X j x) - \u222b x, (\u03bc * X i x) - \u222b x, (\u03bc * X j x) + \u222b x, (\u03bc * \u03bc : \u211d) = (\u222b x, X i x * X j x) - (\u03bc * (\u222b x, X i x)) - (\u03bc * (\u222b x, X j x)) + (\u03bc * \u03bc) := by\n          rw [h3\u2085\u2082, h3\u2085\u2083, h3\u2085\u2084]\n          <;>\n            ring_nf\n        _ = (\u222b x, X i x * X j x) - \u03bc * (\u222b x, X i x) - \u03bc * (\u222b x, X j x) + \u03bc * \u03bc := by\n          ring_nf\n    rw [h3\u2085]\n    have h3\u2086 : (\u222b x, X i x * X j x) = (\u222b x, X i x) * (\u222b x, X j x) := by\n      have h3\u2086\u2081 : i < n := Finset.mem_range.mp hi\n      have h3\u2086\u2082 : j < n := Finset.mem_range.mp hj\n      have h3\u2086\u2083 : i \u2260 j := hij\n      have h3\u2086\u2084 : \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x) := by\n        apply h_uncorr i j h3\u2086\u2081 h3\u2086\u2082 h3\u2086\u2083\n      exact h3\u2086\u2084\n    rw [h3\u2086]\n    have h3\u2087 : \u222b x, X i x = \u03bc := h_mean i (Finset.mem_range.mp hi)\n    have h3\u2088 : \u222b x, X j x = \u03bc := h_mean j (Finset.mem_range.mp hj)\n    rw [h3\u2087, h3\u2088]\n    ring_nf\n    <;>\n      simp_all\n    <;>\n      linarith\n  \n  have h4 : (\u2211 i in Finset.range n, \u2211 j in Finset.range n, \u222b x, (X i x - \u03bc) * (X j x - \u03bc)) = \u2211 i in Finset.range n, \u222b x, (X i x - \u03bc)^2 := by\n    calc\n      (\u2211 i in Finset.range n, \u2211 j in Finset.range n, \u222b x, (X i x - \u03bc) * (X j x - \u03bc)) = \u2211 i in Finset.range n, \u2211 j in Finset.range n, \u222b x, (X i x - \u03bc) * (X j x - \u03bc) := rfl\n      _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, if i = j then \u222b x, (X i x - \u03bc) * (X j x - \u03bc) else 0 := by\n        apply Finset.sum_congr rfl\n        intro i hi\n        apply Finset.sum_congr rfl\n        intro j hj\n        by_cases h : i = j\n        \u00b7 simp [h]\n        \u00b7 have h\u2081 : \u222b x, (X i x - \u03bc) * (X j x - \u03bc) = 0 := by\n            have h\u2082 : i \u2208 Finset.range n := hi\n            have h\u2083 : j \u2208 Finset.range n := hj\n            have h\u2084 : i \u2260 j := h\n            exact h3 i j h\u2082 h\u2083 h\u2084\n          simp [h, h\u2081]\n      _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, if i = j then \u222b x, (X i x - \u03bc) * (X j x - \u03bc) else 0 := rfl\n      _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 := by\n        apply Finset.sum_congr rfl\n        intro i hi\n        apply Finset.sum_congr rfl\n        intro j hj\n        by_cases h : i = j\n        \u00b7 have h\u2081 : i = j := h\n          have h\u2082 : \u222b x, (X i x - \u03bc) * (X j x - \u03bc) = \u222b x, (X i x - \u03bc) ^ 2 := by\n            calc\n              \u222b x, (X i x - \u03bc) * (X j x - \u03bc) = \u222b x, (X i x - \u03bc) * (X i x - \u03bc) := by\n                simp [h\u2081]\n              _ = \u222b x, (X i x - \u03bc) ^ 2 := by\n                congr\n                ext x\n                ring_nf\n          simp [h, h\u2082]\n        \u00b7 simp [h]\n      _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 := rfl\n      _ = \u2211 i in Finset.range n, \u222b x, (X i x - \u03bc) ^ 2 := by\n        calc\n          (\u2211 i in Finset.range n, \u2211 j in Finset.range n, if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0) =\n              \u2211 i in Finset.range n, \u2211 j in Finset.range n, if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 := rfl\n          _ = \u2211 i in Finset.range n, (\u2211 j in Finset.range n, if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0) := by\n            simp [Finset.sum_sigma']\n          _ = \u2211 i in Finset.range n, (\u222b x, (X i x - \u03bc) ^ 2) := by\n            apply Finset.sum_congr rfl\n            intro i hi\n            calc\n              (\u2211 j in Finset.range n, if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0) = \u2211 j in Finset.range n, if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 := rfl\n              _ = \u222b x, (X i x - \u03bc) ^ 2 := by\n                have h\u2081 : \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) = \u222b x, (X i x - \u03bc) ^ 2 := by\n                  calc\n                    \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) =\n                        \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := rfl\n                    _ = (if i = i then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := by\n                      have h\u2082 : \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) = (if i = i then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := by\n                        calc\n                          _ = \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := rfl\n                          _ = (if i = i then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := by\n                            -- Since i is in Finset.range n, the sum will have exactly one term where i = j, which is i = i\n                            have h\u2083 : i \u2208 Finset.range n := hi\n                            have h\u2084 : \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) = (if i = i then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := by\n                              calc\n                                \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) =\n                                    \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := rfl\n                                _ = (if i = i then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := by\n                                  -- Only one term in the sum is non-zero, when j = i\n                                  have h\u2085 : \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) =\n                                      (if i = i then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := by\n                                    calc\n                                      \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) =\n                                          \u2211 j in Finset.range n, (if i = j then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := rfl\n                                      _ = (if i = i then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := by\n                                        -- Use the fact that i is in Finset.range n to simplify the sum\n                                        simp_all [Finset.sum_ite_eq', Finset.mem_range]\n                                        <;>\n                                          aesop\n                                  exact h\u2085\n                            exact h\u2084\n                      exact h\u2082\n                    _ = (if i = i then \u222b x, (X i x - \u03bc) ^ 2 else 0 : \u211d) := by rfl\n                    _ = \u222b x, (X i x - \u03bc) ^ 2 := by simp\n                  <;>\n                    aesop\n                simp_all\n              _ = \u222b x, (X i x - \u03bc) ^ 2 := by simp_all\n          _ = \u2211 i in Finset.range n, (\u222b x, (X i x - \u03bc) ^ 2) := by simp\n          _ = \u2211 i in Finset.range n, \u222b x, (X i x - \u03bc) ^ 2 := by simp\n      _ = \u2211 i in Finset.range n, \u222b x, (X i x - \u03bc) ^ 2 := by rfl\n  \n  have h5 : (\u222b x, (X_bar x - \u03bc)^2) = (1 / (n : \u211d)^2) * (\u2211 i in Finset.range n, \u222b x, (X i x - \u03bc)^2) := by\n    calc\n      (\u222b x, (X_bar x - \u03bc)^2) = (1 / (n : \u211d)^2) * \u222b x, (\u2211 i in Finset.range n, (X i x - \u03bc))^2 := by rw [h1]\n      _ = (1 / (n : \u211d)^2) * (\u2211 i in Finset.range n, \u2211 j in Finset.range n, \u222b x, (X i x - \u03bc) * (X j x - \u03bc)) := by\n        rw [h2]\n        <;>\n          simp [mul_assoc]\n        <;>\n          ring_nf\n      _ = (1 / (n : \u211d)^2) * (\u2211 i in Finset.range n, \u222b x, (X i x - \u03bc)^2) := by\n        rw [h4]\n        <;>\n          simp [mul_assoc]\n        <;>\n          ring_nf\n  \n  have h6 : (1 / (n : \u211d)^2 : \u211d) = (1 / n^2 : \u211d) := by\n    norm_num [pow_two]\n    <;>\n    field_simp [h_pos.ne']\n    <;>\n    ring_nf\n    <;>\n    norm_cast\n    <;>\n    simp [pow_two]\n    <;>\n    field_simp [h_pos.ne']\n    <;>\n    ring_nf\n    <;>\n    norm_cast\n  \n  calc\n    \u222b x, (X_bar x - \u03bc)^2 = (1 / (n : \u211d)^2) * (\u2211 i in Finset.range n, \u222b x, (X i x - \u03bc)^2) := by\n      rw [h5]\n    _ = (1 / n^2 : \u211d) * (\u2211 i in Finset.range n, \u222b x, (X i x - \u03bc)^2) := by\n      rw [h6]\n      <;> simp [mul_assoc]\n      <;> ring_nf\n      <;> norm_cast\n      <;> simp_all [pow_two]\n      <;> field_simp [h_pos.ne']\n      <;> ring_nf\n      <;> norm_cast", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 82, "column": 165, "endLine": 89, "endColumn": 57, "data": "unsolved goals\nn : \u2115\n\u03bc \u03c3 : \u211d\nX : \u2115 \u2192 \u211d \u2192 \u211d\nh_pos : 0 < n\nh_uncorr : \u2200 (i j : \u2115), i < n \u2192 j < n \u2192 i \u2260 j \u2192 \u222b (x : \u211d), X i x * X j x = (\u222b (x : \u211d), X i x) * \u222b (x : \u211d), X j x\nh_mean : \u2200 i < n, \u222b (x : \u211d), X i x = \u03bc\nh_var : \u2200 i < n, \u222b (x : \u211d), X i x ^ 2 = \u03bc ^ 2 + \u03c3 ^ 2\nX_bar : \u211d \u2192 \u211d := fun x => 1 / \u2191n * \u2211 i \u2208 Finset.range n, X i x\nh1 : \u222b (x : \u211d), (X_bar x - \u03bc) ^ 2 = 1 / \u2191n ^ 2 * \u222b (x : \u211d), (\u2211 i \u2208 Finset.range n, (X i x - \u03bc)) ^ 2\nx : \u211d\n\u22a2 \u2211 x_1 \u2208 Finset.range n, (X x_1 x - \u03bc) * (\u2211 x_2 \u2208 Finset.range n, X x_2 x - \u03bc * \u2191n) =\n    \u2211 x_1 \u2208 Finset.range n, \u2211 x_2 \u2208 Finset.range n, (X x_1 x - \u03bc) * (X x_2 x - \u03bc)"}, {"line": 98, "column": 14, "endLine": 98, "endColumn": 54, "data": "simp made no progress"}, {"line": 121, "column": 16, "endLine": 121, "endColumn": 56, "data": "simp made no progress"}, {"line": 296, "column": 8, "endLine": 305, "endColumn": 22, "data": "unsolved goals\ncase pos\nn : \u2115\n\u03bc \u03c3 : \u211d\nX : \u2115 \u2192 \u211d \u2192 \u211d\nh_pos : 0 < n\nh_uncorr : \u2200 (i j : \u2115), i < n \u2192 j < n \u2192 i \u2260 j \u2192 \u222b (x : \u211d), X i x * X j x = (\u222b (x : \u211d), X i x) * \u222b (x : \u211d), X j x\nh_mean : \u2200 i < n, \u222b (x : \u211d), X i x = \u03bc\nh_var : \u2200 i < n, \u222b (x : \u211d), X i x ^ 2 = \u03bc ^ 2 + \u03c3 ^ 2\nX_bar : \u211d \u2192 \u211d := fun x => 1 / \u2191n * \u2211 i \u2208 Finset.range n, X i x\nh1 : \u222b (x : \u211d), (X_bar x - \u03bc) ^ 2 = 1 / \u2191n ^ 2 * \u222b (x : \u211d), (\u2211 i \u2208 Finset.range n, (X i x - \u03bc)) ^ 2\nh2 :\n  \u222b (x : \u211d), (\u2211 i \u2208 Finset.range n, (X i x - \u03bc)) ^ 2 =\n    \u2211 i \u2208 Finset.range n, \u2211 j \u2208 Finset.range n, \u222b (x : \u211d), (X i x - \u03bc) * (X j x - \u03bc)\nh3 : \u2200 (i j : \u2115), i \u2208 Finset.range n \u2192 j \u2208 Finset.range n \u2192 i \u2260 j \u2192 \u222b (x : \u211d), (X i x - \u03bc) * (X j x - \u03bc) = 0\ni : \u2115\nhi : i \u2208 Finset.range n\nj : \u2115\nhj : j \u2208 Finset.range n\nh h\u2081 : i = j\nh\u2082 : \u222b (x : \u211d), (X i x - \u03bc) * (X j x - \u03bc) = \u222b (x : \u211d), (X i x - \u03bc) ^ 2\n\u22a2 \u222b (x : \u211d), (X j x - \u03bc) * (X j x - \u03bc) = \u222b (x : \u211d), (X j x - \u03bc) ^ 2"}], "tries": 4}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the core mathematical logic, but uses a non-standard representation for variance (E[X\u00b2] = \u03bc\u00b2 + \u03c3\u00b2 instead of Var(X) = \u03c3\u00b2). While mathematically equivalent, this deviates from conventional notation. The uncorrelatedness condition, sample mean definition, and main conclusion are properly formalized. Some mentioned conditions (\u03b5 > 0, E[X\u0304\u2099] = \u03bc) are omitted but don't affect the core theorem being proved.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The Lean formalization correctly captures the core mathematical logic, but uses a non-standard representation for variance (E[X\u00b2] = \u03bc\u00b2 + \u03c3\u00b2 instead of Var(X) = \u03c3\u00b2). While mathematically equivalent, this deviates from conventional notation. The uncorrelatedness condition, sample mean definition, and main conclusion are properly formalized. Some mentioned conditions (\u03b5 > 0, E[X\u0304\u2099] = \u03bc) are omitted but don't affect the core theorem being proved.\"]"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "As the random variables are pairwise uncorrelated, the variance of their sum is the sum of their variances: $Var\\left(\\sum_{i=1}^n X_i\\right) = \\sum_{i=1}^n Var(X_i)$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2];\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 $\\epsilon$ is a real number such that $\\epsilon > 0$ [tc_3];\n\u2022 $E[\\bar{X}_n] = \\mu$ [ts_1];\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} Var\\left(\\sum_{i=1}^n X_i\\right)$ [l2].\nTherefore, we conclude:\n\u2022 $Var\\left(\\sum_{i=1}^n X_i\\right) = \\sum_{i=1}^n Var(X_i)$ [l3].", "dependencies": ["tc_1", "tc_2", "def_1", "tc_3", "l1", "ts_1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 \n  (n : \u2115) (X : \u2115 \u2192 \u211d \u2192 \u211d) (\u03bc \u03c3 : \u211d)\n  (h_pos : 0 < n)\n  (h_uncorr : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2) :\n  \u222b x, ((\u2211 i in Finset.range n, X i x) - n * \u03bc)^2 = n * \u03c3^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 \n  (n : \u2115) (X : \u2115 \u2192 \u211d \u2192 \u211d) (\u03bc \u03c3 : \u211d)\n  (h_pos : 0 < n)\n  (h_uncorr : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2)\n  (h_integral_one : \u222b (x : \u211d), (1 : \u211d) = 1) :\n  \u222b x, ((\u2211 i in Finset.range n, X i x) - n * \u03bc)^2 = n * \u03c3^2 := by\n  have h_sum_mean : \u222b x, (\u2211 i in Finset.range n, X i x) = n * \u03bc := by\n    calc\n      \u222b x, (\u2211 i in Finset.range n, X i x) = \u2211 i in Finset.range n, \u222b x, X i x := by\n        -- Use the linearity of the integral to swap the sum and integral\n        have h\u2081 : \u2200 (i : \u2115), i \u2208 Finset.range n \u2192 (\u222b x : \u211d, X i x) = \u03bc := by\n          intro i hi\n          have h\u2082 : i < n := Finset.mem_range.mp hi\n          have h\u2083 : \u222b x : \u211d, X i x = \u03bc := h_mean i h\u2082\n          exact h\u2083\n        -- Use the fact that the integral of a finite sum is the sum of the integrals\n        have h\u2082 : \u222b x : \u211d, (\u2211 i in Finset.range n, X i x) = \u2211 i in Finset.range n, \u222b x : \u211d, X i x := by\n          -- Use the linearity of the integral\n          have h\u2083 : \u222b x : \u211d, (\u2211 i in Finset.range n, X i x) = \u2211 i in Finset.range n, \u222b x : \u211d, X i x := by\n            -- Use the fact that the integral of a finite sum is the sum of the integrals\n            have h\u2084 : \u222b x : \u211d, (\u2211 i in Finset.range n, X i x) = \u2211 i in Finset.range n, \u222b x : \u211d, X i x := by\n              -- Use the linearity of the integral\n              classical\n              -- Use the fact that the integral of a finite sum is the sum of the integrals\n              calc\n                \u222b x : \u211d, (\u2211 i in Finset.range n, X i x) = \u222b x : \u211d, (\u2211 i in Finset.range n, X i x) := rfl\n                _ = \u2211 i in Finset.range n, \u222b x : \u211d, X i x := by\n                  -- Use the linearity of the integral\n                  have h\u2085 : \u222b x : \u211d, (\u2211 i in Finset.range n, X i x) = \u2211 i in Finset.range n, \u222b x : \u211d, X i x := by\n                    -- Use the linearity of the integral\n                    calc\n                      \u222b x : \u211d, (\u2211 i in Finset.range n, X i x) = \u2211 i in Finset.range n, \u222b x : \u211d, X i x := by\n                        -- Use the linearity of the integral\n                        classical\n                        -- Use the fact that the integral of a finite sum is the sum of the integrals\n                        simp [Finset.sum_integral]\n                      _ = \u2211 i in Finset.range n, \u222b x : \u211d, X i x := by rfl\n                  exact h\u2085\n            exact h\u2084\n          exact h\u2083\n        exact h\u2082\n      _ = \u2211 i in Finset.range n, (\u03bc : \u211d) := by\n        -- Replace each integral with \u03bc\n        apply Finset.sum_congr rfl\n        intro i hi\n        have h\u2082 : i < n := Finset.mem_range.mp hi\n        have h\u2083 : \u222b x : \u211d, X i x = \u03bc := h_mean i h\u2082\n        simp [h\u2083]\n      _ = (n : \u211d) * \u03bc := by\n        -- Sum of \u03bc over n terms is n * \u03bc\n        simp [Finset.sum_const, Finset.card_range]\n        <;> ring_nf\n        <;> simp_all\n        <;> norm_cast\n        <;> linarith\n  \n  have h_sum_sq : \u222b x, (\u2211 i in Finset.range n, X i x)^2 = (n : \u211d) * \u03c3^2 + (n : \u211d)^2 * \u03bc^2 := by\n    calc\n      \u222b x, (\u2211 i in Finset.range n, X i x) ^ 2 = \u222b x, (\u2211 i in Finset.range n, \u2211 j in Finset.range n, X i x * X j x) := by\n        -- Expand the square of the sum into a double sum of products\n        have h\u2081 : (\u2211 i in Finset.range n, X i x) ^ 2 = \u2211 i in Finset.range n, \u2211 j in Finset.range n, X i x * X j x := by\n          calc\n            (\u2211 i in Finset.range n, X i x) ^ 2 = (\u2211 i in Finset.range n, X i x) * (\u2211 i in Finset.range n, X i x) := by ring\n            _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, X i x * X j x := by\n              simp [Finset.sum_mul, Finset.mul_sum]\n              <;>\n              rw [Finset.sum_comm]\n              <;>\n              simp_all [mul_assoc]\n              <;>\n              ring_nf\n              <;>\n              linarith\n        calc\n          \u222b x, (\u2211 i in Finset.range n, X i x) ^ 2 = \u222b x, (\u2211 i in Finset.range n, \u2211 j in Finset.range n, X i x * X j x) := by\n            congr\n            ext x\n            rw [h\u2081]\n          _ = \u222b x, (\u2211 i in Finset.range n, \u2211 j in Finset.range n, X i x * X j x) := by rfl\n      _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, \u222b x, X i x * X j x := by\n        -- Use the linearity of the integral to move the sum outside\n        calc\n          \u222b x, (\u2211 i in Finset.range n, \u2211 j in Finset.range n, X i x * X j x) = \u2211 i in Finset.range n, \u222b x, \u2211 j in Finset.range n, X i x * X j x := by\n            -- Use the linearity of the integral\n            have h\u2082 : \u222b x, (\u2211 i in Finset.range n, \u2211 j in Finset.range n, X i x * X j x) = \u2211 i in Finset.range n, \u222b x, \u2211 j in Finset.range n, X i x * X j x := by\n              -- Use the linearity of the integral\n              classical\n              simp [Finset.sum_integral]\n            exact h\u2082\n          _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, \u222b x, X i x * X j x := by\n            -- Use the linearity of the integral again\n            apply Finset.sum_congr rfl\n            intro i hi\n            have h\u2083 : \u222b x, \u2211 j in Finset.range n, X i x * X j x = \u2211 j in Finset.range n, \u222b x, X i x * X j x := by\n              -- Use the linearity of the integral\n              classical\n              simp [Finset.sum_integral]\n            rw [h\u2083]\n            <;>\n            simp_all\n            <;>\n            aesop\n      _ = \u2211 i in Finset.range n, \u2211 j in Finset.range n, (if i = j then (\u03bc ^ 2 + \u03c3 ^ 2) else (\u03bc ^ 2)) := by\n        -- Use the given conditions to simplify each integral\n        apply Finset.sum_congr rfl\n        intro i hi\n        apply Finset.sum_congr rfl\n        intro j hj\n        by_cases h : i = j\n        \u00b7 -- Case i = j\n          have h\u2082 : i < n := Finset.mem_range.mp hi\n          have h\u2083 : j < n := Finset.mem_range.mp hj\n          have h\u2084 : i = j := h\n          have h\u2085 : \u222b x, X i x * X j x = \u222b x, (X i x) ^ 2 := by\n            simp [h\u2084]\n            <;> ring_nf\n          rw [h\u2085]\n          have h\u2086 : \u222b x, (X i x) ^ 2 = \u03bc ^ 2 + \u03c3 ^ 2 := h_var i (Finset.mem_range.mp hi)\n          rw [h\u2086]\n          simp [h]\n        \u00b7 -- Case i \u2260 j\n          have h\u2082 : i < n := Finset.mem_range.mp hi\n          have h\u2083 : j < n := Finset.mem_range.mp hj\n          have h\u2084 : i \u2260 j := h\n          have h\u2085 : \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x) := h_uncorr i j (Finset.mem_range.mp hi) (Finset.mem_range.mp hj) h\u2084\n          rw [h\u2085]\n          have h\u2086 : \u222b x, X i x = \u03bc := h_mean i (Finset.mem_range.mp hi)\n          have h\u2087 : \u222b x, X j x = \u03bc := h_mean j (Finset.mem_range.mp hj)\n          rw [h\u2086, h\u2087]\n          simp [h]\n          <;> ring_nf\n          <;> simp_all\n          <;> linarith\n      _ = (n : \u211d) * \u03c3 ^ 2 + (n : \u211d) ^ 2 * \u03bc ^ 2 := by\n        -- Calculate the double sum\n        calc\n          \u2211 i in Finset.range n, \u2211 j in Finset.range n, (if i = j then (\u03bc ^ 2 + \u03c3 ^ 2) else (\u03bc ^ 2)) =\n              \u2211 i in Finset.range n, (\u2211 j in Finset.range n, (if i = j then (\u03bc ^ 2 + \u03c3 ^ 2) else (\u03bc ^ 2))) := by\n            simp [Finset.sum_sigma']\n          _ = \u2211 i in Finset.range n, ((\u03bc ^ 2 + \u03c3 ^ 2) + \u2211 j in Finset.range n \\ {i}, (\u03bc ^ 2)) := by\n            apply Finset.sum_congr rfl\n            intro i hi\n            calc\n              \u2211 j in Finset.range n, (if i = j then (\u03bc ^ 2 + \u03c3 ^ 2) else (\u03bc ^ 2)) =\n                  (\u2211 j in ({i} : Finset \u2115), (if i = j then (\u03bc ^ 2 + \u03c3 ^ 2) else (\u03bc ^ 2))) +\n                    \u2211 j in Finset.range n \\ {i}, (if i = j then (\u03bc ^ 2 + \u03c3 ^ 2) else (\u03bc ^ 2)) := by\n                rw [\u2190 Finset.sum_union]\n                \u00b7 congr 1 <;>\n                    (try simp_all [Finset.ext_iff]) <;>\n                    (try aesop)\n                \u00b7 simp_all [Finset.disjoint_left]\n                  <;>\n                  (try aesop)\n              _ = (\u03bc ^ 2 + \u03c3 ^ 2) + \u2211 j in Finset.range n \\ {i}, (\u03bc ^ 2) := by\n                have h\u2082 : \u2211 j in ({i} : Finset \u2115), (if i = j then (\u03bc ^ 2 + \u03c3 ^ 2) else (\u03bc ^ 2)) = (\u03bc ^ 2 + \u03c3 ^ 2) := by\n                  simp\n                have h\u2083 : \u2211 j in Finset.range n \\ {i}, (if i = j then (\u03bc ^ 2 + \u03c3 ^ 2) else (\u03bc ^ 2)) = \u2211 j in Finset.range n \\ {i}, (\u03bc ^ 2) := by\n                  apply Finset.sum_congr rfl\n                  intro j hj\n                  have h\u2084 : j \u2208 Finset.range n \\ {i} := hj\n                  have h\u2085 : j \u2260 i := by\n                    simp_all [Finset.mem_sdiff, Finset.mem_singleton]\n                    <;>\n                    aesop\n                  simp [h\u2085]\n                rw [h\u2082, h\u2083]\n                <;>\n                ring_nf\n                <;>\n                simp_all\n                <;>\n                aesop\n          _ = \u2211 i in Finset.range n, ((\u03bc ^ 2 + \u03c3 ^ 2) + (n - 1 : \u211d) * \u03bc ^ 2) := by\n            apply Finset.sum_congr rfl\n            intro i hi\n            have h\u2082 : \u2211 j in Finset.range n \\ {i}, (\u03bc ^ 2 : \u211d) = (n - 1 : \u211d) * \u03bc ^ 2 := by\n              have h\u2083 : (Finset.card (Finset.range n \\ {i}) : \u211d) = (n - 1 : \u211d) := by\n                have h\u2084 : Finset.card (Finset.range n \\ {i}) = n - 1 := by\n                  have h\u2085 : i < n := Finset.mem_range.mp hi\n                  have h\u2086 : Finset.card (Finset.range n \\ {i}) = n - 1 := by\n                    rw [Finset.card_sdiff (show {i} \u2286 Finset.range n by\n                      simp_all [Finset.subset_iff, Finset.mem_singleton]\n                      <;>\n                      omega)]\n                    simp [Finset.card_range, Finset.card_singleton]\n                    <;>\n                    omega\n                  exact h\u2086\n                norm_cast at h\u2084 \u22a2\n                <;>\n                simp_all [h\u2084]\n                <;>\n                ring_nf\n                <;>\n                norm_num\n                <;>\n                linarith\n              calc\n                \u2211 j in Finset.range n \\ {i}, (\u03bc ^ 2 : \u211d) = (Finset.card (Finset.range n \\ {i}) : \u211d) * \u03bc ^ 2 := by\n                  simp [Finset.sum_const]\n                  <;>\n                  ring_nf\n                  <;>\n                  simp_all\n                  <;>\n                  linarith\n                _ = (n - 1 : \u211d) * \u03bc ^ 2 := by\n                  rw [h\u2083]\n                  <;>\n                  ring_nf\n                  <;>\n                  simp_all\n                  <;>\n                  linarith\n            rw [h\u2082]\n            <;>\n            ring_nf\n            <;>\n            simp_all\n            <;>\n            linarith\n          _ = (n : \u211d) * ((\u03bc ^ 2 + \u03c3 ^ 2) + (n - 1 : \u211d) * \u03bc ^ 2) := by\n            simp [Finset.sum_const, Finset.card_range]\n            <;>\n            ring_nf\n            <;>\n            simp_all\n            <;>\n            linarith\n          _ = (n : \u211d) * \u03c3 ^ 2 + (n : \u211d) ^ 2 * \u03bc ^ 2 := by\n            ring_nf\n            <;>\n            simp_all [pow_two]\n            <;>\n            ring_nf at *\n            <;>\n            linarith\n  \n  have h_main : \u222b x, ((\u2211 i in Finset.range n, X i x) - n * \u03bc)^2 = (n : \u211d) * \u03c3^2 := by\n    have h\u2082 : \u222b x, ((\u2211 i in Finset.range n, X i x) - n * \u03bc)^2 = \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x) + (n * \u03bc)^2) := by\n      congr\n      ext x\n      ring_nf\n      <;>\n      simp_all [sq]\n      <;>\n      ring_nf\n      <;>\n      linarith\n    rw [h\u2082]\n    have h\u2083 : \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x) + (n * \u03bc)^2) = (\u222b x, (\u2211 i in Finset.range n, X i x)^2) - (2 * (n * \u03bc)) * (\u222b x, (\u2211 i in Finset.range n, X i x)) + \u222b x, (n * \u03bc : \u211d)^2 := by\n      have h\u2084 : \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x) + (n * \u03bc : \u211d)^2) = (\u222b x, (\u2211 i in Finset.range n, X i x)^2) - (2 * (n * \u03bc)) * (\u222b x, (\u2211 i in Finset.range n, X i x)) + \u222b x, (n * \u03bc : \u211d)^2 := by\n        have h\u2085 : \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x) + (n * \u03bc : \u211d)^2) = \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x)) + \u222b x, (n * \u03bc : \u211d)^2 := by\n          -- Use the additivity of the integral\n          have h\u2086 : \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x) + (n * \u03bc : \u211d)^2) = \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x)) + \u222b x, (n * \u03bc : \u211d)^2 := by\n            -- Use the additivity of the integral\n            have h\u2087 : \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x) + (n * \u03bc : \u211d)^2) = \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x)) + \u222b x, (n * \u03bc : \u211d)^2 := by\n              -- Use the additivity of the integral\n              rw [\u2190 integral_add]\n              <;>\n              (try simp_all) <;>\n              (try ring_nf) <;>\n              (try norm_num) <;>\n              (try linarith)\n              <;>\n              (try\n                {\n                  apply Continuous.integrableOn_Icc\n                  <;>\n                  continuity\n                })\n              <;>\n              (try\n                {\n                  apply Continuous.integrableOn_Icc\n                  <;>\n                  continuity\n                })\n            exact h\u2087\n          exact h\u2086\n        have h\u2086 : \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x)) = (\u222b x, (\u2211 i in Finset.range n, X i x)^2) - (2 * (n * \u03bc)) * (\u222b x, (\u2211 i in Finset.range n, X i x)) := by\n          -- Use the linearity of the integral\n          have h\u2087 : \u222b x, ((\u2211 i in Finset.range n, X i x)^2 - 2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x)) = (\u222b x, (\u2211 i in Finset.range n, X i x)^2) - \u222b x, (2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x)) := by\n            -- Use the linearity of the integral\n            rw [integral_sub]\n            <;>\n            (try simp_all) <;>\n            (try ring_nf) <;>\n            (try norm_num) <;>\n            (try linarith)\n            <;>\n            (try\n              {\n                apply Continuous.integrableOn_Icc\n                <;>\n                continuity\n              })\n            <;>\n            (try\n              {\n                apply Continuous.integrableOn_Icc\n                <;>\n                continuity\n              })\n          have h\u2088 : \u222b x, (2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x)) = (2 * (n * \u03bc)) * (\u222b x, (\u2211 i in Finset.range n, X i x)) := by\n            -- Use the linearity of the integral\n            have h\u2089 : \u222b x, (2 * (n * \u03bc) * (\u2211 i in Finset.range n, X i x)) = (2 * (n * \u03bc)) * \u222b x, (\u2211 i in Finset.range n, X i x) := by\n              -- Use the linearity of the integral\n              simp [integral_mul_left]\n              <;>\n              ring_nf\n              <;>\n              simp_all\n              <;>\n              linarith\n            linarith\n          linarith\n        linarith\n      linarith\n    rw [h\u2083]\n    have h\u2084 : (\u222b x, (\u2211 i in Finset.range n, X i x)^2) = (n : \u211d) * \u03c3 ^ 2 + (n : \u211d) ^ 2 * \u03bc ^ 2 := by\n      rw [h_sum_sq]\n    have h\u2085 : (\u222b x, (\u2211 i in Finset.range n, X i x)) = (n : \u211d) * \u03bc := by\n      rw [h_sum_mean]\n      <;>\n      norm_cast\n    have h\u2086 : \u222b x : \u211d, (n * \u03bc : \u211d) ^ 2 = (n * \u03bc : \u211d) ^ 2 := by\n      have h\u2087 : \u222b x : \u211d, (n * \u03bc : \u211d) ^ 2 = (n * \u03bc : \u211d) ^ 2 * \u222b x : \u211d, (1 : \u211d) := by\n        simp [integral_const, mul_comm]\n        <;>\n        ring_nf\n        <;>\n        simp_all [mul_assoc]\n        <;>\n        linarith\n      rw [h\u2087]\n      have h\u2088 : \u222b x : \u211d, (1 : \u211d) = 1 := h_integral_one\n      rw [h\u2088]\n      <;>\n      ring_nf\n      <;>\n      simp_all [mul_assoc]\n      <;>\n      linarith\n    rw [h\u2084, h\u2085, h\u2086]\n    <;>\n    ring_nf\n    <;>\n    simp_all [mul_assoc]\n    <;>\n    linarith\n  \n  have h_final : \u222b x, ((\u2211 i in Finset.range n, X i x) - n * \u03bc)^2 = n * \u03c3^2 := by\n    simpa [mul_comm] using h_main\n  \n  exact h_final", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 42, "column": 30, "endLine": 42, "endColumn": 49, "data": "unknown constant 'Finset.sum_integral'"}, {"line": 42, "column": 24, "endLine": 42, "endColumn": 50, "data": "simp made no progress"}, {"line": 67, "column": 46, "endLine": 67, "endColumn": 47, "data": "unknown identifier 'x'"}, {"line": 67, "column": 105, "endLine": 67, "endColumn": 106, "data": "unknown identifier 'x'"}, {"line": 67, "column": 113, "endLine": 67, "endColumn": 114, "data": "unknown identifier 'x'"}, {"line": 69, "column": 40, "endLine": 69, "endColumn": 41, "data": "unknown identifier 'x'"}, {"line": 69, "column": 77, "endLine": 69, "endColumn": 78, "data": "unknown identifier 'x'"}, {"line": 69, "column": 110, "endLine": 69, "endColumn": 111, "data": "unknown identifier 'x'"}, {"line": 70, "column": 66, "endLine": 70, "endColumn": 67, "data": "unknown identifier 'x'"}, {"line": 70, "column": 74, "endLine": 70, "endColumn": 75, "data": "unknown identifier 'x'"}, {"line": 94, "column": 20, "endLine": 94, "endColumn": 39, "data": "unknown constant 'Finset.sum_integral'"}, {"line": 94, "column": 14, "endLine": 94, "endColumn": 40, "data": "simp made no progress"}, {"line": 103, "column": 20, "endLine": 103, "endColumn": 39, "data": "unknown constant 'Finset.sum_integral'"}, {"line": 103, "column": 14, "endLine": 103, "endColumn": 40, "data": "simp made no progress"}, {"line": 163, "column": 142, "endLine": 171, "endColumn": 27, "data": "unsolved goals\nn : \u2115\nX : \u2115 \u2192 \u211d \u2192 \u211d\n\u03bc \u03c3 : \u211d\nh_pos : 0 < n\nh_uncorr : \u2200 (i j : \u2115), i < n \u2192 j < n \u2192 i \u2260 j \u2192 \u222b (x : \u211d), X i x * X j x = (\u222b (x : \u211d), X i x) * \u222b (x : \u211d), X j x\nh_mean : \u2200 i < n, \u222b (x : \u211d), X i x = \u03bc\nh_var : \u2200 i < n, \u222b (x : \u211d), X i x ^ 2 = \u03bc ^ 2 + \u03c3 ^ 2\nh_integral_one : \u222b (x : \u211d), 1 = 1\nh_sum_mean : \u222b (x : \u211d), \u2211 i \u2208 Finset.range n, X i x = \u2191n * \u03bc\ni : \u2115\nhi : i \u2208 Finset.range n\nh\u2082 : (\u2211 j \u2208 {i}, if i = j then \u03bc ^ 2 + \u03c3 ^ 2 else \u03bc ^ 2) = \u03bc ^ 2 + \u03c3 ^ 2\nj : \u2115\nhj h\u2084 : j \u2208 Finset.range n \\ {i}\nh\u2085 : j \u2260 i\n\u22a2 i = j \u2192 \u03c3 = 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The uncorrelatedness condition is correctly formalized using the integral representation of covariance being zero", "The mean and variance conditions are correctly captured through integral representations", "The sample mean definition X\u0304\u2099 = (1/n)\u2211X\u1d62 is completely missing from the Lean formalization", "The condition \u03b5 > 0 is not present in the Lean code", "The statement E[X\u0304\u2099] = \u03bc is not included in the Lean formalization", "The variance relationship Var(X\u0304\u2099) = (1/n\u00b2)Var(\u2211X\u1d62) is not present in the Lean code", "The conclusion about variance of sum equals sum of variances is correctly represented, though the Lean directly states the final result Var(\u2211X\u1d62) = n\u03c3\u00b2 rather than the general form", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The uncorrelatedness condition is correctly formalized using the integral representation of covariance being zero', 'The mean and variance conditions are correctly captured through integral representations', 'The sample mean definition X\u0304\u2099 = (1/n)\u2211X\u1d62 is completely missing from the Lean formalization', 'The condition \u03b5 > 0 is not present in the Lean code', 'The statement E[X\u0304\u2099] = \u03bc is not included in the Lean formalization', 'The variance relationship Var(X\u0304\u2099) = (1/n\u00b2)Var(\u2211X\u1d62) is not present in the Lean code', 'The conclusion about variance of sum equals sum of variances is correctly represented, though the Lean directly states the final result Var(\u2211X\u1d62) = n\u03c3\u00b2 rather than the general form']"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Therefore, by combining the last two results, we get $Var(\\bar{X}_n) = \\frac{1}{n^2} \\sum_{i=1}^n Var(X_i)$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2];\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 $\\epsilon$ is a real number such that $\\epsilon > 0$ [tc_3];\n\u2022 $E[\\bar{X}_n] = \\mu$ [ts_1];\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} Var\\left(\\sum_{i=1}^n X_i\\right)$ [l2];\n\u2022 $Var\\left(\\sum_{i=1}^n X_i\\right) = \\sum_{i=1}^n Var(X_i)$ [l3].\nTherefore, we conclude:\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} \\sum_{i=1}^n Var(X_i)$ [l4].", "dependencies": ["tc_1", "tc_2", "def_1", "tc_3", "l1", "ts_1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : Fin n \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_uncorr : \u2200 i j : Fin n, i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : Fin n, \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : Fin n, \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i : Fin n, X i x\n  \u222b x, (X_bar x - \u03bc)^2 = (1 / n^2 : \u211d) * \u2211 i : Fin n, \u222b x, (X i x - \u03bc)^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : Fin n \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_uncorr : \u2200 i j : Fin n, i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : Fin n, \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : Fin n, \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i : Fin n, X i x\n  \u222b x, (X_bar x - \u03bc)^2 = (1 / n^2 : \u211d) * \u2211 i : Fin n, \u222b x, (X i x - \u03bc)^2 := by\n  intro X_bar\n  have h_main : \u222b x, (X_bar x - \u03bc)^2 = (1 / (n : \u211d)^2) * \u222b x, (\u2211 i : Fin n, (X i x - \u03bc))^2 := by sorry\n  have h_sum_sq : \u222b x, (\u2211 i : Fin n, (X i x - \u03bc))^2 = \u2211 i : Fin n, \u222b x, (X i x - \u03bc)^2 := by sorry\n  have h_final : (1 / (n : \u211d)^2) * \u222b x, (\u2211 i : Fin n, (X i x - \u03bc))^2 = (1 / n^2 : \u211d) * \u2211 i : Fin n, \u222b x, (X i x - \u03bc)^2 := by sorry\n  calc\n    \u222b x, (X_bar x - \u03bc) ^ 2 = (1 / (n : \u211d) ^ 2) * \u222b x, (\u2211 i : Fin n, (X i x - \u03bc)) ^ 2 := by rw [h_main]\n    _ = (1 / n ^ 2 : \u211d) * \u2211 i : Fin n, \u222b x, (X i x - \u03bc) ^ 2 := by rw [h_final]", "lean_pass": true, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all the mathematical content from the natural language. The use of integrals to represent expectations and variances is appropriate, and the uncorrelatedness condition is properly formalized. The variance condition uses the mathematically equivalent form E[X\u00b2] = Var(X) + E[X]\u00b2 rather than directly stating Var(X) = \u03c3\u00b2, which is perfectly valid. The sample mean definition and the final conclusion about the variance of the sample mean are accurately represented. The additional constraints (n > 0, \u03c3\u00b2 > 0) are reasonable mathematical assumptions that don't contradict the natural language.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : Fin n \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_uncorr : \u2200 i j : Fin n, i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : Fin n, \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : Fin n, \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i : Fin n, X i x\n  \u222b x, (X_bar x - \u03bc)^2 = (1 / n^2 : \u211d) * \u2211 i : Fin n, \u222b x, (X i x - \u03bc)^2 := by\n  intro X_bar\n  have h_main : \u222b x, (X_bar x - \u03bc)^2 = (1 / (n:\u211d)^2) * \u2211 i : Fin n, \u222b x, (X i x - \u03bc)^2 := by sorry\n  sorry"}, "type": "lemma"}, "ts_2": {"id": "ts_2", "natural_language": "Using the given condition $Var(X_i) = \\sigma^2$, we calculate the final variance: $Var(\\bar{X}_n) = \\frac{1}{n^2} \\sum_{i=1}^n \\sigma^2 = \\frac{\\sigma^2}{n}$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2];\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 $\\epsilon$ is a real number such that $\\epsilon > 0$ [tc_3];\n\u2022 $E[\\bar{X}_n] = \\mu$ [ts_1];\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} \\sum_{i=1}^n Var(X_i)$ [l4].\nTherefore, we conclude:\n\u2022 $Var(\\bar{X}_n) = \\frac{\\sigma^2}{n}$ [ts_2].", "dependencies": ["tc_1", "tc_2", "def_1", "tc_3", "l1", "ts_1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2\n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : Fin n \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_uncorr : \u2200 i j : Fin n, i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : Fin n, \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : Fin n, \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2)\n  (h_var_sum : \u222b x, ((\u2211 i : Fin n, X i x) - n * \u03bc)^2 = n * \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i : Fin n, X i x\n  \u222b x, (X_bar x - \u03bc)^2 = \u03c3^2 / n := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2\n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : Fin n \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_uncorr : \u2200 i j : Fin n, i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : Fin n, \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : Fin n, \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2)\n  (h_var_sum : \u222b x, ((\u2211 i : Fin n, X i x) - n * \u03bc)^2 = n * \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i : Fin n, X i x\n  \u222b x, (X_bar x - \u03bc)^2 = \u03c3^2 / n := by\n  intro X_bar\n  have h\u2081 : \u222b x, (X_bar x - \u03bc)^2 = (1 / (n : \u211d))^2 * \u222b x, ((\u2211 i : Fin n, X i x) - n * \u03bc)^2 := by\n    have h\u2082 : \u222b x, (X_bar x - \u03bc)^2 = \u222b x, ((1 / (n : \u211d)) * (\u2211 i : Fin n, X i x) - \u03bc)^2 := by\n      simp [X_bar]\n      <;>\n      congr 1 <;>\n      ext x <;>\n      ring_nf\n    rw [h\u2082]\n    have h\u2083 : (\u222b x : \u211d, ((1 / (n : \u211d)) * (\u2211 i : Fin n, X i x) - \u03bc) ^ 2) = (1 / (n : \u211d)) ^ 2 * \u222b x : \u211d, ((\u2211 i : Fin n, X i x) - n * \u03bc) ^ 2 := by\n      have h\u2084 : \u2200 (x : \u211d), ((1 / (n : \u211d)) * (\u2211 i : Fin n, X i x) - \u03bc) = (1 / (n : \u211d)) * ((\u2211 i : Fin n, X i x) - n * \u03bc) := by\n        intro x\n        have h\u2085 : ((1 / (n : \u211d)) * (\u2211 i : Fin n, X i x) - \u03bc) = (1 / (n : \u211d)) * ((\u2211 i : Fin n, X i x) - n * \u03bc) := by\n          calc\n            ((1 / (n : \u211d)) * (\u2211 i : Fin n, X i x) - \u03bc) = (1 / (n : \u211d)) * (\u2211 i : Fin n, X i x) - (1 / (n : \u211d)) * (n * \u03bc) := by\n              field_simp [h_pos.ne']\n              <;> ring_nf\n              <;> field_simp [h_pos.ne']\n              <;> linarith\n            _ = (1 / (n : \u211d)) * ((\u2211 i : Fin n, X i x) - n * \u03bc) := by\n              ring_nf\n        exact h\u2085\n      have h\u2086 : (\u222b x : \u211d, ((1 / (n : \u211d)) * (\u2211 i : Fin n, X i x) - \u03bc) ^ 2) = \u222b x : \u211d, ((1 / (n : \u211d)) * ((\u2211 i : Fin n, X i x) - n * \u03bc)) ^ 2 := by\n        congr\n        ext x\n        rw [h\u2084 x]\n        <;> ring_nf\n      rw [h\u2086]\n      have h\u2087 : (\u222b x : \u211d, ((1 / (n : \u211d)) * ((\u2211 i : Fin n, X i x) - n * \u03bc)) ^ 2) = (1 / (n : \u211d)) ^ 2 * \u222b x : \u211d, ((\u2211 i : Fin n, X i x) - n * \u03bc) ^ 2 := by\n        have h\u2088 : (\u222b x : \u211d, ((1 / (n : \u211d)) * ((\u2211 i : Fin n, X i x) - n * \u03bc)) ^ 2) = \u222b x : \u211d, (1 / (n : \u211d)) ^ 2 * ((\u2211 i : Fin n, X i x) - n * \u03bc) ^ 2 := by\n          congr\n          ext x\n          <;> ring_nf\n        rw [h\u2088]\n        have h\u2089 : (\u222b x : \u211d, (1 / (n : \u211d)) ^ 2 * ((\u2211 i : Fin n, X i x) - n * \u03bc) ^ 2) = (1 / (n : \u211d)) ^ 2 * \u222b x : \u211d, ((\u2211 i : Fin n, X i x) - n * \u03bc) ^ 2 := by\n          -- Use the fact that the integral of a constant times a function is the constant times the integral of the function\n          simp [intervalIntegral.integral_comp_mul_left (fun x => ((\u2211 i : Fin n, X i x) - n * \u03bc) ^ 2)]\n          <;>\n          field_simp [h_pos.ne']\n          <;>\n          ring_nf\n          <;>\n          simp_all [mul_assoc]\n          <;>\n          norm_num\n          <;>\n          linarith\n        rw [h\u2089]\n      rw [h\u2087]\n    rw [h\u2083]\n    <;>\n    norm_num\n    <;>\n    ring_nf\n    <;>\n    field_simp [h_pos.ne']\n    <;>\n    ring_nf\n    <;>\n    norm_cast\n    <;>\n    linarith\n  \n  have h\u2082 : (1 / (n : \u211d))^2 * \u222b x, ((\u2211 i : Fin n, X i x) - n * \u03bc)^2 = (1 / (n : \u211d))^2 * (n * \u03c3^2) := by\n    rw [h_var_sum]\n    <;>\n    norm_num\n    <;>\n    ring_nf\n    <;>\n    field_simp [h_pos.ne']\n    <;>\n    ring_nf\n    <;>\n    norm_cast\n    <;>\n    linarith\n  \n  have h\u2083 : (1 / (n : \u211d))^2 * (n * \u03c3^2) = \u03c3^2 / n := by\n    have h\u2084 : (n : \u211d) \u2260 0 := by positivity\n    field_simp [h\u2084]\n    <;> ring_nf\n    <;> field_simp [h\u2084]\n    <;> ring_nf\n    <;> norm_cast\n    <;> field_simp [h\u2084]\n    <;> ring_nf\n    <;> norm_num\n    <;> linarith\n  \n  have h_main : \u222b x, (X_bar x - \u03bc)^2 = \u03c3^2 / n := by\n    calc\n      \u222b x, (X_bar x - \u03bc)^2 = (1 / (n : \u211d))^2 * \u222b x, ((\u2211 i : Fin n, X i x) - n * \u03bc)^2 := by rw [h\u2081]\n      _ = (1 / (n : \u211d))^2 * (n * \u03c3^2) := by rw [h\u2082]\n      _ = \u03c3^2 / n := by rw [h\u2083]\n  \n  exact h_main", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 61, "column": 10, "endLine": 61, "endColumn": 18, "data": "linarith failed to find a contradiction\ncase h1.h\nn : \u2115\n\u03bc \u03c3 : \u211d\nX : Fin n \u2192 \u211d \u2192 \u211d\nh_pos : 0 < n\nh_sigma : 0 < \u03c3 ^ 2\nX_bar : \u211d \u2192 \u211d := fun x => 1 / \u2191n * \u2211 i : Fin n, X i x\nh_uncorr : \u2200 (i j : Fin n), \u00aci = j \u2192 \u222b (x : \u211d), X i x * X j x = \u03bc * \u03bc\nh_mean : \u2200 (i : Fin n), \u222b (x : \u211d), X i x = \u03bc\nh_var : \u2200 (i : Fin n), \u222b (x : \u211d), X i x ^ 2 = \u03bc ^ 2 + \u03c3 ^ 2\nh_var_sum : \u222b (x : \u211d), (\u2211 i : Fin n, X i x - \u2191n * \u03bc) ^ 2 = \u2191n * \u03c3 ^ 2\nh\u2084 : \u2200 (x : \u211d), (\u2191n)\u207b\u00b9 * \u2211 i : Fin n, X i x - \u03bc = (\u2191n)\u207b\u00b9 * (\u2211 i : Fin n, X i x - \u2191n * \u03bc)\nh\u2088 : \u222b (x : \u211d), ((\u2191n)\u207b\u00b9 * \u2211 i : Fin n, X i x - \u03bc) ^ 2 = \u222b (x : \u211d), (\u2191n ^ 2)\u207b\u00b9 * (\u2211 i : Fin n, X i x - \u2191n * \u03bc) ^ 2\na\u271d :\n  \u2191n ^ 2 *\n      \u222b (x : \u211d),\n        -((\u2211 i : Fin n, X i x) * (\u2191n * (\u03bc * ((\u2191n ^ 2)\u207b\u00b9 * 2)))) + (\u2211 i : Fin n, X i x) ^ 2 * (\u2191n ^ 2)\u207b\u00b9 +\n          \u2191n ^ 2 * (\u03bc ^ 2 * (\u2191n ^ 2)\u207b\u00b9) <\n    \u2191n * \u03c3 ^ 2\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The uncorrelatedness condition is correctly formalized using the mathematical definition E[XiXj] = E[Xi]E[Xj] for i\u2260j", "The expectation and variance conditions are correctly represented, with variance expressed as E[Xi\u00b2] = \u03bc\u00b2 + \u03c3\u00b2 which is mathematically equivalent to Var(Xi) = \u03c3\u00b2", "The sample mean definition is perfectly captured as a function that computes (1/n) times the sum of all Xi", "The epsilon condition \u03b5 > 0 is mentioned in natural language but not included in the Lean formalization. However, since epsilon is not used in the final conclusion, this doesn't affect the logical correctness", "The expected value E[X\u0304n] = \u03bc is stated in natural language but not explicitly included as a hypothesis in Lean, though it can be derived from the given conditions", "The variance formula is correctly represented, with h_var_sum capturing Var(\u2211Xi) = n\u03c3\u00b2 which is mathematically equivalent to the stated formula", "The final conclusion perfectly matches, expressing Var(X\u0304n) = \u03c3\u00b2/n using the integral representation of variance", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "NL statement", "error_report": "Formalization appears correct (score=0.71 > 0.6), and the prover could prove the NEGATION of the NL lemma. The NL statement is likely incorrect."}, "solved_negation": {"lean_verify": true, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2\n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : Fin n \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_uncorr : \u2200 i j : Fin n, i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : Fin n, \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : Fin n, \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2)\n  (h_var_sum : \u222b x, ((\u2211 i : Fin n, X i x) - n * \u03bc)^2 = n * \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i : Fin n, X i x\n  \u222b x, (X_bar x - \u03bc)^2 = \u03c3^2 / n := by\n  intro X_bar\n  have h_main : \u222b x, (X_bar x - \u03bc)^2 = \u03c3^2 / n := by\n    have h\u2081 : \u222b x, (X_bar x - \u03bc)^2 = \u222b x, ((1 / (n : \u211d)) * \u2211 i : Fin n, X i x - \u03bc)^2 := by\n      simp [X_bar]\n      <;>\n      congr 1 <;>\n      ext x <;>\n      ring_nf\n    rw [h\u2081]\n    have h\u2082 : \u222b x, ((1 / (n : \u211d)) * \u2211 i : Fin n, X i x - \u03bc)^2 = (1 / (n : \u211d)^2) * \u222b x, ((\u2211 i : Fin n, X i x) - n * \u03bc)^2 := by\n      have h\u2083 : (\u2200 x : \u211d, ((1 / (n : \u211d)) * \u2211 i : Fin n, X i x - \u03bc) ^ 2 = (1 / (n : \u211d)) ^ 2 * ((\u2211 i : Fin n, X i x) - n * \u03bc) ^ 2) := by\n        intro x\n        have h\u2084 : ((1 / (n : \u211d)) * \u2211 i : Fin n, X i x - \u03bc) = (1 / (n : \u211d)) * ((\u2211 i : Fin n, X i x) - n * \u03bc) := by\n          ring_nf\n          <;> field_simp [h_pos.ne']\n          <;> ring_nf\n          <;> simp [Finset.sum_const, nsmul_eq_mul]\n          <;> ring_nf\n        rw [h\u2084]\n        <;> ring_nf\n        <;> field_simp [h_pos.ne']\n        <;> ring_nf\n      calc\n        \u222b x, ((1 / (n : \u211d)) * \u2211 i : Fin n, X i x - \u03bc) ^ 2 = \u222b x, (1 / (n : \u211d)) ^ 2 * ((\u2211 i : Fin n, X i x) - n * \u03bc) ^ 2 := by\n          congr with x\n          rw [h\u2083 x]\n        _ = (1 / (n : \u211d)) ^ 2 * \u222b x, ((\u2211 i : Fin n, X i x) - n * \u03bc) ^ 2 := by\n          -- Use the linearity of the integral to factor out the constant (1 / n : \u211d)^2\n          simp [\u2190 integral_mul_left]\n          <;>\n          simp_all [mul_comm]\n          <;>\n          ring_nf\n          <;>\n          field_simp [h_pos.ne']\n          <;>\n          ring_nf\n          <;>\n          simp_all [mul_comm]\n          <;>\n          linarith\n    rw [h\u2082]\n    have h\u2083 : (1 / (n : \u211d)^2 : \u211d) * \u222b x, ((\u2211 i : Fin n, X i x) - n * \u03bc)^2 = (1 / (n : \u211d)^2 : \u211d) * (n * \u03c3^2) := by\n      rw [h_var_sum]\n      <;>\n      simp [h_pos.ne']\n      <;>\n      ring_nf\n      <;>\n      field_simp [h_pos.ne']\n      <;>\n      ring_nf\n      <;>\n      simp_all [mul_comm]\n      <;>\n      linarith\n    rw [h\u2083]\n    <;>\n    field_simp [h_pos.ne']\n    <;>\n    ring_nf\n    <;>\n    simp_all [mul_comm]\n    <;>\n    linarith\n  exact h_main"}, "type": "solution"}, "l5": {"id": "l5", "natural_language": "We use the principle of Chebyshev's inequality, which states that for any random variable $Y$ with a finite mean $E[Y]$ and finite variance $Var(Y)$, the inequality $P(|Y - E[Y]| \\ge \\epsilon) \\le \\frac{Var(Y)}{\\epsilon^2}$ holds for any $\\epsilon > 0$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2];\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 $\\epsilon$ is a real number such that $\\epsilon > 0$ [tc_3];\n\u2022 $E[\\bar{X}_n] = \\mu$ [ts_1];\n\u2022 $Var(\\bar{X}_n) = \\frac{\\sigma^2}{n}$ [ts_2].\nTherefore, we conclude:\n\u2022 For any random variable $Y$ with a finite mean $E[Y]$ and finite variance $Var(Y)$, the inequality $P(|Y - E[Y]| \\ge \\epsilon) \\le \\frac{Var(Y)}{\\epsilon^2}$ holds [l5].", "dependencies": ["tc_1", "tc_2", "def_1", "tc_3", "l1", "ts_1", "l2", "l3", "l4", "ts_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_uncorr : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x\n  \u222b x, (if |X_bar x - \u03bc| \u2265 \u03b5 then 1 else 0) \u2264 \u03c3^2 / (n * \u03b5^2) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_uncorr : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2) :\n  let X_bar := fun x => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x\n  \u222b x, (if |X_bar x - \u03bc| \u2265 \u03b5 then 1 else 0) \u2264 \u03c3^2 / (n * \u03b5^2) := by\n  intro X_bar\n  have h_int_X_bar : \u222b x, X_bar x = \u03bc := by sorry\n  have h_int_X_bar_sq : \u222b x, (X_bar x)^2 = \u03bc^2 + \u03c3^2 / n := by sorry\n  have h_int_sq : \u222b x, (X_bar x - \u03bc)^2 = \u03c3^2 / n := by sorry\n  have h_main_ineq : \u222b x, (if |X_bar x - \u03bc| \u2265 \u03b5 then 1 else 0) \u2264 \u03c3^2 / (n * \u03b5^2) := by sorry\n  exact h_main_ineq", "lean_pass": true, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The random variables setup correctly captures pairwise uncorrelation through the integral condition, and the mean/variance conditions are properly formalized using integrals.", "The sample mean definition is correctly translated from the mathematical notation to Lean syntax using Finset.range and summation.", "The variable \u03b5 appears in the conclusion but is never declared or constrained to be positive, which is a critical missing component from the natural language assumption tc_3.", "The main Chebyshev inequality is correctly formalized using indicator functions and integrals, though the probability notation P() is represented as an integral of an indicator function, which is mathematically equivalent but notationally different.", "The intermediate results ts_1 and ts_2 about the expectation and variance of the sample mean are mentioned in natural language but not explicitly formalized as separate statements in Lean, though they would be derivable from the given conditions.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The random variables setup correctly captures pairwise uncorrelation through the integral condition, and the mean/variance conditions are properly formalized using integrals.', 'The sample mean definition is correctly translated from the mathematical notation to Lean syntax using Finset.range and summation.', 'The variable \u03b5 appears in the conclusion but is never declared or constrained to be positive, which is a critical missing component from the natural language assumption tc_3.', 'The main Chebyshev inequality is correctly formalized using indicator functions and integrals, though the probability notation P() is represented as an integral of an indicator function, which is mathematically equivalent but notationally different.', 'The intermediate results ts_1 and ts_2 about the expectation and variance of the sample mean are mentioned in natural language but not explicitly formalized as separate statements in Lean, though they would be derivable from the given conditions.']"}, "solved_negation": null, "type": "lemma"}, "ts_3": {"id": "ts_3", "natural_language": "By applying this principle to the random variable $Y = \\bar{X}_n$ and substituting our previously derived results for its mean and variance, we conclude that $P(|\\bar{X}_n - \\mu| \\ge \\epsilon) \\le \\frac{\\sigma^2}{n\\epsilon^2}$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of random variables that are pairwise uncorrelated [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the expectation is $E[X_i] = \\mu$ and the variance is $Var(X_i) = \\sigma^2$ [tc_2];\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 $\\epsilon$ is a real number such that $\\epsilon > 0$ [tc_3];\n\u2022 The expectation of the sample mean is $E[\\bar{X}_n] = \\mu$ [ts_1];\n\u2022 The variance of the sample mean is $Var(\\bar{X}_n) = \\frac{\\sigma^2}{n}$ [ts_2];\n\u2022 For any random variable $Y$ with a finite mean $E[Y]$ and finite variance $Var(Y)$, the inequality $P(|Y - E[Y]| \\ge \\epsilon) \\le \\frac{Var(Y)}{\\epsilon^2}$ holds [l5].\nTherefore, we conclude:\n\u2022 $P(|\\bar{X}_n - \\mu| \\ge \\epsilon) \\le \\frac{\\sigma^2}{n\\epsilon^2}$ [ts_3].", "dependencies": ["tc_1", "tc_2", "def_1", "tc_3", "l1", "ts_1", "l2", "l3", "l4", "ts_2", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_3 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (\u03b5 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_epsilon : 0 < \u03b5)\n  (h_uncorr : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2)\n  (ts_1 : \u222b x, (1 / n : \u211d) * \u2211 i in Finset.range n, X i x = \u03bc)\n  (ts_2 : \u222b x, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc)^2 = \u03c3^2 / n)\n  (l5 : \u2200 Y : \u211d \u2192 \u211d, \u2200 E_Y Var_Y : \u211d, \n    (\u222b x, Y x = E_Y) \u2192 \n    (\u222b x, (Y x)^2 = E_Y^2 + Var_Y) \u2192 \n    (\u222b x, (if |Y x - E_Y| \u2265 \u03b5 then 1 else 0) \u2264 Var_Y / \u03b5^2)) :\n  \u222b x, (if |(1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc| \u2265 \u03b5 then 1 else 0) \u2264 \u03c3^2 / (n * \u03b5^2) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_3 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (\u03b5 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_epsilon : 0 < \u03b5)\n  (h_uncorr : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2)\n  (ts_1 : \u222b x, (1 / n : \u211d) * \u2211 i in Finset.range n, X i x = \u03bc)\n  (ts_2 : \u222b x, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc)^2 = \u03c3^2 / n)\n  (l5 : \u2200 Y : \u211d \u2192 \u211d, \u2200 E_Y Var_Y : \u211d, \n    (\u222b x, Y x = E_Y) \u2192 \n    (\u222b x, (Y x)^2 = E_Y^2 + Var_Y) \u2192 \n    (\u222b x, (if |Y x - E_Y| \u2265 \u03b5 then 1 else 0) \u2264 Var_Y / \u03b5^2)) :\n  \u222b x, (if |(1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc| \u2265 \u03b5 then 1 else 0) \u2264 \u03c3^2 / (n * \u03b5^2) := by\n  have h_Y_sq : \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x)^2 = \u03bc^2 + \u03c3^2 / n := by sorry\n  have h_final : \u222b x, (if |(1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc| \u2265 \u03b5 then 1 else 0) \u2264 \u03c3^2 / (n * \u03b5^2) := by sorry\n  sorry", "lean_pass": true, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The random variable assumptions (pairwise uncorrelatedness, identical means and variances) are correctly formalized using integral representations for expectations and the standard definition of uncorrelatedness.", "The sample mean definition is accurately captured as (1/n) times the sum over the finite range, which correctly represents the mathematical definition.", "The expectation and variance properties of the sample mean (ts_1 and ts_2) are properly formalized using integral notation, maintaining the mathematical relationships from the natural language.", "Chebyshev's inequality (l5) is correctly formalized using indicator function integrals to represent probabilities, which is a standard and mathematically sound approach.", "The final conclusion (ts_3) perfectly captures the probability bound from the natural language, with the correct sample mean expression and the exact bound \u03c3\u00b2/(n\u03b5\u00b2).", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_3 \n  (n : \u2115) (\u03bc \u03c3 : \u211d) (\u03b5 : \u211d) (X : \u2115 \u2192 \u211d \u2192 \u211d)\n  (h_pos : 0 < n)\n  (h_sigma : 0 < \u03c3^2)\n  (h_epsilon : 0 < \u03b5)\n  (h_uncorr : \u2200 i j : \u2115, i < n \u2192 j < n \u2192 i \u2260 j \u2192 \n    \u222b x, X i x * X j x = (\u222b x, X i x) * (\u222b x, X j x))\n  (h_mean : \u2200 i : \u2115, i < n \u2192 \u222b x, X i x = \u03bc)\n  (h_var : \u2200 i : \u2115, i < n \u2192 \u222b x, (X i x)^2 = \u03bc^2 + \u03c3^2)\n  (ts_1 : \u222b x, (1 / n : \u211d) * \u2211 i in Finset.range n, X i x = \u03bc)\n  (ts_2 : \u222b x, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc)^2 = \u03c3^2 / n)\n  (l5 : \u2200 Y : \u211d \u2192 \u211d, \u2200 E_Y Var_Y : \u211d, \n    (\u222b x, Y x = E_Y) \u2192 \n    (\u222b x, (Y x)^2 = E_Y^2 + Var_Y) \u2192 \n    (\u222b x, (if |Y x - E_Y| \u2265 \u03b5 then 1 else 0) \u2264 Var_Y / \u03b5^2)) :\n  \u222b x, (if |(1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc| \u2265 \u03b5 then 1 else 0) \u2264 \u03c3^2 / (n * \u03b5^2) := by\n  have h_Y_integral : \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) = 0 := by\n    have h\u2081 : \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) = \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x) - \u222b x : \u211d, (\u03bc : \u211d) := by\n      -- Prove that the integral of the difference is the difference of the integrals\n      have h\u2082 : \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) = \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - (\u03bc : \u211d)) := by simp [Pi.sub_apply]\n      rw [h\u2082]\n      have h\u2083 : \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - (\u03bc : \u211d)) = \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x) - \u222b x : \u211d, (\u03bc : \u211d) := by\n        -- Use the linearity of the integral to split the integral of the difference into the difference of integrals.\n        apply integral_sub\n        \u00b7 -- Prove that (1 / n : \u211d) * \u2211 i in Finset.range n, X i x is integrable.\n          have h\u2084 : Integrable (fun x : \u211d => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x) := by\n            -- Prove that the function is integrable.\n            have h\u2085 : \u2200 i \u2208 Finset.range n, Integrable (fun x : \u211d => X i x) := by\n              intro i hi\n              -- Prove that each X i x is integrable.\n              have h\u2086 : i < n := Finset.mem_range.mp hi\n              have h\u2087 : \u222b x, X i x = \u03bc := h_mean i h\u2086\n              -- Use the fact that the integral exists to prove integrability.\n              have h\u2088 : Integrable (fun x : \u211d => X i x) := by\n                by_contra h\n                simp_all [integral_undef]\n                <;>\n                (try contradiction) <;>\n                (try linarith)\n              exact h\u2088\n            -- Prove that the sum of integrable functions is integrable.\n            have h\u2089 : Integrable (fun x : \u211d => \u2211 i in Finset.range n, X i x) := by\n              apply Finset.sum_integrable\n              intro i hi\n              exact h\u2085 i hi\n            -- Prove that the product of an integrable function and a constant is integrable.\n            have h\u2081\u2080 : Integrable (fun x : \u211d => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x) := by\n              apply Integrable.const_mul\n              exact h\u2089\n            exact h\u2081\u2080\n          exact h\u2084\n        \u00b7 -- Prove that (\u03bc : \u211d) is integrable.\n          exact integrable_const\n      rw [h\u2083]\n    have h\u2082 : \u222b x : \u211d, (\u03bc : \u211d) = \u03bc := by\n      -- Use the fact that the integral of a constant function is the constant times the measure of the space.\n      simp [integral_const]\n      <;>\n      (try norm_num) <;>\n      (try simp_all [Finset.sum_range_succ, mul_add, mul_one, add_mul, one_mul]) <;>\n      (try ring_nf) <;>\n      (try field_simp) <;>\n      (try linarith)\n      <;>\n      (try norm_num)\n      <;>\n      (try simp_all [Finset.sum_range_succ, mul_add, mul_one, add_mul, one_mul])\n      <;>\n      (try ring_nf)\n      <;>\n      (try field_simp)\n      <;>\n      (try linarith)\n      <;>\n      (try norm_num)\n    have h\u2083 : \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x) = \u03bc := by\n      -- Use the given condition ts_1.\n      simpa using ts_1\n    -- Combine the results to get the final answer.\n    calc\n      \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) = \u222b x : \u211d, ((1 / n : \u211d) * \u2211 i in Finset.range n, X i x) - \u222b x : \u211d, (\u03bc : \u211d) := by rw [h\u2081]\n      _ = \u03bc - \u03bc := by rw [h\u2083, h\u2082]\n      _ = 0 := by ring\n  \n  have h_Y_sq_integral : \u222b x : \u211d, (((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc)) ^ 2 = (\u03c3 ^ 2 : \u211d) / n := by\n    have h\u2081 : \u222b x : \u211d, (((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc)) ^ 2 = (\u03c3 ^ 2 : \u211d) / n := by\n      simpa using ts_2\n    exact h\u2081\n  \n  have h_l5_applied : \u222b x : \u211d, (if |((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) - (0 : \u211d)| \u2265 \u03b5 then 1 else 0) \u2264 (\u03c3 ^ 2 / n : \u211d) / \u03b5 ^ 2 := by\n    have h\u2081 : \u222b x : \u211d, (if |((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) - (0 : \u211d)| \u2265 \u03b5 then 1 else 0) \u2264 (\u03c3 ^ 2 / n : \u211d) / \u03b5 ^ 2 := by\n      have h\u2082 : \u222b x : \u211d, (((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc)) ^ 2 = (0 : \u211d) ^ 2 + (\u03c3 ^ 2 / n : \u211d) := by\n        calc\n          \u222b x : \u211d, (((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc)) ^ 2 = (\u03c3 ^ 2 : \u211d) / n := by rw [h_Y_sq_integral]\n          _ = (0 : \u211d) ^ 2 + (\u03c3 ^ 2 / n : \u211d) := by ring\n      have h\u2083 := l5 (fun x => (1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) 0 (\u03c3 ^ 2 / n) h_Y_integral h\u2082\n      -- Simplify the expression using the given conditions and properties of integrals\n      have h\u2084 : (\u222b x : \u211d, (if |((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) - (0 : \u211d)| \u2265 \u03b5 then 1 else 0 : \u211d)) \u2264 (\u03c3 ^ 2 / n : \u211d) / \u03b5 ^ 2 := by\n        simpa [abs_sub_comm] using h\u2083\n      exact h\u2084\n    exact h\u2081\n  \n  have h_div_simplify : (\u03c3 ^ 2 / n : \u211d) / \u03b5 ^ 2 = \u03c3 ^ 2 / (n * \u03b5 ^ 2) := by\n    have h\u2081 : (\u03c3 ^ 2 / n : \u211d) / \u03b5 ^ 2 = \u03c3 ^ 2 / (n * \u03b5 ^ 2) := by\n      field_simp [h_pos.ne', h_epsilon.ne']\n      <;> ring_nf\n      <;> field_simp [h_pos.ne', h_epsilon.ne']\n      <;> ring_nf\n    rw [h\u2081]\n  \n  have h_main : \u222b x, (if |(1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc| \u2265 \u03b5 then 1 else 0) \u2264 \u03c3^2 / (n * \u03b5^2) := by\n    have h\u2081 : \u222b x : \u211d, (if |(1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc| \u2265 \u03b5 then 1 else 0) = \u222b x : \u211d, (if |((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) - (0 : \u211d)| \u2265 \u03b5 then 1 else 0) := by\n      congr\n      ext x\n      <;> simp [abs_sub_comm]\n      <;>\n      (try ring_nf) <;>\n      (try norm_num) <;>\n      (try simp_all [abs_sub_comm]) <;>\n      (try ring_nf) <;>\n      (try norm_num) <;>\n      (try linarith)\n    rw [h\u2081]\n    have h\u2082 : \u222b x : \u211d, (if |((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) - (0 : \u211d)| \u2265 \u03b5 then 1 else 0) \u2264 (\u03c3 ^ 2 / n : \u211d) / \u03b5 ^ 2 := h_l5_applied\n    have h\u2083 : (\u03c3 ^ 2 / n : \u211d) / \u03b5 ^ 2 = \u03c3 ^ 2 / (n * \u03b5 ^ 2) := h_div_simplify\n    have h\u2084 : \u222b x : \u211d, (if |((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) - (0 : \u211d)| \u2265 \u03b5 then 1 else 0) \u2264 \u03c3 ^ 2 / (n * \u03b5 ^ 2) := by\n      calc\n        \u222b x : \u211d, (if |((1 / n : \u211d) * \u2211 i in Finset.range n, X i x - \u03bc) - (0 : \u211d)| \u2265 \u03b5 then 1 else 0) \u2264 (\u03c3 ^ 2 / n : \u211d) / \u03b5 ^ 2 := h\u2082\n        _ = \u03c3 ^ 2 / (n * \u03b5 ^ 2) := by rw [h\u2083]\n    exact h\u2084\n  \n  exact h_main"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_3", "label": "ts_3", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    