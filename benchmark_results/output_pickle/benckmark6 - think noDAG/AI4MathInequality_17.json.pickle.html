
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for all positive real numbers $a, b, c$, the following inequality holds: $9(a+b)(b+c)(c+a) \geq 8(a+b+c)(ab+bc+ca)$.

Proof: We want to prove that $9(a+b)(b+c)(c+a) \ge 8(a+b+c)(ab+bc+ca)$ for positive real numbers $a, b, c$. To do this, consider the difference between the two sides: $9(a+b)(b+c)(c+a) - 8(a+b+c)(ab+bc+ca)$. Expanding each term, we have $9(a+b)(b+c)(c+a) = 9(2abc + a^2b + a^2c + ab^2 + b^2c + ac^2 + bc^2)$ and $8(a+b+c)(ab+bc+ca) = 8(a^2b + ab^2 + b^2c + bc^2 + c^2a + ca^2 + 3abc)$. Subtracting the second from the first gives $a(b-c)^2 + b(a-c)^2 + c(a-b)^2$. Since $a, b, c > 0$ and squares of real numbers are non-negative, each term $a(b-c)^2$, $b(a-c)^2$, $c(a-b)^2$ is non-negative, so their sum is non-negative. Therefore, the difference $9(a+b)(b+c)(c+a) - 8(a+b+c)(ab+bc+ca) \ge 0$, which establishes that $9(a+b)(b+c)(c+a) \ge 8(a+b+c)(ab+bc+ca)$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for all positive real numbers $a, b, c$", "statement": "Premise:\n\u2022 a, b, and c are positive real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean variable declaration `(a b c : \u211d)` correctly captures that a, b, and c are real numbers", "The Lean condition `0 < a` (part of the conjunction) perfectly matches the natural language condition `a > 0`", "The Lean condition `0 < b` (part of the conjunction) perfectly matches the natural language condition `b > 0`", "The Lean condition `0 < c` (part of the conjunction) perfectly matches the natural language condition `c > 0`"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "Expanding each term, we have $9(a+b)(b+c)(c+a) = 9(2abc + a^2b + a^2c + ab^2 + b^2c + ac^2 + bc^2)$", "statement": "We assume:\n\u2022 a, b, and c are positive real numbers [tc_1].\nTherefore, we conclude:\n\u2022 $9(a+b)(b+c)(c+a) = 9(2abc + a^2b + a^2c + ab^2 + b^2c + ac^2 + bc^2)$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (a b c : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c) :\n  9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2) := by\n  sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (a b c : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c) :\n  9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2) := by\n  have h_main : (a + b) * (b + c) * (c + a) = 2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2 := by\n    ring_nf\n    <;>\n    (try\n      norm_num) <;>\n    (try\n      linarith [tc_1.1, tc_1.2.1, tc_1.2.2]) <;>\n    (try\n      nlinarith [tc_1.1, tc_1.2.1, tc_1.2.2])\n  \n  have h_final : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2) := by\n    calc\n      9 * (a + b) * (b + c) * (c + a) = 9 * ((a + b) * (b + c) * (c + a)) := by ring\n      _ = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2) := by\n        rw [h_main]\n        <;> ring\n      _ = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2) := by rfl\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations and positivity assumptions are correctly captured. The Lean formalization properly declares a, b, c as real numbers and captures the positivity constraint 0 < a \u2227 0 < b \u2227 0 < c, which perfectly matches 'positive real numbers'.", "The mathematical equality is perfectly captured. Both sides of the equation match exactly between the natural language and Lean formalization. The left side 9(a+b)(b+c)(c+a) and the right side 9(2abc + a\u00b2b + a\u00b2c + ab\u00b2 + b\u00b2c + ac\u00b2 + bc\u00b2) are identical in both representations, just using different notation for exponentiation (^ vs \u00b2) and multiplication (* vs implicit)."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "and $8(a+b+c)(ab+bc+ca) = 8(a^2b + ab^2 + b^2c + bc^2 + c^2a + ca^2 + 3abc)$.", "statement": "We assume:\n\u2022 a, b, and c are positive real numbers [tc_1];\n\u2022 $9(a+b)(b+c)(c+a) = 9(2abc + a^2b + a^2c + ab^2 + b^2c + ac^2 + bc^2)$ [l1].\nTherefore, we conclude:\n\u2022 $8(a+b+c)(ab+bc+ca) = 8(a^2b + ab^2 + b^2c + bc^2 + c^2a + ca^2 + 3abc)$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (a b c : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2)) :\n  8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c) := by\n  sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (a b c : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2)) :\n  8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c) := by\n  have h_main : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c) := by\n    ring_nf at l1 \u22a2\n    <;>\n    (try nlinarith [tc_1.1, tc_1.2.1, tc_1.2.2]) <;>\n    (try linarith) <;>\n    (try nlinarith) <;>\n    (try ring_nf at l1 \u22a2 <;> nlinarith)\n    <;>\n    (try\n      {\n        nlinarith [sq_nonneg (a + b + c), sq_nonneg (a - b), sq_nonneg (a - c), sq_nonneg (b - c)]\n      })\n    <;>\n    (try\n      {\n        nlinarith [sq_nonneg (a + b + c), sq_nonneg (a - b), sq_nonneg (a - c), sq_nonneg (b - c),\n          mul_pos tc_1.1 tc_1.2.1, mul_pos tc_1.1 tc_1.2.2, mul_pos tc_1.2.1 tc_1.2.2]\n      })\n  \n  apply h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations and positivity constraints are correctly captured in Lean with appropriate types and conditions.", "Premise l1 is accurately translated with all terms and mathematical structure preserved.", "Conclusion l2 is correctly formalized with exact correspondence to the natural language equation.", "The overall logical structure and theorem format perfectly matches the natural language presentation."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Subtracting the second from the first gives $a(b-c)^2 + b(a-c)^2 + c(a-b)^2$.", "statement": "We assume:\n\u2022 a, b, and c are positive real numbers [tc_1];\n\u2022 The expansion of the left hand side of the main inequality is $9(a+b)(b+c)(c+a) = 9(2abc + a^2b + a^2c + ab^2 + b^2c + ac^2 + bc^2)$ [l1];\n\u2022 The expansion of the right hand side of the main inequality is $8(a+b+c)(ab+bc+ca) = 8(a^2b + ab^2 + b^2c + bc^2 + c^2a + ca^2 + 3abc)$ [l2].\nTherefore, we conclude:\n\u2022 $9(a+b)(b+c)(c+a) - 8(a+b+c)(ab+bc+ca) = a(b-c)^2 + b(a-c)^2 + c(a-b)^2$ [l3].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (a b c : \u211d)\n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2))\n  (l2 : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c)) :\n  9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = \n  a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (a b c : \u211d)\n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2))\n  (l2 : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c)) :\n  9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = \n  a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 := by\n  have h_main : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 := by\n    have h3 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = a * (b - c) ^ 2 + b * (a - c) ^ 2 + c * (a - b) ^ 2 := by\n      ring_nf at l1 l2 \u22a2\n      <;>\n      (try nlinarith [h_pos.1, h_pos.2.1, h_pos.2.2]) <;>\n      (try linarith) <;>\n      (try nlinarith) <;>\n      (try ring_nf at l1 l2 \u22a2 <;> nlinarith)\n      <;>\n      (try\n        {\n          nlinarith [sq_nonneg (a - b), sq_nonneg (b - c), sq_nonneg (c - a),\n            mul_pos h_pos.1 h_pos.2.1, mul_pos h_pos.2.1 h_pos.2.2, mul_pos h_pos.2.2 h_pos.1]\n        })\n    exact h3\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations and positivity constraints are correctly captured in Lean syntax.", "The left-hand side expansion equation l1 is accurately translated from mathematical notation to Lean.", "The right-hand side expansion equation l2 is correctly formalized with proper operator precedence.", "The main conclusion equation l3 is precisely translated, maintaining all mathematical relationships.", "The logical structure properly represents the assumptions as hypotheses and the conclusion as the theorem goal."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Since $a, b, c > 0$ and squares of real numbers are non-negative, each term $a(b-c)^2$, $b(a-c)^2$, $c(a-b)^2$ is non-negative,", "statement": "We assume:\n\u2022 a, b, and c are positive real numbers [tc_1];\n\u2022 The expansion of the left hand side of the main inequality is $9(a+b)(b+c)(c+a) = 9(2abc + a^2b + a^2c + ab^2 + b^2c + ac^2 + bc^2)$ [l1];\n\u2022 The expansion of the right hand side of the main inequality is $8(a+b+c)(ab+bc+ca) = 8(a^2b + ab^2 + b^2c + bc^2 + c^2a + ca^2 + 3abc)$ [l2];\n\u2022 The difference between the two sides is $9(a+b)(b+c)(c+a) - 8(a+b+c)(ab+bc+ca) = a(b-c)^2 + b(a-c)^2 + c(a-b)^2$ [l3].\nTherefore, we conclude:\n\u2022 $a(b-c)^2 \\ge 0$, $b(a-c)^2 \\ge 0$, and $c(a-b)^2 \\ge 0$ [l4].", "dependencies": ["tc_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a b c : \u211d)\n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2))\n  (l2 : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c))\n  (l3 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = \n  a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2) :\n  a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a b c : \u211d)\n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2))\n  (l2 : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c))\n  (l3 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = \n  a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2) :\n  a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0 := by\n  have h1 : a * (b - c)^2 \u2265 0 := by\n    have h\u2081 : 0 \u2264 (b - c) ^ 2 := sq_nonneg (b - c)\n    have h\u2082 : 0 < a := h_pos.1\n    nlinarith\n  \n  have h2 : b * (a - c)^2 \u2265 0 := by\n    have h\u2081 : 0 \u2264 (a - c) ^ 2 := sq_nonneg (a - c)\n    have h\u2082 : 0 < b := h_pos.2.1\n    nlinarith\n  \n  have h3 : c * (a - b)^2 \u2265 0 := by\n    have h\u2081 : 0 \u2264 (a - b) ^ 2 := sq_nonneg (a - b)\n    have h\u2082 : 0 < c := h_pos.2.2\n    nlinarith\n  \n  have h4 : a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0 := by\n    nlinarith [h1, h2, h3]\n  \n  exact h4", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The variable declarations and positivity constraints are correctly captured in Lean.", "The left-hand side expansion equation l1 is perfectly translated with correct mathematical notation and structure.", "The right-hand side expansion equation l2 is accurately formalized with proper term ordering and mathematical operations.", "The difference equation l3 is correctly represented with the exact same mathematical relationship.", "The conclusion has a major inconsistency. The natural language claims three separate non-negativity results for individual terms a(b-c)\u00b2, b(a-c)\u00b2, and c(a-b)\u00b2, while the Lean formalization only proves that their sum is non-negative. These are logically different statements - individual non-negativity is stronger than sum non-negativity."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The variable declarations and positivity constraints are correctly captured in Lean.', 'The left-hand side expansion equation l1 is perfectly translated with correct mathematical notation and structure.', 'The right-hand side expansion equation l2 is accurately formalized with proper term ordering and mathematical operations.', 'The difference equation l3 is correctly represented with the exact same mathematical relationship.', 'The conclusion has a major inconsistency. The natural language claims three separate non-negativity results for individual terms a(b-c)\u00b2, b(a-c)\u00b2, and c(a-b)\u00b2, while the Lean formalization only proves that their sum is non-negative. These are logically different statements - individual non-negativity is stronger than sum non-negativity.']"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "so their sum is non-negative.", "statement": "We assume:\n\u2022 a, b, and c are positive real numbers [tc_1];\n\u2022 The expansion of the left hand side of the main inequality is $9(a+b)(b+c)(c+a) = 9(2abc + a^2b + a^2c + ab^2 + b^2c + ac^2 + bc^2)$ [l1];\n\u2022 The expansion of the right hand side of the main inequality is $8(a+b+c)(ab+bc+ca) = 8(a^2b + ab^2 + b^2c + bc^2 + c^2a + ca^2 + 3abc)$ [l2];\n\u2022 The difference between the two sides is $9(a+b)(b+c)(c+a) - 8(a+b+c)(ab+bc+ca) = a(b-c)^2 + b(a-c)^2 + c(a-b)^2$ [l3];\n\u2022 Each term of the simplified difference is non-negative: $a(b-c)^2 \\ge 0$, $b(a-c)^2 \\ge 0$, and $c(a-b)^2 \\ge 0$ [l4].\nTherefore, we conclude:\n\u2022 $a(b-c)^2 + b(a-c)^2 + c(a-b)^2 \\ge 0$ [l5].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (a b c : \u211d)\n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2))\n  (l2 : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c))\n  (l3 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = \n  a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2)\n  (l4 : a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0) :\n  9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) \u2265 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (a b c : \u211d)\n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2))\n  (l2 : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c))\n  (l3 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = \n  a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2)\n  (l4 : a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0) :\n  9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) \u2265 0 := by\n  have h_main : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) \u2265 0 := by\n    have h5 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 := by\n      linarith\n    have h6 : a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0 := by\n      linarith\n    linarith\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0, "semantic_feedback": ["The variable declarations and positivity constraints correctly capture that a, b, c are positive real numbers.", "The l1 hypothesis perfectly matches the stated expansion of the left-hand side.", "The l2 hypothesis perfectly matches the stated expansion of the right-hand side.", "The l3 hypothesis correctly states the difference equation as given in natural language.", "The l4 hypothesis states the combined non-negativity rather than individual term non-negativity as mentioned in natural language, but this is logically equivalent and captures the same mathematical meaning.", "The conclusion correctly captures the final inequality, though expressed in terms of the original expressions rather than the simplified form - this is mathematically equivalent given l3.", "Wrong dependencies in Lean4 tactics!"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "Therefore, the difference $9(a+b)(b+c)(c+a) - 8(a+b+c)(ab+bc+ca) \\ge 0$,", "statement": "We assume:\n\u2022 a, b, and c are positive real numbers [tc_1];\n\u2022 The expansion of the left hand side of the main inequality is $9(a+b)(b+c)(c+a) = 9(2abc + a^2b + a^2c + ab^2 + b^2c + ac^2 + bc^2)$ [l1];\n\u2022 The expansion of the right hand side of the main inequality is $8(a+b+c)(ab+bc+ca) = 8(a^2b + ab^2 + b^2c + bc^2 + c^2a + ca^2 + 3abc)$ [l2];\n\u2022 The difference between the two sides is $9(a+b)(b+c)(c+a) - 8(a+b+c)(ab+bc+ca) = a(b-c)^2 + b(a-c)^2 + c(a-b)^2$ [l3];\n\u2022 Each term of the simplified difference is non-negative: $a(b-c)^2 \\ge 0$, $b(a-c)^2 \\ge 0$, and $c(a-b)^2 \\ge 0$ [l4];\n\u2022 The sum of these terms is non-negative: $a(b-c)^2 + b(a-c)^2 + c(a-b)^2 \\ge 0$ [l5].\nTherefore, we conclude:\n\u2022 $9(a+b)(b+c)(c+a) - 8(a+b+c)(ab+bc+ca) \\ge 0$ [l6].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 \n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2))\n  (l2 : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c))\n  (l3 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = \n  a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2)\n  (l4 : a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0) :\n  9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) \u2265 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 \n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2))\n  (l2 : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c))\n  (l3 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = \n  a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2)\n  (l4 : a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0) :\n  9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) \u2265 0 := by\n  have h_main : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) \u2265 0 := by\n    have h5 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 := l3\n    have h6 : a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0 := l4\n    linarith\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.71, "semantic_feedback": ["The variable declarations and positivity constraints are correctly captured in Lean with appropriate types and logical structure.", "The left-hand side expansion l1 is perfectly translated with correct mathematical notation and structure.", "The right-hand side expansion l2 is accurately formalized with proper term ordering and mathematical equivalence.", "The difference simplification l3 is correctly captured with the exact same mathematical relationship.", "The individual non-negativity statements mentioned in natural language (l4) are not explicitly formalized as separate hypotheses in Lean, though they are logically implied by the positivity of a,b,c and the squared terms.", "The sum non-negativity (l5 in natural language) is present in Lean but labeled as l4, creating a minor labeling inconsistency. The mathematical content is correct.", "The final conclusion is perfectly captured as the theorem goal with identical mathematical meaning."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "which establishes that $9(a+b)(b+c)(c+a) \\ge 8(a+b+c)(ab+bc+ca)$.", "statement": "We assume:\n\u2022 a, b, and c are positive real numbers [tc_1];\n\u2022 The expansion of the left hand side of the main inequality is $9(a+b)(b+c)(c+a) = 9(2abc + a^2b + a^2c + ab^2 + b^2c + ac^2 + bc^2)$ [l1];\n\u2022 The expansion of the right hand side of the main inequality is $8(a+b+c)(ab+bc+ca) = 8(a^2b + ab^2 + b^2c + bc^2 + c^2a + ca^2 + 3abc)$ [l2];\n\u2022 The difference between the two sides is $9(a+b)(b+c)(c+a) - 8(a+b+c)(ab+bc+ca) = a(b-c)^2 + b(a-c)^2 + c(a-b)^2$ [l3];\n\u2022 Each term of the simplified difference is non-negative: $a(b-c)^2 \\ge 0$, $b(a-c)^2 \\ge 0$, and $c(a-b)^2 \\ge 0$ [l4];\n\u2022 The sum of these terms is non-negative: $a(b-c)^2 + b(a-c)^2 + c(a-b)^2 \\ge 0$ [l5];\n\u2022 The difference of the two sides of the main inequality is non-negative: $9(a+b)(b+c)(c+a) - 8(a+b+c)(ab+bc+ca) \\ge 0$ [l6].\nTherefore, we conclude:\n\u2022 $9(a+b)(b+c)(c+a) \\ge 8(a+b+c)(ab+bc+ca)$ [ts_1].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2))\n  (l2 : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c))\n  (l3 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = \n    a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2)\n  (l4 : a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0)\n  (l5 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) \u2265 0) :\n  9 * (a + b) * (b + c) * (c + a) \u2265 8 * (a + b + c) * (a * b + b * c + c * a) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (l1 : 9 * (a + b) * (b + c) * (c + a) = 9 * (2 * a * b * c + a^2 * b + a^2 * c + a * b^2 + b^2 * c + a * c^2 + b * c^2))\n  (l2 : 8 * (a + b + c) * (a * b + b * c + c * a) = 8 * (a^2 * b + a * b^2 + b^2 * c + b * c^2 + c^2 * a + c * a^2 + 3 * a * b * c))\n  (l3 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) = \n    a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2)\n  (l4 : a * (b - c)^2 + b * (a - c)^2 + c * (a - b)^2 \u2265 0)\n  (l5 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) \u2265 0) :\n  9 * (a + b) * (b + c) * (c + a) \u2265 8 * (a + b + c) * (a * b + b * c + c * a) := by\n  have h_main : 9 * (a + b) * (b + c) * (c + a) \u2265 8 * (a + b + c) * (a * b + b * c + c * a) := by\n    have h\u2080 : 9 * (a + b) * (b + c) * (c + a) - 8 * (a + b + c) * (a * b + b * c + c * a) \u2265 0 := l5\n    -- Add 8 * (a + b + c) * (a * b + b * c + c * a) to both sides of the inequality\n    linarith\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations and positivity conditions correctly capture the natural language requirements.", "The l1 expansion equation matches perfectly between natural language and Lean formalization.", "The l2 expansion equation matches perfectly between natural language and Lean formalization.", "The l3 difference equation matches perfectly between natural language and Lean formalization.", "Major inconsistency: Natural language l4 states individual non-negativity of three separate terms, but Lean l4 only states the sum is non-negative, missing the individual constraints.", "Minor inconsistency: The content is mathematically equivalent but the labeling is shifted - Lean's l5 corresponds to natural language l6 rather than l5.", "Minor inconsistency: Natural language l6 content appears in Lean as l5, representing a labeling mismatch but correct mathematical content.", "The main inequality conclusion matches perfectly between natural language and Lean formalization."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations and positivity conditions correctly capture the natural language requirements.', 'The l1 expansion equation matches perfectly between natural language and Lean formalization.', 'The l2 expansion equation matches perfectly between natural language and Lean formalization.', 'The l3 difference equation matches perfectly between natural language and Lean formalization.', 'Major inconsistency: Natural language l4 states individual non-negativity of three separate terms, but Lean l4 only states the sum is non-negative, missing the individual constraints.', \"Minor inconsistency: The content is mathematically equivalent but the labeling is shifted - Lean's l5 corresponds to natural language l6 rather than l5.\", 'Minor inconsistency: Natural language l6 content appears in Lean as l5, representing a labeling mismatch but correct mathematical content.', 'The main inequality conclusion matches perfectly between natural language and Lean formalization.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    