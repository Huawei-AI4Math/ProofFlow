
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z$ be a complex number such that $z=x+iy$ for some real numbers $x, y \in \mathbb{R}$. If $(1+i)z + (2-i)\bar{z} = 4-i$, then $z=2+i$.

Proof: From the condition $z=x+iy$, we know its conjugate is $\bar{z} = x-iy$. We can expand the term $(1+i)z$ as $(1+i)(x+iy) = (x-y) + i(x+y)$. Similarly, we expand the term $(2-i)\bar{z}$ as $(2-i)(x-iy) = (2x-y) - i(x+2y)$. Substituting these results into the main equation $(1+i)z + (2-i)\bar{z} = 4-i$ gives $(x-y) + i(x+y) + (2x-y) - i(x+2y) = 4-i$, which simplifies to $(3x-2y) - iy = 4-i$. By equating the real and imaginary parts of this resulting equation, we obtain the system $3x-2y = 4$ and $-y = -1$. Solving this system yields $x=2$ and $y=1$, which implies $z=2+i$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z$ be a complex number such that $z=x+iy$ for some real numbers $x, y \\in \\mathbb{R}$.", "statement": "Premise:\n\u2022 $z$ is a complex number such that $z=x+iy$ for some real numbers $x, y \\in \\mathbb{R}$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102)\n(tc_1 : \u2203 x y : \u211d, z = x + y * I)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'variable (z : \u2102)' perfectly captures that z is a complex number", "The Lean condition 'tc_1 : \u2203 x y : \u211d, z = x + y * I' perfectly matches the mathematical statement 'z = x + iy for some real numbers x, y \u2208 \u211d', where I represents the imaginary unit", "The conclusion about expressing z in standard complex form is implicitly but perfectly captured by the existential statement in Lean, which establishes the same mathematical fact"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "If $(1+i)z + (2-i)\\bar{z} = 4-i$, then $z=2+i$.", "statement": "Premise:\n\u2022 $z$ is a complex number such that $z=x+iy$ for some real numbers $x, y \\in \\mathbb{R}$ [tc_1];\n\u2022 $(1+i)z + (2-i)\\bar{z} = 4-i$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102)\nvariable (x y : \u211d)\n(tc_1 : z = x + y * I)\n(tc_2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that z is a complex number with z = x + iy where x, y are real numbers. The variable declarations establish the types, and tc_1 provides the exact relationship. The notation 'y * I' in Lean is equivalent to 'iy' in mathematical notation.", "The Lean formalization perfectly matches the mathematical equation. The complex numbers (1+I), (2-I), and (4-I) are correctly represented, multiplication is explicit with '*', and 'star z' correctly represents the complex conjugate of z (denoted as z\u0304 in mathematics)."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "From the condition $z=x+iy$, we know its conjugate is $\\bar{z} = x-iy$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $z=x+iy$ for some real numbers $x, y \\in \\mathbb{R}$ [tc_1];\n\u2022 $(1+i)z + (2-i)\\bar{z} = 4-i$ [tc_2].\nTherefore, we conclude:\n\u2022 The complex conjugate of z is $\\bar{z} = x-iy$ [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (z : \u2102) (x y : \u211d)\n  (h1 : z = x + y * I)\n  (h2 : (1 + I) * z + (2 - I) * (star z) = 4 - I) :\n  star z = x - y * I := by sorry", "lean_pass": true, "error_msg": [], "tries": 3}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (z : \u2102) (x y : \u211d)\n  (h1 : z = x + y * Complex.I)\n  (h2 : (1 + Complex.I) * z + (2 - Complex.I) * (star z) = 4 - Complex.I) :\n  star z = x - y * Complex.I := by\n  have h3 : star z = x - y * Complex.I := by\n    have h4 : z.re = x := by\n      rw [h1]\n      simp [Complex.ext_iff, pow_two]\n      <;> ring_nf\n      <;> norm_num\n      <;> simp_all [Complex.ext_iff, pow_two]\n      <;> linarith\n    have h5 : z.im = y := by\n      rw [h1]\n      simp [Complex.ext_iff, pow_two]\n      <;> ring_nf\n      <;> norm_num\n      <;> simp_all [Complex.ext_iff, pow_two]\n      <;> linarith\n    -- Use the properties of complex numbers and their conjugates to directly compute the conjugate\n    have h6 : star z = \u27e8z.re, -z.im\u27e9 := by\n      simp [Complex.ext_iff, Complex.star_def]\n      <;>\n      simp_all [Complex.ext_iff, pow_two]\n      <;>\n      ring_nf\n      <;>\n      norm_num\n      <;>\n      simp_all [Complex.ext_iff, pow_two]\n      <;>\n      linarith\n    -- Substitute the real and imaginary parts into the conjugate expression\n    rw [h6]\n    simp [h4, h5]\n    <;>\n    simp_all [Complex.ext_iff, pow_two]\n    <;>\n    ring_nf\n    <;>\n    norm_num\n    <;>\n    simp_all [Complex.ext_iff, pow_two]\n    <;>\n    linarith\n  exact h3", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 4}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations and the assumption z = x + iy are correctly formalized. The use of 'y * I' instead of 'iy' follows Lean's standard notation for complex numbers.", "The equation constraint is accurately translated. The use of 'star z' for complex conjugate and explicit multiplication operators are standard Lean conventions that preserve the mathematical meaning.", "The conclusion about the complex conjugate is correctly formalized. 'star z = x - y * I' is the proper Lean representation of z\u0304 = x - iy."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "We can expand the term $(1+i)z$ as $(1+i)(x+iy) = (x-y) + i(x+y)$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $z=x+iy$ for some real numbers $x, y \\in \\mathbb{R}$ [tc_1];\n\u2022 $(1+i)z + (2-i)\\bar{z} = 4-i$ [tc_2];\n\u2022 The complex conjugate of z is $\\bar{z} = x-iy$ [l1].\nTherefore, we conclude:\n\u2022 $(1+i)z = (x-y) + i(x+y)$ [l2].", "dependencies": ["tc_1", "tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (z : \u2102) (x y : \u211d)\n  (h1 : z = x + y * I)\n  (h2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (h3 : star z = x - y * I) :\n  (1 + I) * z = (x - y) + I * (x + y) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (z : \u2102) (x y : \u211d)\n  (h1 : z = x + y * I)\n  (h2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (h3 : star z = x - y * I) :\n  (1 + I) * z = (x - y) + I * (x + y) := by\n  have h4 : (1 + I) * z = (x - y) + I * (x + y) := by\n    calc\n      (1 + I) * z = (1 + I) * (x + y * I) := by rw [h1]\n      _ = (x - y) + I * (x + y) := by\n        simp [Complex.ext_iff, pow_two, Complex.ext_iff, Complex.I_mul_I, pow_two]\n        <;> norm_num <;>\n          (try ring_nf at *) <;>\n          (try simp_all [Complex.ext_iff, pow_two, Complex.I_mul_I]) <;>\n          (try norm_num at *) <;>\n          (try linarith)\n        <;>\n          (try\n            {\n              constructor <;>\n                simp [Complex.ext_iff, pow_two, Complex.I_mul_I] at * <;>\n                  ring_nf at * <;>\n                  norm_num at * <;>\n                  linarith\n            })\n        <;>\n          (try\n            {\n              simp_all [Complex.ext_iff, pow_two, Complex.I_mul_I]\n              <;> ring_nf at *\n              <;> norm_num at *\n              <;> linarith\n            })\n      _ = (x - y) + I * (x + y) := by rfl\n  exact h4", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 35, "endLine": 36, "endColumn": 14, "data": "unsolved goals\nI z : \u2102\nx y : \u211d\nh3 : x + y * I.re = x - y * I.re\nh2 :\n  I.re * (x - y * I.re) - I.im * (y * I.im) - (I.re * (x - y * I.re) + I.im * (y * I.im)) + (x - y * I.re) +\n        (x - y * I.re) * 2 =\n      4 - I.re \u2227\n    I.re * (y * I.im) + I.re * (y * I.im) + y * I.im + -(y * I.im * 2) = -I.im\n\u22a2 I.re * x + I.re * y + I.re * I.re * y + (x - y * (I.im * I.im)) = I.re * x + I.re * y + (x - y) \u2227\n    ((I.re = 0 \u2228 y = 0) \u2228 I.im = 0)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable types and declarations correctly match the natural language specification", "The definition z = x + iy is correctly formalized as z = x + y * I using Lean's imaginary unit notation", "The main equation (1+i)z + (2-i)z\u0304 = 4-i is accurately represented with proper complex arithmetic and conjugate notation", "The complex conjugate definition z\u0304 = x-iy is correctly formalized using Lean's star notation for complex conjugation", "The conclusion (1+i)z = (x-y) + i(x+y) is perfectly captured with explicit multiplication operators as required by Lean syntax", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "NL statement", "error_report": "Formalization appears correct (score=1.0 > 0.6), and the prover could prove the NEGATION of the NL lemma. The NL statement is likely incorrect."}, "solved_negation": {"lean_verify": true, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (z : \u2102) (x y : \u211d)\n  (h1 : z = x + y * Complex.I)\n  (h2 : (1 + Complex.I) * z + (2 - Complex.I) * (star z) = 4 - Complex.I)\n  (h3 : star z = x - y * Complex.I) :\n  (1 + Complex.I) * z = (x - y) + Complex.I * (x + y) := by\n  have h_main : (1 + Complex.I) * z = (x - y) + Complex.I * (x + y) := by\n    rw [h1]\n    -- Simplify the expression (1 + Complex.I) * (x + y * Complex.I)\n    simp [Complex.ext_iff, Complex.I_mul_I, Complex.mul_re, Complex.mul_im, Complex.add_re, Complex.add_im]\n    <;> ring_nf <;> norm_num <;>\n    simp_all [Complex.ext_iff, Complex.I_mul_I, Complex.mul_re, Complex.mul_im, Complex.add_re, Complex.add_im]\n    <;> norm_num <;>\n    (try constructor <;> ring_nf <;> norm_num <;> linarith)\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, Complex.I_mul_I, Complex.mul_re, Complex.mul_im, Complex.add_re, Complex.add_im]\n        <;> norm_num <;>\n        (try constructor <;> ring_nf <;> norm_num <;> linarith)\n      })\n  \n  apply h_main"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Similarly, we expand the term $(2-i)\\bar{z}$ as $(2-i)(x-iy) = (2x-y) - i(x+2y)$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $z=x+iy$ for some real numbers $x, y \\in \\mathbb{R}$ [tc_1];\n\u2022 $(1+i)z + (2-i)\\bar{z} = 4-i$ [tc_2];\n\u2022 The complex conjugate of z is $\\bar{z} = x-iy$ [l1];\n\u2022 $(1+i)z = (x-y) + i(x+y)$ [l2].\nTherefore, we conclude:\n\u2022 $(2-i)\\bar{z} = (2x-y) - i(x+2y)$ [l3].", "dependencies": ["tc_1", "tc_2", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (z : \u2102) (x y : \u211d)\n  (h1 : z = x + y * I)\n  (h2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (h3 : star z = x - y * I)\n  (h4 : (1 + I) * z = (x - y) + I * (x + y)) :\n  (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (z : \u2102) (x y : \u211d)\n  (h1 : z = x + y * I)\n  (h2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (h3 : star z = x - y * I)\n  (h4 : (1 + I) * z = (x - y) + I * (x + y)) :\n  (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y) := by\n  have h5 : (2 - I : \u2102) * (star z) = (2 * x - y : \u211d) - I * (x + 2 * y : \u211d) := by\n    calc\n      (2 - I : \u2102) * (star z) = (2 - I : \u2102) * (x - y * I : \u2102) := by rw [h3]\n      _ = (2 : \u2102) * (x - y * I : \u2102) - I * (x - y * I : \u2102) := by ring_nf\n      _ = (2 * x - 2 * y * I : \u2102) - (x * I - y * I * I : \u2102) := by\n        simp [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two]\n        <;> norm_num <;>\n        simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two] <;>\n        norm_num <;>\n        ring_nf <;>\n        simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two] <;>\n        norm_num <;>\n        linarith\n      _ = (2 * x - 2 * y * I : \u2102) - (x * I + y : \u2102) := by\n        simp [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two]\n        <;> norm_num <;>\n        simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two] <;>\n        norm_num <;>\n        ring_nf <;>\n        simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two] <;>\n        norm_num <;>\n        linarith\n      _ = (2 * x - y : \u211d) - (x + 2 * y) * I := by\n        simp [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two]\n        <;> norm_num <;>\n        simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two] <;>\n        norm_num <;>\n        ring_nf <;>\n        simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two] <;>\n        norm_num <;>\n        linarith\n      _ = (2 * x - y : \u211d) - I * (x + 2 * y : \u211d) := by\n        ring_nf\n        <;> simp [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two]\n        <;> norm_num <;>\n        simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two] <;>\n        norm_num <;>\n        linarith\n  exact_mod_cast h5", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 32, "column": 8, "endLine": 32, "endColumn": 16, "data": "linarith failed to find a contradiction\nI z : \u2102\nx y : \u211d\nh2 :\n  x - y + I.re * (x + y) + ((2 - I.re) * (x - y * I.re) - I.im * (y * I.im)) = 4 - I.re \u2227\n    I.im * (x + y) + (-((2 - I.re) * (y * I.im)) + -(I.im * (x - y * I.re))) = -I.im\nh3 : x + y * I.re = x - y * I.re\nh4 :\n  (1 + I.re) * (x - y * I.re) - I.im * (y * I.im) = x - y + I.re * (x + y) \u2227\n    (1 + I.re) * (y * I.im) + I.im * (x - y * I.re) = I.im * (x + y)\n\u22a2 False failed"}, {"line": 48, "column": 8, "endLine": 48, "endColumn": 16, "data": "linarith failed to find a contradiction\nI z : \u2102\nx y : \u211d\nh2 :\n  x - y + I.re * (x + y) + ((2 - I.re) * (x - y * I.re) - I.im * (y * I.im)) = 4 - I.re \u2227\n    I.im * (x + y) + (-((2 - I.re) * (y * I.im)) + -(I.im * (x - y * I.re))) = -I.im\nh3 : x + y * I.re = x - y * I.re\nh4 :\n  (1 + I.re) * (x - y * I.re) - I.im * (y * I.im) = x - y + I.re * (x + y) \u2227\n    (1 + I.re) * (y * I.im) + I.im * (x - y * I.re) = I.im * (x + y)\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical content from the natural language. The variable declarations, complex number representations, equations, and conclusion all match semantically. The only differences are notational conventions (star z vs z\u0304, * for multiplication, I vs i) which are standard in Lean/Mathlib and preserve the mathematical meaning completely.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (z : \u2102) (x y : \u211d)\n  (h1 : z = x + y * I)\n  (h2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (h3 : star z = x - y * I)\n  (h4 : (1 + I) * z = (x - y) + I * (x + y)) :\n  (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y) := by\n  have h_main : (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y) := by\n    rw [h3]\n    simp [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two]\n    <;> norm_num <;>\n    (try ring_nf) <;>\n    (try norm_num) <;>\n    (try simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two]) <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try\n      {\n        constructor <;>\n        ring_nf <;>\n        norm_num <;>\n        simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two] <;>\n        norm_num <;>\n        linarith\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two]\n        <;>\n        ring_nf at *\n        <;>\n        norm_num at *\n        <;>\n        linarith\n      })\n    <;>\n    (try\n      {\n        norm_num [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two] at *\n        <;>\n        simp_all [Complex.ext_iff, Complex.mul_re, Complex.mul_im, pow_two]\n        <;>\n        norm_num at *\n        <;>\n        linarith\n      })\n  \n  rw [h_main]"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Substituting these results into the main equation $(1+i)z + (2-i)\\bar{z} = 4-i$ gives $(x-y) + i(x+y) + (2x-y) - i(x+2y) = 4-i$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $z=x+iy$ for some real numbers $x, y \\in \\mathbb{R}$ [tc_1];\n\u2022 The governing equation is $(1+i)z + (2-i)\\bar{z} = 4-i$ [tc_2];\n\u2022 The complex conjugate of z is $\\bar{z} = x-iy$ [l1];\n\u2022 The expansion of the first term is $(1+i)z = (x-y) + i(x+y)$ [l2];\n\u2022 The expansion of the second term is $(2-i)\\bar{z} = (2x-y) - i(x+2y)$ [l3].\nTherefore, we conclude:\n\u2022 $(x-y) + i(x+y) + (2x-y) - i(x+2y) = 4-i$ [l4].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (z : \u2102) (x y : \u211d)\n  (h1 : z = x + y * I)\n  (h2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (h3 : star z = x - y * I)\n  (h4 : (1 + I) * z = (x - y) + I * (x + y))\n  (h5 : (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y)) :\n  (x - y) + I * (x + y) + (2 * x - y) - I * (x + 2 * y) = 4 - I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (z : \u2102) (x y : \u211d)\n  (h1 : z = x + y * I)\n  (h2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (h3 : star z = x - y * I)\n  (h4 : (1 + I) * z = (x - y) + I * (x + y))\n  (h5 : (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y)) :\n  (x - y) + I * (x + y) + (2 * x - y) - I * (x + 2 * y) = 4 - I := by\n  have h6 : (x - y) + I * (x + y) + (2 * x - y) - I * (x + 2 * y) = 4 - I := by\n    -- Expand the left-hand side using the given hypotheses h4 and h5\n    have h7 : (1 + I) * z + (2 - I) * (star z) = 4 - I := h2\n    have h8 : (1 + I) * z = (x - y) + I * (x + y) := h4\n    have h9 : (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y) := h5\n    -- Substitute h8 and h9 into h7 to get the desired result\n    calc\n      (x - y) + I * (x + y) + (2 * x - y) - I * (x + 2 * y) = ((x - y) + I * (x + y)) + ((2 * x - y) - I * (x + 2 * y)) := by ring\n      _ = (1 + I) * z + (2 - I) * (star z) := by\n        rw [h8, h9]\n        <;>\n        simp [Complex.ext_iff, Complex.I_mul_I, Complex.I_mul_I, pow_two]\n        <;>\n        ring_nf at *\n        <;>\n        simp_all [Complex.ext_iff, Complex.I_mul_I, pow_two]\n        <;>\n        norm_num at *\n        <;>\n        linarith\n      _ = 4 - I := by rw [h7]\n  exact h6", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations and complex number representation (tc_1/h1) are correctly formalized with appropriate type constraints", "The governing equation (tc_2/h2) is exactly captured using standard Lean complex number notation", "Complex conjugate definition (l1/h3) perfectly matches using Lean's star notation", "First term expansion (l2/h4) is precisely formalized with correct algebraic structure", "Second term expansion (l3/h5) accurately represents the complex arithmetic", "The final conclusion (l4/goal) exactly matches the combined equation from the natural language"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "which simplifies to $(3x-2y) - iy = 4-i$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $z=x+iy$ for some real numbers $x, y \\in \\mathbb{R}$ [tc_1];\n\u2022 The governing equation is $(1+i)z + (2-i)\\bar{z} = 4-i$ [tc_2];\n\u2022 The complex conjugate of z is $\\bar{z} = x-iy$ [l1];\n\u2022 The expansion of the first term is $(1+i)z = (x-y) + i(x+y)$ [l2];\n\u2022 The expansion of the second term is $(2-i)\\bar{z} = (2x-y) - i(x+2y)$ [l3];\n\u2022 The substituted equation is $(x-y) + i(x+y) + (2x-y) - i(x+2y) = 4-i$ [l4].\nTherefore, we conclude:\n\u2022 $(3x-2y) - iy = 4-i$ [l5].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (l1 : star z = x - y * I)\n  (l2 : (1 + I) * z = (x - y) + I * (x + y))\n  (l3 : (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y))\n  (l4 : (x - y) + I * (x + y) + (2 * x - y) - I * (x + 2 * y) = 4 - I) :\n  (3 * x - 2 * y) - I * y = 4 - I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (l1 : star z = x - y * I)\n  (l2 : (1 + I) * z = (x - y) + I * (x + y))\n  (l3 : (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y))\n  (l4 : (x - y) + I * (x + y) + (2 * x - y) - I * (x + 2 * y) = 4 - I) :\n  (3 * x - 2 * y) - I * y = 4 - I := by\n  have h\u2081 : (3 * x - 2 * y : \u211d) - I * y = 4 - I := by\n    simp [Complex.ext_iff, Complex.I_mul_I] at l4 \u22a2\n    <;>\n    (try norm_num at l4 \u22a2) <;>\n    (try ring_nf at l4 \u22a2) <;>\n    (try norm_num at l4 \u22a2) <;>\n    (try linarith) <;>\n    (try constructor <;> nlinarith)\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, Complex.I_mul_I]\n        <;>\n        norm_num at *\n        <;>\n        (try ring_nf at *)\n        <;>\n        (try norm_num at *)\n        <;>\n        (try linarith)\n        <;>\n        (try constructor <;> nlinarith)\n      })\n    <;>\n    (try\n      {\n        ring_nf at l4 \u22a2\n        <;>\n        norm_num at l4 \u22a2\n        <;>\n        (try linarith)\n        <;>\n        (try constructor <;> nlinarith)\n      })\n    <;>\n    (try\n      {\n        norm_num at l4 \u22a2\n        <;>\n        (try linarith)\n        <;>\n        (try constructor <;> nlinarith)\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, Complex.I_mul_I]\n        <;>\n        norm_num at *\n        <;>\n        (try ring_nf at *)\n        <;>\n        (try norm_num at *)\n        <;>\n        (try linarith)\n        <;>\n        (try constructor <;> nlinarith)\n      })\n    <;>\n    (try\n      {\n        ring_nf at l4 \u22a2\n        <;>\n        norm_num at l4 \u22a2\n        <;>\n        (try linarith)\n        <;>\n        (try constructor <;> nlinarith)\n      })\n    <;>\n    (try\n      {\n        norm_num at l4 \u22a2\n        <;>\n        (try linarith)\n        <;>\n        (try constructor <;> nlinarith)\n      })\n  simpa using h\u2081", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["tc_1: Both express z as x+iy using equivalent complex number notation", "tc_2: The governing equation is identical, just using 'star z' instead of z\u0304 notation", "l1: Complex conjugate definition matches perfectly in both versions", "l2: The expansion of (1+i)z is identical in both representations", "l3: The expansion of (2-i)z\u0304 matches exactly between natural language and Lean", "l4: The substituted equation is mathematically identical in both versions", "l5: The conclusion (3x-2y) - iy = 4-i is correctly represented as (3*x-2*y) - I*y = 4-I in Lean, showing proper algebraic simplification"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "By equating the real and imaginary parts of this resulting equation, we obtain the system $3x-2y = 4$ and $-y = -1$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $z=x+iy$ for some real numbers $x, y \\in \\mathbb{R}$ [tc_1];\n\u2022 The governing equation is $(1+i)z + (2-i)\\bar{z} = 4-i$ [tc_2];\n\u2022 The complex conjugate of z is $\\bar{z} = x-iy$ [l1];\n\u2022 The expansion of the first term is $(1+i)z = (x-y) + i(x+y)$ [l2];\n\u2022 The expansion of the second term is $(2-i)\\bar{z} = (2x-y) - i(x+2y)$ [l3];\n\u2022 The substituted equation is $(x-y) + i(x+y) + (2x-y) - i(x+2y) = 4-i$ [l4];\n\u2022 The simplified equation is $(3x-2y) - iy = 4-i$ [l5].\nTherefore, we conclude:\n\u2022 $3x-2y = 4$ and $-y = -1$ [l6].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (l1 : star z = x - y * I)\n  (l2 : (1 + I) * z = (x - y) + I * (x + y))\n  (l3 : (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y))\n  (l4 : (x - y) + I * (x + y) + (2 * x - y) - I * (x + 2 * y) = 4 - I)\n  (l5 : (3 * x - 2 * y) - I * y = 4 - I) :\n  3 * x - 2 * y = 4 \u2227 -y = -1 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (l1 : star z = x - y * I)\n  (l2 : (1 + I) * z = (x - y) + I * (x + y))\n  (l3 : (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y))\n  (l4 : (x - y) + I * (x + y) + (2 * x - y) - I * (x + 2 * y) = 4 - I)\n  (l5 : (3 * x - 2 * y) - I * y = 4 - I) :\n  3 * x - 2 * y = 4 \u2227 -y = -1 := by\n  have h\u2081 : 3 * x - 2 * y = 4 := by\n    simp [Complex.ext_iff, pow_two] at l5 \u22a2\n    <;>\n    (try ring_nf at l5 \u22a2) <;>\n    (try norm_num at l5 \u22a2) <;>\n    (try linarith) <;>\n    (try nlinarith) <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> linarith\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> nlinarith\n      })\n    <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n    <;>\n    (try\n      {\n        norm_num at l5 \u22a2\n        <;>\n        (try linarith)\n        <;>\n        (try nlinarith)\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> linarith\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> nlinarith\n      })\n    <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n    <;>\n    (try\n      {\n        norm_num at l5 \u22a2\n        <;>\n        (try linarith)\n        <;>\n        (try nlinarith)\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> linarith\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> nlinarith\n      })\n    <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n  \n  have h\u2082 : -y = -1 := by\n    simp [Complex.ext_iff, pow_two] at l5 \u22a2\n    <;>\n    (try ring_nf at l5 \u22a2) <;>\n    (try norm_num at l5 \u22a2) <;>\n    (try linarith) <;>\n    (try nlinarith) <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> linarith\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> nlinarith\n      })\n    <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n    <;>\n    (try\n      {\n        norm_num at l5 \u22a2\n        <;>\n        (try linarith)\n        <;>\n        (try nlinarith)\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> linarith\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> nlinarith\n      })\n    <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n    <;>\n    (try\n      {\n        norm_num at l5 \u22a2\n        <;>\n        (try linarith)\n        <;>\n        (try nlinarith)\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> linarith\n      })\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> norm_num <;> nlinarith\n      })\n    <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n  \n  exact \u27e8h\u2081, h\u2082\u27e9", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 33, "endLine": 85, "endColumn": 19, "data": "unsolved goals\nI z : \u2102\nx y : \u211d\ntc_1 : z = \u2191x + \u2191y * I\ntc_2 : (1 + I) * z + (2 - I) * star z = 4 - I\nl1 : star z = \u2191x - \u2191y * I\nl2 : (1 + I) * z = \u2191x - \u2191y + I * (\u2191x + \u2191y)\nl3 : (2 - I) * star z = 2 * \u2191x - \u2191y - I * (\u2191x + 2 * \u2191y)\nl4 : \u2191x - \u2191y + I * (\u2191x + \u2191y) + (2 * \u2191x - \u2191y) - I * (\u2191x + 2 * \u2191y) = 4 - I\nl5 : x * 3 + (-(y * 2) - y * I.re) = 4 - I.re \u2227 y * I.im = I.im\n\u22a2 x * 3 - y * 2 = 4"}, {"line": 87, "column": 23, "endLine": 158, "endColumn": 19, "data": "unsolved goals\nI z : \u2102\nx y : \u211d\ntc_1 : z = \u2191x + \u2191y * I\ntc_2 : (1 + I) * z + (2 - I) * star z = 4 - I\nl1 : star z = \u2191x - \u2191y * I\nl2 : (1 + I) * z = \u2191x - \u2191y + I * (\u2191x + \u2191y)\nl3 : (2 - I) * star z = 2 * \u2191x - \u2191y - I * (\u2191x + 2 * \u2191y)\nl4 : \u2191x - \u2191y + I * (\u2191x + \u2191y) + (2 * \u2191x - \u2191y) - I * (\u2191x + 2 * \u2191y) = 4 - I\nh\u2081 : 3 * x - 2 * y = 4\nl5 : x * 3 + (-(y * 2) - y * I.re) = 4 - I.re \u2227 y * I.im = I.im\n\u22a2 y = 1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1: Mathematical equivalence between z=x+iy and z = x + y * I - just different notation for imaginary unit", "tc_2: Governing equation correctly formalized with star z representing complex conjugate", "l1: Complex conjugate definition matches exactly", "l2: Expansion of (1+i)z correctly formalized", "l3: Expansion of (2-i)z\u0304 correctly formalized", "l4: Substituted equation matches exactly", "l5: Simplified equation matches exactly", "l6: Conclusion correctly formalized with \u2227 representing 'and'", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (l1 : star z = x - y * I)\n  (l2 : (1 + I) * z = (x - y) + I * (x + y))\n  (l3 : (2 - I) * (star z) = (2 * x - y) - I * (x + 2 * y))\n  (l4 : (x - y) + I * (x + y) + (2 * x - y) - I * (x + 2 * y) = 4 - I)\n  (l5 : (3 * x - 2 * y) - I * y = 4 - I) :\n  3 * x - 2 * y = 4 \u2227 -y = -1 := by\n  have h\u2081 : 3 * x - 2 * y = 4 := by\n    have h\u2081\u2081 := l5\n    simp [Complex.ext_iff, pow_two, Complex.I_mul_I] at h\u2081\u2081 \u22a2\n    <;>\n    (try ring_nf at h\u2081\u2081 \u22a2) <;>\n    (try norm_num at h\u2081\u2081 \u22a2) <;>\n    (try nlinarith [sq_nonneg (x - 1), sq_nonneg (y - 1), sq_nonneg (x + 1), sq_nonneg (y + 1)]) <;>\n    (try\n      {\n        cases' le_total 0 (x - 1) with h h <;>\n        cases' le_total 0 (y - 1) with h' h' <;>\n        simp_all [abs_of_nonneg, abs_of_nonpos, sub_nonneg, sub_nonpos] <;>\n        nlinarith\n      }) <;>\n    (try\n      {\n        nlinarith [sq_nonneg (x - 1), sq_nonneg (y - 1), sq_nonneg (x + 1), sq_nonneg (y + 1)]\n      })\n    <;>\n    (try\n      {\n        nlinarith [sq_nonneg (x - 1), sq_nonneg (y - 1), sq_nonneg (x + 1), sq_nonneg (y + 1)]\n      })\n  \n  have h\u2082 : -y = -1 := by\n    have h\u2082\u2081 := l5\n    simp [Complex.ext_iff, pow_two, Complex.I_mul_I] at h\u2082\u2081 \u22a2\n    <;>\n    (try ring_nf at h\u2082\u2081 \u22a2) <;>\n    (try norm_num at h\u2082\u2081 \u22a2) <;>\n    (try nlinarith [sq_nonneg (x - 1), sq_nonneg (y - 1), sq_nonneg (x + 1), sq_nonneg (y + 1)]) <;>\n    (try\n      {\n        cases' le_total 0 (x - 1) with h h <;>\n        cases' le_total 0 (y - 1) with h' h' <;>\n        simp_all [abs_of_nonneg, abs_of_nonpos, sub_nonneg, sub_nonpos] <;>\n        nlinarith\n      }) <;>\n    (try\n      {\n        nlinarith [sq_nonneg (x - 1), sq_nonneg (y - 1), sq_nonneg (x + 1), sq_nonneg (y + 1)]\n      })\n    <;>\n    (try\n      {\n        nlinarith [sq_nonneg (x - 1), sq_nonneg (y - 1), sq_nonneg (x + 1), sq_nonneg (y + 1)]\n      })\n  \n  have h_main : 3 * x - 2 * y = 4 \u2227 -y = -1 := by\n    exact \u27e8h\u2081, h\u2082\u27e9\n  \n  exact h_main"}, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "Solving this system yields $x=2$ and $y=1$.", "statement": "We assume:\n\u2022 From equating real and imaginary parts, we have the system of equations $3x-2y = 4$ and $-y = -1$ [l6].\nTherefore, we conclude:\n\u2022 $y=1$ [l7].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l7\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (l6 : 3 * x - 2 * y = 4 \u2227 -y = -1) :\n  y = 1 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l7\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (l6 : 3 * x - 2 * y = 4 \u2227 -y = -1) :\n  y = 1 := by\n  have h1 : -y = -1 := l6.2\n  have h2 : y = 1 := by\n    have h3 : -y = -1 := h1\n    have h4 : y = 1 := by\n      linarith\n    exact h4\n  exact h2", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The system of equations assumption is correctly captured with the conjunction of the two equations 3*x - 2*y = 4 and -y = -1", "The conclusion y = 1 is correctly stated as the theorem's goal", "The logical flow from assumption l6 to conclusion y = 1 is properly modeled in the theorem structure"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "Solving this system yields $x=2$ and $y=1$.", "statement": "We assume:\n\u2022 From equating real and imaginary parts, we have the system of equations $3x-2y = 4$ and $-y = -1$ [l6];\n\u2022 From solving the second part of the system, we have $y=1$ [l7].\nTherefore, we conclude:\n\u2022 $x=2$ [l8].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l8\n  (x y : \u211d)\n  (l6 : 3 * x - 2 * y = 4 \u2227 -y = -1)\n  (l7 : y = 1) :\n  x = 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l8\n  (x y : \u211d)\n  (l6 : 3 * x - 2 * y = 4 \u2227 -y = -1)\n  (l7 : y = 1) :\n  x = 2 := by\n  have h\u2081 : 3 * x - 2 * y = 4 := l6.1\n  have h\u2082 : -y = -1 := l6.2\n  have h\u2083 : y = 1 := l7\n  have h\u2084 : x = 2 := by\n    -- Substitute y = 1 into the first equation to solve for x\n    have h\u2085 : 3 * x - 2 * 1 = 4 := by\n      rw [h\u2083] at h\u2081\n      exact h\u2081\n    -- Simplify the equation to get 3x - 2 = 4\n    have h\u2086 : 3 * x = 6 := by linarith\n    -- Solve for x to get x = 2\n    linarith\n  exact h\u2084", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The system of equations l6 is correctly formalized as a conjunction of the two equations with exact mathematical correspondence", "The premise l7 stating y=1 is correctly represented as a hypothesis in the Lean theorem", "The conclusion x=2 is properly represented as the goal to be proved in the theorem statement", "The logical structure correctly captures the deductive reasoning from premises l6 and l7 to conclusion l8", "All mathematical expressions and numerical values are preserved exactly between natural language and Lean formalization"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "which implies $z=2+i$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $z=x+iy$ for some real numbers $x, y \\in \\mathbb{R}$ [tc_1];\n\u2022 From solving the system of equations, we have $y=1$ [l7];\n\u2022 From solving the system of equations, we have $x=2$ [l8].\nTherefore, we conclude:\n\u2022 $z=2+i$ [ts_1].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4", "l5", "l6", "l7", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (l7 : y = 1)\n  (l8 : x = 2) :\n  z = 2 + I := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : (1 + I) * z + (2 - I) * (star z) = 4 - I)\n  (l7 : y = 1)\n  (l8 : x = 2) :\n  z = 2 + I := by\n  have h\u2081 : z = 2 + I := by\n    rw [tc_1] at tc_2\n    simp [l7, l8, Complex.ext_iff, Complex.star_def, pow_two, Complex.ext_iff, Complex.I_mul_I] at tc_2 \u22a2\n    <;> norm_num at tc_2 \u22a2 <;>\n    (try constructor <;> linarith) <;>\n    (try ring_nf at tc_2 \u22a2 <;> norm_num at tc_2 \u22a2 <;>\n      (try constructor <;> linarith))\n    <;>\n    (try\n      {\n        cases' tc_2 with h\u2082 h\u2083\n        <;>\n        (try simp_all) <;>\n        (try norm_num at *) <;>\n        (try linarith)\n      })\n  exact h\u2081", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations and complex number representation are correctly formalized", "The additional equation constraint provides helpful context for the mentioned 'system of equations' without contradicting the natural language", "Solution values y=1 and x=2 are perfectly captured with matching labels", "The conclusion z=2+i is correctly represented as z=2+I in Lean notation", "The logical structure from assumptions to conclusion is properly maintained in the theorem format"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    