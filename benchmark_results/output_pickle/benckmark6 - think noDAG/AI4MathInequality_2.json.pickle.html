
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for all real numbers $a, b, c, d > 1$, the following inequality holds:
$$ 
\\sqrt{a-1}+\\sqrt{b-1}+\\sqrt{c-1}+\\sqrt{d-1} \\leq \\sqrt{(a b+1)(c d+1)}.
$$

Proof: We prove that $\sqrt{a-1}+\sqrt{b-1}+\sqrt{c-1}+\sqrt{d-1}\le\sqrt{(ab+1)(cd+1)}$ for $a,b,c,d>1$. For $x,y>1$ we have $(\sqrt{x-1}+\sqrt{y-1})^2=x+y-2+2\sqrt{(x-1)(y-1)}\le xy$ because $(x-1)(y-1)\ge0$; hence $\sqrt{x-1}+\sqrt{y-1}\le\sqrt{xy}$. Applying this to $(a,b)$ and $(c,d)$ gives $\sqrt{a-1}+\sqrt{b-1}+\sqrt{c-1}+\sqrt{d-1}\le\sqrt{ab}+\sqrt{cd}$. Next, for any $X,Y\ge0$ we have $(X+Y)^2\le (X^2+1)(Y^2+1)$ since the latter minus the former equals $(XY-1)^2\ge0$; thus $X+Y\le\sqrt{(X^2+1)(Y^2+1)}$. Taking $X=\sqrt{ab}$ and $Y=\sqrt{cd}$ yields $\sqrt{ab}+\sqrt{cd}\le\sqrt{(ab+1)(cd+1)}$, and combining the two inequalities gives the desired result.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for all real numbers $a, b, c, d > 1$", "statement": "Premise:\n\u2022 a, b, c, d are real numbers greater than 1 [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c d : \u211d)\n(tc_1 : 1 < a \u2227 1 < b \u2227 1 < c \u2227 1 < d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that a, b, c, d are real numbers (via the variable declaration) and that each is greater than 1 (via the conjunction in tc_1). The logical meaning is identical to the natural language statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "For $x,y>1$ we have $(\\sqrt{x-1}+\\sqrt{y-1})^2=x+y-2+2\\sqrt{(x-1)(y-1)}\\le xy$ because $(x-1)(y-1)\\ge0$", "statement": "We assume:\n\u2022 a, b, c, d are real numbers greater than 1 [tc_1];\nTherefore, we conclude:\n\u2022 For any real numbers x, y > 1, we have $(\\sqrt{x-1}+\\sqrt{y-1})^2 \\leq xy$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (x y : \u211d) (hx : 1 < x) (hy : 1 < y) :\n  (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 \u2264 x * y := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (x y : \u211d) (hx : 1 < x) (hy : 1 < y) :\n  (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 \u2264 x * y := by\n  have h\u2081 : 0 \u2264 (Real.sqrt (x - 1) * Real.sqrt (y - 1) - 1)^2 := by\n    nlinarith [sq_nonneg (Real.sqrt (x - 1) * Real.sqrt (y - 1) - 1)]\n  \n  have h\u2082 : (x - 1) * (y - 1) + 1 \u2265 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n    have h\u2082\u2081 : 0 \u2264 Real.sqrt (x - 1) := Real.sqrt_nonneg (x - 1)\n    have h\u2082\u2082 : 0 \u2264 Real.sqrt (y - 1) := Real.sqrt_nonneg (y - 1)\n    have h\u2082\u2083 : 0 \u2264 Real.sqrt (x - 1) * Real.sqrt (y - 1) := by positivity\n    have h\u2082\u2084 : 0 \u2264 (Real.sqrt (x - 1) * Real.sqrt (y - 1) - 1) ^ 2 := by positivity\n    have h\u2082\u2085 : (Real.sqrt (x - 1) * Real.sqrt (y - 1)) ^ 2 = (x - 1) * (y - 1) := by\n      have h\u2082\u2085\u2081 : 0 \u2264 x - 1 := by linarith\n      have h\u2082\u2085\u2082 : 0 \u2264 y - 1 := by linarith\n      have h\u2082\u2085\u2083 : 0 \u2264 Real.sqrt (x - 1) := Real.sqrt_nonneg (x - 1)\n      have h\u2082\u2085\u2084 : 0 \u2264 Real.sqrt (y - 1) := Real.sqrt_nonneg (y - 1)\n      calc\n        (Real.sqrt (x - 1) * Real.sqrt (y - 1)) ^ 2 = (Real.sqrt (x - 1)) ^ 2 * (Real.sqrt (y - 1)) ^ 2 := by ring\n        _ = (x - 1) * (y - 1) := by\n          have h\u2082\u2085\u2085 : (Real.sqrt (x - 1)) ^ 2 = x - 1 := by\n            rw [Real.sq_sqrt] <;> linarith\n          have h\u2082\u2085\u2086 : (Real.sqrt (y - 1)) ^ 2 = y - 1 := by\n            rw [Real.sq_sqrt] <;> linarith\n          rw [h\u2082\u2085\u2085, h\u2082\u2085\u2086]\n          <;> ring\n        _ = (x - 1) * (y - 1) := by ring\n    nlinarith [sq_nonneg (Real.sqrt (x - 1) * Real.sqrt (y - 1) - 1)]\n  \n  have h\u2083 : (x - 1) * (y - 1) + x + y - 1 \u2265 x + y - 2 + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n    linarith\n  \n  have h\u2084 : x * y = (x - 1) * (y - 1) + x + y - 1 := by\n    have h\u2084\u2081 : x * y = (x - 1) * (y - 1) + x + y - 1 := by\n      ring_nf\n      <;>\n      nlinarith\n    linarith\n  \n  have h\u2085 : (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 = x + y - 2 + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n    have h\u2085\u2081 : 0 \u2264 Real.sqrt (x - 1) := Real.sqrt_nonneg (x - 1)\n    have h\u2085\u2082 : 0 \u2264 Real.sqrt (y - 1) := Real.sqrt_nonneg (y - 1)\n    have h\u2085\u2083 : 0 \u2264 Real.sqrt (x - 1) * Real.sqrt (y - 1) := by positivity\n    calc\n      (Real.sqrt (x - 1) + Real.sqrt (y - 1)) ^ 2 = (Real.sqrt (x - 1)) ^ 2 + (Real.sqrt (y - 1)) ^ 2 + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n        ring_nf\n        <;>\n        nlinarith [Real.sq_sqrt (show 0 \u2264 x - 1 by linarith), Real.sq_sqrt (show 0 \u2264 y - 1 by linarith)]\n      _ = (x - 1) + (y - 1) + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n        have h\u2085\u2084 : (Real.sqrt (x - 1)) ^ 2 = x - 1 := by\n          rw [Real.sq_sqrt] <;> linarith\n        have h\u2085\u2085 : (Real.sqrt (y - 1)) ^ 2 = y - 1 := by\n          rw [Real.sq_sqrt] <;> linarith\n        rw [h\u2085\u2084, h\u2085\u2085]\n        <;>\n        ring_nf\n        <;>\n        nlinarith\n      _ = x + y - 2 + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n        ring_nf\n        <;>\n        nlinarith\n  \n  have h\u2086 : (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 \u2264 x * y := by\n    have h\u2086\u2081 : x + y - 2 + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) \u2264 x * y := by\n      have h\u2086\u2082 : (x - 1) * (y - 1) + x + y - 1 \u2265 x + y - 2 + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := h\u2083\n      have h\u2086\u2083 : x * y = (x - 1) * (y - 1) + x + y - 1 := h\u2084\n      linarith\n    have h\u2086\u2084 : (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 = x + y - 2 + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := h\u2085\n    linarith\n  \n  exact h\u2086", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical statement. While the natural language mentions variables a, b, c, d that aren't used in the conclusion, the Lean code appropriately focuses on the relevant variables x, y with the correct constraints (1 < x, 1 < y). The mathematical inequality is translated exactly, and the logical structure of universal quantification is properly represented through the theorem parameters and hypotheses."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "hence $\\sqrt{x-1}+\\sqrt{y-1}\\le\\sqrt{xy}$.", "statement": "We assume:\n\u2022 a, b, c, d are real numbers greater than 1 [tc_1];\n\u2022 For any real numbers x, y > 1, we have $(\\sqrt{x-1}+\\sqrt{y-1})^2 \\leq xy$ [l1];\nTherefore, we conclude:\n\u2022 For any real numbers x, y > 1, we have $\\sqrt{x-1}+\\sqrt{y-1} \\leq \\sqrt{xy}$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (x y : \u211d) (hx : 1 < x) (hy : 1 < y) :\n  Real.sqrt (x - 1) + Real.sqrt (y - 1) \u2264 Real.sqrt (x * y) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (x y : \u211d) (hx : 1 < x) (hy : 1 < y) :\n  Real.sqrt (x - 1) + Real.sqrt (y - 1) \u2264 Real.sqrt (x * y) := by\n  have h1 : 0 \u2264 Real.sqrt (x - 1) := by\n    apply Real.sqrt_nonneg\n  \n  have h2 : 0 \u2264 Real.sqrt (y - 1) := by\n    apply Real.sqrt_nonneg\n  \n  have h3 : 0 \u2264 Real.sqrt (x - 1) * Real.sqrt (y - 1) := by\n    have h3\u2081 : 0 \u2264 Real.sqrt (x - 1) := h1\n    have h3\u2082 : 0 \u2264 Real.sqrt (y - 1) := h2\n    positivity\n  \n  have h4 : (Real.sqrt (x - 1) * Real.sqrt (y - 1) - 1) ^ 2 \u2265 0 := by\n    nlinarith [sq_nonneg (Real.sqrt (x - 1) * Real.sqrt (y - 1) - 1)]\n  \n  have h5 : (x - 1) * (y - 1) + 1 \u2265 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n    have h5\u2081 : 0 \u2264 Real.sqrt (x - 1) := h1\n    have h5\u2082 : 0 \u2264 Real.sqrt (y - 1) := h2\n    have h5\u2083 : 0 \u2264 Real.sqrt (x - 1) * Real.sqrt (y - 1) := h3\n    have h5\u2084 : (Real.sqrt (x - 1) * Real.sqrt (y - 1) - 1) ^ 2 \u2265 0 := h4\n    have h5\u2085 : (x - 1) \u2265 0 := by linarith\n    have h5\u2086 : (y - 1) \u2265 0 := by linarith\n    have h5\u2087 : (Real.sqrt (x - 1)) ^ 2 = (x - 1) := by\n      rw [Real.sq_sqrt] <;> linarith\n    have h5\u2088 : (Real.sqrt (y - 1)) ^ 2 = (y - 1) := by\n      rw [Real.sq_sqrt] <;> linarith\n    nlinarith [sq_nonneg (Real.sqrt (x - 1) * Real.sqrt (y - 1) - 1),\n      sq_nonneg (Real.sqrt (x - 1) - Real.sqrt (y - 1))]\n  \n  have h6 : x * y - x - y + 2 \u2265 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n    have h6\u2081 : (x - 1) * (y - 1) + 1 \u2265 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := h5\n    have h6\u2082 : x * y - x - y + 2 = (x - 1) * (y - 1) + 1 := by\n      ring_nf\n      <;>\n      (try norm_num) <;>\n      (try linarith)\n    linarith\n  \n  have h7 : (Real.sqrt (x - 1) + Real.sqrt (y - 1)) ^ 2 \u2264 x * y := by\n    have h7\u2081 : 0 \u2264 Real.sqrt (x - 1) := h1\n    have h7\u2082 : 0 \u2264 Real.sqrt (y - 1) := h2\n    have h7\u2083 : 0 \u2264 Real.sqrt (x - 1) * Real.sqrt (y - 1) := h3\n    have h7\u2084 : x * y - x - y + 2 \u2265 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := h6\n    have h7\u2085 : (x - 1) \u2265 0 := by linarith\n    have h7\u2086 : (y - 1) \u2265 0 := by linarith\n    have h7\u2087 : (Real.sqrt (x - 1)) ^ 2 = (x - 1) := by\n      rw [Real.sq_sqrt] <;> linarith\n    have h7\u2088 : (Real.sqrt (y - 1)) ^ 2 = (y - 1) := by\n      rw [Real.sq_sqrt] <;> linarith\n    have h7\u2089 : (Real.sqrt (x - 1) + Real.sqrt (y - 1)) ^ 2 = (x - 1) + (y - 1) + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n      calc\n        (Real.sqrt (x - 1) + Real.sqrt (y - 1)) ^ 2 = (Real.sqrt (x - 1)) ^ 2 + (Real.sqrt (y - 1)) ^ 2 + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n          ring_nf\n          <;>\n          nlinarith [Real.sqrt_nonneg (x - 1), Real.sqrt_nonneg (y - 1)]\n        _ = (x - 1) + (y - 1) + 2 * (Real.sqrt (x - 1) * Real.sqrt (y - 1)) := by\n          rw [h7\u2087, h7\u2088]\n          <;>\n          ring_nf\n    have h7\u2081\u2080 : (Real.sqrt (x - 1) + Real.sqrt (y - 1)) ^ 2 \u2264 x * y := by\n      nlinarith [sq_nonneg (x - y), sq_nonneg (Real.sqrt (x - 1) - Real.sqrt (y - 1))]\n    exact h7\u2081\u2080\n  \n  have h8 : Real.sqrt (x - 1) + Real.sqrt (y - 1) \u2265 0 := by\n    have h8\u2081 : 0 \u2264 Real.sqrt (x - 1) := h1\n    have h8\u2082 : 0 \u2264 Real.sqrt (y - 1) := h2\n    linarith\n  \n  have h9 : Real.sqrt (x * y) \u2265 0 := by\n    apply Real.sqrt_nonneg\n  \n  have h10 : (Real.sqrt (x - 1) + Real.sqrt (y - 1)) ^ 2 \u2264 (Real.sqrt (x * y)) ^ 2 := by\n    have h10\u2081 : (Real.sqrt (x - 1) + Real.sqrt (y - 1)) ^ 2 \u2264 x * y := h7\n    have h10\u2082 : (Real.sqrt (x * y)) ^ 2 = x * y := by\n      rw [Real.sq_sqrt] <;>\n      (try positivity) <;>\n      (try nlinarith)\n    linarith\n  \n  have h11 : Real.sqrt (x - 1) + Real.sqrt (y - 1) \u2264 Real.sqrt (x * y) := by\n    have h11\u2081 : 0 \u2264 Real.sqrt (x - 1) + Real.sqrt (y - 1) := h8\n    have h11\u2082 : 0 \u2264 Real.sqrt (x * y) := h9\n    nlinarith [Real.sq_sqrt (show 0 \u2264 x * y by nlinarith),\n      Real.sqrt_nonneg (x * y),\n      sq_nonneg (Real.sqrt (x - 1) + Real.sqrt (y - 1)),\n      sq_nonneg (Real.sqrt (x * y))]\n  \n  exact h11", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variables a, b, c, d declared in natural language are not present in Lean formalization, but they don't appear to be used in the actual mathematical statements, so this is a minor issue.", "Lemma l1 stating the inequality (\u221a(x-1) + \u221a(y-1))\u00b2 \u2264 xy is completely missing from the Lean formalization, despite being explicitly mentioned as an assumption in the natural language. This is a major omission of a key logical component.", "Theorem l2 is perfectly captured in the Lean formalization with correct mathematical statement, variable types (real numbers), and constraints (both x and y greater than 1)."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"Variables a, b, c, d declared in natural language are not present in Lean formalization, but they don't appear to be used in the actual mathematical statements, so this is a minor issue.\", 'Lemma l1 stating the inequality (\u221a(x-1) + \u221a(y-1))\u00b2 \u2264 xy is completely missing from the Lean formalization, despite being explicitly mentioned as an assumption in the natural language. This is a major omission of a key logical component.', 'Theorem l2 is perfectly captured in the Lean formalization with correct mathematical statement, variable types (real numbers), and constraints (both x and y greater than 1).']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Applying this to $(a,b)$ and $(c,d)$ gives $\\sqrt{a-1}+\\sqrt{b-1}+\\sqrt{c-1}+\\sqrt{d-1}\\le\\sqrt{ab}+\\sqrt{cd}$.", "statement": "We assume:\n\u2022 a, b, c, d are real numbers greater than 1 [tc_1];\n\u2022 For any real numbers x, y > 1, we have $(\\sqrt{x-1}+\\sqrt{y-1})^2 \\leq xy$ [l1];\n\u2022 For any real numbers x, y > 1, we have $\\sqrt{x-1}+\\sqrt{y-1} \\leq \\sqrt{xy}$ [l2];\nTherefore, we conclude:\n\u2022 $\\sqrt{a-1}+\\sqrt{b-1}+\\sqrt{c-1}+\\sqrt{d-1} \\leq \\sqrt{ab}+\\sqrt{cd}$ [l3].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (a b c d : \u211d)\n  (ha : 1 < a) (hb : 1 < b) (hc : 1 < c) (hd : 1 < d)\n  (l1 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 \u2264 x * y)\n  (l2 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 Real.sqrt (x - 1) + Real.sqrt (y - 1) \u2264 Real.sqrt (x * y)) :\n  Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt (a * b) + Real.sqrt (c * d) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (a b c d : \u211d)\n  (ha : 1 < a) (hb : 1 < b) (hc : 1 < c) (hd : 1 < d)\n  (l1 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 \u2264 x * y)\n  (l2 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 Real.sqrt (x - 1) + Real.sqrt (y - 1) \u2264 Real.sqrt (x * y)) :\n  Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt (a * b) + Real.sqrt (c * d) := by\n  have h1 : Real.sqrt (a - 1) + Real.sqrt (b - 1) \u2264 Real.sqrt (a * b) := by\n    have h1\u2081 : Real.sqrt (a - 1) + Real.sqrt (b - 1) \u2264 Real.sqrt (a * b) := l2 a b ha hb\n    exact h1\u2081\n  \n  have h2 : Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt (c * d) := by\n    have h2\u2081 : Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt (c * d) := l2 c d hc hd\n    exact h2\u2081\n  \n  have h3 : Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt (a * b) + Real.sqrt (c * d) := by\n    have h4 : Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) = (Real.sqrt (a - 1) + Real.sqrt (b - 1)) + (Real.sqrt (c - 1) + Real.sqrt (d - 1)) := by ring\n    rw [h4]\n    have h5 : (Real.sqrt (a - 1) + Real.sqrt (b - 1)) + (Real.sqrt (c - 1) + Real.sqrt (d - 1)) \u2264 Real.sqrt (a * b) + Real.sqrt (c * d) := by\n      linarith [h1, h2]\n    linarith\n  \n  exact h3", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations and constraints are correctly formalized with proper types and inequality conditions", "Assumption l1 is accurately translated with correct universal quantification, conditions, and mathematical expression", "Assumption l2 is properly formalized with the right logical structure and mathematical content", "The conclusion l3 correctly captures the target inequality that needs to be proven"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "for any $X,Y\\ge0$ we have $(X+Y)^2\\le (X^2+1)(Y^2+1)$ since the latter minus the former equals $(XY-1)^2\\ge0$; thus $X+Y\\le\\sqrt{(X^2+1)(Y^2+1)}$.", "statement": "We assume:\n\u2022 a, b, c, d are real numbers greater than 1 [tc_1];\n\u2022 For any real numbers x, y > 1, we have $(\\sqrt{x-1}+\\sqrt{y-1})^2 \\leq xy$ [l1];\n\u2022 For any real numbers x, y > 1, we have $\\sqrt{x-1}+\\sqrt{y-1} \\leq \\sqrt{xy}$ [l2];\n\u2022 $\\sqrt{a-1}+\\sqrt{b-1}+\\sqrt{c-1}+\\sqrt{d-1} \\leq \\sqrt{ab}+\\sqrt{cd}$ [l3];\nTherefore, we conclude:\n\u2022 For any non-negative real numbers X, Y, we have $X+Y \\leq \\sqrt{(X^2+1)(Y^2+1)}$ [l4].", "dependencies": ["tc_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 (X Y : \u211d) (hX : 0 \u2264 X) (hY : 0 \u2264 Y) :\n  X + Y \u2264 Real.sqrt ((X^2 + 1) * (Y^2 + 1)) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 (X Y : \u211d) (hX : 0 \u2264 X) (hY : 0 \u2264 Y) :\n  X + Y \u2264 Real.sqrt ((X^2 + 1) * (Y^2 + 1)) := by\n  have h\u2081 : (X + Y)^2 \u2264 (X^2 + 1) * (Y^2 + 1) := by\n    nlinarith [sq_nonneg (X * Y - 1), sq_nonneg (X - Y), sq_nonneg (X + Y),\n      sq_nonneg (X * Y + 1), sq_nonneg (X + Y - 2), sq_nonneg (X * Y - X - Y)]\n  \n  have h\u2082 : 0 \u2264 (X^2 + 1) * (Y^2 + 1) := by\n    have h\u2082\u2081 : 0 \u2264 X^2 + 1 := by nlinarith\n    have h\u2082\u2082 : 0 \u2264 Y^2 + 1 := by nlinarith\n    nlinarith\n  \n  have h\u2083 : 0 \u2264 X + Y := by\n    nlinarith\n  \n  have h\u2084 : X + Y \u2264 Real.sqrt ((X^2 + 1) * (Y^2 + 1)) := by\n    apply Real.le_sqrt_of_sq_le\n    nlinarith\n  \n  exact h\u2084", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization only captures the final conclusion l4 but completely omits all the stated assumptions and premises (tc_1, l1, l2, l3) from the natural language. While the final theorem l4 itself is correctly formalized with proper variable constraints and mathematical expression, the missing premises represent key logical components that should be included according to the natural language specification."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization only captures the final conclusion l4 but completely omits all the stated assumptions and premises (tc_1, l1, l2, l3) from the natural language. While the final theorem l4 itself is correctly formalized with proper variable constraints and mathematical expression, the missing premises represent key logical components that should be included according to the natural language specification.']"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Taking $X=\\sqrt{ab}$ and $Y=\\sqrt{cd}$ yields $\\sqrt{ab}+\\sqrt{cd}\\le\\sqrt{(ab+1)(cd+1)}$", "statement": "We assume:\n\u2022 a, b, c, d are real numbers greater than 1 [tc_1];\n\u2022 For any real numbers x, y > 1, we have $(\\sqrt{x-1}+\\sqrt{y-1})^2 \\leq xy$ [l1];\n\u2022 For any real numbers x, y > 1, we have $\\sqrt{x-1}+\\sqrt{y-1} \\leq \\sqrt{xy}$ [l2];\n\u2022 $\\sqrt{a-1}+\\sqrt{b-1}+\\sqrt{c-1}+\\sqrt{d-1} \\leq \\sqrt{ab}+\\sqrt{cd}$ [l3];\n\u2022 For any non-negative real numbers X, Y, we have $X+Y \\leq \\sqrt{(X^2+1)(Y^2+1)}$ [l4];\nTherefore, we conclude:\n\u2022 $\\sqrt{ab}+\\sqrt{cd} \\leq \\sqrt{(ab+1)(cd+1)}$ [l5].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (a b c d : \u211d)\n  (ha : 1 < a) (hb : 1 < b) (hc : 1 < c) (hd : 1 < d)\n  (l1 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 \u2264 x * y)\n  (l2 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 Real.sqrt (x - 1) + Real.sqrt (y - 1) \u2264 Real.sqrt (x * y))\n  (l3 : Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt (a * b) + Real.sqrt (c * d))\n  (l4 : \u2200 X Y : \u211d, 0 \u2264 X \u2192 0 \u2264 Y \u2192 X + Y \u2264 Real.sqrt ((X^2 + 1) * (Y^2 + 1))) :\n  Real.sqrt (a * b) + Real.sqrt (c * d) \u2264 Real.sqrt ((a * b + 1) * (c * d + 1)) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (a b c d : \u211d)\n  (ha : 1 < a) (hb : 1 < b) (hc : 1 < c) (hd : 1 < d)\n  (l1 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 \u2264 x * y)\n  (l2 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 Real.sqrt (x - 1) + Real.sqrt (y - 1) \u2264 Real.sqrt (x * y))\n  (l3 : Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt (a * b) + Real.sqrt (c * d))\n  (l4 : \u2200 X Y : \u211d, 0 \u2264 X \u2192 0 \u2264 Y \u2192 X + Y \u2264 Real.sqrt ((X^2 + 1) * (Y^2 + 1))) :\n  Real.sqrt (a * b) + Real.sqrt (c * d) \u2264 Real.sqrt ((a * b + 1) * (c * d + 1)) := by\n  have hX : 0 \u2264 Real.sqrt (a * b) := by\n    apply Real.sqrt_nonneg\n  \n  have hY : 0 \u2264 Real.sqrt (c * d) := by\n    apply Real.sqrt_nonneg\n  \n  have h_main : Real.sqrt (a * b) + Real.sqrt (c * d) \u2264 Real.sqrt (( (Real.sqrt (a * b))^2 + 1 ) * ( (Real.sqrt (c * d))^2 + 1 )) := by\n    have h\u2081 : 0 \u2264 Real.sqrt (a * b) := by positivity\n    have h\u2082 : 0 \u2264 Real.sqrt (c * d) := by positivity\n    -- Apply the given lemma l4 to X = Real.sqrt (a * b) and Y = Real.sqrt (c * d)\n    have h\u2083 : Real.sqrt (a * b) + Real.sqrt (c * d) \u2264 Real.sqrt (((Real.sqrt (a * b)) ^ 2 + 1) * ((Real.sqrt (c * d)) ^ 2 + 1)) := by\n      apply l4\n      <;> nlinarith [Real.sqrt_nonneg (a * b), Real.sqrt_nonneg (c * d)]\n    -- The result follows directly from the lemma\n    exact h\u2083\n  \n  have h_final : Real.sqrt (( (Real.sqrt (a * b))^2 + 1 ) * ( (Real.sqrt (c * d))^2 + 1 )) = Real.sqrt ((a * b + 1) * (c * d + 1)) := by\n    have h\u2081 : (Real.sqrt (a * b)) ^ 2 = a * b := by\n      rw [Real.sq_sqrt (by\n        have h\u2082 : 0 \u2264 a * b := by\n          have h\u2083 : 0 < a := by linarith\n          have h\u2084 : 0 < b := by linarith\n          positivity\n        linarith\n      )]\n    have h\u2082 : (Real.sqrt (c * d)) ^ 2 = c * d := by\n      rw [Real.sq_sqrt (by\n        have h\u2083 : 0 \u2264 c * d := by\n          have h\u2084 : 0 < c := by linarith\n          have h\u2085 : 0 < d := by linarith\n          positivity\n        linarith\n      )]\n    have h\u2083 : ((Real.sqrt (a * b)) ^ 2 + 1) * ((Real.sqrt (c * d)) ^ 2 + 1) = (a * b + 1) * (c * d + 1) := by\n      rw [h\u2081, h\u2082]\n      <;> ring\n    rw [h\u2083]\n    <;>\n    simp [Real.sqrt_eq_iff_sq_eq]\n    <;>\n    nlinarith [mul_nonneg (by nlinarith : (0 : \u211d) \u2264 a * b) (by nlinarith : (0 : \u211d) \u2264 c * d)]\n  \n  have h_goal : Real.sqrt (a * b) + Real.sqrt (c * d) \u2264 Real.sqrt ((a * b + 1) * (c * d + 1)) := by\n    calc\n      Real.sqrt (a * b) + Real.sqrt (c * d) \u2264 Real.sqrt (((Real.sqrt (a * b)) ^ 2 + 1) * ((Real.sqrt (c * d)) ^ 2 + 1)) := h_main\n      _ = Real.sqrt ((a * b + 1) * (c * d + 1)) := by rw [h_final]\n  \n  apply h_goal", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations and constraints are correctly formalized. The Lean code properly declares a, b, c, d as real numbers with the constraint that each is greater than 1.", "Assumption l1 is perfectly captured. The universal quantification over real numbers x, y > 1 and the inequality involving squared sum of square roots is correctly formalized.", "Assumption l2 is accurately formalized. The universal quantification and the inequality with square roots are properly represented.", "Assumption l3 is correctly formalized. The specific inequality involving the four variables a, b, c, d with their square root expressions matches exactly.", "Assumption l4 is properly formalized. The universal quantification over non-negative reals and the inequality are correctly captured.", "The conclusion l5 is accurately formalized. The inequality involving square roots of products matches the natural language statement exactly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "and combining the two inequalities gives the desired result.", "statement": "We assume:\n\u2022 a, b, c, d are real numbers greater than 1 [tc_1];\n\u2022 For any real numbers x, y > 1, we have $(\\sqrt{x-1}+\\sqrt{y-1})^2 \\leq xy$ [l1];\n\u2022 For any real numbers x, y > 1, we have $\\sqrt{x-1}+\\sqrt{y-1} \\leq \\sqrt{xy}$ [l2];\n\u2022 $\\sqrt{a-1}+\\sqrt{b-1}+\\sqrt{c-1}+\\sqrt{d-1} \\leq \\sqrt{ab}+\\sqrt{cd}$ [l3];\n\u2022 For any non-negative real numbers X, Y, we have $X+Y \\leq \\sqrt{(X^2+1)(Y^2+1)}$ [l4];\n\u2022 $\\sqrt{ab}+\\sqrt{cd} \\leq \\sqrt{(ab+1)(cd+1)}$ [l5];\nTherefore, we conclude:\n\u2022 $\\sqrt{a-1}+\\sqrt{b-1}+\\sqrt{c-1}+\\sqrt{d-1} \\leq \\sqrt{(ab+1)(cd+1)}$ [ts_1].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a b c d : \u211d)\n  (ha : 1 < a) (hb : 1 < b) (hc : 1 < c) (hd : 1 < d)\n  (l1 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 \u2264 x * y)\n  (l2 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 Real.sqrt (x - 1) + Real.sqrt (y - 1) \u2264 Real.sqrt (x * y))\n  (l3 : Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt (a * b) + Real.sqrt (c * d))\n  (l4 : \u2200 X Y : \u211d, 0 \u2264 X \u2192 0 \u2264 Y \u2192 X + Y \u2264 Real.sqrt ((X^2 + 1) * (Y^2 + 1)))\n  (l5 : Real.sqrt (a * b) + Real.sqrt (c * d) \u2264 Real.sqrt ((a * b + 1) * (c * d + 1))) :\n  Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt ((a * b + 1) * (c * d + 1)) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a b c d : \u211d)\n  (ha : 1 < a) (hb : 1 < b) (hc : 1 < c) (hd : 1 < d)\n  (l1 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 (Real.sqrt (x - 1) + Real.sqrt (y - 1))^2 \u2264 x * y)\n  (l2 : \u2200 x y : \u211d, 1 < x \u2192 1 < y \u2192 Real.sqrt (x - 1) + Real.sqrt (y - 1) \u2264 Real.sqrt (x * y))\n  (l3 : Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt (a * b) + Real.sqrt (c * d))\n  (l4 : \u2200 X Y : \u211d, 0 \u2264 X \u2192 0 \u2264 Y \u2192 X + Y \u2264 Real.sqrt ((X^2 + 1) * (Y^2 + 1)))\n  (l5 : Real.sqrt (a * b) + Real.sqrt (c * d) \u2264 Real.sqrt ((a * b + 1) * (c * d + 1))) :\n  Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt ((a * b + 1) * (c * d + 1)) := by\n  have h_main : Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt ((a * b + 1) * (c * d + 1)) := by\n    have h6 : Real.sqrt (a - 1) + Real.sqrt (b - 1) + Real.sqrt (c - 1) + Real.sqrt (d - 1) \u2264 Real.sqrt (a * b) + Real.sqrt (c * d) := l3\n    have h7 : Real.sqrt (a * b) + Real.sqrt (c * d) \u2264 Real.sqrt ((a * b + 1) * (c * d + 1)) := l5\n    -- Use the transitivity of the \u2264 relation to combine h6 and h7\n    linarith\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations and constraints are correctly formalized with appropriate type annotations and inequality conditions.", "Lemma l1 is perfectly captured with correct universal quantification, preconditions, and mathematical expression.", "Lemma l2 is accurately formalized with proper square root and inequality notation.", "Lemma l3 correctly represents the specific inequality involving the four variables a, b, c, d.", "Lemma l4 properly formalizes the universal statement with non-negativity constraints and the complex square root expression.", "Lemma l5 accurately captures the specific inequality involving products ab and cd.", "The conclusion ts_1 correctly states the target inequality that follows from the given premises."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    