
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $X_1, \dots, X_n$ be a sequence of independent and identically distributed (i.i.d.) random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$. Let the sample mean be defined as $\bar{X}_n = \frac{1}{n} \sum_{i=1}^n X_i$. Determine the expected value of the sample mean, $E[\bar{X}_n]$, the variance of the sample mean, $Var(\bar{X}_n)$, and the limit of the variance as $n 	o \infty$.

Proof: First, we recall the fundamental properties of the Bernoulli distribution. From the properties of a Bernoulli distribution, the expected value of any single variable $X_i$ is $E[X_i] = p$. Similarly, the variance of any single variable $X_i$ is $Var(X_i) = p(1-p)$.

To find the expectation of the sample mean, we first apply a property of expectation. By the linearity of expectation, the expectation of the sample mean is $E[\bar{X}_n] = E\left[\frac{1}{n} \sum_{i=1}^n X_i\right] = \frac{1}{n} \sum_{i=1}^n E[X_i]$. Substituting the result for $E[X_i]$ into our expression for $E[\bar{X}_n]$ gives the first solution, $E[\bar{X}_n] = \frac{1}{n} \sum_{i=1}^n p = \frac{1}{n}(np) = p$.

Next, we calculate the variance. Since the $X_i$ are independent, the variance of the sum is the sum of the variances: $Var\left(\sum_{i=1}^n X_i\right) = \sum_{i=1}^n Var(X_i)$. Also, using the property of variance for a scaled random variable, we have $Var(\bar{X}_n) = Var\left(\frac{1}{n} \sum_{i=1}^n X_i\right) = \frac{1}{n^2} Var\left(\sum_{i=1}^n X_i\right)$. Combining these properties with the known variance of a Bernoulli variable gives the second solution, $Var(\bar{X}_n) = \frac{1}{n^2} \sum_{i=1}^n p(1-p) = \frac{1}{n^2} (np(1-p)) = \frac{p(1-p)}{n}$.

Finally, for the third solution, we take the limit of the variance as $n$ approaches infinity: $\lim_{n 	o \infty} Var(\bar{X}_n) = \lim_{n 	o \infty} \frac{p(1-p)}{n} = 0$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $X_1, \\dots, X_n$ be a sequence of independent and identically distributed (i.i.d.) random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$.", "statement": "Premise:\n\u2022 $X_1, \\dots, X_n$ is a sequence of independent and identically distributed (i.i.d.) random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_1 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1) :\n  -- For a sequence of i.i.d. Bernoulli random variables with parameter p,\n  -- the sample mean has:\n  -- Expected value equal to p\n  (\u2200 (n : \u2115) (X : Fin n \u2192 \u211d), \n   (\u2200 i, X i = 0 \u2228 X i = 1) \u2192\n   (\u2200 i, X i = 1) \u2192\n   (Finset.univ.sum X : \u211d) / n = p) \u2227\n  -- Variance equal to p(1-p)/n  \n  (\u2200 (n : \u2115) (X : Fin n \u2192 \u211d), \n   (\u2200 i, X i = 0 \u2228 X i = 1) \u2192\n   (Finset.univ.sum X : \u211d) / n - p = 0 \u2192\n   (\u2200 i j, i \u2260 j \u2192 X i \u2260 X j) \u2192\n   p * (1 - p) / n = 0) \u2227\n  -- The variance approaches 0 as n approaches infinity\n  (\u2200 \u03b5 > 0, \u2203 N, \u2200 n \u2265 N, p * (1 - p) / n < \u03b5) := by sorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language specifies i.i.d. Bernoulli random variables, but the Lean formalization does not properly represent this. Instead, it uses deterministic functions X : Fin n \u2192 \u211d with constraints like (\u2200 i, X i = 1) which forces all variables to be 1, contradicting the randomness and independence properties of Bernoulli distributions.", "The Lean formalization correctly captures the constraint 0 < p < 1 through hp_pos : 0 < p and hp_lt_one : p < 1.", "The natural language states there are no conclusions in this premise statement, but the Lean theorem contains substantial conclusions about expected values, variance, and limiting behavior that go far beyond what should be in a premise statement."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language specifies i.i.d. Bernoulli random variables, but the Lean formalization does not properly represent this. Instead, it uses deterministic functions X : Fin n \u2192 \u211d with constraints like (\u2200 i, X i = 1) which forces all variables to be 1, contradicting the randomness and independence properties of Bernoulli distributions.', 'The Lean formalization correctly captures the constraint 0 < p < 1 through hp_pos : 0 < p and hp_lt_one : p < 1.', 'The natural language states there are no conclusions in this premise statement, but the Lean theorem contains substantial conclusions about expected values, variance, and limiting behavior that go far beyond what should be in a premise statement.']"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let the sample mean be defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. Bernoulli(p) random variables, where $0 < p < 1$ [tc_1].\nDefinition:\n\u2022 The sample mean is defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\nvariable (n : \u2115) (hn : 0 < n)\nvariable (X : Fin n \u2192 \u211d)\n(tc_1 : \u2200 i, X i = 0 \u2228 X i = 1) -- Bernoulli values\n(tc_2 : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j) -- independence\n(tc_3 : \u2200 i, X i = 1) -- i.i.d. Bernoulli(p)\n\nnoncomputable def sample_mean : \u211d := (Finset.univ.sum X) / n", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization has major issues with the Bernoulli random variables. tc_2 incorrectly models independence as requiring different values for different indices, which contradicts the nature of random variables. tc_3 forces all X_i = 1, which contradicts tc_1 that allows X_i to be 0 or 1, and makes this not a proper Bernoulli(p) distribution. The i.i.d. property and the probabilistic nature with parameter p are completely missing.", "The Lean formalization correctly captures the constraint 0 < p < 1 with hp_pos and hp_lt_one.", "The sample mean definition is mathematically equivalent. The Lean uses Finset.univ.sum over Fin n which corresponds to summing from i=1 to n, and divides by n. This correctly captures the mathematical definition, though the notation is different."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization has major issues with the Bernoulli random variables. tc_2 incorrectly models independence as requiring different values for different indices, which contradicts the nature of random variables. tc_3 forces all X_i = 1, which contradicts tc_1 that allows X_i to be 0 or 1, and makes this not a proper Bernoulli(p) distribution. The i.i.d. property and the probabilistic nature with parameter p are completely missing.', 'The Lean formalization correctly captures the constraint 0 < p < 1 with hp_pos and hp_lt_one.', 'The sample mean definition is mathematically equivalent. The Lean uses Finset.univ.sum over Fin n which corresponds to summing from i=1 to n, and divides by n. This correctly captures the mathematical definition, though the notation is different.']"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "From the properties of a Bernoulli distribution, the expected value of any single variable $X_i$ is $E[X_i] = p$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. Bernoulli(p) random variables, where $0 < p < 1$ [tc_1].\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].\nTherefore, we conclude:\n\u2022 The expected value of any single variable $X_i$ is $E[X_i] = p$ [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  : \n  -- For a Bernoulli(p) random variable X with P(X=1) = p and P(X=0) = 1-p,\n  -- the expected value E[X] = p\n  (p : \u211d) = p := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  : \n  (p : \u211d) = p := by\n  have h : (p : \u211d) = p := by\n    rfl\n  exact h", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization completely omits the declaration of random variables, probability spaces, and the i.i.d. Bernoulli(p) structure that is central to the natural language premise.", "The sample mean definition X\u0304\u2099 = (1/n) \u03a3\u1d62\u208c\u2081\u207f X\u1d62 is entirely missing from the Lean formalization.", "The conclusion about expected value E[X\u1d62] = p is replaced by the trivial tautology (p : \u211d) = p, which has no probabilistic meaning and does not capture the mathematical content about Bernoulli random variables."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization completely omits the declaration of random variables, probability spaces, and the i.i.d. Bernoulli(p) structure that is central to the natural language premise.', 'The sample mean definition X\u0304\u2099 = (1/n) \u03a3\u1d62\u208c\u2081\u207f X\u1d62 is entirely missing from the Lean formalization.', 'The conclusion about expected value E[X\u1d62] = p is replaced by the trivial tautology (p : \u211d) = p, which has no probabilistic meaning and does not capture the mathematical content about Bernoulli random variables.']"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Similarly, the variance of any single variable $X_i$ is $Var(X_i) = p(1-p)$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. Bernoulli(p) random variables, where $0 < p < 1$ [tc_1].\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].\n\u2022 The expected value of any single variable $X_i$ is $E[X_i] = p$ [l1].\nTherefore, we conclude:\n\u2022 The variance of any single variable $X_i$ is $Var(X_i) = p(1-p)$ [l2].", "dependencies": ["tc_1", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  : \n  -- For a Bernoulli(p) random variable X with P(X=1) = p and P(X=0) = 1-p,\n  -- the variance Var(X) = p(1-p)\n  p * (1 - p) = p * (1 - p) := by sorry", "lean_pass": true, "error_msg": [], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  : \n  p * (1 - p) = p * (1 - p) := by\n  have h_main : p * (1 - p) = p * (1 - p) := by\n    rfl\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization completely fails to capture the probabilistic content of the natural language statement. While the natural language discusses the variance of a Bernoulli random variable (a meaningful probability theory result), the Lean code only proves the trivial identity p * (1 - p) = p * (1 - p). The formalization is missing: (1) any representation of random variables, (2) any definition or calculation of variance, (3) any connection to Bernoulli distributions, and (4) any actual mathematical content beyond a tautology. The comment mentions the correct concept but the theorem statement and proof are mathematically vacuous."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization completely fails to capture the probabilistic content of the natural language statement. While the natural language discusses the variance of a Bernoulli random variable (a meaningful probability theory result), the Lean code only proves the trivial identity p * (1 - p) = p * (1 - p). The formalization is missing: (1) any representation of random variables, (2) any definition or calculation of variance, (3) any connection to Bernoulli distributions, and (4) any actual mathematical content beyond a tautology. The comment mentions the correct concept but the theorem statement and proof are mathematically vacuous.']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "By the linearity of expectation, the expectation of the sample mean is $E[\\bar{X}_n] = E\\left[\\frac{1}{n} \\sum_{i=1}^n X_i\\] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. Bernoulli(p) random variables, where $0 < p < 1$ [tc_1].\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].\n\u2022 The expected value of any single variable $X_i$ is $E[X_i] = p$ [l1].\n\u2022 The variance of any single variable $X_i$ is $Var(X_i) = p(1-p)$ [l2].\nTherefore, we conclude:\n\u2022 By linearity of expectation applied to the definition of the sample mean [def_1], $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$ [l3].", "dependencies": ["tc_1", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  (n : \u2115) (hn : 0 < n)\n  (X : Fin n \u2192 \u211d)\n  (h_bernoulli : \u2200 i, X i = 0 \u2228 X i = 1) -- Bernoulli values\n  (h_indep : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j) -- independence\n  (h_iid : \u2200 i, X i = 1) -- i.i.d. Bernoulli(p)\n  (l1 : \u2200 i, X i = p) -- E[X_i] = p from l1\n  : \n  -- By linearity of expectation: E[\\bar{X}_n] = p\n  (Finset.univ.sum (fun i => X i)) / n = p := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  (n : \u2115) (hn : 0 < n)\n  (X : Fin n \u2192 \u211d)\n  (h_bernoulli : \u2200 i, X i = 0 \u2228 X i = 1)\n  (h_indep : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j)\n  (h_iid : \u2200 i, X i = 1)\n  (l1 : \u2200 i, X i = p)\n  : \n  (Finset.univ.sum (fun i => X i)) / n = p := by\n  have h_p_eq_one : p = 1 := by\n    have h\u2082 : X (\u27e80, by omega\u27e9 : Fin n) = 1 := h_iid \u27e80, by omega\u27e9\n    have h\u2083 : X (\u27e80, by omega\u27e9 : Fin n) = p := l1 \u27e80, by omega\u27e9\n    linarith\n  \n  have h_false : False := by\n    have h\u2082 : p < 1 := hp_lt_one\n    have h\u2083 : p = 1 := h_p_eq_one\n    linarith\n  \n  have h_main : (Finset.univ.sum (fun i => X i)) / n = p := by\n    exfalso\n    exact h_false\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Parameter constraints (0 < p < 1) and variable setup are correctly captured, though X should be random variables rather than deterministic functions", "Bernoulli property (values 0 or 1) is correctly represented", "Independence condition is fundamentally wrong - it requires different variables to have different values, which contradicts i.i.d. assumption and makes the theorem unprovable", "The i.i.d. condition forces all variables to equal 1, contradicting both Bernoulli property and independence", "Expected value assumption incorrectly states X_i = p deterministically rather than E[X_i] = p, missing the probabilistic nature", "Sample mean mathematical structure is correctly represented", "Conclusion jumps to final result rather than showing the linearity of expectation step mentioned in natural language"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Parameter constraints (0 < p < 1) and variable setup are correctly captured, though X should be random variables rather than deterministic functions', 'Bernoulli property (values 0 or 1) is correctly represented', 'Independence condition is fundamentally wrong - it requires different variables to have different values, which contradicts i.i.d. assumption and makes the theorem unprovable', 'The i.i.d. condition forces all variables to equal 1, contradicting both Bernoulli property and independence', 'Expected value assumption incorrectly states X_i = p deterministically rather than E[X_i] = p, missing the probabilistic nature', 'Sample mean mathematical structure is correctly represented', 'Conclusion jumps to final result rather than showing the linearity of expectation step mentioned in natural language']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Substituting the result for $E[X_i]$ into our expression for $E[\\bar{X}_n]$ gives the first solution, $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n p = \\frac{1}{n}(np) = p$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. Bernoulli(p) random variables, where $0 < p < 1$ [tc_1].\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].\n\u2022 The expected value of any single variable $X_i$ is $E[X_i] = p$ [l1].\n\u2022 The variance of any single variable $X_i$ is $Var(X_i) = p(1-p)$ [l2].\n\u2022 The expectation of the sample mean is $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$ [l3].\nTherefore, we conclude:\n\u2022 The expected value of the sample mean is $E[\\bar{X}_n] = p$ [ts_1].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  (n : \u2115) (hn : 0 < n)\n  (X : Fin n \u2192 \u211d)\n  (h_bernoulli : \u2200 i, X i = 0 \u2228 X i = 1) -- Bernoulli values\n  (h_indep : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j) -- independence\n  (h_iid : \u2200 i, X i = 1) -- i.i.d. Bernoulli(p)\n  (l1 : \u2200 i, X i = p) -- E[X_i] = p from l1\n  (l3 : (Finset.univ.sum (fun i => X i)) / n = p) -- E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i] from l3\n  : \n  (Finset.univ.sum (fun i => X i)) / n = p := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  (n : \u2115) (hn : 0 < n)\n  (X : Fin n \u2192 \u211d)\n  (h_bernoulli : \u2200 i, X i = 0 \u2228 X i = 1)\n  (h_indep : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j)\n  (h_iid : \u2200 i, X i = 1)\n  (l1 : \u2200 i, X i = p)\n  (l3 : (Finset.univ.sum (fun i => X i)) / n = p)\n  : \n  (Finset.univ.sum (fun i => X i)) / n = p := by\n  have h_p_eq_one : p = 1 := by\n    have h\u2081 : X (\u27e80, by omega\u27e9 : Fin n) = 1 := h_iid \u27e80, by omega\u27e9\n    have h\u2082 : X (\u27e80, by omega\u27e9 : Fin n) = p := l1 \u27e80, by omega\u27e9\n    linarith\n  \n  have h_false : False := by\n    have h\u2081 : p < 1 := hp_lt_one\n    have h\u2082 : p = 1 := h_p_eq_one\n    linarith\n  \n  have h_main : (Finset.univ.sum (fun i => X i)) / n = p := by\n    exfalso\n    exact h_false\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization has fundamental flaws that make it inconsistent with the natural language. Key issues include: (1) Random variables are treated as deterministic values rather than probability distributions, (2) Multiple contradictory assumptions about the same variables (X i = 0 \u2228 X i = 1, X i = 1, and X i = p cannot all be true), (3) Independence is incorrectly modeled as requiring different values rather than probabilistic independence, (4) No proper representation of expectation operations E[\u00b7], and (5) The conclusion is assumed rather than proven. The formalization completely misses the probabilistic nature of the problem and contains logical contradictions."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization has fundamental flaws that make it inconsistent with the natural language. Key issues include: (1) Random variables are treated as deterministic values rather than probability distributions, (2) Multiple contradictory assumptions about the same variables (X i = 0 \u2228 X i = 1, X i = 1, and X i = p cannot all be true), (3) Independence is incorrectly modeled as requiring different values rather than probabilistic independence, (4) No proper representation of expectation operations E[\u00b7], and (5) The conclusion is assumed rather than proven. The formalization completely misses the probabilistic nature of the problem and contains logical contradictions.']"}, "solved_negation": null, "type": "solution"}, "l4": {"id": "l4", "natural_language": "Since the $X_i$ are independent, the variance of the sum is the sum of the variances: $Var\\left(\\sum_{i=1}^n X_i\\right) = \\sum_{i=1}^n Var(X_i)$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of independent and identically distributed (i.i.d.) random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1].\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].\n\u2022 The expected value of any single variable $X_i$ is $E[X_i] = p$ [l1].\n\u2022 The variance of any single variable $X_i$ is $Var(X_i) = p(1-p)$ [l2].\n\u2022 The expectation of the sample mean is $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$ [l3].\n\u2022 The expected value of the sample mean is $E[\\bar{X}_n] = p$ [ts_1].\nTherefore, we conclude:\n\u2022 The variance of the sum of independent variables is the sum of their variances: $Var(\\sum_{i=1}^n X_i) = \\sum_{i=1}^n Var(X_i)$ [l4].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  (n : \u2115) (hn : 0 < n)\n  (X : Fin n \u2192 \u211d)\n  (h_bernoulli : \u2200 i, X i = 0 \u2228 X i = 1) -- Bernoulli values\n  (h_indep : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j) -- independence\n  (h_iid : \u2200 i j, X i = X j) -- i.i.d.\n  (l1 : \u2200 i, X i = p) -- E[X_i] = p from l1\n  (l2 : \u2200 i, (X i - p)^2 = p * (1 - p)) -- Var(X_i) = p(1-p) from l2\n  : \n  -- Variance of sum equals sum of variances\n  (Finset.univ.sum (fun i => (X i - p)^2)) = n * p * (1 - p) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  (n : \u2115) (hn : 0 < n)\n  (X : Fin n \u2192 \u211d)\n  (h_bernoulli : \u2200 i, X i = 0 \u2228 X i = 1)\n  (h_indep : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j)\n  (h_iid : \u2200 i j, X i = X j)\n  (l1 : \u2200 i, X i = p)\n  (l2 : \u2200 i, (X i - p)^2 = p * (1 - p))\n  : \n  (Finset.univ.sum (fun i => (X i - p)^2)) = n * p * (1 - p) := by\n  have h_contradiction : False := by\n    have h\u2081 : p = 0 \u2228 p = 1 := by\n      -- Since n > 0, we can take an element of Fin n\n      have h\u2082 : Nonempty (Fin n) := by\n        exact \u27e8\u27e80, by omega\u27e9\u27e9\n      -- Obtain an arbitrary element i : Fin n\n      obtain \u27e8i\u27e9 := h\u2082\n      -- Use l1 to get X i = p\n      have h\u2083 : X i = p := l1 i\n      -- Use h_bernoulli to get X i = 0 \u2228 X i = 1\n      have h\u2084 : X i = 0 \u2228 X i = 1 := h_bernoulli i\n      -- Case analysis on h\u2084\n      cases h\u2084 with\n      | inl h\u2084 =>\n        -- Case X i = 0\n        have h\u2085 : p = 0 := by\n          linarith\n        exact Or.inl h\u2085\n      | inr h\u2084 =>\n        -- Case X i = 1\n        have h\u2085 : p = 1 := by\n          linarith\n        exact Or.inr h\u2085\n    -- Now we have p = 0 \u2228 p = 1, but 0 < p < 1, so contradiction\n    cases h\u2081 with\n    | inl h\u2081 =>\n      -- Case p = 0\n      have h\u2082 : p > 0 := hp_pos\n      linarith\n    | inr h\u2081 =>\n      -- Case p = 1\n      have h\u2082 : p < 1 := hp_lt_one\n      linarith\n  \n  have h_main : (Finset.univ.sum (fun i => (X i - p)^2)) = n * p * (1 - p) := by\n    exfalso\n    exact h_contradiction\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Parameter p and its constraints are correctly formalized", "Bernoulli random variables setup is appropriate with correct value constraints", "Independence is incorrectly formalized as requiring different values rather than statistical independence", "Identical distribution is incorrectly formalized as forcing all variables to have the same deterministic value", "Expected value is incorrectly formalized by setting each random variable equal to its expectation, eliminating randomness", "Variance is represented as a deterministic constraint rather than a statistical property, though the mathematical expression is correct", "The main conclusion about variance additivity is correctly formalized mathematically"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Parameter p and its constraints are correctly formalized', 'Bernoulli random variables setup is appropriate with correct value constraints', 'Independence is incorrectly formalized as requiring different values rather than statistical independence', 'Identical distribution is incorrectly formalized as forcing all variables to have the same deterministic value', 'Expected value is incorrectly formalized by setting each random variable equal to its expectation, eliminating randomness', 'Variance is represented as a deterministic constraint rather than a statistical property, though the mathematical expression is correct', 'The main conclusion about variance additivity is correctly formalized mathematically']"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Also, using the property of variance for a scaled random variable, we have $Var(\\bar{X}_n) = Var\\left(\\frac{1}{n} \\sum_{i=1}^n X_i\\right) = \\frac{1}{n^2} Var\\left(\\sum_{i=1}^n X_i\\right)$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. Bernoulli(p) random variables [tc_1].\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].\n\u2022 $E[X_i] = p$ [l1].\n\u2022 $Var(X_i) = p(1-p)$ [l2].\n\u2022 $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$ [l3].\n\u2022 $E[\\bar{X}_n] = p$ [ts_1].\n\u2022 $Var(\\sum_{i=1}^n X_i) = \\sum_{i=1}^n Var(X_i)$ [l4].\nTherefore, we conclude:\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} Var(\\sum_{i=1}^n X_i)$ [l5].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "ts_1", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  (n : \u2115) (hn : 0 < n)\n  (X : Fin n \u2192 \u211d)\n  (h_bernoulli : \u2200 i, X i = 0 \u2228 X i = 1) -- Bernoulli values\n  (h_indep : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j) -- independence\n  (h_iid : \u2200 i j, X i = X j) -- i.i.d.\n  (l1 : \u2200 i, X i = p) -- E[X_i] = p from l1\n  (l2 : \u2200 i, (X i - p)^2 = p * (1 - p)) -- Var(X_i) = p(1-p) from l2\n  (l4 : (Finset.univ.sum (fun i => (X i - p)^2)) = n * p * (1 - p)) -- Var(\\sum X_i) = n*p*(1-p) from l4\n  : \n  -- Var(\\bar{X}_n) = \\frac{1}{n^2} Var(\\sum_{i=1}^n X_i)\n  (Finset.univ.sum (fun i => (X i - p)^2)) / n^2 = \n  (n * p * (1 - p)) / n^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  (n : \u2115) (hn : 0 < n)\n  (X : Fin n \u2192 \u211d)\n  (h_bernoulli : \u2200 i, X i = 0 \u2228 X i = 1)\n  (h_indep : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j)\n  (h_iid : \u2200 i j, X i = X j)\n  (l1 : \u2200 i, X i = p)\n  (l2 : \u2200 i, (X i - p)^2 = p * (1 - p))\n  (l4 : (Finset.univ.sum (fun i => (X i - p)^2)) = n * p * (1 - p))\n  : \n  (Finset.univ.sum (fun i => (X i - p)^2)) / n^2 = \n  (n * p * (1 - p)) / n^2 := by\n  have h_contradiction : False := by\n    -- Since n > 0, we can pick an element i : Fin n\n    have h\u2081 : \u2203 (i : Fin n), True := by\n      refine' \u27e8\u27e80, by omega\u27e9, _\u27e9\n      trivial\n    -- Obtain an element i : Fin n\n    obtain \u27e8i, _\u27e9 := h\u2081\n    -- From h_bernoulli, X i = 0 \u2228 X i = 1\n    have h\u2082 : X i = 0 \u2228 X i = 1 := h_bernoulli i\n    -- From l1, X i = p\n    have h\u2083 : X i = p := l1 i\n    -- Therefore, p = 0 \u2228 p = 1\n    have h\u2084 : p = 0 \u2228 p = 1 := by\n      cases h\u2082 with\n      | inl h\u2082 =>\n        -- Case X i = 0\n        have h\u2085 : p = 0 := by linarith\n        exact Or.inl h\u2085\n      | inr h\u2082 =>\n        -- Case X i = 1\n        have h\u2085 : p = 1 := by linarith\n        exact Or.inr h\u2085\n    -- But 0 < p < 1, so this is a contradiction\n    cases h\u2084 with\n    | inl h\u2084 =>\n      -- Case p = 0\n      linarith\n    | inr h\u2084 =>\n      -- Case p = 1\n      linarith\n  \n  have h_main : (Finset.univ.sum (fun i => (X i - p)^2)) / n^2 = (n * p * (1 - p)) / n^2 := by\n    exfalso\n    exact h_contradiction\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization has several major issues: (1) It completely omits the definition of the sample mean X\u0304_n, which is central to the theorem. (2) It treats variance as deterministic expressions (X i - p)^2 rather than using proper expectation E[(X-\u03bc)\u00b2]. (3) The assumptions contain logical contradictions - Bernoulli random variables cannot simultaneously take values {0,1}, all be equal to each other, and all equal the parameter p. (4) The formalization lacks any probabilistic structure (probability spaces, expectation operators) needed for a proper treatment of random variables and variance. (5) The conclusion proves a trivial algebraic identity rather than the intended variance relationship for the sample mean."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization has several major issues: (1) It completely omits the definition of the sample mean X\u0304_n, which is central to the theorem. (2) It treats variance as deterministic expressions (X i - p)^2 rather than using proper expectation E[(X-\u03bc)\u00b2]. (3) The assumptions contain logical contradictions - Bernoulli random variables cannot simultaneously take values {0,1}, all be equal to each other, and all equal the parameter p. (4) The formalization lacks any probabilistic structure (probability spaces, expectation operators) needed for a proper treatment of random variables and variance. (5) The conclusion proves a trivial algebraic identity rather than the intended variance relationship for the sample mean.']"}, "solved_negation": null, "type": "lemma"}, "ts_2": {"id": "ts_2", "natural_language": "Combining these properties with the known variance of a Bernoulli variable gives the second solution, $Var(\\bar{X}_n) = \\frac{1}{n^2} \\sum_{i=1}^n p(1-p) = \\frac{1}{n^2} (np(1-p)) = \\frac{p(1-p)}{n}$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. Bernoulli(p) random variables [tc_1].\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].\n\u2022 $E[X_i] = p$ [l1].\n\u2022 The variance of any single variable $X_i$ is $Var(X_i) = p(1-p)$ [l2].\n\u2022 $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$ [l3].\n\u2022 $E[\\bar{X}_n] = p$ [ts_1].\n\u2022 $Var(\\sum_{i=1}^n X_i) = \\sum_{i=1}^n Var(X_i)$ [l4].\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} Var(\\sum_{i=1}^n X_i)$ [l5].\nTherefore, we conclude:\n\u2022 The variance of the sample mean is $Var(\\bar{X}_n) = \\frac{p(1-p)}{n}$ [ts_2].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "ts_1", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  (n : \u2115) (hn : 0 < n)\n  (X : Fin n \u2192 \u211d)\n  (h_bernoulli : \u2200 i, X i = 0 \u2228 X i = 1) -- Bernoulli values\n  (h_indep : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j) -- independence\n  (h_iid : \u2200 i j, X i = X j) -- i.i.d.\n  (l1 : \u2200 i, X i = p) -- E[X_i] = p from l1\n  (l2 : \u2200 i, (X i - p)^2 = p * (1 - p)) -- Var(X_i) = p(1-p) from l2\n  (l4 : (Finset.univ.sum (fun i => (X i - p)^2)) = n * p * (1 - p)) -- Var(\\sum X_i) = n*p*(1-p) from l4\n  (l5 : (Finset.univ.sum (fun i => (X i - p)^2)) / n^2 = (n * p * (1 - p)) / n^2) -- Var(\\bar{X}_n) = (1/n^2) * Var(\\sum X_i) from l5\n  : \n  -- The variance of the sample mean is p(1-p)/n\n  (Finset.univ.sum (fun i => (X i - p)^2)) / n^2 = p * (1 - p) / n := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1)\n  (n : \u2115) (hn : 0 < n)\n  (X : Fin n \u2192 \u211d)\n  (h_bernoulli : \u2200 i, X i = 0 \u2228 X i = 1)\n  (h_indep : \u2200 i j, i \u2260 j \u2192 X i \u2260 X j)\n  (h_iid : \u2200 i j, X i = X j)\n  (l1 : \u2200 i, X i = p)\n  (l2 : \u2200 i, (X i - p)^2 = p * (1 - p))\n  (l4 : (Finset.univ.sum (fun i => (X i - p)^2)) = n * p * (1 - p))\n  (l5 : (Finset.univ.sum (fun i => (X i - p)^2)) / n^2 = (n * p * (1 - p)) / n^2)\n  : \n  (Finset.univ.sum (fun i => (X i - p)^2)) / n^2 = p * (1 - p) / n := by\n  have h\u2081 : \u2203 (i : Fin n), True := by\n    have h\u2082 : n \u2260 0 := by linarith\n    have h\u2083 : Nonempty (Fin n) := by\n      apply Nonempty.intro\n      exact \u27e80, by\n        omega\n      \u27e9\n    obtain \u27e8i\u27e9 := h\u2083\n    exact \u27e8i, by trivial\u27e9\n  \n  have h\u2082 : p = 0 \u2228 p = 1 := by\n    obtain \u27e8i, _\u27e9 := h\u2081\n    have h\u2083 : X i = p := l1 i\n    have h\u2084 : X i = 0 \u2228 X i = 1 := h_bernoulli i\n    cases h\u2084 with\n    | inl h\u2084 =>\n      have h\u2085 : p = 0 := by linarith\n      exact Or.inl h\u2085\n    | inr h\u2084 =>\n      have h\u2085 : p = 1 := by linarith\n      exact Or.inr h\u2085\n  \n  have h\u2083 : False := by\n    cases h\u2082 with\n    | inl h\u2082 =>\n      have h\u2084 : p = 0 := h\u2082\n      have h\u2085 : 0 < p := hp_pos\n      linarith\n    | inr h\u2082 =>\n      have h\u2084 : p = 1 := h\u2082\n      have h\u2085 : p < 1 := hp_lt_one\n      linarith\n  \n  have h\u2084 : (Finset.univ.sum (fun i => (X i - p)^2)) / n^2 = p * (1 - p) / n := by\n    exfalso\n    exact h\u2083\n  \n  exact h\u2084", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The i.i.d. condition is fundamentally contradictory. h_iid states all X_i are equal, while h_indep states they're all different when indices differ. For Bernoulli variables, i.i.d. means same distribution but independent realizations, not identical values.", "The independence condition h_indep is incorrect for Bernoulli variables. Independence doesn't mean the values are always different - independent Bernoulli variables can have the same value by chance.", "The expected value representation is problematic. l1 states X_i = p deterministically, but Bernoulli random variables are not constant - they take values 0 or 1 with certain probabilities. This conflicts with h_bernoulli.", "The variance representation using (X i - p)^2 is a reasonable way to represent Var(X_i) in this deterministic setting, though it's not the standard probabilistic formulation.", "The sample mean variance formula structure is correct (sum of squared deviations divided by n^2), but it's based on the problematic deterministic interpretation of the random variables rather than proper probabilistic variance."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The i.i.d. condition is fundamentally contradictory. h_iid states all X_i are equal, while h_indep states they're all different when indices differ. For Bernoulli variables, i.i.d. means same distribution but independent realizations, not identical values.\", \"The independence condition h_indep is incorrect for Bernoulli variables. Independence doesn't mean the values are always different - independent Bernoulli variables can have the same value by chance.\", 'The expected value representation is problematic. l1 states X_i = p deterministically, but Bernoulli random variables are not constant - they take values 0 or 1 with certain probabilities. This conflicts with h_bernoulli.', \"The variance representation using (X i - p)^2 is a reasonable way to represent Var(X_i) in this deterministic setting, though it's not the standard probabilistic formulation.\", \"The sample mean variance formula structure is correct (sum of squared deviations divided by n^2), but it's based on the problematic deterministic interpretation of the random variables rather than proper probabilistic variance.\"]"}, "solved_negation": null, "type": "solution"}, "ts_3": {"id": "ts_3", "natural_language": "Finally, for the third solution, we take the limit of the variance as $n$ approaches infinity: $\\lim_{n \\to \\infty} Var(\\bar{X}_n) = \\lim_{n \\to \\infty} \\frac{p(1-p)}{n} = 0$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. Bernoulli(p) random variables [tc_1].\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].\n\u2022 $E[X_i] = p$ [l1].\n\u2022 $Var(X_i) = p(1-p)$ [l2].\n\u2022 $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$ [l3].\n\u2022 $E[\\bar{X}_n] = p$ [ts_1].\n\u2022 $Var(\\sum_{i=1}^n X_i) = \\sum_{i=1}^n Var(X_i)$ [l4].\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} Var(\\sum_{i=1}^n X_i)$ [l5].\n\u2022 The variance of the sample mean is $Var(\\bar{X}_n) = \\frac{p(1-p)}{n}$ [ts_2].\nTherefore, we conclude:\n\u2022 The limit of the variance of the sample mean as $n \\to \\infty$ is $\\lim_{n \\to \\infty} Var(\\bar{X}_n) = 0$ [ts_3].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "ts_1", "l4", "l5", "ts_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_3 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1) :\n  -- As n approaches infinity, the variance of the sample mean approaches 0\n  Filter.Tendsto (fun n : \u2115 => p * (1 - p) / (n : \u211d)) Filter.atTop (nhds 0) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_3 \n  (p : \u211d) (hp_pos : 0 < p) (hp_lt_one : p < 1) :\n  Filter.Tendsto (fun n : \u2115 => p * (1 - p) / (n : \u211d)) Filter.atTop (nhds 0) := by\n  have h_main : (fun n : \u2115 => p * (1 - p) / (n : \u211d)) = (fun n : \u2115 => (p * (1 - p)) * (1 / (n : \u211d))) := by\n    funext n\n    have h\u2081 : (p * (1 - p) : \u211d) / (n : \u211d) = (p * (1 - p) : \u211d) * (1 / (n : \u211d)) := by\n      by_cases h : (n : \u211d) = 0\n      \u00b7 have h\u2082 : n = 0 := by\n          norm_cast at h \u22a2\n          <;> simp_all\n        simp_all [h\u2082]\n        <;> ring_nf\n        <;> norm_num\n      \u00b7 field_simp [h]\n        <;> ring_nf\n        <;> field_simp [h]\n        <;> ring_nf\n    rw [h\u2081]\n    <;> simp [mul_assoc]\n  \n  have h_tendsto_zero : Filter.Tendsto (fun n : \u2115 => (1 : \u211d) / (n : \u211d)) Filter.atTop (nhds 0) := by\n    have h\u2081 : Filter.Tendsto (fun n : \u2115 => (n : \u211d)) Filter.atTop Filter.atTop := by\n      exact tendsto_natCast_atTop_atTop\n    have h\u2082 : Filter.Tendsto (fun x : \u211d => 1 / x) Filter.atTop (nhds 0) := by\n      simpa using tendsto_inv_atTop_zero\n    have h\u2083 : Filter.Tendsto (fun n : \u2115 => (1 : \u211d) / (n : \u211d)) Filter.atTop (nhds 0) := by\n      have h\u2084 : (fun n : \u2115 => (1 : \u211d) / (n : \u211d)) = (fun x : \u211d => 1 / x) \u2218 (fun n : \u2115 => (n : \u211d)) := by\n        funext n\n        <;> simp [div_eq_mul_inv]\n        <;> field_simp\n        <;> ring_nf\n      rw [h\u2084]\n      exact h\u2082.comp h\u2081\n    exact h\u2083\n  \n  have h_final : Filter.Tendsto (fun n : \u2115 => p * (1 - p) / (n : \u211d)) Filter.atTop (nhds 0) := by\n    rw [h_main]\n    have h\u2081 : Filter.Tendsto (fun n : \u2115 => (p * (1 - p) : \u211d) * (1 / (n : \u211d))) Filter.atTop (nhds ((p * (1 - p) : \u211d) * 0)) := by\n      -- Use the fact that multiplying by a constant preserves the limit\n      have h\u2082 : Filter.Tendsto (fun n : \u2115 => (1 : \u211d) / (n : \u211d)) Filter.atTop (nhds 0) := h_tendsto_zero\n      have h\u2083 : Filter.Tendsto (fun n : \u2115 => (p * (1 - p) : \u211d) * (1 / (n : \u211d))) Filter.atTop (nhds ((p * (1 - p) : \u211d) * 0)) :=\n        tendsto_const_nhds.mul h\u2082\n      exact h\u2083\n    -- Simplify the right-hand side to 0\n    have h\u2082 : (p * (1 - p) : \u211d) * 0 = 0 := by ring\n    have h\u2083 : Filter.Tendsto (fun n : \u2115 => (p * (1 - p) : \u211d) * (1 / (n : \u211d))) Filter.atTop (nhds 0) := by\n      convert h\u2081 using 1\n      <;> simp [h\u2082]\n    exact h\u2083\n  \n  apply h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization completely omits the probabilistic framework that forms the foundation of the natural language description. It missing the definition of Bernoulli random variables, sample mean, independence assumptions, and all the intermediate mathematical steps that lead to the conclusion.", "The core limit statement is correctly formalized. The expression p(1-p)/n \u2192 0 as n \u2192 \u221e accurately captures the mathematical meaning of the variance of the sample mean approaching zero.", "The parameter constraints 0 < p < 1 are appropriate additional conditions that ensure the Bernoulli parameter is valid, even though not explicitly mentioned in the natural language. These are mathematically necessary and consistent.", "Wrong dependencies in Lean4 tactics!"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization completely omits the probabilistic framework that forms the foundation of the natural language description. It missing the definition of Bernoulli random variables, sample mean, independence assumptions, and all the intermediate mathematical steps that lead to the conclusion.', 'The core limit statement is correctly formalized. The expression p(1-p)/n \u2192 0 as n \u2192 \u221e accurately captures the mathematical meaning of the variance of the sample mean approaching zero.', 'The parameter constraints 0 < p < 1 are appropriate additional conditions that ensure the Bernoulli parameter is valid, even though not explicitly mentioned in the natural language. These are mathematically necessary and consistent.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_3", "label": "ts_3", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    