
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z$ be a complex number. If $z^2 + 2\bar{z} + 1 = 0$ and $\operatorname{Im}(z) < 0$, then $z = 1 - 2i$.

Proof: Let $z = x+iy$ for real numbers $x, y$. Substituting this form into the equation $z^2 + 2\bar{z} + 1 = 0$ and equating the real and imaginary parts to zero gives the system of equations $x^2 - y^2 + 2x + 1 = 0$ and $2y(x-1) = 0$. From the condition $\operatorname{Im}(z) < 0$, we know $y 
eq 0$, so from the second equation we deduce $x=1$. Substituting $x=1$ into the first equation gives $1 - y^2 + 2 + 1 = 0$, which simplifies to $y^2=4$. Since $\operatorname{Im}(z) < 0$, we must have $y=-2$, which means $z=1-2i$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z$ be a complex number.", "statement": "Premise:\n\u2022 z is a complex number [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem condition tc_1 : \n  \u2200 z : \u2102, \u2203 (w : \u2102), w = z := by sorry", "lean_pass": false, "error_msg": [{"line": 7, "column": 18, "endLine": 7, "endColumn": 22, "data": "failed to infer binder type\nwhen the resulting type of a declaration is explicitly provided, all holes (e.g., `_`) in the header are resolved before the declaration body is processed"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "If $z^2 + 2\\bar{z} + 1 = 0$", "statement": "Premise:\n\u2022 z is a complex number [tc_1]\n\u2022 z^2 + 2*conjugate(z) + 1 = 0 [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102)\n(tc_2 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `variable (z : \u2102)` correctly captures that z is a complex number, where \u2102 represents the complex number type in Lean.", "The Lean formalization uses `starRingEnd \u2102 z` which is Mathlib's standard representation for complex conjugation, mathematically equivalent to `conjugate(z)` in the natural language. The equation structure is identical."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "and $\\operatorname{Im}(z) < 0$", "statement": "Premise:\n\u2022 z is a complex number [tc_1]\n\u2022 z^2 + 2*conjugate(z) + 1 = 0 [tc_2]\n\u2022 The imaginary part of z is negative, Im(z) < 0 [tc_3].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition\n  (z : \u2102)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0) :\n  z = 1 - 2 * Complex.I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Both express that z is a complex number", "starRingEnd \u2102 z is Lean's representation of complex conjugate, equivalent to conjugate(z)", "Both express that the imaginary part of z is negative", "The natural language explicitly states no conclusions are derived yet, but the Lean theorem introduces a specific conclusion z = 1 - 2 * Complex.I"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Both express that z is a complex number', \"starRingEnd \u2102 z is Lean's representation of complex conjugate, equivalent to conjugate(z)\", 'Both express that the imaginary part of z is negative', 'The natural language explicitly states no conclusions are derived yet, but the Lean theorem introduces a specific conclusion z = 1 - 2 * Complex.I']"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let $z = x+iy$ for real numbers $x, y$.", "statement": "We assume:\n\u2022 z is a complex number [tc_1]\n\u2022 z^2 + 2*conjugate(z) + 1 = 0 [tc_2]\n\u2022 The imaginary part of z is negative, Im(z) < 0 [tc_3].\nDefinition:\n\u2022 Let z = x + iy, where x and y are real numbers, x = Re(z), and y = Im(z) [def_1].", "dependencies": ["tc_1", "tc_2", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition\n  (z : \u2102)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0) :\n  z = 1 - 2 * Complex.I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean declaration `(z : \u2102)` perfectly captures that z is a complex number", "The Lean condition `z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0` correctly formalizes the equation z^2 + 2*conjugate(z) + 1 = 0, where `starRingEnd \u2102 z` is the standard way to represent complex conjugation in Lean", "The Lean condition `z.im < 0` perfectly matches the natural language condition that the imaginary part of z is negative", "The natural language states this is a definition/setup (Let z = x + iy...), but this component is completely missing from the Lean formalization. The Lean theorem doesn't include any explicit representation of z in terms of real and imaginary parts", "The natural language explicitly states there are no conclusions in this setup phase, but the Lean theorem provides a specific conclusion `z = 1 - 2 * Complex.I`. This introduces a mathematical result that contradicts the stated purpose of just setting up assumptions"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean declaration `(z : \u2102)` perfectly captures that z is a complex number', 'The Lean condition `z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0` correctly formalizes the equation z^2 + 2*conjugate(z) + 1 = 0, where `starRingEnd \u2102 z` is the standard way to represent complex conjugation in Lean', 'The Lean condition `z.im < 0` perfectly matches the natural language condition that the imaginary part of z is negative', \"The natural language states this is a definition/setup (Let z = x + iy...), but this component is completely missing from the Lean formalization. The Lean theorem doesn't include any explicit representation of z in terms of real and imaginary parts\", 'The natural language explicitly states there are no conclusions in this setup phase, but the Lean theorem provides a specific conclusion `z = 1 - 2 * Complex.I`. This introduces a mathematical result that contradicts the stated purpose of just setting up assumptions']"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Substituting this form into the equation $z^2 + 2\\bar{z} + 1 = 0$ and equating the real and imaginary parts to zero gives the system of equations $x^2 - y^2 + 2x + 1 = 0$ and $2y(x-1) = 0$.", "statement": "We assume:\n\u2022 z is a complex number [tc_1]\n\u2022 z^2 + 2*conjugate(z) + 1 = 0 [tc_2]\n\u2022 The imaginary part of z is negative, Im(z) < 0 [tc_3]\n\u2022 Let z = x + iy, where x and y are real numbers, x = Re(z), and y = Im(z) [def_1].\nTherefore, we conclude:\n\u2022 The real part of the equation is x^2 - y^2 + 2*x + 1 = 0 and the imaginary part is 2*y*(x-1) = 0 [l1].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (z : \u2102)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0)\n  (h3 : z = z.re + z.im * Complex.I) :\n  (z.re^2 - z.im^2 + 2*z.re + 1 = 0) \u2227 (2*z.im*(z.re - 1) = 0) := by\n  sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (z : \u2102)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0)\n  (h3 : z = z.re + z.im * Complex.I) :\n  (z.re^2 - z.im^2 + 2*z.re + 1 = 0) \u2227 (2*z.im*(z.re - 1) = 0) := by\n  have h4 : z.re^2 - z.im^2 + 2*z.re + 1 = 0 := by\n    have h4\u2081 := h1\n    simp [Complex.ext_iff, pow_two, Complex.I_mul_I, Complex.ext_iff, pow_two, Complex.I_mul_I,\n      Complex.ext_iff, pow_two, Complex.I_mul_I, Complex.ext_iff, pow_two, Complex.I_mul_I] at h4\u2081 \u22a2\n    ring_nf at h4\u2081 \u22a2\n    norm_num at h4\u2081 \u22a2\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try nlinarith)\n    <;>\n    (try\n      {\n        nlinarith [sq_nonneg (z.re + 1), sq_nonneg (z.im)]\n      })\n    <;>\n    (try\n      {\n        nlinarith [sq_nonneg (z.re - 1), sq_nonneg (z.im)]\n      })\n  \n  have h5 : 2*z.im*(z.re - 1) = 0 := by\n    have h5\u2081 := h1\n    simp [Complex.ext_iff, pow_two, Complex.I_mul_I, Complex.ext_iff, pow_two, Complex.I_mul_I,\n      Complex.ext_iff, pow_two, Complex.I_mul_I, Complex.ext_iff, pow_two, Complex.I_mul_I] at h5\u2081 \u22a2\n    ring_nf at h5\u2081 \u22a2\n    norm_num at h5\u2081 \u22a2\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try nlinarith)\n    <;>\n    (try\n      {\n        nlinarith [sq_nonneg (z.re + 1), sq_nonneg (z.im)]\n      })\n    <;>\n    (try\n      {\n        nlinarith [sq_nonneg (z.re - 1), sq_nonneg (z.im)]\n      })\n  \n  exact \u27e8h4, h5\u27e9", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 31, "column": 37, "endLine": 50, "endColumn": 8, "data": "unsolved goals\nz : \u2102\nh1 : z ^ 2 + 2 * (starRingEnd \u2102) z + 1 = 0\nh2 : z.im < 0\nh3 : z = \u2191z.re + \u2191z.im * Complex.I\nh4 : z.re ^ 2 - z.im ^ 2 + 2 * z.re + 1 = 0\nh5\u2081 : 1 + z.re * 2 + (z.re ^ 2 - z.im ^ 2) = 0 \u2227 z.re * z.im * 2 - z.im * 2 = 0\n\u22a2 z.im = 0 \u2228 -1 + z.re = 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declaration correctly captures z as a complex number", "Main equation properly uses starRingEnd for complex conjugation, matching the mathematical meaning", "Imaginary part constraint is correctly formalized", "Complex number representation correctly uses Lean's built-in real and imaginary part accessors instead of separate variables, which is mathematically equivalent", "Real part of the equation is correctly decomposed and formalized", "Imaginary part of the equation is correctly formalized with proper variable correspondence", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (z : \u2102)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0)\n  (h3 : z = z.re + z.im * Complex.I) :\n  (z.re^2 - z.im^2 + 2*z.re + 1 = 0) \u2227 (2*z.im*(z.re - 1) = 0) := by\n  have h4 : z.re ^ 2 - z.im ^ 2 + 2 * z.re + 1 = 0 := by\n    have h4\u2081 := h1\n    simp [Complex.ext_iff, pow_two, Complex.ext_iff, Complex.I_mul_I, Complex.star_def,\n      Complex.ext_iff, pow_two, Complex.add_re, Complex.add_im, Complex.mul_re, Complex.mul_im] at h4\u2081 \u22a2\n    -- Simplify the real part of the equation\n    <;> ring_nf at h4\u2081 \u22a2 <;>\n    (try norm_num at h4\u2081 \u22a2) <;>\n    (try nlinarith) <;>\n    (try linarith) <;>\n    (try nlinarith [sq_nonneg (z.re + 1), sq_nonneg (z.im), sq_nonneg (z.re - 1)])\n    <;>\n    (try linarith)\n  \n  have h5 : 2 * z.im * (z.re - 1) = 0 := by\n    have h5\u2081 := h1\n    simp [Complex.ext_iff, pow_two, Complex.ext_iff, Complex.I_mul_I, Complex.star_def,\n      Complex.ext_iff, pow_two, Complex.add_re, Complex.add_im, Complex.mul_re, Complex.mul_im] at h5\u2081 \u22a2\n    -- Simplify the imaginary part of the equation\n    <;> ring_nf at h5\u2081 \u22a2 <;>\n    (try norm_num at h5\u2081 \u22a2) <;>\n    (try nlinarith) <;>\n    (try linarith) <;>\n    (try nlinarith [sq_nonneg (z.re + 1), sq_nonneg (z.im), sq_nonneg (z.re - 1)])\n    <;>\n    (try linarith)\n  \n  have h6 : (z.re ^ 2 - z.im ^ 2 + 2 * z.re + 1 = 0) \u2227 (2 * z.im * (z.re - 1) = 0) := by\n    refine' \u27e8_, _\u27e9\n    \u00b7 -- Prove the first part of the conjunction\n      exact h4\n    \u00b7 -- Prove the second part of the conjunction\n      exact h5\n  \n  exact h6"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "From the condition $\\operatorname{Im}(z) < 0$, we know $y \\neq 0$", "statement": "We assume:\n\u2022 z is a complex number [tc_1]\n\u2022 z^2 + 2*conjugate(z) + 1 = 0 [tc_2]\n\u2022 The imaginary part of z is negative, Im(z) < 0 [tc_3]\n\u2022 Let z = x + iy, where x and y are real numbers, x = Re(z), and y = Im(z) [def_1]\n\u2022 The real part of the equation is x^2 - y^2 + 2*x + 1 = 0 and the imaginary part is 2*y*(x-1) = 0 [l1].\nTherefore, we conclude:\n\u2022 y \u2260 0 [l2].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (z : \u2102)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0) :\n  z.im \u2260 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (z : \u2102)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0) :\n  z.im \u2260 0 := by\n  intro h\n  have h3 : z.im = 0 := h\n  have h4 : z.im < 0 := h2\n  linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declaration correctly captures z as a complex number", "The main equation is correctly formalized using starRingEnd for complex conjugation, which is semantically equivalent to conjugate(z)", "The constraint on the imaginary part being negative is accurately captured", "The conclusion that the imaginary part is non-zero is correctly stated, and the intermediate algebraic steps mentioned in natural language are appropriately omitted from the theorem statement as they belong in the proof"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "so from the second equation we deduce $x=1$.", "statement": "We assume:\n\u2022 z is a complex number [tc_1]\n\u2022 z^2 + 2*conjugate(z) + 1 = 0 [tc_2]\n\u2022 The imaginary part of z is negative, Im(z) < 0 [tc_3]\n\u2022 Let z = x + iy, where x and y are real numbers, x = Re(z), and y = Im(z) [def_1]\n\u2022 The imaginary part of the equation is 2*y*(x-1) = 0 [l1]\n\u2022 y \u2260 0 [l2].\nTherefore, we conclude:\n\u2022 x = 1 [l3].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition\n  (z : \u2102)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0) :\n  z = 1 - 2 * Complex.I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition\n  (z : \u2102)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0) :\n  z = 1 - 2 * Complex.I := by\n  have h3 : z.re = 1 := by\n    simp [Complex.ext_iff, pow_two, Complex.ext_iff, Complex.conj_re, Complex.conj_im, starRingEnd_apply] at h1\n    ring_nf at h1\n    norm_num at h1\n    nlinarith [sq_nonneg (z.re - 1), sq_nonneg (z.im + 1), sq_nonneg (z.re + 1), sq_nonneg (z.im - 1)]\n  \n  have h4 : z.im = -2 := by\n    simp [Complex.ext_iff, pow_two, Complex.ext_iff, Complex.conj_re, Complex.conj_im, starRingEnd_apply] at h1\n    ring_nf at h1\n    norm_num at h1\n    nlinarith [sq_nonneg (z.re - 1), sq_nonneg (z.im + 1), sq_nonneg (z.re + 1), sq_nonneg (z.im - 1)]\n  \n  have h5 : z = 1 - 2 * Complex.I := by\n    have h6 : z.re = 1 := h3\n    have h7 : z.im = -2 := h4\n    have h8 : z = 1 - 2 * Complex.I := by\n      apply Complex.ext <;> simp [Complex.ext_iff, h6, h7, Complex.I_re, Complex.I_im] <;>\n        norm_num\n    exact h8\n  \n  exact h5", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 4, "endLine": 10, "endColumn": 111, "data": "tactic 'simp' failed, nested error:\nmaximum recursion depth has been reached\nuse `set_option maxRecDepth <num>` to increase limit\nuse `set_option diagnostics true` to get diagnostic information"}, {"line": 16, "column": 4, "endLine": 16, "endColumn": 111, "data": "tactic 'simp' failed, nested error:\nmaximum recursion depth has been reached\nuse `set_option maxRecDepth <num>` to increase limit\nuse `set_option diagnostics true` to get diagnostic information"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The complex number declaration z : \u2102 correctly captures that z is a complex number", "The equation z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0 correctly represents z^2 + 2*conjugate(z) + 1 = 0, where starRingEnd \u2102 z is the standard way to represent complex conjugate in Lean", "The condition z.im < 0 correctly captures that the imaginary part of z is negative", "The conclusion z = 1 - 2 * Complex.I is mathematically correct and represents the final result, but the Lean formalization omits the intermediate logical steps (decomposition z = x + iy, derivation of 2*y*(x-1) = 0, y \u2260 0, and x = 1) that are explicitly mentioned in the natural language reasoning", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "NL statement", "error_report": "Formalization appears correct (score=0.75 > 0.6), and the prover could prove the NEGATION of the NL lemma. The NL statement is likely incorrect."}, "solved_negation": {"lean_verify": true, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem z_condition\n  (z : \u2102)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0) :\n  z = 1 - 2 * Complex.I := by\n  have h3 : z.re = 1 := by\n    have h3\u2081 := h1\n    simp [Complex.ext_iff, pow_two, Complex.ext_iff, Complex.star_def, Complex.ext_iff,\n      Complex.add_re, Complex.add_im, Complex.mul_re, Complex.mul_im] at h3\u2081\n    -- Simplify the equation to separate real and imaginary parts\n    ring_nf at h3\u2081\n    norm_num at h3\u2081\n    -- Solve for the real part using the fact that the imaginary part is zero\n    have h3\u2082 : z.im \u2260 0 := by linarith\n    have h3\u2083 : z.re = 1 := by\n      apply mul_left_cancel\u2080 (sub_ne_zero.mpr h3\u2082)\n      nlinarith [sq_pos_of_neg h2]\n    exact h3\u2083\n  \n  have h4 : z.im = -2 := by\n    have h4\u2081 := h1\n    simp [Complex.ext_iff, pow_two, Complex.ext_iff, Complex.star_def, Complex.ext_iff,\n      Complex.add_re, Complex.add_im, Complex.mul_re, Complex.mul_im] at h4\u2081\n    -- Simplify the equation to separate real and imaginary parts\n    ring_nf at h4\u2081\n    norm_num at h4\u2081\n    -- Solve for the imaginary part using the fact that the real part is 1\n    have h4\u2082 : z.re = 1 := h3\n    have h4\u2083 : z.im < 0 := h2\n    have h4\u2084 : z.im = -2 := by\n      have h4\u2085 : z.im ^ 2 = 4 := by\n        nlinarith [sq_nonneg (z.im + 2)]\n      have h4\u2086 : z.im = -2 := by\n        have h4\u2087 : z.im < 0 := h2\n        have h4\u2088 : z.im = -2 \u2228 z.im = 2 := by\n          apply or_iff_not_imp_left.mpr\n          intro h4\u2089\n          apply eq_of_sub_eq_zero\n          apply mul_left_cancel\u2080 (sub_ne_zero.mpr h4\u2089)\n          nlinarith\n        cases h4\u2088 with\n        | inl h4\u2088 => exact h4\u2088\n        | inr h4\u2088 =>\n          exfalso\n          linarith\n      exact h4\u2086\n    exact h4\u2084\n  \n  have h5 : z = 1 - 2 * Complex.I := by\n    have h5\u2081 : z.re = 1 := h3\n    have h5\u2082 : z.im = -2 := h4\n    have h5\u2083 : z = 1 - 2 * Complex.I := by\n      apply Complex.ext <;> simp [h5\u2081, h5\u2082, Complex.ext_iff, pow_two]\n      <;> norm_num <;>\n      (try ring_nf at * <;> norm_num at * <;> linarith) <;>\n      (try simp_all [Complex.ext_iff, pow_two]) <;>\n      (try norm_num) <;>\n      (try linarith)\n    exact h5\u2083\n  \n  apply h5"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Substituting $x=1$ into the first equation gives $1 - y^2 + 2 + 1 = 0$", "statement": "We assume:\n\u2022 z is a complex number [tc_1]\n\u2022 z^2 + 2*conjugate(z) + 1 = 0 [tc_2]\n\u2022 The imaginary part of z is negative, Im(z) < 0 [tc_3]\n\u2022 Let z = x + iy, where x and y are real numbers, x = Re(z), and y = Im(z) [def_1]\n\u2022 The real part of the equation is x^2 - y^2 + 2*x + 1 = 0 [l1]\n\u2022 y \u2260 0 [l2]\n\u2022 x = 1 [l3].\nTherefore, we conclude:\n\u2022 1 - y^2 + 2 + 1 = 0 [l4].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (z : \u2102)\n  (x y : \u211d)\n  (h_eq : z = x + y * Complex.I)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0)\n  (h3 : x^2 - y^2 + 2*x + 1 = 0)\n  (h4 : y \u2260 0)\n  (h5 : x = 1) :\n  1 - y^2 + 2 + 1 = 0 := by\n  sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (z : \u2102)\n  (x y : \u211d)\n  (h_eq : z = x + y * Complex.I)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0)\n  (h3 : x^2 - y^2 + 2*x + 1 = 0)\n  (h4 : y \u2260 0)\n  (h5 : x = 1) :\n  1 - y^2 + 2 + 1 = 0 := by\n  have h6 : x = 1 := h5\n  have h7 : x^2 - y^2 + 2*x + 1 = 0 := h3\n  rw [h6] at h7\n  ring_nf at h7 \u22a2\n  linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Complex number type declaration correctly captures that z is complex", "starRingEnd \u2102 z correctly represents complex conjugate operation", "Imaginary part condition z.im < 0 perfectly matches Im(z) < 0", "Complex number representation with Complex.I correctly captures z = x + iy", "Real part equation is exactly the same in both versions", "Non-zero condition for y is identical", "Assignment x = 1 is identical", "Conclusion equation matches exactly, with the same arithmetic expression"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "which simplifies to $y^2=4$.", "statement": "We assume:\n\u2022 z is a complex number [tc_1]\n\u2022 z^2 + 2*conjugate(z) + 1 = 0 [tc_2]\n\u2022 The imaginary part of z is negative, Im(z) < 0 [tc_3]\n\u2022 Let z = x + iy, where x and y are real numbers, x = Re(z), and y = Im(z) [def_1]\n\u2022 The real part of the equation is x^2 - y^2 + 2*x + 1 = 0 and the imaginary part is 2*y*(x-1) = 0 [l1]\n\u2022 y \u2260 0 [l2]\n\u2022 x = 1 [l3]\n\u2022 1 - y^2 + 2 + 1 = 0 [l4].\nTherefore, we conclude:\n\u2022 y^2 = 4 [l5].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (z : \u2102)\n  (x y : \u211d)\n  (h_eq : z = x + y * Complex.I)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0)\n  (h3 : x^2 - y^2 + 2*x + 1 = 0)\n  (h4 : y \u2260 0)\n  (h5 : x = 1) :\n  y^2 = 4 := by\n  sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (z : \u2102)\n  (x y : \u211d)\n  (h_eq : z = x + y * Complex.I)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0)\n  (h3 : x^2 - y^2 + 2*x + 1 = 0)\n  (h4 : y \u2260 0)\n  (h5 : x = 1) :\n  y^2 = 4 := by\n  have h6 : x^2 - y^2 + 2*x + 1 = 0 := h3\n  have h7 : x = 1 := h5\n  rw [h7] at h6\n  have h8 : (1 : \u211d)^2 - y^2 + 2*(1 : \u211d) + 1 = 0 := by simpa using h6\n  have h9 : (1 : \u211d)^2 - y^2 + 2*(1 : \u211d) + 1 = 0 := by simpa using h8\n  have h10 : y^2 = 4 := by\n    ring_nf at h9 \u22a2\n    nlinarith [sq_pos_of_ne_zero (sub_ne_zero_of_ne h4)]\n  exact h10", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0, "semantic_feedback": ["Complex number type declaration matches perfectly", "Main equation with conjugate matches perfectly (starRingEnd is Lean's conjugate)", "Imaginary part condition matches perfectly", "Variable definition z = x + iy matches perfectly", "Real part equation matches perfectly", "Missing the imaginary part equation 2*y*(x-1) = 0 from the natural language statement l1", "Condition y \u2260 0 matches perfectly", "Condition x = 1 matches perfectly", "Intermediate calculation step l4 (1 - y^2 + 2 + 1 = 0) is not included as hypothesis, but this is derivable from existing hypotheses", "Conclusion y^2 = 4 matches perfectly", "Wrong dependencies in Lean4 tactics!"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Complex number type declaration matches perfectly', \"Main equation with conjugate matches perfectly (starRingEnd is Lean's conjugate)\", 'Imaginary part condition matches perfectly', 'Variable definition z = x + iy matches perfectly', 'Real part equation matches perfectly', 'Missing the imaginary part equation 2*y*(x-1) = 0 from the natural language statement l1', 'Condition y \u2260 0 matches perfectly', 'Condition x = 1 matches perfectly', 'Intermediate calculation step l4 (1 - y^2 + 2 + 1 = 0) is not included as hypothesis, but this is derivable from existing hypotheses', 'Conclusion y^2 = 4 matches perfectly']"}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "Since $\\operatorname{Im}(z) < 0$, we must have $y=-2$", "statement": "We assume:\n\u2022 The imaginary part of z is negative, Im(z) < 0 [tc_3]\n\u2022 Let z = x + iy, where x and y are real numbers, x = Re(z), and y = Im(z) [def_1]\n\u2022 y^2 = 4 [l5].\nTherefore, we conclude:\n\u2022 y = -2 [l6].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (z : \u2102)\n  (x y : \u211d)\n  (h_eq : z = x + y * Complex.I)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0)\n  (h3 : y^2 = 4) :\n  y = -2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (z : \u2102)\n  (x y : \u211d)\n  (h_eq : z = x + y * Complex.I)\n  (h1 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (h2 : z.im < 0)\n  (h3 : y^2 = 4) :\n  y = -2 := by\n  have h4 : y = -2 := by\n    have h5 : y < 0 := by\n      have h6 : z.im < 0 := h2\n      have h7 : z.im = y := by\n        rw [h_eq]\n        simp [Complex.ext_iff, pow_two]\n        <;> ring_nf\n        <;> simp [Complex.ext_iff, pow_two]\n        <;> norm_num\n        <;> linarith\n      linarith\n    -- We know that y^2 = 4 and y < 0, so y must be -2.\n    have h8 : y = -2 := by\n      have h9 : y^2 = 4 := h3\n      have h10 : y < 0 := h5\n      have h11 : y = -2 := by\n        -- Solve the equation y^2 = 4 with y < 0\n        have h12 : y = -2 \u2228 y = 2 := by\n          apply or_iff_not_imp_left.mpr\n          intro h13\n          apply eq_of_sub_eq_zero\n          apply mul_left_cancel\u2080 (sub_ne_zero.mpr h13)\n          nlinarith\n        cases h12 with\n        | inl h12 => exact h12\n        | inr h12 =>\n          exfalso\n          linarith\n      exact h11\n    exact h8\n  exact h4", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The complex number representation z = x + iy with real x,y is correctly formalized, with the implicit Re(z) = x and Im(z) = y relationship properly captured.", "The condition Im(z) < 0 is directly and accurately translated to z.im < 0.", "The equation y\u00b2 = 4 is exactly preserved in the Lean formalization.", "The conclusion y = -2 matches perfectly between natural language and Lean.", "The Lean formalization includes an additional constraint h1 not mentioned in natural language, but this is acceptable as extra context that doesn't contradict the stated reasoning."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "which means $z=1-2i$.", "statement": "We assume:\n\u2022 z is a complex number [tc_1]\n\u2022 z^2 + 2*conjugate(z) + 1 = 0 [tc_2]\n\u2022 The imaginary part of z is negative, Im(z) < 0 [tc_3]\n\u2022 Let z = x + iy, where x and y are real numbers, x = Re(z), and y = Im(z) [def_1]\n\u2022 x = 1 [l3]\n\u2022 y = -2 [l6].\nTherefore, we conclude:\n\u2022 z = 1 - 2i [ts_1].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (z : \u2102)\n  (tc_2 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (tc_3 : z.im < 0)\n  (def_1 : \u2203 x y : \u211d, z = x + y * Complex.I)\n  (l3 : \u2203 x y : \u211d, z = x + y * Complex.I \u2227 x = 1)\n  (l6 : \u2203 x y : \u211d, z = x + y * Complex.I \u2227 y = -2) :\n  z = 1 - 2 * Complex.I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (z : \u2102)\n  (tc_2 : z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0)\n  (tc_3 : z.im < 0)\n  (def_1 : \u2203 x y : \u211d, z = x + y * Complex.I)\n  (l3 : \u2203 x y : \u211d, z = x + y * Complex.I \u2227 x = 1)\n  (l6 : \u2203 x y : \u211d, z = x + y * Complex.I \u2227 y = -2) :\n  z = 1 - 2 * Complex.I := by\n  have h\u2081 : \u2203 (x y : \u211d), z = x + y * Complex.I \u2227 x = 1 \u2227 y = -2 := by\n    obtain \u27e8x\u2081, y\u2081, hz\u2081, hx\u2081\u27e9 := l3\n    obtain \u27e8x\u2082, y\u2082, hz\u2082, hy\u2082\u27e9 := l6\n    refine' \u27e8x\u2081, y\u2082, _, _, _\u27e9 <;>\n    (try simp_all [Complex.ext_iff, pow_two]) <;>\n    (try norm_num at *) <;>\n    (try ring_nf at *) <;>\n    (try simp_all [Complex.ext_iff, pow_two]) <;>\n    (try norm_num) <;>\n    (try nlinarith) <;>\n    (try {\n      have h\u2083 := tc_2\n      simp [Complex.ext_iff, pow_two, Complex.ext_iff, starRingEnd_apply, Complex.ext_iff, pow_two] at h\u2083\n      norm_num at h\u2083 \u22a2\n      <;> ring_nf at h\u2083 \u22a2 <;> norm_num at h\u2083 \u22a2 <;>\n      (try constructor <;> nlinarith) <;>\n      (try simp_all [Complex.ext_iff, pow_two]) <;>\n      (try norm_num at *) <;>\n      (try ring_nf at *) <;>\n      (try simp_all [Complex.ext_iff, pow_two]) <;>\n      (try norm_num) <;>\n      (try nlinarith)\n    }) <;>\n    (try {\n      simp_all [Complex.ext_iff, pow_two]\n      <;> norm_num at *\n      <;> ring_nf at *\n      <;> simp_all [Complex.ext_iff, pow_two]\n      <;> norm_num\n      <;> nlinarith\n    })\n    <;>\n    (try {\n      simp_all [Complex.ext_iff, pow_two]\n      <;> norm_num at *\n      <;> ring_nf at *\n      <;> simp_all [Complex.ext_iff, pow_two]\n      <;> norm_num\n      <;> nlinarith\n    })\n    <;>\n    (try {\n      simp_all [Complex.ext_iff, pow_two]\n      <;> norm_num at *\n      <;> ring_nf at *\n      <;> simp_all [Complex.ext_iff, pow_two]\n      <;> norm_num\n      <;> nlinarith\n    })\n  \n  obtain \u27e8x, y, hxy, hx, hy\u27e9 := h\u2081\n  have h\u2082 : z = 1 - 2 * Complex.I := by\n    have h\u2083 : z = x + y * Complex.I := by simpa using hxy\n    rw [h\u2083]\n    simp [hx, hy]\n    <;>\n    simp_all [Complex.ext_iff, pow_two]\n    <;>\n    norm_num\n    <;>\n    ring_nf at *\n    <;>\n    simp_all [Complex.ext_iff, pow_two]\n    <;>\n    norm_num at *\n    <;>\n    linarith\n  \n  exact h\u2082", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0.71, "semantic_feedback": ["The type declaration (z : \u2102) correctly captures that z is a complex number.", "The equation z^2 + 2 * (starRingEnd \u2102 z) + 1 = 0 correctly represents z^2 + 2*conjugate(z) + 1 = 0, where starRingEnd \u2102 z is Lean's notation for complex conjugation.", "The condition z.im < 0 correctly captures that the imaginary part of z is negative.", "The existential statement \u2203 x y : \u211d, z = x + y * Complex.I correctly represents that z can be written as x + iy where x and y are real numbers.", "The condition combines the representation z = x + y * Complex.I with x = 1, but uses existential quantification rather than directly referencing the x from def_1. This creates a slight structural difference in how the variables are scoped.", "Similar to l3, this condition combines the representation with y = -2 using existential quantification, creating a slight structural difference in variable scoping compared to the natural language which refers to the y already defined in def_1.", "The conclusion z = 1 - 2 * Complex.I correctly represents z = 1 - 2i, where Complex.I is Lean's notation for the imaginary unit."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    