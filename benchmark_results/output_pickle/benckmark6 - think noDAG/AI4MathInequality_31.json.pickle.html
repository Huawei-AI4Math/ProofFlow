
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for all real numbers $x$ and $y$, the following inequality holds: $3(x+y+1)^{2}+1 \geq 3 x y$.

Proof: We want to prove that $3(x+y+1)^{2}+1 \geq 3xy$ for all real numbers $x,y$. Observe first that for any real numbers $a,b$, the identity $(a+	frac{b}{2})^2+	frac{3b^2}{4}=a^2+ab+b^2$ shows that $a^2+ab+b^2\geq 0$, since both terms on the left are non-negative. Now set $a=x+	frac{2}{3}$ and $b=y+	frac{2}{3}$. Substituting into this inequality gives $(x+	frac{2}{3})^2+(x+	frac{2}{3})(y+	frac{2}{3})+(y+	frac{2}{3})^2\geq 0$. Expanding and simplifying yields $x^2+y^2+xy+2x+2y+	frac{4}{3}\geq 0$, and multiplying through by 3 gives $3x^2+3y^2+3xy+6x+6y+4\geq 0$. On the other hand, expanding the left-hand side of the target inequality gives $3(x+y+1)^2+1=3x^2+3y^2+6xy+6x+6y+4$. Subtracting $3xy$ from this expression gives exactly $3x^2+3y^2+3xy+6x+6y+4$, which we have already shown is non-negative. Therefore, $3(x+y+1)^2+1\geq 3xy$ holds for all real $x,y$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for all real numbers x and y", "statement": "Premise:\n\u2022 x and y are real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (x y : \u211d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'variable (x y : \u211d)' perfectly captures the condition that x and y are real numbers. The type \u211d in Lean represents real numbers, which directly corresponds to the natural language statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "Observe first that for any real numbers a,b, the identity $(a+\\frac{b}{2})^2+\\frac{3b^2}{4}=a^2+ab+b^2$ shows that $a^2+ab+b^2\\geq 0$, since both terms on the left are non-negative.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1].\nTherefore, we conclude:\n\u2022 For any real numbers a, b, $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (a b : \u211d) : (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (a b : \u211d) : (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2 := by\n  have h_main : (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2 := by\n    -- Expand the square term (a + b/2)^2\n    have h1 : (a + b/2)^2 = a^2 + a*b + b^2/4 := by\n      ring_nf\n      <;>\n      nlinarith [sq_nonneg (a + b / 2)]\n    -- Substitute the expanded form back into the original expression\n    rw [h1]\n    -- Simplify the expression by combining like terms\n    ring_nf\n    <;>\n    nlinarith [sq_nonneg (a + b / 2)]\n  \n  -- Use the main result to conclude the proof\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The Lean formalization correctly captures the mathematical equation and the universal quantification over real numbers a and b. However, there's a minor inconsistency in variable naming: the natural language mentions assuming x and y are real numbers but then uses a and b in the actual theorem statement, while the Lean formalization only declares the variables that are actually used (a and b). This is a reasonable simplification that removes unused assumptions, but creates a slight structural difference from the natural language presentation."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The Lean formalization correctly captures the mathematical equation and the universal quantification over real numbers a and b. However, there's a minor inconsistency in variable naming: the natural language mentions assuming x and y are real numbers but then uses a and b in the actual theorem statement, while the Lean formalization only declares the variables that are actually used (a and b). This is a reasonable simplification that removes unused assumptions, but creates a slight structural difference from the natural language presentation.\"]"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Observe first that for any real numbers a,b, the identity $(a+\\frac{b}{2})^2+\\frac{3b^2}{4}=a^2+ab+b^2$ shows that $a^2+ab+b^2\\geq 0$, since both terms on the left are non-negative.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a, b, $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ [l1].\nTherefore, we conclude:\n\u2022 For any real numbers a, b, $a^2 + a*b + b^2 \\geq 0$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (a b : \u211d) \n  (l1 : (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2) :\n  a^2 + a*b + b^2 \u2265 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (a b : \u211d) \n  (l1 : (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2) :\n  a^2 + a*b + b^2 \u2265 0 := by\n  have h2 : (a + b/2)^2 \u2265 0 := by\n    nlinarith [sq_nonneg (a + b / 2)]\n    <;> nlinarith\n  \n  have h3 : (3*b^2)/4 \u2265 0 := by\n    have h3\u2081 : (b : \u211d) ^ 2 \u2265 0 := by nlinarith\n    have h3\u2082 : (3 : \u211d) / 4 \u2265 0 := by norm_num\n    have h3\u2083 : (3 : \u211d) / 4 * (b : \u211d) ^ 2 \u2265 0 := by\n      nlinarith\n    have h3\u2084 : (3 * b ^ 2 : \u211d) / 4 \u2265 0 := by\n      ring_nf at h3\u2083 \u22a2\n      <;> nlinarith\n    exact h3\u2084\n  \n  have h4 : (a + b/2)^2 + (3*b^2)/4 \u2265 0 := by\n    have h4\u2081 : (a + b / 2) ^ 2 \u2265 0 := h2\n    have h4\u2082 : (3 * b ^ 2) / 4 \u2265 0 := h3\n    -- Since both terms are non-negative, their sum is also non-negative.\n    linarith\n  \n  have h5 : a^2 + a*b + b^2 \u2265 0 := by\n    have h5\u2081 : (a + b / 2) ^ 2 + (3 * b ^ 2) / 4 \u2265 0 := h4\n    have h5\u2082 : (a + b / 2) ^ 2 + (3 * b ^ 2) / 4 = a ^ 2 + a * b + b ^ 2 := by\n      linarith\n    linarith\n  \n  exact h5", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.75, "semantic_feedback": ["Natural language initially declares variables x and y as real numbers, but Lean uses variables a and b. However, the mathematical content uses a and b consistently, so this is a minor naming inconsistency.", "The equality assumption is perfectly captured in Lean with the exact same mathematical expression and logical role as a hypothesis.", "The conclusion about the non-negativity of the quadratic expression is perfectly represented in Lean.", "The overall logical structure (assumption implies conclusion) is correctly modeled in Lean as a theorem with hypothesis and goal."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_1": {"id": "def_1", "natural_language": "Now set $a=x+\\frac{2}{3}$ and $b=y+\\frac{2}{3}$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a, b, $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ [l1];\n\u2022 For any real numbers a, b, $a^2 + a*b + b^2 \\geq 0$ [l2].\nDefinition:\n\u2022 Let a = x + 2/3 and b = y + 2/3 [def_1].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem def_1 : \u2200 (x y : \u211d), 3 * (x + y + 1)^2 + 1 \u2265 3 * x * y := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean theorem correctly declares x and y as real numbers using \u2200 (x y : \u211d)", "The algebraic identity $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ is completely missing from the Lean theorem statement", "The inequality condition $a^2 + a*b + b^2 \u2265 0$ is completely missing from the Lean theorem statement", "The natural language conclusion is a definition stating a = x + 2/3 and b = y + 2/3, but the Lean theorem concludes with a completely different inequality 3 * (x + y + 1)^2 + 1 \u2265 3 * x * y"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean theorem correctly declares x and y as real numbers using \u2200 (x y : \u211d)', 'The algebraic identity $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ is completely missing from the Lean theorem statement', 'The inequality condition $a^2 + a*b + b^2 \u2265 0$ is completely missing from the Lean theorem statement', 'The natural language conclusion is a definition stating a = x + 2/3 and b = y + 2/3, but the Lean theorem concludes with a completely different inequality 3 * (x + y + 1)^2 + 1 \u2265 3 * x * y']"}, "type": "definition"}, "l3": {"id": "l3", "natural_language": "Substituting into this inequality gives $(x+\\frac{2}{3})^2+(x+\\frac{2}{3})(y+\\frac{2}{3})+(y+\\frac{2}{3})^2\\geq 0$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a, b, $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ [l1];\n\u2022 For any real numbers a, b, $a^2 + a*b + b^2 \\geq 0$ [l2];\n\u2022 Let a = x + 2/3 and b = y + 2/3 [def_1].\nTherefore, we conclude:\n\u2022 $(x + 2/3)^2 + (x + 2/3)*(y + 2/3) + (y + 2/3)^2 \\geq 0$ [l3].", "dependencies": ["tc_1", "l1", "l2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (x y : \u211d) \n  (h1 : \u2200 (a b : \u211d), (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2)\n  (h2 : \u2200 (a b : \u211d), a^2 + a*b + b^2 \u2265 0)\n  (h3 : let a := x + 2/3; let b := y + 2/3; a = x + 2/3 \u2227 b = y + 2/3) :\n  (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (x y : \u211d) \n  (h1 : \u2200 (a b : \u211d), (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2)\n  (h2 : \u2200 (a b : \u211d), a^2 + a*b + b^2 \u2265 0)\n  (h3 : let a := x + 2/3; let b := y + 2/3; a = x + 2/3 \u2227 b = y + 2/3) :\n  (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0 := by\n  have h_main : (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0 := by\n    have h4 : (x + 2 / 3 : \u211d) ^ 2 + (x + 2 / 3 : \u211d) * (y + 2 / 3 : \u211d) + (y + 2 / 3 : \u211d) ^ 2 \u2265 0 := by\n      -- Apply the universal inequality h2 with a = x + 2/3 and b = y + 2/3\n      have h5 : \u2200 (a b : \u211d), a ^ 2 + a * b + b ^ 2 \u2265 0 := h2\n      have h6 : (x + 2 / 3 : \u211d) ^ 2 + (x + 2 / 3 : \u211d) * (y + 2 / 3 : \u211d) + (y + 2 / 3 : \u211d) ^ 2 \u2265 0 := by\n        -- Use h5 to directly get the inequality\n        specialize h5 (x + 2 / 3) (y + 2 / 3)\n        -- Simplify the expression to match the form in h5\n        ring_nf at h5 \u22a2\n        <;> linarith\n      exact h6\n    exact h4\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.8, "semantic_feedback": ["Variable declarations for x and y as real numbers are identical in meaning.", "The first mathematical property (equation with quadratic expressions) is perfectly captured with identical universal quantification and mathematical expressions.", "The second mathematical property (non-negativity condition) is perfectly captured with identical universal quantification and inequality.", "The variable definitions have the same logical meaning but different structural representation. The Lean version uses let-bindings followed by redundant equality assertions, while the natural language uses simple definitions. The semantic meaning is equivalent.", "The conclusion statement is perfectly captured with identical mathematical expressions and inequality relation."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Expanding and simplifying yields $x^2+y^2+xy+2x+2y+\\frac{4}{3}\\geq 0$", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a, b, $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ [l1];\n\u2022 For any real numbers a, b, $a^2 + a*b + b^2 \\geq 0$ [l2];\n\u2022 Let a = x + 2/3 and b = y + 2/3 [def_1];\n\u2022 $(x + 2/3)^2 + (x + 2/3)*(y + 2/3) + (y + 2/3)^2 \\geq 0$ [l3].\nTherefore, we conclude:\n\u2022 $x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \\geq 0$ [l4].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 \n  (x y : \u211d)\n  (l1 : \u2200 (a b : \u211d), (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2)\n  (l2 : \u2200 (a b : \u211d), a^2 + a*b + b^2 \u2265 0)\n  (l3 : (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0) :\n  x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \u2265 0 := by\n  sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 \n  (x y : \u211d)\n  (l1 : \u2200 (a b : \u211d), (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2)\n  (l2 : \u2200 (a b : \u211d), a^2 + a*b + b^2 \u2265 0)\n  (l3 : (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0) :\n  x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \u2265 0 := by\n  have h_expand : (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 = x^2 + y^2 + x*y + 2*x + 2*y + 4/3 := by\n    ring_nf at *\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try ring_nf) <;>\n    (try nlinarith)\n    <;>\n    (try\n      {\n        nlinarith [sq_nonneg (x + y + 4 / 3), sq_nonneg (x - y), sq_nonneg (x - 1), sq_nonneg (y - 1)]\n      })\n    <;>\n    (try\n      {\n        nlinarith [sq_nonneg (x + y + 4 / 3), sq_nonneg (x - y), sq_nonneg (x - 1), sq_nonneg (y - 1)]\n      })\n  \n  have h_main : x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \u2265 0 := by\n    have h4 : x^2 + y^2 + x*y + 2*x + 2*y + 4/3 = (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 := by\n      linarith\n    rw [h4]\n    linarith\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations for x and y as real numbers are correctly captured in Lean.", "The universal quantification and mathematical expression in l1 are perfectly translated to Lean syntax.", "The universal quantification and inequality in l2 are perfectly translated to Lean syntax.", "While def_1 is not explicitly stated as a separate definition in Lean, it is implicitly incorporated into l3, maintaining the same logical meaning.", "The specific inequality l3 correctly captures the substitution of a = x + 2/3 and b = y + 2/3 into the general form.", "The conclusion l4 is perfectly formalized with the exact same mathematical expression and inequality."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "and multiplying through by 3 gives $3x^2+3y^2+3xy+6x+6y+4\\geq 0$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a, b, $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ [l1];\n\u2022 For any real numbers a, b, $a^2 + a*b + b^2 \\geq 0$ [l2];\n\u2022 Let a = x + 2/3 and b = y + 2/3 [def_1];\n\u2022 $(x + 2/3)^2 + (x + 2/3)*(y + 2/3) + (y + 2/3)^2 \\geq 0$ [l3];\n\u2022 $x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \\geq 0$ [l4].\nTherefore, we conclude:\n\u2022 $3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \\geq 0$ [l5].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 \n  (x y : \u211d)\n  (tc_1 : \u2200 (a b : \u211d), (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2)\n  (l1 : \u2200 (a b : \u211d), a^2 + a*b + b^2 \u2265 0)\n  (l2 : \u2200 (x y : \u211d), (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0)\n  (l3 : \u2200 (x y : \u211d), x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \u2265 0)\n  (l4 : \u2200 (x y : \u211d), 3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \u2265 0) :\n  3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \u2265 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 \n  (x y : \u211d)\n  (tc_1 : \u2200 (a b : \u211d), (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2)\n  (l1 : \u2200 (a b : \u211d), a^2 + a*b + b^2 \u2265 0)\n  (l2 : \u2200 (x y : \u211d), (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0)\n  (l3 : \u2200 (x y : \u211d), x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \u2265 0)\n  (l4 : \u2200 (x y : \u211d), 3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \u2265 0) :\n  3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \u2265 0 := by\n  have h_main : 3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \u2265 0 := by\n    have h5 : 3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \u2265 0 := l4 x y\n    exact h5\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1 in natural language refers to x,y being real numbers, but in Lean it contains a mathematical formula. The content is shifted.", "l1 in natural language is about a formula equality, but in Lean it's about non-negativity. Labels are mismatched but content exists.", "l2 in natural language is about non-negativity, but in Lean it's about a specific substitution. Content exists but labels shifted.", "def_1 mentioned in natural language (Let a = x + 2/3 and b = y + 2/3) is completely missing from the Lean formalization.", "l3 in natural language is about substituted inequality, but in Lean it's about expanded form. Labels mismatched but content exists.", "l4 in natural language is about expanded form, but in Lean it's the final conclusion. Content exists but labels shifted.", "The conclusion l5 perfectly matches the theorem goal in Lean.", "Wrong dependencies in Lean4 tactics!"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['tc_1 in natural language refers to x,y being real numbers, but in Lean it contains a mathematical formula. The content is shifted.', \"l1 in natural language is about a formula equality, but in Lean it's about non-negativity. Labels are mismatched but content exists.\", \"l2 in natural language is about non-negativity, but in Lean it's about a specific substitution. Content exists but labels shifted.\", 'def_1 mentioned in natural language (Let a = x + 2/3 and b = y + 2/3) is completely missing from the Lean formalization.', \"l3 in natural language is about substituted inequality, but in Lean it's about expanded form. Labels mismatched but content exists.\", \"l4 in natural language is about expanded form, but in Lean it's the final conclusion. Content exists but labels shifted.\", 'The conclusion l5 perfectly matches the theorem goal in Lean.']"}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "On the other hand, expanding the left-hand side of the target inequality gives $3(x+y+1)^2+1=3x^2+3y^2+6xy+6x+6y+4$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a, b, $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ [l1];\n\u2022 For any real numbers a, b, $a^2 + a*b + b^2 \\geq 0$ [l2];\n\u2022 Let a = x + 2/3 and b = y + 2/3 [def_1];\n\u2022 $(x + 2/3)^2 + (x + 2/3)*(y + 2/3) + (y + 2/3)^2 \\geq 0$ [l3];\n\u2022 $x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \\geq 0$ [l4];\n\u2022 $3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \\geq 0$ [l5].\nTherefore, we conclude:\n\u2022 $3*(x+y+1)^2 + 1 = 3*x^2 + 3*y^2 + 6*x*y + 6*x + 6*y + 4$ [l6].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 \n  (x y : \u211d)\n  (tc_1 : x \u2265 0 \u2227 y \u2264 0)\n  (l1 : \u2200 (a b : \u211d), (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2)\n  (l2 : \u2200 (a b : \u211d), a^2 + a*b + b^2 \u2265 0)\n  (def_1 : \u2200 (x y : \u211d), 3 * (x + y + 1)^2 + 1 \u2265 3 * x * y)\n  (l3 : (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \u2265 0)\n  (l5 : 3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \u2265 0) :\n  3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 \n  (x y : \u211d)\n  (tc_1 : x \u2265 0 \u2227 y \u2264 0)\n  (l1 : \u2200 (a b : \u211d), (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2)\n  (l2 : \u2200 (a b : \u211d), a^2 + a*b + b^2 \u2265 0)\n  (def_1 : \u2200 (x y : \u211d), 3 * (x + y + 1)^2 + 1 \u2265 3 * x * y)\n  (l3 : (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \u2265 0)\n  (l5 : 3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \u2265 0) :\n  3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4 := by\n  have h_main : 3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4 := by\n    have h1 : (x + y + 1) ^ 2 = x ^ 2 + y ^ 2 + 1 + 2 * x * y + 2 * x + 2 * y := by\n      ring_nf\n      <;>\n      linarith\n    calc\n      3 * (x + y + 1) ^ 2 + 1 = 3 * (x ^ 2 + y ^ 2 + 1 + 2 * x * y + 2 * x + 2 * y) + 1 := by rw [h1]\n      _ = 3 * x ^ 2 + 3 * y ^ 2 + 3 + 6 * x * y + 6 * x + 6 * y + 1 := by ring\n      _ = 3 * x ^ 2 + 3 * y ^ 2 + 6 * x * y + 6 * x + 6 * y + 4 := by ring\n      _ = 3 * x ^ 2 + 3 * y ^ 2 + 6 * x * y + 6 * x + 6 * y + 4 := by rfl\n  \n  apply h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language states x and y are real numbers, but the Lean adds extra constraints x \u2265 0 \u2227 y \u2264 0 that are not mentioned in the natural language. While extra constraints are generally acceptable, these seem unrelated to the mathematical content.", "The mathematical identity is perfectly captured in Lean with identical structure and meaning.", "The non-negativity property for the quadratic form is correctly formalized.", "Major mismatch: The natural language defines variables a = x + 2/3 and b = y + 2/3, but the Lean formalization presents a completely different inequality involving (x + y + 1)^2 that doesn't correspond to the stated definition.", "The inequality l3 is correctly formalized with the exact same mathematical expression.", "The expanded form l4 matches perfectly in both structure and mathematical meaning.", "The scaled inequality l5 is accurately represented in the Lean formalization.", "The conclusion l6 is correctly stated as an equality between the two mathematical expressions."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language states x and y are real numbers, but the Lean adds extra constraints x \u2265 0 \u2227 y \u2264 0 that are not mentioned in the natural language. While extra constraints are generally acceptable, these seem unrelated to the mathematical content.', 'The mathematical identity is perfectly captured in Lean with identical structure and meaning.', 'The non-negativity property for the quadratic form is correctly formalized.', \"Major mismatch: The natural language defines variables a = x + 2/3 and b = y + 2/3, but the Lean formalization presents a completely different inequality involving (x + y + 1)^2 that doesn't correspond to the stated definition.\", 'The inequality l3 is correctly formalized with the exact same mathematical expression.', 'The expanded form l4 matches perfectly in both structure and mathematical meaning.', 'The scaled inequality l5 is accurately represented in the Lean formalization.', 'The conclusion l6 is correctly stated as an equality between the two mathematical expressions.']"}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "Subtracting $3xy$ from this expression gives exactly $3x^2+3y^2+3xy+6x+6y+4$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a, b, $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ [l1];\n\u2022 For any real numbers a, b, $a^2 + a*b + b^2 \\geq 0$ [l2];\n\u2022 Let a = x + 2/3 and b = y + 2/3 [def_1];\n\u2022 $(x + 2/3)^2 + (x + 2/3)*(y + 2/3) + (y + 2/3)^2 \\geq 0$ [l3];\n\u2022 $x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \\geq 0$ [l4];\n\u2022 $3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \\geq 0$ [l5];\n\u2022 $3*(x+y+1)^2 + 1 = 3*x^2 + 3*y^2 + 6*x*y + 6*x + 6*y + 4$ [l6].\nTherefore, we conclude:\n\u2022 $(3*(x+y+1)^2 + 1) - 3*x*y = 3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4$ [l7].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l7 \n  (x y : \u211d)\n  (tc_1 : x \u2265 0 \u2227 y \u2264 0)\n  (l1 : \u2200 (a b : \u211d), (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2)\n  (l2 : \u2200 (a b : \u211d), a^2 + a*b + b^2 \u2265 0)\n  (def_1 : \u2200 (x y : \u211d), 3 * (x + y + 1)^2 + 1 \u2265 3 * x * y)\n  (l3 : (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \u2265 0)\n  (l5 : 3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \u2265 0)\n  (l6 : 3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4) :\n  (3 * (x + y + 1)^2 + 1) - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l7 \n  (x y : \u211d)\n  (tc_1 : x \u2265 0 \u2227 y \u2264 0)\n  (l1 : \u2200 (a b : \u211d), (a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2)\n  (l2 : \u2200 (a b : \u211d), a^2 + a*b + b^2 \u2265 0)\n  (def_1 : \u2200 (x y : \u211d), 3 * (x + y + 1)^2 + 1 \u2265 3 * x * y)\n  (l3 : (x + 2/3)^2 + (x + 2/3) * (y + 2/3) + (y + 2/3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \u2265 0)\n  (l5 : 3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \u2265 0)\n  (l6 : 3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4) :\n  (3 * (x + y + 1)^2 + 1) - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 := by\n  have h_main : (3 * (x + y + 1)^2 + 1) - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 := by\n    have h7 : (3 * (x + y + 1)^2 + 1) - 3 * x * y = (3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4) - 3 * x * y := by\n      rw [l6]\n      <;> ring_nf\n    rw [h7]\n    <;> ring_nf\n    <;> linarith\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["tc_1: The Lean formalization adds extra constraints (x \u2265 0 \u2227 y \u2264 0) that are not mentioned in the natural language, which only states that x and y are real numbers.", "l1: Perfect correspondence between natural language and Lean formalization.", "l2: Perfect correspondence between natural language and Lean formalization.", "def_1: Major mismatch - the natural language defines variables a = x + 2/3 and b = y + 2/3, but the Lean formalization states a completely different inequality about 3 * (x + y + 1)^2 + 1 \u2265 3 * x * y.", "l3: Perfect correspondence between natural language and Lean formalization.", "l4: Perfect correspondence between natural language and Lean formalization.", "l5: Perfect correspondence between natural language and Lean formalization.", "l6: Perfect correspondence between natural language and Lean formalization.", "l7: Perfect correspondence between natural language and Lean formalization for the conclusion."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['tc_1: The Lean formalization adds extra constraints (x \u2265 0 \u2227 y \u2264 0) that are not mentioned in the natural language, which only states that x and y are real numbers.', 'l1: Perfect correspondence between natural language and Lean formalization.', 'l2: Perfect correspondence between natural language and Lean formalization.', 'def_1: Major mismatch - the natural language defines variables a = x + 2/3 and b = y + 2/3, but the Lean formalization states a completely different inequality about 3 * (x + y + 1)^2 + 1 \u2265 3 * x * y.', 'l3: Perfect correspondence between natural language and Lean formalization.', 'l4: Perfect correspondence between natural language and Lean formalization.', 'l5: Perfect correspondence between natural language and Lean formalization.', 'l6: Perfect correspondence between natural language and Lean formalization.', 'l7: Perfect correspondence between natural language and Lean formalization for the conclusion.']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "which we have already shown is non-negative. Therefore, $3(x+y+1)^2+1\\geq 3xy$ holds for all real $x,y$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a, b, $(a + b/2)^2 + (3*b^2)/4 = a^2 + a*b + b^2$ [l1];\n\u2022 For any real numbers a, b, $a^2 + a*b + b^2 \\geq 0$ [l2];\n\u2022 Let a = x + 2/3 and b = y + 2/3 [def_1];\n\u2022 $(x + 2/3)^2 + (x + 2/3)*(y + 2/3) + (y + 2/3)^2 \\geq 0$ [l3];\n\u2022 $x^2 + y^2 + x*y + 2*x + 2*y + 4/3 \\geq 0$ [l4];\n\u2022 $3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4 \\geq 0$ [l5];\n\u2022 $3*(x+y+1)^2 + 1 = 3*x^2 + 3*y^2 + 6*x*y + 6*x + 6*y + 4$ [l6];\n\u2022 $(3*(x+y+1)^2 + 1) - 3*x*y = 3*x^2 + 3*y^2 + 3*x*y + 6*x + 6*y + 4$ [l7].\nTherefore, we conclude:\n\u2022 $3(x+y+1)^2+1 \\geq 3xy$ [ts_1].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 \n  (x y : \u211d) :\n  3 * (x + y + 1)^2 + 1 \u2265 3 * x * y := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 \n  (x y : \u211d) :\n  3 * (x + y + 1)^2 + 1 \u2265 3 * x * y := by\n  have h_main : 3 * (x + y + 1)^2 + 1 - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 := by\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try ring_nf at *) <;>\n    (try nlinarith)\n    <;>\n    linarith\n  \n  have h_quad : 3 * x^2 + (3 * y + 6) * x + (3 * y^2 + 6 * y + 4) \u2265 0 := by\n    nlinarith [sq_nonneg (x + (3 * y + 6) / 6), sq_nonneg (3 * y + 2), sq_nonneg (x + (3 * y + 6) / 6 + (3 * y + 2) / 3),\n      sq_nonneg (x + (3 * y + 6) / 6 - (3 * y + 2) / 3)]\n  \n  have h_final : 3 * (x + y + 1)^2 + 1 \u2265 3 * x * y := by\n    have h\u2081 : 3 * (x + y + 1)^2 + 1 - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 := h_main\n    have h\u2082 : 3 * x^2 + (3 * y + 6) * x + (3 * y^2 + 6 * y + 4) \u2265 0 := h_quad\n    have h\u2083 : 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0 := by\n      nlinarith [sq_nonneg (x + (3 * y + 6) / 6), sq_nonneg (3 * y + 2)]\n    nlinarith\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization only captures the final conclusion (ts_1) but completely omits all the mathematical assumptions, intermediate lemmas, and proof steps (l1, l2, def_1, l3-l7) that are explicitly stated in the natural language. While the final theorem statement matches perfectly, the missing mathematical content represents a major gap since the natural language presents a complete mathematical argument structure that should be reflected in the formalization.", "Wrong dependencies in Lean4 tactics!"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization only captures the final conclusion (ts_1) but completely omits all the mathematical assumptions, intermediate lemmas, and proof steps (l1, l2, def_1, l3-l7) that are explicitly stated in the natural language. While the final theorem statement matches perfectly, the missing mathematical content represents a major gap since the natural language presents a complete mathematical argument structure that should be reflected in the formalization.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    