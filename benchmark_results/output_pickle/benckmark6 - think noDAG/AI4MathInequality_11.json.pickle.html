
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for all $a, b \\in \\mathbb{R}^{+}$, the following inequality holds: $4(a^3 + b^3) \\geq (a + b)^3$.

Proof: Expand $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$. Then $4(a^3+b^3) - (a+b)^3 = 4a^3+4b^3 - (a^3+3a^2b+3ab^2+b^3) = 3a^3 - 3a^2b - 3ab^2 + 3b^3 = a^3 - a^2b - ab^2 + b^3 = (a^2 - b^2)(a-b) = (a-b)^2(a+b) \geq 0$. Since $a+b>0$ and $(a-b)^2\ge 0$ for all positive $a,b$, the inequality holds: $4(a^3+b^3) \ge (a+b)^3$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for all $a, b \\in \\mathbb{R}^{+}$", "statement": "Premise:\n\u2022 a and b are positive real numbers ($a, b \\in \\mathbb{R}^{+}$) [tc_1]", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_1 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) : \n  4 * (a^3 + b^3) \u2265 (a + b)^3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The condition $a \\in \\mathbb{R}^{+}$ is correctly formalized as (a : \u211d) (ha : 0 < a) in Lean", "The condition $b \\in \\mathbb{R}^{+}$ is correctly formalized as (b : \u211d) (hb : 0 < b) in Lean", "The natural language explicitly states no conclusions are derived, but the Lean formalization introduces a substantial inequality 4 * (a^3 + b^3) \u2265 (a + b)^3 as the theorem's proposition"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The condition $a \\\\in \\\\mathbb{R}^{+}$ is correctly formalized as (a : \u211d) (ha : 0 < a) in Lean', 'The condition $b \\\\in \\\\mathbb{R}^{+}$ is correctly formalized as (b : \u211d) (hb : 0 < b) in Lean', \"The natural language explicitly states no conclusions are derived, but the Lean formalization introduces a substantial inequality 4 * (a^3 + b^3) \u2265 (a + b)^3 as the theorem's proposition\"]"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "Expand $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$.", "statement": "We assume:\n\u2022 a and b are positive real numbers ($a, b \\in \\mathbb{R}^{+}$) [tc_1]\nTherefore, we conclude:\n\u2022 $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (a b : \u211d) (ha : 0 < a) (hb : 0 < b) :\n  (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (a b : \u211d) (ha : 0 < a) (hb : 0 < b) :\n  (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3 := by\n  have h_expand : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3 := by\n    calc\n      (a + b) ^ 3 = (a + b) ^ 2 * (a + b) := by ring\n      _ = (a ^ 2 + 2 * a * b + b ^ 2) * (a + b) := by\n        have h\u2081 : (a + b) ^ 2 = a ^ 2 + 2 * a * b + b ^ 2 := by ring\n        rw [h\u2081]\n      _ = a ^ 3 + 3 * a ^ 2 * b + 3 * a * b ^ 2 + b ^ 3 := by\n        ring_nf\n        <;>\n        nlinarith [ha, hb]\n      _ = a ^ 3 + 3 * a ^ 2 * b + 3 * a * b ^ 2 + b ^ 3 := by rfl\n  \n  rw [h_expand]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations and positivity assumptions are correctly captured in Lean syntax, with (a b : \u211d) declaring the real number types and (ha : 0 < a) (hb : 0 < b) expressing the positivity constraints.", "The algebraic identity is perfectly preserved, with only notational differences (^ for exponentiation, * for multiplication) that are standard in Lean and maintain identical mathematical meaning.", "The logical structure appropriately translates the natural language 'assume...conclude' format into Lean's theorem statement with hypotheses and conclusion.", "The theorem naming (l1) maintains consistency with the natural language labeling system."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Then $4(a^3+b^3) - (a+b)^3 = 4a^3+4b^3 - (a^3+3a^2b+3ab^2+b^3) = 3a^3 - 3a^2b - 3ab^2 + 3b^3$", "statement": "We assume:\n\u2022 a and b are positive real numbers ($a, b \\in \\mathbb{R}^{+}$) [tc_1]\n\u2022 $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$ [l1]\nTherefore, we conclude:\n\u2022 $4(a^3+b^3) - (a+b)^3 = 3a^3 - 3a^2b - 3ab^2 + 3b^3$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) \n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3) :\n  4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) \n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3) :\n  4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 := by\n  have h2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 := by\n    have h3 : 4 * (a^3 + b^3) - (a + b)^3 = 4 * (a^3 + b^3) - (a^3 + 3*a^2*b + 3*a*b^2 + b^3) := by\n      rw [l1]\n    rw [h3]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try nlinarith [ha, hb]) <;>\n    (try ring_nf at *) <;>\n    (try nlinarith)\n  \n  apply h2", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations and positivity constraints are correctly formalized. The Lean representation (a b : \u211d) (ha : 0 < a) (hb : 0 < b) accurately captures the natural language requirement that a and b are positive real numbers.", "The premise l1 is perfectly translated. The binomial expansion equation (a+b)\u00b3 = a\u00b3 + 3a\u00b2b + 3ab\u00b2 + b\u00b3 is identical in mathematical content between natural language and Lean formalization, with appropriate syntax adaptation.", "The conclusion equation is mathematically equivalent in both versions. The algebraic expression 4(a\u00b3+b\u00b3) - (a+b)\u00b3 = 3a\u00b3 - 3a\u00b2b - 3ab\u00b2 + 3b\u00b3 is correctly represented with proper Lean arithmetic notation."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "$3a^3 - 3a^2b - 3ab^2 + 3b^3 = a^3 - a^2b - ab^2 + b^3 = (a^2 - b^2)(a-b) = (a-b)^2(a+b)$", "statement": "We assume:\n\u2022 a and b are positive real numbers ($a, b \\in \\mathbb{R}^{+}$) [tc_1]\n\u2022 $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$ [l1]\n\u2022 $4(a^3+b^3) - (a+b)^3 = 3a^3 - 3a^2b - 3ab^2 + 3b^3$ [l2]\nTherefore, we conclude:\n\u2022 $3a^3 - 3a^2b - 3ab^2 + 3b^3 = (a-b)^2(a+b)$ [l3].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b : \u211d) (ha : 0 < a) (hb : 0 < b)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3) :\n  3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b : \u211d) (ha : 0 < a) (hb : 0 < b)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3) :\n  3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b) := by\n  have h3 : (a - b)^2 * (a + b) = a^3 - a^2*b - a*b^2 + b^3 := by\n    have h3\u2081 : (a - b)^2 = a^2 - 2*a*b + b^2 := by\n      ring\n    rw [h3\u2081]\n    ring_nf\n    <;>\n    nlinarith [sq_nonneg (a - b), sq_nonneg (a + b), mul_pos ha hb]\n  \n  have h4 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = 3 * ((a - b)^2 * (a + b)) := by\n    have h4\u2081 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = 3 * (a^3 - a^2*b - a*b^2 + b^3) := by ring\n    rw [h4\u2081]\n    have h4\u2082 : a^3 - a^2*b - a*b^2 + b^3 = (a - b)^2 * (a + b) := by\n      linarith\n    rw [h4\u2082]\n    <;> ring\n    <;> nlinarith [sq_nonneg (a - b), sq_nonneg (a + b), mul_pos ha hb]\n  \n  have h5 : 3 * ((a - b) ^ 2 * (a + b)) = (a - b) ^ 2 * (a + b) := by\n    have h\u2085 : (a - b) ^ 2 * (a + b) = 0 := by\n      nlinarith [sq_nonneg (a - b), sq_nonneg (a + b), mul_pos ha hb,\n        sq_nonneg (a ^ 2 - b ^ 2), sq_nonneg (a ^ 2 + b ^ 2),\n        sq_nonneg (a ^ 2 - a * b), sq_nonneg (a * b - b ^ 2),\n        mul_nonneg ha.le hb.le, mul_nonneg (sq_nonneg (a - b)) ha.le,\n        mul_nonneg (sq_nonneg (a - b)) hb.le]\n    have h\u2086 : 3 * ((a - b) ^ 2 * (a + b)) = (a - b) ^ 2 * (a + b) := by\n      rw [h\u2085]\n      <;> ring\n      <;> nlinarith\n    exact h\u2086\n  \n  have h6 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b) := by\n    linarith\n  \n  exact h6", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 27, "column": 6, "endLine": 31, "endColumn": 45, "data": "linarith failed to find a contradiction\ncase h2.h\na b : \u211d\nha : 0 < a\nhb : 0 < b\nl1 : (a + b) ^ 3 = a ^ 3 + 3 * a ^ 2 * b + 3 * a * b ^ 2 + b ^ 3\nl2 : 4 * (a ^ 3 + b ^ 3) - (a + b) ^ 3 = 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3\nh3 : (a - b) ^ 2 * (a + b) = a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3\nh4 : 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = 3 * ((a - b) ^ 2 * (a + b))\na\u271d : 0 < (a - b) ^ 2 * (a + b)\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations and positivity constraints are correctly formalized using standard Lean syntax for real numbers and inequalities", "The binomial expansion equation l1 is perfectly captured with equivalent mathematical notation", "The algebraic identity l2 is correctly formalized with proper operator precedence and grouping", "The conclusion l3 maintains the exact mathematical relationship using appropriate Lean notation for exponentiation and multiplication", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b : \u211d) (ha : 0 < a) (hb : 0 < b)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3) :\n  3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b) := by\n  have h_main : (a - b)^2 * (a + b) = a^3 - a^2*b - a*b^2 + b^3 := by\n    have h1 : (a - b) ^ 2 * (a + b) = (a ^ 2 - 2 * a * b + b ^ 2) * (a + b) := by ring\n    rw [h1]\n    ring_nf\n    <;> nlinarith [sq_nonneg (a - b), sq_nonneg (a + b)]\n  \n  have h_triple : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = 3 * ((a - b)^2 * (a + b)) := by\n    have h3 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = 3 * (a^3 - a^2*b - a*b^2 + b^3) := by ring\n    have h4 : a^3 - a^2*b - a*b^2 + b^3 = (a - b)^2 * (a + b) := by\n      linarith [h_main]\n    calc\n      3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = 3 * (a^3 - a^2*b - a*b^2 + b^3) := by ring\n      _ = 3 * ((a - b)^2 * (a + b)) := by\n        rw [h4]\n        <;> ring\n      _ = 3 * ((a - b)^2 * (a + b)) := by rfl\n  \n  have h_final : a = b := by\n    have h\u2080 : 3 * ((a - b) ^ 2 * (a + b)) = (a - b) ^ 2 * (a + b) := by\n      -- Use the given conclusion to get this equality\n      have h\u2081 : 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = (a - b) ^ 2 * (a + b) := by\n        -- This is the original conclusion we are trying to prove\n        -- We use the fact that the difference is zero when a = b\n        -- But in general, this is not true, so we need another approach\n        -- Perhaps we can use the given identities to derive a contradiction unless a = b\n        nlinarith [sq_nonneg (a - b), sq_nonneg (a + b), mul_pos ha hb]\n      linarith [h_triple]\n    have h\u2081 : (a - b) ^ 2 * (a + b) = 0 := by\n      nlinarith [mul_pos ha hb]\n    have h\u2082 : (a - b) ^ 2 = 0 := by\n      have h\u2083 : 0 < a + b := by linarith\n      have h\u2084 : (a - b) ^ 2 * (a + b) = 0 := h\u2081\n      have h\u2085 : (a - b) ^ 2 = 0 := by\n        apply mul_left_cancel\u2080 (show (a + b : \u211d) \u2260 0 by linarith)\n        linarith\n      exact h\u2085\n    have h\u2083 : a - b = 0 := by\n      nlinarith\n    linarith\n  \n  have h_final\u2082 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b) := by\n    have h\u2080 : a = b := h_final\n    rw [h\u2080]\n    <;> ring_nf\n    <;> norm_num\n    <;> linarith\n  \n  exact h_final\u2082"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Since $a+b>0$", "statement": "We assume:\n\u2022 a and b are positive real numbers ($a, b \\in \\mathbb{R}^{+}$) [tc_1]\n\u2022 $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$ [l1]\n\u2022 $4(a^3+b^3) - (a+b)^3 = 3a^3 - 3a^2b - 3ab^2 + 3b^3$ [l2]\n\u2022 $3a^3 - 3a^2b - 3ab^2 + 3b^3 = (a-b)^2(a+b)$ [l3]\nTherefore, we conclude:\n\u2022 $a+b > 0$ [l4].", "dependencies": ["tc_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a b : \u211d) (ha : 0 < a) (hb : 0 < b)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3)\n  (l3 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b)) :\n  0 < a + b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a b : \u211d) (ha : 0 < a) (hb : 0 < b)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3)\n  (l3 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b)) :\n  0 < a + b := by\n  have h_sum_pos : 0 < a + b := by\n    -- Since a and b are positive, their sum is also positive.\n    linarith [ha, hb]\n  \n  exact h_sum_pos", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly capture positive real numbers using appropriate Lean types and constraints", "The binomial expansion identity is accurately represented with explicit multiplication operators", "The algebraic manipulation equation is faithfully translated with proper operator precedence", "The factorization identity correctly represents the mathematical relationship", "The conclusion maintains logical equivalence using standard Lean inequality notation"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "and $(a-b)^2\\ge 0$ for all positive $a,b$", "statement": "We assume:\n\u2022 a and b are positive real numbers ($a, b \\in \\mathbb{R}^{+}$) [tc_1]\n\u2022 $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$ [l1]\n\u2022 $4(a^3+b^3) - (a+b)^3 = 3a^3 - 3a^2b - 3ab^2 + 3b^3$ [l2]\n\u2022 $3a^3 - 3a^2b - 3ab^2 + 3b^3 = (a-b)^2(a+b)$ [l3]\n\u2022 $a+b > 0$ [l4]\nTherefore, we conclude:\n\u2022 $(a-b)^2 \\ge 0$ [l5].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) \n  (tc_1 : 4 * (a^3 + b^3) \u2265 (a + b)^3)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3)\n  (l3 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b))\n  (l4 : 0 < a + b) :\n  0 \u2264 (a - b)^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) \n  (tc_1 : 4 * (a^3 + b^3) \u2265 (a + b)^3)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3)\n  (l3 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b))\n  (l4 : 0 < a + b) :\n  0 \u2264 (a - b)^2 := by\n  have h_main : 0 \u2264 (a - b)^2 := by\n    nlinarith [sq_nonneg (a - b)]\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations and positivity constraints are correctly captured in Lean with appropriate types and constraints.", "All three algebraic identities (l1, l2, l3) are perfectly translated with correct mathematical expressions and variable relationships.", "The positivity condition l4 is correctly formalized, with equivalent meaning despite different inequality ordering.", "The conclusion l5 is correctly stated with equivalent meaning despite different inequality ordering.", "The additional constraint tc_1 in Lean is referenced in the natural language assumptions list, and represents a logically consistent additional condition that doesn't contradict the natural language statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "$(a-b)^2(a+b) \\geq 0$", "statement": "We assume:\n\u2022 a and b are positive real numbers ($a, b \\in \\mathbb{R}^{+}$) [tc_1]\n\u2022 $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$ [l1]\n\u2022 $4(a^3+b^3) - (a+b)^3 = 3a^3 - 3a^2b - 3ab^2 + 3b^3$ [l2]\n\u2022 $3a^3 - 3a^2b - 3ab^2 + 3b^3 = (a-b)^2(a+b)$ [l3]\n\u2022 $a+b > 0$ [l4]\n\u2022 $(a-b)^2 \\ge 0$ [l5]\nTherefore, we conclude:\n\u2022 $(a-b)^2(a+b) \\ge 0$ [l6].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 (a b : \u211d) (ha : 0 < a) (hb : 0 < b)\n  (tc_1 : 4 * (a^3 + b^3) \u2265 (a + b)^3)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3)\n  (l3 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b))\n  (l4 : 0 < a + b)\n  (l5 : 0 \u2264 (a - b)^2) :\n  0 \u2264 (a - b)^2 * (a + b) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 (a b : \u211d) (ha : 0 < a) (hb : 0 < b)\n  (tc_1 : 4 * (a^3 + b^3) \u2265 (a + b)^3)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3)\n  (l3 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b))\n  (l4 : 0 < a + b)\n  (l5 : 0 \u2264 (a - b)^2) :\n  0 \u2264 (a - b)^2 * (a + b) := by\n  have h_sum_nonneg : 0 \u2264 a + b := by\n    linarith\n  \n  have h_main : 0 \u2264 (a - b)^2 * (a + b) := by\n    have h\u2081 : 0 \u2264 (a - b)^2 := l5\n    have h\u2082 : 0 \u2264 a + b := h_sum_nonneg\n    -- Use the fact that the product of two non-negative numbers is non-negative\n    have h\u2083 : 0 \u2264 (a - b)^2 * (a + b) := by\n      nlinarith\n    exact h\u2083\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization introduces a critical assumption 'tc_1 : 4 * (a^3 + b^3) \u2265 (a + b)^3' that is not present in the natural language. This assumption fundamentally changes the logical structure - the natural language appears to be deriving/proving relationships through algebraic identities, while the Lean version assumes a key inequality that makes the conclusion follow trivially. This missing assumption in the natural language represents a major logical gap between the two formulations."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean formalization introduces a critical assumption 'tc_1 : 4 * (a^3 + b^3) \u2265 (a + b)^3' that is not present in the natural language. This assumption fundamentally changes the logical structure - the natural language appears to be deriving/proving relationships through algebraic identities, while the Lean version assumes a key inequality that makes the conclusion follow trivially. This missing assumption in the natural language represents a major logical gap between the two formulations.\"]"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Since $a+b>0$ and $(a-b)^2\\ge 0$ for all positive $a,b$, the inequality holds: $4(a^3+b^3) \\ge (a+b)^3$.", "statement": "We assume:\n\u2022 a and b are positive real numbers ($a, b \\in \\mathbb{R}^{+}$) [tc_1]\n\u2022 $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$ [l1]\n\u2022 $4(a^3+b^3) - (a+b)^3 = 3a^3 - 3a^2b - 3ab^2 + 3b^3$ [l2]\n\u2022 $3a^3 - 3a^2b - 3ab^2 + 3b^3 = (a-b)^2(a+b)$ [l3]\n\u2022 $a+b > 0$ [l4]\n\u2022 $(a-b)^2 \\ge 0$ [l5]\n\u2022 $(a-b)^2(a+b) \\ge 0$ [l6]\nTherefore, we conclude:\n\u2022 $4(a^3 + b^3) \\ge (a + b)^3$ [ts_1].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (a b : \u211d) (ha : 0 < a) (hb : 0 < b)\n  (tc_1 : 4 * (a^3 + b^3) \u2265 (a + b)^3)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3)\n  (l3 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b))\n  (l4 : 0 < a + b)\n  (l5 : 0 \u2264 (a - b)^2)\n  (l6 : 0 \u2264 (a - b)^2 * (a + b)) :\n  4 * (a^3 + b^3) \u2265 (a + b)^3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (a b : \u211d) (ha : 0 < a) (hb : 0 < b)\n  (tc_1 : 4 * (a^3 + b^3) \u2265 (a + b)^3)\n  (l1 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3)\n  (l2 : 4 * (a^3 + b^3) - (a + b)^3 = 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3)\n  (l3 : 3*a^3 - 3*a^2*b - 3*a*b^2 + 3*b^3 = (a-b)^2*(a+b))\n  (l4 : 0 < a + b)\n  (l5 : 0 \u2264 (a - b)^2)\n  (l6 : 0 \u2264 (a - b)^2 * (a + b)) :\n  4 * (a^3 + b^3) \u2265 (a + b)^3 := by\n  have h_main : 4 * (a^3 + b^3) \u2265 (a + b)^3 := by\n    -- The hypothesis `tc_1` directly provides the required inequality.\n    exact tc_1\n  -- The main goal is already achieved by `h_main`.\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization has a critical logical error. In the natural language, tc_1 represents the assumption that 'a and b are positive real numbers', but in the Lean code, tc_1 is defined as the hypothesis '4 * (a^3 + b^3) \u2265 (a + b)^3', which is actually the conclusion (ts_1) that should be proved. This makes the theorem trivial since it assumes the conclusion as a hypothesis. The positivity conditions are correctly captured by ha and hb, but the mislabeling of tc_1 creates a fundamental logical inconsistency between the natural language proof structure and the Lean formalization.", "Wrong dependencies in Lean4 tactics!"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean formalization has a critical logical error. In the natural language, tc_1 represents the assumption that 'a and b are positive real numbers', but in the Lean code, tc_1 is defined as the hypothesis '4 * (a^3 + b^3) \u2265 (a + b)^3', which is actually the conclusion (ts_1) that should be proved. This makes the theorem trivial since it assumes the conclusion as a hypothesis. The positivity conditions are correctly captured by ha and hb, but the mislabeling of tc_1 creates a fundamental logical inconsistency between the natural language proof structure and the Lean formalization.\"]"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    