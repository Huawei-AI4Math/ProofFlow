
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Suppose $a,b,n\in\Z$ are such that $n\mid a$ and $n\mid b$.  Then
  $n\mid \gcd(a,b)$.

We can assume the following statement(s) without a proof. 

For any integers $a,b,n$, we have
$$\gcd(an,bn) = \gcd(a,b)\cdot |n|.$$

Proof: Since $n\mid a$ and $n\mid b$, there are integers
$c_1$ and $c_2$, such that $a=n c_1$ and $b=n c_2$.
Then, 
$\gcd(a,b) = \gcd(n c_1, nc_2) = n\gcd(c_1, c_2)$,
so $n$ divides $\gcd(a,b)$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Suppose $a,b,n\\in\\Z$ are such that", "statement": "Premise:\n\u2022 $a, b, n$ are integers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_1 (a b n : \u2124) (h1 : n \u2223 a) (h2 : n \u2223 b) : n \u2223 Int.gcd a b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The variable declarations match perfectly - both declare a, b, n as integers", "The Lean formalization introduces additional conditions (n divides a and n divides b) that are not mentioned in the natural language statement", "The natural language explicitly states no conclusions are derived, but the Lean version includes a conclusion that n divides gcd(a,b)"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The variable declarations match perfectly - both declare a, b, n as integers', 'The Lean formalization introduces additional conditions (n divides a and n divides b) that are not mentioned in the natural language statement', 'The natural language explicitly states no conclusions are derived, but the Lean version includes a conclusion that n divides gcd(a,b)']"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "$n\\mid a$", "statement": "Premise:\n\u2022 $a, b, n$ are integers [tc_1];\n\u2022 $n \\mid a$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_2 (a b n : \u2124) (h1 : n \u2223 a) (h2 : n \u2223 b) : n \u2223 Int.gcd a b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The variable declarations match perfectly - both specify that a, b, n are integers", "The divisibility condition n|a is captured identically in both versions", "Lean introduces an additional hypothesis h2 : n \u2223 b that is not mentioned in the natural language premise", "The natural language states there are no conclusions, but the Lean theorem proves n \u2223 Int.gcd a b, which is a substantial addition not present in the original statement"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The variable declarations match perfectly - both specify that a, b, n are integers', 'The divisibility condition n|a is captured identically in both versions', 'Lean introduces an additional hypothesis h2 : n \u2223 b that is not mentioned in the natural language premise', 'The natural language states there are no conclusions, but the Lean theorem proves n \u2223 Int.gcd a b, which is a substantial addition not present in the original statement']"}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "$n\\mid b$", "statement": "Premise:\n\u2022 $a, b, n$ are integers [tc_1];\n\u2022 $n \\mid a$ [tc_2];\n\u2022 $n \\mid b$ [tc_3].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_1 (a b n : \u2124) (h1 : n \u2223 a) (h2 : n \u2223 b) : n \u2223 Int.gcd a b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean declaration (a b n : \u2124) correctly captures that a, b, n are integers", "The Lean hypothesis (h1 : n \u2223 a) perfectly matches the condition n \u2223 a", "The Lean hypothesis (h2 : n \u2223 b) perfectly matches the condition n \u2223 b", "The natural language states there are no conclusions - these are just premises. However, the Lean formalization introduces a new conclusion n \u2223 Int.gcd a b that is not mentioned in the natural language statement"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean declaration (a b n : \u2124) correctly captures that a, b, n are integers', 'The Lean hypothesis (h1 : n \u2223 a) perfectly matches the condition n \u2223 a', 'The Lean hypothesis (h2 : n \u2223 b) perfectly matches the condition n \u2223 b', 'The natural language states there are no conclusions - these are just premises. However, the Lean formalization introduces a new conclusion n \u2223 Int.gcd a b that is not mentioned in the natural language statement']"}, "type": "condition"}, "tc_4": {"id": "tc_4", "natural_language": "For any integers $a,b,n$, we have\n$$\\gcd(an,bn) = \\gcd(a,b)\\cdot |n|.$$", "statement": "Premise:\n\u2022 For any integers $x, y, z$, we have $\\gcd(x \\cdot z, y \\cdot z) = \\gcd(x, y) \\cdot |z|$ [tc_4].", "dependencies": ["tc_1", "tc_2", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_4 (x y z : \u2124) : Int.gcd (x * z) (y * z) = Int.gcd x y * Int.natAbs z := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration (x y z : \u2124) correctly captures that x, y, z are integers, matching the natural language condition exactly.", "The Lean equality Int.gcd (x * z) (y * z) = Int.gcd x y * Int.natAbs z perfectly captures the mathematical statement gcd(x\u00b7z, y\u00b7z) = gcd(x,y)\u00b7|z|. Int.natAbs z is the correct Lean representation of |z| (absolute value)."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "Since $n\\mid a$ and $n\\mid b$, there are integers $c_1$ and $c_2$, such that $a=n c_1$ and $b=n c_2$.", "statement": "We assume:\n\u2022 $a, b, n$ are integers [tc_1];\n\u2022 $n \\mid a$ [tc_2];\n\u2022 $n \\mid b$ [tc_3];\n\u2022 For any integers $x, y, z$, we have $\\gcd(x \\cdot z, y \\cdot z) = \\gcd(x, y) \\cdot |z|$ [tc_4].\nTherefore, we conclude:\n\u2022 There exist integers $c_1, c_2$ such that $a = n \\cdot c_1$ and $b = n \\cdot c_2$ [l1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  (a b n : \u2124)\n  (h1 : n \u2223 a)\n  (h2 : n \u2223 b)\n  (h3 : \u2200 x y z : \u2124, Int.gcd (x * z) (y * z) = Int.gcd x y * Int.natAbs z) :\n  \u2203 c\u2081 c\u2082 : \u2124, a = n * c\u2081 \u2227 b = n * c\u2082 := by\n  sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  (a b n : \u2124)\n  (h1 : n \u2223 a)\n  (h2 : n \u2223 b)\n  (h3 : \u2200 x y z : \u2124, Int.gcd (x * z) (y * z) = Int.gcd x y * Int.natAbs z) :\n  \u2203 c\u2081 c\u2082 : \u2124, a = n * c\u2081 \u2227 b = n * c\u2082 := by\n  have h4 : \u2203 (c\u2081 : \u2124), a = n * c\u2081 := by\n    obtain \u27e8c\u2081, hc\u2081\u27e9 := h1\n    refine' \u27e8c\u2081, _\u27e9\n    linarith\n  \n  have h5 : \u2203 (c\u2082 : \u2124), b = n * c\u2082 := by\n    obtain \u27e8c\u2082, hc\u2082\u27e9 := h2\n    refine' \u27e8c\u2082, _\u27e9\n    linarith\n  \n  have h6 : \u2203 c\u2081 c\u2082 : \u2124, a = n * c\u2081 \u2227 b = n * c\u2082 := by\n    obtain \u27e8c\u2081, hc\u2081\u27e9 := h4\n    obtain \u27e8c\u2082, hc\u2082\u27e9 := h5\n    refine' \u27e8c\u2081, c\u2082, _\u27e9\n    exact \u27e8hc\u2081, hc\u2082\u27e9\n  \n  exact h6", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations are correctly translated from natural language to Lean integer types", "First divisibility condition n\u2223a is properly expressed using Lean's divisibility notation", "Second divisibility condition n\u2223b is properly expressed using Lean's divisibility notation", "GCD property is accurately formalized with correct quantification, multiplication, and absolute value operations", "Existential conclusion correctly captures the existence of integer quotients with proper conjunction of equalities"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Then, \n$\\gcd(a,b) = \\gcd(n c_1, nc_2)$", "statement": "We assume:\n\u2022 $a, b, n$ are integers [tc_1];\n\u2022 $n \\mid a$ [tc_2];\n\u2022 $n \\mid b$ [tc_3];\n\u2022 For any integers $x, y, z$, we have $\\gcd(x \\cdot z, y \\cdot z) = \\gcd(x, y) \\cdot |z|$ [tc_4];\n\u2022 There exist integers $c_1, c_2$ such that $a = n \\cdot c_1$ and $b = n \\cdot c_2$ [l1].\nTherefore, we conclude:\n\u2022 $\\gcd(a, b) = \\gcd(n \\cdot c_1, n \\cdot c_2)$ [l2].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem main (a b n : \u2124) (h1 : n \u2223 a) (h2 : n \u2223 b) : n \u2223 Int.gcd a b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem main (a b n : \u2124) (h1 : n \u2223 a) (h2 : n \u2223 b) : n \u2223 Int.gcd a b := by\n  have h3 : n \u2223 Int.gcd a b := by\n    -- Apply the theorem that if n divides both a and b, then n divides their gcd\n    apply Int.dvd_gcd h1 h2\n  -- The result follows directly from the above step\n  exact h3", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization has a major inconsistency with the natural language. The natural language concludes with an equality 'gcd(a,b) = gcd(n\u00b7c\u2081, n\u00b7c\u2082)' while the Lean formalization concludes with a divisibility statement 'n \u2223 Int.gcd a b'. These are fundamentally different mathematical conclusions. Additionally, the Lean formalization omits several key assumptions from the natural language, including the gcd property (tc_4) and the existence of integers c\u2081, c\u2082 (l1). While both statements may be mathematically valid, they represent entirely different theorems."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean formalization has a major inconsistency with the natural language. The natural language concludes with an equality 'gcd(a,b) = gcd(n\u00b7c\u2081, n\u00b7c\u2082)' while the Lean formalization concludes with a divisibility statement 'n \u2223 Int.gcd a b'. These are fundamentally different mathematical conclusions. Additionally, the Lean formalization omits several key assumptions from the natural language, including the gcd property (tc_4) and the existence of integers c\u2081, c\u2082 (l1). While both statements may be mathematically valid, they represent entirely different theorems.\"]"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "$\\gcd(n c_1, nc_2) = n\\gcd(c_1, c_2)$", "statement": "We assume:\n\u2022 $a, b, n$ are integers [tc_1];\n\u2022 $n \\mid a$ [tc_2];\n\u2022 $n \\mid b$ [tc_3];\n\u2022 For any integers $x, y, z$, we have $\\gcd(x \\cdot z, y \\cdot z) = \\gcd(x, y) \\cdot |z|$ [tc_4];\n\u2022 There exist integers $c_1, c_2$ such that $a = n \\cdot c_1$ and $b = n \\cdot c_2$ [l1];\n\u2022 $\\gcd(a, b) = \\gcd(n \\cdot c_1, n \\cdot c_2)$ [l2].\nTherefore, we conclude:\n\u2022 $\\gcd(n \\cdot c_1, n \\cdot c_2) = n \\cdot \\gcd(c_1, c_2)$ [l3].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem main (a b n : \u2124) (h1 : n \u2223 a) (h2 : n \u2223 b) : n \u2223 Int.gcd a b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem main (a b n : \u2124) (h1 : n \u2223 a) (h2 : n \u2223 b) : n \u2223 Int.gcd a b := by\n  have h_main : n \u2223 Int.gcd a b := by\n    -- Use the property that if n divides both a and b, then n divides their gcd.\n    apply Int.dvd_gcd h1 h2\n  -- The result follows directly from the above step.\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations (a b n : \u2124) correctly capture the integer variables from the natural language", "The hypotheses h1 : n \u2223 a and h2 : n \u2223 b perfectly match the divisibility conditions tc_2 and tc_3", "The Lean formalization omits several key components from the natural language: the general GCD property (tc_4), the intermediate derivations about c\u2081 and c\u2082 (l1, l2), and the specific conclusion about gcd(n\u00b7c\u2081, n\u00b7c\u2082) = n\u00b7gcd(c\u2081, c\u2082) (l3). While the final theorem statement is mathematically sound, it misses the detailed logical structure presented in the natural language", "The conclusion n \u2223 Int.gcd a b correctly captures the ultimate mathematical goal that the natural language reasoning is building toward"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations (a b n : \u2124) correctly capture the integer variables from the natural language', 'The hypotheses h1 : n \u2223 a and h2 : n \u2223 b perfectly match the divisibility conditions tc_2 and tc_3', 'The Lean formalization omits several key components from the natural language: the general GCD property (tc_4), the intermediate derivations about c\u2081 and c\u2082 (l1, l2), and the specific conclusion about gcd(n\u00b7c\u2081, n\u00b7c\u2082) = n\u00b7gcd(c\u2081, c\u2082) (l3). While the final theorem statement is mathematically sound, it misses the detailed logical structure presented in the natural language', 'The conclusion n \u2223 Int.gcd a b correctly captures the ultimate mathematical goal that the natural language reasoning is building toward']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "$\\gcd(a,b) = \\gcd(n c_1, nc_2) = n\\gcd(c_1, c_2)$, so $n$ divides $\\gcd(a,b)$.", "statement": "We assume:\n\u2022 $a, b, n$ are integers [tc_1];\n\u2022 $n \\mid a$ [tc_2];\n\u2022 $n \\mid b$ [tc_3];\n\u2022 For any integers $x, y, z$, we have $\\gcd(x \\cdot z, y \\cdot z) = \\gcd(x, y) \\cdot |z|$ [tc_4];\n\u2022 There exist integers $c_1, c_2$ such that $a = n \\cdot c_1$ and $b = n \\cdot c_2$ [l1];\n\u2022 $\\gcd(a, b) = \\gcd(n \\cdot c_1, n \\cdot c_2)$ [l2];\n\u2022 $\\gcd(n \\cdot c_1, n \\cdot c_2) = n \\cdot \\gcd(c_1, c_2)$ [l3].\nTherefore, we conclude:\n\u2022 $n \\mid \\gcd(a, b)$ [ts_1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 \n  (a b n : \u2124)\n  (tc_1 : a \u2265 0 \u2227 b \u2264 0) -- dummy hypothesis for tc_1\n  (tc_2 : n \u2223 a) -- n divides a\n  (tc_3 : n \u2223 b) -- n divides b  \n  (tc_4 : \u2200 x y z : \u2124, Int.gcd (x * z) (y * z) = Int.gcd x y * Int.natAbs z) -- gcd property\n  (l1 : \u2203 c\u2081 c\u2082 : \u2124, a = n * c\u2081 \u2227 b = n * c\u2082) -- a and b are multiples of n\n  (l2 : Int.gcd a b = Int.gcd (n * c\u2081) (n * c\u2082)) -- gcd property\n  (l3 : Int.gcd (n * c\u2081) (n * c\u2082) = n * Int.gcd c\u2081 c\u2082) -- gcd factorization\n  (c\u2081 c\u2082 : \u2124) (hc\u2081 : a = n * c\u2081) (hc\u2082 : b = n * c\u2082) :\n  n \u2223 Int.gcd a b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 \n  (a b n : \u2124)\n  (tc_1 : a \u2265 0 \u2227 b \u2264 0) \n  (tc_2 : n \u2223 a) \n  (tc_3 : n \u2223 b)  \n  (tc_4 : \u2200 x y z : \u2124, Int.gcd (x * z) (y * z) = Int.gcd x y * Int.natAbs z)\n  (l1 : \u2203 c\u2081 c\u2082 : \u2124, a = n * c\u2081 \u2227 b = n * c\u2082) \n  (l2 : Int.gcd a b = Int.gcd (n * c\u2081) (n * c\u2082)) \n  (l3 : Int.gcd (n * c\u2081) (n * c\u2082) = n * Int.gcd c\u2081 c\u2082) \n  (c\u2081 c\u2082 : \u2124) (hc\u2081 : a = n * c\u2081) (hc\u2082 : b = n * c\u2082) :\n  n \u2223 Int.gcd a b := by\n  have h_bezout : a * Int.gcdA a b + b * Int.gcdB a b = Int.gcd a b := by\n    have h := Int.gcd_eq_gcd_ab a b\n    linarith\n  \n  have h_n_divides_bezout : n \u2223 a * Int.gcdA a b + b * Int.gcdB a b := by\n    have h\u2081 : n \u2223 a := tc_2\n    have h\u2082 : n \u2223 b := tc_3\n    have h\u2083 : n \u2223 a * Int.gcdA a b := dvd_mul_of_dvd_left h\u2081 (Int.gcdA a b)\n    have h\u2084 : n \u2223 b * Int.gcdB a b := dvd_mul_of_dvd_left h\u2082 (Int.gcdB a b)\n    -- Since n divides both terms, it divides their sum.\n    exact dvd_add h\u2083 h\u2084\n  \n  have h_main : n \u2223 Int.gcd a b := by\n    have h\u2081 : n \u2223 a * Int.gcdA a b + b * Int.gcdB a b := h_n_divides_bezout\n    have h\u2082 : a * Int.gcdA a b + b * Int.gcdB a b = Int.gcd a b := h_bezout\n    rw [h\u2082] at h\u2081\n    exact h\u2081\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["tc_1: The natural language states 'a, b, n are integers' but the Lean formalization uses 'tc_1 : a \u2265 0 \u2227 b \u2264 0' as a dummy hypothesis. While the variables are declared as integers (\u2124) elsewhere, this dummy constraint doesn't represent the original meaning.", "tc_2: Perfect match - 'n \u2223 a' correctly represents 'n divides a'.", "tc_3: Perfect match - 'n \u2223 b' correctly represents 'n divides b'.", "tc_4: The natural language uses |z| (absolute value) while Lean uses Int.natAbs z. These are semantically equivalent for the gcd property, representing the same mathematical concept with different notation.", "l1: Major inconsistency - The natural language states this as a derived fact from tc_2 and tc_3, but in Lean it's presented as an independent hypothesis. The existential quantification in the hypothesis doesn't match the direct assertion in natural language.", "l2: Major inconsistency - This should be derivable from l1 and substitution, but in Lean it's presented as an independent hypothesis that references c\u2081 and c\u2082 before they're properly introduced in the context.", "l3: Major inconsistency - This should follow from tc_4 (the gcd property), but it's presented as an independent hypothesis. Additionally, it assumes n \u2265 0 implicitly since it uses multiplication rather than Int.natAbs.", "ts_1: Perfect match - 'n \u2223 Int.gcd a b' correctly represents 'n divides gcd(a,b)'."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"tc_1: The natural language states 'a, b, n are integers' but the Lean formalization uses 'tc_1 : a \u2265 0 \u2227 b \u2264 0' as a dummy hypothesis. While the variables are declared as integers (\u2124) elsewhere, this dummy constraint doesn't represent the original meaning.\", \"tc_2: Perfect match - 'n \u2223 a' correctly represents 'n divides a'.\", \"tc_3: Perfect match - 'n \u2223 b' correctly represents 'n divides b'.\", 'tc_4: The natural language uses |z| (absolute value) while Lean uses Int.natAbs z. These are semantically equivalent for the gcd property, representing the same mathematical concept with different notation.', \"l1: Major inconsistency - The natural language states this as a derived fact from tc_2 and tc_3, but in Lean it's presented as an independent hypothesis. The existential quantification in the hypothesis doesn't match the direct assertion in natural language.\", \"l2: Major inconsistency - This should be derivable from l1 and substitution, but in Lean it's presented as an independent hypothesis that references c\u2081 and c\u2082 before they're properly introduced in the context.\", \"l3: Major inconsistency - This should follow from tc_4 (the gcd property), but it's presented as an independent hypothesis. Additionally, it assumes n \u2265 0 implicitly since it uses multiplication rather than Int.natAbs.\", \"ts_1: Perfect match - 'n \u2223 Int.gcd a b' correctly represents 'n divides gcd(a,b)'.\"]"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_4", "label": "tc_4", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    