
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $X$ and $Y$ be random variables. Suppose the conditional expectation of $X$ given $Y$ is $E[X|Y] = Y^2$, the conditional variance of $X$ given $Y$ is $	ext{Var}(X|Y) = 2$, and $Y$ is a random variable following a continuous uniform distribution on the interval $[0, 3]$. Then, the expectation of $X$ is $E[X] = 3$ and the variance of $X$ is $	ext{Var}(X) = 9.2$.

Proof: To find the expectation of $X$, we use the law of total expectation, which states $E[X] = E[E[X|Y]]$. Since $Y$ is uniformly distributed on $[0, 3]$, its probability density function is $f_Y(y) = \frac{1}{3}$ for $y \in [0, 3]$. This allows us to compute the second moment of $Y$: $E[Y^2] = \int_{0}^{3} y^2 (\frac{1}{3}) dy = 3$. Substituting the given condition $E[X|Y] = Y^2$ into the law of total expectation gives $E[X] = E[Y^2]$. Since we found $E[Y^2] = 3$, it follows that $E[X] = 3$.

To find the variance of $X$, we use the law of total variance: $	ext{Var}(X) = E[	ext{Var}(X|Y)] + 	ext{Var}(E[X|Y])$. From the condition $	ext{Var}(X|Y) = 2$, the first term is $E[	ext{Var}(X|Y)] = E[2] = 2$. For the second term, we require the fourth moment of $Y$, which is $E[Y^4] = \int_{0}^{3} y^4 (\frac{1}{3}) dy = 16.2$. Using the variance definition for $E[X|Y] = Y^2$, we get $	ext{Var}(Y^2) = E[Y^4] - (E[Y^2])^2 = 16.2 - 3^2 = 7.2$. Finally, substituting the two components into the law of total variance yields $	ext{Var}(X) = 2 + 7.2 = 9.2$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $X$ and $Y$ be random variables.", "statement": "Premise:\n\u2022 X and Y are random variables [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (X Y : \u2115 \u2192 \u211d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The natural language states that X and Y are random variables without specifying their domain or codomain. The Lean formalization declares them as functions from \u2115 to \u211d, which is a specific type of random variable (discrete, indexed by natural numbers). While this is a valid representation of random variables, it's more restrictive than the general statement in natural language."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The natural language states that X and Y are random variables without specifying their domain or codomain. The Lean formalization declares them as functions from \u2115 to \u211d, which is a specific type of random variable (discrete, indexed by natural numbers). While this is a valid representation of random variables, it's more restrictive than the general statement in natural language.\"]"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "Suppose the conditional expectation of $X$ given $Y$ is $E[X|Y] = Y^2$", "statement": "Premise:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (X Y : \u2115 \u2192 \u211d)\n(tc_2 : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \n  \u2203 (cond_exp : \u211d \u2192 \u211d), cond_exp y = y^2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization represents X and Y as functions from \u2115 to \u211d, which is a specific mathematical representation of random variables (as sequences or discrete-time processes), but the natural language simply states they are random variables without specifying the probability space or domain. This is a reasonable formalization but not a direct translation.", "The Lean formalization significantly deviates from the natural language. It restricts y to the interval [0,3] which is not mentioned in the natural language, and it existentially quantifies over a conditional expectation function rather than directly stating E[X|Y] = Y^2. The Lean version says 'there exists some conditional expectation function' rather than 'the conditional expectation of X given Y equals Y^2'. This changes the mathematical meaning substantially."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization represents X and Y as functions from \u2115 to \u211d, which is a specific mathematical representation of random variables (as sequences or discrete-time processes), but the natural language simply states they are random variables without specifying the probability space or domain. This is a reasonable formalization but not a direct translation.', \"The Lean formalization significantly deviates from the natural language. It restricts y to the interval [0,3] which is not mentioned in the natural language, and it existentially quantifies over a conditional expectation function rather than directly stating E[X|Y] = Y^2. The Lean version says 'there exists some conditional expectation function' rather than 'the conditional expectation of X given Y equals Y^2'. This changes the mathematical meaning substantially.\"]"}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "the conditional variance of $X$ given $Y$ is $\\text{Var}(X|Y) = 2$", "statement": "Premise:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_3 :\n  \u2203 (f : \u211d \u2192 \u211d), \n    (\u2200 y, 0 \u2264 y \u2227 y \u2264 3 \u2192 f y = 1/3) \u2227\n    (\u2200 y, y < 0 \u2228 y > 3 \u2192 f y = 0) \u2227\n    (\u222b y in (0)..(3), f y = 1) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean theorem makes no mention of random variables X and Y, instead defining an unrelated function f", "The Lean theorem contains no reference to conditional expectation E[X|Y] = Y\u00b2, instead focusing on properties of function f", "The Lean theorem does not address conditional variance Var(X|Y) = 2, and instead discusses integral properties of function f"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean theorem makes no mention of random variables X and Y, instead defining an unrelated function f', 'The Lean theorem contains no reference to conditional expectation E[X|Y] = Y\u00b2, instead focusing on properties of function f', 'The Lean theorem does not address conditional variance Var(X|Y) = 2, and instead discusses integral properties of function f']"}, "type": "condition"}, "tc_4": {"id": "tc_4", "natural_language": "$Y$ is a random variable following a continuous uniform distribution on the interval $[0, 3]$.", "statement": "Premise:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4].", "dependencies": ["tc_1", "tc_2", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_4 :\n  -- X and Y are random variables\n  \u2203 (X Y : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d),\n    -- Y follows continuous uniform distribution on [0,3]\n    (\u2200 y : \u211d, f y = if y \u2208 Set.Icc 0 3 then 1/3 else 0) \u2227\n    -- Conditional expectation E[X|Y] = Y\u00b2\n    (\u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \n      \u2203 (cond_exp : \u211d), cond_exp = y^2) \u2227\n    -- Conditional variance Var(X|Y) = 2  \n    (\u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \n      \u2203 (cond_var : \u211d), cond_var = 2) \u2227\n    -- Conclusion: E[X] = 3 and Var(X) = 9.2\n    (\u2203 (E_X Var_X : \u211d), E_X = 3 \u2227 Var_X = 9.2) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly represents X and Y as random variables using functions from \u211d \u2192 \u211d, which matches the natural language condition.", "The Lean code represents the conditional expectation but uses an existential quantification pattern that doesn't directly capture the functional relationship E[X|Y] = Y\u00b2. The mathematical meaning is preserved but the formalization is indirect.", "Similar to the conditional expectation, the conditional variance is represented using existential quantification rather than directly stating the functional relationship Var(X|Y) = 2. The meaning is preserved but the representation is indirect.", "The Lean code correctly formalizes the uniform distribution on [0,3] using the appropriate density function and interval notation.", "The Lean formalization introduces conclusions (E[X] = 3 and Var(X) = 9.2) that are not present in the natural language statement, which explicitly states there are no conclusions derived yet."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly represents X and Y as random variables using functions from \u211d \u2192 \u211d, which matches the natural language condition.', \"The Lean code represents the conditional expectation but uses an existential quantification pattern that doesn't directly capture the functional relationship E[X|Y] = Y\u00b2. The mathematical meaning is preserved but the formalization is indirect.\", 'Similar to the conditional expectation, the conditional variance is represented using existential quantification rather than directly stating the functional relationship Var(X|Y) = 2. The meaning is preserved but the representation is indirect.', 'The Lean code correctly formalizes the uniform distribution on [0,3] using the appropriate density function and interval notation.', 'The Lean formalization introduces conclusions (E[X] = 3 and Var(X) = 9.2) that are not present in the natural language statement, which explicitly states there are no conclusions derived yet.']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "To find the expectation of $X$, we use the law of total expectation, which states $E[X] = E[E[X|Y]]$.", "statement": "We assume:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4].\nTherefore, we conclude:\n\u2022 The law of total expectation states E[X] = E[E[X|Y]] [l1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  -- Given: Y follows continuous uniform distribution on [0,3]\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 (1/3 : \u211d) > 0)\n  -- Given: E[X|Y] = Y\u00b2\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u222b x, x * (1/3) = y^2)\n  -- Law of total expectation: E[X] = E[E[X|Y]]\n  : \u222b y in (0)..(3), y^2 * (1/3) = \u222b y in (0)..(3), y^2 * (1/3) := by sorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 (1/3 : \u211d) > 0)\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u222b x, x * (1/3) = y^2)\n  : \u222b y in (0)..(3), y^2 * (1/3) = \u222b y in (0)..(3), y^2 * (1/3) := by\n  have h0 : (0 : \u211d) \u2208 Set.Icc (0 : \u211d) 3 := by\n    exact \u27e8by norm_num, by norm_num\u27e9\n  \n  have h1 : (1 : \u211d) \u2208 Set.Icc (0 : \u211d) 3 := by\n    exact \u27e8by norm_num, by norm_num\u27e9\n  \n  have h2 : \u222b (x : \u211d), x * (1 / 3 : \u211d) = (0 : \u211d) := by\n    have h2\u2081 : \u222b (x : \u211d), x * (1 / 3 : \u211d) = (0 : \u211d) ^ 2 := by\n      have h2\u2082 := h_cond_exp 0 h0\n      norm_num at h2\u2082 \u22a2\n      <;>\n      (try simp_all) <;>\n      (try norm_num) <;>\n      (try linarith) <;>\n      (try ring_nf at *) <;>\n      (try simp_all [mul_comm]) <;>\n      (try norm_num) <;>\n      (try linarith)\n      <;>\n      (try assumption)\n      <;>\n      (try simp_all [Set.Icc, le_of_lt])\n      <;>\n      (try norm_num)\n      <;>\n      (try linarith)\n      <;>\n      (try ring_nf at *)\n      <;>\n      (try simp_all [mul_comm])\n      <;>\n      (try norm_num)\n      <;>\n      (try linarith)\n    have h2\u2083 : (0 : \u211d) ^ 2 = (0 : \u211d) := by norm_num\n    linarith\n  \n  have h3 : \u222b (x : \u211d), x * (1 / 3 : \u211d) = (1 : \u211d) := by\n    have h3\u2081 : \u222b (x : \u211d), x * (1 / 3 : \u211d) = (1 : \u211d) ^ 2 := by\n      have h3\u2082 := h_cond_exp 1 h1\n      norm_num at h3\u2082 \u22a2\n      <;>\n      (try simp_all) <;>\n      (try norm_num) <;>\n      (try linarith) <;>\n      (try ring_nf at *) <;>\n      (try simp_all [mul_comm]) <;>\n      (try norm_num) <;>\n      (try linarith)\n      <;>\n      (try assumption)\n      <;>\n      (try simp_all [Set.Icc, le_of_lt])\n      <;>\n      (try norm_num)\n      <;>\n      (try linarith)\n      <;>\n      (try ring_nf at *)\n      <;>\n      (try simp_all [mul_comm])\n      <;>\n      (try norm_num)\n      <;>\n      (try linarith)\n    have h3\u2083 : (1 : \u211d) ^ 2 = (1 : \u211d) := by norm_num\n    linarith\n  \n  have h4 : False := by\n    have h4\u2081 : \u222b (x : \u211d), x * (1 / 3 : \u211d) = (0 : \u211d) := h2\n    have h4\u2082 : \u222b (x : \u211d), x * (1 / 3 : \u211d) = (1 : \u211d) := h3\n    have h4\u2083 : (0 : \u211d) = (1 : \u211d) := by linarith\n    norm_num at h4\u2083\n    <;> linarith\n  \n  have h5 : \u222b y in (0)..(3), y^2 * (1/3) = \u222b y in (0)..(3), y^2 * (1/3) := by\n    exfalso\n    exact h4\n  \n  exact h5", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["X and Y are not properly declared as random variables in the Lean formalization. They appear to be treated as real numbers rather than random variables.", "The conditional expectation formalization is incorrect. The expression '\u222b x, x * (1/3) = y^2' doesn't represent E[X|Y] and the integral doesn't depend on y as it should.", "The conditional variance Var(X|Y) = 2 is completely missing from the Lean formalization.", "The uniform distribution assumption is not properly captured. The hypothesis only states that 1/3 > 0, which doesn't establish that Y follows a uniform distribution on [0,3].", "The law of total expectation is formalized as a tautology (A = A) rather than expressing the meaningful relationship E[X] = E[E[X|Y]]. The conclusion should compute E[X] using the law of total expectation, not state an identity."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['X and Y are not properly declared as random variables in the Lean formalization. They appear to be treated as real numbers rather than random variables.', \"The conditional expectation formalization is incorrect. The expression '\u222b x, x * (1/3) = y^2' doesn't represent E[X|Y] and the integral doesn't depend on y as it should.\", 'The conditional variance Var(X|Y) = 2 is completely missing from the Lean formalization.', \"The uniform distribution assumption is not properly captured. The hypothesis only states that 1/3 > 0, which doesn't establish that Y follows a uniform distribution on [0,3].\", 'The law of total expectation is formalized as a tautology (A = A) rather than expressing the meaningful relationship E[X] = E[E[X|Y]]. The conclusion should compute E[X] using the law of total expectation, not state an identity.']"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Since $Y$ is uniformly distributed on $[0, 3]$, its probability density function is $f_Y(y) = \\frac{1}{3}$ for $y \\in [0, 3]$.", "statement": "We assume:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4];\n\u2022 The law of total expectation states E[X] = E[E[X|Y]] [l1].\nTherefore, we conclude:\n\u2022 The probability density function of Y, f_Y(y), is 1/3 for y in [0, 3] [l2].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 \n  -- Given: X and Y are random variables\n  (X Y : \u211d \u2192 \u211d)\n  -- Given: E[X|Y] = Y\u00b2 for Y \u2208 [0,3]\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  -- Given: Var(X|Y) = 2 for Y \u2208 [0,3]\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  -- Given: Y follows continuous uniform distribution on [0,3]\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  -- Given: Law of total expectation: E[X] = E[E[X|Y]]\n  (h_law_total : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  -- Conclusion: The probability density function of Y is 1/3 on [0,3]\n  : \u2203 (f_Y : \u211d \u2192 \u211d), \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 f_Y y = 1/3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 \n  (X Y : \u211d \u2192 \u211d)\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  (h_law_total : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  : \u2203 (f_Y : \u211d \u2192 \u211d), \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 f_Y y = 1/3 := by\n  have h_main : \u2203 (f_Y : \u211d \u2192 \u211d), \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 f_Y y = 1/3 := by\n    use fun _ => 1 / 3\n    intro y hy\n    <;> simp [hy]\n    <;> norm_num\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Random variables are represented as functions \u211d \u2192 \u211d, which is acceptable though not the most precise probabilistic formulation", "The conditional expectation hypothesis only states existence of a value equal to y\u00b2, but fails to establish that this value IS the conditional expectation E[X|Y]", "The conditional variance hypothesis only states existence of a value equal to 2, but doesn't establish that this IS the conditional variance Var(X|Y)", "The uniform distribution hypothesis only states existence of a function equal to 1/3, but doesn't establish that Y actually follows a uniform distribution or that this function is its PDF", "The law of total expectation is incorrectly formalized - it assumes the conclusion (PDF = 1/3) in the premise and doesn't properly state E[X] = E[E[X|Y]]", "The conclusion correctly captures that we want to prove the PDF of Y equals 1/3 on the interval [0,3]"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Random variables are represented as functions \u211d \u2192 \u211d, which is acceptable though not the most precise probabilistic formulation', 'The conditional expectation hypothesis only states existence of a value equal to y\u00b2, but fails to establish that this value IS the conditional expectation E[X|Y]', \"The conditional variance hypothesis only states existence of a value equal to 2, but doesn't establish that this IS the conditional variance Var(X|Y)\", \"The uniform distribution hypothesis only states existence of a function equal to 1/3, but doesn't establish that Y actually follows a uniform distribution or that this function is its PDF\", \"The law of total expectation is incorrectly formalized - it assumes the conclusion (PDF = 1/3) in the premise and doesn't properly state E[X] = E[E[X|Y]]\", 'The conclusion correctly captures that we want to prove the PDF of Y equals 1/3 on the interval [0,3]']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "This allows us to compute the second moment of $Y$: $E[Y^2] = \\int_{0}^{3} y^2 (\\frac{1}{3}) dy = 3$.", "statement": "We assume:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4];\n\u2022 The law of total expectation states E[X] = E[E[X|Y]] [l1];\n\u2022 The probability density function of Y, f_Y(y), is 1/3 for y in [0, 3] [l2].\nTherefore, we conclude:\n\u2022 The second moment of Y is E[Y^2] = 3 [l3].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 \n  -- Given: X and Y are random variables with specific conditional properties\n  (X Y : \u2115 \u2192 \u211d)\n  -- Given: Conditional expectation E[X|Y] = Y\u00b2 for Y \u2208 [0,3]\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \n    \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  -- Given: Conditional variance Var(X|Y) = 2 for Y \u2208 [0,3]\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \n    \u2203 (cond_var : \u211d), cond_var = 2)\n  -- Given: Y follows continuous uniform distribution on [0,3]\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \n    \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  -- Given: Law of total expectation holds: E[X] = E[E[X|Y]]\n  (h_law_total : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  -- Given: Probability density function of Y is 1/3 on [0,3]\n  (h_pmf : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 (1/3 : \u211d) > 0)\n  -- Conclusion: The second moment of Y is E[Y\u00b2] = 3\n  : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 \n  (X Y : \u2115 \u2192 \u211d)\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \n    \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \n    \u2203 (cond_var : \u211d), cond_var = 2)\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \n    \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  (h_law_total : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  (h_pmf : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 (1/3 : \u211d) > 0)\n  : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3 := by\n  have h_main : \u222b y in (0)..(3), (y:\u211d)^2 * (1/3 : \u211d) = 3 := by\n    -- Use the fundamental theorem of calculus to compute the integral\n    norm_num [mul_comm]\n    <;>\n    (try ring_nf) <;>\n    (try norm_num) <;>\n    (try\n      {\n        -- Use the power rule for integration\n        norm_num [integral_pow]\n        <;>\n        ring_nf\n        <;>\n        norm_num\n      }) <;>\n    (try\n      {\n        -- Use the fundamental theorem of calculus to evaluate the integral\n        simp [mul_comm]\n        <;>\n        norm_num [integral_id]\n        <;>\n        ring_nf\n        <;>\n        norm_num\n      })\n    <;>\n    (try\n      {\n        -- Use the fundamental theorem of calculus to evaluate the integral\n        norm_num [integral_pow]\n        <;>\n        ring_nf\n        <;>\n        norm_num\n      })\n    <;>\n    (try\n      {\n        -- Use the fundamental theorem of calculus to evaluate the integral\n        simp [mul_comm]\n        <;>\n        norm_num [integral_id]\n        <;>\n        ring_nf\n        <;>\n        norm_num\n      })\n  \n  -- Use the previously computed integral to conclude the proof\n  have h_final : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3 := by\n    simpa using h_main\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Random variables X and Y are correctly declared as functions from \u2115 to \u211d, which is a standard representation in Lean", "Conditional expectation is captured but uses existential quantification instead of direct equality, making it structurally different from the natural language statement", "Conditional variance is similarly captured with existential quantification rather than direct specification", "Uniform distribution is represented through PDF values but uses existential quantification instead of direct definition", "Law of total expectation is represented as an existence claim rather than a direct equality, though the integral formulation is mathematically correct", "The PDF specification only states positivity (1/3 > 0) rather than actually defining the PDF value as 1/3, missing the key definitional aspect", "The conclusion correctly formalizes E[Y\u00b2] = 3 as an integral equation"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Random variables X and Y are correctly declared as functions from \u2115 to \u211d, which is a standard representation in Lean', 'Conditional expectation is captured but uses existential quantification instead of direct equality, making it structurally different from the natural language statement', 'Conditional variance is similarly captured with existential quantification rather than direct specification', 'Uniform distribution is represented through PDF values but uses existential quantification instead of direct definition', 'Law of total expectation is represented as an existence claim rather than a direct equality, though the integral formulation is mathematically correct', 'The PDF specification only states positivity (1/3 > 0) rather than actually defining the PDF value as 1/3, missing the key definitional aspect', 'The conclusion correctly formalizes E[Y\u00b2] = 3 as an integral equation']"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Substituting the given condition $E[X|Y] = Y^2$ into the law of total expectation gives $E[X] = E[Y^2]$.", "statement": "We assume:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4];\n\u2022 The law of total expectation states E[X] = E[E[X|Y]] [l1];\n\u2022 The probability density function of Y, f_Y(y), is 1/3 for y in [0, 3] [l2];\n\u2022 The second moment of Y is E[Y^2] = 3 [l3].\nTherefore, we conclude:\n\u2022 E[X] = E[Y^2] [l4].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 \n  -- Given: X and Y are random variables\n  (X Y : \u2115 \u2192 \u211d)\n  -- Given: E[X|Y] = Y\u00b2 for Y \u2208 [0,3]\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  -- Given: Var(X|Y) = 2 for Y \u2208 [0,3]\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  -- Given: Y follows continuous uniform distribution on [0,3]\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  -- Given: Law of total expectation: E[X] = E[E[X|Y]]\n  (h_law_total : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  -- Given: E[Y\u00b2] = 3\n  (h_EY2 : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3)\n  -- Conclusion: E[X] = E[Y\u00b2]\n  : \u2203 (E_X : \u211d), E_X = 3 \u2227 \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 \n  (X Y : \u2115 \u2192 \u211d)\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  (h_law_total : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  (h_EY2 : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3)\n  : \u2203 (E_X : \u211d), E_X = 3 \u2227 \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3 := by\n  have h_main : \u2203 (E_X : \u211d), E_X = 3 \u2227 \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3 := by\n    refine' \u27e83, by norm_num, _\u27e9\n    -- Use the given hypothesis h_EY2 to directly conclude that the integral equals 3.\n    exact h_EY2\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Random variables are represented as functions \u2115 \u2192 \u211d which is a reasonable simplification of the concept", "The conditional expectation E[X|Y] = Y\u00b2 is not properly formalized - it only states existence of some conditional expectation equal to y\u00b2 rather than establishing the equality E[X|Y] = Y\u00b2", "The conditional variance Var(X|Y) = 2 is not properly formalized - it only states existence of some conditional variance equal to 2 rather than establishing Var(X|Y) = 2", "The uniform distribution is partially captured through the PDF value but doesn't fully represent the distributional assumption", "The law of total expectation is represented through a specific integral rather than the general principle E[X] = E[E[X|Y]]", "The PDF property f_Y(y) = 1/3 is embedded in h_uniform but not stated as a clear standalone property", "E[Y\u00b2] = 3 is correctly represented as the integral equation", "The conclusion E[X] = E[Y\u00b2] is represented as proving E[X] = 3 and the integral = 3, which captures the essence but not the exact form"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Random variables are represented as functions \u2115 \u2192 \u211d which is a reasonable simplification of the concept', 'The conditional expectation E[X|Y] = Y\u00b2 is not properly formalized - it only states existence of some conditional expectation equal to y\u00b2 rather than establishing the equality E[X|Y] = Y\u00b2', 'The conditional variance Var(X|Y) = 2 is not properly formalized - it only states existence of some conditional variance equal to 2 rather than establishing Var(X|Y) = 2', \"The uniform distribution is partially captured through the PDF value but doesn't fully represent the distributional assumption\", 'The law of total expectation is represented through a specific integral rather than the general principle E[X] = E[E[X|Y]]', 'The PDF property f_Y(y) = 1/3 is embedded in h_uniform but not stated as a clear standalone property', 'E[Y\u00b2] = 3 is correctly represented as the integral equation', 'The conclusion E[X] = E[Y\u00b2] is represented as proving E[X] = 3 and the integral = 3, which captures the essence but not the exact form']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Since we found $E[Y^2] = 3$, it follows that $E[X] = 3$.", "statement": "We assume:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4];\n\u2022 The law of total expectation states E[X] = E[E[X|Y]] [l1];\n\u2022 The probability density function of Y, f_Y(y), is 1/3 for y in [0, 3] [l2];\n\u2022 The second moment of Y is E[Y^2] = 3 [l3];\n\u2022 E[X] = E[Y^2] [l4].\nTherefore, we conclude:\n\u2022 E[X] = 3 [ts_1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 \n  -- Given: X and Y are random variables\n  (X Y : \u211d \u2192 \u211d)\n  -- Given: Conditional expectation E[X|Y] = Y\u00b2 for Y \u2208 [0,3]\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  -- Given: Conditional variance Var(X|Y) = 2 for Y \u2208 [0,3]\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  -- Given: Y follows continuous uniform distribution on [0,3]\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  -- Given: Law of total expectation: E[X] = E[E[X|Y]]\n  (h_law_total : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  -- Given: E[Y\u00b2] = 3\n  (h_EY2 : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3)\n  -- Given: E[X] = E[Y\u00b2]\n  (h_EX_eq_EY2 : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  -- Conclusion: E[X] = 3\n  : \u2203 (E_X : \u211d), E_X = 3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 \n  (X Y : \u211d \u2192 \u211d)\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  (h_law_total : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  (h_EY2 : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3)\n  (h_EX_eq_EY2 : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  : \u2203 (E_X : \u211d), E_X = 3 := by\n  have h_main : \u2203 (E_X : \u211d), E_X = 3 := by\n    -- Use the law of total expectation to get E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d)\n    obtain \u27e8E_X, hE_X\u27e9 := h_law_total\n    -- Use the given value of the integral to show E_X = 3\n    have hE_X_eq_3 : E_X = 3 := by\n      calc\n        E_X = \u222b y in (0)..(3), y ^ 2 * (1 / 3 : \u211d) := by rw [hE_X]\n        _ = 3 := by rw [h_EY2]\n    -- Conclude that there exists an E_X such that E_X = 3\n    exact \u27e8E_X, hE_X_eq_3\u27e9\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.56, "semantic_feedback": ["Random variables represented as functions \u211d \u2192 \u211d rather than formal probability theory, but captures the essential concept", "Conditional expectation uses existential quantifier rather than direct equality, and lacks formal connection to E[X|Y]", "Conditional variance similarly uses existential quantifier and lacks formal connection to Var(X|Y)", "Uniform distribution property captured through PDF function existence rather than formal distribution, but mathematically equivalent", "Law of total expectation correctly formalized as integral representing E[E[X|Y]]", "PDF property correctly captured in the uniform distribution hypothesis", "Second moment E[Y\u00b2] = 3 correctly formalized as the integral equation", "Equality E[X] = E[Y\u00b2] correctly represented through the integral formulation", "Conclusion E[X] = 3 properly formalized as the goal to prove"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.56, below threshold 0.6.\nScorer feedback: ['Random variables represented as functions \u211d \u2192 \u211d rather than formal probability theory, but captures the essential concept', 'Conditional expectation uses existential quantifier rather than direct equality, and lacks formal connection to E[X|Y]', 'Conditional variance similarly uses existential quantifier and lacks formal connection to Var(X|Y)', 'Uniform distribution property captured through PDF function existence rather than formal distribution, but mathematically equivalent', 'Law of total expectation correctly formalized as integral representing E[E[X|Y]]', 'PDF property correctly captured in the uniform distribution hypothesis', 'Second moment E[Y\u00b2] = 3 correctly formalized as the integral equation', 'Equality E[X] = E[Y\u00b2] correctly represented through the integral formulation', 'Conclusion E[X] = 3 properly formalized as the goal to prove']"}, "solved_negation": null, "type": "solution"}, "l5": {"id": "l5", "natural_language": "To find the variance of $X$, we use the law of total variance: $\\text{Var}(X) = E[\\text{Var}(X|Y)] + \\text{Var}(E[X|Y])$.", "statement": "We assume:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4];\n\u2022 The law of total expectation states E[X] = E[E[X|Y]] [l1];\n\u2022 The probability density function of Y, f_Y(y), is 1/3 for y in [0, 3] [l2];\n\u2022 The second moment of Y is E[Y^2] = 3 [l3];\n\u2022 E[X] = E[Y^2] [l4];\n\u2022 E[X] = 3 [ts_1].\nTherefore, we conclude:\n\u2022 The law of total variance states Var(X) = E[Var(X|Y)] + Var(E[X|Y]) [l5].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 \n  -- Given: X and Y are random variables\n  (X Y : \u211d \u2192 \u211d)\n  -- Given: Conditional expectation E[X|Y] = Y\u00b2 for Y \u2208 [0,3]\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  -- Given: Conditional variance Var(X|Y) = 2 for Y \u2208 [0,3]\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  -- Given: Y follows continuous uniform distribution on [0,3]\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  -- Given: Law of total expectation: E[X] = E[E[X|Y]] = 3\n  (h_law_total : \u2203 (E_X : \u211d), E_X = 3)\n  -- Given: E[X|Y] = Y\u00b2 and Y ~ Uniform[0,3], so E[X] = E[Y\u00b2] = 3\n  (h_EX_eq_EY2 : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  -- Given: E[Y\u00b2] = 3 and E[X] = E[Y\u00b2] = 3\n  (h_EY2 : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3)\n  -- Given: E[Y\u2074] = 16.2 (fourth moment of Uniform[0,3])\n  (h_EY4 : \u222b y in (0)..(3), y^4 * (1/3 : \u211d) = 16.2)\n  -- Conclusion: The law of total variance states Var(X) = E[Var(X|Y)] + Var(E[X|Y])\n  : \u2203 (Var_X : \u211d), Var_X = (\u222b y in (0)..(3), (2 : \u211d) * (1/3 : \u211d)) + \n    ((\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 \n  (X Y : \u211d \u2192 \u211d)\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  (h_law_total : \u2203 (E_X : \u211d), E_X = 3)\n  (h_EX_eq_EY2 : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  (h_EY2 : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3)\n  (h_EY4 : \u222b y in (0)..(3), y^4 * (1/3 : \u211d) = 16.2)\n  : \u2203 (Var_X : \u211d), Var_X = (\u222b y in (0)..(3), (2 : \u211d) * (1/3 : \u211d)) + \n    ((\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2) := by\n  have h_main : \u2203 (Var_X : \u211d), Var_X = (\u222b y in (0)..(3), (2 : \u211d) * (1/3 : \u211d)) + ((\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2) := by\n    refine' \u27e8(\u222b y in (0)..(3), (2 : \u211d) * (1/3 : \u211d)) + ((\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2), _\u27e9\n    <;> rfl\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Random variables X and Y are declared as functions \u211d \u2192 \u211d in Lean, which is a reasonable formalization though not explicitly typed in natural language", "Conditional expectation E[X|Y] = Y\u00b2 is correctly captured with the existential quantification over the domain [0,3]", "Conditional variance Var(X|Y) = 2 is properly formalized with existential quantification matching the structure of the conditional expectation", "Uniform distribution on [0,3] with density 1/3 is correctly represented using existential quantification for the density function", "Law of total expectation E[X] = E[E[X|Y]] is stated in natural language but only E[X] = 3 is formalized in Lean, missing the explicit equality E[X] = E[E[X|Y]]", "PDF f_Y(y) = 1/3 for y \u2208 [0,3] is implicitly captured in the uniform distribution hypothesis", "E[Y\u00b2] = 3 is correctly formalized as an integral equation", "E[X] = E[Y\u00b2] is stated in natural language but not explicitly formalized in Lean as a separate hypothesis", "E[X] = 3 is properly captured in the law of total expectation hypothesis", "The conclusion about law of total variance has a major error: it uses E[Y\u2074] instead of E[(Y\u00b2)\u00b2] = E[Y\u2074] for Var(E[X|Y]) = Var(Y\u00b2), and the natural language doesn't mention E[Y\u2074] = 16.2 which appears in the Lean formalization"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Random variables X and Y are declared as functions \u211d \u2192 \u211d in Lean, which is a reasonable formalization though not explicitly typed in natural language', 'Conditional expectation E[X|Y] = Y\u00b2 is correctly captured with the existential quantification over the domain [0,3]', 'Conditional variance Var(X|Y) = 2 is properly formalized with existential quantification matching the structure of the conditional expectation', 'Uniform distribution on [0,3] with density 1/3 is correctly represented using existential quantification for the density function', 'Law of total expectation E[X] = E[E[X|Y]] is stated in natural language but only E[X] = 3 is formalized in Lean, missing the explicit equality E[X] = E[E[X|Y]]', 'PDF f_Y(y) = 1/3 for y \u2208 [0,3] is implicitly captured in the uniform distribution hypothesis', 'E[Y\u00b2] = 3 is correctly formalized as an integral equation', 'E[X] = E[Y\u00b2] is stated in natural language but not explicitly formalized in Lean as a separate hypothesis', 'E[X] = 3 is properly captured in the law of total expectation hypothesis', \"The conclusion about law of total variance has a major error: it uses E[Y\u2074] instead of E[(Y\u00b2)\u00b2] = E[Y\u2074] for Var(E[X|Y]) = Var(Y\u00b2), and the natural language doesn't mention E[Y\u2074] = 16.2 which appears in the Lean formalization\"]"}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "From the condition $\\text{Var}(X|Y) = 2$, the first term is $E[\\text{Var}(X|Y)] = E[2] = 2$.", "statement": "We assume:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4];\n\u2022 The law of total expectation states E[X] = E[E[X|Y]] [l1];\n\u2022 The probability density function of Y, f_Y(y), is 1/3 for y in [0, 3] [l2];\n\u2022 The second moment of Y is E[Y^2] = 3 [l3];\n\u2022 E[X] = E[Y^2] [l4];\n\u2022 E[X] = 3 [ts_1];\n\u2022 The law of total variance states Var(X) = E[Var(X|Y)] + Var(E[X|Y]) [l5].\nTherefore, we conclude:\n\u2022 The first term of the law of total variance is E[Var(X|Y)] = 2 [l6].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4", "ts_1", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 \n  -- Given: For Y \u2208 [0,3], the conditional variance Var(X|Y) = 2\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  -- Conclusion: The first term E[Var(X|Y)] = 2\n  : \u222b y in (0)..(3), (2 : \u211d) * (1/3 : \u211d) = 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 \n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  : \u222b y in (0)..(3), (2 : \u211d) * (1/3 : \u211d) = 2 := by\n  have h\u2081 : \u222b y in (0)..(3 : \u211d), (2 : \u211d) * (1/3 : \u211d) = (2 : \u211d) * (1/3 : \u211d) * (3 - 0 : \u211d) := by\n    -- Use the property of the integral of a constant function\n    simp [intervalIntegral.integral_const, mul_comm]\n    <;> ring_nf\n    <;> norm_num\n    <;> field_simp\n    <;> ring_nf\n  \n  have h\u2082 : (2 : \u211d) * (1/3 : \u211d) * (3 - 0 : \u211d) = 2 := by\n    norm_num at h\u2081 \u22a2\n    <;>\n    (try ring_nf at h\u2081 \u22a2) <;>\n    (try norm_num at h\u2081 \u22a2) <;>\n    (try linarith) <;>\n    (try nlinarith)\n  \n  have h\u2083 : \u222b y in (0)..(3 : \u211d), (2 : \u211d) * (1/3 : \u211d) = 2 := by\n    rw [h\u2081]\n    rw [h\u2082]\n  \n  -- The original goal uses the notation (0)..(3) without specifying the type, but Lean can infer it as \u211d.\n  -- We need to make sure that the notation is consistent with the type \u211d.\n  simpa using h\u2083", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical meaning. The hypothesis properly establishes that the conditional variance Var(X|Y) = 2 for all y in [0,3], and the conclusion correctly represents the computation of E[Var(X|Y)] as an integral \u222b\u2080\u00b3 2\u00b7(1/3) dy = 2. The translation from probabilistic expectation notation to integral form is mathematically sound and appropriate for formal verification."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "For the second term, we require the fourth moment of $Y$, which is $E[Y^4] = \\int_{0}^{3} y^4 (\\frac{1}{3}) dy = 16.2$.", "statement": "We assume:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4];\n\u2022 The law of total expectation states E[X] = E[E[X|Y]] [l1];\n\u2022 The probability density function of Y, f_Y(y), is 1/3 for y in [0, 3] [l2];\n\u2022 The second moment of Y is E[Y^2] = 3 [l3];\n\u2022 E[X] = E[Y^2] [l4];\n\u2022 E[X] = 3 [ts_1];\n\u2022 The law of total variance states Var(X) = E[Var(X|Y)] + Var(E[X|Y]) [l5];\n\u2022 The first term of the law of total variance is E[Var(X|Y)] = 2 [l6].\nTherefore, we conclude:\n\u2022 The fourth moment of Y is E[Y^4] = 16.2 [l7].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4", "ts_1", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l7 : \u222b y in (0)..(3), y^4 * (1/3 : \u211d) = 16.2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l7 : \u222b y in (0)..(3), y^4 * (1/3 : \u211d) = 16.2 := by\n  have h\u2080 : \u222b y in (0)..(3), (y : \u211d)^4 * (1 / 3 : \u211d) = (3 : \u211d)^5 / 15 := by\n    have h\u2081 : \u222b y in (0)..(3), (y : \u211d)^4 * (1 / 3 : \u211d) = (1 / 3 : \u211d) * \u222b y in (0)..(3), (y : \u211d)^4 := by\n      -- Factor out the constant (1/3) from the integral\n      simp [intervalIntegral.integral_comp_mul_left (fun y => y ^ 4)]\n      <;> ring_nf\n      <;> field_simp\n      <;> ring_nf\n      <;> norm_num\n      <;> linarith\n    rw [h\u2081]\n    -- Compute the integral of y^4 from 0 to 3\n    have h\u2082 : \u222b y in (0)..(3), (y : \u211d)^4 = (3 : \u211d)^5 / 5 := by\n      norm_num [integral_pow]\n      <;>\n      simp [mul_comm]\n      <;>\n      norm_num\n      <;>\n      ring_nf\n      <;>\n      norm_num\n      <;>\n      linarith\n    rw [h\u2082]\n    -- Simplify the expression to get the final result\n    <;> norm_num\n    <;> ring_nf\n    <;> norm_num\n    <;> linarith\n  \n  have h\u2081 : (3 : \u211d)^5 / 15 = (16.2 : \u211d) := by\n    norm_num [pow_succ]\n    <;>\n    simp_all [div_eq_mul_inv]\n    <;>\n    norm_num\n    <;>\n    linarith\n  \n  have h\u2082 : \u222b y in (0)..(3), y^4 * (1/3 : \u211d) = 16.2 := by\n    have h\u2083 : \u222b y in (0)..(3), (y : \u211d)^4 * (1 / 3 : \u211d) = (3 : \u211d)^5 / 15 := h\u2080\n    have h\u2084 : (3 : \u211d)^5 / 15 = (16.2 : \u211d) := h\u2081\n    have h\u2085 : \u222b y in (0)..(3), (y : \u211d)^4 * (1 / 3 : \u211d) = (16.2 : \u211d) := by\n      rw [h\u2083, h\u2084]\n    -- Since the integrand is the same, we can directly use the result from h\u2085\n    have h\u2086 : \u222b y in (0)..(3), y^4 * (1/3 : \u211d) = \u222b y in (0)..(3), (y : \u211d)^4 * (1 / 3 : \u211d) := by\n      simp [mul_comm]\n      <;>\n      norm_num\n      <;>\n      ring_nf\n      <;>\n      simp_all [intervalIntegral.integral_comp_mul_left]\n      <;>\n      norm_num\n      <;>\n      linarith\n    rw [h\u2086]\n    exact h\u2085\n  \n  exact h\u2082", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the essential mathematical content of the conclusion. While it doesn't explicitly represent all the intermediate steps and assumptions mentioned in the natural language (such as the conditional expectations, law of total variance, etc.), it directly formalizes the key conclusion [l7] that E[Y^4] = 16.2. The integral representation \u222b y in (0)..(3), y^4 * (1/3 : \u211d) is mathematically equivalent to the fourth moment E[Y^4] for a uniform distribution on [0,3], making this a perfectly valid formalization of the stated conclusion."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "Using the variance definition for $E[X|Y] = Y^2$, we get $\\text{Var}(Y^2) = E[Y^4] - (E[Y^2])^2 = 16.2 - 3^2 = 7.2$.", "statement": "We assume:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4];\n\u2022 The law of total expectation states E[X] = E[E[X|Y]] [l1];\n\u2022 The probability density function of Y, f_Y(y), is 1/3 for y in [0, 3] [l2];\n\u2022 The second moment of Y is E[Y^2] = 3 [l3];\n\u2022 E[X] = E[Y^2] [l4];\n\u2022 E[X] = 3 [ts_1];\n\u2022 The law of total variance states Var(X) = E[Var(X|Y)] + Var(E[X|Y]) [l5];\n\u2022 The first term of the law of total variance is E[Var(X|Y)] = 2 [l6];\n\u2022 The fourth moment of Y is E[Y^4] = 16.2 [l7].\nTherefore, we conclude:\n\u2022 The second term of the law of total variance is Var(E[X|Y]) = 7.2 [l8].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4", "ts_1", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l8 \n  -- Given random variables X and Y\n  (X Y : \u211d \u2192 \u211d)\n  -- Given conditional expectation E[X|Y] = Y\u00b2 for Y \u2208 [0,3]\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  -- Given conditional variance Var(X|Y) = 2 for Y \u2208 [0,3]\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  -- Given Y follows continuous uniform distribution on [0,3]\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  -- Given E[X|Y] = Y\u00b2\n  (h_law_total : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  -- Given E[Y\u00b2] = 3\n  (h_EY2 : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3)\n  -- Given E[X] = E[Y\u00b2] = 3\n  (h_EX_eq_EY2 : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  -- Given E[Y\u2074] = 16.2\n  (h_EY4 : \u222b y in (0)..(3), y^4 * (1/3 : \u211d) = 16.2)\n  -- Given E[X] = 3\n  (h_EX : \u2203 (E_X : \u211d), E_X = 3)\n  -- Conclusion: The second term of the law of total variance is Var[E[X|Y]] = 7.2\n  : \u2203 (Var_E_X_given_Y : \u211d), \n    Var_E_X_given_Y = (\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2 \u2227\n    Var_E_X_given_Y = 7.2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l8 \n  (X Y : \u211d \u2192 \u211d)\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  (h_law_total : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  (h_EY2 : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3)\n  (h_EX_eq_EY2 : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  (h_EY4 : \u222b y in (0)..(3), y^4 * (1/3 : \u211d) = 16.2)\n  (h_EX : \u2203 (E_X : \u211d), E_X = 3)\n  : \u2203 (Var_E_X_given_Y : \u211d), \n    Var_E_X_given_Y = (\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2 \u2227\n    Var_E_X_given_Y = 7.2 := by\n  have h_main : (\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2 = 7.2 := by\n    have h1 : (\u222b y in (0)..(3), y^2 * (1/3 : \u211d)) = 3 := h_EY2\n    have h2 : (\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) = 16.2 := h_EY4\n    rw [h2, h1]\n    norm_num\n    <;>\n    simp_all [pow_two]\n    <;>\n    norm_num\n    <;>\n    linarith\n  \n  have h_final : \u2203 (Var_E_X_given_Y : \u211d), Var_E_X_given_Y = (\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2 \u2227 Var_E_X_given_Y = 7.2 := by\n    refine' \u27e87.2, _\u27e9\n    constructor\n    \u00b7 -- Prove that 7.2 = (\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2\n      have h\u2081 : (\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2 = 7.2 := h_main\n      linarith\n    \u00b7 -- Prove that 7.2 = 7.2\n      norm_num\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization declares X and Y as functions \u211d \u2192 \u211d, but there's no proper probability space or measure theory setup. Random variables should be measurable functions from a probability space to \u211d, not arbitrary functions \u211d \u2192 \u211d.", "The conditional expectation is formalized as h_cond_exp which only states existence of some value equal to y\u00b2, but doesn't properly capture that E[X|Y] = Y\u00b2. The natural language states this as a functional relationship, but the Lean version is just an existence statement without connecting it to actual conditional expectation.", "Similar to conditional expectation, h_cond_var only states existence of a value equal to 2, but doesn't properly formalize that Var(X|Y) = 2. It lacks the connection to actual conditional variance.", "The uniform distribution is represented as existence of a density function f with f(y) = 1/3, which captures the essence but is not the standard measure-theoretic formalization of uniform distributions in Lean/Mathlib.", "The laws of total expectation and variance are not properly formalized. Instead, there are various integral expressions that approximate the calculations, but the fundamental probabilistic laws E[X] = E[E[X|Y]] and Var(X) = E[Var(X|Y)] + Var(E[X|Y]) are missing.", "The conclusion correctly captures that Var(E[X|Y]) should equal the variance of Y\u00b2 (since E[X|Y] = Y\u00b2), which is E[Y\u2074] - (E[Y\u00b2])\u00b2 = 16.2 - 3\u00b2 = 7.2. The mathematical formula in the conclusion is correct."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean formalization declares X and Y as functions \u211d \u2192 \u211d, but there's no proper probability space or measure theory setup. Random variables should be measurable functions from a probability space to \u211d, not arbitrary functions \u211d \u2192 \u211d.\", \"The conditional expectation is formalized as h_cond_exp which only states existence of some value equal to y\u00b2, but doesn't properly capture that E[X|Y] = Y\u00b2. The natural language states this as a functional relationship, but the Lean version is just an existence statement without connecting it to actual conditional expectation.\", \"Similar to conditional expectation, h_cond_var only states existence of a value equal to 2, but doesn't properly formalize that Var(X|Y) = 2. It lacks the connection to actual conditional variance.\", 'The uniform distribution is represented as existence of a density function f with f(y) = 1/3, which captures the essence but is not the standard measure-theoretic formalization of uniform distributions in Lean/Mathlib.', 'The laws of total expectation and variance are not properly formalized. Instead, there are various integral expressions that approximate the calculations, but the fundamental probabilistic laws E[X] = E[E[X|Y]] and Var(X) = E[Var(X|Y)] + Var(E[X|Y]) are missing.', 'The conclusion correctly captures that Var(E[X|Y]) should equal the variance of Y\u00b2 (since E[X|Y] = Y\u00b2), which is E[Y\u2074] - (E[Y\u00b2])\u00b2 = 16.2 - 3\u00b2 = 7.2. The mathematical formula in the conclusion is correct.']"}, "solved_negation": null, "type": "lemma"}, "ts_2": {"id": "ts_2", "natural_language": "Finally, substituting the two components into the law of total variance yields $\\text{Var}(X) = 2 + 7.2 = 9.2$.", "statement": "We assume:\n\u2022 X and Y are random variables [tc_1];\n\u2022 The conditional expectation of X given Y is E[X|Y] = Y^2 [tc_2];\n\u2022 The conditional variance of X given Y is Var(X|Y) = 2 [tc_3];\n\u2022 Y is a random variable following a continuous uniform distribution on the interval [0, 3] [tc_4];\n\u2022 The law of total expectation states E[X] = E[E[X|Y]] [l1];\n\u2022 The probability density function of Y, f_Y(y), is 1/3 for y in [0, 3] [l2];\n\u2022 The second moment of Y is E[Y^2] = 3 [l3];\n\u2022 E[X] = E[Y^2] [l4];\n\u2022 E[X] = 3 [ts_1];\n\u2022 The law of total variance states Var(X) = E[Var(X|Y)] + Var(E[X|Y]) [l5];\n\u2022 The first term of the law of total variance is E[Var(X|Y)] = 2 [l6];\n\u2022 The fourth moment of Y is E[Y^4] = 16.2 [l7];\n\u2022 The second term of the law of total variance is Var(E[X|Y]) = 7.2 [l8].\nTherefore, we conclude:\n\u2022 Var(X) = 9.2 [ts_2].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4", "ts_1", "l5", "l6", "l7", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2\n  -- Given: X and Y are random variables\n  (X Y : \u211d \u2192 \u211d)\n  -- Given: Conditional expectation E[X|Y] = Y\u00b2 for Y \u2208 [0,3]\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  -- Given: Conditional variance Var(X|Y) = 2 for Y \u2208 [0,3]\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  -- Given: Y follows continuous uniform distribution on [0,3]\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  -- Given: Law of total expectation: E[X] = E[E[X|Y]] = 3\n  (h_law_total_exp : \u2203 (E_X : \u211d), E_X = 3)\n  -- Given: E[X|Y] = Y\u00b2 and Y ~ Uniform[0,3], so E[X] = E[Y\u00b2] = 3\n  (h_EX_eq_EY2 : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  -- Given: E[Y\u00b2] = 3\n  (h_EY2 : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3)\n  -- Given: E[Y\u2074] = 16.2 (fourth moment of Uniform[0,3])\n  (h_EY4 : \u222b y in (0)..(3), y^4 * (1/3 : \u211d) = 16.2)\n  -- Given: Law of total variance: Var(X) = E[Var(X|Y)] + Var[E[X|Y]]\n  (h_law_total_var : \u2203 (Var_X : \u211d), \n    Var_X = (\u222b y in (0)..(3), (2 : \u211d) * (1/3 : \u211d)) + \n            ((\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2))\n  : \u2203 (Var_X : \u211d), Var_X = 9.2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2\n  (X Y : \u211d \u2192 \u211d)\n  (h_cond_exp : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_exp : \u211d), cond_exp = y^2)\n  (h_cond_var : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (cond_var : \u211d), cond_var = 2)\n  (h_uniform : \u2200 y : \u211d, y \u2208 Set.Icc 0 3 \u2192 \u2203 (f : \u211d \u2192 \u211d), f y = 1/3)\n  (h_law_total_exp : \u2203 (E_X : \u211d), E_X = 3)\n  (h_EX_eq_EY2 : \u2203 (E_X : \u211d), E_X = \u222b y in (0)..(3), y^2 * (1/3 : \u211d))\n  (h_EY2 : \u222b y in (0)..(3), y^2 * (1/3 : \u211d) = 3)\n  (h_EY4 : \u222b y in (0)..(3), y^4 * (1/3 : \u211d) = 16.2)\n  (h_law_total_var : \u2203 (Var_X : \u211d), \n    Var_X = (\u222b y in (0)..(3), (2 : \u211d) * (1/3 : \u211d)) + \n            ((\u222b y in (0)..(3), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3), y^2 * (1/3 : \u211d))^2))\n  : \u2203 (Var_X : \u211d), Var_X = 9.2 := by\n  have h_integral_const : (\u222b y in (0)..(3 : \u211d), (2 : \u211d) * (1/3 : \u211d)) = 2 := by\n    norm_num [intervalIntegral.integral_const]\n    <;>\n    ring_nf\n    <;>\n    norm_num\n  \n  have h_second_term : ((\u222b y in (0)..(3 : \u211d), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3 : \u211d), y^2 * (1/3 : \u211d))^2 : \u211d) = 7.2 := by\n    have h1 : (\u222b y in (0)..(3 : \u211d), y^4 * (1/3 : \u211d)) = (16.2 : \u211d) := by\n      rw [h_EY4]\n      <;> norm_num\n    have h2 : (\u222b y in (0)..(3 : \u211d), y^2 * (1/3 : \u211d)) = (3 : \u211d) := by\n      rw [h_EY2]\n      <;> norm_num\n    rw [h1, h2]\n    norm_num\n    <;>\n    ring_nf at *\n    <;>\n    norm_num at *\n    <;>\n    linarith\n  \n  have h_main : \u2203 (Var_X : \u211d), Var_X = 9.2 := by\n    obtain \u27e8Var_X, hVar_X\u27e9 := h_law_total_var\n    have h\u2081 : Var_X = (\u222b y in (0)..(3 : \u211d), (2 : \u211d) * (1/3 : \u211d)) + ((\u222b y in (0)..(3 : \u211d), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3 : \u211d), y^2 * (1/3 : \u211d))^2) := by\n      exact hVar_X\n    have h\u2082 : Var_X = 9.2 := by\n      rw [h\u2081]\n      have h\u2083 : (\u222b y in (0)..(3 : \u211d), (2 : \u211d) * (1/3 : \u211d)) = 2 := h_integral_const\n      have h\u2084 : ((\u222b y in (0)..(3 : \u211d), y^4 * (1/3 : \u211d)) - (\u222b y in (0)..(3 : \u211d), y^2 * (1/3 : \u211d))^2 : \u211d) = 7.2 := h_second_term\n      rw [h\u2083, h\u2084]\n      norm_num\n    exact \u27e8Var_X, h\u2082\u27e9\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.36, "semantic_feedback": ["Random variables X and Y are declared as functions \u211d \u2192 \u211d rather than proper random variables on a probability space, but this is a reasonable simplification for the context.", "Conditional expectation E[X|Y] = Y\u00b2 is represented as an existence statement rather than a direct equality, which weakens the assertion but captures the essential meaning.", "Conditional variance Var(X|Y) = 2 is similarly represented as an existence statement rather than direct equality, maintaining semantic similarity with minor structural differences.", "Uniform distribution representation uses existence of density function rather than proper probability measure, but captures the key property that f_Y(y) = 1/3.", "Law of total expectation E[X] = E[E[X|Y]] is completely missing from the formalization. Only the conclusion E[X] = 3 is stated as an existence, losing the fundamental relationship.", "The probability density function f_Y(y) = 1/3 is correctly captured through the uniform distribution hypothesis.", "E[Y\u00b2] = 3 is perfectly represented as the integral \u222b y\u00b2 * (1/3) dy from 0 to 3 equals 3.", "The relationship E[X] = E[Y\u00b2] is missing from the formalization. While both E[X] = 3 and E[Y\u00b2] = 3 are present, their equality is not explicitly stated.", "E[X] = 3 is correctly captured through the existence statement in h_law_total_exp.", "The law of total variance Var(X) = E[Var(X|Y)] + Var(E[X|Y]) is missing as a general principle. Only the specific calculation appears in h_law_total_var.", "E[Var(X|Y)] = 2 is not explicitly stated in the formalization, though it can be derived from the integral \u222b 2 * (1/3) dy.", "E[Y\u2074] = 16.2 is perfectly represented as the integral \u222b y\u2074 * (1/3) dy from 0 to 3 equals 16.2.", "Var(E[X|Y]) = 7.2 is not explicitly stated, though the variance calculation appears in the total variance formula without the intermediate step.", "The conclusion Var(X) = 9.2 is correctly represented as the existence of Var_X = 9.2 in the theorem statement."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.36, below threshold 0.6.\nScorer feedback: ['Random variables X and Y are declared as functions \u211d \u2192 \u211d rather than proper random variables on a probability space, but this is a reasonable simplification for the context.', 'Conditional expectation E[X|Y] = Y\u00b2 is represented as an existence statement rather than a direct equality, which weakens the assertion but captures the essential meaning.', 'Conditional variance Var(X|Y) = 2 is similarly represented as an existence statement rather than direct equality, maintaining semantic similarity with minor structural differences.', 'Uniform distribution representation uses existence of density function rather than proper probability measure, but captures the key property that f_Y(y) = 1/3.', 'Law of total expectation E[X] = E[E[X|Y]] is completely missing from the formalization. Only the conclusion E[X] = 3 is stated as an existence, losing the fundamental relationship.', 'The probability density function f_Y(y) = 1/3 is correctly captured through the uniform distribution hypothesis.', 'E[Y\u00b2] = 3 is perfectly represented as the integral \u222b y\u00b2 * (1/3) dy from 0 to 3 equals 3.', 'The relationship E[X] = E[Y\u00b2] is missing from the formalization. While both E[X] = 3 and E[Y\u00b2] = 3 are present, their equality is not explicitly stated.', 'E[X] = 3 is correctly captured through the existence statement in h_law_total_exp.', 'The law of total variance Var(X) = E[Var(X|Y)] + Var(E[X|Y]) is missing as a general principle. Only the specific calculation appears in h_law_total_var.', 'E[Var(X|Y)] = 2 is not explicitly stated in the formalization, though it can be derived from the integral \u222b 2 * (1/3) dy.', 'E[Y\u2074] = 16.2 is perfectly represented as the integral \u222b y\u2074 * (1/3) dy from 0 to 3 equals 16.2.', 'Var(E[X|Y]) = 7.2 is not explicitly stated, though the variance calculation appears in the total variance formula without the intermediate step.', 'The conclusion Var(X) = 9.2 is correctly represented as the existence of Var_X = 9.2 in the theorem statement.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_4", "label": "tc_4", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    