
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for all real numbers $a, b, c$, the following inequality holds:
$$ \\quad \frac{a^2+b^2+c^2}{(a+b+c)^2} \geq \frac{1}{3} $$

Proof: For the desired inequality, $rac{a^2+b^2+c^2}{(a+b+c)^2} \ge rac{1}{3}$, multiplying both sides by $(a+b+c)^2$ gives $3(a^2+b^2+c^2) - (a+b+c)^2 \ge 0$, which simplifies to $2(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2 \ge 0$. Since squares of real numbers are non-negative, both inequalities hold, with equality if and only if $a=b=c$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for all real numbers $a, b, c$", "statement": "Premise:\n\u2022 $a, b, c$ are real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_1 (a b c : \u211d) (h : a + b + c \u2260 0) :\n  (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1/3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean declaration (a b c : \u211d) correctly captures that a, b, c are real numbers", "The additional condition (h : a + b + c \u2260 0) is an extra constraint not mentioned in the natural language, but extra conditions are acceptable according to the guidelines", "The natural language explicitly states there are no conclusions derived in this premise step, but the Lean formalization includes a complete mathematical theorem with a substantial inequality conclusion. This is a major logical inconsistency"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean declaration (a b c : \u211d) correctly captures that a, b, c are real numbers', 'The additional condition (h : a + b + c \u2260 0) is an extra constraint not mentioned in the natural language, but extra conditions are acceptable according to the guidelines', 'The natural language explicitly states there are no conclusions derived in this premise step, but the Lean formalization includes a complete mathematical theorem with a substantial inequality conclusion. This is a major logical inconsistency']"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "Prove that for all real numbers $a, b, c$, the following inequality holds:\n$$ \\quad \frac{a^2+b^2+c^2}{(a+b+c)^2} \\geq \frac{1}{3} $$", "statement": "Premise:\n\u2022 $a, b, c$ are real numbers [tc_1]\n\u2022 $a+b+c \\neq 0$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_2 (a b c : \u211d) (h : a + b + c \u2260 0) :\n  (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1/3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly declares a, b, c as real numbers using the type annotation (a b c : \u211d), which perfectly matches the natural language condition", "The Lean formalization correctly captures the condition a + b + c \u2260 0 as a hypothesis h, which perfectly matches the natural language condition", "The natural language explicitly states there are no conclusions derived in this premise step, but the Lean formalization introduces a substantial conclusion about an inequality involving (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1/3, which contradicts the stated absence of conclusions"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly declares a, b, c as real numbers using the type annotation (a b c : \u211d), which perfectly matches the natural language condition', 'The Lean formalization correctly captures the condition a + b + c \u2260 0 as a hypothesis h, which perfectly matches the natural language condition', 'The natural language explicitly states there are no conclusions derived in this premise step, but the Lean formalization introduces a substantial conclusion about an inequality involving (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1/3, which contradicts the stated absence of conclusions']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "multiplying both sides by $(a+b+c)^2$ gives $3(a^2+b^2+c^2) - (a+b+c)^2 \\ge 0$, which simplifies to $2(a^2+b^2+c^2-ab-bc-ca)$", "statement": "We assume:\n\u2022 $a, b, c$ are real numbers [tc_1]\n\u2022 $a+b+c \\neq 0$ [tc_2].\nTherefore, we conclude:\n\u2022 $3(a^2+b^2+c^2) - (a+b+c)^2 = 2(a^2+b^2+c^2-ab-bc-ca)$ [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (a b c : \u211d) (h : a + b + c \u2260 0) :\n  3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (a b c : \u211d) (h : a + b + c \u2260 0) :\n  3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) := by\n  have h\u2081 : (a + b + c)^2 = a^2 + b^2 + c^2 + 2*(a*b + b*c + c*a) := by\n    calc\n      (a + b + c) ^ 2 = (a + b + c) * (a + b + c) := by ring\n      _ = a * (a + b + c) + b * (a + b + c) + c * (a + b + c) := by ring\n      _ = a * a + a * b + a * c + (b * a + b * b + b * c) + (c * a + c * b + c * c) := by ring\n      _ = a ^ 2 + a * b + a * c + (a * b + b ^ 2 + b * c) + (a * c + b * c + c ^ 2) := by ring\n      _ = a ^ 2 + b ^ 2 + c ^ 2 + 2 * (a * b + b * c + c * a) := by ring\n      _ = a ^ 2 + b ^ 2 + c ^ 2 + 2 * (a * b + b * c + c * a) := by ring\n  \n  have h\u2082 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) := by\n    calc\n      3 * (a ^ 2 + b ^ 2 + c ^ 2) - (a + b + c) ^ 2 = 3 * (a ^ 2 + b ^ 2 + c ^ 2) - (a ^ 2 + b ^ 2 + c ^ 2 + 2 * (a * b + b * c + c * a)) := by rw [h\u2081]\n      _ = 2 * (a ^ 2 + b ^ 2 + c ^ 2) - 2 * (a * b + b * c + c * a) := by ring\n      _ = 2 * (a ^ 2 + b ^ 2 + c ^ 2 - a * b - b * c - c * a) := by ring\n  \n  rw [h\u2082]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify three real numbers in both versions", "The non-zero sum condition is accurately translated with identical mathematical notation", "The algebraic identity is perfectly preserved with all terms, operations, and structure maintained", "The logical flow from assumptions to conclusion is properly structured in the Lean theorem format"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "which simplifies to $2(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2 \\ge 0$.", "statement": "We assume:\n\u2022 $a, b, c$ are real numbers [tc_1]\n\u2022 $a+b+c \\neq 0$ [tc_2]\n\u2022 $3(a^2+b^2+c^2) - (a+b+c)^2 = 2(a^2+b^2+c^2-ab-bc-ca)$ [l1].\nTherefore, we conclude:\n\u2022 $2(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2$ [l2].", "dependencies": ["tc_1", "tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (a b c : \u211d) \n  (h1 : a + b + c \u2260 0)\n  (h2 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a)) :\n  2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) = (a - b)^2 + (b - c)^2 + (c - a)^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (a b c : \u211d) \n  (h1 : a + b + c \u2260 0)\n  (h2 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a)) :\n  2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) = (a - b)^2 + (b - c)^2 + (c - a)^2 := by\n  have h3 : (a - b)^2 + (b - c)^2 + (c - a)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) := by\n    have h4 : (a - b)^2 + (b - c)^2 + (c - a)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) := by\n      ring_nf\n      <;>\n      linarith\n    linarith\n  \n  have h4 : 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) = (a - b)^2 + (b - c)^2 + (c - a)^2 := by\n    linarith\n  \n  linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify three real numbers using proper Lean syntax", "The non-zero sum condition is accurately captured with identical mathematical meaning", "The given algebraic identity is perfectly translated with proper Lean multiplication syntax", "The conclusion statement matches exactly in mathematical content", "The overall logical structure properly captures the premise-conclusion relationship from natural language"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Since squares of real numbers are non-negative, both inequalities hold", "statement": "We assume:\n\u2022 $a, b, c$ are real numbers [tc_1]\n\u2022 $a+b+c \\neq 0$ [tc_2]\n\u2022 $3(a^2+b^2+c^2) - (a+b+c)^2 = 2(a^2+b^2+c^2-ab-bc-ca)$ [l1]\n\u2022 $2(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2$ [l2].\nTherefore, we conclude:\n\u2022 $(a-b)^2 + (b-c)^2 + (c-a)^2 \\ge 0$ [l3].", "dependencies": ["tc_1", "tc_2", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b c : \u211d) \n  (h1 : a + b + c \u2260 0)\n  (h2 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a))\n  (h3 : 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) = (a - b)^2 + (b - c)^2 + (c - a)^2) :\n  (a - b)^2 + (b - c)^2 + (c - a)^2 \u2265 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b c : \u211d) \n  (h1 : a + b + c \u2260 0)\n  (h2 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a))\n  (h3 : 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) = (a - b)^2 + (b - c)^2 + (c - a)^2) :\n  (a - b)^2 + (b - c)^2 + (c - a)^2 \u2265 0 := by\n  have h4 : a^2 + b^2 + c^2 - a*b - b*c - c*a \u2265 0 := by\n    have h4\u2081 : a ^ 2 + b ^ 2 + c ^ 2 - a * b - b * c - c * a = (a - (b + c) / 2) ^ 2 + 3 / 4 * (b - c) ^ 2 := by\n      ring_nf\n      <;>\n      linarith\n    rw [h4\u2081]\n    nlinarith [sq_nonneg (a - (b + c) / 2), sq_nonneg (b - c)]\n  \n  have h5 : 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) \u2265 0 := by\n    have h5\u2081 : 0 \u2264 a ^ 2 + b ^ 2 + c ^ 2 - a * b - b * c - c * a := h4\n    nlinarith\n  \n  have h6 : (a - b)^2 + (b - c)^2 + (c - a)^2 \u2265 0 := by\n    have h6\u2081 : (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 2 * (a ^ 2 + b ^ 2 + c ^ 2 - a * b - b * c - c * a) := by\n      linarith\n    rw [h6\u2081]\n    <;> linarith\n  \n  exact h6", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly capture the real number types for a, b, c", "The non-zero sum condition is faithfully translated with identical mathematical meaning", "The first algebraic identity is correctly formalized with appropriate Lean notation for multiplication and exponentiation", "The second algebraic identity maintains perfect mathematical equivalence despite notational differences", "The conclusion inequality is correctly expressed using Lean's inequality symbol", "The overall logical structure properly transforms the natural language assumptions and conclusion into a well-formed Lean theorem"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "$3(a^2+b^2+c^2) - (a+b+c)^2 \\ge 0$, which simplifies to $2(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2 \\ge 0$.", "statement": "We assume:\n\u2022 $a, b, c$ are real numbers [tc_1]\n\u2022 $a+b+c \\neq 0$ [tc_2]\n\u2022 $3(a^2+b^2+c^2) - (a+b+c)^2 = 2(a^2+b^2+c^2-ab-bc-ca)$ [l1]\n\u2022 $2(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2$ [l2]\n\u2022 $(a-b)^2 + (b-c)^2 + (c-a)^2 \\ge 0$ [l3].\nTherefore, we conclude:\n\u2022 $3(a^2+b^2+c^2) - (a+b+c)^2 \\ge 0$ [l4].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 (a b c : \u211d) (h : a + b + c \u2260 0) \n  (tc_1 : a + b + c \u2260 0)\n  (tc_2 : a + b + c \u2260 0)\n  (l1 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a))\n  (l2 : 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) = (a - b)^2 + (b - c)^2 + (c - a)^2)\n  (l3 : (a - b)^2 + (b - c)^2 + (c - a)^2 \u2265 0) :\n  3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 (a b c : \u211d) (h : a + b + c \u2260 0) \n  (tc_1 : a + b + c \u2260 0)\n  (tc_2 : a + b + c \u2260 0)\n  (l1 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a))\n  (l2 : 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) = (a - b)^2 + (b - c)^2 + (c - a)^2)\n  (l3 : (a - b)^2 + (b - c)^2 + (c - a)^2 \u2265 0) :\n  3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0 := by\n  have h4 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = (a - b)^2 + (b - c)^2 + (c - a)^2 := by\n    calc\n      3 * (a ^ 2 + b ^ 2 + c ^ 2) - (a + b + c) ^ 2 = 2 * (a ^ 2 + b ^ 2 + c ^ 2 - a * b - b * c - c * a) := by rw [l1]\n      _ = (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 := by rw [l2]\n  \n  have h_main : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0 := by\n    rw [h4]\n    exact l3\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The Lean formalization correctly captures all the mathematical content and logical structure from the natural language. However, there is a minor labeling inconsistency where tc_1 and tc_2 are swapped compared to the natural language description. Additionally, the constraint a + b + c \u2260 0 is redundantly declared three times (as h, tc_1, and tc_2), though this doesn't affect the mathematical correctness. All equations, inequalities, and the logical flow from premises to conclusion are accurately represented."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The Lean formalization correctly captures all the mathematical content and logical structure from the natural language. However, there is a minor labeling inconsistency where tc_1 and tc_2 are swapped compared to the natural language description. Additionally, the constraint a + b + c \u2260 0 is redundantly declared three times (as h, tc_1, and tc_2), though this doesn't affect the mathematical correctness. All equations, inequalities, and the logical flow from premises to conclusion are accurately represented.\"]"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "For the desired inequality, $\frac{a^2+b^2+c^2}{(a+b+c)^2} \\ge \frac{1}{3}$, multiplying both sides by $(a+b+c)^2$ gives $3(a^2+b^2+c^2) - (a+b+c)^2 \\ge 0$", "statement": "We assume:\n\u2022 $a, b, c$ are real numbers [tc_1]\n\u2022 $a+b+c \\neq 0$ [tc_2]\n\u2022 $3(a^2+b^2+c^2) - (a+b+c)^2 = 2(a^2+b^2+c^2-ab-bc-ca)$ [l1]\n\u2022 $2(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2$ [l2]\n\u2022 $(a-b)^2 + (b-c)^2 + (c-a)^2 \\ge 0$ [l3]\n\u2022 $3(a^2+b^2+c^2) - (a+b+c)^2 \\ge 0$ [l4].\nTherefore, we conclude:\n\u2022 $\\frac{a^2+b^2+c^2}{(a+b+c)^2} \\geq \\frac{1}{3}$ [ts_1].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (a b c : \u211d) (h : a + b + c \u2260 0)\n  (tc_1 : a + b + c \u2260 0)\n  (tc_2 : a + b + c \u2260 0)\n  (l1 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a))\n  (l2 : 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) = (a - b)^2 + (b - c)^2 + (c - a)^2)\n  (l3 : (a - b)^2 + (b - c)^2 + (c - a)^2 \u2265 0)\n  (l4 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0) :\n  (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1/3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (a b c : \u211d) (h : a + b + c \u2260 0)\n  (tc_1 : a + b + c \u2260 0)\n  (tc_2 : a + b + c \u2260 0)\n  (l1 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a))\n  (l2 : 2 * (a^2 + b^2 + c^2 - a*b - b*c - c*a) = (a - b)^2 + (b - c)^2 + (c - a)^2)\n  (l3 : (a - b)^2 + (b - c)^2 + (c - a)^2 \u2265 0)\n  (l4 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0) :\n  (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1/3 := by\n  have h_denom_pos : (a + b + c)^2 > 0 := by\n    have h\u2081 : a + b + c \u2260 0 := h\n    have h\u2082 : (a + b + c)^2 > 0 := by\n      -- Since a + b + c \u2260 0, its square is positive.\n      exact sq_pos_of_ne_zero h\u2081\n    exact h\u2082\n  \n  have h_main : (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1/3 := by\n    have h\u2085 : 3 * (a^2 + b^2 + c^2) \u2265 (a + b + c)^2 := by\n      linarith\n    -- Divide both sides by 3 * (a + b + c)^2, which is positive\n    have h\u2086 : (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 := by\n      -- Use the fact that (a + b + c)^2 > 0 to divide both sides of the inequality\n      have h\u2087 : 0 < (a + b + c)^2 := by positivity\n      -- Use the division inequality to transform the inequality into the desired form\n      have h\u2088 : 0 < 3 := by norm_num\n      have h\u2089 : 0 < 3 * (a + b + c)^2 := by positivity\n      -- Use the division inequality to transform the inequality into the desired form\n      calc\n        (a^2 + b^2 + c^2) / (a + b + c)^2 = (3 * (a^2 + b^2 + c^2)) / (3 * (a + b + c)^2) := by\n          field_simp [h\u2087.ne']\n          <;> ring_nf\n          <;> field_simp [h\u2087.ne']\n          <;> ring_nf\n        _ \u2265 (a + b + c)^2 / (3 * (a + b + c)^2) := by\n          -- Use the fact that 3 * (a^2 + b^2 + c^2) \u2265 (a + b + c)^2\n          apply (div_le_div_iff (by positivity) (by positivity)).mpr\n          nlinarith\n        _ = 1 / 3 := by\n          -- Simplify the right-hand side\n          have h\u2081\u2080 : (a + b + c)^2 \u2260 0 := by positivity\n          field_simp [h\u2081\u2080]\n          <;> ring_nf\n          <;> field_simp [h\u2081\u2080]\n          <;> linarith\n    exact h\u2086\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The Lean formalization correctly captures all the mathematical content and logical structure from the natural language. However, there is a labeling inconsistency: in the natural language, tc_1 refers to 'a, b, c are real numbers' while in Lean, tc_1 refers to 'a + b + c \u2260 0'. Additionally, the condition 'a + b + c \u2260 0' is redundantly declared three times (as h, tc_1, and tc_2). Despite these structural differences, the mathematical meaning is fully preserved and the conclusion is correctly formalized."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The Lean formalization correctly captures all the mathematical content and logical structure from the natural language. However, there is a labeling inconsistency: in the natural language, tc_1 refers to 'a, b, c are real numbers' while in Lean, tc_1 refers to 'a + b + c \u2260 0'. Additionally, the condition 'a + b + c \u2260 0' is redundantly declared three times (as h, tc_1, and tc_2). Despite these structural differences, the mathematical meaning is fully preserved and the conclusion is correctly formalized.\"]"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    