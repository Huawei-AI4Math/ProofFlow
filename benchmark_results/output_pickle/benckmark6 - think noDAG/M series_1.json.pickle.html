
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $f(x)$ be a polynomial function such that $f(x) = x^3 - 3x^2 + 2x$. If $g(x) = f'(x) - 1$, then $g(2) = -1$.

Proof: We have $f(x) = x^3 - 3x^2 + 2x$. Therefore, $f'(x) = 3x^2 - 6x + 2$. Let $g(x) = f'(x) - 3$. Then $g(2) = (3(2)^2 - 6(2) + 2) - 3 = (12 - 12 + 2) - 3 = 2 - 3 = -1$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $f(x)$ be a polynomial function such that $f(x) = x^3 - 3x^2 + 2x$.", "statement": "Premise:\n\u2022 $f(x)$ is a polynomial function such that $f(x) = x^3 - 3x^2 + 2x$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (f : \u211d \u2192 \u211d)\n(tc_1 : \u2200 x, f x = x^3 - 3*x^2 + 2*x)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The Lean formalization exactly captures the functional equation with proper universal quantification over real numbers.", "The Lean code declares f as a general function from reals to reals, but doesn't explicitly state that f is a polynomial function as mentioned in the natural language. While the functional equation implicitly makes f polynomial, the explicit polynomial property is not captured in the type declaration."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: ['The Lean formalization exactly captures the functional equation with proper universal quantification over real numbers.', \"The Lean code declares f as a general function from reals to reals, but doesn't explicitly state that f is a polynomial function as mentioned in the natural language. While the functional equation implicitly makes f polynomial, the explicit polynomial property is not captured in the type declaration.\"]"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "If $g(x) = f'(x) - 1$, then $g(2) = -1$.", "statement": "Premise:\n\u2022 $f(x)$ is a polynomial function such that $f(x) = x^3 - 3x^2 + 2x$ [tc_1]\n\u2022 $g(x)$ is a function such that $g(x) = f'(x) - 1$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (f g : \u211d \u2192 \u211d)\n(tc_1 : \u2200 x, f x = x^3 - 3*x^2 + 2*x)\n(tc_2 : \u2200 x, g x = (deriv f) x - 1)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization `\u2200 x, f x = x^3 - 3*x^2 + 2*x` perfectly captures the mathematical condition $f(x) = x^3 - 3x^2 + 2x$", "The Lean formalization `\u2200 x, g x = (deriv f) x - 1` perfectly captures the mathematical condition $g(x) = f'(x) - 1$, where `deriv f` represents the derivative of f", "The conclusion that $f(x)$ is a polynomial function is implicitly captured in the Lean formalization since `x^3 - 3*x^2 + 2*x` is clearly a polynomial expression", "The conclusion that $g(x)$ is defined in terms of the derivative of $f(x)$ is perfectly captured by the Lean expression `(deriv f) x - 1`"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "We have $f(x) = x^3 - 3x^2 + 2x$. Therefore, $f'(x) = 3x^2 - 6x + 2$.", "statement": "We assume:\n\u2022 $f(x)$ is a polynomial function such that $f(x) = x^3 - 3x^2 + 2x$ [tc_1]\n\u2022 $g(x)$ is a function such that $g(x) = f'(x) - 1$ [tc_2]\nTherefore, we conclude:\n\u2022 The derivative of $f(x)$ is $f'(x) = 3x^2 - 6x + 2$ [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (f : \u211d \u2192 \u211d)\n  (hf : \u2200 x, f x = x^3 - 3*x^2 + 2*x) :\n  \u2200 x, deriv f x = 3*x^2 - 6*x + 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (f : \u211d \u2192 \u211d)\n  (hf : \u2200 x, f x = x^3 - 3*x^2 + 2*x) :\n  \u2200 x, deriv f x = 3*x^2 - 6*x + 2 := by\n  intro x\n  have h\u2081 : deriv f x = deriv (fun x : \u211d => x ^ 3 - 3 * x ^ 2 + 2 * x) x := by\n    congr\n    funext x\n    rw [hf]\n  rw [h\u2081]\n  -- Differentiate the polynomial function term by term\n  -- The derivative of x^3 is 3x^2, the derivative of 3x^2 is 6x, and the derivative of 2x is 2.\n  -- Therefore, the derivative is 3x^2 - 6x + 2.\n  simp [deriv_add, deriv_sub, deriv_pow, deriv_mul, deriv_id, mul_comm]\n  <;> norm_num <;> ring_nf <;> norm_num <;>\n    (try simp_all) <;>\n    (try norm_num) <;>\n    (try ring_nf) <;>\n    (try linarith)\n  <;>\n  (try\n    {\n      -- Use the fact that the derivative of a polynomial is the sum of the derivatives of its terms.\n      norm_num [deriv_add, deriv_sub, deriv_pow, deriv_mul, deriv_id, mul_comm]\n      <;> ring_nf\n      <;> norm_num\n      <;> linarith\n    })\n  <;>\n  (try\n    {\n      -- Simplify the expression using algebraic rules.\n      norm_num [deriv_add, deriv_sub, deriv_pow, deriv_mul, deriv_id, mul_comm]\n      <;> ring_nf\n      <;> norm_num\n      <;> linarith\n    })", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The function f definition is correctly captured with proper type declaration and universal quantification over the polynomial equation.", "The derivative conclusion is accurately formalized using Lean's deriv notation with the correct mathematical expression.", "The Lean formalization completely omits the definition of function g(x) = f'(x) - 1, which is explicitly stated in the natural language assumptions.", "The overall logical structure appropriately represents the mathematical relationship as a theorem, which is equivalent to the assumption-conclusion format in natural language."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The function f definition is correctly captured with proper type declaration and universal quantification over the polynomial equation.', \"The derivative conclusion is accurately formalized using Lean's deriv notation with the correct mathematical expression.\", \"The Lean formalization completely omits the definition of function g(x) = f'(x) - 1, which is explicitly stated in the natural language assumptions.\", 'The overall logical structure appropriately represents the mathematical relationship as a theorem, which is equivalent to the assumption-conclusion format in natural language.']"}, "solved_negation": null, "type": "lemma"}, "def_1": {"id": "def_1", "natural_language": "Let $g(x) = f'(x) - 3$.", "statement": "We assume:\n\u2022 $f(x)$ is a polynomial function such that $f(x) = x^3 - 3x^2 + 2x$ [tc_1]\n\u2022 The theorem statement defines a function $g(x)$ such that $g(x) = f'(x) - 1$ [tc_2]\n\u2022 The derivative of $f(x)$ is $f'(x) = 3x^2 - 6x + 2$ [l1]\nDefinition:\n\u2022 The proof introduces a function, which it also calls $g(x)$, defined as $g(x) = f'(x) - 3$ [def_1].", "dependencies": ["tc_1", "tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem def_1\n  (f g : \u211d \u2192 \u211d)\n  (tc_1 : \u2200 x, f x = x^3 - 3*x^2 + 2*x)\n  (l1 : \u2200 x, deriv f x = 3*x^2 - 6*x + 2) :\n  \u2200 x, g x = deriv f x - 3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 4}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly captures the polynomial definition with universal quantification over x", "The natural language condition tc_2 defining g(x) = f'(x) - 1 is completely missing from the Lean headers, which is a major omission of a key logical component", "The Lean formalization correctly captures the derivative condition using deriv f x notation", "The Lean proposition correctly captures the conclusion that g(x) = f'(x) - 3"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly captures the polynomial definition with universal quantification over x', \"The natural language condition tc_2 defining g(x) = f'(x) - 1 is completely missing from the Lean headers, which is a major omission of a key logical component\", 'The Lean formalization correctly captures the derivative condition using deriv f x notation', \"The Lean proposition correctly captures the conclusion that g(x) = f'(x) - 3\"]"}, "type": "definition"}, "ts_1": {"id": "ts_1", "natural_language": "Then $g(2) = (3(2)^2 - 6(2) + 2) - 3 = (12 - 12 + 2) - 3 = 2 - 3 = -1$.", "statement": "We assume:\n\u2022 $f(x)$ is a polynomial function such that $f(x) = x^3 - 3x^2 + 2x$ [tc_1]\n\u2022 The theorem statement defines a function $g(x)$ such that $g(x) = f'(x) - 1$ [tc_2]\n\u2022 The derivative of $f(x)$ is $f'(x) = 3x^2 - 6x + 2$ [l1]\n\u2022 The proof uses the definition $g(x) = f'(x) - 3$ [def_1]\nTherefore, we conclude:\n\u2022 Based on the proof's definition of $g(x)$ [def_1], we have $g(2) = -1$ [ts_1].", "dependencies": ["tc_1", "tc_2", "l1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (f g : \u211d \u2192 \u211d)\n  (tc_1 : \u2200 x, f x = x^3 - 3*x^2 + 2*x)\n  (l1 : \u2200 x, deriv f x = 3*x^2 - 6*x + 2)\n  (def_1 : \u2200 x, g x = deriv f x - 3) :\n  g 2 = -1 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (f g : \u211d \u2192 \u211d)\n  (tc_1 : \u2200 x, f x = x^3 - 3*x^2 + 2*x)\n  (l1 : \u2200 x, deriv f x = 3*x^2 - 6*x + 2)\n  (def_1 : \u2200 x, g x = deriv f x - 3) :\n  g 2 = -1 := by\n  have h\u2081 : deriv f 2 = 3 * (2 : \u211d) ^ 2 - 6 * (2 : \u211d) + 2 := by\n    have h\u2082 := l1 2\n    norm_num at h\u2082 \u22a2\n    <;> linarith\n  \n  have h\u2082 : g 2 = deriv f 2 - 3 := by\n    have h\u2083 := def_1 2\n    exact h\u2083\n  \n  have h\u2083 : g 2 = -1 := by\n    rw [h\u2082]\n    have h\u2084 : deriv f 2 = (3 : \u211d) * (2 : \u211d) ^ 2 - 6 * (2 : \u211d) + 2 := by\n      exact h\u2081\n    rw [h\u2084]\n    norm_num\n    <;> linarith\n  \n  exact h\u2083", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The definition of f(x) as x\u00b3 - 3x\u00b2 + 2x is correctly captured in both the natural language (tc_1) and Lean formalization.", "The natural language explicitly mentions that the theorem statement defines g(x) = f'(x) - 1 (tc_2), but this definition is completely missing from the Lean formalization. This is a major omission of a key logical component.", "The derivative formula f'(x) = 3x\u00b2 - 6x + 2 is correctly represented in both versions (l1).", "The proof's definition g(x) = f'(x) - 3 is accurately captured in both the natural language (def_1) and Lean formalization.", "The conclusion g(2) = -1 is correctly stated in both versions (ts_1)."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The definition of f(x) as x\u00b3 - 3x\u00b2 + 2x is correctly captured in both the natural language (tc_1) and Lean formalization.', \"The natural language explicitly mentions that the theorem statement defines g(x) = f'(x) - 1 (tc_2), but this definition is completely missing from the Lean formalization. This is a major omission of a key logical component.\", \"The derivative formula f'(x) = 3x\u00b2 - 6x + 2 is correctly represented in both versions (l1).\", \"The proof's definition g(x) = f'(x) - 3 is accurately captured in both the natural language (def_1) and Lean formalization.\", 'The conclusion g(2) = -1 is correctly stated in both versions (ts_1).']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    