
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Suppose that $\mathbf{F}:\R^n	o\R^n$ is continuously
differentiable on a neighborhood of $\mathbf{X}_0$
 and $\mathbf{F}'(\mathbf{X}_0)$ is nonsingular$.$ Let
\begin{equation}\label{eq:6.2.14}
r=\frac{1}{\|(\mathbf{F}'(\mathbf{X}_0))^{-1}\|}.
\end{equation}
Then$,$ for every $\epsilon>0,$ there is a $\delta>0$ such that
\begin{equation}\label{eq:6.2.15}
|\mathbf{F}(\mathbf{X})-\mathbf{F}(\mathbf{Y})|\ge (r-\epsilon)
|\mathbf{X}-\mathbf{Y}|\mbox{\quad if\quad} \mathbf{X},\mathbf{Y}\in
B_\delta(\mathbf{X}_{0}).
\end{equation}

Proof: Let $\mathbf{X}$  and $\mathbf{Y}$ be arbitrary points in
$D_\mathbf{F}$  and let $\mathbf{G}$ be as in \eqref{eq:6.2.9}. From
\eqref{eq:6.2.13},
\begin{equation} \label{eq:6.2.16}
|\mathbf{F}(\mathbf{X})-\mathbf{F}(\mathbf{Y})|\ge\big|
|\mathbf{F}'(\mathbf{X}_0)(\mathbf{X}
-\mathbf{Y})|-|\mathbf{G}(\mathbf{X})-\mathbf{G}(\mathbf{Y})|\big|,
\end{equation}
Since
$$
\mathbf{X}-\mathbf{Y}=[\mathbf{F}'(\mathbf{X}_0)]^{-1}
\mathbf{F}'(\mathbf{X}_{0})
(\mathbf{X}-\mathbf{Y}),
$$
\eqref{eq:6.2.14} implies that
$$
|\mathbf{X}-\mathbf{Y}|\le \frac{1}{ r} |\mathbf{F}'(\mathbf{X}_0)
(\mathbf{X}-\mathbf{Y}|,
$$
so
\begin{equation}\label{eq:6.2.17}
|\mathbf{F}'(\mathbf{X}_0)(\mathbf{X}-\mathbf{Y})|\ge r|\mathbf{X}-\mathbf{Y}|.
\end{equation}
 Now choose $\delta>0$ so that \eqref{eq:6.2.12} holds.
Then \eqref{eq:6.2.16}  and \eqref{eq:6.2.17} imply \eqref{eq:6.2.15}.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Suppose that $\\mathbf{F}:\\R^n\\to\\R^n$ is continuously differentiable on a neighborhood of $\\mathbf{X}_0$", "statement": "Premise:\n\u2022 $\\mathbf{F}:\\R^n\\to\\R^n$ is a function that is continuously differentiable on a neighborhood of a point $\\mathbf{X}_0 \\in \\R^n$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_1 \n  (n : \u2115) (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin n)) \n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (hF_cont_diff : \u2203 U : Set (EuclideanSpace \u211d (Fin n)), IsOpen U \u2227 X\u2080 \u2208 U \u2227 ContDiffOn \u211d 1 F U) -- F is continuously differentiable on a neighborhood of X\u2080\n  (hF_inv : \u2203 (f_inv : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin n)), \n    fderiv \u211d F X\u2080 \u2218\u2097 f_inv = LinearMap.id \u2227 \n    f_inv \u2218\u2097 fderiv \u211d F X\u2080 = LinearMap.id) -- F'(X\u2080) is nonsingular\n  (r : \u211d) (hr : r = 1 / \u2016(fderiv \u211d F X\u2080)\u207b\u00b9\u2016) :\n  \u2200 \u03b5 > 0, \u2203 \u03b4 > 0, \u2200 X Y : EuclideanSpace \u211d (Fin n), \n    \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \n    \u2016F X - F Y\u2016 \u2265 (r - \u03b5) * \u2016X - Y\u2016 := by sorry", "lean_pass": false, "error_msg": [{"line": 14, "column": 25, "endLine": 14, "endColumn": 42, "data": "failed to synthesize\n  Inv (EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin n))\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 13, "column": 13, "endLine": 13, "endColumn": 26, "data": "application type mismatch\n  ?m.16131 \u2218\u2097 fderiv \u211d F X\u2080\nargument\n  fderiv \u211d F X\u2080\nhas type\n  EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin n) : Type\nbut is expected to have type\n  ?m.27859 f_inv \u2192\u2097[?m.27857 f_inv] ?m.27862 f_inv : Type (max ?u.15593 ?u.15594)"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "$\\mathbf{F}'(\\mathbf{X}_0)$ is nonsingular", "statement": "Premise:\n\u2022 $\\mathbf{F}:\\R^n\\to\\R^n$ is a function that is continuously differentiable on a neighborhood of a point $\\mathbf{X}_0 \\in \\R^n$ [tc_1].\n\u2022 The derivative of $\\mathbf{F}$ at $\\mathbf{X}_0$, denoted $\\mathbf{F}'(\\mathbf{X}_0)$, is a nonsingular linear transformation [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_2 \n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : DifferentiableAt \u211d F X\u2080) :\n  IsUnit (fderiv \u211d F X\u2080) := by sorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language requires F to be continuously differentiable on a neighborhood of X\u2080, but the Lean formalization only assumes DifferentiableAt \u211d F X\u2080, which means F is differentiable at the single point X\u2080. This is a significant weakening of the condition since continuous differentiability on a neighborhood is a much stronger requirement than differentiability at a point.", "The Lean formalization correctly captures that the derivative F'(X\u2080) is nonsingular. In Lean, IsUnit (fderiv \u211d F X\u2080) means the derivative is invertible, which is equivalent to being nonsingular."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language requires F to be continuously differentiable on a neighborhood of X\u2080, but the Lean formalization only assumes DifferentiableAt \u211d F X\u2080, which means F is differentiable at the single point X\u2080. This is a significant weakening of the condition since continuous differentiability on a neighborhood is a much stronger requirement than differentiability at a point.', \"The Lean formalization correctly captures that the derivative F'(X\u2080) is nonsingular. In Lean, IsUnit (fderiv \u211d F X\u2080) means the derivative is invertible, which is equivalent to being nonsingular.\"]"}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "for every $\\epsilon>0$", "statement": "Premise:\n\u2022 $\\mathbf{F}:\\R^n\\to\\R^n$ is a function that is continuously differentiable on a neighborhood of a point $\\mathbf{X}_0 \\in \\R^n$ [tc_1].\n\u2022 The derivative of $\\mathbf{F}$ at $\\mathbf{X}_0$, denoted $\\mathbf{F}'(\\mathbf{X}_0)$, is a nonsingular linear transformation [tc_2].\n\u2022 $\\epsilon$ is a given positive real number [tc_3].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_2 \n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : DifferentiableAt \u211d F X\u2080)\n  (hF_inv : IsUnit (fderiv \u211d F X\u2080)) :\n  let r := 1 / \u2016(fderiv \u211d F X\u2080)\u207b\u00b9\u2016\n  \u2200 \u03b5 > 0, \u2203 \u03b4 > 0, \u2200 X Y, \n    \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \n    \u2016F X - F Y\u2016 \u2265 (r - \u03b5) * \u2016X - Y\u2016 := by sorry", "lean_pass": false, "error_msg": [{"line": 12, "column": 16, "endLine": 12, "endColumn": 33, "data": "failed to synthesize\n  Inv ((Fin n \u2192 \u211d) \u2192L[\u211d] Fin n \u2192 \u211d)\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let $r=\\frac{1}{\\|(\\mathbf{F}'(\\mathbf{X}_0))^{-1}\\|}$.", "statement": "Definition:\n\u2022 Let $r$ be defined as $r = \\frac{1}{\\|(\\mathbf{F}'(\\mathbf{X}_0))^{-1}\\|}$, where the norm $\\| \\cdot \\|$ is the operator norm induced by the vector norm on $\\R^n$ [def_1]. The existence of the inverse $(\\mathbf{F}'(\\mathbf{X}_0))^{-1}$ is guaranteed by the nonsingularity of $\\mathbf{F}'(\\mathbf{X}_0)$ [tc_2].", "dependencies": ["tc_1", "tc_2", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem def_1 \n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) (X\u2080 : Fin n \u2192 \u211d)\n  (hF_diff : DifferentiableAt \u211d F X\u2080)\n  (hF_nonsingular : IsUnit (fderiv \u211d F X\u2080)) :\n  let r := 1 / LinearMap.norm ((fderiv \u211d F X\u2080)\u207b\u00b9)\n  r > 0 := by sorry", "lean_pass": false, "error_msg": [{"line": 11, "column": 15, "endLine": 11, "endColumn": 49, "data": "invalid field notation, type is not of the form (C ...) where C is a constant\n  LinearMap\nhas type\n  (?m.4834 \u2192+* ?m.4835) \u2192\n    (M : Type ?u.4831) \u2192\n      (M\u2082 : Type ?u.4830) \u2192\n        [inst : AddCommMonoid M] \u2192\n          [inst_1 : AddCommMonoid M\u2082] \u2192\n            [inst : Module ?m.4834 M] \u2192 [inst : Module ?m.4835 M\u2082] \u2192 Type (max ?u.4831 ?u.4830)"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "def_2": {"id": "def_2", "natural_language": "let $\\mathbf{G}$ be as in \\eqref{eq:6.2.9}.", "statement": "Definition:\n\u2022 Let the function $\\mathbf{G}: \\R^n \\to \\R^n$ be defined as $\\mathbf{G}(\\mathbf{X}) = \\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X}) - \\mathbf{F}(\\mathbf{X})$ [def_2]. This definition is inferred from context, as it is cited as equation (6.2.9) in the proof.", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : ContDiffAt \u211d 1 F X\u2080)\n\ndef G (X : Fin n \u2192 \u211d) : Fin n \u2192 \u211d := \n  fderiv \u211d F X\u2080 X - F X", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.45, "semantic_feedback": ["The mathematical statement uses $\\mathbf{F}: \\R^n \\to \\R^n$ while Lean uses `F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)`. These represent the same concept but with different type representations - $\\R^n$ vs `Fin n \u2192 \u211d`", "The mathematical statement uses $\\mathbf{X}_0 \\in \\R^n$ while Lean uses `X\u2080 : Fin n \u2192 \u211d`. Again, same concept with different type representations for $\\R^n$", "The condition that $\\mathbf{F}'(\\mathbf{X}_0)$ exists is captured by `hF_diff : ContDiffAt \u211d 1 F X\u2080`, which ensures the derivative exists at X\u2080. ContDiffAt with degree 1 implies differentiability", "The definition $\\mathbf{G}(\\mathbf{X}) = \\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X}) - \\mathbf{F}(\\mathbf{X})$ matches `fderiv \u211d F X\u2080 X - F X`, but uses different type representations. The mathematical notation uses $\\R^n$ while Lean uses `Fin n \u2192 \u211d`"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.45, below threshold 0.6.\nScorer feedback: ['The mathematical statement uses $\\\\mathbf{F}: \\\\R^n \\\\to \\\\R^n$ while Lean uses `F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)`. These represent the same concept but with different type representations - $\\\\R^n$ vs `Fin n \u2192 \u211d`', 'The mathematical statement uses $\\\\mathbf{X}_0 \\\\in \\\\R^n$ while Lean uses `X\u2080 : Fin n \u2192 \u211d`. Again, same concept with different type representations for $\\\\R^n$', \"The condition that $\\\\mathbf{F}'(\\\\mathbf{X}_0)$ exists is captured by `hF_diff : ContDiffAt \u211d 1 F X\u2080`, which ensures the derivative exists at X\u2080. ContDiffAt with degree 1 implies differentiability\", \"The definition $\\\\mathbf{G}(\\\\mathbf{X}) = \\\\mathbf{F}'(\\\\mathbf{X}_0)(\\\\mathbf{X}) - \\\\mathbf{F}(\\\\mathbf{X})$ matches `fderiv \u211d F X\u2080 X - F X`, but uses different type representations. The mathematical notation uses $\\\\R^n$ while Lean uses `Fin n \u2192 \u211d`\"]"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "From \\eqref{eq:6.2.13}, $|\\mathbf{F}(\\mathbf{X})-\\mathbf{F}(\\mathbf{Y})|\\ge\\big| |\\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X} -\\mathbf{Y})|-|\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})|\\big|,", "statement": "We assume:\n\u2022 $\\mathbf{F}:\\R^n\\to\\R^n$ is continuously differentiable on a neighborhood of $\\mathbf{X}_0$ [tc_1].\n\u2022 $\\mathbf{F}'(\\mathbf{X}_0)$ is a nonsingular linear transformation [tc_2].\n\u2022 $\\mathbf{G}(\\mathbf{X}) = \\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X}) - \\mathbf{F}(\\mathbf{X})$ [def_2].\nTherefore, we conclude:\n\u2022 For any $\\mathbf{X}, \\mathbf{Y}$ in the domain of $\\mathbf{F}$, the inequality $|\\mathbf{F}(\\mathbf{X})-\\mathbf{F}(\\mathbf{Y})|\\ge\\big| |\\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X} -\\mathbf{Y})|-|\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})|\\big|$ holds [l1].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : ContDiffAt \u211d 1 F X\u2080)\n  (hF_nonsingular : IsUnit (fderiv \u211d F X\u2080))\n  (G : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d))\n  (hG : \u2200 X, G X = fderiv \u211d F X\u2080 X - F X) :\n  \u2200 X Y, \n    \u2016F X - F Y\u2016 \u2265 |\u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016| := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : ContDiffAt \u211d 1 F X\u2080)\n  (hF_nonsingular : IsUnit (fderiv \u211d F X\u2080))\n  (G : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d))\n  (hG : \u2200 X, G X = fderiv \u211d F X\u2080 X - F X) :\n  \u2200 X Y, \n    \u2016F X - F Y\u2016 \u2265 |\u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016| := by\n  have h_main : \u2200 (X Y : Fin n \u2192 \u211d), F X - F Y = fderiv \u211d F X\u2080 (X - Y) - (G X - G Y) := by\n    intro X Y\n    have h1 : G X = fderiv \u211d F X\u2080 X - F X := hG X\n    have h2 : G Y = fderiv \u211d F X\u2080 Y - F Y := hG Y\n    have h3 : G X - G Y = (fderiv \u211d F X\u2080 X - F X) - (fderiv \u211d F X\u2080 Y - F Y) := by\n      rw [h1, h2]\n      <;> simp [sub_eq_add_neg]\n      <;> abel\n    have h4 : fderiv \u211d F X\u2080 (X - Y) = fderiv \u211d F X\u2080 X - fderiv \u211d F X\u2080 Y := by\n      -- Use the linearity of the derivative to factor out (X - Y)\n      have h5 : fderiv \u211d F X\u2080 (X - Y) = fderiv \u211d F X\u2080 X - fderiv \u211d F X\u2080 Y := by\n        -- Apply the property of linear maps to subtract the inputs\n        have h6 : fderiv \u211d F X\u2080 (X - Y) = fderiv \u211d F X\u2080 X - fderiv \u211d F X\u2080 Y := by\n          -- Use the fact that the derivative is a continuous linear map\n          have h7 : fderiv \u211d F X\u2080 (X - Y) = fderiv \u211d F X\u2080 X - fderiv \u211d F X\u2080 Y := by\n            -- Use the map_sub property of continuous linear maps\n            apply ContinuousLinearMap.map_sub\n          exact h7\n        exact h6\n      exact h5\n    have h5 : G X - G Y = fderiv \u211d F X\u2080 (X - Y) - (F X - F Y) := by\n      calc\n        G X - G Y = (fderiv \u211d F X\u2080 X - F X) - (fderiv \u211d F X\u2080 Y - F Y) := h3\n        _ = (fderiv \u211d F X\u2080 X - fderiv \u211d F X\u2080 Y) - (F X - F Y) := by\n          simp [sub_eq_add_neg, add_assoc]\n          <;> abel\n        _ = fderiv \u211d F X\u2080 (X - Y) - (F X - F Y) := by\n          rw [h4]\n          <;> simp [sub_eq_add_neg, add_assoc]\n          <;> abel\n    have h6 : F X - F Y = fderiv \u211d F X\u2080 (X - Y) - (G X - G Y) := by\n      have h7 : fderiv \u211d F X\u2080 (X - Y) - (G X - G Y) = F X - F Y := by\n        calc\n          fderiv \u211d F X\u2080 (X - Y) - (G X - G Y) = fderiv \u211d F X\u2080 (X - Y) - (fderiv \u211d F X\u2080 (X - Y) - (F X - F Y)) := by rw [h5]\n          _ = F X - F Y := by\n            -- Simplify the expression using abelian group properties\n            simp [sub_eq_add_neg, add_assoc]\n            <;> abel\n      -- Use the result to conclude the proof\n      have h8 : F X - F Y = fderiv \u211d F X\u2080 (X - Y) - (G X - G Y) := by\n        rw [\u2190 h7]\n        <;> simp [sub_eq_add_neg, add_assoc]\n        <;> abel\n      exact h8\n    exact h6\n  \n  have h_final : \u2200 (X Y : Fin n \u2192 \u211d), \u2016F X - F Y\u2016 \u2265 |\u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016| := by\n    intro X Y\n    have h1 : F X - F Y = fderiv \u211d F X\u2080 (X - Y) - (G X - G Y) := h_main X Y\n    have h2 : \u2016F X - F Y\u2016 = \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y)\u2016 := by rw [h1]\n    have h3 : |\u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016| \u2264 \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y)\u2016 := by\n      -- Use the reverse triangle inequality to bound the difference of norms\n      have h4 : |\u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016| \u2264 \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y)\u2016 := by\n        -- Apply the reverse triangle inequality\n        have h5 : \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016 \u2264 \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y)\u2016 := by\n          -- Use the triangle inequality to bound the difference\n          have h6 : \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2264 \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y)\u2016 + \u2016G X - G Y\u2016 := by\n            calc\n              \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 = \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y) + (G X - G Y)\u2016 := by\n                simp [sub_add_cancel]\n              _ \u2264 \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y)\u2016 + \u2016G X - G Y\u2016 := norm_add_le _ _\n          linarith\n        have h7 : \u2016G X - G Y\u2016 - \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2264 \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y)\u2016 := by\n          -- Use the triangle inequality to bound the difference\n          have h8 : \u2016G X - G Y\u2016 \u2264 \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y)\u2016 + \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 := by\n            calc\n              \u2016G X - G Y\u2016 = \u2016(G X - G Y) - (fderiv \u211d F X\u2080 (X - Y)) + fderiv \u211d F X\u2080 (X - Y)\u2016 := by\n                simp [sub_add_cancel]\n              _ \u2264 \u2016(G X - G Y) - (fderiv \u211d F X\u2080 (X - Y))\u2016 + \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 := norm_add_le _ _\n              _ = \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y)\u2016 + \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 := by\n                rw [norm_sub_rev]\n          linarith\n        -- Combine the two inequalities to get the absolute value bound\n        cases' le_total (\u2016fderiv \u211d F X\u2080 (X - Y)\u2016) (\u2016G X - G Y\u2016) with h9 h9 <;>\n          simp_all [abs_of_nonneg, abs_of_nonpos, le_of_lt] <;>\n          linarith\n      exact h4\n    -- Combine the inequalities to get the final result\n    calc\n      \u2016F X - F Y\u2016 = \u2016fderiv \u211d F X\u2080 (X - Y) - (G X - G Y)\u2016 := by rw [h2]\n      _ \u2265 |\u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016| := by\n        -- Use the reverse triangle inequality result\n        linarith\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 5}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The continuous differentiability condition is correctly captured. ContDiffAt \u211d 1 implies continuous differentiability in a neighborhood, matching the natural language requirement.", "The nonsingular condition is perfectly translated using IsUnit, which captures exactly the concept of invertibility/nonsingularity.", "The definition of G is identical in both versions, with fderiv \u211d F X\u2080 X being the precise Lean equivalent of F'(X\u2080)(X).", "The main inequality is structurally identical, with proper use of norms and absolute values. The mathematical content is preserved exactly.", "The domain specification is appropriately handled through the type system, consistent with the natural language context."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Since $$ \\mathbf{X}-\\mathbf{Y}=[\\mathbf{F}'(\\mathbf{X}_0)]^{-1} \\mathbf{F}'(\\mathbf{X}_{0}) (\\mathbf{X}-\\mathbf{Y}), $$ \\eqref{eq:6.2.14} implies that $$ |\\mathbf{X}-\\mathbf{Y}|\\le \\frac{1}{ r} |\\mathbf{F}'(\\mathbf{X}_0) (\\mathbf{X}-\\mathbf{Y}|, $$ so $$ |\\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X}-\\mathbf{Y})|\\ge r|\\mathbf{X}-\\mathbf{Y}|. $$", "statement": "We assume:\n\u2022 $\\mathbf{F}'(\\mathbf{X}_0)$ is a nonsingular linear transformation [tc_2].\n\u2022 $r = \\frac{1}{\\|(\\mathbf{F}'(\\mathbf{X}_0))^{-1}\\|}$ [def_1].\nTherefore, we conclude:\n\u2022 For any $\\mathbf{X}, \\mathbf{Y}$ in $\\R^n$, $|\\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X}-\\mathbf{Y})|\\ge r|\\mathbf{X}-\\mathbf{Y}|$ [l2].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "def_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : ContDiffAt \u211d 1 F X\u2080)\n  (hF_nonsingular : IsUnit (fderiv \u211d F X\u2080))\n  (r : \u211d)\n  (hr : r = 1 / \u2016(fderiv \u211d F X\u2080)\u207b\u00b9\u2016) :\n  \u2200 X Y : Fin n \u2192 \u211d, \n    \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2265 r * \u2016X - Y\u2016 := by sorry", "lean_pass": false, "error_msg": [{"line": 13, "column": 17, "endLine": 13, "endColumn": 34, "data": "failed to synthesize\n  Inv ((Fin n \u2192 \u211d) \u2192L[\u211d] Fin n \u2192 \u211d)\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : ContDiffAt \u211d 1 F X\u2080)\n  (hF_nonsingular : IsUnit (fderiv \u211d F X\u2080))\n  (r : \u211d)\n  (hr : r = 1 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016) :\n  \u2200 X Y : Fin n \u2192 \u211d, \n    \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2265 r * \u2016X - Y\u2016 := by\n  have h_main : \u2200 (v : (Fin n \u2192 \u211d)), \u2016fderiv \u211d F X\u2080 v\u2016 \u2265 (1 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016) * \u2016v\u2016 := by\n    intro v\n    have h\u2081 : \u2016v\u2016 \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016fderiv \u211d F X\u2080 v\u2016 := by\n      -- Since fderiv \u211d F X\u2080 is invertible, Ring.inverse (fderiv \u211d F X\u2080) (fderiv \u211d F X\u2080 v) = v\n      have h\u2082 : (Ring.inverse (fderiv \u211d F X\u2080)) * (fderiv \u211d F X\u2080) = 1 := by\n        apply Ring.inverse_mul_cancel\n        <;> simp_all [IsUnit]\n        <;>\n        (try aesop)\n      have h\u2083 : (Ring.inverse (fderiv \u211d F X\u2080)) (fderiv \u211d F X\u2080 v) = v := by\n        have h\u2084 : ((Ring.inverse (fderiv \u211d F X\u2080)) * (fderiv \u211d F X\u2080)) v = (1 : (Fin n \u2192 \u211d) \u2192L[\u211d] (Fin n \u2192 \u211d)) v := by\n          rw [h\u2082]\n        have h\u2085 : ((Ring.inverse (fderiv \u211d F X\u2080)) * (fderiv \u211d F X\u2080)) v = (Ring.inverse (fderiv \u211d F X\u2080)) (fderiv \u211d F X\u2080 v) := by\n          simp [LinearMap.mul_apply]\n        have h\u2086 : (1 : (Fin n \u2192 \u211d) \u2192L[\u211d] (Fin n \u2192 \u211d)) v = v := by\n          simp [LinearMap.one_apply]\n        rw [h\u2085] at h\u2084\n        rw [h\u2086] at h\u2084\n        exact h\u2084\n      -- Using the property of norms, \u2016v\u2016 = \u2016Ring.inverse (fderiv \u211d F X\u2080) (fderiv \u211d F X\u2080 v)\u2016 \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016fderiv \u211d F X\u2080 v\u2016\n      calc\n        \u2016v\u2016 = \u2016(Ring.inverse (fderiv \u211d F X\u2080)) (fderiv \u211d F X\u2080 v)\u2016 := by rw [h\u2083]\n        _ \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016fderiv \u211d F X\u2080 v\u2016 := by\n          -- Applying the operator norm property\n          have h\u2087 : \u2016(Ring.inverse (fderiv \u211d F X\u2080)) (fderiv \u211d F X\u2080 v)\u2016 \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016fderiv \u211d F X\u2080 v\u2016 := by\n            -- Use the fact that the norm of the linear map applied to a vector is bounded by the norm of the linear map times the norm of the vector\n            exact LinearMap.norm_le_mul_norm _ _ _\n          exact h\u2087\n    -- Rearranging the inequality to get \u2016fderiv \u211d F X\u2080 v\u2016 \u2265 \u2016v\u2016 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016\n    have h\u2088 : 0 \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 := by positivity\n    have h\u2089 : 0 \u2264 \u2016fderiv \u211d F X\u2080 v\u2016 := by positivity\n    by_cases h\u2081\u2080 : \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 = 0\n    \u00b7 -- If \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 = 0, then \u2016v\u2016 \u2264 0 implies v = 0, and the result is trivial\n      have h\u2081\u2081 : \u2016v\u2016 = 0 := by\n        have h\u2081\u2082 : \u2016v\u2016 \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016fderiv \u211d F X\u2080 v\u2016 := h\u2081\n        have h\u2081\u2083 : \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016fderiv \u211d F X\u2080 v\u2016 = 0 := by\n          rw [h\u2081\u2080]\n          simp\n        linarith\n      have h\u2081\u2084 : v = 0 := by\n        simpa using h\u2081\u2081\n      simp [h\u2081\u2084]\n      <;>\n      (try positivity) <;>\n      (try simp_all) <;>\n      (try norm_num) <;>\n      (try linarith)\n    \u00b7 -- If \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 \u2260 0, we can divide both sides by \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016\n      have h\u2081\u2081 : 0 < \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 := by\n        contrapose! h\u2081\u2080\n        linarith\n      have h\u2081\u2082 : (1 : \u211d) / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 \u2265 0 := by positivity\n      have h\u2081\u2083 : \u2016fderiv \u211d F X\u2080 v\u2016 \u2265 (1 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016) * \u2016v\u2016 := by\n        calc\n          \u2016fderiv \u211d F X\u2080 v\u2016 \u2265 \u2016v\u2016 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 := by\n            -- Divide both sides of the inequality \u2016v\u2016 \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016fderiv \u211d F X\u2080 v\u2016 by \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016\n            have h\u2081\u2084 : \u2016v\u2016 \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016fderiv \u211d F X\u2080 v\u2016 := h\u2081\n            have h\u2081\u2085 : \u2016v\u2016 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 \u2264 \u2016fderiv \u211d F X\u2080 v\u2016 := by\n              rw [div_le_iff h\u2081\u2081]\n              nlinarith\n            linarith\n          _ = (1 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016) * \u2016v\u2016 := by\n            -- Simplify the expression \u2016v\u2016 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 to (1 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016) * \u2016v\u2016\n            field_simp [h\u2081\u2081.ne']\n            <;> ring_nf\n            <;> field_simp [h\u2081\u2081.ne']\n            <;> linarith\n      linarith\n  \n  have h_final : \u2200 X Y : Fin n \u2192 \u211d, \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2265 r * \u2016X - Y\u2016 := by\n    intro X Y\n    have h\u2081 : \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2265 (1 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016) * \u2016(X - Y : Fin n \u2192 \u211d)\u2016 := by\n      have h\u2082 : \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2265 (1 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016) * \u2016(X - Y : Fin n \u2192 \u211d)\u2016 := by\n        apply h_main\n      exact h\u2082\n    have h\u2082 : r * \u2016(X - Y : Fin n \u2192 \u211d)\u2016 = (1 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016) * \u2016(X - Y : Fin n \u2192 \u211d)\u2016 := by\n      rw [hr]\n      <;> ring_nf\n    linarith\n  \n  exact h_final", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 39, "column": 18, "endLine": 39, "endColumn": 50, "data": "invalid field notation, type is not of the form (C ...) where C is a constant\n  LinearMap\nhas type\n  (?m.49349 \u2192+* ?m.49350) \u2192\n    (M : Type ?u.49346) \u2192\n      (M\u2082 : Type ?u.49345) \u2192\n        [inst : AddCommMonoid M] \u2192\n          [inst_1 : AddCommMonoid M\u2082] \u2192\n            [inst : Module ?m.49349 M] \u2192 [inst : Module ?m.49350 M\u2082] \u2192 Type (max ?u.49346 ?u.49345)"}, {"line": 51, "column": 8, "endLine": 51, "endColumn": 16, "data": "linarith failed to find a contradiction\ncase h1.h\nn : \u2115\nF : (Fin n \u2192 \u211d) \u2192 Fin n \u2192 \u211d\nX\u2080 : Fin n \u2192 \u211d\nhF_diff : ContDiffAt \u211d 1 F X\u2080\nhF_nonsingular : IsUnit (fderiv \u211d F X\u2080)\nr : \u211d\nhr : r = 1 / \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016\nv : Fin n \u2192 \u211d\nh\u2081 : \u2016v\u2016 \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016(fderiv \u211d F X\u2080) v\u2016\nh\u2088 : 0 \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016\nh\u2089 : 0 \u2264 \u2016(fderiv \u211d F X\u2080) v\u2016\nh\u2081\u2080 : \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 = 0\nh\u2081\u2082 : \u2016v\u2016 \u2264 \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016(fderiv \u211d F X\u2080) v\u2016\nh\u2081\u2083 : \u2016Ring.inverse (fderiv \u211d F X\u2080)\u2016 * \u2016(fderiv \u211d F X\u2080) v\u2016 = 0\na\u271d : \u2016v\u2016 < 0\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Now choose $\\delta>0$ so that \\eqref{eq:6.2.12} holds.", "statement": "We assume:\n\u2022 $\\mathbf{F}:\\R^n\\to\\R^n$ is continuously differentiable on a neighborhood of $\\mathbf{X}_0$ [tc_1].\n\u2022 $\\epsilon$ is a given positive real number [tc_3].\n\u2022 $\\mathbf{G}(\\mathbf{X}) = \\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X}) - \\mathbf{F}(\\mathbf{X})$ [def_2].\nTherefore, we conclude:\n\u2022 For the given $\\epsilon > 0$ [tc_3], there exists a $\\delta > 0$ such that for all $\\mathbf{X}, \\mathbf{Y}$ in the open ball $B_\\delta(\\mathbf{X}_0)$, we have $|\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})| \\le \\epsilon |\\mathbf{X}-\\mathbf{Y}|$ [l3]. This property is cited as (6.2.12) in the proof.", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "def_2", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : ContDiffAt \u211d 1 F X\u2080)\n  (hF_nonsingular : IsUnit (fderiv \u211d F X\u2080))\n  (\u03b5 : \u211d) (h\u03b5 : 0 < \u03b5)\n  (G : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d))\n  (hG : \u2200 X, G X = fderiv \u211d F X\u2080 X - F X) :\n  \u2203 \u03b4 > 0, \u2200 X Y, \n    \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \n    \u2016G X - G Y\u2016 \u2264 \u03b5 * \u2016X - Y\u2016 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem local_inverse_lemma (n : \u2115)\n  (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d))\n  (X\u2080 : Fin n \u2192 \u211d)\n  (hF_diff : ContDiffAt \u211d 1 F X\u2080)\n  (hF_nonsingular : IsUnit (fderiv \u211d F X\u2080))\n  (\u03b5 : \u211d)\n  (h\u03b5 : 0 < \u03b5) :\n  \u2203 \u03b4 > 0, \u2200 (X Y : Fin n \u2192 \u211d), \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \u2016( (fderiv \u211d F X\u2080) X - F X ) - ( (fderiv \u211d F X\u2080) Y - F Y )\u2016 \u2264 \u03b5 * \u2016X - Y\u2016 := by\n  have h_main : \u2203 \u03b4 > 0, \u2200 (X Y : Fin n \u2192 \u211d), \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \u2016( (fderiv \u211d F X\u2080) X - F X ) - ( (fderiv \u211d F X\u2080) Y - F Y )\u2016 \u2264 \u03b5 * \u2016X - Y\u2016 := by sorry\n  sorry", "lean_pass": true, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The function type and differentiability condition are correctly captured. ContDiffAt \u211d 1 appropriately represents continuous differentiability in a neighborhood.", "The epsilon condition is perfectly translated with the positivity constraint.", "The definition of G is exactly captured using fderiv for the derivative.", "The Lipschitz-type conclusion is perfectly formalized with appropriate norm conditions and ball membership.", "The additional non-singularity condition is a reasonable mathematical assumption that doesn't contradict the natural language statement.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : ContDiffAt \u211d 1 F X\u2080)\n  (hF_nonsingular : IsUnit (fderiv \u211d F X\u2080))\n  (\u03b5 : \u211d) (h\u03b5 : 0 < \u03b5)\n  (G : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d))\n  (hG : \u2200 X, G X = fderiv \u211d F X\u2080 X - F X) :\n  \u2203 \u03b4 > 0, \u2200 X Y, \n    \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \n    \u2016G X - G Y\u2016 \u2264 \u03b5 * \u2016X - Y\u2016 := by\n  have h1 : ContinuousAt (fderiv \u211d F) X\u2080 := by\n    have h2 : ContDiffAt \u211d 1 F X\u2080 := hF_diff\n    -- Use the fact that the derivative of a C^1 function is continuous\n    have h3 : ContinuousAt (fderiv \u211d F) X\u2080 := by\n      -- The derivative of a C^1 function is continuous\n      apply h2.continuous_deriv_at\n    exact h3\n  \n  have h2 : \u2203 \u03b4 > (0 : \u211d), \u2200 (X Y : Fin n \u2192 \u211d), \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \u2016G X - G Y\u2016 \u2264 \u03b5 * \u2016X - Y\u2016 := by\n    -- Use the fact that the derivative is continuous at X\u2080 to find \u03b4\n    have h3 : ContinuousAt (fderiv \u211d F) X\u2080 := h1\n    -- Use the definition of continuity to find \u03b4\n    have h4 : \u2200 \u03b5 > 0, \u2203 \u03b4 > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016fderiv \u211d F X - fderiv \u211d F X\u2080\u2016 < \u03b5 := by\n      intro \u03b5 h\u03b5\n      have h5 : ContinuousAt (fderiv \u211d F) X\u2080 := h3\n      exact Metric.continuousAt_iff.mp h5 \u03b5 h\u03b5\n    -- Choose \u03b5' = \u03b5 / 2\n    have h6 : \u2203 \u03b4 > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016fderiv \u211d F X - fderiv \u211d F X\u2080\u2016 < \u03b5 / 2 := by\n      obtain \u27e8\u03b4, h\u03b4_pos, h\u03b4\u27e9 := h4 (\u03b5 / 2) (by linarith)\n      exact \u27e8\u03b4, h\u03b4_pos, fun X hX => h\u03b4 X hX\u27e9\n    -- Use the fact that F is differentiable at X\u2080 to find \u03b4'\n    have h7 : DifferentiableAt \u211d F X\u2080 := by\n      have h8 : ContDiffAt \u211d 1 F X\u2080 := hF_diff\n      have h9 : DifferentiableAt \u211d F X\u2080 := h8.differentiableAt (by norm_num)\n      exact h9\n    -- Use the definition of differentiability to find \u03b4'\n    have h8 : \u2200 \u03b5 > 0, \u2203 \u03b4' > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), \u2016X - X\u2080\u2016 < \u03b4' \u2192 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < \u03b5 * \u2016X - X\u2080\u2016 := by\n      intro \u03b5 h\u03b5\n      have h9 : HasFDerivAt F (fderiv \u211d F X\u2080) X\u2080 := h7.hasFDerivAt\n      -- Use the definition of the derivative to find \u03b4'\n      have h10 : \u2200 \u03b5 > 0, \u2203 \u03b4' > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), \u2016X - X\u2080\u2016 < \u03b4' \u2192 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < \u03b5 * \u2016X - X\u2080\u2016 := by\n        intro \u03b5 h\u03b5\n        have h11 : HasFDerivAt F (fderiv \u211d F X\u2080) X\u2080 := h9\n        -- Use the definition of the derivative to find \u03b4'\n        have h12 : \u2200 \u03b5 > 0, \u2203 \u03b4' > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), X \u2260 X\u2080 \u2192 \u2016X - X\u2080\u2016 < \u03b4' \u2192 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := by\n          intro \u03b5 h\u03b5\n          -- Use the definition of the derivative to find \u03b4'\n          have h13 : Filter.Tendsto (fun X : Fin n \u2192 \u211d => \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016) (\ud835\udcdd[\u2260] X\u2080) (\ud835\udcdd 0) := by\n            have h14 : HasFDerivAt F (fderiv \u211d F X\u2080) X\u2080 := h11\n            convert h14.norm_sub_div_tendsto_zero using 1 <;> simp [sub_ne_zero]\n          -- Use the definition of the derivative to find \u03b4'\n          have h15 : \u2203 \u03b4' > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), X \u2208 Set.Ioo (X\u2080 - \u03b4' \u2022 (1 : Fin n \u2192 \u211d)) (X\u2080 + \u03b4' \u2022 (1 : Fin n \u2192 \u211d)) \u2192 X \u2260 X\u2080 \u2192 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := by\n            have h16 : Filter.Tendsto (fun X : Fin n \u2192 \u211d => \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016) (\ud835\udcdd[\u2260] X\u2080) (\ud835\udcdd 0) := h13\n            have h17 : (\u03b5 : \u211d) > 0 := by assumption\n            have h18 : \u2200\u1da0 (X : Fin n \u2192 \u211d) in \ud835\udcdd[\u2260] X\u2080, \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := by\n              have h19 : Filter.Tendsto (fun X : Fin n \u2192 \u211d => \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016) (\ud835\udcdd[\u2260] X\u2080) (\ud835\udcdd 0) := h16\n              have h20 : (\u03b5 : \u211d) > 0 := by assumption\n              filter_upwards [h19 (gt_mem_nhds h20)] with X hX\n              linarith\n            -- Use the definition of the derivative to find \u03b4'\n            have h21 : \u2203 \u03b4' > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), X \u2208 Set.Ioo (X\u2080 - \u03b4' \u2022 (1 : Fin n \u2192 \u211d)) (X\u2080 + \u03b4' \u2022 (1 : Fin n \u2192 \u211d)) \u2192 X \u2260 X\u2080 \u2192 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := by\n              -- Use the definition of the derivative to find \u03b4'\n              have h22 : \u2200\u1da0 (X : Fin n \u2192 \u211d) in \ud835\udcdd[\u2260] X\u2080, \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := h18\n              -- Use the definition of the derivative to find \u03b4'\n              have h23 : \u2203 \u03b4' > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), X \u2208 Set.Ioo (X\u2080 - \u03b4' \u2022 (1 : Fin n \u2192 \u211d)) (X\u2080 + \u03b4' \u2022 (1 : Fin n \u2192 \u211d)) \u2192 X \u2260 X\u2080 \u2192 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := by\n                -- Use the definition of the derivative to find \u03b4'\n                rcases Metric.eventually_nhds_iff.mp h22 with \u27e8\u03b4', h\u03b4'_pos, h\u03b4'\u27e9\n                refine' \u27e8\u03b4', h\u03b4'_pos, _\u27e9\n                intro X hX hX_ne\n                have h24 : X \u2208 Set.Ioo (X\u2080 - \u03b4' \u2022 (1 : Fin n \u2192 \u211d)) (X\u2080 + \u03b4' \u2022 (1 : Fin n \u2192 \u211d)) := by\n                  simp only [Set.mem_Ioo] at hX \u22a2\n                  constructor <;>\n                  (try simp_all [dist_eq_norm, Real.dist_eq, Pi.norm_def, Finset.sum_const, nsmul_eq_mul]) <;>\n                  (try norm_num) <;>\n                  (try linarith) <;>\n                  (try\n                    {\n                      simp_all [Pi.dist_eq, Real.dist_eq, abs_lt]\n                      <;>\n                      (try norm_num) <;>\n                      (try linarith)\n                    })\n                have h25 : \u2016X - X\u2080\u2016 < \u03b4' := by\n                  simp only [Set.mem_Ioo] at hX\n                  have h26 : \u2016X - X\u2080\u2016 < \u03b4' := by\n                    calc\n                      \u2016X - X\u2080\u2016 = \u2016X - X\u2080\u2016 := rfl\n                      _ < \u03b4' := by\n                        simp_all [Real.dist_eq, Pi.dist_eq, abs_lt]\n                        <;>\n                        (try norm_num) <;>\n                        (try linarith)\n                  exact h26\n                have h27 : X \u2260 X\u2080 := hX_ne\n                have h28 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := h\u03b4' X h25 h27\n                exact h28\n              exact h23\n            exact h21\n          -- Use the definition of the derivative to find \u03b4'\n          obtain \u27e8\u03b4', h\u03b4'_pos, h\u03b4'\u27e9 := h15\n          refine' \u27e8\u03b4', h\u03b4'_pos, _\u27e9\n          intro X hX hX_ne hX_lt\n          have h29 : X \u2208 Set.Ioo (X\u2080 - \u03b4' \u2022 (1 : Fin n \u2192 \u211d)) (X\u2080 + \u03b4' \u2022 (1 : Fin n \u2192 \u211d)) := by\n            simp only [Set.mem_Ioo] at hX \u22a2\n            constructor <;>\n            (try simp_all [dist_eq_norm, Real.dist_eq, Pi.norm_def, Finset.sum_const, nsmul_eq_mul]) <;>\n            (try norm_num) <;>\n            (try linarith) <;>\n            (try\n              {\n                simp_all [Pi.dist_eq, Real.dist_eq, abs_lt]\n                <;>\n                (try norm_num) <;>\n                (try linarith)\n              })\n          have h30 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := h\u03b4' X h29 hX_ne\n          have h31 : \u2016X - X\u2080\u2016 > 0 := by\n            have h32 : X \u2260 X\u2080 := hX_ne\n            exact norm_pos_iff.mpr (by intro h; apply h32; simp_all [sub_eq_zero])\n          have h33 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < \u03b5 * \u2016X - X\u2080\u2016 := by\n            calc\n              \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 = (\u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016) * \u2016X - X\u2080\u2016 := by\n                field_simp [h31.ne']\n                <;> ring\n              _ < \u03b5 * \u2016X - X\u2080\u2016 := by\n                have h34 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := h30\n                have h35 : 0 \u2264 \u2016X - X\u2080\u2016 := norm_nonneg _\n                nlinarith\n          linarith\n        -- Use the definition of the derivative to find \u03b4'\n        have h22 : \u2200 \u03b5 > 0, \u2203 \u03b4' > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), X \u2260 X\u2080 \u2192 \u2016X - X\u2080\u2016 < \u03b4' \u2192 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := h12\n        -- Use the definition of the derivative to find \u03b4'\n        have h23 : \u2203 \u03b4' > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), \u2016X - X\u2080\u2016 < \u03b4' \u2192 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < \u03b5 * \u2016X - X\u2080\u2016 := by\n          -- Use the definition of the derivative to find \u03b4'\n          by_cases h : \u03b5 = 0\n          \u00b7 -- If \u03b5 = 0, then \u03b5 > 0 is false, so the statement is vacuously true\n            exfalso\n            linarith\n          \u00b7 -- If \u03b5 > 0, then we can proceed\n            have h24 : 0 < \u03b5 := by\n              contrapose! h\n              linarith\n            -- Use the definition of the derivative to find \u03b4'\n            obtain \u27e8\u03b4', h\u03b4'_pos, h\u03b4'\u27e9 := h22 \u03b5 h24\n            refine' \u27e8\u03b4', h\u03b4'_pos, _\u27e9\n            intro X hX\n            by_cases hX_eq : X = X\u2080\n            \u00b7 -- If X = X\u2080, then \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 = 0 < \u03b5 * \u2016X - X\u2080\u2016 = 0\n              simp_all [hX_eq]\n              <;>\n              (try norm_num) <;>\n              (try linarith)\n            \u00b7 -- If X \u2260 X\u2080, then we can use the inequality from h\u03b4'\n              have h25 : X \u2260 X\u2080 := hX_eq\n              have h26 : \u2016X - X\u2080\u2016 < \u03b4' := hX\n              have h27 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := h\u03b4' X h25 h26\n              have h28 : \u2016X - X\u2080\u2016 > 0 := by\n                have h29 : X \u2260 X\u2080 := h25\n                exact norm_pos_iff.mpr (by intro h; apply h29; simp_all [sub_eq_zero])\n              have h30 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < \u03b5 * \u2016X - X\u2080\u2016 := by\n                calc\n                  \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 = (\u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016) * \u2016X - X\u2080\u2016 := by\n                    field_simp [h28.ne']\n                    <;> ring\n                  _ < \u03b5 * \u2016X - X\u2080\u2016 := by\n                    have h31 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 / \u2016X - X\u2080\u2016 < \u03b5 := h27\n                    have h32 : 0 \u2264 \u2016X - X\u2080\u2016 := norm_nonneg _\n                    nlinarith\n              linarith\n        exact h23\n      -- Use the definition of the derivative to find \u03b4'\n      exact h10 \u03b5 h\u03b5\n    -- Choose \u03b5' = \u03b5 / 2\n    have h9 : \u2203 \u03b4' > (0 : \u211d), \u2200 (X : Fin n \u2192 \u211d), \u2016X - X\u2080\u2016 < \u03b4' \u2192 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < (\u03b5 / 2) * \u2016X - X\u2080\u2016 := by\n      obtain \u27e8\u03b4', h\u03b4'_pos, h\u03b4'\u27e9 := h8 (\u03b5 / 2) (by linarith)\n      refine' \u27e8\u03b4', h\u03b4'_pos, _\u27e9\n      intro X hX\n      have h10 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < (\u03b5 / 2) * \u2016X - X\u2080\u2016 := by\n        have h11 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < (\u03b5 / 2) * \u2016X - X\u2080\u2016 := by\n          calc\n            \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < (\u03b5 / 2) * \u2016X - X\u2080\u2016 := h\u03b4' X hX\n            _ = (\u03b5 / 2) * \u2016X - X\u2080\u2016 := by rfl\n        exact h11\n      exact h10\n    -- Combine \u03b4 and \u03b4'\n    obtain \u27e8\u03b4, h\u03b4_pos, h\u03b4\u27e9 := h6\n    obtain \u27e8\u03b4', h\u03b4'_pos, h\u03b4'\u27e9 := h9\n    use min \u03b4 \u03b4', by positivity\n    intro X Y hX hY\n    have h10 : \u2016X - X\u2080\u2016 < min \u03b4 \u03b4' := by\n      calc\n        \u2016X - X\u2080\u2016 < \u03b4 := hX\n        _ \u2264 min \u03b4 \u03b4' := by\n          apply min_le_left\n    have h11 : \u2016Y - X\u2080\u2016 < min \u03b4 \u03b4' := by\n      calc\n        \u2016Y - X\u2080\u2016 < \u03b4 := hY\n        _ \u2264 min \u03b4 \u03b4' := by\n          apply min_le_left\n    have h12 : \u2016X - X\u2080\u2016 < \u03b4 := by\n      calc\n        \u2016X - X\u2080\u2016 < min \u03b4 \u03b4' := h10\n        _ \u2264 \u03b4 := by\n          apply min_le_left\n    have h13 : \u2016Y - X\u2080\u2016 < \u03b4 := by\n      calc\n        \u2016Y - X\u2080\u2016 < min \u03b4 \u03b4' := h11\n        _ \u2264 \u03b4 := by\n          apply min_le_left\n    have h14 : \u2016X - X\u2080\u2016 < \u03b4' := by\n      calc\n        \u2016X - X\u2080\u2016 < min \u03b4 \u03b4' := h10\n        _ \u2264 \u03b4' := by\n          apply min_le_right\n    have h15 : \u2016Y - X\u2080\u2016 < \u03b4' := by\n      calc\n        \u2016Y - X\u2080\u2016 < min \u03b4 \u03b4' := h11\n        _ \u2264 \u03b4' := by\n          apply min_le_right\n    have h16 : \u2016fderiv \u211d F X - fderiv \u211d F X\u2080\u2016 < \u03b5 / 2 := by\n      have h17 : \u2016X - X\u2080\u2016 < \u03b4 := h12\n      have h18 : \u2016fderiv \u211d F X - fderiv \u211d F X\u2080\u2016 < \u03b5 / 2 := h\u03b4 X h17\n      exact h18\n    have h19 : \u2016fderiv \u211d F Y - fderiv \u211d F X\u2080\u2016 < \u03b5 / 2 := by\n      have h20 : \u2016Y - X\u2080\u2016 < \u03b4 := h13\n      have h21 : \u2016fderiv \u211d F Y - fderiv \u211d F X\u2080\u2016 < \u03b5 / 2 := h\u03b4 Y h20\n      exact h21\n    have h20 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < (\u03b5 / 2) * \u2016X - X\u2080\u2016 := by\n      have h21 : \u2016X - X\u2080\u2016 < \u03b4' := h14\n      have h22 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < (\u03b5 / 2) * \u2016X - X\u2080\u2016 := h\u03b4' X h21\n      exact h22\n    have h21 : \u2016F Y - F X\u2080 - fderiv \u211d F X\u2080 (Y - X\u2080)\u2016 < (\u03b5 / 2) * \u2016Y - X\u2080\u2016 := by\n      have h22 : \u2016Y - X\u2080\u2016 < \u03b4' := h15\n      have h23 : \u2016F Y - F X\u2080 - fderiv \u211d F X\u2080 (Y - X\u2080)\u2016 < (\u03b5 / 2) * \u2016Y - X\u2080\u2016 := h\u03b4' Y h22\n      exact h23\n    have h22 : G X = fderiv \u211d F X\u2080 X - F X := by\n      rw [hG]\n    have h23 : G Y = fderiv \u211d F X\u2080 Y - F Y := by\n      rw [hG]\n    have h24 : G X - G Y = (fderiv \u211d F X\u2080 X - F X) - (fderiv \u211d F X\u2080 Y - F Y) := by\n      rw [h22, h23]\n    have h25 : G X - G Y = fderiv \u211d F X\u2080 (X - Y) - (F X - F Y) := by\n      calc\n        G X - G Y = (fderiv \u211d F X\u2080 X - F X) - (fderiv \u211d F X\u2080 Y - F Y) := by rw [h24]\n        _ = (fderiv \u211d F X\u2080 X - fderiv \u211d F X\u2080 Y) - (F X - F Y) := by\n          simp [sub_eq_add_neg]\n          <;>\n          (try ring_nf) <;>\n          (try simp_all [sub_eq_add_neg]) <;>\n          (try linarith)\n        _ = fderiv \u211d F X\u2080 (X - Y) - (F X - F Y) := by\n          have h26 : fderiv \u211d F X\u2080 X - fderiv \u211d F X\u2080 Y = fderiv \u211d F X\u2080 (X - Y) := by\n            have h27 : fderiv \u211d F X\u2080 X - fderiv \u211d F X\u2080 Y = fderiv \u211d F X\u2080 (X - Y) := by\n              rw [\u2190 fderiv \u211d F X\u2080 (X - Y)]\n              <;> simp [sub_eq_add_neg, fderiv_add]\n              <;> abel\n            exact h27\n          rw [h26]\n          <;>\n          (try simp [sub_eq_add_neg])\n          <;>\n          (try ring_nf)\n          <;>\n          (try simp_all [sub_eq_add_neg])\n          <;>\n          (try linarith)\n    have h26 : \u2016G X - G Y\u2016 = \u2016fderiv \u211d F X\u2080 (X - Y) - (F X - F Y)\u2016 := by\n      rw [h25]\n      <;>\n      (try simp [norm_sub_rev])\n    have h27 : \u2016F X - F Y - fderiv \u211d F X\u2080 (X - Y)\u2016 \u2264 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 + \u2016F Y - F X\u2080 - fderiv \u211d F X\u2080 (Y - X\u2080)\u2016 := by\n      calc\n        \u2016F X - F Y - fderiv \u211d F X\u2080 (X - Y)\u2016 = \u2016(F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)) - (F Y - F X\u2080 - fderiv \u211d F X\u2080 (Y - X\u2080))\u2016 := by\n          simp [sub_eq_add_neg]\n          <;>\n          (try abel) <;>\n          (try simp_all [sub_eq_add_neg]) <;>\n          (try ring_nf) <;>\n          (try linarith)\n        _ \u2264 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 + \u2016F Y - F X\u2080 - fderiv \u211d F X\u2080 (Y - X\u2080)\u2016 := by\n          apply norm_sub_le\n    have h28 : \u2016F X - F Y - fderiv \u211d F X\u2080 (X - Y)\u2016 < (\u03b5 / 2) * \u2016X - X\u2080\u2016 + (\u03b5 / 2) * \u2016Y - X\u2080\u2016 := by\n      calc\n        \u2016F X - F Y - fderiv \u211d F X\u2080 (X - Y)\u2016 \u2264 \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 + \u2016F Y - F X\u2080 - fderiv \u211d F X\u2080 (Y - X\u2080)\u2016 := h27\n        _ < (\u03b5 / 2) * \u2016X - X\u2080\u2016 + (\u03b5 / 2) * \u2016Y - X\u2080\u2016 := by\n          have h29 : \u2016F X - F X\u2080 - fderiv \u211d F X\u2080 (X - X\u2080)\u2016 < (\u03b5 / 2) * \u2016X - X\u2080\u2016 := h20\n          have h30 : \u2016F Y - F X\u2080 - fderiv \u211d F X\u2080 (Y - X\u2080)\u2016 < (\u03b5 / 2) * \u2016Y - X\u2080\u2016 := h21\n          linarith\n    have h29 : \u2016G X - G Y\u2016 < (\u03b5 / 2) * \u2016X - X\u2080\u2016 + (\u03b5 / 2) * \u2016Y - X\u2080\u2016 := by\n      calc\n        \u2016G X - G Y\u2016 = \u2016fderiv \u211d F X\u2080 (X - Y) - (F X - F Y)\u2016 := by rw [h26]\n        _ = \u2016F X - F Y - fderiv \u211d F X\u2080 (X - Y)\u2016 := by\n          rw [norm_sub_rev]\n        _ < (\u03b5 / 2) * \u2016X - X\u2080\u2016 + (\u03b5 / 2) * \u2016Y - X\u2080\u2016 := h28\n    have h30 : (\u03b5 / 2) * \u2016X - X\u2080\u2016 + (\u03b5 / 2) * \u2016Y - X\u2080\u2016 \u2264 \u03b5 * \u2016X - Y\u2016 := by\n      have h31 : \u2016X - Y\u2016 \u2265 \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by\n        calc\n          \u2016X - Y\u2016 = \u2016(X - X\u2080) - (Y - X\u2080)\u2016 := by\n            simp [sub_eq_add_neg]\n            <;>\n            (try abel)\n          _ \u2265 \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by\n            -- Use the reverse triangle inequality\n            have h32 : \u2016(X - X\u2080) - (Y - X\u2080)\u2016 \u2265 \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by\n              -- Use the reverse triangle inequality\n              calc\n                \u2016(X - X\u2080) - (Y - X\u2080)\u2016 \u2265 \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by\n                  -- Use the reverse triangle inequality\n                  have h33 : \u2016(X - X\u2080) - (Y - X\u2080)\u2016 \u2265 \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by\n                    -- Use the reverse triangle inequality\n                    calc\n                      \u2016(X - X\u2080) - (Y - X\u2080)\u2016 \u2265 \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by\n                        -- Use the reverse triangle inequality\n                        have h34 : \u2016(X - X\u2080) - (Y - X\u2080)\u2016 \u2265 \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by\n                          -- Use the reverse triangle inequality\n                          linarith [norm_sub_le (X - X\u2080) (Y - X\u2080)]\n                        linarith\n                      _ = \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by rfl\n                  linarith\n                _ = \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by rfl\n            linarith\n          _ = \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by rfl\n      have h32 : 0 \u2264 \u2016X - X\u2080\u2016 := norm_nonneg _\n      have h33 : 0 \u2264 \u2016Y - X\u2080\u2016 := norm_nonneg _\n      have h34 : 0 \u2264 \u03b5 := by linarith\n      cases' le_total \u2016X - X\u2080\u2016 \u2016Y - X\u2080\u2016 with h35 h35\n      \u00b7 -- Case 1: \u2016X - X\u2080\u2016 \u2264 \u2016Y - X\u2080\u2016\n        have h36 : (\u03b5 / 2) * \u2016X - X\u2080\u2016 + (\u03b5 / 2) * \u2016Y - X\u2080\u2016 \u2264 \u03b5 * \u2016X - Y\u2016 := by\n          have h37 : \u2016X - Y\u2016 \u2265 \u2016Y - X\u2080\u2016 - \u2016X - X\u2080\u2016 := by\n            linarith [h31]\n          have h38 : (\u03b5 / 2) * \u2016X - X\u2080\u2016 + (\u03b5 / 2) * \u2016Y - X\u2080\u2016 = (\u03b5 / 2) * (\u2016X - X\u2080\u2016 + \u2016Y - X\u2080\u2016) := by ring\n          have h39 : (\u03b5 / 2) * (\u2016X - X\u2080\u2016 + \u2016Y - X\u2080\u2016) \u2264 \u03b5 * \u2016X - Y\u2016 := by\n            have h40 : \u2016X - X\u2080\u2016 + \u2016Y - X\u2080\u2016 \u2264 2 * \u2016X - Y\u2016 := by\n              calc\n                \u2016X - X\u2080\u2016 + \u2016Y - X\u2080\u2016 \u2264 \u2016X - Y\u2016 + \u2016Y - X\u2080\u2016 + \u2016Y - X\u2080\u2016 := by\n                  have h41 : \u2016X - X\u2080\u2016 \u2264 \u2016X - Y\u2016 + \u2016Y - X\u2080\u2016 := by\n                    calc\n                      \u2016X - X\u2080\u2016 = \u2016(X - Y) + (Y - X\u2080)\u2016 := by\n                        simp [sub_eq_add_neg]\n                        <;> abel\n                      _ \u2264 \u2016X - Y\u2016 + \u2016Y - X\u2080\u2016 := norm_add_le _ _\n                  linarith\n                _ = \u2016X - Y\u2016 + 2 * \u2016Y - X\u2080\u2016 := by ring\n                _ \u2264 \u2016X - Y\u2016 + 2 * \u2016X - Y\u2016 := by\n                  have h42 : \u2016Y - X\u2080\u2016 \u2264 \u2016X - Y\u2016 := by\n                    calc\n                      \u2016Y - X\u2080\u2016 \u2264 \u2016X - Y\u2016 := by\n                        have h43 : \u2016Y - X\u2080\u2016 \u2264 \u2016X - Y\u2016 := by\n                          calc\n                            \u2016Y - X\u2080\u2016 = \u2016Y - X\u2080\u2016 := rfl\n                            _ \u2264 \u2016X - Y\u2016 := by\n                              have h44 : \u2016Y - X\u2080\u2016 \u2264 \u2016X - Y\u2016 + \u2016X - X\u2080\u2016 := by\n                                calc\n                                  \u2016Y - X\u2080\u2016 = \u2016(Y - X) + (X - X\u2080)\u2016 := by\n                                    simp [sub_eq_add_neg]\n                                    <;> abel\n                                  _ \u2264 \u2016Y - X\u2016 + \u2016X - X\u2080\u2016 := norm_add_le _ _\n                                  _ = \u2016X - Y\u2016 + \u2016X - X\u2080\u2016 := by\n                                    simp [norm_sub_rev]\n                              linarith [h35]\n                        linarith\n                      _ = \u2016X - Y\u2016 := by rfl\n                  nlinarith\n                _ = 3 * \u2016X - Y\u2016 := by ring\n                _ \u2264 2 * \u2016X - Y\u2016 := by\n                  have h45 : \u2016X - Y\u2016 \u2265 0 := norm_nonneg _\n                  nlinarith\n              <;>\n              (try linarith)\n            have h46 : 0 \u2264 \u03b5 := by linarith\n            have h47 : 0 \u2264 \u2016X - Y\u2016 := norm_nonneg _\n            nlinarith\n          linarith\n        linarith\n      \u00b7 -- Case 2: \u2016Y - X\u2080\u2016 \u2264 \u2016X - X\u2080\u2016\n        have h36 : (\u03b5 / 2) * \u2016X - X\u2080\u2016 + (\u03b5 / 2) * \u2016Y - X\u2080\u2016 \u2264 \u03b5 * \u2016X - Y\u2016 := by\n          have h37 : \u2016X - Y\u2016 \u2265 \u2016X - X\u2080\u2016 - \u2016Y - X\u2080\u2016 := by\n            linarith [h31]\n          have h38 : (\u03b5 / 2) * \u2016X - X\u2080\u2016 + (\u03b5 / 2) * \u2016Y - X\u2080\u2016 = (\u03b5 / 2) * (\u2016X - X\u2080\u2016 + \u2016Y - X\u2080\u2016) := by ring\n          have h39 : (\u03b5 / 2) * (\u2016X - X\u2080\u2016 + \u2016Y - X\u2080\u2016) \u2264 \u03b5 * \u2016X - Y\u2016 := by\n            have h40 : \u2016X - X\u2080\u2016 + \u2016Y - X\u2080\u2016 \u2264 2 * \u2016X - Y\u2016 := by\n              calc\n                \u2016X - X\u2080\u2016 + \u2016Y - X\u2080\u2016 \u2264 \u2016X - X\u2080\u2016 + \u2016X - X\u2080\u2016 := by\n                  gcongr <;> linarith\n                _ = 2 * \u2016X - X\u2080\u2016 := by ring\n                _ \u2264 2 * \u2016X - Y\u2016 := by\n                  have h41 : \u2016X - X\u2080\u2016 \u2264 \u2016X - Y\u2016 := by\n                    calc\n                      \u2016X - X\u2080\u2016 \u2264 \u2016X - Y\u2016 := by\n                        have h42 : \u2016X - X\u2080\u2016 \u2264 \u2016X - Y\u2016 := by\n                          calc\n                            \u2016X - X\u2080\u2016 = \u2016X - X\u2080\u2016 := rfl\n                            _ \u2264 \u2016X - Y\u2016 := by\n                              have h43 : \u2016X - X\u2080\u2016 \u2264 \u2016X - Y\u2016 + \u2016Y - X\u2080\u2016 := by\n                                calc\n                                  \u2016X - X\u2080\u2016 = \u2016(X - Y) + (Y - X\u2080)\u2016 := by\n                                    simp [sub_eq_add_neg]\n                                    <;> abel\n                                  _ \u2264 \u2016X - Y\u2016 + \u2016Y - X\u2080\u2016 := norm_add_le _ _\n                              linarith [h35]\n                        linarith\n                      _ = \u2016X - Y\u2016 := by rfl\n                  nlinarith\n                _ = 2 * \u2016X - Y\u2016 := by rfl\n            have h41 : 0 \u2264 \u03b5 := by linarith\n            have h42 : 0 \u2264 \u2016X - Y\u2016 := norm_nonneg _\n            nlinarith\n          linarith\n        linarith\n    have h31 : \u2016G X - G Y\u2016 \u2264 \u03b5 * \u2016X - Y\u2016 := by\n      calc\n        \u2016G X - G Y\u2016 < (\u03b5 / 2) * \u2016X - X\u2080\u2016 + (\u03b5 / 2) * \u2016Y - X\u2080\u2016 := h29\n        _ \u2264 \u03b5 * \u2016X - Y\u2016 := h30\n        _ = \u03b5 * \u2016X - Y\u2016 := by rfl\n    exact h31\n  \n  obtain \u27e8\u03b4, h\u03b4_pos, h\u03b4\u27e9 := h2\n  refine' \u27e8\u03b4, h\u03b4_pos, _\u27e9\n  intro X Y hX hY\n  have h3 := h\u03b4 X Y hX hY\n  exact h3"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Then \\eqref{eq:6.2.16} and \\eqref{eq:6.2.17} imply \\eqref{eq:6.2.15}.", "statement": "We assume:\n\u2022 $\\epsilon$ is a given positive real number [tc_3].\n\u2022 $r = \\frac{1}{\\|(\\mathbf{F}'(\\mathbf{X}_0))^{-1}\\|}$ [def_1].\n\u2022 For any $\\mathbf{X}, \\mathbf{Y}$, $|\\mathbf{F}(\\mathbf{X})-\\mathbf{F}(\\mathbf{Y})|\\ge\\big| |\\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X} -\\mathbf{Y})|-|\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})|\\big|$ [l1].\n\u2022 For any $\\mathbf{X}, \\mathbf{Y}$, $|\\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X}-\\mathbf{Y})|\\ge r|\\mathbf{X}-\\mathbf{Y}|$ [l2].\n\u2022 There exists a $\\delta > 0$ such that for all $\\mathbf{X}, \\mathbf{Y} \\in B_\\delta(\\mathbf{X}_0)$, $|\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})| \\le \\epsilon |\\mathbf{X}-\\mathbf{Y}|$ [l3].\nTherefore, we conclude:\n\u2022 For the $\\delta$ whose existence is guaranteed by [l3], if $\\mathbf{X}, \\mathbf{Y} \\in B_\\delta(\\mathbf{X}_0)$, then $|\\mathbf{F}(\\mathbf{X})-\\mathbf{F}(\\mathbf{Y})|\\ge (r-\\epsilon) |\\mathbf{X}-\\mathbf{Y}|$ [ts_1].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "def_2", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : ContDiffAt \u211d 1 F X\u2080)\n  (hF_nonsingular : IsUnit (fderiv \u211d F X\u2080))\n  (\u03b5 : \u211d) (h\u03b5 : 0 < \u03b5)\n  (r : \u211d) (hr : r = 1 / \u2016(fderiv \u211d F X\u2080)\u207b\u00b9\u2016)\n  (G : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d))\n  (hG : \u2200 X, G X = fderiv \u211d F X\u2080 X - F X)\n  (l1 : \u2200 X Y, \u2016F X - F Y\u2016 \u2265 |\u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016|)\n  (l2 : \u2200 X Y, \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2265 r * \u2016X - Y\u2016)\n  (l3 : \u2203 \u03b4 > 0, \u2200 X Y, \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \u2016G X - G Y\u2016 \u2264 \u03b5 * \u2016X - Y\u2016) :\n  \u2203 \u03b4 > 0, \u2200 X Y, \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \u2016F X - F Y\u2016 \u2265 (r - \u03b5) * \u2016X - Y\u2016 := by sorry", "lean_pass": false, "error_msg": [{"line": 13, "column": 25, "endLine": 13, "endColumn": 42, "data": "failed to synthesize\n  Inv ((Fin n \u2192 \u211d) \u2192L[\u211d] Fin n \u2192 \u211d)\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  {n : \u2115} (F : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d)) \n  (X\u2080 : Fin n \u2192 \u211d) \n  (hF_diff : ContDiffAt \u211d 1 F X\u2080)\n  (hF_nonsingular : IsUnit (fderiv \u211d F X\u2080))\n  (\u03b5 : \u211d) (h\u03b5 : 0 < \u03b5)\n  (r : \u211d)\n  (G : (Fin n \u2192 \u211d) \u2192 (Fin n \u2192 \u211d))\n  (hG : \u2200 X, G X = fderiv \u211d F X\u2080 X - F X)\n  (l1 : \u2200 X Y, \u2016F X - F Y\u2016 \u2265 |\u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016|)\n  (l2 : \u2200 X Y, \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2265 r * \u2016X - Y\u2016)\n  (l3 : \u2203 \u03b4 > 0, \u2200 X Y, \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \u2016G X - G Y\u2016 \u2264 \u03b5 * \u2016X - Y\u2016) :\n  \u2203 \u03b4 > 0, \u2200 X Y, \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \u2016F X - F Y\u2016 \u2265 (r - \u03b5) * \u2016X - Y\u2016 := by\n  have h_main : \u2203 \u03b4 > 0, \u2200 X Y, \u2016X - X\u2080\u2016 < \u03b4 \u2192 \u2016Y - X\u2080\u2016 < \u03b4 \u2192 \u2016F X - F Y\u2016 \u2265 (r - \u03b5) * \u2016X - Y\u2016 := by\n    obtain \u27e8\u03b4, h\u03b4_pos, h\u03b4\u27e9 := l3\n    refine' \u27e8\u03b4, h\u03b4_pos, fun X Y hX hY => _\u27e9\n    have h4 : \u2016G X - G Y\u2016 \u2264 \u03b5 * \u2016X - Y\u2016 := h\u03b4 X Y hX hY\n    have h5 : \u2016F X - F Y\u2016 \u2265 |\u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016| := l1 X Y\n    have h6 : \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016 \u2264 \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 := by\n      linarith [norm_nonneg (G X - G Y)]\n    have h7 : \u2016F X - F Y\u2016 \u2265 \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016 := by\n      -- Since |a - b| \u2265 a - b, we have \u2016F X - F Y\u2016 \u2265 a - b\n      have h7\u2081 : \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016 \u2264 |\u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016| := by\n        exact le_abs_self _\n      linarith\n    have h8 : \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u2016G X - G Y\u2016 \u2265 \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u03b5 * \u2016X - Y\u2016 := by\n      -- Because \u2016G X - G Y\u2016 \u2264 \u03b5 * \u2016X - Y\u2016\n      linarith\n    have h9 : \u2016F X - F Y\u2016 \u2265 \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u03b5 * \u2016X - Y\u2016 := by\n      -- Combining h7 and h8\n      linarith\n    have h10 : \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2265 r * \u2016X - Y\u2016 := l2 X Y\n    have h11 : \u2016F X - F Y\u2016 \u2265 (r - \u03b5) * \u2016X - Y\u2016 := by\n      -- Using h10 and h9\n      calc\n        \u2016F X - F Y\u2016 \u2265 \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 - \u03b5 * \u2016X - Y\u2016 := h9\n        _ \u2265 r * \u2016X - Y\u2016 - \u03b5 * \u2016X - Y\u2016 := by\n          -- Since \u2016fderiv \u211d F X\u2080 (X - Y)\u2016 \u2265 r * \u2016X - Y\u2016\n          linarith\n        _ = (r - \u03b5) * \u2016X - Y\u2016 := by ring\n    exact h11\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    