
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $(a_n)$ be a sequence defined by $a_n = \frac{n^2-1}{3n^2+n}$. The limit of the sequence $(a_n)$ is $\frac{1}{3}$.

Proof: To find the limit of the sequence $(a_n)$, we evaluate the expression $\lim_{n 	o \infty} \frac{n^2-1}{3n^2+n}$. We can divide both the numerator and the denominator by the highest power of $n$, which is $n^2$. This gives us $\lim_{n 	o \infty} \frac{(n^2/n^2)-(1/n^2)}{(3n^2/n^2)+(n/n^2)} = \lim_{n 	o \infty} \frac{1-1/n^2}{3+1/n}$. We know that as $n$ approaches infinity, the terms $1/n^2$ and $1/n$ approach $0$. Therefore, we can substitute $0$ for these terms in the expression, which gives us $\frac{1-0}{3+0}$. This simplifies to $\frac{1}{3}$. So, the limit of the sequence $(a_n)$ is $\frac{1}{3}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "$(a_n)$ is a sequence defined by $a_n = \\frac{n^2-1}{3n^2+n}$", "statement": "Premise:\n\u2022 a\u2099 = (n\u00b2-1)/(3n\u00b2+n) [tc_1]", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_1 : \n  let a : \u2115 \u2192 \u211d := fun n => (n^2 - 1) / (3 * n^2 + n)\n  Filter.Tendsto a Filter.atTop (nhds (1/3)) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean definition of sequence a matches the natural language formula exactly, with appropriate type annotations", "The natural language explicitly states there are no conclusions in this premise step, but the Lean formalization includes a conclusion about the limit of the sequence tending to 1/3"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean definition of sequence a matches the natural language formula exactly, with appropriate type annotations', 'The natural language explicitly states there are no conclusions in this premise step, but the Lean formalization includes a conclusion about the limit of the sequence tending to 1/3']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "To find the limit of the sequence $(a_n)$, we evaluate the expression $\\lim_{n \\to \\infty} \\frac{n^2-1}{3n^2+n}$. We can divide both the numerator and the denominator by the highest power of $n$, which is $n^2$. This gives us $\\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n}$", "statement": "We assume:\n\u2022 a\u2099 = (n\u00b2-1)/(3n\u00b2+n) [tc_1]\nTherefore, we conclude:\n\u2022 lim_{n \u2192 \u221e} a\u2099 = lim_{n \u2192 \u221e} (1-1/n\u00b2)/(3+1/n) [l1]", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 : \n  \u2200 n : \u2115, n > 0 \u2192 \n  (n^2 - 1) / (3 * n^2 + n) = (1 - 1/n^2) / (3 + 1/n) \u2227\n  Filter.Tendsto (fun n => (1 - 1/n^2) / (3 + 1/n)) Filter.atTop (nhds (1/3)) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 : \n  \u2200 n : \u2115, n > 0 \u2192 \n  (n^2 - 1) / (3 * n^2 + n) = (1 - 1/n^2) / (3 + 1/n) \u2227\n  Filter.Tendsto (fun n => (1 - 1/n^2) / (3 + 1/n)) Filter.atTop (nhds (1/3)) := by\n  have h_main : \u2200 (n : \u2115), n > 0 \u2192 (n^2 - 1) / (3 * n^2 + n) = (1 - 1/n^2) / (3 + 1/n) := by\n    intro n hn\n    have h\u2081 : (n^2 - 1) / (3 * n^2 + n) = 0 := by\n      have h\u2081\u2081 : n^2 - 1 < 3 * n^2 + n := by\n        cases n with\n        | zero => contradiction\n        | succ n =>\n          cases n with\n          | zero => norm_num\n          | succ n =>\n            simp [Nat.mul_succ, Nat.pow_succ, Nat.add_assoc] at *\n            <;> ring_nf at *\n            <;> omega\n      have h\u2081\u2082 : (n^2 - 1) / (3 * n^2 + n) = 0 := by\n        apply Nat.div_eq_of_lt\n        <;> nlinarith\n      exact h\u2081\u2082\n    have h\u2082 : (1 - 1 / n ^ 2) / (3 + 1 / n) = 0 := by\n      by_cases h : n = 1\n      \u00b7 -- Case n = 1\n        subst h\n        norm_num\n      \u00b7 -- Case n \u2265 2\n        have h\u2083 : n \u2265 2 := by\n          by_contra h\u2084\n          interval_cases n <;> norm_num at h hn \u22a2 <;> simp_all (config := {decide := true})\n        have h\u2084 : 1 / n ^ 2 = 0 := by\n          have h\u2085 : n ^ 2 \u2265 4 := by\n            have h\u2085\u2081 : n \u2265 2 := h\u2083\n            nlinarith\n          have h\u2086 : 1 < n ^ 2 := by nlinarith\n          have h\u2087 : 1 / n ^ 2 = 0 := by\n            apply Nat.div_eq_of_lt\n            <;> nlinarith\n          exact h\u2087\n        have h\u2085 : 1 / n = 0 := by\n          have h\u2085\u2081 : n \u2265 2 := h\u2083\n          have h\u2085\u2082 : 1 < n := by linarith\n          have h\u2085\u2083 : 1 / n = 0 := by\n            apply Nat.div_eq_of_lt\n            <;> linarith\n          exact h\u2085\u2083\n        have h\u2086 : (1 - 1 / n ^ 2) = 1 := by\n          rw [h\u2084]\n          <;> norm_num\n        have h\u2087 : (3 + 1 / n) = 3 := by\n          rw [h\u2085]\n          <;> norm_num\n        have h\u2088 : (1 - 1 / n ^ 2) / (3 + 1 / n) = 1 / 3 := by\n          rw [h\u2086, h\u2087]\n          <;> norm_num\n        have h\u2089 : 1 / 3 = 0 := by norm_num\n        rw [h\u2088, h\u2089]\n    -- Combine the results to prove the main statement\n    have h\u2083 : (n^2 - 1) / (3 * n^2 + n) = (1 - 1 / n ^ 2) / (3 + 1 / n) := by\n      rw [h\u2081, h\u2082]\n    exact h\u2083\n  \n  have h_limit : Filter.Tendsto (fun n : \u2115 => (1 - 1 / n ^ 2) / (3 + 1 / n)) Filter.atTop (nhds (1 / 3)) := by\n    have h\u2081 : \u2200 n : \u2115, n \u2265 1 \u2192 (1 - 1 / n ^ 2) / (3 + 1 / n) = 0 := by\n      intro n hn\n      by_cases h : n = 1\n      \u00b7 -- Case n = 1\n        subst h\n        norm_num\n      \u00b7 -- Case n \u2265 2\n        have h\u2082 : n \u2265 2 := by\n          by_contra h\u2083\n          interval_cases n <;> norm_num at hn h \u22a2 <;> simp_all (config := {decide := true})\n        have h\u2083 : 1 / n ^ 2 = 0 := by\n          have h\u2084 : n ^ 2 \u2265 4 := by\n            have h\u2085 : n \u2265 2 := h\u2082\n            nlinarith\n          have h\u2085 : 1 < n ^ 2 := by nlinarith\n          have h\u2086 : 1 / n ^ 2 = 0 := by\n            apply Nat.div_eq_of_lt\n            <;> nlinarith\n          exact h\u2086\n        have h\u2084 : 1 / n = 0 := by\n          have h\u2085 : n \u2265 2 := h\u2082\n          have h\u2086 : 1 < n := by linarith\n          have h\u2087 : 1 / n = 0 := by\n            apply Nat.div_eq_of_lt\n            <;> linarith\n          exact h\u2087\n        have h\u2085 : (1 - 1 / n ^ 2) = 1 := by\n          rw [h\u2083]\n          <;> norm_num\n        have h\u2086 : (3 + 1 / n) = 3 := by\n          rw [h\u2084]\n          <;> norm_num\n        have h\u2087 : (1 - 1 / n ^ 2) / (3 + 1 / n) = 1 / 3 := by\n          rw [h\u2085, h\u2086]\n          <;> norm_num\n        have h\u2088 : 1 / 3 = 0 := by norm_num\n        rw [h\u2087, h\u2088]\n    -- Use the fact that the function is eventually 0 to prove the limit\n    have h\u2082 : Filter.Tendsto (fun n : \u2115 => (1 - 1 / n ^ 2) / (3 + 1 / n)) Filter.atTop (nhds 0) := by\n      have h\u2083 : \u2200\u1da0 (n : \u2115) in Filter.atTop, (1 - 1 / n ^ 2) / (3 + 1 / n) = 0 := by\n        filter_upwards [Filter.eventually_ge_atTop 1] with n hn\n        exact h\u2081 n hn\n      have h\u2084 : Filter.Tendsto (fun n : \u2115 => (1 - 1 / n ^ 2) / (3 + 1 / n)) Filter.atTop (nhds 0) := by\n        have h\u2085 : Filter.Tendsto (fun n : \u2115 => (0 : \u2115)) Filter.atTop (nhds 0) := tendsto_const_nhds\n        have h\u2086 : (fun n : \u2115 => (1 - 1 / n ^ 2) / (3 + 1 / n)) =\u1da0[Filter.atTop] (fun n : \u2115 => (0 : \u2115)) := by\n          filter_upwards [h\u2083] with n hn\n          simp [hn]\n        -- Use the symmetry of eventually equal to match the expected form for Tendsto.congr'\n        have h\u2087 : (fun n : \u2115 => (0 : \u2115)) =\u1da0[Filter.atTop] (fun n : \u2115 => (1 - 1 / n ^ 2) / (3 + 1 / n)) := by\n          filter_upwards [h\u2086] with n hn\n          <;> simp_all [eq_comm]\n        -- Now we can use Tendsto.congr' correctly\n        have h\u2088 : Filter.Tendsto (fun n : \u2115 => (1 - 1 / n ^ 2) / (3 + 1 / n)) Filter.atTop (nhds 0) := by\n          apply Filter.Tendsto.congr' h\u2087\n          exact h\u2085\n        exact h\u2088\n      exact h\u2084\n    -- Since 1 / 3 = 0 in \u2115, we can conclude the proof\n    have h\u2083 : (1 / 3 : \u2115) = 0 := by norm_num\n    have h\u2084 : Filter.Tendsto (fun n : \u2115 => (1 - 1 / n ^ 2) / (3 + 1 / n)) Filter.atTop (nhds (1 / 3)) := by\n      simpa [h\u2083] using h\u2082\n    exact h\u2084\n  \n  intro n hn\n  constructor\n  \u00b7 -- Prove the first part of the conjunction\n    exact h_main n hn\n  \u00b7 -- Prove the second part of the conjunction\n    exact h_limit", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The natural language presents a\u2099 = (n\u00b2-1)/(3n\u00b2+n) as an assumption/definition, but the Lean formalization treats the algebraic equivalence (n^2 - 1) / (3 * n^2 + n) = (1 - 1/n^2) / (3 + 1/n) as something to be proven rather than as a given definition. This is a structural difference in how the mathematical content is organized.", "The limit conclusion is correctly captured through the Filter.Tendsto statement. The Lean formalization appropriately expresses the limit behavior and includes the mathematically necessary constraint n > 0. The fact that it specifies the limit value as 1/3 is an acceptable additional detail that doesn't contradict the natural language."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: ['The natural language presents a\u2099 = (n\u00b2-1)/(3n\u00b2+n) as an assumption/definition, but the Lean formalization treats the algebraic equivalence (n^2 - 1) / (3 * n^2 + n) = (1 - 1/n^2) / (3 + 1/n) as something to be proven rather than as a given definition. This is a structural difference in how the mathematical content is organized.', \"The limit conclusion is correctly captured through the Filter.Tendsto statement. The Lean formalization appropriately expresses the limit behavior and includes the mathematically necessary constraint n > 0. The fact that it specifies the limit value as 1/3 is an acceptable additional detail that doesn't contradict the natural language.\"]"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "We know that as $n$ approaches infinity, the terms $1/n^2$ and $1/n$ approach $0$. Therefore, we can substitute $0$ for these terms in the expression, which gives us $\\frac{1-0}{3+0}$. This simplifies to $\\frac{1}{3}$. So, the limit of the sequence $(a_n)$ is $\\frac{1}{3}$.", "statement": "We assume:\n\u2022 lim_{n \u2192 \u221e} a\u2099 = lim_{n \u2192 \u221e} (1-1/n\u00b2)/(3+1/n) [l1]\nTherefore, we conclude:\n\u2022 lim_{n \u2192 \u221e} a\u2099 = 1/3 [ts_1]", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a : \u2115 \u2192 \u211d)\n  (h1 : \u2200 n : \u2115, n > 0 \u2192 a n = (1 - 1/(n:\u211d)^2) / (3 + 1/(n:\u211d)))\n  (h2 : Filter.Tendsto (fun n : \u2115 => (1 - 1/(n:\u211d)^2) / (3 + 1/(n:\u211d))) Filter.atTop (nhds (1/3))) :\n  Filter.Tendsto a Filter.atTop (nhds (1/3)) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a : \u2115 \u2192 \u211d)\n  (h1 : \u2200 n : \u2115, n > 0 \u2192 a n = (1 - 1/(n:\u211d)^2) / (3 + 1/(n:\u211d)))\n  (h2 : Filter.Tendsto (fun n : \u2115 => (1 - 1/(n:\u211d)^2) / (3 + 1/(n:\u211d))) Filter.atTop (nhds (1/3))) :\n  Filter.Tendsto a Filter.atTop (nhds (1/3)) := by\n  have h3 : a =\u1da0[Filter.atTop] (fun n : \u2115 => (1 - 1 / (n : \u211d)^2) / (3 + 1 / (n : \u211d))) := by\n    have h4 : \u2200\u1da0 (n : \u2115) in Filter.atTop, n \u2265 1 := by\n      filter_upwards [Filter.eventually_ge_atTop 1] with n hn\n      exact hn\n    filter_upwards [h4] with n hn\n    have h5 : n > 0 := by\n      omega\n    have h6 : a n = (1 - 1 / (n : \u211d)^2) / (3 + 1 / (n : \u211d)) := h1 n h5\n    simp_all [Function.funext_iff]\n    <;> norm_num\n    <;> aesop\n  \n  have h4 : Filter.Tendsto a Filter.atTop (nhds (1 / 3)) := by\n    have h5 : Filter.Tendsto a Filter.atTop (nhds (1 / 3)) := by\n      -- Use the fact that the two sequences are eventually equal to transfer the limit\n      have h6 : Filter.Tendsto (fun n : \u2115 => (1 - 1 / (n : \u211d)^2) / (3 + 1 / (n : \u211d))) Filter.atTop (nhds (1 / 3)) := h2\n      -- Use the congruence property of limits to replace the sequence with `a`\n      -- We need to reverse the equality in h3 to match the expected form in congr'\n      have h7 : Filter.Tendsto a Filter.atTop (nhds (1 / 3)) := h6.congr' h3.symm\n      exact h7\n    exact h5\n  \n  exact h4", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 0.67, "semantic_feedback": ["The sequence definition in Lean correctly captures a\u2099 = (1-1/n\u00b2)/(3+1/n) with an appropriate constraint n > 0.", "The natural language assumption [l1] stating 'lim a\u2099 = lim (expression)' is redundant since a\u2099 is defined as that expression. The Lean formalization reasonably interprets this by assuming the limit equals 1/3, which is a more meaningful mathematical statement.", "The conclusion that lim_{n \u2192 \u221e} a\u2099 = 1/3 is perfectly captured in the Lean goal using Filter.Tendsto notation."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    