
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $a$ and $b$ are any two real numbers$,$ then
\begin{equation} \label{eq:1.1.3}
|a+b|\le |a|+|b|.
\end{equation}

Proof: There are four possibilities:
\begin{alist}
\item % (a)
If $a\ge0$ and $b\ge0$, then $a+b\ge0$, so
$|a+b|=a+b=|a|+|b|$.
\item % (b)
If $a\le0$ and $b\le0$, then $a+b\le0$, so
$|a+b|=-a+(-b)=|a|+|b|$.
\item % (c)
 If $a \ge 0$ and $b \le 0$, then $a+b=|a|-|b|$.
\item % (d)
 If $a \le 0$  and $b  \ge 0$, then $a+b=-|a|+|b|$.
\end{alist}
Eq.~\ref{eq:1.1.3}
holds in   cases {\bf (c)} and {\bf (d)}, since
\begin{equation}
|a+b|=
\begin{cases}
|a|-|b|& 	ext{ if } |a| \ge |b|,\\
|b|-|a|& 	ext{ if } |b| \ge |a|.
\end{cases}
	ag*{
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "If $a$ and $b$ are any two real numbers", "statement": "Premise:\n\u2022 a and b are real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b : \u211d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'variable (a b : \u211d)' perfectly captures that a and b are real numbers, as \u211d represents the real numbers in Lean"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "If $a\\ge0$ and $b\\ge0$, then $a+b\\ge0$, so $|a+b|=a+b=|a|+|b|$.", "statement": "We assume:\n\u2022 a and b are real numbers [tc_1]\n\u2022 a \u2265 0 and b \u2265 0 [l1_assum]\nTherefore, we conclude:\n\u2022 |a+b| \u2264 |a|+|b| [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b : \u211d)\n  (l1_assum : a \u2265 0 \u2227 b \u2265 0) :\n  |a + b| \u2264 |a| + |b| := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b : \u211d)\n  (l1_assum : a \u2265 0 \u2227 b \u2265 0) :\n  |a + b| \u2264 |a| + |b| := by\n  simp [abs_of_nonneg, l1_assum.1, l1_assum.2, add_nonneg]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify a and b as real numbers in both versions", "The assumption about non-negativity is accurately captured using logical conjunction in Lean", "The triangle inequality conclusion is identically expressed in both natural language and Lean", "The overall logical structure and mathematical content are perfectly preserved in the Lean formalization"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "If $a\\le0$ and $b\\le0$, then $a+b\\le0$, so $|a+b|=-a+(-b)=|a|+|b|$.", "statement": "We assume:\n\u2022 a and b are real numbers [tc_1]\n\u2022 a \u2264 0 and b \u2264 0 [l2_assum]\nTherefore, we conclude:\n\u2022 |a+b| \u2264 |a|+|b| [l2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b : \u211d)\n  (l2_assum : a \u2264 0 \u2227 b \u2264 0) :\n  |a + b| \u2264 |a| + |b| := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b : \u211d)\n  (l2_assum : a \u2264 0 \u2227 b \u2264 0) :\n  |a + b| \u2264 |a| + |b| := by\n  rcases l2_assum with \u27e8ha, hb\u27e9\n  simp [abs_of_nonpos ha, abs_of_nonpos hb, abs_of_nonpos (add_nonpos ha hb)]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly translate 'a and b are real numbers' to '(a b : \u211d)'", "The assumption 'a \u2264 0 and b \u2264 0' is perfectly captured by '(l2_assum : a \u2264 0 \u2227 b \u2264 0)' using logical conjunction", "The conclusion '|a+b| \u2264 |a|+|b|' is identically represented in Lean notation", "The overall logical structure from assumptions to conclusion is preserved correctly in the Lean formalization"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "If $a \\ge 0$ and $b \\le 0$, then $a+b=|a|-|b|$.", "statement": "We assume:\n\u2022 a and b are real numbers [tc_1]\n\u2022 a \u2265 0 and b \u2264 0 [l3_assum]\nTherefore, we conclude:\n\u2022 a+b = |a|-|b| [l3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b : \u211d)\n  (l3_assum : a \u2265 0 \u2227 b \u2264 0) :\n  a + b = |a| - |b| := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b : \u211d)\n  (l3_assum : a \u2265 0 \u2227 b \u2264 0) :\n  a + b = |a| - |b| := by\n  rcases l3_assum with \u27e8ha, hb\u27e9\n  simp [abs_of_nonneg ha, abs_of_nonpos hb]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations perfectly match - both specify a and b as real numbers", "Assumptions perfectly match - both state a \u2265 0 and b \u2264 0, with Lean using appropriate logical conjunction", "Conclusion perfectly match - both state the same mathematical equality a + b = |a| - |b|"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "If $a \\le 0$  and $b  \\ge 0$, then $a+b=-|a|+|b|$.", "statement": "We assume:\n\u2022 a and b are real numbers [tc_1]\n\u2022 a \u2264 0 and b \u2265 0 [l4_assum]\nTherefore, we conclude:\n\u2022 a+b = -|a|+|b| [l4].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b : \u211d)\n  (l4_assum : a \u2264 0 \u2227 b \u2265 0) :\n  a + b = -|a| + |b| := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b : \u211d)\n  (l4_assum : a \u2264 0 \u2227 b \u2265 0) :\n  a + b = -|a| + |b| := by\n  cases l4_assum with\n  | intro ha hb =>\n    rw [abs_of_nonpos ha, abs_of_nonneg hb]\n    ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations match exactly - both declare a and b as real numbers", "The assumptions are correctly formalized - 'a \u2264 0 and b \u2265 0' translates perfectly to 'a \u2264 0 \u2227 b \u2265 0'", "The conclusion equation 'a+b = -|a|+|b|' is identical in both natural language and Lean", "The logical structure is preserved correctly from premise-conclusion format to Lean lemma format"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Eq. (1.1.3) holds in   cases (c) and (d), since\n|a+b|= \n|a|-|b| if |a| >= |b|,\n|b|-|a| if |b| >= |a|.", "statement": "We assume:\n\u2022 a and b are real numbers [tc_1]\n\u2022 If a \u2265 0 and b \u2264 0, then a+b = |a|-|b| [l3]\n\u2022 If a \u2264 0 and b \u2265 0, then a+b = -|a|+|b| [l4]\n\u2022 The condition that either (a \u2265 0 and b \u2264 0) OR (a \u2264 0 and b \u2265 0) holds [l5_assum]\nTherefore, we conclude:\n\u2022 |a+b| \u2264 |a|+|b| [l5].", "dependencies": ["tc_1", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b : \u211d)\n  (l3 : a \u2265 0 \u2192 b \u2264 0 \u2192 a + b = |a| - |b|)\n  (l4 : a \u2264 0 \u2192 b \u2265 0 \u2192 a + b = -|a| + |b|)\n  (l5_assum : (a \u2265 0 \u2227 b \u2264 0) \u2228 (a \u2264 0 \u2227 b \u2265 0)) :\n  |a + b| \u2264 |a| + |b| := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b : \u211d)\n  (l3 : a \u2265 0 \u2192 b \u2264 0 \u2192 a + b = |a| - |b|)\n  (l4 : a \u2264 0 \u2192 b \u2265 0 \u2192 a + b = -|a| + |b|)\n  (l5_assum : (a \u2265 0 \u2227 b \u2264 0) \u2228 (a \u2264 0 \u2227 b \u2265 0)) :\n  |a + b| \u2264 |a| + |b| := by\n  cases l5_assum\n  case inl h1 =>\n    have h3 := l3 h1.1 h1.2\n    rw [h3]\n    simp [abs_of_nonneg h1.1, abs_of_nonpos h1.2]\n    linarith\n  case inr h2 =>\n    have h4 := l4 h2.1 h2.2\n    rw [h4]\n    simp [abs_of_nonpos h2.1, abs_of_nonneg h2.2]\n    linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 4, "endLine": 16, "endColumn": 12, "data": "linarith failed to find a contradiction\ncase a\na b : \u211d\nl3 : a \u2265 0 \u2192 b \u2264 0 \u2192 a + b = |a| - |b|\nl4 : a \u2264 0 \u2192 b \u2265 0 \u2192 a + b = -|a| + |b|\nh1 : a \u2265 0 \u2227 b \u2264 0\nh3 : a + b = |a| - |b|\na\u271d : |a + b| + b > a\n\u22a2 False failed"}, {"line": 21, "column": 4, "endLine": 21, "endColumn": 12, "data": "linarith failed to find a contradiction\ncase a\na b : \u211d\nl3 : a \u2265 0 \u2192 b \u2264 0 \u2192 a + b = |a| - |b|\nl4 : a \u2264 0 \u2192 b \u2265 0 \u2192 a + b = -|a| + |b|\nh2 : a \u2264 0 \u2227 b \u2265 0\nh4 : a + b = -|a| + |b|\na\u271d : a + |a + b| > b\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations correctly specify a and b as real numbers in both versions", "The first conditional l3 is correctly formalized using curried implication, which is logically equivalent to the natural language conditional", "The second conditional l4 follows the same correct pattern as l3", "The disjunctive assumption l5_assum perfectly captures the 'either...or' structure using logical conjunction and disjunction operators", "The conclusion |a+b| \u2264 |a|+|b| is identically represented in both versions", "The overall logical structure correctly translates the natural language argument into a formal Lean lemma with appropriate hypotheses and conclusion", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5\n  (a b : \u211d)\n  (l3 : a \u2265 0 \u2192 b \u2264 0 \u2192 a + b = |a| - |b|)\n  (l4 : a \u2264 0 \u2192 b \u2265 0 \u2192 a + b = -|a| + |b|)\n  (l5_assum : (a \u2265 0 \u2227 b \u2264 0) \u2228 (a \u2264 0 \u2227 b \u2265 0)) :\n  \u00ac |a + b| \u2264 |a| + |b| := by\n  cases l5_assum with\n  | inl h =>\n    let \u27e8ha, hb\u27e9 := h\n    have := l3 ha hb\n    rw [this]\n    simp [abs_of_nonneg ha, abs_of_nonpos hb]\n    intro h'\n    have : |a| - |b| \u2264 |a| + |b| := by rw [\u2190this]; exact h'\n    linarith [abs_nonneg b]\n  | inr h =>\n    let \u27e8ha, hb\u27e9 := h\n    have := l4 ha hb\n    rw [this]\n    simp [abs_of_nonpos ha, abs_of_nonneg hb]\n    intro h'\n    have : -|a| + |b| \u2264 |a| + |b| := by rw [\u2190this]; exact h'\n    linarith [abs_nonneg a]"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "There are four possibilities:", "statement": "We assume:\n\u2022 a and b are real numbers [tc_1]\n\u2022 For any real numbers a and b, if a \u2265 0 and b \u2265 0, then |a+b| \u2264 |a|+|b| [l1]\n\u2022 For any real numbers a and b, if a \u2264 0 and b \u2264 0, then |a+b| \u2264 |a|+|b| [l2]\n\u2022 For any real numbers a and b, if (a \u2265 0 and b \u2264 0) or (a \u2264 0 and b \u2265 0), then |a+b| \u2264 |a|+|b| [l5]\nTherefore, we conclude:\n\u2022 For any real numbers a and b, |a+b| \u2264 |a|+|b| [ts_1].", "dependencies": ["tc_1", "l1", "l2", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b : \u211d)\n  (l1 : a \u2265 0 \u2192 b \u2265 0 \u2192 |a + b| \u2264 |a| + |b|)\n  (l2 : a \u2264 0 \u2192 b \u2264 0 \u2192 |a + b| \u2264 |a| + |b|)\n  (l5 : ((a \u2265 0 \u2227 b \u2264 0) \u2228 (a \u2264 0 \u2227 b \u2265 0)) \u2192 |a + b| \u2264 |a| + |b|) :\n  |a + b| \u2264 |a| + |b| := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b : \u211d)\n  (l1 : a \u2265 0 \u2192 b \u2265 0 \u2192 |a + b| \u2264 |a| + |b|)\n  (l2 : a \u2264 0 \u2192 b \u2264 0 \u2192 |a + b| \u2264 |a| + |b|)\n  (l5 : ((a \u2265 0 \u2227 b \u2264 0) \u2228 (a \u2264 0 \u2227 b \u2265 0)) \u2192 |a + b| \u2264 |a| + |b|) :\n  |a + b| \u2264 |a| + |b| := by\n  cases le_or_lt a 0 with\n  | inl h1 =>\n    cases le_or_lt b 0 with\n    | inl h2 => exact l2 h1 h2\n    | inr h2 =>\n      have h3 : b \u2265 0 := le_of_lt h2\n      exact l5 (Or.inr \u27e8h1, h3\u27e9)\n  | inr h1 =>\n    cases le_or_lt b 0 with\n    | inl h2 =>\n      have h3 : a \u2265 0 := le_of_lt h1\n      exact l5 (Or.inl \u27e8h3, h2\u27e9)\n    | inr h2 =>\n      have h3 : a \u2265 0 := le_of_lt h1\n      have h4 : b \u2265 0 := le_of_lt h2\n      exact l1 h3 h4", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify a and b as real numbers using the appropriate Lean type \u211d.", "Premise l1 correctly formalizes the case where both a and b are non-negative using implication arrows.", "Premise l2 correctly formalizes the case where both a and b are non-positive using implication arrows.", "Premise l5 correctly formalizes the mixed sign cases using conjunction for 'and', disjunction for 'or', and implication for the conditional.", "The conclusion correctly states the triangle inequality as the goal to be proven.", "The overall logical structure perfectly captures the case-by-case proof strategy outlined in the natural language, covering all possible sign combinations of the real numbers a and b."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    