
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $X$ be a continuous random variable with a probability density function (PDF) given by $f(x) = \lambda e^{-\lambda x}$ for $x \ge 0$ and $f(x) = 0$ for $x < 0$. We are given that the parameter $\lambda = 2$. Then, the expected value $E[X] = 1/2$, the variance $Var(X) = 1/4$, and the probability $P(X > 1) = e^{-2}$.

Proof: From the given conditions, the specific PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \ge 0$. To find the expected value, we compute the integral $E[X] = \int_0^\infty x f(x) dx = \int_0^\infty 2x e^{-2x} dx$. Using integration by parts, this integral evaluates to $1/2$. Therefore, the expected value is $E[X] = 1/2$. To find the variance, we first need the second moment $E[X^2] = \int_0^\infty x^2 f(x) dx = \int_0^\infty 2x^2 e^{-2x} dx$. Evaluating this integral using integration by parts yields $E[X^2] = 1/2$. The variance is then $Var(X) = E[X^2] - (E[X])^2 = 1/2 - (1/2)^2 = 1/4$. Finally, the probability $P(X > 1)$ is found by integrating the PDF from $1$ to $\infty$, which is $\int_1^\infty 2e^{-2x} dx = e^{-2}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $X$ be a continuous random variable with a probability density function (PDF) given by $f(x) = \\lambda e^{-\\lambda x}$ for $x \\ge 0$ and $f(x) = 0$ for $x < 0$.", "statement": "Premise:\n\u2022 $X$ is a continuous random variable with a probability density function (PDF) given by $f(x) = \\lambda e^{-\\lambda x}$ for $x \\ge 0$ and $f(x) = 0$ for $x < 0$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n(tc_1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = lambda * exp (-lambda * x)))", "lean_pass": true, "error_msg": [], "tries": 4}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language states X is a continuous random variable, but Lean declares X as a function \u211d \u2192 \u211d without any probabilistic structure or continuity properties. A random variable should be formalized with proper probability theory foundations.", "The Lean condition '\u2200 x, x \u2265 0 \u2192 f x = lambda * exp (-lambda * x)' perfectly matches the mathematical statement f(x) = \u03bbe^(-\u03bbx) for x \u2265 0.", "The Lean condition '\u2200 x, x < 0 \u2192 f x = 0' perfectly matches the mathematical statement f(x) = 0 for x < 0.", "The natural language concludes that f(x) is the PDF of X, but the Lean formalization provides no connection between X and f, nor does it establish that f is a probability density function. There's no probabilistic relationship or PDF properties defined."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language states X is a continuous random variable, but Lean declares X as a function \u211d \u2192 \u211d without any probabilistic structure or continuity properties. A random variable should be formalized with proper probability theory foundations.', \"The Lean condition '\u2200 x, x \u2265 0 \u2192 f x = lambda * exp (-lambda * x)' perfectly matches the mathematical statement f(x) = \u03bbe^(-\u03bbx) for x \u2265 0.\", \"The Lean condition '\u2200 x, x < 0 \u2192 f x = 0' perfectly matches the mathematical statement f(x) = 0 for x < 0.\", \"The natural language concludes that f(x) is the PDF of X, but the Lean formalization provides no connection between X and f, nor does it establish that f is a probability density function. There's no probabilistic relationship or PDF properties defined.\"]"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "We are given that the parameter $\\lambda = 2$.", "statement": "Premise:\n\u2022 The parameter $\\lambda = 2$ [tc_2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (\u03bb_val : \u211d)\n(tc_2 : \u03bb_val = 2)", "lean_pass": false, "error_msg": [{"line": 5, "column": 10, "endLine": 5, "endColumn": 11, "data": "unexpected token '\u03bb'; expected '_' or identifier"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "From the given conditions, the specific PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with a probability density function (PDF) given by $f(x) = \\lambda e^{-\\lambda x}$ for $x \\ge 0$ and $f(x) = 0$ for $x < 0$ [tc_1]\n\u2022 The parameter $\\lambda = 2$ [tc_2]\nTherefore, we conclude:\n\u2022 The PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$ and $f(x)=0$ for $x < 0$ [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n  (tc_1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2) :\n  (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n  (tc_1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2) :\n  (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)) := by\n  rw [tc_2] at tc_1\n  exact tc_1", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical and logical content from the natural language. The PDF definition is properly represented as a piecewise function using universal quantification, the parameter constraint \u03bb = 2 is directly translated, and the conclusion correctly shows the substituted form. The inclusion of variable X, while not used in the logic, doesn't create any inconsistency. The overall deductive structure is preserved."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_1": {"id": "def_1", "natural_language": "To find the expected value, we compute the integral $E[X] = \\int_0^\\infty x f(x) dx$", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with PDF $f(x)$ on support $x \\ge 0$ [tc_1].\nDefinition:\n\u2022 The expected value of $X$ is $E[X] = \\int_0^\\infty x f(x) dx$ [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n(tc_1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = lambda * exp (-lambda * x)))\n(def_1 : \u222b x in Ioi 0, x * f x = Real.integral (fun x => x * f x) 0 (ENNReal.ofReal \u221e))", "lean_pass": false, "error_msg": [], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "l2": {"id": "l2", "natural_language": "$E[X] = \\int_0^\\infty x f(x) dx = \\int_0^\\infty 2x e^{-2x} dx$.", "statement": "We assume:\n\u2022 The PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$ [l1]\n\u2022 The expected value of $X$ is $E[X] = \\int_0^\\infty x f(x) dx$ [def_1]\nTherefore, we conclude:\n\u2022 $E[X] = \\int_0^\\infty 2x e^{-2x} dx$ [l2].", "dependencies": ["l1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n  (l1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.Ioi 0, x * f x = \u222b x in Set.Ioi 0, x * f x) :\n  \u222b x in Set.Ioi 0, x * f x = \u222b x in Set.Ioi 0, 2 * x * exp (-2 * x) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n  (l1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.Ioi 0, x * f x = \u222b x in Set.Ioi 0, x * f x) :\n  \u222b x in Set.Ioi 0, x * f x = \u222b x in Set.Ioi 0, 2 * x * exp (-2 * x) := by\n  simp_rw [l1.right]\n  rfl", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 11, "endLine": 10, "endColumn": 19, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The PDF definition is correctly formalized. The Lean version appropriately includes the condition that f(x) = 0 for x < 0, which is implicit in the natural language statement 'for x \u2265 0'. The mathematical expression 2 * exp(-2 * x) correctly represents 2e^(-2x).", "The expected value definition has a major logical flaw. The natural language defines E[X] as equal to a specific integral, but the Lean formalization states 'integral equals integral' (a tautology). This completely misses the key logical component that defines what E[X] actually is. The formalization should define E[X] as equal to the integral, not state that an integral equals itself.", "The conclusion is correctly formalized. The Lean version properly shows that the integral of x * f(x) equals the integral of 2 * x * exp(-2 * x), which corresponds exactly to the natural language conclusion that substitutes the PDF definition into the expected value formula.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The PDF definition is correctly formalized. The Lean version appropriately includes the condition that f(x) = 0 for x < 0, which is implicit in the natural language statement 'for x \u2265 0'. The mathematical expression 2 * exp(-2 * x) correctly represents 2e^(-2x).\", \"The expected value definition has a major logical flaw. The natural language defines E[X] as equal to a specific integral, but the Lean formalization states 'integral equals integral' (a tautology). This completely misses the key logical component that defines what E[X] actually is. The formalization should define E[X] as equal to the integral, not state that an integral equals itself.\", 'The conclusion is correctly formalized. The Lean version properly shows that the integral of x * f(x) equals the integral of 2 * x * exp(-2 * x), which corresponds exactly to the natural language conclusion that substitutes the PDF definition into the expected value formula.']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Using integration by parts, this integral evaluates to $1/2$.", "statement": "We assume:\n\u2022 (Calculus knowledge)\nTherefore, we conclude:\n\u2022 $\\int_0^\\infty 2x e^{-2x} dx = 1/2$ [l3].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3 :\n  \u222b (x : \u211d) in Set.Ici 0, 2 * x * exp (-2 * x) = 1 / 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3 :\n  \u222b (x : \u211d) in Set.Ici 0, 2 * x * exp (-2 * x) = 1 / 2 := by\n  have h_antideriv : \u2200 x, HasDerivAt (fun x => -(x + 1/2) * exp (-2 * x)) (2 * x * exp (-2 * x)) x := by\n    intro x\n    simp\n    apply HasDerivAt.neg\n    apply HasDerivAt.mul\n    \u00b7 apply HasDerivAt.add_const\n      exact hasDerivAt_id' x\n    \u00b7 apply HasDerivAt.comp\n      \u00b7 apply HasDerivAt.neg\n        exact hasDerivAt_id' (-2 * x)\n      \u00b7 exact hasDerivAt_const_mul (-2) x\n  have h_tendsto : Tendsto (fun x => -(x + 1/2) * exp (-2 * x)) atTop (\ud835\udcdd 0) := by\n    simp\n    apply Tendsto.neg\n    apply Tendsto.mul_atTop\n    \u00b7 apply Tendsto.add_atTop\n      \u00b7 exact tendsto_id\n      \u00b7 exact tendsto_const_nhds\n    \u00b7 apply tendsto_exp_neg_atTop_nhds_0.comp\n      exact tendsto_const_nhds.mul_atTop (by norm_num) tendsto_id\n  have h_zero : -(0 + 1/2) * exp (-2 * 0) = -1/2 := by norm_num\n  rw [integral_Ici_eq_lim]\n  simp [h_antideriv, h_tendsto, h_zero]\n  field_simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 4, "endLine": 10, "endColumn": 24, "data": "tactic 'apply' failed, failed to unify\n  HasDerivAt (fun x => -?f x) (-?f') ?x\nwith\n  HasDerivAt (fun x => (-2\u207b\u00b9 + -x) * rexp (-(2 * x))) (2 * x * rexp (-(2 * x))) x\nx : \u211d\n\u22a2 HasDerivAt (fun x => (-2\u207b\u00b9 + -x) * rexp (-(2 * x))) (2 * x * rexp (-(2 * x))) x"}, {"line": 20, "column": 4, "endLine": 20, "endColumn": 21, "data": "tactic 'apply' failed, failed to unify\n  Tendsto (fun x => -?f x) ?l (\ud835\udcdd (-?y))\nwith\n  Tendsto (fun x => (-2\u207b\u00b9 + -x) * rexp (-(2 * x))) atTop (\ud835\udcdd 0)\nh_antideriv : \u2200 (x : \u211d), HasDerivAt (fun x => -(x + 1 / 2) * rexp (-2 * x)) (2 * x * rexp (-2 * x)) x\n\u22a2 Tendsto (fun x => (-2\u207b\u00b9 + -x) * rexp (-(2 * x))) atTop (\ud835\udcdd 0)"}, {"line": 28, "column": 6, "endLine": 28, "endColumn": 25, "data": "unknown identifier 'integral_Ici_eq_lim'"}, {"line": 28, "column": 6, "endLine": 28, "endColumn": 25, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.26560\nh_antideriv : \u2200 (x : \u211d), HasDerivAt (fun x => -(x + 1 / 2) * rexp (-2 * x)) (2 * x * rexp (-2 * x)) x\nh_tendsto : Tendsto (fun x => -(x + 1 / 2) * rexp (-2 * x)) atTop (\ud835\udcdd 0)\nh_zero : -(0 + 1 / 2) * rexp (-2 * 0) = -1 / 2\n\u22a2 \u222b (x : \u211d) in Set.Ici 0, 2 * x * rexp (-2 * x) = 1 / 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization accurately captures the integral statement. The bounds (Set.Ici 0 for [0,\u221e)), the integrand (2 * x * exp (-2 * x)), and the result (1/2) all correspond exactly to the natural language mathematical expression. The explicit real number type declaration for x is a reasonable mathematical detail that doesn't contradict the original statement.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib.Analysis.SpecialFunctions.Integrals\nimport Mathlib.MeasureTheory.Integral.IntervalIntegral\nimport Mathlib.Analysis.SpecialFunctions.ExpDeriv\n\nopen Real MeasureTheory Filter intervalIntegral\n\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l3 :\n  \u00ac \u222b (x : \u211d) in Set.Ici 0, 2 * x * exp (-2 * x) = 1 / 2 := by\n  have h : \u222b (x : \u211d) in Set.Ici 0, 2 * x * exp (-2 * x) = 1 / 4 := by\n    have h\u2081 : \u2200 x, HasDerivAt (fun x => (-x - 1/2) * exp (-2 * x)) (2 * x * exp (-2 * x)) x := by\n      intro x\n      simp\n      apply HasDerivAt.mul\n      \u00b7 apply HasDerivAt.add\n        \u00b7 exact hasDerivAt_neg x\n        \u00b7 exact hasDerivAt_const x (1/2)\n      \u00b7 apply HasDerivAt.exp\n        exact hasDerivAt_neg (2 * x)\n    have h\u2082 : IntegrableOn (fun x => 2 * x * exp (-2 * x)) (Set.Ici 0) := by\n      apply integrableOn_Ici_exp_neg\n      \u00b7 intro x hx\n        positivity\n      \u00b7 norm_num\n    have h\u2083 : Tendsto (fun x => (-x - 1/2) * exp (-2 * x)) atTop (\ud835\udcdd 0) := by\n      simp_rw [\u2190 neg_mul]\n      apply tendsto_zero_iff_norm_tendsto_zero.mpr\n      simp_rw [norm_mul, norm_neg, norm_eq_abs]\n      apply Tendsto.mul_zero\n      \u00b7 apply Tendsto.add\n        \u00b7 exact tendsto_norm_atTop_atTop.comp tendsto_id\n        \u00b7 exact tendsto_const_nhds\n      \u00b7 exact tendsto_exp_atBot.comp (tendsto_neg_atTop_atTop.const_mul 2)\n    simp_rw [integral_Ici_eq_integral_Ioi, integral_eq_sub_of_hasDerivAt_of_tendsto' h\u2081 h\u2082 h\u2083]\n    norm_num\n  intro h'\n  rw [h'] at h\n  norm_num at h"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Therefore, the expected value is $E[X] = 1/2$.", "statement": "We assume:\n\u2022 $E[X] = \\int_0^\\infty 2x e^{-2x} dx$ [l2]\n\u2022 $\\int_0^\\infty 2x e^{-2x} dx = 1/2$ [l3]\nTherefore, we conclude:\n\u2022 $E[X] = 1/2$ [ts_1].", "dependencies": ["l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n  (l2 : \u222b x in Set.Ioi 0, x * f x = \u222b x in Set.Ioi 0, 2 * x * exp (-2 * x))\n  (l3 : \u222b (x : \u211d) in Set.Ici 0, 2 * x * exp (-2 * x) = 1 / 2) :\n  \u222b x in Set.Ioi 0, x * f x = 1 / 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n  (l2 : \u222b x in Set.Ioi 0, x * f x = \u222b x in Set.Ioi 0, 2 * x * exp (-2 * x))\n  (l3 : \u222b (x : \u211d) in Set.Ici 0, 2 * x * exp (-2 * x) = 1 / 2) :\n  \u222b x in Set.Ioi 0, x * f x = 1 / 2 := by\n  rw [l2]\n  simp only [MeasureTheory.integral_Ioi_eq_integral_Ici]\n  exact l3", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 13, "endLine": 11, "endColumn": 55, "data": "unknown identifier 'MeasureTheory.integral_Ioi_eq_integral_Ici'"}, {"line": 11, "column": 2, "endLine": 11, "endColumn": 56, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The expectation definition is correctly formalized using the general form of expectation for continuous random variables, properly equating it to the specific integral.", "The integral evaluation has a minor inconsistency in interval notation - l3 uses Set.Ici 0 (closed interval [0,\u221e)) while l2 uses Set.Ioi 0 (open interval (0,\u221e)). However, this doesn't affect the mathematical validity since the integrand is 0 at x=0.", "The conclusion correctly follows by transitivity and properly represents E[X] = 1/2 using the same formalization as established in l2.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.67 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_1\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n  (l2 : \u222b x in Set.Ioi 0, x * f x = \u222b x in Set.Ioi 0, 2 * x * exp (-2 * x))\n  (l3 : \u222b (x : \u211d) in Set.Ici 0, 2 * x * exp (-2 * x) = 1 / 2) :\n  \u00ac (\u222b x in Set.Ioi 0, x * f x = 1 / 2) := by\n  intro h\n  rw [l2] at h\n  have h' : \u222b x in Set.Ioi 0, 2 * x * exp (-2 * x) = \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) := by\n    rw [\u2190 integral_Ici_eq_integral_Ioi]\n  rw [h'] at h\n  exact (ne_of_lt (by linarith)) (h.trans l3.symm)"}, "type": "solution"}, "def_2": {"id": "def_2", "natural_language": "To find the variance, we first need the second moment $E[X^2] = \\int_0^\\infty x^2 f(x) dx$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with PDF $f(x)$ on support $x \\ge 0$ [tc_1].\nDefinition:\n\u2022 The second moment of $X$ is $E[X^2] = \\int_0^\\infty x^2 f(x) dx$ [def_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n(tc_1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = lambda * exp (-lambda * x)))\n(def_2 : \u222b x in Ioi 0, x^2 * f x = Real.expect (fun x => x^2) X)", "lean_pass": false, "error_msg": [{"line": 7, "column": 35, "endLine": 7, "endColumn": 63, "data": "unknown constant 'Real.expect'"}, {"line": 7, "column": 16, "endLine": 7, "endColumn": 21, "data": "function expected at\n  Ioi\nterm has type\n  ?m.660"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "l4": {"id": "l4", "natural_language": "$E[X^2] = \\int_0^\\infty x^2 f(x) dx = \\int_0^\\infty 2x^2 e^{-2x} dx$.", "statement": "We assume:\n\u2022 The PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$ [l1]\n\u2022 The second moment of $X$ is $E[X^2] = \\int_0^\\infty x^2 f(x) dx$ [def_2]\nTherefore, we conclude:\n\u2022 $E[X^2] = \\int_0^\\infty 2x^2 e^{-2x} dx$ [l4].", "dependencies": ["l1", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d)\n  (l1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)))\n  (def_2 : (\u222b x in Set.Ici 0, x^2 * f x) = (\u222b x in Set.Ici 0, x^2 * f x)) :\n  (\u222b x in Set.Ici 0, x^2 * f x) = (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d)\n  (l1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)))\n  (def_2 : (\u222b x in Set.Ici 0, x^2 * f x) = (\u222b x in Set.Ici 0, x^2 * f x)) :\n  (\u222b x in Set.Ici 0, x^2 * f x) = (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x)) := by\n  rw [set_integral_congr_ae (s := Set.Ici 0)]\n  \u00b7 simp_rw [l1.right]\n    intro x hx\n    simp [hx]\n  \u00b7 apply MeasureTheory.ae_of_all\n    intro x hx\n    simp [hx]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 6, "endLine": 10, "endColumn": 27, "data": "unknown identifier 'set_integral_congr_ae'"}, {"line": 10, "column": 6, "endLine": 10, "endColumn": 44, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.4996\nX f : \u211d \u2192 \u211d\nl1 : (\u2200 x < 0, f x = 0) \u2227 \u2200 x \u2265 0, f x = 2 * rexp (-2 * x)\ndef_2 : \u222b (x : \u211d) in Set.Ici 0, x ^ 2 * f x = \u222b (x : \u211d) in Set.Ici 0, x ^ 2 * f x\n\u22a2 \u222b (x : \u211d) in Set.Ici 0, x ^ 2 * f x = \u222b (x : \u211d) in Set.Ici 0, 2 * x ^ 2 * rexp (-2 * x)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The PDF definition is correctly formalized with an appropriate additional constraint for negative values, which is standard for probability distributions.", "The second moment definition is formalized as a tautology rather than actually defining E[X\u00b2] as the integral, missing the key definitional relationship.", "The conclusion correctly captures the substitution of the PDF into the integral formula, with appropriate Lean notation for the integration bounds and exponential function.", "The random variable X is declared but not properly integrated into the probability-theoretic framework, though this doesn't affect the core mathematical relationships being established.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The PDF definition is correctly formalized with an appropriate additional constraint for negative values, which is standard for probability distributions.', 'The second moment definition is formalized as a tautology rather than actually defining E[X\u00b2] as the integral, missing the key definitional relationship.', 'The conclusion correctly captures the substitution of the PDF into the integral formula, with appropriate Lean notation for the integration bounds and exponential function.', \"The random variable X is declared but not properly integrated into the probability-theoretic framework, though this doesn't affect the core mathematical relationships being established.\"]"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Evaluating this integral using integration by parts yields $E[X^2] = 1/2$.", "statement": "We assume:\n\u2022 $E[X^2] = \\int_0^\\infty 2x^2 e^{-2x} dx$ [l4]\nTherefore, we conclude:\n\u2022 $E[X^2] = 1/2$ [l5].", "dependencies": ["l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d)\n  (l1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)))\n  (l4 : (\u222b x in Set.Ici 0, x^2 * f x) = (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x))) :\n  (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x)) = 1 / 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d)\n  (l1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)))\n  (l4 : (\u222b x in Set.Ici 0, x^2 * f x) = (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x))) :\n  (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x)) = 1 / 2 := by\n  have h : \u2200 x \u2265 0, f x = 2 * exp (-2 * x) := l1.right\n  simp_rw [h] at l4\n  rw [l4]\n  have : (\u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x))) = 1/2 := by\n    rw [mul_comm]\n    simp_rw [mul_assoc]\n    rw [integral_mul_right]\n    have : \u222b x in Set.Ici 0, x^2 * exp (-2 * x) = 1/4 := by\n      have := integral_rpow_mul_exp_neg_mul (2) (2)\n      simp at this\n      exact this\n    rw [this]\n    norm_num\n  exact this", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 11, "endLine": 11, "endColumn": 12, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The assumption l4 correctly formalizes the statement that E[X\u00b2] equals the given integral. The left side (\u222b x in Set.Ici 0, x^2 * f x) properly represents E[X\u00b2] and the right side matches the integral from the natural language.", "The conclusion is correctly formalized as proving that the integral equals 1/2, which is mathematically equivalent to proving E[X\u00b2] = 1/2 given the assumption l4. The additional context l1 provides necessary mathematical setup without contradicting the natural language.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d)\n  (l1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)))\n  (l4 : (\u222b x in Set.Ici 0, x^2 * f x) = (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x))) :\n  \u00ac (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x)) = 1 / 2 := by\n  have h : (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x)) = 1/2 := by\n    rw [\u2190 l4]\n    apply set_integral_congr measurableSet_Ici\n    intro x hx\n    simp [l1.right x hx]\n  rw [h]\n  norm_num"}, "type": "lemma"}, "def_3": {"id": "def_3", "natural_language": "The variance is then $Var(X) = E[X^2] - (E[X])^2$.", "statement": "We assume:\n\u2022 $X$ is a random variable with finite first and second moments [tc_1].\nDefinition:\n\u2022 The variance of $X$ is $Var(X) = E[X^2] - (E[X])^2$ [def_3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (X : MeasurableSpace.map X \u2119)\n  (f : \u211d \u2192 \u211d) (lambda : \u211d)\n  (tc_1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = lambda * exp (-lambda * x)))\n  (def_3 : Var X = ((\u222b x, x^2 \u2022 volume.withDensity (fun y => ENNReal.ofReal (f y))) - (\u222b x, x \u2022 volume.withDensity (fun y => ENNReal.ofReal (f y)))^2))", "lean_pass": false, "error_msg": [{"line": 6, "column": 7, "endLine": 6, "endColumn": 30, "data": "type expected, got\n  (MeasurableSpace.map X \u2119 : MeasurableSpace ?m.27)"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "ts_2": {"id": "ts_2", "natural_language": "$Var(X) = E[X^2] - (E[X])^2 = 1/2 - (1/2)^2 = 1/4$.", "statement": "We assume:\n\u2022 $E[X] = 1/2$ [ts_1]\n\u2022 $E[X^2] = 1/2$ [l5]\n\u2022 The variance of $X$ is $Var(X) = E[X^2] - (E[X])^2$ [def_3]\nTherefore, we conclude:\n\u2022 $Var(X) = 1/4$ [ts_2].", "dependencies": ["ts_1", "l5", "def_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d)\n  (ts_1 : \u222b x in Set.Ioi 0, x * f x = 1 / 2)\n  (l5 : (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x)) = 1 / 2)\n  (def_3 : (\u222b x in Set.Ici 0, x^2 * f x) - (\u222b x in Set.Ioi 0, x * f x)^2 = (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x)) - (1 / 2)^2) :\n  (\u222b x in Set.Ici 0, x^2 * f x) - (\u222b x in Set.Ioi 0, x * f x)^2 = 1 / 4 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d)\n  (ts_1 : \u222b x in Set.Ioi 0, x * f x = 1 / 2)\n  (l5 : (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x)) = 1 / 2)\n  (def_3 : (\u222b x in Set.Ici 0, x^2 * f x) - (\u222b x in Set.Ioi 0, x * f x)^2 = (\u222b x in Set.Ici 0, 2 * x^2 * exp (-2 * x)) - (1 / 2)^2) :\n  (\u222b x in Set.Ici 0, x^2 * f x) - (\u222b x in Set.Ioi 0, x * f x)^2 = 1 / 4 := by\n  rw [def_3, l5]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The expectation E[X] is correctly represented as an integral \u222bx*f(x)dx over the positive reals.", "E[X\u00b2] should be represented as \u222bx\u00b2*f(x)dx, but instead uses a specific exponential integral \u222b2*x\u00b2*exp(-2*x)dx, which doesn't match the general statement in natural language.", "The variance definition incorrectly equates the general second moment E[X\u00b2] with the specific exponential integral, creating a logical inconsistency between the general probability theory statement and a particular distribution.", "The conclusion structure is correct but there's minor inconsistency in the use of different interval notations (Set.Ioi vs Set.Ici) throughout the formalization."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The expectation E[X] is correctly represented as an integral \u222bx*f(x)dx over the positive reals.', \"E[X\u00b2] should be represented as \u222bx\u00b2*f(x)dx, but instead uses a specific exponential integral \u222b2*x\u00b2*exp(-2*x)dx, which doesn't match the general statement in natural language.\", 'The variance definition incorrectly equates the general second moment E[X\u00b2] with the specific exponential integral, creating a logical inconsistency between the general probability theory statement and a particular distribution.', \"The conclusion structure is correct but there's minor inconsistency in the use of different interval notations (Set.Ioi vs Set.Ici) throughout the formalization.\"]"}, "solved_negation": null, "type": "solution"}, "def_4": {"id": "def_4", "natural_language": "Finally, the probability $P(X > 1)$ is found by integrating the PDF from $1$ to $\\infty$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with PDF $f(x)$ [tc_1].\nDefinition:\n\u2022 The probability $P(X > a)$ is given by the integral $\\int_a^\\infty f(x) dx$ [def_4].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n(tc_1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = lambda * exp (-lambda * x)))\n(def_4 : \u2200 a, X a = \u222b x in Set.Ici a, f x)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language states that X is a continuous random variable with PDF f(x), which is a general statement about any PDF. However, the Lean formalization specifically defines f as an exponential distribution with parameter lambda (f(x) = lambda * exp(-lambda * x) for x \u2265 0, and 0 for x < 0). This is much more restrictive than the general PDF mentioned in the natural language.", "The natural language defines P(X > a) as the integral \u222b_a^\u221e f(x) dx, but the Lean formalization defines X a as this integral. The notation is slightly different - P(X > a) suggests a probability function, while X a suggests X is a function of a. However, Set.Ici a correctly represents the interval [a, \u221e), so the mathematical meaning is essentially the same despite the notational difference."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language states that X is a continuous random variable with PDF f(x), which is a general statement about any PDF. However, the Lean formalization specifically defines f as an exponential distribution with parameter lambda (f(x) = lambda * exp(-lambda * x) for x \u2265 0, and 0 for x < 0). This is much more restrictive than the general PDF mentioned in the natural language.', 'The natural language defines P(X > a) as the integral \u222b_a^\u221e f(x) dx, but the Lean formalization defines X a as this integral. The notation is slightly different - P(X > a) suggests a probability function, while X a suggests X is a function of a. However, Set.Ici a correctly represents the interval [a, \u221e), so the mathematical meaning is essentially the same despite the notational difference.']"}, "type": "definition"}, "l6": {"id": "l6", "natural_language": "which is $\\int_1^\\infty 2e^{-2x} dx$", "statement": "We assume:\n\u2022 The PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$ [l1].\n\u2022 The probability $P(X > 1)$ is given by the integral $\\int_1^\\infty f(x) dx$ [def_4].\nTherefore, we conclude:\n\u2022 $P(X > 1) = \\int_1^\\infty 2e^{-2x} dx$ [l6].", "dependencies": ["l1", "def_4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n  (l1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)))\n  (def_4 : \u2200 a, X a = \u222b x in Set.Ici a, f x) :\n  X 1 = \u222b x in Set.Ici 1, 2 * exp (-2 * x) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (X : \u211d \u2192 \u211d) (f : \u211d \u2192 \u211d) (lambda : \u211d)\n  (l1 : (\u2200 x, x < 0 \u2192 f x = 0) \u2227 (\u2200 x, x \u2265 0 \u2192 f x = 2 * exp (-2 * x)))\n  (def_4 : \u2200 a, X a = \u222b x in Set.Ici a, f x) :\n  X 1 = \u222b x in Set.Ici 1, 2 * exp (-2 * x) := by\n  rw [def_4]\n  apply set_integral_congr_ae\n  rw [MeasureTheory.ae_restrict_iff]\n  \u00b7 intro x hx\n    simp only [Set.mem_Ici] at hx\n    by_cases h : x < 0\n    \u00b7 rw [l1.1 x h]\n      simp\n    \u00b7 push_neg at h\n      rw [l1.2 x h]\n  \u00b7 exact measurableSet_Ici", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 8, "endLine": 11, "endColumn": 29, "data": "unknown identifier 'set_integral_congr_ae'"}, {"line": 12, "column": 6, "endLine": 12, "endColumn": 35, "data": "no goals to be solved"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The PDF assumption l1 adds an extra condition f(x) = 0 for x < 0 that wasn't explicitly stated in natural language, though this is mathematically reasonable for a complete PDF definition.", "The probability definition def_4 uses notation X a instead of P(X > a) from natural language, representing the same mathematical concept with different notation.", "The conclusion l6 perfectly captures the natural language statement, correctly applying the general definition with the specific PDF formula.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The PDF assumption l1 adds an extra condition f(x) = 0 for x < 0 that wasn't explicitly stated in natural language, though this is mathematically reasonable for a complete PDF definition.\", 'The probability definition def_4 uses notation X a instead of P(X > a) from natural language, representing the same mathematical concept with different notation.', 'The conclusion l6 perfectly captures the natural language statement, correctly applying the general definition with the specific PDF formula.']"}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "$\\int_1^\\infty 2e^{-2x} dx = e^{-2}$", "statement": "We assume:\n\u2022 (Calculus knowledge)\nTherefore, we conclude:\n\u2022 $\\int_1^\\infty 2e^{-2x} dx = e^{-2}$ [l7].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7 :\n  \u222b x in Ioi 1, 2 * (exp (-2 * x)) = exp (-2) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 6, "column": 9, "endLine": 6, "endColumn": 14, "data": "function expected at\n  Ioi\nterm has type\n  ?m.70"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7 :\n  \u222b x in Ioi 1, 2 * (exp (-2 * x)) = exp (-2) := by\n  simp only [mul_comm _ (exp _)]\n  rw [integral_mul_right]\n  have : \u222b x in Ioi 1, exp (-2 * x) = (exp (-2 * 1)) / 2 := by\n    rw [integral_exp_neg_mul (by norm_num : 0 < (2:\u211d)) _]\n    simp\n  rw [this]\n  field_simp\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 6, "column": 9, "endLine": 6, "endColumn": 14, "data": "function expected at\n  Ioi\nterm has type\n  ?m.70"}, {"line": 8, "column": 6, "endLine": 8, "endColumn": 24, "data": "unknown identifier 'integral_mul_right'"}, {"line": 8, "column": 6, "endLine": 8, "endColumn": 24, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.1212\nx\u271d : Sort u_1\nIoi : x\u271d\n\u22a2 \u222b (x : \u211d) in sorry, rexp (-2 * x) * 2 = rexp (-2)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "ts_3": {"id": "ts_3", "natural_language": "Finally, the probability $P(X > 1)$ is found by integrating the PDF from $1$ to $\\infty$, which is $\\int_1^\\infty 2e^{-2x} dx = e^{-2}$.", "statement": "We assume:\n\u2022 $P(X > 1) = \\int_1^\\infty 2e^{-2x} dx$ [l6]\n\u2022 $\\int_1^\\infty 2e^{-2x} dx = e^{-2}$ [l7]\nTherefore, we conclude:\n\u2022 $P(X > 1) = e^{-2}$ [ts_3].", "dependencies": ["l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_3\n  (f : \u211d \u2192 \u211d)\n  (l6 : (fun x => \u222b (x_1 : \u211d) in Set.Ici x, f x_1) 1 = \u222b (x : \u211d) in Set.Ici 1, 2 * exp (-2 * x))\n  (l7 : \u222b (x : \u211d) in Set.Ici 1, 2 * exp (-2 * x) = exp (-2)) :\n  (fun x => \u222b (x_1 : \u211d) in Set.Ici x, f x_1) 1 = exp (-2) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_3\n  (f : \u211d \u2192 \u211d)\n  (l6 : (fun x => \u222b (x_1 : \u211d) in Set.Ici x, f x_1) 1 = \u222b (x : \u211d) in Set.Ici 1, 2 * exp (-2 * x))\n  (l7 : \u222b (x : \u211d) in Set.Ici 1, 2 * exp (-2 * x) = exp (-2)) :\n  (fun x => \u222b (x_1 : \u211d) in Set.Ici x, f x_1) 1 = exp (-2) := by\n  rw [l6, l7]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly represents P(X > 1) as a survival function evaluated at 1, using the appropriate integral notation with Set.Ici 1 for the interval [1,\u221e). The use of a general function f makes it more abstract but mathematically equivalent.", "The integral evaluation is perfectly captured in Lean, with the correct bounds and integrand expression matching the natural language statement.", "The conclusion follows logically from the premises and is correctly formalized, maintaining the transitive equality relationship described in the natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_3", "label": "def_3", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_4", "label": "def_4", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_3", "label": "ts_3", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    