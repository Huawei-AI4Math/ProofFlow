
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $f^{(n)}(x_0)$ exists$,$ then
\begin{equation}\label{eq:2.5.7}
f(x)=\sum_{r=0}^n\frac{f^{(r)}(x_0)}{ r!} (x-x_0)^r+E_n(x)(x-x_0)^n,
\end{equation}
where
$$
\lim_{x	o x_0} E_n(x)=E_n(x_0)=0.
$$

Proof: Define
$$
E_n(x)=
\left\{\casespace\begin{array}{ll}
\dst\frac{f(x)-T_n(x)}{(x-x_0)^n},&x\in D_f-\{x_0\},\\
0,&x=x_0.\end{array}\right.
$$
Then  \eqref{eq:2.5.5} implies that $\lim_{x	o x_0}E_n(x)=E_n(x_0)=0$,
and it is straightforward to verify \eqref{eq:2.5.7}.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "If $f^{(n)}(x_0)$ exists", "statement": "Premise:\n\u2022 Let $f$ be a real-valued function defined on a domain $D_f$, let $x_0$ be a point in $D_f$, and assume the n-th derivative of $f$ at $x_0$, denoted $f^{(n)}(x_0)$, exists [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (f : \u211d \u2192 \u211d)\n  (D_f : Set \u211d)\n  (x0 : \u211d)\n  (n : \u2115)\n  (tc_1 : DifferentiableOn \u211d (fun x => f x) D_f \u2227 x0 \u2208 D_f \u2227 HasDerivAt (fderiv^[n] f) (deriv (fderiv^[n-1] f) x0) x0)", "lean_pass": false, "error_msg": [{"line": 10, "column": 95, "endLine": 10, "endColumn": 101, "data": "application type mismatch\n  iterate fderiv\nargument\n  fderiv\nhas type\n  (\ud835\udd5c : Type ?u.1936) \u2192\n    [inst : NontriviallyNormedField \ud835\udd5c] \u2192\n      {E : Type ?u.1935} \u2192\n        [inst_1 : AddCommGroup E] \u2192\n          [inst_2 : Module \ud835\udd5c E] \u2192\n            [inst_3 : TopologicalSpace E] \u2192\n              {F : Type ?u.1934} \u2192\n                [inst_4 : AddCommGroup F] \u2192\n                  [inst_5 : Module \ud835\udd5c F] \u2192\n                    [inst_6 : TopologicalSpace F] \u2192\n                      (E \u2192 F) \u2192 E \u2192 E \u2192L[\ud835\udd5c] F : Type (max (max (?u.1934 + 1) (?u.1935 + 1)) (?u.1936 + 1))\nbut is expected to have type\n  (\u211d \u2192 \u211d) \u2192 \u211d \u2192 \u211d : Type"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Define\n$$\nE_n(x)=\n\\left\\{\\casespace\\begin{array}{ll}\n\\dst\\frac{f(x)-T_n(x)}{(x-x_0)^n},&x\\in D_f-\\{x_0\\},\\\n0,&x=x_0.\\end{array}\\right.\n$$", "statement": "We assume:\n\u2022 Let $f$ be a real-valued function defined on a domain $D_f$, let $x_0$ be a point in $D_f$, and assume the n-th derivative of $f$ at $x_0$ exists [tc_1].\nDefinition:\n\u2022 Let $T_n(x)$ denote the n-th Taylor polynomial of $f$ at $x_0$, defined as $T_n(x) = \\sum_{r=0}^n\\frac{f^{(r)}(x_0)}{ r!} (x-x_0)^r$. \n\u2022 We define the function $E_n(x)$ for $x \\in D_f$ as: $E_n(x) = \\begin{cases} \\frac{f(x)-T_n(x)}{(x-x_0)^n} & \\text{if } x \\neq x_0 \\\\ 0 & \\text{if } x = x_0 \\end{cases}$ [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (f : \u211d \u2192 \u211d)\n  (D_f : Set \u211d)\n  (x_0 : \u211d)\n  (n : \u2115)\n  (tc_1 : DifferentiableAt \u211d f x_0)\n  (T_n : \u211d \u2192 \u211d)\n  (def_1_eq : \u2200 (x : \u211d), T_n x = \u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)", "lean_pass": true, "error_msg": [], "tries": 4}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly declares f as a real-valued function and D_f as a set of reals, matching the natural language condition", "While x_0 is declared as a real number in Lean, there's no explicit constraint that x_0 \u2208 D_f as stated in the natural language. However, this is a minor omission that doesn't affect the core mathematical meaning", "DifferentiableAt in Lean implies existence of all derivatives up to any order at the point, which covers the requirement that the n-th derivative exists at x_0", "The Lean definition perfectly matches the mathematical formula, with Finset.range (n + 1) giving {0,1,...,n} and deriv^[r] representing the r-th derivative", "The definition of E_n(x) is completely missing from the Lean formalization, which is a major omission since this is one of the key conclusions stated in the natural language"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly declares f as a real-valued function and D_f as a set of reals, matching the natural language condition', \"While x_0 is declared as a real number in Lean, there's no explicit constraint that x_0 \u2208 D_f as stated in the natural language. However, this is a minor omission that doesn't affect the core mathematical meaning\", 'DifferentiableAt in Lean implies existence of all derivatives up to any order at the point, which covers the requirement that the n-th derivative exists at x_0', 'The Lean definition perfectly matches the mathematical formula, with Finset.range (n + 1) giving {0,1,...,n} and deriv^[r] representing the r-th derivative', 'The definition of E_n(x) is completely missing from the Lean formalization, which is a major omission since this is one of the key conclusions stated in the natural language']"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Then  \\eqref{eq:2.5.5} implies that $\\lim_{x\\to x_0}E_n(x)=E_n(x_0)=0$", "statement": "We assume:\n\u2022 The n-th derivative of $f$ at $x_0$, $f^{(n)}(x_0)$, exists [tc_1].\n\u2022 $T_n(x) = \\sum_{r=0}^n\\frac{f^{(r)}(x_0)}{ r!} (x-x_0)^r$ is the n-th Taylor polynomial of $f$ at $x_0$ [def_1].\nTherefore, we conclude:\n\u2022 (Implicit premise from (2.5.5)) The limit of the scaled difference between the function and its Taylor polynomial is zero: $\\lim_{x\\to x_0} \\frac{f(x) - T_n(x)}{(x-x_0)^n} = 0$ [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (f : \u211d \u2192 \u211d)\n  (x_0 : \u211d)\n  (n : \u2115)\n  (tc_1 : DifferentiableAt \u211d f x_0)\n  (T_n : \u211d \u2192 \u211d)\n  (def_1 : \u2200 (x : \u211d), T_n x = \u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r) :\n  Tendsto (fun x => (f x - T_n x) / (x - x_0) ^ n) (nhds x_0) (\ud835\udcdd 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (f : \u211d \u2192 \u211d)\n  (x_0 : \u211d)\n  (n : \u2115)\n  (tc_1 : DifferentiableAt \u211d f x_0)\n  (T_n : \u211d \u2192 \u211d)\n  (def_1 : \u2200 (x : \u211d), T_n x = \u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r) :\n  Tendsto (fun x => (f x - T_n x) / (x - x_0) ^ n) (nhds x_0) (\ud835\udcdd 0) := by\n  simp_rw [def_1]\n  rw [\u2190 sub_self (f x_0), sub_eq_add_neg, add_assoc]\n  simp only [Finset.sum_range_succ, add_sub_cancel]\n  rw [\u2190 sub_eq_add_neg, sub_self]\n  simp only [zero_add]\n  apply Tendsto.add\n  \u00b7 simp only [div_eq_inv_mul]\n    apply Tendsto.mul_const\n    apply tendsto_nhdsWithin_of_tendsto_nhds\n    apply DifferentiableAt.tendsto_nhds\n    exact tc_1\n  \u00b7 simp_rw [Finset.sum_range_succ']\n    simp only [Nat.zero_eq, pow_zero, mul_one, deriv_iter_zero]\n    rw [add_comm, \u2190 sub_eq_add_neg]\n    simp only [sub_self]\n    apply Tendsto.sum\n    intro r hr\n    simp only [Finset.mem_range] at hr\n    simp only [div_eq_inv_mul, mul_assoc]\n    apply Tendsto.mul_const\n    simp only [\u2190 mul_assoc, \u2190 pow_sub]\n    apply Tendsto.pow_sub\n    exact tendsto_id", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 42, "endLine": 14, "endColumn": 51, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a + ?b + ?c\nr! : \u211d\nf : \u211d \u2192 \u211d\nx_0 : \u211d\nn : \u2115\ntc_1 : DifferentiableAt \u211d f x_0\nT_n : \u211d \u2192 \u211d\ndef_1 : \u2200 (x : \u211d), T_n x = \u2211 r \u2208 Finset.range (n + 1), deriv^[r] f x_0 / r! * (x - x_0) ^ r\n\u22a2 Tendsto (fun x => (f x - \u2211 r \u2208 Finset.range (n + 1), deriv^[r] f x_0 / r! * (x - x_0) ^ r) / (x - x_0) ^ n) (\ud835\udcdd x_0)\n    (\ud835\udcdd (f x_0 + -f x_0))"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Function, variable declarations, and type specifications correctly match the natural language requirements.", "The assumption tc_1 uses DifferentiableAt which only guarantees first-order differentiability, but the natural language requires existence of the n-th derivative f^(n)(x_0). This should use a condition like ContDiffAt \u211d n f x_0 to ensure n-times differentiability.", "The Taylor polynomial definition def_1 correctly translates the mathematical formula, with proper indexing from 0 to n and correct notation for derivatives and factorials.", "The limit conclusion l1 accurately captures the mathematical statement using Lean's Tendsto formulation with appropriate neighborhoods.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Function, variable declarations, and type specifications correctly match the natural language requirements.', 'The assumption tc_1 uses DifferentiableAt which only guarantees first-order differentiability, but the natural language requires existence of the n-th derivative f^(n)(x_0). This should use a condition like ContDiffAt \u211d n f x_0 to ensure n-times differentiability.', 'The Taylor polynomial definition def_1 correctly translates the mathematical formula, with proper indexing from 0 to n and correct notation for derivatives and factorials.', \"The limit conclusion l1 accurately captures the mathematical statement using Lean's Tendsto formulation with appropriate neighborhoods.\"]"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Then  \\eqref{eq:2.5.5} implies that $\\lim_{x\\to x_0}E_n(x)=E_n(x_0)=0$", "statement": "We assume:\n\u2022 $E_n(x)$ is defined as $E_n(x) = \\frac{f(x)-T_n(x)}{(x-x_0)^n}$ for $x \\neq x_0$ and $E_n(x_0)=0$ [def_1].\n\u2022 $\\lim_{x\\to x_0} \\frac{f(x) - T_n(x)}{(x-x_0)^n} = 0$ [l1].\nTherefore, we conclude:\n\u2022 The limit of $E_n(x)$ as $x$ approaches $x_0$ is equal to its value at $x_0$, and both are zero: $\\lim_{x\\to x_0} E_n(x) = E_n(x_0) = 0$ [ts_1].", "dependencies": ["def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (f : \u211d \u2192 \u211d)\n  (D_f : Set \u211d)\n  (x_0 : \u211d)\n  (n : \u2115)\n  (def_1 : \u2200 (x : \u211d), (x \u2260 x_0 \u2192 (f x - (\u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)) / (x - x_0) ^ n = (if x = x_0 then 0 else (f x - (\u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)) / (x - x_0) ^ n)))\n  (l1 : Tendsto (fun x => (f x - (\u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)) / (x - x_0) ^ n) (nhds x_0) (\ud835\udcdd 0)) :\n  Tendsto (fun x => (if x = x_0 then 0 else (f x - (\u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)) / (x - x_0) ^ n)) (nhds x_0) (\ud835\udcdd 0) \u2227 (if x_0 = x_0 then 0 else (f x_0 - (\u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x_0 - x_0) ^ r)) / (x_0 - x_0) ^ n) = 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (f : \u211d \u2192 \u211d)\n  (D_f : Set \u211d)\n  (x_0 : \u211d)\n  (n : \u2115)\n  (def_1 : \u2200 (x : \u211d), (x \u2260 x_0 \u2192 (f x - (\u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)) / (x - x_0) ^ n = (if x = x_0 then 0 else (f x - (\u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)) / (x - x_0) ^ n)))\n  (l1 : Tendsto (fun x => (f x - (\u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)) / (x - x_0) ^ n) (nhds x_0) (\ud835\udcdd 0)) :\n  Tendsto (fun x => (if x = x_0 then 0 else (f x - (\u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)) / (x - x_0) ^ n)) (nhds x_0) (\ud835\udcdd 0) \u2227 (if x_0 = x_0 then 0 else (f x_0 - (\u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x_0 - x_0) ^ r)) / (x_0 - x_0) ^ n) = 0 := by\n  constructor\n  \u00b7 simp only [tendsto_nhds_ite, l1]\n  \u00b7 simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 15, "endLine": 14, "endColumn": 31, "data": "unknown identifier 'tendsto_nhds_ite'"}, {"line": 14, "column": 4, "endLine": 14, "endColumn": 36, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The def_1 in Lean is a tautology that doesn't actually define the piecewise function E_n(x) as described in natural language. It should define E_n as a function that equals the fraction when x \u2260 x_0 and 0 when x = x_0.", "The assumption l1 correctly captures the limit using Tendsto, properly representing the mathematical limit with the Taylor polynomial as a finite sum.", "The conclusion ts_1 attempts to capture the right idea but has structural issues - it works directly with the piecewise expression rather than a properly defined E_n function, and includes redundant conditions like 'if x_0 = x_0'.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The def_1 in Lean is a tautology that doesn't actually define the piecewise function E_n(x) as described in natural language. It should define E_n as a function that equals the fraction when x \u2260 x_0 and 0 when x = x_0.\", 'The assumption l1 correctly captures the limit using Tendsto, properly representing the mathematical limit with the Taylor polynomial as a finite sum.', \"The conclusion ts_1 attempts to capture the right idea but has structural issues - it works directly with the piecewise expression rather than a properly defined E_n function, and includes redundant conditions like 'if x_0 = x_0'.\"]"}, "solved_negation": null, "type": "solution"}, "ts_2": {"id": "ts_2", "natural_language": "and it is straightforward to verify \\eqref{eq:2.5.7}.", "statement": "We assume:\n\u2022 $T_n(x) = \\sum_{r=0}^n\\frac{f^{(r)}(x_0)}{ r!} (x-x_0)^r$ and $E_n(x)$ is defined piece-wise as $E_n(x) = \\begin{cases} \\frac{f(x)-T_n(x)}{(x-x_0)^n} & \\text{if } x \\neq x_0 \\\\ 0 & \\text{if } x = x_0 \\end{cases}$ [def_1].\nTherefore, we conclude:\n\u2022 For all $x \\in D_f$, $f(x) = \\sum_{r=0}^n\\frac{f^{(r)}(x_0)}{ r!} (x-x_0)^r+E_n(x)(x-x_0)^n$ [ts_2].", "dependencies": ["def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (f : \u211d \u2192 \u211d)\n  (D_f : Set \u211d)\n  (x_0 : \u211d)\n  (n : \u2115)\n  (T_n : \u211d \u2192 \u211d)\n  (def_1_eq : \u2200 (x : \u211d), T_n x = \u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)\n  (E_n : \u211d \u2192 \u211d)\n  (def_1 : \u2200 x, E_n x = if x = x_0 then 0 else (f x - T_n x) / (x - x_0) ^ n) :\n  \u2200 x \u2208 D_f, f x = T_n x + E_n x * (x - x_0) ^ n := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (f : \u211d \u2192 \u211d)\n  (D_f : Set \u211d)\n  (x_0 : \u211d)\n  (n : \u2115)\n  (T_n : \u211d \u2192 \u211d)\n  (def_1_eq : \u2200 (x : \u211d), T_n x = \u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)\n  (E_n : \u211d \u2192 \u211d)\n  (def_1 : \u2200 x, E_n x = if x = x_0 then 0 else (f x - T_n x) / (x - x_0) ^ n) :\n  \u2200 x \u2208 D_f, f x = T_n x + E_n x * (x - x_0) ^ n := by\n  intro x hx\n  rw [def_1_eq]\n  by_cases h : x = x_0\n  \u00b7 simp [h, def_1]\n    rw [\u2190h]\n    simp [Finset.sum_range_succ]\n    rw [pow_zero, mul_one]\n    simp [Function.iterate_zero_apply]\n  \u00b7 simp [h, def_1]\n    field_simp [(pow_ne_zero n (sub_ne_zero.mpr h))]\n    ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 21, "column": 8, "endLine": 21, "endColumn": 16, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a ^ 0\ncase pos\nr! : \u211d\nf : \u211d \u2192 \u211d\nD_f : Set \u211d\nx_0 : \u211d\nn : \u2115\nT_n : \u211d \u2192 \u211d\ndef_1_eq : \u2200 (x : \u211d), T_n x = \u2211 r \u2208 Finset.range (n + 1), deriv^[r] f x_0 / r! * (x - x_0) ^ r\nE_n : \u211d \u2192 \u211d\ndef_1 : \u2200 (x : \u211d), E_n x = if x = x_0 then 0 else (f x - T_n x) / (x - x_0) ^ n\nx : \u211d\nhx : x \u2208 D_f\nh : x = x_0\n\u22a2 f x = \u2211 x_1 \u2208 Finset.range n, deriv^[x_1] f x / r! * 0 ^ x_1 + deriv^[n] f x / r! * 0 ^ n"}, {"line": 23, "column": 2, "endLine": 25, "endColumn": 8, "data": "unsolved goals\ncase neg\nr! : \u211d\nf : \u211d \u2192 \u211d\nD_f : Set \u211d\nx_0 : \u211d\nn : \u2115\nT_n : \u211d \u2192 \u211d\ndef_1_eq : \u2200 (x : \u211d), T_n x = \u2211 r \u2208 Finset.range (n + 1), deriv^[r] f x_0 / r! * (x - x_0) ^ r\nE_n : \u211d \u2192 \u211d\ndef_1 : \u2200 (x : \u211d), E_n x = if x = x_0 then 0 else (f x - T_n x) / (x - x_0) ^ n\nx : \u211d\nhx : x \u2208 D_f\nh : \u00acx = x_0\n\u22a2 f x = \u2211 x_1 \u2208 Finset.range (1 + n), deriv^[x_1] f x_0 * (x - x_0) ^ x_1 / r! + (f x - T_n x)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The definition of T_n(x) as a Taylor polynomial is correctly formalized with proper sum notation, derivative notation, and factorial terms.", "The piecewise definition of E_n(x) is accurately captured using if-then-else structure with correct cases for x = x_0 and x \u2260 x_0.", "The main conclusion correctly states the Taylor expansion formula with error term, properly quantified over the domain D_f and with the correct algebraic structure.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_2\n  (f : \u211d \u2192 \u211d)\n  (D_f : Set \u211d)\n  (x_0 : \u211d)\n  (n : \u2115)\n  (T_n : \u211d \u2192 \u211d)\n  (def_1_eq : \u2200 (x : \u211d), T_n x = \u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r)\n  (E_n : \u211d \u2192 \u211d)\n  (def_1 : \u2200 x, E_n x = if x = x_0 then 0 else (f x - T_n x) / (x - x_0) ^ n) :\n  \u2203 x \u2208 D_f, f x \u2260 T_n x + E_n x * (x - x_0) ^ n := by\n  let f : \u211d \u2192 \u211d := fun x => if x = 0 then 1 else 0\n  let D_f : Set \u211d := {0}\n  let x_0 : \u211d := 0\n  let n : \u2115 := 1\n  let T_n : \u211d \u2192 \u211d := fun x => f x_0 + deriv f x_0 * x\n  have def_1_eq : \u2200 (x : \u211d), T_n x = \u2211 r in Finset.range (n + 1), (deriv^[r] f) x_0 / r! * (x - x_0) ^ r := by\n    intro x\n    simp [T_n, n, x_0]\n    rw [Finset.sum_range_succ, Finset.sum_range_one]\n    simp\n  let E_n : \u211d \u2192 \u211d := fun x => if x = x_0 then 0 else (f x - T_n x) / (x - x_0) ^ n\n  have def_1 : \u2200 x, E_n x = if x = x_0 then 0 else (f x - T_n x) / (x - x_0) ^ n := by intro x; rfl\n  refine \u27e80, by simp [D_f], ?_\u27e9\n  simp [f, T_n, E_n, x_0, n]\n  have : deriv f 0 = 0 := by\n    simp [f]\n    rw [deriv_if_then_else]\n    simp\n  simp [this]"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    