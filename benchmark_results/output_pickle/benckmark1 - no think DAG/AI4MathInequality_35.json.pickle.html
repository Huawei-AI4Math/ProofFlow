
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for all positive real numbers $a, b, c, d$ such that $abcd = 1$, the following inequality holds:
$$ (1 + a^2)(1 + b^2)(1 + c^2)(1 + d^2) \\geq (a + b + c + d)^2 $$

Proof: Let $a, b, c, d$ be positive real numbers such that $abcd=1$. To prove $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \ge (a+b+c+d)^2$, we first apply the Cauchy-Schwarz inequality by setting $X=(1, a, b, ab)$ and $Y=(c, 1, d, cd)$, which gives $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \ge (a+c+bd+abcd)^2$. Since $abcd=1$, this reduces to $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \ge (a+c+bd+1)^2$. The remaining step is to show $a+c+bd+1 \ge a+b+c+d$, which is equivalent to $bd+1 \ge b+d$. This holds because $(b-1)(d-1) \ge 0$ for some choice of two variables $b$ and $d$, which is always possible given that $abcd=1$. Combining these, we obtain $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \ge (a+b+c+d)^2$, completing the proof.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let a, b, c, d be positive real numbers", "statement": "Premise:\n\u2022 a, b, c, d are positive real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c d : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly declares a, b, c, d as real numbers and states that they are all positive through the conjunction 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d, which perfectly captures the natural language condition", "The Lean formalization correctly contains no conclusions, matching the natural language statement that indicates no conclusions are derived in this premise step"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "such that abcd=1", "statement": "Premise:\n\u2022 a, b, c, d are positive real numbers [tc_1]\n\u2022 abcd = 1 [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c d : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d)\n(tc_2 : a * b * c * d = 1)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that a, b, c, d are positive real numbers through the variable declaration and the positivity constraint tc_1", "The Lean formalization correctly captures the constraint abcd = 1 using explicit multiplication notation"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "we first apply the Cauchy-Schwarz inequality by setting $X=(1, a, b, ab)$ and $Y=(c, 1, d, cd)$, which gives $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \\ge (a+c+bd+abcd)^2$.", "statement": "We assume:\n\u2022 a, b, c, d are real numbers (from [tc_1])\nTherefore, we conclude:\n\u2022 By applying the Cauchy-Schwarz inequality to the 4-dimensional vectors X=(1, a, b, ab) and Y=(c, 1, d, cd), which states $ (||X||^2)(||Y||^2) \\ge (X \\cdot Y)^2 $, we obtain $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \\ge (a+c+bd+abcd)^2$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c d : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d) :\n  (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) \u2265 (c + a + b * d + a * b * c * d)^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c d : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d) :\n  (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) \u2265 (c + a + b * d + a * b * c * d)^2 := by\n  let X : Fin 4 \u2192 \u211d := ![1, a, b, a * b]\n  let Y : Fin 4 \u2192 \u211d := ![c, 1, d, c * d]\n  have h\u2081 : \u2211 i : Fin 4, X i * Y i = c + a + b * d + a * b * c * d := by\n    simp [X, Y, Fin.sum_univ_succ]\n    ring\n  have h\u2082 : \u2211 i : Fin 4, X i ^ 2 = (1 + a^2) * (1 + b^2) := by\n    simp [X, Fin.sum_univ_succ]\n    ring\n  have h\u2083 : \u2211 i : Fin 4, Y i ^ 2 = (1 + c^2) * (1 + d^2) := by\n    simp [Y, Fin.sum_univ_succ]\n    ring\n  have h\u2084 : \u2211 i : Fin 4, X i ^ 2 * \u2211 i : Fin 4, Y i ^ 2 \u2265 (\u2211 i : Fin 4, X i * Y i)^2 := by\n    exact Real.inner_mul_inner_self_le (X \u00b7) (Y \u00b7)\n  rw [h\u2081, h\u2082, h\u2083] at h\u2084\n  simp at h\u2084\n  exact h\u2084", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 21, "column": 10, "endLine": 21, "endColumn": 50, "data": "unknown constant 'Real.inner_mul_inner_self_le'"}, {"line": 22, "column": 10, "endLine": 22, "endColumn": 12, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u2211 i : Fin 4, X i ^ 2\na b c d : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d\nX : Fin 4 \u2192 \u211d := ![1, a, b, a * b]\nY : Fin 4 \u2192 \u211d := ![c, 1, d, c * d]\nh\u2081 : \u2211 i : Fin 4, X i * Y i = c + a + b * d + a * b * c * d\nh\u2082 : \u2211 i : Fin 4, X i ^ 2 = (1 + a ^ 2) * (1 + b ^ 2)\nh\u2083 : \u2211 i : Fin 4, Y i ^ 2 = (1 + c ^ 2) * (1 + d ^ 2)\nh\u2084 : \u2211 i : Fin 4, X i ^ 2 * \u2211 i : Fin 4, Y i ^ 2 \u2265 (c + a + b * d + a * b * c * d) ^ 2\n\u22a2 (1 + a ^ 2) * (1 + b ^ 2) * (1 + c ^ 2) * (1 + d ^ 2) \u2265 (c + a + b * d + a * b * c * d) ^ 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations match perfectly - both declare a, b, c, d as real numbers", "The Lean formalization adds positivity constraints (0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d) that are not mentioned in the natural language, which only states the variables are real numbers", "The mathematical inequality structure is equivalent - term reordering on the right side doesn't affect semantic meaning due to commutativity of addition", "The core mathematical statement is preserved correctly, though the Lean version omits the methodological reference to Cauchy-Schwarz inequality", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.75 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1 :\n    \u2203 (a b c d : \u211d), (0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d) \u2227 \n    (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) < (c + a + b * d + a * b * c * d)^2 := by\n  exists 1, 1, 1, 0.5\n  constructor\n  . simp\n  . norm_num"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Since $abcd=1$, this reduces to $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \\ge (a+c+bd+1)^2$.", "statement": "We assume:\n\u2022 $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \\ge (a+c+bd+abcd)^2$ [l1]\n\u2022 abcd = 1 [tc_2]\nTherefore, we conclude:\n\u2022 $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \\ge (a+c+bd+1)^2$ [l2].", "dependencies": ["l1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c d : \u211d)\n  (l1 : (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) \u2265 (c + a + b * d + a * b * c * d)^2)\n  (tc_2 : a * b * c * d = 1) :\n  (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) \u2265 (a + c + b * d + 1)^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c d : \u211d)\n  (l1 : (a * b * c * d + a^2) * (a * b * c * d + b^2) * (a * b * c * d + c^2) * (a * b * c * d + d^2) \u2265 (c + a + b * d + a * b * c * d)^2)\n  (tc_2 : a * b * c * d = 1) :\n  (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) \u2265 (a + c + b * d + 1)^2 := by\n  rw [\u2190 tc_2] at l1\n  simp at l1\n  exact l1", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 6, "endLine": 10, "endColumn": 12, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  1\na b c d : \u211d\nl1 :\n  (a * b * c * d + a ^ 2) * (a * b * c * d + b ^ 2) * (a * b * c * d + c ^ 2) * (a * b * c * d + d ^ 2) \u2265\n    (c + a + b * d + a * b * c * d) ^ 2\ntc_2 : a * b * c * d = 1\n\u22a2 (1 + a ^ 2) * (1 + b ^ 2) * (1 + c ^ 2) * (1 + d ^ 2) \u2265 (a + c + b * d + 1) ^ 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The left-hand side expressions are mathematically identical, with only notational differences between multiplication symbols", "Assumption l1 is correctly captured - the terms in the right-hand side are reordered but mathematically equivalent due to commutativity", "The constraint tc_2 is perfectly represented with abcd = a * b * c * d = 1", "The conclusion l2 correctly represents the final inequality after substitution", "The logical structure perfectly captures the deductive reasoning: using l1 and tc_2 as premises to derive l2 through substitution", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2 :\n  \u2203 (a b c d : \u211d),\n    (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) \u2265 (c + a + b * d + a * b * c * d)^2 \u2227\n    a * b * c * d = 1 \u2227\n    (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) < (a + c + b * d + 1)^2 := by\n  let a := -1\n  let b := -1\n  let c := -1\n  let d := -1\n  exists a, b, c, d\n  simp\n  norm_num"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "The remaining step is to show $a+c+bd+1 \\ge a+b+c+d$, which is equivalent to $bd+1 \\ge b+d$.", "statement": "We assume:\n\u2022 a, b, c, d are real numbers [tc_1]\nTherefore, we conclude:\n\u2022 The inequality $a+c+bd+1 \\ge a+b+c+d$ is equivalent to $bd+1 \\ge b+d$ [l3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c d : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d) :\n  (a + c + b * d + 1 \u2265 a + b + c + d) \u2194 (b * d + 1 \u2265 b + d) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c d : \u211d) :\n  (a + c + b * d + 1 \u2265 a + b + c + d) \u2194 (b * d + 1 \u2265 b + d) := by\n  constructor\n  \u00b7 intro h\n    simp at h\n    linarith\n  \u00b7 intro h\n    simp\n    linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations match - both specify a, b, c, d as real numbers", "The Lean formalization adds positivity constraints (0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d) not mentioned in natural language, but this is acceptable as extra logically consistent details", "The main equivalence statement matches exactly between natural language and Lean formalization"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "This holds because $(b-1)(d-1) \\ge 0$", "statement": "We assume:\n\u2022 b, d are real numbers [tc_1]\nTherefore, we conclude:\n\u2022 The inequality $bd+1 \\ge b+d$ is equivalent to $(b-1)(d-1) \\ge 0$ [l4].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (b d : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d) :\n  (b * d + 1 \u2265 b + d) \u2194 ((b - 1) * (d - 1) \u2265 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (b d : \u211d) :\n  (b * d + 1 \u2265 b + d) \u2194 ((b - 1) * (d - 1) \u2265 0) := by\n  constructor\n  \u00b7 intro h\n    have h1 : b * d + 1 - b - d \u2265 0 := by linarith\n    linear_combination h1\n  \u00b7 intro h\n    have h1 : (b - 1) * (d - 1) = b * d - b - d + 1 := by ring\n    rw [h1] at h\n    linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 4}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations for b and d as real numbers match perfectly between natural language and Lean formalization.", "The Lean formalization introduces variables 'a' and 'c' that are never mentioned in the natural language, and adds positivity constraints (0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d) that contradict the natural language which only states that b, d are real numbers without any positivity requirements.", "The main equivalence statement between the inequality bd+1 \u2265 b+d and (b-1)(d-1) \u2265 0 is perfectly captured in both the natural language and Lean formalization."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations for b and d as real numbers match perfectly between natural language and Lean formalization.', \"The Lean formalization introduces variables 'a' and 'c' that are never mentioned in the natural language, and adds positivity constraints (0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d) that contradict the natural language which only states that b, d are real numbers without any positivity requirements.\", 'The main equivalence statement between the inequality bd+1 \u2265 b+d and (b-1)(d-1) \u2265 0 is perfectly captured in both the natural language and Lean formalization.']"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "for some choice of two variables $b$ and $d$, which is always possible given that $abcd=1$.", "statement": "We assume:\n\u2022 a, b, c, d are positive real numbers [tc_1]\n\u2022 abcd = 1 [tc_2]\nTherefore, we conclude:\n\u2022 Among the four numbers a, b, c, d, it is always possible to select two (which, by relabeling the variables, we can call b and d) such that either both are $\\ge 1$ or both are $\\le 1$, which implies $(b-1)(d-1) \\ge 0$ [l5].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c d : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d)\n  (tc_2 : a * b * c * d = 1) :\n  \u2203 b' d' : \u211d, (b' = a \u2228 b' = b \u2228 b' = c \u2228 b' = d) \u2227 (d' = a \u2228 d' = b \u2228 d' = c \u2228 d' = d) \u2227 b' \u2260 d' \u2227 ((b' \u2265 1 \u2227 d' \u2265 1) \u2228 (b' \u2264 1 \u2227 d' \u2264 1)) \u2227 (b' - 1) * (d' - 1) \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c d : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d)\n  (tc_2 : a * b * c * d = 1) :\n  \u2203 b' d' : \u211d, (b' = a \u2228 b' = b \u2228 b' = c \u2228 b' = d) \u2227 (d' = a \u2228 d' = b \u2228 d' = c \u2228 d' = d) \u2227 b' \u2260 d' \u2227 ((b' \u2265 1 \u2227 d' \u2265 1) \u2228 (b' \u2264 1 \u2227 d' \u2264 1)) \u2227 (b' - 1) * (d' - 1) \u2265 0 := by\n  have ha : a \u2264 1 \u2228 a > 1 := le_or_lt a 1\n  have hb : b \u2264 1 \u2228 b > 1 := le_or_lt b 1\n  have hc : c \u2264 1 \u2228 c > 1 := le_or_lt c 1\n  have hd : d \u2264 1 \u2228 d > 1 := le_or_lt d 1\n  cases ha with\n  | inl ha1 =>\n    cases hb with\n    | inl hb1 =>\n      use a, b\n      simp [ha1, hb1]\n      exact mul_nonneg (sub_nonneg.mpr ha1) (sub_nonneg.mpr hb1)\n    | inr hb2 =>\n      cases hc with\n      | inl hc1 =>\n        use a, c\n        simp [ha1, hc1]\n        exact mul_nonneg (sub_nonneg.mpr ha1) (sub_nonneg.mpr hc1)\n      | inr hc2 =>\n        cases hd with\n        | inl hd1 =>\n          use a, d\n          simp [ha1, hd1]\n          exact mul_nonneg (sub_nonneg.mpr ha1) (sub_nonneg.mpr hd1)\n        | inr hd2 =>\n          use b, d\n          simp [hb2, hd2]\n          exact mul_nonneg (sub_nonneg.mpr (le_of_lt hb2)) (sub_nonneg.mpr (le_of_lt hd2))\n  | inr ha2 =>\n    cases hb with\n    | inr hb2 =>\n      use a, b\n      simp [ha2, hb2]\n      exact mul_nonneg (sub_nonneg.mpr (le_of_lt ha2)) (sub_nonneg.mpr (le_of_lt hb2))\n    | inl hb1 =>\n      cases hc with\n      | inr hc2 =>\n        use a, c\n        simp [ha2, hc2]\n        exact mul_nonneg (sub_nonneg.mpr (le_of_lt ha2)) (sub_nonneg.mpr (le_of_lt hc2))\n      | inl hc1 =>\n        cases hd with\n        | inr hd2 =>\n          use a, d\n          simp [ha2, hd2]\n          exact mul_nonneg (sub_nonneg.mpr (le_of_lt ha2)) (sub_nonneg.mpr (le_of_lt hd2))\n        | inl hd1 =>\n          use b, d\n          simp [hb1, hd1]\n          exact mul_nonneg (sub_nonneg.mpr hb1) (sub_nonneg.mpr hd1)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 20, "column": 6, "endLine": 20, "endColumn": 64, "data": "type mismatch\n  mul_nonneg (sub_nonneg.mpr ha1) (sub_nonneg.mpr hb1)\nhas type\n  0 \u2264 (1 - a) * (1 - b) : Prop\nbut is expected to have type\n  \u00aca = b \u2227 0 \u2264 (a - 1) * (b - 1) : Prop"}, {"line": 26, "column": 8, "endLine": 26, "endColumn": 66, "data": "type mismatch\n  mul_nonneg (sub_nonneg.mpr ha1) (sub_nonneg.mpr hc1)\nhas type\n  0 \u2264 (1 - a) * (1 - c) : Prop\nbut is expected to have type\n  \u00aca = c \u2227 0 \u2264 (a - 1) * (c - 1) : Prop"}, {"line": 32, "column": 10, "endLine": 32, "endColumn": 68, "data": "type mismatch\n  mul_nonneg (sub_nonneg.mpr ha1) (sub_nonneg.mpr hd1)\nhas type\n  0 \u2264 (1 - a) * (1 - d) : Prop\nbut is expected to have type\n  \u00aca = d \u2227 0 \u2264 (a - 1) * (d - 1) : Prop"}, {"line": 36, "column": 10, "endLine": 36, "endColumn": 90, "data": "type mismatch\n  mul_nonneg (sub_nonneg.mpr (le_of_lt hb2)) (sub_nonneg.mpr (le_of_lt hd2))\nhas type\n  0 \u2264 (b - 1) * (d - 1) : Prop\nbut is expected to have type\n  \u00acb = d \u2227 (1 \u2264 b \u2227 1 \u2264 d \u2228 b \u2264 1 \u2227 d \u2264 1) \u2227 1 \u2264 d : Prop"}, {"line": 42, "column": 6, "endLine": 42, "endColumn": 86, "data": "type mismatch\n  mul_nonneg (sub_nonneg.mpr (le_of_lt ha2)) (sub_nonneg.mpr (le_of_lt hb2))\nhas type\n  0 \u2264 (a - 1) * (b - 1) : Prop\nbut is expected to have type\n  \u00aca = b \u2227 (1 \u2264 a \u2227 1 \u2264 b \u2228 a \u2264 1 \u2227 b \u2264 1) \u2227 1 \u2264 b : Prop"}, {"line": 48, "column": 8, "endLine": 48, "endColumn": 88, "data": "type mismatch\n  mul_nonneg (sub_nonneg.mpr (le_of_lt ha2)) (sub_nonneg.mpr (le_of_lt hc2))\nhas type\n  0 \u2264 (a - 1) * (c - 1) : Prop\nbut is expected to have type\n  \u00aca = c \u2227 (1 \u2264 a \u2227 1 \u2264 c \u2228 a \u2264 1 \u2227 c \u2264 1) \u2227 1 \u2264 c : Prop"}, {"line": 54, "column": 10, "endLine": 54, "endColumn": 90, "data": "type mismatch\n  mul_nonneg (sub_nonneg.mpr (le_of_lt ha2)) (sub_nonneg.mpr (le_of_lt hd2))\nhas type\n  0 \u2264 (a - 1) * (d - 1) : Prop\nbut is expected to have type\n  \u00aca = d \u2227 (1 \u2264 a \u2227 1 \u2264 d \u2228 a \u2264 1 \u2227 d \u2264 1) \u2227 1 \u2264 d : Prop"}, {"line": 58, "column": 10, "endLine": 58, "endColumn": 68, "data": "type mismatch\n  mul_nonneg (sub_nonneg.mpr hb1) (sub_nonneg.mpr hd1)\nhas type\n  0 \u2264 (1 - b) * (1 - d) : Prop\nbut is expected to have type\n  \u00acb = d \u2227 0 \u2264 (b - 1) * (d - 1) : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The variable declarations, constraints, selection mechanism, dichotomy condition, and final inequality are all properly formalized. The use of existential quantification appropriately represents the 'always possible to select' aspect, and the relabeling mentioned in natural language is properly handled through the disjunctive conditions for b' and d'.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "NL statement", "error_report": "Formalization appears correct (score=1.0 > 0.6), and the prover could prove the NEGATION of the NL lemma. The NL statement is likely incorrect."}, "solved_negation": {"lean_verify": true, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5 :\n  \u2203 (a b c d : \u211d), (0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d) \u2227 (a * b * c * d = 1) \u2227\n  \u2200 (b' d' : \u211d), ((b' = a \u2228 b' = b \u2228 b' = c \u2228 b' = d) \u2227 (d' = a \u2228 d' = b \u2228 d' = c \u2228 d' = d) \u2227 b' \u2260 d') \u2192\n    \u00ac((b' \u2265 1 \u2227 d' \u2265 1) \u2228 (b' \u2264 1 \u2227 d' \u2264 1)) \u2228 \u00ac((b' - 1) * (d' - 1) \u2265 0) := by\n  use 2, 0.5, 0.5, 2\n  constructor\n  \u00b7 norm_num\n  constructor\n  \u00b7 norm_num\n  \u00b7 intro b' d' h\n    rcases h with \u27e8hb, hd, hne\u27e9\n    simp at hb hd\n    have : (b' = 2 \u2227 d' = 0.5) \u2228 (b' = 0.5 \u2227 d' = 2) := by\n      rcases hb with rfl | rfl | rfl | rfl <;> rcases hd with rfl | rfl | rfl | rfl <;> simp [hne] at *\n    rcases this with \u27e8hb', hd'\u27e9 | \u27e8hb', hd'\u27e9\n    \u00b7 right\n      simp [hb', hd']\n      norm_num\n    \u00b7 right\n      simp [hb', hd']\n      norm_num"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "The remaining step is to show $a+c+bd+1 \\ge a+b+c+d$, which is equivalent to $bd+1 \\ge b+d$. This holds because $(b-1)(d-1) \\ge 0$ for some choice of two variables $b$ and $d$, which is always possible given that $abcd=1$.", "statement": "We assume:\n\u2022 We can choose b and d such that $(b-1)(d-1) \\ge 0$ [l5]\n\u2022 $bd+1 \\ge b+d$ is equivalent to $(b-1)(d-1) \\ge 0$ [l4]\n\u2022 $a+c+bd+1 \\ge a+b+c+d$ is equivalent to $bd+1 \\ge b+d$ [l3]\nTherefore, we conclude:\n\u2022 $a+c+bd+1 \\ge a+b+c+d$ [l6].", "dependencies": ["l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a b c d : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d)\n  (l3 : (a + c + b * d + 1 \u2265 a + b + c + d) \u2194 (b * d + 1 \u2265 b + d))\n  (l4 : (b * d + 1 \u2265 b + d) \u2194 ((b - 1) * (d - 1) \u2265 0))\n  (l5 : \u2203 b' d' : \u211d, (b' = a \u2228 b' = b \u2228 b' = c \u2228 b' = d) \u2227 (d' = a \u2228 d' = b \u2228 d' = c \u2228 d' = d) \u2227 b' \u2260 d' \u2227 ((b' \u2265 1 \u2227 d' \u2265 1) \u2228 (b' \u2264 1 \u2227 d' \u2264 1)) \u2227 (b' - 1) * (d' - 1) \u2265 0) :\n  a + c + b * d + 1 \u2265 a + b + c + d := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a b c d : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d)\n  (l3 : (a + c + b * d + 1 \u2265 a + b + c + d) \u2194 (b * d + 1 \u2265 b + d))\n  (l4 : (b * d + 1 \u2265 b + d) \u2194 ((b - 1) * (d - 1) \u2265 0))\n  (l5 : \u2203 b' d' : \u211d, (b' = a \u2228 b' = b \u2228 b' = c \u2228 b' = d) \u2227 (d' = a \u2228 d' = b \u2228 d' = c \u2228 d' = d) \u2227 b' \u2260 d' \u2227 ((b' \u2265 1 \u2227 d' \u2265 1) \u2228 (b' \u2264 1 \u2227 d' \u2264 1)) \u2227 (b' - 1) * (d' - 1) \u2265 0) :\n  a + c + b * d + 1 \u2265 a + b + c + d := by\n  obtain \u27e8b', d', hb', hd', hne, hcond, hprod\u27e9 := l5\n  cases' hcond with hge hle\n  \u00b7 have h := l4.mpr (by linarith [hprod])\n    exact l3.mp h\n  \u00b7 have h := l4.mpr (by linarith [hprod])\n    exact l3.mp h", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 25, "endLine": 14, "endColumn": 41, "data": "linarith failed to find a contradiction\ncase a\na b c d : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d\nl3 : a + c + b * d + 1 \u2265 a + b + c + d \u2194 b * d + 1 \u2265 b + d\nl4 : b * d + 1 \u2265 b + d \u2194 (b - 1) * (d - 1) \u2265 0\nb' d' : \u211d\nhb' : b' = a \u2228 b' = b \u2228 b' = c \u2228 b' = d\nhd' : d' = a \u2228 d' = b \u2228 d' = c \u2228 d' = d\nhne : b' \u2260 d'\nhprod : (b' - 1) * (d' - 1) \u2265 0\nhge : b' \u2265 1 \u2227 d' \u2265 1\na\u271d : 0 > (b - 1) * (d - 1)\n\u22a2 False failed"}, {"line": 15, "column": 16, "endLine": 15, "endColumn": 17, "data": "application type mismatch\n  l3.mp h\nargument\n  h\nhas type\n  b * d + 1 \u2265 b + d : Prop\nbut is expected to have type\n  a + c + b * d + 1 \u2265 a + b + c + d : Prop"}, {"line": 16, "column": 25, "endLine": 16, "endColumn": 41, "data": "linarith failed to find a contradiction\ncase a\na b c d : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d\nl3 : a + c + b * d + 1 \u2265 a + b + c + d \u2194 b * d + 1 \u2265 b + d\nl4 : b * d + 1 \u2265 b + d \u2194 (b - 1) * (d - 1) \u2265 0\nb' d' : \u211d\nhb' : b' = a \u2228 b' = b \u2228 b' = c \u2228 b' = d\nhd' : d' = a \u2228 d' = b \u2228 d' = c \u2228 d' = d\nhne : b' \u2260 d'\nhprod : (b' - 1) * (d' - 1) \u2265 0\nhle : b' \u2264 1 \u2227 d' \u2264 1\na\u271d : 0 > (b - 1) * (d - 1)\n\u22a2 False failed"}, {"line": 17, "column": 16, "endLine": 17, "endColumn": 17, "data": "application type mismatch\n  l3.mp h\nargument\n  h\nhas type\n  b * d + 1 \u2265 b + d : Prop\nbut is expected to have type\n  a + c + b * d + 1 \u2265 a + b + c + d : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The equivalences l3 and l4 are correctly formalized as biconditionals, accurately capturing the mathematical relationships stated in natural language.", "The conclusion l6 correctly states the target inequality that should be proven.", "The assumption l5 has a major inconsistency. The natural language simply states 'We can choose b and d such that (b-1)(d-1) \u2265 0', but the Lean formalization adds significant extra constraints: requiring b' and d' to be chosen from existing variables {a,b,c,d}, requiring them to be different, and adding a constraint that both are \u22651 or both are \u22641. These additional constraints fundamentally change the logical meaning of the assumption.", "The overall structure captures the main mathematical relationships, but the complexity added to l5 represents a significant departure from the natural language meaning.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The equivalences l3 and l4 are correctly formalized as biconditionals, accurately capturing the mathematical relationships stated in natural language.', 'The conclusion l6 correctly states the target inequality that should be proven.', \"The assumption l5 has a major inconsistency. The natural language simply states 'We can choose b and d such that (b-1)(d-1) \u2265 0', but the Lean formalization adds significant extra constraints: requiring b' and d' to be chosen from existing variables {a,b,c,d}, requiring them to be different, and adding a constraint that both are \u22651 or both are \u22641. These additional constraints fundamentally change the logical meaning of the assumption.\", 'The overall structure captures the main mathematical relationships, but the complexity added to l5 represents a significant departure from the natural language meaning.']"}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "Combining these, we obtain...", "statement": "We assume:\n\u2022 a, b, c, d are positive real numbers [tc_1]\n\u2022 $a+c+bd+1 \\ge a+b+c+d$ [l6]\nTherefore, we conclude:\n\u2022 $(a+c+bd+1)^2 \\ge (a+b+c+d)^2$ [l7].", "dependencies": ["tc_1", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a b c d : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d)\n  (l6 : a + c + b * d + 1 \u2265 a + b + c + d) :\n  (a + c + b * d + 1)^2 \u2265 (a + b + c + d)^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a b c d : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d)\n  (l6 : a + c + b * d + 1 \u2265 a + b + c + d) :\n  (a + c + b * d + 1)^2 \u2265 (a + b + c + d)^2 := by\n  exact pow_le_pow_left (by linarith [show 0 \u2264 a + c + b * d + 1 from by linarith [tc_1.1, tc_1.2.1, tc_1.2.2.1, tc_1.2.2.2]]) l6 2", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly capture that a, b, c, d are positive real numbers through type annotation and positivity constraints", "The premise inequality is exactly translated with proper mathematical notation (b * d for bd)", "The conclusion maintains the same mathematical relationship with identical algebraic expressions and inequality direction"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Combining these, we obtain $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \\ge (a+b+c+d)^2$, completing the proof.", "statement": "We assume:\n\u2022 $(1+a^2)(1+b^2)(1+c^2)(1+d^2) \\ge (a+c+bd+1)^2$ [l2]\n\u2022 $(a+c+bd+1)^2 \\ge (a+b+c+d)^2$ [l7]\nTherefore, we conclude:\n\u2022 $(1 + a^2)(1 + b^2)(1 + c^2)(1 + d^2) \\ge (a + b + c + d)^2$ [ts_1].", "dependencies": ["l2", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c d : \u211d)\n  (l2 : (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) \u2265 (a + c + b * d + 1)^2)\n  (l7 : (a + c + b * d + 1)^2 \u2265 (a + b + c + d)^2) :\n  (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) \u2265 (a + b + c + d)^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c d : \u211d)\n  (l2 : (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) \u2265 (a + c + b * d + 1)^2)\n  (l7 : (a + c + b * d + 1)^2 \u2265 (a + b + c + d)^2) :\n  (1 + a^2) * (1 + b^2) * (1 + c^2) * (1 + d^2) \u2265 (a + b + c + d)^2 := by\n  exact ge_trans l2 l7", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations are correctly formalized with explicit real number types", "First assumption l2 is perfectly captured with correct operator precedence and explicit multiplication", "Second assumption l7 is accurately formalized with proper term ordering", "The conclusion ts_1 matches the natural language statement exactly", "The logical structure correctly implements the transitivity argument using hypotheses and conclusion", "The mathematical content and relationships between inequalities are preserved completely"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    