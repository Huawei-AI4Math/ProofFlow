
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $(a_n)$ be a sequence such that $a_n = \frac{1}{n^2}$. Let $S_N = \sum_{n=1}^{N} a_n$ be the partial sum of the series. Then for any integer $N \geq 2$, the inequality $S_N \leq 2 - \frac{1}{N}$ holds.

Proof: The proof is by induction. First, for the base case $N=2$, we have $S_2 = \sum_{n=1}^{2} \frac{1}{n^2} = \frac{1}{1^2} + \frac{1}{2^2} = 1 + \frac{1}{4} = 1.25$. The right side of the inequality is $2-\frac{1}{2}=1.5$. Since $1.25 \leq 1.5$, the inequality holds for $N=2$. Now for the inductive step, assume the inequality holds for some integer $k \geq 2$, i.e., $S_k \leq 2 - \frac{1}{k}$. We want to show it holds for $k+1$, i.e., $S_{k+1} \leq 2 - \frac{1}{k+1}$. We know that $S_{k+1} = S_k + a_{k+1} = S_k + \frac{1}{(k+1)^2}$. From the inductive hypothesis, $S_k \leq 2 - \frac{1}{k}$. So we have $S_{k+1} \leq 2 - \frac{1}{k} + \frac{1}{(k+1)^2}$. To prove the inequality, we need to show that $2 - \frac{1}{k} + \frac{1}{(k+1)^2} \leq 2 - \frac{1}{k+1}$. This simplifies to showing that $-\frac{1}{k} + \frac{1}{(k+1)^2} \leq -\frac{1}{k+1}$. We can rearrange this to show $\frac{1}{k+1} - \frac{1}{k} + \frac{1}{(k+1)^2} \leq 0$. To combine these terms, we use a common denominator of $k(k+1)^2$. We get $\frac{k(k+1) - (k+1)^2 + k}{k(k+1)^2} \leq 0$. The numerator is $k^2+k-(k^2+2k+1)+k = k^2+k-k^2-2k-1+k = -1$. So we need to show that $\frac{-1}{k(k+1)^2} \leq 0$. Since $k \geq 2$, the denominator $k(k+1)^2$ is always positive. Therefore, the fraction is always negative, which is less than or equal to zero. Thus, the inequality holds for $k+1$ and by induction, for all $N \geq 2$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $(a_n)$ be a sequence such that $a_n = \\frac{1}{n^2}$.", "statement": "Premise:\n\u2022 $(a_n)_{n \\in \\mathbb{N}}$ is a sequence where for any integer $n \\geq 1$, $a_n = \\frac{1}{n^2}$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'variable (a : \u2115 \u2192 \u211d)' correctly captures the sequence $(a_n)_{n \\\\in \\mathbb{N}}$ as a function from natural numbers to real numbers", "The Lean condition '\u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d)' perfectly matches the natural language condition 'For any integer n \u2265 1, a_n = 1/n\u00b2'", "The conclusion is implicitly captured in the Lean formalization through the explicit formula condition, representing the same mathematical content"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "Let $S_N = \\sum_{n=1}^{N} a_n$ be the partial sum of the series.", "statement": "Premise:\n\u2022 $(a_n)_{n \\in \\mathbb{N}}$ is a sequence [tc_1].\n\u2022 $S_N$ is the partial sum defined for an integer $N \\geq 1$ as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n(S : \u2115 \u2192 \u211d)\n(tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language states that (a_n) is a sequence without specifying its values, but the Lean formalization adds a specific constraint tc_1 that defines a n = 1 / n^2 for n \u2265 1. This introduces a contradicting logical component by making the sequence specific rather than general.", "The Lean formalization correctly captures that N \u2265 1 and N is a natural number (which includes the constraint of being a positive integer).", "The Lean formalization correctly captures the partial sum definition. The expression 'Finset.range (N + 1) \\ {0}' is equivalent to summing from n=1 to N, which matches the mathematical notation exactly."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language states that (a_n) is a sequence without specifying its values, but the Lean formalization adds a specific constraint tc_1 that defines a n = 1 / n^2 for n \u2265 1. This introduces a contradicting logical component by making the sequence specific rather than general.', 'The Lean formalization correctly captures that N \u2265 1 and N is a natural number (which includes the constraint of being a positive integer).', \"The Lean formalization correctly captures the partial sum definition. The expression 'Finset.range (N + 1) \\\\ {0}' is equivalent to summing from n=1 to N, which matches the mathematical notation exactly.\"]"}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "for any integer $N \\geq 2$, the inequality $S_N \\leq 2 - \\frac{1}{N}$ holds.", "statement": "Premise:\n\u2022 The variable $N$ is an integer such that $N \\geq 2$ [tc_3].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (N : \u2115)\n(tc_3 : N \u2265 2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The natural language states N is an integer, while Lean declares N as a natural number (\u2115). Natural numbers are a subset of integers, so this is more restrictive than the original statement but doesn't contradict it mathematically.", "Both the natural language and Lean express the same constraint that N \u2265 2."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The natural language states N is an integer, while Lean declares N as a natural number (\u2115). Natural numbers are a subset of integers, so this is more restrictive than the original statement but doesn't contradict it mathematically.\", 'Both the natural language and Lean express the same constraint that N \u2265 2.']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "for the base case $N=2$, we have $S_2 = \\sum_{n=1}^{2} \\frac{1}{n^2} = \\frac{1}{1^2} + \\frac{1}{2^2} = 1 + \\frac{1}{4} = 1.25$.", "statement": "We assume:\n\u2022 For any integer $n \\geq 1$, $a_n = \\frac{1}{n^2}$ [tc_1].\n\u2022 For an integer $N \\geq 1$, $S_N = \\sum_{n=1}^{N} a_n$ [tc_2].\nTherefore, we conclude:\n\u2022 For $N=2$, the partial sum is $S_2 = 1.25$ [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n) :\n  S 2 = 1.25 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n) :\n  S 2 = 1.25 := by\n  have h1 : a 1 = 1 / (1^2 : \u211d) := tc_1 1 (by norm_num)\n  have h2 : a 2 = 1 / (2^2 : \u211d) := tc_1 2 (by norm_num)\n  have hS : S 2 = \u2211 n in Finset.range 3 \\ {0}, a n := tc_2 2 (by norm_num)\n  simp [Finset.range_succ, Finset.range_zero] at hS\n  rw [hS, h1, h2]\n  norm_num", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 35, "endLine": 10, "endColumn": 55, "data": "type mismatch\n  tc_1 1 ?m.1067\nhas type\n  a 1 = 1 / \u21911 ^ 2 : Prop\nbut is expected to have type\n  a 1 = 1 / 1 ^ 2 : Prop"}, {"line": 9, "column": 16, "endLine": 15, "endColumn": 10, "data": "unsolved goals\na S : \u2115 \u2192 \u211d\ntc_1 : \u2200 n \u2265 1, a n = 1 / \u2191n ^ 2\ntc_2 : \u2200 N \u2265 1, S N = \u2211 n \u2208 Finset.range (N + 1) \\ {0}, a n\nh1 : a 1 = 1 / 1 ^ 2\nh2 : a 2 = 1 / 2 ^ 2\nhS : S 2 = a 2 + (a 1 + a 0) - a 0\n\u22a2 1 / 4 + (1 + a 0) - a 0 = 5 / 4"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition tc_1 correctly captures a_n = 1/n\u00b2 for n \u2265 1 with proper type annotations for natural numbers and reals.", "The partial sum definition tc_2 correctly translates the mathematical notation \u2211_{n=1}^{N} a_n using Finset.range (N + 1) \\ {0}, which represents the set {1, 2, ..., N}.", "The conclusion S 2 = 1.25 directly matches the natural language statement and is mathematically correct (1/1\u00b2 + 1/2\u00b2 = 1 + 0.25 = 1.25).", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1_neg\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n) :\n  \u00ac S 2 = 1.25 := by\n  intro h\n  have h1 : a 1 = 1 / (1^2 : \u211d) := tc_1 1 (by simp)\n  have h2 : a 2 = 1 / (2^2 : \u211d) := tc_1 2 (by simp)\n  have hS : S 2 = a 1 + a 2 := by\n    rw [tc_2 2 (by simp)]\n    simp [Finset.range_succ, Finset.sum_singleton]\n    rw [Finset.sum_insert (Finset.not_mem_singleton.mpr (by simp))]\n    simp [Finset.sum_singleton]\n  rw [hS, h1, h2] at h\n  norm_num at h\n  linarith"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "The right side of the inequality is $2-\\frac{1}{2}=1.5$.", "statement": "We assume:\n\u2022 (Arithmetic)\nTherefore, we conclude:\n\u2022 For $N=2$, the expression $2 - \\frac{1}{N}$ evaluates to $1.5$ [l2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2 :\n  (2 : \u211d) - (1 : \u211d) / (2 : \u211d) = (1.5 : \u211d) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2 :\n  (2 : \u211d) - (1 : \u211d) / (2 : \u211d) = (1.5 : \u211d) := by\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the arithmetic calculation described in the natural language. The expression 2 - 1/N with N=2 is properly represented as (2 : \u211d) - (1 : \u211d) / (2 : \u211d), and the result 1.5 is accurately stated. The substitution of the specific value N=2 into the general expression is handled correctly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Since $1.25 \\leq 1.5$, the inequality holds for $N=2$.", "statement": "We assume:\n\u2022 For $N=2$, the partial sum is $S_2 = 1.25$ [l1].\n\u2022 For $N=2$, the expression $2 - \\frac{1}{N}$ evaluates to $1.5$ [l2].\nTherefore, we conclude:\n\u2022 The inequality $S_N \\leq 2 - \\frac{1}{N}$ holds for the base case $N=2$ [l3].", "dependencies": ["l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n)\n  (l1 : S 2 = 1.25)\n  (l2 : (2 : \u211d) - (1 : \u211d) / (2 : \u211d) = (1.5 : \u211d)) :\n  S 2 \u2264 (2 : \u211d) - (1 : \u211d) / (2 : \u211d) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n)\n  (l1 : S 2 = 1.25)\n  (l2 : (2 : \u211d) - (1 : \u211d) / (2 : \u211d) = (1.5 : \u211d)) :\n  S 2 \u2264 (2 : \u211d) - (1 : \u211d) / (2 : \u211d) := by\n  rw [l1, l2]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all components from the natural language. The additional mathematical context (sequence definition tc_1 and partial sum formula tc_2) provides necessary foundation without contradicting the natural language. All three key statements (l1: S\u2082 = 1.25, l2: 2 - 1/2 = 1.5, l3: the inequality for N=2) are accurately represented. The formalization maintains the logical structure and mathematical meaning of the original premise."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_1": {"id": "def_1", "natural_language": "assume the inequality holds for some integer $k \\geq 2$, i.e., $S_k \\leq 2 - \\frac{1}{k}$.", "statement": "Definition:\n\u2022 We assume as the Inductive Hypothesis that for some integer $k \\geq 2$, the inequality $S_k \\leq 2 - \\frac{1}{k}$ holds [def_1].", "dependencies": ["tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (k : \u2115)\n(tc_3 : k \u2265 2)\n(def_1 : (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.45, "semantic_feedback": ["Natural language states k is an integer, but Lean uses natural numbers (\u2115). Since natural numbers are a subset of integers and k \u2265 2, this is functionally equivalent for the mathematical context", "Both state k \u2265 2 exactly", "Natural language explicitly mentions this is an inductive hypothesis, but Lean doesn't have any special inductive hypothesis syntax - it's just treated as an assumption. The logical meaning is preserved", "Natural language uses abstract notation $S_k$ while Lean provides the concrete definition as a sum. The Lean version is more specific but captures the same mathematical relationship"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.45, below threshold 0.6.\nScorer feedback: ['Natural language states k is an integer, but Lean uses natural numbers (\u2115). Since natural numbers are a subset of integers and k \u2265 2, this is functionally equivalent for the mathematical context', 'Both state k \u2265 2 exactly', \"Natural language explicitly mentions this is an inductive hypothesis, but Lean doesn't have any special inductive hypothesis syntax - it's just treated as an assumption. The logical meaning is preserved\", 'Natural language uses abstract notation $S_k$ while Lean provides the concrete definition as a sum. The Lean version is more specific but captures the same mathematical relationship']"}, "type": "definition"}, "l4": {"id": "l4", "natural_language": "We know that $S_{k+1} = S_k + a_{k+1} = S_k + \\frac{1}{(k+1)^2}$.", "statement": "We assume:\n\u2022 For any integer $n \\geq 1$, $a_n = \\frac{1}{n^2}$ [tc_1].\n\u2022 For an integer $N \\geq 1$, $S_N = \\sum_{n=1}^{N} a_n$ [tc_2].\n\u2022 $k$ is an integer such that $k \\geq 2$ [def_1].\nTherefore, we conclude:\n\u2022 $S_{k+1} = S_k + \\frac{1}{(k+1)^2}$ [l4].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d) (k : \u2115)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n)\n  (def_1 : k \u2265 2) :\n  S (k + 1) = S k + 1 / ((k + 1)^2 : \u211d) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d) (k : \u2115)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n)\n  (def_1 : k \u2265 2) :\n  S (k + 1) = S k + 1 / ((k + 1)^2 : \u211d) := by\n  have hk : k \u2265 1 := by linarith\n  rw [tc_2 (k + 1) (by linarith), tc_2 k hk]\n  simp_rw [tc_1]\n  simp only [one_div]\n  rw [\u2190 Finset.sum_erase_add (Finset.range (k + 2)) _ (Finset.mem_range.2 (Nat.succ_lt_succ hk))]\n  simp [Finset.range_succ, add_assoc, pow_two]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 11, "endLine": 13, "endColumn": 15, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical content from the natural language. The use of natural numbers (\u2115) instead of integers is appropriate given the constraints (n \u2265 1, N \u2265 1, k \u2265 2). The sum notation is properly translated using Finset.range with set difference to achieve the sum from 1 to N. All mathematical relationships and the conclusion are accurately represented.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l4\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d) (k : \u2115)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n)\n  (def_1 : k \u2265 2) :\n  \u00ac (S (k + 1) = S k + 1 / ((k + 1)^2 : \u211d)) := by\n  intro h\n  have hS : S (k + 1) = \u2211 n in Finset.range (k + 2) \\ {0}, a n := tc_2 (k + 1) (by linarith [def_1])\n  have hSk : S k = \u2211 n in Finset.range (k + 1) \\ {0}, a n := tc_2 k (by linarith [def_1])\n  rw [hS, hSk] at h\n  have hsum : \u2211 n in Finset.range (k + 2) \\ {0}, a n = \u2211 n in Finset.range (k + 1) \\ {0}, a n + a (k + 1) := by\n    rw [Finset.sum_range_succ']\n    simp [Finset.mem_range, Finset.mem_sdiff, Finset.mem_singleton]\n    omega\n  rw [hsum, tc_1 (k + 1) (by linarith [def_1])] at h\n  simp at h\n  contradiction"}, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "From the inductive hypothesis, $S_k \\leq 2 - \\frac{1}{k}$. So we have $S_{k+1} \\leq 2 - \\frac{1}{k} + \\frac{1}{(k+1)^2}$.", "statement": "We assume:\n\u2022 For some integer $k \\geq 2$, $S_k \\leq 2 - \\frac{1}{k}$ [def_1].\n\u2022 $S_{k+1} = S_k + \\frac{1}{(k+1)^2}$ [l4].\nTherefore, we conclude:\n\u2022 $S_{k+1} \\leq 2 - \\frac{1}{k} + \\frac{1}{(k+1)^2}$ [l5].", "dependencies": ["def_1", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (k : \u2115)\n  (def_1 : k \u2265 2 \u2192 (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d))\n  (l4 : (\u2200 (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d), (\u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d)) \u2192 (\u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n) \u2192 k \u2265 2 \u2192 S (k + 1) = S k + 1 / ((k + 1)^2 : \u211d))) :\n  (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1)^2 : \u211d) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (k : \u2115)\n  (def_1 : k \u2265 2 \u2192 (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d))\n  (l4 : (\u2200 (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d), (\u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d)) \u2192 (\u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n) \u2192 k \u2265 2 \u2192 S (k + 1) = S k + 1 / ((k + 1)^2 : \u211d))) :\n  (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1)^2 : \u211d) := by\n  intro hk\n  have := def_1 hk\n  rw [\u2190add_le_add_iff_left (1 / ((k + 1)^2 : \u211d))]\n  exact add_le_add this le_rfl", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 2, "endLine": 10, "endColumn": 10, "data": "tactic 'introN' failed, insufficient number of binders\nk : \u2115\ndef_1 : k \u2265 2 \u2192 \u2211 n \u2208 Finset.range (k + 1), 1 / (\u2191n + 1) ^ 2 \u2264 2 - 1 / \u2191k\nl4 :\n  \u2200 (a S : \u2115 \u2192 \u211d),\n    (\u2200 n \u2265 1, a n = 1 / \u2191n ^ 2) \u2192\n      (\u2200 N \u2265 1, S N = \u2211 n \u2208 Finset.range (N + 1) \\ {0}, a n) \u2192 k \u2265 2 \u2192 S (k + 1) = S k + 1 / (\u2191k + 1) ^ 2\n\u22a2 \u2211 n \u2208 Finset.range (k + 1), 1 / (\u2191n + 1) ^ 2 \u2264 2 - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The assumption def_1 correctly captures the inequality S_k \u2264 2 - 1/k for k \u2265 2, with the concrete definition of S_k as a sum being acceptable additional detail.", "The assumption l4 is overly complex and introduces unnecessary abstraction with general sequences a and S, when the natural language simply states the recurrence relation S_{k+1} = S_k + 1/(k+1)\u00b2. This makes the formalization much more complicated than the natural language suggests.", "The conclusion correctly represents the inequality S_{k+1} \u2264 2 - 1/k + 1/(k+1)\u00b2 using consistent notation with the premises.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The assumption def_1 correctly captures the inequality S_k \u2264 2 - 1/k for k \u2265 2, with the concrete definition of S_k as a sum being acceptable additional detail.', 'The assumption l4 is overly complex and introduces unnecessary abstraction with general sequences a and S, when the natural language simply states the recurrence relation S_{k+1} = S_k + 1/(k+1)\u00b2. This makes the formalization much more complicated than the natural language suggests.', 'The conclusion correctly represents the inequality S_{k+1} \u2264 2 - 1/k + 1/(k+1)\u00b2 using consistent notation with the premises.']"}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "To prove the inequality, we need to show that $2 - \\frac{1}{k} + \\frac{1}{(k+1)^2} \\leq 2 - \\frac{1}{k+1}$.", "statement": "We assume:\n\u2022 $S_{k+1} \\leq 2 - \\frac{1}{k} + \\frac{1}{(k+1)^2}$ [l5].\nTherefore, we conclude:\n\u2022 To prove $S_{k+1} \\leq 2 - \\frac{1}{k+1}$, by transitivity of inequality, it is sufficient to prove that $2 - \\frac{1}{k} + \\frac{1}{(k+1)^2} \\leq 2 - \\frac{1}{k+1}$ [l6].", "dependencies": ["l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (k : \u2115)\n  (l5 : (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1)^2 : \u211d)) :\n  (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (k : \u2115)\n  (l5 : (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1)^2 : \u211d)) :\n  (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d) := by\n  apply le_trans l5\n  rw [sub_le_sub_iff_right (2 : \u211d)]\n  simp only [add_sub_cancel_right]\n  field_simp\n  rw [div_le_div_right (by positivity), \u2190 sub_nonneg]\n  ring_nf\n  simp only [Nat.cast_add, Nat.cast_one, add_sub_cancel_right]\n  rw [\u2190 mul_le_mul_left (by positivity : 0 < (k : \u211d) * (k + 1 : \u211d) ^ 2)]\n  field_simp\n  ring_nf\n  simp only [Nat.cast_add, Nat.cast_one]\n  nlinarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 6, "endLine": 10, "endColumn": 34, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?m.5127 - 2 \u2264 ?m.5128 - 2\nk : \u2115\nl5 : \u2211 n \u2208 Finset.range (k + 1), 1 / (\u2191n + 1) ^ 2 \u2264 2 - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2\n\u22a2 2 - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2 \u2264 2 - 1 / (\u2191k + 1)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The assumption l5 is correctly formalized. The natural language uses undefined notation S_{k+1}, but the Lean code appropriately interprets this as the standard sum notation in this mathematical context.", "The goal/conclusion is perfectly captured with the same mathematical relationship and sum notation.", "The logical structure using transitivity is correctly represented through the lemma's hypothesis-conclusion format, even though the intermediate step is left for the proof.", "All mathematical expressions and inequalities are accurately translated to Lean syntax with proper type annotations.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l6\n  (k : \u2115)\n  (hk : k \u2265 1)\n  (l5 : (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1)^2 : \u211d)) :\n  \u00ac(\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d) := by\n  intro h\n  have h1 : 2 - 1 / (k : \u211d) + 1 / ((k + 1)^2 : \u211d) \u2264 2 - 1 / (k + 1 : \u211d) := by\n    exact le_trans l5 h\n  simp only [sub_le_iff_le_add, add_sub_cancel] at h1\n  have h2 : 1 / (k + 1 : \u211d) \u2264 1 / (k : \u211d) - 1 / ((k + 1)^2 : \u211d) := h1\n  have h3 : (k : \u211d) + 1 \u2260 0 := by norm_cast; exact succ_ne_zero k\n  have h4 : (k : \u211d) \u2260 0 := by norm_cast; exact Nat.pos_iff_ne_zero.mp hk\n  have h5 : ((k + 1)^2 : \u211d) \u2260 0 := by norm_cast; exact pow_ne_zero _ (succ_ne_zero k)\n  field_simp at h2\n  have h6 : (k : \u211d) * (k + 1 : \u211d)^2 \u2264 (k + 1 : \u211d)^2 * (k + 1 : \u211d) - k * (k + 1 : \u211d) := by\n    rw [mul_comm _ (k + 1 : \u211d)^2]\n    exact h2\n  ring_nf at h6\n  have h7 : (k : \u211d) \u2264 (k : \u211d) + 1 := by linarith\n  linarith"}, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "This simplifies to showing that $-\\frac{1}{k} + \\frac{1}{(k+1)^2} \\leq -\\frac{1}{k+1}$. We can rearrange this to show $\\frac{1}{k+1} - \\frac{1}{k} + \\frac{1}{(k+1)^2} \\leq 0$.", "statement": "We assume:\n\u2022 $k$ is an integer such that $k \\geq 2$ [def_1].\nTherefore, we conclude:\n\u2022 The inequality $2 - \\frac{1}{k} + \\frac{1}{(k+1)^2} \\leq 2 - \\frac{1}{k+1}$ is algebraically equivalent to $\\frac{1}{k+1} - \\frac{1}{k} + \\frac{1}{(k+1)^2} \\leq 0$ [l7].", "dependencies": ["def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (k : \u2115)\n  (def_1 : k \u2265 2) :\n  (2 - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 2 - 1 / ((k : \u211d) + 1)) \u2194\n  (1 / ((k : \u211d) + 1) - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (k : \u2115)\n  (def_1 : k \u2265 2) :\n  (2 - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 2 - 1 / ((k : \u211d) + 1)) \u2194\n  (1 / ((k : \u211d) + 1) - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 0) := by\n  constructor\n  \u00b7 intro h\n    simp only [sub_le_sub_iff_right] at h\n    exact h\n  \u00b7 intro h\n    simp only [sub_le_sub_iff_right]\n    exact h", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 4, "endLine": 13, "endColumn": 11, "data": "type mismatch\n  h\nhas type\n  2 - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2 \u2264 2 - 1 / (\u2191k + 1) : Prop\nbut is expected to have type\n  1 / (\u2191k + 1) - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2 \u2264 0 : Prop"}, {"line": 15, "column": 4, "endLine": 15, "endColumn": 36, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical content of the natural language statement. The use of natural numbers instead of integers is appropriate since k \u2265 2, making this a valid restriction. The biconditional (\u2194) properly represents the claimed algebraic equivalence, and the mathematical expressions are accurately translated. The type conversions to real numbers are handled correctly. The algebraic equivalence between the two inequalities is mathematically sound and properly represented.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l7\n  (k : \u2115)\n  (def_1 : k \u2265 2) :\n  \u00ac((2 - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 2 - 1 / ((k : \u211d) + 1)) \u2194\n  (1 / ((k : \u211d) + 1) - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 0)) := by\n  simp only [not_iff]\n  refine \u27e8fun h => ?_, fun h => ?_\u27e9\n  \u00b7 have h1 : (2 - 1 / (k : \u211d) + 1 / (k + 1 : \u211d)^2) - (2 - 1 / (k + 1 : \u211d)) = 1 / (k + 1 : \u211d) - 1 / (k : \u211d) + 1 / (k + 1 : \u211d)^2 := by ring\n    rw [\u2190h1]\n    exact not_le.1 h\n  \u00b7 have h2 : 1 / (k + 1 : \u211d) - 1 / (k : \u211d) + 1 / (k + 1 : \u211d)^2 = (2 - 1 / (k : \u211d) + 1 / (k + 1 : \u211d)^2) - (2 - 1 / (k + 1 : \u211d)) := by ring\n    rw [h2] at h\n    exact not_le.2 h"}, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "To combine these terms, we use a common denominator of $k(k+1)^2$. We get $\\frac{k(k+1) - (k+1)^2 + k}{k(k+1)^2} \\leq 0$. The numerator is $k^2+k-(k^2+2k+1)+k = k^2+k-k^2-2k-1+k = -1$.", "statement": "We assume:\n\u2022 $k$ is an integer such that $k \\geq 2$ [def_1].\nTherefore, we conclude:\n\u2022 The expression $\\frac{1}{k+1} - \\frac{1}{k} + \\frac{1}{(k+1)^2}$ is equal to $\\frac{-1}{k(k+1)^2}$ [l8].", "dependencies": ["def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (k : \u2115)\n  (def_1 : k \u2265 2) :\n  (1 / (k + 1 : \u211d) - 1 / (k : \u211d) + 1 / (k + 1 : \u211d)^2) = -1 / (k * (k + 1 : \u211d)^2) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (k : \u2115)\n  (def_1 : k \u2265 2) :\n  (1 / (k + 1 : \u211d) - 1 / (k : \u211d) + 1 / (k + 1 : \u211d)^2) = -1 / (k * (k + 1 : \u211d)^2) := by\n  field_simp\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable type is mathematically equivalent - natural numbers \u2265 2 are the same as integers \u2265 2 for this context. The constraint k \u2265 2 is correctly preserved.", "The mathematical expression and equality are perfectly captured with appropriate type coercions to real numbers. The algebraic structure and relationship are identical to the natural language version."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l9": {"id": "l9", "natural_language": "Since $k \\geq 2$, the denominator $k(k+1)^2$ is always positive.", "statement": "We assume:\n\u2022 $k$ is an integer such that $k \\geq 2$ [def_1].\nTherefore, we conclude:\n\u2022 The denominator $k(k+1)^2$ is positive [l9].", "dependencies": ["def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l9\n  (k : \u2115)\n  (def_1 : k \u2265 2) :\n  (k : \u211d) * ((k : \u211d) + 1)^2 > 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l9\n  (k : \u2115)\n  (def_1 : k \u2265 2) :\n  (k : \u211d) * ((k : \u211d) + 1)^2 > 0 := by\n  have hk : (k : \u211d) > 0 := by exact_mod_cast lt_of_lt_of_le zero_lt_two def_1\n  have hk1 : (k : \u211d) + 1 > 0 := by linarith\n  exact mul_pos hk (pow_pos hk1 2)", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical meaning of the natural language. While there's a technical difference between integers (\u2124) and natural numbers (\u2115), the constraint k \u2265 2 makes this distinction irrelevant since we're only dealing with positive integers \u2265 2. The casting to reals in the conclusion is a standard technical detail in Lean for arithmetic operations and doesn't change the mathematical meaning. The expression k(k+1)\u00b2 and the positivity claim are faithfully represented."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l10": {"id": "l10", "natural_language": "So we need to show that $\\frac{-1}{k(k+1)^2} \\leq 0$. Therefore, the fraction is always negative, which is less than or equal to zero.", "statement": "We assume:\n\u2022 The denominator $k(k+1)^2$ is positive [l9].\nTherefore, we conclude:\n\u2022 The fraction $\\frac{-1}{k(k+1)^2}$ is less than or equal to 0 [l10].", "dependencies": ["l9"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l10\n  (k : \u2115)\n  (l9 : (k : \u211d) * ((k : \u211d) + 1)^2 > 0) :\n  (-1 : \u211d) / ((k : \u211d) * ((k : \u211d) + 1)^2) \u2264 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l10\n  (k : \u2115)\n  (l9 : (k : \u211d) * ((k : \u211d) + 1)^2 > 0) :\n  (-1 : \u211d) / ((k : \u211d) * ((k : \u211d) + 1)^2) \u2264 0 := by\n  rw [div_le_iff l9]\n  simp", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The assumption about the positive denominator k(k+1)\u00b2 is properly represented as hypothesis l9, and the conclusion about the fraction being \u2264 0 is accurately formalized. The type coercions from natural numbers to reals are mathematically appropriate for division operations. The logical structure from assumption to conclusion is preserved exactly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l11": {"id": "l11", "natural_language": "Thus, the inequality holds for $k+1$", "statement": "We assume:\n\u2022 To prove $S_{k+1} \\leq 2 - \\frac{1}{k+1}$, it is sufficient to prove $2 - \\frac{1}{k} + \\frac{1}{(k+1)^2} \\leq 2 - \\frac{1}{k+1}$ [l6].\n\u2022 $2 - \\frac{1}{k} + \\frac{1}{(k+1)^2} \\leq 2 - \\frac{1}{k+1}$ is equivalent to $\\frac{1}{k+1} - \\frac{1}{k} + \\frac{1}{(k+1)^2} \\leq 0$ [l7].\n\u2022 $\\frac{1}{k+1} - \\frac{1}{k} + \\frac{1}{(k+1)^2} = \\frac{-1}{k(k+1)^2}$ [l8].\n\u2022 $\\frac{-1}{k(k+1)^2} \\leq 0$ [l10].\nTherefore, we conclude:\n\u2022 The inequality $S_{k+1} \\leq 2 - \\frac{1}{k+1}$ holds [l11].", "dependencies": ["l6", "l7", "l8", "l10"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l11\n  (k : \u2115)\n  (l6 : (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1)^2 : \u211d) \u2192 (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d))\n  (l7 : (2 - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 2 - 1 / ((k : \u211d) + 1)) \u2194 (1 / ((k : \u211d) + 1) - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 0))\n  (l8 : (1 / (k + 1 : \u211d) - 1 / (k : \u211d) + 1 / (k + 1 : \u211d)^2) = -1 / (k * (k + 1 : \u211d)^2))\n  (l10 : (-1 : \u211d) / ((k : \u211d) * ((k : \u211d) + 1)^2) \u2264 0) :\n  (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l11\n  (k : \u2115)\n  (l6 : (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1)^2 : \u211d) \u2192 (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d))\n  (l7 : (2 - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 2 - 1 / ((k : \u211d) + 1)) \u2194 (1 / ((k : \u211d) + 1) - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 0))\n  (l8 : (1 / (k + 1 : \u211d) - 1 / (k : \u211d) + 1 / (k + 1 : \u211d)^2) = -1 / (k * (k + 1 : \u211d)^2))\n  (l10 : (-1 : \u211d) / ((k : \u211d) * ((k : \u211d) + 1)^2) \u2264 0) :\n  (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d) := by\n  apply l6\n  rw [l7]\n  rw [l8]\n  exact l10", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 6, "endLine": 13, "endColumn": 8, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  2 - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2 \u2264 2 - 1 / (\u2191k + 1)\nk : \u2115\nl6 :\n  \u2211 n \u2208 Finset.range (k + 1), 1 / (\u2191n + 1) ^ 2 \u2264 2 - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2 \u2192\n    \u2211 n \u2208 Finset.range (k + 1), 1 / (\u2191n + 1) ^ 2 \u2264 2 - 1 / (\u2191k + 1)\nl7 : 2 - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2 \u2264 2 - 1 / (\u2191k + 1) \u2194 1 / (\u2191k + 1) - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2 \u2264 0\nl8 : 1 / (\u2191k + 1) - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2 = -1 / (\u2191k * (\u2191k + 1) ^ 2)\nl10 : -1 / (\u2191k * (\u2191k + 1) ^ 2) \u2264 0\n\u22a2 \u2211 n \u2208 Finset.range (k + 1), 1 / (\u2191n + 1) ^ 2 \u2264 2 - 1 / \u2191k + 1 / (\u2191k + 1) ^ 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sum representation correctly translates S_{k+1} as the finite sum of 1/n\u00b2 terms using Lean's Finset.range notation", "The sufficiency condition l6 is properly formalized as an implication, correctly capturing the logical relationship", "The equivalence l7 is correctly represented using the biconditional operator, preserving the algebraic equivalence", "The algebraic equality l8 is accurately formalized with proper type annotations for real numbers", "The inequality l10 correctly represents the non-positivity of the expression", "The final conclusion l11 perfectly matches the natural language statement of the main inequality", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l11\n  (k : \u2115)\n  (l6 : (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1)^2 : \u211d) \u2192 (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d))\n  (l7 : (2 - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 2 - 1 / ((k : \u211d) + 1)) \u2194 (1 / ((k : \u211d) + 1) - 1 / (k : \u211d) + 1 / ((k : \u211d) + 1)^2 \u2264 0))\n  (l8 : (1 / (k + 1 : \u211d) - 1 / (k : \u211d) + 1 / (k + 1 : \u211d)^2) = -1 / (k * (k + 1 : \u211d)^2))\n  (l10 : (-1 : \u211d) / ((k : \u211d) * ((k : \u211d) + 1)^2) \u2264 0) :\n  \u00ac (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d) := by\n  intro h\n  have h5 : 1 / (k + 1 : \u211d) - 1 / (k : \u211d) + 1 / (k + 1 : \u211d)^2 \u2264 0 := by\n    rw [l8]\n    exact l10\n  have h6 : 2 - 1 / (k : \u211d) + 1 / ((k + 1)^2 : \u211d) \u2264 2 - 1 / (k + 1 : \u211d) := by\n    rw [\u2190sub_le_sub_iff_right (2 : \u211d)]\n    simp only [sub_self, zero_sub]\n    rw [neg_add_rev, neg_le_neg_iff, add_comm]\n    exact h5\n  have h7 := l6 (by assumption)\n  contradiction"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Thus, the inequality holds for $k+1$ and by induction, for all $N \\geq 2$.", "statement": "We assume:\n\u2022 The inequality $S_N \\leq 2 - \\frac{1}{N}$ holds for the base case $N=2$ [l3].\n\u2022 If the inequality $S_k \\leq 2 - \\frac{1}{k}$ holds for an integer $k \\geq 2$, then it also holds for $k+1$, i.e., $S_{k+1} \\leq 2 - \\frac{1}{k+1}$ [l11].\nTherefore, we conclude:\n\u2022 By the principle of induction, the inequality $S_N \\leq 2 - \\frac{1}{N}$ holds for all integers $N \\geq 2$ [ts_1].", "dependencies": ["l3", "l11"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n)\n  (l3 : S 2 \u2264 (2 : \u211d) - (1 : \u211d) / (2 : \u211d))\n  (l11 : \u2200 (k : \u2115), k \u2265 2 \u2192 ( (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d) )) :\n  \u2200 (N : \u2115), N \u2265 2 \u2192 S N \u2264 2 - 1 / (N : \u211d) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n^2 : \u211d))\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range (N + 1) \\ {0}, a n)\n  (l3 : S 2 \u2264 (2 : \u211d) - (1 : \u211d) / (2 : \u211d))\n  (l11 : \u2200 (k : \u2115), k \u2265 2 \u2192 ( (\u2211 n in Finset.range (k + 1), 1 / (n + 1 : \u211d)^2) \u2264 2 - 1 / (k + 1 : \u211d) )) :\n  \u2200 (N : \u2115), N \u2265 2 \u2192 S N \u2264 2 - 1 / (N : \u211d) := by\n  intro N hN\n  induction' N using Nat.strong_induction_on with k ih\n  cases' k with k\n  \u00b7 linarith [hN]\n  cases' k with k\n  \u00b7 simp at hN\n  \u00b7 have hk : k + 1 \u2265 2 := by linarith\n    specialize ih (k + 1) (by linarith) hk\n    rw [tc_2 (k + 2) (by linarith)]\n    simp [Finset.range_succ, Finset.sum_insert]\n    have h\u2081 : a (k + 2) = 1 / (k + 2 : \u211d)^2 := tc_1 (k + 2) (by linarith)\n    rw [h\u2081]\n    have h\u2082 : \u2211 n in Finset.range (k + 2) \\ {0}, a n = S (k + 1) := by rw [tc_2 (k + 1) (by linarith)]\n    rw [h\u2082, ih]\n    exact l11 (k + 1) hk", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 30, "endLine": 18, "endColumn": 38, "data": "linarith failed to find a contradiction\ncase a\na S : \u2115 \u2192 \u211d\ntc_1 : \u2200 n \u2265 1, a n = 1 / \u2191n ^ 2\ntc_2 : \u2200 N \u2265 1, S N = \u2211 n \u2208 Finset.range (N + 1) \\ {0}, a n\nl3 : S 2 \u2264 2 - 1 / 2\nl11 : \u2200 k \u2265 2, \u2211 n \u2208 Finset.range (k + 1), 1 / (\u2191n + 1) ^ 2 \u2264 2 - 1 / (\u2191k + 1)\nk : \u2115\nih : \u2200 m < k + 1 + 1, m \u2265 2 \u2192 S m \u2264 2 - 1 / \u2191m\nhN : k + 1 + 1 \u2265 2\na\u271d : 2 > k + 1\n\u22a2 False failed"}, {"line": 22, "column": 47, "endLine": 22, "endColumn": 73, "data": "type mismatch\n  tc_1 (k + 2) ?m.33129\nhas type\n  a (k + 2) = 1 / \u2191(k + 2) ^ 2 : Prop\nbut is expected to have type\n  a (k + 2) = 1 / (\u2191k + 2) ^ 2 : Prop"}, {"line": 23, "column": 8, "endLine": 23, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  a (k + 2)\ncase h.succ.succ\na S : \u2115 \u2192 \u211d\ntc_1 : \u2200 n \u2265 1, a n = 1 / \u2191n ^ 2\ntc_2 : \u2200 N \u2265 1, S N = \u2211 n \u2208 Finset.range (N + 1) \\ {0}, a n\nl3 : S 2 \u2264 2 - 1 / 2\nl11 : \u2200 k \u2265 2, \u2211 n \u2208 Finset.range (k + 1), 1 / (\u2191n + 1) ^ 2 \u2264 2 - 1 / (\u2191k + 1)\nk : \u2115\nhN : k + 1 + 1 \u2265 2\nhk : k + 1 \u2265 2\nih : S (k + 1) \u2264 2 - 1 / \u2191(k + 1)\nh\u2081 : a (k + 2) = 1 / (\u2191k + 2) ^ 2\n\u22a2 \u2211 x \u2208 insert (k + 2) (insert (k + 1) (insert k (Finset.range k))) \\ {0}, a x \u2264 2 - (\u2191k + 1 + 1)\u207b\u00b9"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The base case is correctly formalized as S 2 \u2264 2 - 1/2, which perfectly matches the natural language statement.", "The inductive step in l11 has a major inconsistency. The natural language describes a conditional statement 'if S_k \u2264 2-1/k then S_{k+1} \u2264 2-1/(k+1)', but the Lean formalization directly states the conclusion without the inductive hypothesis. Additionally, l11 uses a different sum formulation that doesn't align with the definition of S in tc_2.", "The conclusion correctly states that for all N \u2265 2, S N \u2264 2 - 1/N, which matches the natural language conclusion about the inequality holding for all integers N \u2265 2.", "The definitions tc_1 and tc_2 provide the necessary context for what S represents, which is consistent with the mathematical context implied in the natural language.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The base case is correctly formalized as S 2 \u2264 2 - 1/2, which perfectly matches the natural language statement.', \"The inductive step in l11 has a major inconsistency. The natural language describes a conditional statement 'if S_k \u2264 2-1/k then S_{k+1} \u2264 2-1/(k+1)', but the Lean formalization directly states the conclusion without the inductive hypothesis. Additionally, l11 uses a different sum formulation that doesn't align with the definition of S in tc_2.\", 'The conclusion correctly states that for all N \u2265 2, S N \u2264 2 - 1/N, which matches the natural language conclusion about the inequality holding for all integers N \u2265 2.', 'The definitions tc_1 and tc_2 provide the necessary context for what S represents, which is consistent with the mathematical context implied in the natural language.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l9", "label": "l9", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l10", "label": "l10", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l11", "label": "l11", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l11", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l11", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "l11", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l9", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l10", "to": "l11", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l11", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    