
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $f$ is bounded and continuous on a
bounded Jordan measurable set $S,$ then $f$ is integrable on $S.$

Proof: Since $V(K)=0$,
$$
\int_C\psi_K(\mathbf{X})\,d\mathbf{X}=0
$$
if $C$ is any cube containing $K$. From this and the
definition of the integral, there is a $\delta>0$ such that if ${\bf
P}$ is any partition of $C$ with $\|{\bf P}\|\le\delta$ and $\sigma$
is any Riemann sum of $\psi_K$ over ${\bf P}$, then
\begin{equation}\label{eq:7.3.6}
0\le\sigma\le\epsilon.
\end{equation}

ewpage

oindent
Now suppose that  ${\bf P}=\{C_1,C_2,\dots,C_k\}$ is a partition of $C$
into cubes with
\begin{equation}\label{eq:7.3.7}
\|{\bf P}\|<\min (\rho,\delta),
\end{equation}
and let $C_1$, $C_2$, \dots, $C_k$ be numbered so that $C_j\cap K
e
\emptyset$ if $1\le j\le r$  and
$C_j\cap K=\emptyset$ if $r+1\le j\le k$. Then \eqref{eq:7.3.5} holds, and
a typical Riemann sum of $\psi_K$ over ${\bf P}$ is of the form
$$
\sigma=\sum_{j=1}^r\psi_K(\mathbf{X}_j)V(C_j)
$$
with $\mathbf{X}_j\in C_j$, $1\le j\le r$. In particular, we
can choose
$\mathbf{X}_j$ from $K$, so that $\psi_K(\mathbf{X}_j)=1$,  and
$$
\sigma=\sum_{j=1}^r V(C_j).
$$
Now \eqref{eq:7.3.6} and \eqref{eq:7.3.7} imply that $C_1$, $C_2$, \dots,
$C_r$ have the required properties.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Since V(K)=0", "statement": "Premise:\n\u2022 K is a set with Jordan content V(K)=0 [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (K : Set (\u211d^n))\n  (tc_1 : MeasureTheory.volume K = 0)", "lean_pass": false, "error_msg": [{"line": 7, "column": 10, "endLine": 7, "endColumn": 32, "data": "failed to synthesize\n  MeasureTheory.MeasureSpace (\u211d ^ n)\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "0\\le\\sigma\\le\\epsilon.", "statement": "Premise:\n\u2022 Let an arbitrary \u03f5 > 0 be given [tc_2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (\u03b5 : \u211d)\n  (tc_2 : \u03b5 > 0)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the arbitrary positive real number \u03f5 with the condition tc_2 : \u03b5 > 0, matching exactly with the natural language statement", "The Lean code appropriately contains only variable declarations with no conclusions to prove, perfectly matching the natural language statement that no conclusions are derived in this premise step"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "\u222b_C\u03c8_K(X) dX=0", "statement": "Definition:\n\u2022 \u03c8_K(X) is the characteristic function of the set K, defined as \u03c8_K(X) = 1 if X \u2208 K and \u03c8_K(X) = 0 if X \u2209 K [def_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {\u03b1 : Type*} (K : Set \u03b1) (X : \u03b1) [hK : Decidable (X \u2208 K)]\n(def_1 : \u03c8_K X = (if X \u2208 K then 1 else 0 : \u211d))", "lean_pass": false, "error_msg": [{"line": 6, "column": 9, "endLine": 6, "endColumn": 14, "data": "function expected at\n  \u03c8_K\nterm has type\n  ?m.34"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Since V(K)=0, \u222b_C\u03c8_K(\\mathbf{X})\\,d\\mathbf{X}=0 if C is any cube containing K.", "statement": "We assume:\n\u2022 K is a set with Jordan content V(K)=0 [tc_1].\n\u2022 \u03c8_K(X) is the characteristic function of K [def_1].\n\u2022 C is any cube containing K.\nTherefore, we conclude:\n\u2022 The Riemann integral of the characteristic function of K over C is zero: \u222b_C \u03c8_K(X) dX = 0 [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {E : Type*} [NormedAddCommGroup E] [InnerProductSpace \u211d E] [FiniteDimensional \u211d E]\n  (K : Set E) (C : Set E)\n  (tc_1 : JordanContent 0 K)\n  (def_1 : \u2200 X : E, Set.indicator K (fun _ => (1 : \u211d)) X = if X \u2208 K then 1 else 0)\n  (hC : K \u2286 C) (hC_cube : IsCuboid C) :\n  \u222b x in C, Set.indicator K (fun _ => (1 : \u211d)) x = 0 := by\nsorry", "lean_pass": false, "error_msg": [{"line": 9, "column": 59, "endLine": 9, "endColumn": 81, "data": "failed to synthesize\n  Decidable (X \u2208 K)\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 11, "column": 2, "endLine": 11, "endColumn": 48, "data": "failed to synthesize\n  MeasureTheory.MeasureSpace E\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 8, "column": 10, "endLine": 8, "endColumn": 27, "data": "function expected at\n  JordanContent\nterm has type\n  ?m.662"}, {"line": 10, "column": 26, "endLine": 10, "endColumn": 36, "data": "function expected at\n  IsCuboid\nterm has type\n  ?m.1077"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib.MeasureTheory.Integral.IntervalIntegral\nimport Mathlib.MeasureTheory.Measure.Lebesgue.Basic\nimport Mathlib.MeasureTheory.Measure.Jordan\n\nopen MeasureTheory Set\n\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {E : Type*} [NormedAddCommGroup E] [InnerProductSpace \u211d E] [FiniteDimensional \u211d E]\n  (K : Set E) (C : Set E)\n  (tc_1 : MeasureTheory.Measure.jordanContent K = 0)\n  (def_1 : \u2200 X : E, indicator K (fun _ => (1 : \u211d)) X = if X \u2208 K then 1 else 0)\n  (hC : K \u2286 C) (hC_cube : MeasureTheory.Measure.IsJordanMeasurable C) :\n  \u222b x in C, indicator K (fun _ => (1 : \u211d)) x \u2202MeasureTheory.Measure.jordan = 0 := by\n  rw [integral_indicator (MeasureTheory.Measure.jordanMeasurable_subset hC_cube hC)]\n  simp [tc_1]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 3, "column": 0, "endLine": 3, "endColumn": 6, "data": "invalid 'import' command, it must be used in the beginning of the file"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "From this and the definition of the integral, there is a \u03b4>0 such that if P is any partition of C with ||P||\u2264\u03b4 and \u03c3 is any Riemann sum of \u03c8_K over P, then 0\u2264\u03c3\u2264\u03f5.", "statement": "We assume:\n\u2022 Let an arbitrary \u03f5 > 0 be given [tc_2].\n\u2022 The integral of the characteristic function of K over a cube C is zero: \u222b_C \u03c8_K(X) dX = 0 [l1].\nTherefore, we conclude:\n\u2022 There exists a \u03b4 > 0 such that if P is any partition of C with norm ||P|| \u2264 \u03b4, and \u03c3 is any Riemann sum of \u03c8_K over P, then 0 \u2264 \u03c3 \u2264 \u03f5. This is referenced as equation (7.3.6) [l2].", "dependencies": ["tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {E : Type*} [MeasurableSpace E] [NormedAddCommGroup E] [InnerProductSpace \u211d E] [FiniteDimensional \u211d E] [CompleteSpace E]\n  (\u03b5 : \u211d) (tc_2 : \u03b5 > 0)\n  (K : Set E) (\u03c8_K : E \u2192 \u211d) (C : Set E)\n  (l1 : \u222b x in C, \u03c8_K x \u2202(volume.restrict K) = 0) :\n  \u2203 (\u03b4 : \u211d), \u03b4 > 0 \u2227 (\u2200 (P : MeasureTheory.BoxPartition C), P.toCore.norm \u2264 \u03b4 \u2192 \u2200 (\u03c3 : MeasureTheory.BoxPartition.RiemannSum \u03c8_K P id), 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 9, "column": 26, "endLine": 9, "endColumn": 41, "data": "unknown identifier 'volume.restrict'"}, {"line": 10, "column": 29, "endLine": 10, "endColumn": 55, "data": "unknown identifier 'MeasureTheory.BoxPartition'"}, {"line": 10, "column": 87, "endLine": 10, "endColumn": 124, "data": "unknown identifier 'MeasureTheory.BoxPartition.RiemannSum'"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib.MeasureTheory.Integral.SetIntegral\nimport Mathlib.MeasureTheory.Measure.Lebesgue.Basic\n\nopen MeasureTheory Set Filter\n\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {E : Type*} [NormedAddCommGroup E] [NormedSpace \u211d E] [MeasurableSpace E] [BorelSpace E]\n  (\u03b5 : \u211d) (h\u03b5 : \u03b5 > 0)\n  (K : Set E) (\u03c8_K : E \u2192 \u211d) (C : Set E)\n  (h\u03c8K : Measurable \u03c8_K) (hK : MeasurableSet K) (hC : MeasurableSet C)\n  (l1 : \u222b x in C, \u03c8_K x \u2202(volume.restrict K) = 0) :\n  \u2203 (\u03b4 : \u211d), \u03b4 > 0 \u2227 \u2200 (P : TaggedPrepartition C) (hP : IsPartition P) (h\u03b4 : diameter P \u2264 \u03b4),\n    \u2200 (\u03c3 : \u211d), \u03c3 = \u2211 J in P, volume (J \u2229 K) * \u03c8_K (TaggedPrepartition.tag P J) \u2192 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5 := by\n  refine \u27e8\u03b5, h\u03b5, ?_\u27e9\n  intro P hP h\u03b4 \u03c3 h\u03c3\n  rw [h\u03c3]\n  constructor\n  \u00b7 apply Finset.sum_nonneg\n    intro J hJ\n    apply mul_nonneg (volume_nonneg _) (h\u03c8K _)\n  \u00b7 rw [\u2190 l1]\n    exact integral_nonneg (fun x => h\u03c8K x)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 3, "column": 0, "endLine": 3, "endColumn": 6, "data": "invalid 'import' command, it must be used in the beginning of the file"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "def_2": {"id": "def_2", "natural_language": "Now suppose that P={C_1,C_2,\u2026,C_k} is a partition of C into cubes with ||P||<min(\u03c1,\u03b4), and let C_1, C_2, \\dots, C_k be numbered so that C_j\u2229 K\u2260 \u2205 if 1\u2264 j\u2264 r and C_j\u2229 K=\u2205 if r+1\u2264 j\u2264 k.", "statement": "Definition:\n\u2022 Let P={C_1, C_2, \u2026, C_k} be a partition of C into cubes with a partition norm satisfying ||P|| < min(\u03c1, \u03b4) (equation (7.3.7)), where \u03b4 is the value from [l2] and \u03c1 is an unspecified positive number. The subcubes C_j are numbered such that the first r subcubes intersect K (C_j \u2229 K \u2260 \u2205 for 1 \u2264 j \u2264 r) and the remaining ones do not (C_j \u2229 K = \u2205 for r+1 \u2264 j \u2264 k) [def_2].", "dependencies": ["l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {n : \u2115} {E : Type*} [NormedAddCommGroup E] [InnerProductSpace \u211d E] [FiniteDimensional \u211d E] [MeasurableSpace E] [BorelSpace E]\n  (C K : Set E) [IsCube C] [IsJordanMeasurable K]\n  (P : List (Set E)) (hp_partition : IsPartition P C) (k : \u2115) (hk : k = P.length)\n  (hp_norm : PartitionNorm P < Real.min \u03c1 \u03b4)\n  (\u03c1 \u03b4 : \u211d) (h\u03c1_pos : \u03c1 > 0)\n  (l2 : \u2203 \u03b4 > 0, \u2200 P' : List (Set E), \u2200 C' : Set E, IsPartition P' C' \u2192 PartitionNorm P' \u2264 \u03b4 \u2192 \u2200 \u03c3 : \u211d, IsRiemannSum (fun x => (if x \u2208 K then 1 else 0)) P' \u03c3 \u2192 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03f5)\n  (r : \u2115) (hr_le_k : r \u2264 k)\n  (hCj_intersect_K : \u2200 j : Fin k, (j.val < r) \u2192 (P.nth j.val \u2229 K).Nonempty)\n  (hCj_disjoint_K : \u2200 j : Fin k, (j.val \u2265 r) \u2192 (P.nth j.val \u2229 K) = \u2205)", "lean_pass": false, "error_msg": [{"line": 7, "column": 17, "endLine": 7, "endColumn": 25, "data": "invalid binder annotation, type is not a class instance\n  ?m.1386\nuse the command `set_option checkBinderAnnotations false` to disable the check"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "l3": {"id": "l3", "natural_language": "Then \\eqref{eq:7.3.5} holds, and a typical Riemann sum of \u03c8_K over P is of the form \u03c3=\u2211_{j=1}^r\u03c8_K(\\mathbf{X}_j)V(C_j)", "statement": "We assume:\n\u2022 \u03c8_K(X) is the characteristic function of K [def_1].\n\u2022 P={C_1, ..., C_k} is a partition where the first r subcubes C_j intersect K and the rest do not [def_2].\nTherefore, we conclude:\n\u2022 An unspecified property referenced as (7.3.5) holds.\n\u2022 Any Riemann sum \u03c3 = \u2211_{j=1}^k \u03c8_K(X_j)V(C_j) over partition P (with X_j \u2208 C_j) simplifies to the form \u03c3 = \u2211_{j=1}^r \u03c8_K(X_j)V(C_j) [l3].", "dependencies": ["def_1", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {E : Type*} [NormedAddCommGroup E] [InnerProductSpace \u211d E]\n  (K : Set E)\n  (X : E)\n  (P : Set (Set E)) (C_j : Fin k \u2192 Set E) (V : Set E \u2192 \u211d) (X_j : Fin k \u2192 E)\n  (k r : \u2115) (hk : k > 0) (hr : r \u2264 k)\n  (def_1 : \u2200 (X : E), \u03c8_K X = if X \u2208 K then 1 else 0)\n  (def_2 : P = {c | \u2203 j : Fin k, c = C_j} \u2227 (\u2200 j : Fin r, (C_j j) \u2229 K \u2260 \u2205) \u2227 (\u2200 j : Fin k, j.val \u2265 r \u2192 (C_j j) \u2229 K = \u2205)) :\n  (\u2200 (X_j_val : Fin k \u2192 E) (hXj : \u2200 j, X_j_val j \u2208 (C_j j)), \u2211 j : Fin k, (\u03c8_K (X_j_val j)) * (V (C_j j)) = \u2211 j : Fin r, (\u03c8_K (X_j_val j)) * (V (C_j j))) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 11, "column": 30, "endLine": 11, "endColumn": 52, "data": "failed to synthesize\n  Decidable (X \u2208 K)\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 12, "column": 15, "endLine": 12, "endColumn": 41, "data": "type mismatch\n  {c | \u2203 j, c = C_j}\nhas type\n  Set (Fin k\u271d \u2192 Set E) : Type u_1\nbut is expected to have type\n  Set (Set E) : Type u_1"}, {"line": 12, "column": 63, "endLine": 12, "endColumn": 64, "data": "application type mismatch\n  C_j j\nargument\n  j\nhas type\n  Fin r : Type\nbut is expected to have type\n  Fin k\u271d : Type"}, {"line": 12, "column": 108, "endLine": 12, "endColumn": 109, "data": "application type mismatch\n  C_j j\nargument\n  j\nhas type\n  Fin k : Type\nbut is expected to have type\n  Fin k\u271d : Type"}, {"line": 13, "column": 47, "endLine": 13, "endColumn": 48, "data": "application type mismatch\n  X_j_val j\nargument\n  j\nhas type\n  Fin k\u271d : Type\nbut is expected to have type\n  Fin k : Type"}, {"line": 13, "column": 102, "endLine": 13, "endColumn": 103, "data": "application type mismatch\n  C_j j\nargument\n  j\nhas type\n  Fin k : Type\nbut is expected to have type\n  Fin k\u271d : Type"}, {"line": 13, "column": 149, "endLine": 13, "endColumn": 150, "data": "application type mismatch\n  C_j j\nargument\n  j\nhas type\n  Fin r : Type\nbut is expected to have type\n  Fin k\u271d : Type"}, {"line": 11, "column": 22, "endLine": 11, "endColumn": 27, "data": "function expected at\n  \u03c8_K\nterm has type\n  ?m.341"}, {"line": 13, "column": 75, "endLine": 13, "endColumn": 90, "data": "function expected at\n  \u03c8_K\nterm has type\n  ?m.341"}, {"line": 13, "column": 122, "endLine": 13, "endColumn": 137, "data": "function expected at\n  \u03c8_K\nterm has type\n  ?m.341"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {E : Type*} [NormedAddCommGroup E] [InnerProductSpace \u211d E]\n  (\u03c8_K : E \u2192 \u211d)\n  (K : Set E)\n  (P : Set (Set E)) (C_j : Fin k \u2192 Set E) (V : Set E \u2192 \u211d) (X_j : Fin k \u2192 E)\n  (k r : \u2115) (hk : k > 0) (hr : r \u2264 k)\n  (def_1 : \u2200 (X : E), \u03c8_K X = if X \u2208 K then 1 else 0)\n  (def_2 : P = {c | \u2203 j : Fin k, c = C_j j} \u2227 (\u2200 j : Fin r, (C_j j) \u2229 K \u2260 \u2205) \u2227 (\u2200 j : Fin k, j.val \u2265 r \u2192 (C_j j) \u2229 K = \u2205)) :\n  (\u2200 (X_j_val : Fin k \u2192 E) (hXj : \u2200 j, X_j_val j \u2208 C_j j), \u2211 j : Fin k, \u03c8_K (X_j_val j) * V (C_j j) = \u2211 j : Fin r, \u03c8_K (X_j_val j) * V (C_j j)) := by\n  intro X_j_val hXj\n  have h1 : \u2200 j : Fin k, j.val \u2265 r \u2192 \u03c8_K (X_j_val j) = 0 := by\n    intro j hj\n    rw [def_1]\n    have h_empty := (def_2.2.2 j hj)\n    simp [h_empty]\n    intro h\n    exact h_empty (mem_inter h (hXj j))\n  rw [Finset.sum_eq_sum_iff_of_le (fun j _ => by rw [h1 j (by omega)]) hr]\n  intro j hj\n  rw [h1 j (by omega)]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 30, "endLine": 11, "endColumn": 52, "data": "failed to synthesize\n  Decidable (X \u2208 K)\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 12, "column": 41, "endLine": 12, "endColumn": 42, "data": "application type mismatch\n  C_j j\nargument\n  j\nhas type\n  Fin k : Type\nbut is expected to have type\n  Fin k\u271d : Type"}, {"line": 12, "column": 65, "endLine": 12, "endColumn": 66, "data": "application type mismatch\n  C_j j\nargument\n  j\nhas type\n  Fin r : Type\nbut is expected to have type\n  Fin k\u271d : Type"}, {"line": 12, "column": 110, "endLine": 12, "endColumn": 111, "data": "application type mismatch\n  C_j j\nargument\n  j\nhas type\n  Fin k : Type\nbut is expected to have type\n  Fin k\u271d : Type"}, {"line": 13, "column": 47, "endLine": 13, "endColumn": 48, "data": "application type mismatch\n  X_j_val j\nargument\n  j\nhas type\n  Fin k\u271d : Type\nbut is expected to have type\n  Fin k : Type"}, {"line": 13, "column": 97, "endLine": 13, "endColumn": 98, "data": "application type mismatch\n  C_j j\nargument\n  j\nhas type\n  Fin k : Type\nbut is expected to have type\n  Fin k\u271d : Type"}, {"line": 13, "column": 128, "endLine": 13, "endColumn": 129, "data": "application type mismatch\n  X_j_val j\nargument\n  j\nhas type\n  Fin r : Type\nbut is expected to have type\n  Fin k : Type"}, {"line": 13, "column": 140, "endLine": 13, "endColumn": 141, "data": "application type mismatch\n  C_j j\nargument\n  j\nhas type\n  Fin r : Type\nbut is expected to have type\n  Fin k\u271d : Type"}, {"line": 19, "column": 4, "endLine": 19, "endColumn": 18, "data": "simp made no progress"}, {"line": 22, "column": 6, "endLine": 22, "endColumn": 73, "data": "function expected at\n  Finset.sum_eq_sum_iff_of_le fun j x => ?m.8326\nterm has type\n  \u2211 i \u2208 ?m.8317, ?m.8318 i = \u2211 i \u2208 ?m.8317, ?m.8319 i \u2194 \u2200 i \u2208 ?m.8317, ?m.8318 i = ?m.8319 i"}, {"line": 22, "column": 6, "endLine": 22, "endColumn": 73, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.8409\nk\u271d : \u2115\nE : Type u_1\ninst\u271d\u00b9 : NormedAddCommGroup E\ninst\u271d : InnerProductSpace \u211d E\n\u03c8_K : E \u2192 \u211d\nK : Set E\nP : Set (Set E)\nC_j : Fin k\u271d \u2192 Set E\nV : Set E \u2192 \u211d\nX_j : Fin k\u271d \u2192 E\nk r : \u2115\nhk : k > 0\nhr : r \u2264 k\ndef_1 : \u2200 (X : E), \u03c8_K X = sorry\ndef_2 : P = {c | \u2203 j, c = C_j sorry} \u2227 (Fin r \u2192 C_j sorry \u2229 K \u2260 \u2205) \u2227 \u2200 (j : Fin k), \u2191j \u2265 r \u2192 C_j sorry \u2229 K = \u2205\nX_j_val : Fin k \u2192 E\nhXj : \u2200 (j : Fin k\u271d), X_j_val sorry \u2208 C_j j\nh1 : \u2200 (j : Fin k), \u2191j \u2265 r \u2192 \u03c8_K (X_j_val j) = 0\n\u22a2 \u2211 j : Fin k, \u03c8_K (X_j_val j) * V (C_j sorry) = \u2211 j : Fin r, \u03c8_K (X_j_val sorry) * V (C_j sorry)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "In particular, we can choose X_j from K, so that \u03c8_K(\\mathbf{X}_j)=1, and \u03c3=\u2211_{j=1}^r V(C_j).", "statement": "We assume:\n\u2022 A Riemann sum over P has the form \u03c3 = \u2211_{j=1}^r \u03c8_K(X_j)V(C_j) [l3].\n\u2022 For 1 \u2264 j \u2264 r, the subcube C_j has a non-empty intersection with K (C_j \u2229 K \u2260 \u2205) [def_2].\n\u2022 \u03c8_K(X) is the characteristic function of K [def_1].\nTherefore, we conclude:\n\u2022 It is possible to construct a specific Riemann sum \u03c3 over partition P by choosing sample points X_j \u2208 C_j \u2229 K for each j \u2208 {1, ..., r}, which results in the sum being equal to the total volume of these cubes: \u03c3 = \u2211_{j=1}^r V(C_j) [l4].", "dependencies": ["l3", "def_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {\u03b1 : Type*} [MeasurableSpace \u03b1] [MetricSpace \u03b1] [CompleteSpace \u03b1] [ \uc624\ud508: \u211d} (K C : Set \u03b1)\n  (V : Set \u03b1 \u2192 \u211d\u22650) (P : Finset (Set \u03b1)) (C_j : \u2115 \u2192 Set \u03b1) (\u03c8_K : \u03b1 \u2192 \u211d) (r : \u2115)\n  (l3 : \u2200 (X : \u2115 \u2192 \u03b1), (\u2211 j in Finset.range r, \u03c8_K (X j) * V (C_j j)) = (\u2211 j in Finset.range r, \u03c8_K (X j) * V (C_j j)))\n  (def_2 : \u2200 j : \u2115, 1 \u2264 j \u2192 j \u2264 r \u2192 (C_j j \u2229 K \u2260 \u2205))\n  (def_1 : \u2200 X : \u03b1, \u03c8_K X = if X \u2208 K then 1 else 0) :\n  \u2203 (X : \u2115 \u2192 \u03b1), (\u2200 j : \u2115, 1 \u2264 j \u2192 j \u2264 r \u2192 X j \u2208 C_j j \u2229 K) \u2227 (\u2211 j in Finset.range r, \u03c8_K (X j) * V (C_j j)) = (\u2211 j in Finset.range r, V (C_j j)) := by\nsorry", "lean_pass": false, "error_msg": [], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {\u03b1 : Type*} [MeasurableSpace \u03b1] [MetricSpace \u03b1] [CompleteSpace \u03b1] (K : Set \u03b1)\n  (V : Set \u03b1 \u2192 \u211d\u22650) (r : \u2115) (C_j : \u2115 \u2192 Set \u03b1) (\u03c8_K : \u03b1 \u2192 \u211d)\n  (l3 : \u2200 (X : \u2115 \u2192 \u03b1), (\u2211 j in Finset.range r, \u03c8_K (X j) * V (C_j j)) = (\u2211 j in Finset.range r, \u03c8_K (X j) * V (C_j j)))\n  (def_2 : \u2200 j : \u2115, 1 \u2264 j \u2192 j \u2264 r \u2192 (C_j j \u2229 K).Nonempty)\n  (def_1 : \u2200 X : \u03b1, \u03c8_K X = if X \u2208 K then 1 else 0) :\n  \u2203 (X : \u2115 \u2192 \u03b1), (\u2200 j : \u2115, 1 \u2264 j \u2192 j \u2264 r \u2192 X j \u2208 C_j j \u2229 K) \u2227 (\u2211 j in Finset.range r, \u03c8_K (X j) * V (C_j j)) = (\u2211 j in Finset.range r, V (C_j j)) := by\n  choose X hX using fun j hj1 hj2 => def_2 j hj1 hj2\n  let X' : \u2115 \u2192 \u03b1 := fun j => if h : 1 \u2264 j \u2227 j \u2264 r then X j h.1 h.2 else Classical.choice (by simp)\n  refine \u27e8X', ?_, ?_\u27e9\n  \u00b7 intro j hj1 hj2\n    simp [X', hj1, hj2]\n    exact hX j hj1 hj2\n  \u00b7 rw [Finset.sum_congr rfl]\n    intro j hj\n    rw [Finset.mem_range] at hj\n    rw [def_1, if_pos]\n    exact (hX (j + 1) (by linarith) (by linarith)).1\n    simp [X', (by linarith : 1 \u2264 j + 1), (by linarith : j + 1 \u2264 r)]\n    exact (hX (j + 1) (by linarith) (by linarith)).1", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 7, "column": 15, "endLine": 7, "endColumn": 18, "data": "failed to synthesize\n  LE Type\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 10, "column": 28, "endLine": 10, "endColumn": 50, "data": "failed to synthesize\n  Decidable (X \u2208 K)\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 7, "column": 17, "endLine": 7, "endColumn": 18, "data": "failed to synthesize\n  OfNat Type 0\nnumerals are polymorphic in Lean, but the numeral `0` cannot be used in a context where the expected type is\n  Type\ndue to the absence of the instance above\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 13, "column": 93, "endLine": 13, "endColumn": 97, "data": "simp made no progress"}, {"line": 19, "column": 4, "endLine": 19, "endColumn": 14, "data": "tactic 'introN' failed, insufficient number of binders\ncase refine_2\n\u03b1 : Type u_1\ninst\u271d\u00b2 : MeasurableSpace \u03b1\ninst\u271d\u00b9 : MetricSpace \u03b1\ninst\u271d : CompleteSpace \u03b1\nK : Set \u03b1\nV : Set \u03b1 \u2192 sorry\nr : \u2115\nC_j : \u2115 \u2192 Set \u03b1\n\u03c8_K : \u03b1 \u2192 \u211d\nl3 : \u2200 (X : \u2115 \u2192 \u03b1), \u2211 j \u2208 Finset.range r, sorry = \u2211 j \u2208 Finset.range r, sorry\ndef_2 : \u2200 (j : \u2115), 1 \u2264 j \u2192 j \u2264 r \u2192 (C_j j \u2229 K).Nonempty\ndef_1 : \u2200 (X : \u03b1), \u03c8_K X = sorry\nX : (j : \u2115) \u2192 1 \u2264 j \u2192 j \u2264 r \u2192 \u03b1\nhX : \u2200 (j : \u2115) (hj1 : 1 \u2264 j) (hj2 : j \u2264 r), X j hj1 hj2 \u2208 C_j j \u2229 K\nX' : \u2115 \u2192 \u03b1 := fun j => if h : 1 \u2264 j \u2227 j \u2264 r then X j \u22ef \u22ef else Classical.choice \u22ef\n\u22a2 (Finset.range r).sum ?m.20141 = sorry"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Now \\eqref{eq:7.3.6} and \\eqref{eq:7.3.7} imply that C_1, C_2, \\dots, C_r have the required properties.", "statement": "We assume:\n\u2022 For any \u03b5 > 0, there exists a \u03b4 > 0 such that for any partition P of C with norm ||P|| \u2264 \u03b4, any corresponding Riemann sum \u03c3 of \u03c8_K satisfies 0 \u2264 \u03c3 \u2264 \u03f5 (from (7.3.6)) [l2].\n\u2022 P is a specific partition with norm ||P|| < min(\u03c1, \u03b4) (from (7.3.7)), which implies ||P|| < \u03b4 [def_2].\n\u2022 There exists a specific Riemann sum over P given by \u03c3 = \u2211_{j=1}^r V(C_j) [l4].\nTherefore, we conclude:\n\u2022 The sum of the volumes of the subcubes that intersect K is bounded by \u03f5: \u2211_{j=1}^r V(C_j) \u2264 \u03f5 [ts_1].", "dependencies": ["l2", "def_2", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115} (C K : Set (EuclideanSpace \u211d n)) (\u03c8_K : EuclideanSpace \u211d n \u2192 \u211d)\n  (epsilon : \u211d) (r : \u2115) (P : List (Set (EuclideanSpace \u211d n)))\n  (l2 : \u2200 \u03b5 > 0, \u2203 \u03b4 > 0, \u2200 (P' : List (Set (EuclideanSpace \u211d n))) (\u03c3 : \u211d),\n    (List.norm P' \u2264 \u03b4) \u2192 (\u2200 (C_j : Set (EuclideanSpace \u211d n)), C_j \u2208 P' \u2192 Nonempty C_j) \u2192\n    (\u2200 (riemann_sum_form : List (EuclideanSpace \u211d n)),\n      (\u2200 j : Fin P'.length, riemann_sum_form.get j \u2208 P'.get j) \u2192\n      \u03c3 = (\u2211 j : Fin P'.length, \u03c8_K (riemann_sum_form.get j) * (volume (P'.get j))) \u2192\n      0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5))\n  (def_2 : \u2203 rho > 0, List.norm P < min rho \u03b4)\n  (l4 : (\u2211 j in Finset.range r, (volume (P.get j))) = (\u2211 j in Finset.range r, \u03c8_K (Classical.choose (Set.nonempty_of_subset_ne_empty (P.get j).inter K Set.nonempty_iff_ne_empty.mpr (by assumption))) * volume (P.get j))) :\n  (\u2211 j in Finset.range r, volume (P.get j)) \u2264 epsilon := by\nsorry", "lean_pass": false, "error_msg": [{"line": 6, "column": 39, "endLine": 6, "endColumn": 40, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.18728 : Type (?u.18728 + 1)"}, {"line": 6, "column": 39, "endLine": 6, "endColumn": 40, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.19552 : Type (?u.19552 + 1)"}, {"line": 6, "column": 67, "endLine": 6, "endColumn": 68, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.20376 : Type (?u.20376 + 1)"}, {"line": 7, "column": 57, "endLine": 7, "endColumn": 58, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.21206 : Type (?u.21206 + 1)"}, {"line": 8, "column": 62, "endLine": 8, "endColumn": 63, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.22345 : Type (?u.22345 + 1)"}, {"line": 9, "column": 5, "endLine": 9, "endColumn": 17, "data": "unknown constant 'List.norm'"}, {"line": 9, "column": 57, "endLine": 9, "endColumn": 58, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.23436 : Type (?u.23436 + 1)"}, {"line": 10, "column": 50, "endLine": 10, "endColumn": 51, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.24533 : Type (?u.24533 + 1)"}, {"line": 14, "column": 22, "endLine": 14, "endColumn": 33, "data": "unknown constant 'List.norm'"}, {"line": 15, "column": 101, "endLine": 15, "endColumn": 196, "data": "unknown constant 'Set.nonempty_of_subset_ne_empty'"}, {"line": 12, "column": 64, "endLine": 12, "endColumn": 81, "data": "function expected at\n  volume\nterm has type\n  ?m.9301"}, {"line": 15, "column": 33, "endLine": 15, "endColumn": 49, "data": "function expected at\n  volume\nterm has type\n  ?m.9301"}, {"line": 15, "column": 201, "endLine": 15, "endColumn": 217, "data": "function expected at\n  volume\nterm has type\n  ?m.9301"}, {"line": 16, "column": 26, "endLine": 16, "endColumn": 42, "data": "function expected at\n  volume\nterm has type\n  ?m.9301"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115} (C K : Set (EuclideanSpace \u211d (Fin n))) (\u03c8_K : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (epsilon : \u211d) (r : \u2115) (P : List (Set (EuclideanSpace \u211d (Fin n))))\n  (l2 : \u2200 \u03b5 > 0, \u2203 \u03b4 > 0, \u2200 (P' : List (Set (EuclideanSpace \u211d (Fin n)))) (\u03c3 : \u211d),\n    (P'.length \u2264 \u03b4) \u2192 (\u2200 (C_j : Set (EuclideanSpace \u211d (Fin n))), C_j \u2208 P' \u2192 Nonempty C_j) \u2192\n    (\u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n      (\u2200 j : Fin P'.length, riemann_sum_form.get j \u2208 P'.get j) \u2192\n      \u03c3 = (\u2211 j : Fin P'.length, \u03c8_K (riemann_sum_form.get j) * (volume (P'.get j))) \u2192\n      0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5))\n  (def_2 : \u2203 \u03c1 > 0, P.length < min \u03c1 \u03b4)\n  (l4 : (\u2211 j in Finset.range r, (volume (P.get j))) = (\u2211 j in Finset.range r, \u03c8_K (Classical.choose (Set.nonempty_of_mem (P.get j).inter K (by simp))) * volume (P.get j))) :\n  (\u2211 j in Finset.range r, volume (P.get j)) \u2264 epsilon := by\n  obtain \u27e8\u03c1, h\u03c1, hP\u27e9 := def_2\n  have h\u03b5 : epsilon > 0 := by\n    by_contra h\n    push_neg at h\n    have := l2 epsilon (by linarith)\n    obtain \u27e8\u03b4, h\u03b4_pos, h\u03b4\u27e9 := this\n    specialize h\u03b4 P (\u2211 j in Finset.range r, volume (P.get j)) (by linarith [hP, min_le_right \u03c1 \u03b4]) (by intro C_j hC_j; exact Nonempty.mpr hC_j)\n    specialize h\u03b4 (List.map (fun _ => Classical.choose (by simp)) P) (by intro j; simp) (by simp [l4])\n    linarith [h\u03b4.2]\n  obtain \u27e8\u03b4, h\u03b4_pos, h\u03b4\u27e9 := l2 epsilon h\u03b5\n  have hP\u03b4 : P.length < \u03b4 := lt_of_lt_of_le hP (min_le_right \u03c1 \u03b4)\n  have hnonempty : \u2200 C_j \u2208 P, Nonempty C_j := by\n    intro C_j hC_j\n    exact Nonempty.mpr hC_j\n  specialize h\u03b4 P (\u2211 j in Finset.range r, volume (P.get j)) (le_of_lt hP\u03b4) hnonempty\n  specialize h\u03b4 (List.map (fun _ => Classical.choose (by simp)) P) (by intro j; simp) (by simp [l4])\n  exact h\u03b4.2", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 49, "endLine": 11, "endColumn": 50, "data": "application type mismatch\n  riemann_sum_form.get j\nargument\n  j\nhas type\n  Fin P'.length : Type\nbut is expected to have type\n  Fin riemann_sum_form.length : Type"}, {"line": 12, "column": 58, "endLine": 12, "endColumn": 59, "data": "application type mismatch\n  riemann_sum_form.get j\nargument\n  j\nhas type\n  Fin P'.length : Type\nbut is expected to have type\n  Fin riemann_sum_form.length : Type"}, {"line": 15, "column": 128, "endLine": 15, "endColumn": 129, "data": "application type mismatch\n  P.get j\nargument\n  j\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Fin P.length : Type"}, {"line": 12, "column": 64, "endLine": 12, "endColumn": 81, "data": "function expected at\n  volume\nterm has type\n  ?m.3229"}, {"line": 15, "column": 33, "endLine": 15, "endColumn": 49, "data": "function expected at\n  volume\nterm has type\n  ?m.3229"}, {"line": 15, "column": 153, "endLine": 15, "endColumn": 169, "data": "function expected at\n  volume\nterm has type\n  ?m.3229"}, {"line": 16, "column": 26, "endLine": 16, "endColumn": 42, "data": "function expected at\n  volume\nterm has type\n  ?m.3229"}, {"line": 21, "column": 27, "endLine": 21, "endColumn": 35, "data": "linarith failed to find a contradiction\ncase h\nx\u271d : Sort u_1\nvolume : x\u271d\n\u03b4 n : \u2115\nC K : Set (EuclideanSpace \u211d (Fin n))\n\u03c8_K : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nepsilon : \u211d\nr : \u2115\nP : List (Set (EuclideanSpace \u211d (Fin n)))\nl2 :\n  \u2200 \u03b5 > 0,\n    \u2203 \u03b4 > 0,\n      \u2200 (P' : List (Set (EuclideanSpace \u211d (Fin n)))) (\u03c3 : \u211d),\n        P'.length \u2264 \u03b4 \u2192\n          (\u2200 C_j \u2208 P', Nonempty \u2191C_j) \u2192\n            \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n              (\u2200 (j : Fin P'.length), riemann_sum_form.get sorry \u2208 P'.get j) \u2192\n                \u03c3 = \u2211 j : Fin P'.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5\n\u03c1 : \u2115\nh\u03c1 : \u03c1 > 0\nhP : P.length < \u03c1 \u2293 \u03b4\nl4 : \u2211 j \u2208 Finset.range r, sorry = \u2211 j \u2208 Finset.range r, \u03c8_K (Classical.choose \u22ef) * sorry\nh : epsilon \u2264 0\na\u271d : 0 \u2265 epsilon\n\u22a2 False failed"}, {"line": 23, "column": 44, "endLine": 23, "endColumn": 60, "data": "function expected at\n  volume\nterm has type\n  x\u271d"}, {"line": 23, "column": 66, "endLine": 23, "endColumn": 97, "data": "linarith failed to find a contradiction\ncase a\nx\u271d : Sort u_1\nvolume : x\u271d\n\u03b4\u271d n : \u2115\nC K : Set (EuclideanSpace \u211d (Fin n))\n\u03c8_K : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nepsilon : \u211d\nr : \u2115\nP : List (Set (EuclideanSpace \u211d (Fin n)))\nl2 :\n  \u2200 \u03b5 > 0,\n    \u2203 \u03b4 > 0,\n      \u2200 (P' : List (Set (EuclideanSpace \u211d (Fin n)))) (\u03c3 : \u211d),\n        P'.length \u2264 \u03b4 \u2192\n          (\u2200 C_j \u2208 P', Nonempty \u2191C_j) \u2192\n            \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n              (\u2200 (j : Fin P'.length), riemann_sum_form.get sorry \u2208 P'.get j) \u2192\n                \u03c3 = \u2211 j : Fin P'.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5\n\u03c1 : \u2115\nh\u03c1 : \u03c1 > 0\nhP : P.length < \u03c1 \u2293 \u03b4\u271d\nl4 : \u2211 j \u2208 Finset.range r, sorry = \u2211 j \u2208 Finset.range r, \u03c8_K (Classical.choose \u22ef) * sorry\nh : epsilon \u2264 0\n\u03b4 : \u2115\nh\u03b4_pos : \u03b4 > 0\nh\u03b4 :\n  \u2200 (P' : List (Set (EuclideanSpace \u211d (Fin n)))) (\u03c3 : \u211d),\n    P'.length \u2264 \u03b4 \u2192\n      (\u2200 C_j \u2208 P', Nonempty \u2191C_j) \u2192\n        \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n          (\u2200 (j : Fin P'.length), riemann_sum_form.get sorry \u2208 P'.get j) \u2192\n            \u03c3 = \u2211 j : Fin P'.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 epsilon\na\u271d : P.length > \u03b4\n\u22a2 False failed"}, {"line": 23, "column": 125, "endLine": 23, "endColumn": 142, "data": "unknown constant 'Nonempty.mpr'"}, {"line": 24, "column": 59, "endLine": 24, "endColumn": 63, "data": "simp made no progress"}, {"line": 24, "column": 70, "endLine": 24, "endColumn": 86, "data": "unsolved goals\nx\u271d : Sort u_1\nvolume : x\u271d\n\u03b4\u271d n : \u2115\nC K : Set (EuclideanSpace \u211d (Fin n))\n\u03c8_K : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nepsilon : \u211d\nr : \u2115\nP : List (Set (EuclideanSpace \u211d (Fin n)))\nl2 :\n  \u2200 \u03b5 > 0,\n    \u2203 \u03b4 > 0,\n      \u2200 (P' : List (Set (EuclideanSpace \u211d (Fin n)))) (\u03c3 : \u211d),\n        P'.length \u2264 \u03b4 \u2192\n          (\u2200 C_j \u2208 P', Nonempty \u2191C_j) \u2192\n            \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n              (\u2200 (j : Fin P'.length), riemann_sum_form.get sorry \u2208 P'.get j) \u2192\n                \u03c3 = \u2211 j : Fin P'.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5\n\u03c1 : \u2115\nh\u03c1 : \u03c1 > 0\nhP : P.length < \u03c1 \u2293 \u03b4\u271d\nl4 : \u2211 j \u2208 Finset.range r, sorry = \u2211 j \u2208 Finset.range r, \u03c8_K (Classical.choose \u22ef) * sorry\nh : epsilon \u2264 0\n\u03b4 : \u2115\nh\u03b4_pos : \u03b4 > 0\nh\u03b4 :\n  \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n    (\u2200 (j : Fin P.length), riemann_sum_form.get sorry \u2208 P.get j) \u2192\n      \u2211 j \u2208 Finset.range r, sorry = \u2211 j : Fin P.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192\n        0 \u2264 \u2211 j \u2208 Finset.range r, sorry \u2227 \u2211 j \u2208 Finset.range r, sorry \u2264 epsilon\nj : Fin P.length\n\u22a2 Classical.choose \u22ef \u2208 P[\u2191j]"}, {"line": 24, "column": 89, "endLine": 24, "endColumn": 101, "data": "unsolved goals\nx\u271d : Sort u_1\nvolume : x\u271d\n\u03b4\u271d n : \u2115\nC K : Set (EuclideanSpace \u211d (Fin n))\n\u03c8_K : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nepsilon : \u211d\nr : \u2115\nP : List (Set (EuclideanSpace \u211d (Fin n)))\nl2 :\n  \u2200 \u03b5 > 0,\n    \u2203 \u03b4 > 0,\n      \u2200 (P' : List (Set (EuclideanSpace \u211d (Fin n)))) (\u03c3 : \u211d),\n        P'.length \u2264 \u03b4 \u2192\n          (\u2200 C_j \u2208 P', Nonempty \u2191C_j) \u2192\n            \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n              (\u2200 (j : Fin P'.length), riemann_sum_form.get sorry \u2208 P'.get j) \u2192\n                \u03c3 = \u2211 j : Fin P'.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5\n\u03c1 : \u2115\nh\u03c1 : \u03c1 > 0\nhP : P.length < \u03c1 \u2293 \u03b4\u271d\nl4 : \u2211 j \u2208 Finset.range r, sorry = \u2211 j \u2208 Finset.range r, \u03c8_K (Classical.choose \u22ef) * sorry\nh : epsilon \u2264 0\n\u03b4 : \u2115\nh\u03b4_pos : \u03b4 > 0\nh\u03b4 :\n  \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n    (\u2200 (j : Fin P.length), riemann_sum_form.get sorry \u2208 P.get j) \u2192\n      \u2211 j \u2208 Finset.range r, sorry = \u2211 j : Fin P.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192\n        0 \u2264 \u2211 j \u2208 Finset.range r, sorry \u2227 \u2211 j \u2208 Finset.range r, sorry \u2264 epsilon\n\u22a2 \u2211 j \u2208 Finset.range r, \u03c8_K (Classical.choose \u22ef) * sorry = \u2191P.length * (\u03c8_K (Classical.choose \u22ef) * sorry)"}, {"line": 27, "column": 47, "endLine": 27, "endColumn": 65, "data": "application type mismatch\n  lt_of_lt_of_le hP (min_le_right \u03c1 \u03b4)\nargument\n  min_le_right \u03c1 \u03b4\nhas type\n  \u03c1 \u2293 \u03b4 \u2264 \u03b4 : Prop\nbut is expected to have type\n  \u03c1 \u2293 \u03b4\u271d \u2264 \u03b4 : Prop"}, {"line": 30, "column": 10, "endLine": 30, "endColumn": 27, "data": "unknown constant 'Nonempty.mpr'"}, {"line": 31, "column": 42, "endLine": 31, "endColumn": 58, "data": "function expected at\n  volume\nterm has type\n  x\u271d"}, {"line": 32, "column": 57, "endLine": 32, "endColumn": 61, "data": "simp made no progress"}, {"line": 32, "column": 68, "endLine": 32, "endColumn": 84, "data": "unsolved goals\nx\u271d : Sort u_1\nvolume : x\u271d\n\u03b4\u271d n : \u2115\nC K : Set (EuclideanSpace \u211d (Fin n))\n\u03c8_K : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nepsilon : \u211d\nr : \u2115\nP : List (Set (EuclideanSpace \u211d (Fin n)))\nl2 :\n  \u2200 \u03b5 > 0,\n    \u2203 \u03b4 > 0,\n      \u2200 (P' : List (Set (EuclideanSpace \u211d (Fin n)))) (\u03c3 : \u211d),\n        P'.length \u2264 \u03b4 \u2192\n          (\u2200 C_j \u2208 P', Nonempty \u2191C_j) \u2192\n            \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n              (\u2200 (j : Fin P'.length), riemann_sum_form.get sorry \u2208 P'.get j) \u2192\n                \u03c3 = \u2211 j : Fin P'.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5\n\u03c1 : \u2115\nh\u03c1 : \u03c1 > 0\nhP : P.length < \u03c1 \u2293 \u03b4\u271d\nl4 : \u2211 j \u2208 Finset.range r, sorry = \u2211 j \u2208 Finset.range r, \u03c8_K (Classical.choose \u22ef) * sorry\nh\u03b5 : epsilon > 0\n\u03b4 : \u2115\nh\u03b4_pos : \u03b4 > 0\nhP\u03b4 : P.length < \u03b4\nhnonempty : \u2200 C_j \u2208 P, Nonempty \u2191C_j\nh\u03b4 :\n  \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n    (\u2200 (j : Fin P.length), riemann_sum_form.get sorry \u2208 P.get j) \u2192\n      \u2211 j \u2208 Finset.range r, sorry = \u2211 j : Fin P.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192\n        0 \u2264 \u2211 j \u2208 Finset.range r, sorry \u2227 \u2211 j \u2208 Finset.range r, sorry \u2264 epsilon\nj : Fin P.length\n\u22a2 Classical.choose \u22ef \u2208 P[\u2191j]"}, {"line": 32, "column": 87, "endLine": 32, "endColumn": 99, "data": "unsolved goals\nx\u271d : Sort u_1\nvolume : x\u271d\n\u03b4\u271d n : \u2115\nC K : Set (EuclideanSpace \u211d (Fin n))\n\u03c8_K : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nepsilon : \u211d\nr : \u2115\nP : List (Set (EuclideanSpace \u211d (Fin n)))\nl2 :\n  \u2200 \u03b5 > 0,\n    \u2203 \u03b4 > 0,\n      \u2200 (P' : List (Set (EuclideanSpace \u211d (Fin n)))) (\u03c3 : \u211d),\n        P'.length \u2264 \u03b4 \u2192\n          (\u2200 C_j \u2208 P', Nonempty \u2191C_j) \u2192\n            \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n              (\u2200 (j : Fin P'.length), riemann_sum_form.get sorry \u2208 P'.get j) \u2192\n                \u03c3 = \u2211 j : Fin P'.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5\n\u03c1 : \u2115\nh\u03c1 : \u03c1 > 0\nhP : P.length < \u03c1 \u2293 \u03b4\u271d\nl4 : \u2211 j \u2208 Finset.range r, sorry = \u2211 j \u2208 Finset.range r, \u03c8_K (Classical.choose \u22ef) * sorry\nh\u03b5 : epsilon > 0\n\u03b4 : \u2115\nh\u03b4_pos : \u03b4 > 0\nhP\u03b4 : P.length < \u03b4\nhnonempty : \u2200 C_j \u2208 P, Nonempty \u2191C_j\nh\u03b4 :\n  \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n    (\u2200 (j : Fin P.length), riemann_sum_form.get sorry \u2208 P.get j) \u2192\n      \u2211 j \u2208 Finset.range r, sorry = \u2211 j : Fin P.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192\n        0 \u2264 \u2211 j \u2208 Finset.range r, sorry \u2227 \u2211 j \u2208 Finset.range r, sorry \u2264 epsilon\n\u22a2 \u2211 j \u2208 Finset.range r, \u03c8_K (Classical.choose \u22ef) * sorry = \u2191P.length * (\u03c8_K (Classical.choose \u22ef) * sorry)"}, {"line": 16, "column": 57, "endLine": 33, "endColumn": 12, "data": "unsolved goals\ncase intro.intro.intro.intro\nx\u271d : Sort u_1\nvolume : x\u271d\n\u03b4\u271d n : \u2115\nC K : Set (EuclideanSpace \u211d (Fin n))\n\u03c8_K : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nepsilon : \u211d\nr : \u2115\nP : List (Set (EuclideanSpace \u211d (Fin n)))\nl2 :\n  \u2200 \u03b5 > 0,\n    \u2203 \u03b4 > 0,\n      \u2200 (P' : List (Set (EuclideanSpace \u211d (Fin n)))) (\u03c3 : \u211d),\n        P'.length \u2264 \u03b4 \u2192\n          (\u2200 C_j \u2208 P', Nonempty \u2191C_j) \u2192\n            \u2200 (riemann_sum_form : List (EuclideanSpace \u211d (Fin n))),\n              (\u2200 (j : Fin P'.length), riemann_sum_form.get sorry \u2208 P'.get j) \u2192\n                \u03c3 = \u2211 j : Fin P'.length, \u03c8_K (riemann_sum_form.get sorry) * sorry \u2192 0 \u2264 \u03c3 \u2227 \u03c3 \u2264 \u03b5\n\u03c1 : \u2115\nh\u03c1 : \u03c1 > 0\nhP : P.length < \u03c1 \u2293 \u03b4\u271d\nl4 : \u2211 j \u2208 Finset.range r, sorry = \u2211 j \u2208 Finset.range r, \u03c8_K (Classical.choose \u22ef) * sorry\nh\u03b5 : epsilon > 0\n\u03b4 : \u2115\nh\u03b4_pos : \u03b4 > 0\nhP\u03b4 : P.length < \u03b4\nhnonempty : \u2200 C_j \u2208 P, Nonempty \u2191C_j\nh\u03b4 : 0 \u2264 \u2211 j \u2208 Finset.range r, sorry \u2227 \u2211 j \u2208 Finset.range r, sorry \u2264 epsilon\n\u22a2 \u2211 j \u2208 Finset.range r, sorry \u2264 epsilon"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#fa2c07", "highlight": {"background": "#a3c2a8", "border": "#fa2c07"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    