
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Suppose that $\mathbf{F}:\R^n	o\R^m$ is continuously
differentiable on a neighborhood $N$ of $\mathbf{X}_0.$ Then$,$ for every
$\epsilon>0,$ there is a $\delta>0$ such that
\begin{equation}\label{eq:6.2.8}
|\mathbf{F}(\mathbf{X})-\mathbf{F}(\mathbf{Y})|<
(\|\mathbf{F}'(\mathbf{X}_{0})\|
+\epsilon) |\mathbf{X}-\mathbf{Y}|
\mbox{\quad if\quad}\mathbf{A},\mathbf{Y}\in B_\delta (\mathbf{X}_0).
\end{equation}

We can assume the following statement(s) without a proof. 

Let $f$ be continuous at $\mathbf{X}_1=(x_{11},x_{21}, \dots, x_{n1})$
and $\mathbf{X}_2=(x_{12},x_{22}, \dots,x_{n2})$ and differentiable on the
line segment $L$ from $\mathbf{X}_1$ to $\mathbf{X}_2.$ Then
\begin{equation} \label{eq:5.4.21}
f(\mathbf{X}_2)-f(\mathbf{X}_1)=\sum_{i=1}^n f_{x_i} (\mathbf{X}_0)(x_{i2}-x_{i1})=(d_{\mathbf{X}_0}f)(\mathbf{X}_2
-\mathbf{X}_1)
\end{equation}
for some $\mathbf{X}_0$ on $L$ distinct
from $\mathbf{X}_1$ and $\mathbf{X}_2$.

Proof: Consider the auxiliary function
\begin{equation} \label{eq:6.2.9}
\mathbf{G}(\mathbf{X})=\mathbf{F}(\mathbf{X})-\mathbf{F}'(\mathbf{X}_0)\mathbf{X}.
\end{equation}
The components of $\mathbf{G}$ are
$$
g_i(\mathbf{X})=f_i(\mathbf{X})-\sum_{j=1}^n
\frac{\partial f_i(\mathbf{X}_{0})
\partial x_j} x_j,
$$
so
$$
\frac{\partial g_i(\mathbf{X})}{\partial x_j}=
\frac{\partial f_i(\mathbf{X})}
{\partial x_j}-\frac{\partial f_i(\mathbf{X}_0)}{\partial x_j}.
$$

ewpage

oindent
Thus, $\partial g_i/\partial x_j$ is continuous on $N$ and zero at
$\mathbf{X}_0$. Therefore, there is a $\delta>0$ such that
\begin{equation}\label{eq:6.2.10}
\left|\frac{\partial g_i(\mathbf{X})}{\partial x_j}\right|<\frac{\epsilon}{
\sqrt{mn}}\mbox{\quad for \quad}1\le i\le m,\quad 1\le j\le n,
\mbox{\quad if \quad}
|\mathbf{X}-\mathbf{X}_0|<\delta.
\end{equation}
Now suppose that $\mathbf{X}$, $\mathbf{Y}\in B_\delta(\mathbf{X}_0)$. By
Theorem~\ref{thmtype:5.4.5},
\begin{equation}\label{eq:6.2.11}
g_i(\mathbf{X})-g_i(\mathbf{Y})=\sum_{j=1}^n
\frac{\partial g_i(\mathbf{X}_i)}{\partial x_j}(x_j-y_j),
\end{equation}
where $\mathbf{X}_i$ is on the line segment from $\mathbf{X}$ to $\mathbf{Y}$,
so  $\mathbf{X}_i\in B_\delta(\mathbf{X}_0)$. From \eqref{eq:6.2.10},
\eqref{eq:6.2.11}, and Schwarz's inequality,
$$
(g_i(\mathbf{X})-g_i(\mathbf{Y}))^2\le\left(\sum_{j=1}^n\left[\frac{\partial
g_i
(\mathbf{X}_i)}{\partial x_j}\right]^2\right)
|\mathbf{X}-\mathbf{Y}|^2
<\frac{\epsilon^2}{ m} |\mathbf{X}-\mathbf{Y}|^2.
$$
Summing this from $i=1$ to $i=m$ and taking square roots yields
\begin{equation}\label{eq:6.2.12}
|\mathbf{G}(\mathbf{X})-\mathbf{G}(\mathbf{Y})|<\epsilon
|\mathbf{X}-\mathbf{Y}|
\mbox{\quad if\quad}\mathbf{X}, \mathbf{Y}\in B_\delta(\mathbf{X}_0).
\end{equation}
To complete the proof, we note that
\begin{equation}\label{eq:6.2.13}
\mathbf{F}(\mathbf{X})-\mathbf{F}(\mathbf{Y})=
\mathbf{G}(\mathbf{X})-\mathbf{G}(\mathbf{Y})+\mathbf{F}'(\mathbf{X}_0)(\mathbf{X}-\mathbf{Y}),
\end{equation}
 so \eqref{eq:6.2.12} and the triangle inequality imply \eqref{eq:6.2.8}.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Suppose that $\\mathbf{F}:\\R^n\\to\\R^m$ is continuously differentiable on a neighborhood $N$ of $\\mathbf{X}_0.$", "statement": "Premise:\n\u2022 $\\mathbf{F}:\\R^n\\to\\R^m$ is a function that is continuously differentiable on a neighborhood $N$ of a point $\\mathbf{X}_0 \\in \\R^n$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080)", "lean_pass": true, "error_msg": [], "tries": 4}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean function type `EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m)` correctly represents $\\mathbf{F}:\\R^n\\to\\R^m$. EuclideanSpace with Fin indexing is the standard way to represent finite-dimensional real vector spaces in Lean.", "The condition `ContDiffOn \u211d 1 F N` in tc_1 correctly captures that F is continuously differentiable (C\u00b9) on the set N, which matches the natural language requirement.", "The declaration `X\u2080 : EuclideanSpace \u211d (Fin n)` correctly represents $\\mathbf{X}_0 \\in \\R^n$.", "The condition `N \u2208 nhds X\u2080` in tc_1 correctly formalizes that N is a neighborhood of X\u2080, which is exactly what the natural language states."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "for every $\\epsilon>0,$", "statement": "Premise:\n\u2022 $\\epsilon$ is a positive real number [tc_2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (\u03b5 : \u211d) (tc_2 : \u03b5 > 0)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration (\u03b5 : \u211d) correctly captures that \u03b5 is a positive real number by declaring it as type \u211d", "The type declaration (\u03b5 : \u211d) explicitly states that \u03b5 \u2208 \u211d, matching the natural language condition", "The constraint (tc_2 : \u03b5 > 0) directly matches the condition \u03b5 > 0 from the natural language"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let $f$ be continuous at $\\mathbf{X}_1=(x_{11},x_{21}, \\dots, x_{n1})$\nand $\\mathbf{X}_2=(x_{12},x_{22}, \\dots,x_{n2})$ and differentiable on the\nline segment $L$ from $\\mathbf{X}_1$ to $\\mathbf{X}_2.$ Then\n\\begin{equation} \\label{eq:5.4.21}\nf(\\mathbf{X}_2)-f(\\mathbf{X}_1)=\\sum_{i=1}^n f_{x_i} (\\mathbf{X}_0)(x_{i2}-x_{i1})=(d_{\\mathbf{X}_0}f)(\\mathbf{X}_2\n-\\mathbf{X}_1)\n\\end{equation}\nfor some $\\mathbf{X}_0$ on $L$ distinct\nfrom $\\mathbf{X}_1$ and $\\mathbf{X}_2$.", "statement": "Definition:\n\u2022 Assumption (Mean Value Theorem for scalar functions): Let $f: \\R^n \\to \\R$ be a function continuous at $\\mathbf{X}_1$ and $\\mathbf{X}_2$ and differentiable on the line segment $L$ between them. Then there exists a point $\\mathbf{X}_c$ on $L$ (distinct from $\\mathbf{X}_1, \\mathbf{X}_2$) such that $f(\\mathbf{X}_2) - f(\\mathbf{X}_1) = \\nabla f(\\mathbf{X}_c) \\cdot (\\mathbf{X}_2 - \\mathbf{X}_1)$, which is equivalent to $f(\\mathbf{X}_2)-f(\\mathbf{X}_1)=\\sum_{i=1}^n \\frac{\\partial f}{\\partial x_i} (\\mathbf{X}_c)(x_{i2}-x_{i1})$ [def_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {E : Type*} [NormedAddCommGroup E] [InnerProductSpace \u211d E]\n  {f : E \u2192 \u211d}\n  (X\u2081 X\u2082 : E)\n  (def_1 :\n    (ContinuousAt f X\u2081 \u2227 ContinuousAt f X\u2082) \u2227\n    (DifferentiableOn \u211d f (segment \u211d X\u2081 X\u2082)) \u2192\n    \u2203 Xc : E,\n      Xc \u2208 segment \u211d X\u2081 X\u2082 \u2227 Xc \u2260 X\u2081 \u2227 Xc \u2260 X\u2082 \u2227\n      f X\u2082 - f X\u2081 = (deriv \u211d f Xc) (X\u2082 - X\u2081)\n  )", "lean_pass": false, "error_msg": [{"line": 14, "column": 21, "endLine": 14, "endColumn": 33, "data": "function expected at\n  deriv ?m.15608 f\nterm has type\n  ?m.15097"}, {"line": 14, "column": 27, "endLine": 14, "endColumn": 28, "data": "application type mismatch\n  deriv \u211d\nargument\n  \u211d\nhas type\n  Type : Type 1\nbut is expected to have type\n  (E \u2192 \u211d) \u2192 ?m.15097 : Type (max ?u.15093 u_1)"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "def_2": {"id": "def_2", "natural_language": "Consider the auxiliary function\n\\begin{equation} \n\\mathbf{G}(\\mathbf{X})=\\mathbf{F}(\\mathbf{X})-\\mathbf{F}'(\\mathbf{X}_0)\\mathbf{X}.\n\\end{equation}", "statement": "Definition:\n\u2022 $\\mathbf{F}:\\R^n\\to\\R^m$ is continuously differentiable on a neighborhood $N$ of $\\mathbf{X}_0$ [tc_1].\n\u2022 Define an auxiliary function $\\mathbf{G}:\\R^n\\to\\R^m$ as $\\mathbf{G}(\\mathbf{X})=\\mathbf{F}(\\mathbf{X})-\\mathbf{F}'(\\mathbf{X}_0)\\mathbf{X}$, where $\\mathbf{F}'(\\mathbf{X}_0)$ is the Jacobian matrix of $\\mathbf{F}$ at $\\mathbf{X}_0$ [def_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080)\n  (D_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m))\n  (h_fderiv : HasFDerivAt F D_F_X\u2080 X\u2080)\n  (G : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (def_2 : \u2200 X, G X = F X - D_F_X\u2080 X)", "lean_pass": true, "error_msg": [], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that F is continuously differentiable on neighborhood N of X\u2080. ContDiffOn \u211d 1 F N means F is continuously differentiable on N, and N \u2208 nhds X\u2080 means N is a neighborhood of X\u2080.", "The Lean formalization correctly represents the Jacobian condition. HasFDerivAt F D_F_X\u2080 X\u2080 means D_F_X\u2080 is the Fr\u00e9chet derivative (which generalizes the Jacobian matrix) of F at X\u2080.", "The Lean formalization perfectly matches the definition of G. The equation G X = F X - D_F_X\u2080 X is exactly the same as the mathematical definition G(X) = F(X) - F'(X\u2080)X, where D_F_X\u2080 corresponds to F'(X\u2080)."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "The components of $\\mathbf{G}$ are\n$$\ng_i(\\mathbf{X})=f_i(\\mathbf{X})-\\sum_{j=1}^n\n\\frac{\\partial f_i(\\mathbf{X}_{0})\n\\partial x_j} x_j,\n$$\nso\n$$\n\\frac{\\partial g_i(\\mathbf{X})}{\\partial x_j}=\n\\frac{\\partial f_i(\\mathbf{X})}\n{\\partial x_j}-\\frac{\\partial f_i(\\mathbf{X}_0)}{\\partial x_j}.\n$$", "statement": "We assume:\n\u2022 The auxiliary function $\\mathbf{G}$ is defined as $\\mathbf{G}(\\mathbf{X})=\\mathbf{F}(\\mathbf{X})-\\mathbf{F}'(\\mathbf{X}_0)\\mathbf{X}$ [def_2].\nTherefore, we conclude:\n\u2022 The components $g_i$ of $\\mathbf{G}$ and their partial derivatives are given by $g_i(\\mathbf{X})=f_i(\\mathbf{X})-\\sum_{j=1}^n \\frac{\\partial f_i(\\mathbf{X}_{0})}{\\partial x_j} x_j$ and $\\frac{\\partial g_i(\\mathbf{X})}{\\partial x_j} = \\frac{\\partial f_i(\\mathbf{X})}{\\partial x_j}-\\frac{\\partial f_i(\\mathbf{X}_0)}{\\partial x_j}$ for $i=1,\\dots,m$ and $j=1,\\dots,n$ [l1].", "dependencies": ["def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080)\n  (D_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m))\n  (h_fderiv : HasFDerivAt F D_F_X\u2080 X\u2080)\n  (G : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (def_2 : \u2200 X, G X = F X - D_F_X\u2080 X) :\n  (\u2200 (X : EuclideanSpace \u211d (Fin n)) (i : Fin m),\n    (G X) i = (F X) i - \u2211 j : Fin n, D_F_X\u2080 (EuclideanSpace.single j 1) i * (X j)) \u2227\n  (\u2200 (X : EuclideanSpace \u211d (Fin n)) (i : Fin m) (j : Fin n),\n    partialDeriv j (fun Y => (G Y) i) X = partialDeriv j (fun Y => (F Y) i) X - partialDeriv j (fun Y => (F Y) i) X\u2080) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 18, "column": 4, "endLine": 18, "endColumn": 39, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.8921"}, {"line": 18, "column": 42, "endLine": 18, "endColumn": 77, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.8921"}, {"line": 18, "column": 80, "endLine": 18, "endColumn": 116, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.8921"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080)\n  (D_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m))\n  (h_fderiv : HasFDerivAt F D_F_X\u2080 X\u2080)\n  (G : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (def_2 : \u2200 X, G X = F X - D_F_X\u2080 X) :\n  (\u2200 (X : EuclideanSpace \u211d (Fin n)) (i : Fin m),\n    (G X) i = (F X) i - \u2211 j : Fin n, D_F_X\u2080 (EuclideanSpace.single j 1) i * (X j)) \u2227\n  (\u2200 (X : EuclideanSpace \u211d (Fin n)) (i : Fin m) (j : Fin n),\n    fderiv \u211d (fun Y => (G Y) i) X = fderiv \u211d (fun Y => (F Y) i) X - fderiv \u211d (fun Y => (F Y) i) X\u2080) := by\n  constructor\n  \u00b7 intro X i\n    simp [def_2, Pi.sub_apply]\n    rw [ContinuousLinearMap.sum_apply]\n    simp\n    rw [\u2190 ContinuousLinearMap.coe_proj]\n    simp\n  \u00b7 intro X i j\n    simp [def_2, Pi.sub_apply]\n    have h1 : DifferentiableAt \u211d (fun Y => F Y i) X := by\n      exact (tc_1.left.differentiableOn X (mem_of_mem_nhds tc_1.right)).differentiableAt (mem_of_mem_nhds tc_1.right)\n    have h2 : DifferentiableAt \u211d (fun Y => F Y i) X\u2080 := by\n      exact (tc_1.left.differentiableOn X\u2080 (mem_of_mem_nhds tc_1.right)).differentiableAt (mem_of_mem_nhds tc_1.right)\n    have h3 : DifferentiableAt \u211d (fun Y => D_F_X\u2080 Y i) X := by\n      exact ContinuousLinearMap.differentiableAt\n    rw [fderiv_sub (h1) (h3)]\n    simp\n    rw [fderiv_const_sub (h3) (h1)]\n    simp\n    rw [\u2190 h_fderiv.2]\n    simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 22, "column": 8, "endLine": 22, "endColumn": 37, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  (\u2211 d \u2208 ?t, ?f d) ?b\ncase left\nn m : \u2115\nF : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m)\nX\u2080 : EuclideanSpace \u211d (Fin n)\nN : Set (EuclideanSpace \u211d (Fin n))\ntc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 \ud835\udcdd X\u2080\nD_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m)\nh_fderiv : HasFDerivAt F D_F_X\u2080 X\u2080\nG : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m)\ndef_2 : \u2200 (X : EuclideanSpace \u211d (Fin n)), G X = F X - D_F_X\u2080 X\nX : EuclideanSpace \u211d (Fin n)\ni : Fin m\n\u22a2 D_F_X\u2080 X i = \u2211 x : Fin n, D_F_X\u2080 (EuclideanSpace.single x 1) i * X x"}, {"line": 29, "column": 40, "endLine": 29, "endColumn": 41, "data": "application type mismatch\n  ContDiffOn.differentiableOn tc_1.left X\nargument\n  X\nhas type\n  EuclideanSpace \u211d (Fin n) : Type\nbut is expected to have type\n  1 \u2264 1 : Prop"}, {"line": 31, "column": 40, "endLine": 31, "endColumn": 42, "data": "application type mismatch\n  ContDiffOn.differentiableOn tc_1.left X\u2080\nargument\n  X\u2080\nhas type\n  EuclideanSpace \u211d (Fin n) : Type\nbut is expected to have type\n  1 \u2264 1 : Prop"}, {"line": 33, "column": 6, "endLine": 33, "endColumn": 48, "data": "type mismatch\n  ContinuousLinearMap.differentiableAt\nhas type\n  \u2200 (e : ?m.35636 \u2192L[?m.35634] ?m.35639) {x : ?m.35636}, DifferentiableAt ?m.35634 (\u21d1e) x : Prop\nbut is expected to have type\n  DifferentiableAt \u211d (fun Y => D_F_X\u2080 Y i) X : Prop"}, {"line": 36, "column": 8, "endLine": 36, "endColumn": 34, "data": "function expected at\n  fderiv_const_sub ?m.42317\nterm has type\n  fderiv ?m.42283 (fun y => ?m.42317 - ?m.42291 y) ?m.42292 = -fderiv ?m.42283 ?m.42291 ?m.42292"}, {"line": 36, "column": 8, "endLine": 36, "endColumn": 34, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.42748\ncase right\nn m : \u2115\nF : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m)\nX\u2080 : EuclideanSpace \u211d (Fin n)\nN : Set (EuclideanSpace \u211d (Fin n))\ntc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 \ud835\udcdd X\u2080\nD_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m)\nh_fderiv : HasFDerivAt F D_F_X\u2080 X\u2080\nG : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m)\ndef_2 : \u2200 (X : EuclideanSpace \u211d (Fin n)), G X = F X - D_F_X\u2080 X\nX : EuclideanSpace \u211d (Fin n)\ni : Fin m\nj : Fin n\nh1 : DifferentiableAt \u211d (fun Y => F Y i) X\nh2 : DifferentiableAt \u211d (fun Y => F Y i) X\u2080\nh3 : DifferentiableAt \u211d (fun Y => D_F_X\u2080 Y i) X\n\u22a2 fderiv \u211d (fun Y => D_F_X\u2080 Y i) X = fderiv \u211d (fun Y => F Y i) X\u2080"}, {"line": 36, "column": 25, "endLine": 36, "endColumn": 29, "data": "application type mismatch\n  fderiv_const_sub h3\nargument\n  h3\nhas type\n  DifferentiableAt \u211d (fun Y => D_F_X\u2080 Y i) X : Prop\nbut is expected to have type\n  ?m.42288 : Type ?u.42280"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Thus, $\\partial g_i/\\partial x_j$ is continuous on $N$ and zero at\n$\\mathbf{X}_0$.", "statement": "We assume:\n\u2022 $\\mathbf{F}:\\R^n\\to\\R^m$ is continuously differentiable on a neighborhood $N$ of $\\mathbf{X}_0$ [tc_1].\n\u2022 The partial derivative is $\\frac{\\partial g_i(\\mathbf{X})}{\\partial x_j} = \\frac{\\partial f_i(\\mathbf{X})}{\\partial x_j}-\\frac{\\partial f_i(\\mathbf{X}_0)}{\\partial x_j}$ [l1].\nTherefore, we conclude:\n\u2022 The partial derivative $\\partial g_i/\\partial x_j$ is continuous on $N$ and is equal to zero at $\\mathbf{X}_0$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (i : Fin m) (j : Fin n)\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080)\n  (l1 : partialDeriv F i j X = partialDeriv F i j X - partialDeriv F i j X\u2080) :\n  (ContDiffOn \u211d 0 (fun X => partialDeriv F i j X - partialDeriv F i j X\u2080) N \u2227 (partialDeriv F i j X\u2080 - partialDeriv F i j X\u2080) = 0) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 12, "column": 8, "endLine": 12, "endColumn": 28, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.1561"}, {"line": 12, "column": 31, "endLine": 12, "endColumn": 51, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.1561"}, {"line": 12, "column": 54, "endLine": 12, "endColumn": 75, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.1561"}, {"line": 13, "column": 28, "endLine": 13, "endColumn": 48, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.1561"}, {"line": 13, "column": 51, "endLine": 13, "endColumn": 72, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.1561"}, {"line": 13, "column": 79, "endLine": 13, "endColumn": 100, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.1561"}, {"line": 13, "column": 103, "endLine": 13, "endColumn": 124, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.1561"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (i : Fin m) (j : Fin n)\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080) :\n  (ContinuousOn (fun X => fderiv \u211d F X - fderiv \u211d F X\u2080) N \u2227 (fderiv \u211d F X\u2080 - fderiv \u211d F X\u2080) = 0) := by\n  constructor\n  \u00b7 intro x hx\n    have := ContDiffAt.continuousAt (ContDiffOn.contDiffAt tc_1.left hx)\n    exact continuousAt_fderiv this\n  \u00b7 simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 69, "endLine": 15, "endColumn": 71, "data": "application type mismatch\n  ContDiffOn.contDiffAt tc_1.left hx\nargument\n  hx\nhas type\n  x \u2208 N : Prop\nbut is expected to have type\n  N \u2208 \ud835\udcdd ?m.3672 : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Therefore, there is a $\\delta>0$ such that\n\\begin{equation}\n\\left|\\frac{\\partial g_i(\\mathbf{X})}{\\partial x_j}\\right|<\\frac{\\epsilon}{\n\\sqrt{mn}}\\mbox{\\quad for \\quad}1\\le i\\le m,\\quad 1\\le j\\le n,\n\\mbox{\\quad if \\quad}\n|\\mathbf{X}-\\mathbf{X}_0|<\\delta.\n\\end{equation}", "statement": "We assume:\n\u2022 $\\epsilon$ is a positive real number [tc_2].\n\u2022 The partial derivative $\\partial g_i/\\partial x_j$ is continuous on $N$ and is zero at $\\mathbf{X}_0$ [l2].\nTherefore, we conclude:\n\u2022 There exists a $\\delta > 0$ such that for any $\\mathbf{X}$ with $|\\mathbf{X}-\\mathbf{X}_0|<\\delta$, we have $|\\frac{\\partial g_i(\\mathbf{X})}{\\partial x_j}| < \\frac{\\epsilon}{\\sqrt{mn}}$ for all $1\\le i\\le m$ and $1\\le j\\le n$ [l3].", "dependencies": ["tc_2", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {n m : \u2115} {N : Set (EuclideanSpace \u211d n)} (X0 : EuclideanSpace \u211d n)\n  (g : EuclideanSpace \u211d n \u2192 (EuclideanSpace \u211d m))\n  (\u03b5 : \u211d) (tc_2 : \u03b5 > 0)\n  (l2 : (\u2200 i j, ContinuousOn (partialDeriv j (g i)) N) \u2227 (\u2200 i j, partialDeriv j (g i) X0 = 0)) :\n  \u2203 \u03b4 > 0, \u2200 X : EuclideanSpace \u211d n, dist X X0 < \u03b4 \u2192 \u2200 i j, |partialDeriv j (g i) X| < \u03b5 / sqrt (m * n) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 6, "column": 39, "endLine": 6, "endColumn": 40, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.3755 : Type (?u.3755 + 1)"}, {"line": 6, "column": 66, "endLine": 6, "endColumn": 67, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.4578 : Type (?u.4578 + 1)"}, {"line": 7, "column": 24, "endLine": 7, "endColumn": 25, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.5402 : Type (?u.5402 + 1)"}, {"line": 7, "column": 46, "endLine": 7, "endColumn": 47, "data": "application type mismatch\n  EuclideanSpace \u211d m\nargument\n  m\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.6224 : Type (?u.6224 + 1)"}, {"line": 10, "column": 34, "endLine": 10, "endColumn": 35, "data": "application type mismatch\n  EuclideanSpace \u211d n\nargument\n  n\nhas type\n  \u2115 : Type\nbut is expected to have type\n  Type ?u.8218 : Type (?u.8218 + 1)"}, {"line": 10, "column": 61, "endLine": 10, "endColumn": 83, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.3747"}, {"line": 10, "column": 91, "endLine": 10, "endColumn": 95, "data": "ambiguous, possible interpretations \n  Rat.sqrt (\u2191m * \u2191n) : \u211a\n  \n  (m * n).sqrt : \u2115\n  \n  \u221a(\u2191m * \u2191n) : \u211d"}, {"line": 9, "column": 30, "endLine": 9, "endColumn": 50, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.3747"}, {"line": 9, "column": 65, "endLine": 9, "endColumn": 88, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.3747"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {n m : \u2115} {N : Set (Fin n \u2192 \u211d)} (X0 : Fin n \u2192 \u211d)\n  (g : (Fin n \u2192 \u211d) \u2192 (Fin m \u2192 \u211d)) (\u03b5 : \u211d) (tc_2 : \u03b5 > 0)\n  (l2 : (\u2200 i j, ContinuousOn (fun X => partialDeriv j (g i) X) N) \u2227 \n        (\u2200 i j, partialDeriv j (g i) X0 = 0)) :\n  \u2203 \u03b4 > 0, \u2200 X : Fin n \u2192 \u211d, dist X X0 < \u03b4 \u2192 \u2200 i j, |partialDeriv j (g i) X| < \u03b5 / sqrt (m * n) := by\n  obtain \u27e8hcont, hzero\u27e9 := l2\n  have hpos : 0 < \u03b5 / sqrt (m * n) := by positivity\n  have : \u2200 i j, \u2203 \u03b4 > 0, \u2200 X \u2208 N, dist X X0 < \u03b4 \u2192 |partialDeriv j (g i) X| < \u03b5 / sqrt (m * n) := by\n    intro i j\n    exact ContinuousOn.exists_forall_abs_sub_lt (hcont i j) (hzero i j) hpos\n  choose \u03b4 h\u03b4 using this\n  let \u03b4' := Finset.inf' Finset.univ (by simp) (fun (ij : Fin m \u00d7 Fin n) => \u03b4 ij.1 ij.2)\n  have h\u03b4' : 0 < \u03b4' := by\n    apply Finset.inf'_pos\n    simp only [Finset.mem_univ, forall_true_left]\n    intro ij\n    exact (h\u03b4 ij.1 ij.2).1\n  refine \u27e8\u03b4', h\u03b4', ?_\u27e9\n  intro X hX i j\n  apply (h\u03b4 i j).2 X _ hX\n  exact mem_of_mem_of_subset (mem_univ _) (subset_univ _)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 52, "endLine": 10, "endColumn": 74, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.474"}, {"line": 10, "column": 82, "endLine": 10, "endColumn": 86, "data": "ambiguous, possible interpretations \n  Rat.sqrt (\u2191m * \u2191n) : \u211a\n  \n  (m * n).sqrt : \u2115\n  \n  \u221a(\u2191m * \u2191n) : \u211d"}, {"line": 8, "column": 39, "endLine": 8, "endColumn": 61, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.474"}, {"line": 9, "column": 16, "endLine": 9, "endColumn": 39, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.474"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Now suppose that $\\mathbf{X}$, $\\mathbf{Y}\\in B_\\delta(\\mathbf{X}_0)$. By\nTheorem~\\ref{thmtype:5.4.5},\n\\begin{equation}\ng_i(\\mathbf{X})-g_i(\\mathbf{Y})=\\sum_{j=1}^n\n\\frac{\\partial g_i(\\mathbf{X}_i)}{\\partial x_j}(x_j-y_j),\n\\end{equation}\nwhere $\\mathbf{X}_i$ is on the line segment from $\\mathbf{X}$ to $\\mathbf{Y}$,\nso  $\\mathbf{X}_i\\in B_\\delta(\\mathbf{X}_0)$.", "statement": "We assume:\n\u2022 $\\mathbf{F}$ is continuously differentiable on $N$ [tc_1].\n\u2022 The Mean Value Theorem for scalar functions holds [def_1].\n\u2022 The components of $\\mathbf{G}$ are $g_i$ and are differentiable [l1].\n\u2022 $\\delta > 0$ is chosen as in [l3].\n\u2022 $\\mathbf{X}, \\mathbf{Y} \\in B_\\delta(\\mathbf{X}_0)$.\nTherefore, we conclude:\n\u2022 For each $i \\in \\{1,\\dots,m\\}$, there exists a point $\\mathbf{X}_i$ on the line segment from $\\mathbf{X}$ to $\\mathbf{Y}$ such that $g_i(\\mathbf{X})-g_i(\\mathbf{Y})=\\sum_{j=1}^n \\frac{\\partial g_i(\\mathbf{X}_i)}{\\partial x_j}(x_j-y_j)$. Furthermore, because the ball $B_\\delta(\\mathbf{X}_0)$ is convex, $\\mathbf{X}_i \\in B_\\delta(\\mathbf{X}_0)$ [l4].", "dependencies": ["tc_1", "def_1", "l1", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080)\n  (def_1 : \u2200 (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d) (X\u2081 X\u2082 : EuclideanSpace \u211d (Fin n)),\n    ContinuousAt f X\u2081 \u2227 ContinuousAt f X\u2082 \u2227 DifferentiableOn \u211d f (segment \u211d X\u2081 X\u2082) \u2192\n      \u2203 X_c \u2208 segment \u211d X\u2081 X\u2082, X_c \u2260 X\u2081 \u2227 X_c \u2260 X\u2082 \u2227 f X\u2082 - f X\u2081 = (deriv f X_c) (X\u2082 - X\u2081))\n  (l1 : \u2200 (G : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m)),\n    (\u2200 i, (G i) = (F i) - (fun x => ((Fderiv \u211d F X\u2080) (x - X\u2080)) i)))\n  (\u03b4 : \u211d)\n  (l3 : \u03b4 > 0)\n  (X Y : EuclideanSpace \u211d (Fin n))\n  (hXY : X \u2208 Metric.ball X\u2080 \u03b4 \u2227 Y \u2208 Metric.ball X\u2080 \u03b4) :\n  \u2200 i : Fin m, \u2203 X_i \u2208 segment \u211d X Y, (F i) X - (F i) Y = \u2211 j : Fin n, (partialDeriv (F i) j X_i) * (X j - Y j) \u2227 X_i \u2208 Metric.ball X\u2080 \u03b4 := by\nsorry", "lean_pass": false, "error_msg": [{"line": 15, "column": 18, "endLine": 15, "endColumn": 65, "data": "failed to synthesize\n  HSub (EuclideanSpace \u211d (Fin m)) ((x : ?m.18766) \u2192 ?m.18777 x) ?m.19788\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 20, "column": 41, "endLine": 20, "endColumn": 42, "data": "application type mismatch\n  F i\nargument\n  i\nhas type\n  Fin m : Type\nbut is expected to have type\n  EuclideanSpace \u211d (Fin n) : Type"}, {"line": 20, "column": 51, "endLine": 20, "endColumn": 52, "data": "application type mismatch\n  F i\nargument\n  i\nhas type\n  Fin m : Type\nbut is expected to have type\n  EuclideanSpace \u211d (Fin n) : Type"}, {"line": 13, "column": 68, "endLine": 13, "endColumn": 79, "data": "failed to synthesize\n  NontriviallyNormedField (EuclideanSpace \u211d (Fin n))\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 15, "column": 38, "endLine": 15, "endColumn": 51, "data": "function expected at\n  Fderiv\nterm has type\n  ?m.5449"}, {"line": 20, "column": 72, "endLine": 20, "endColumn": 96, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.14626"}, {"line": 5, "column": 0, "endLine": 20, "endColumn": 136, "data": "stuck at solving universe constraint\n  ?u.18761+1 =?= imax ?u.18765 ?u.18774\nwhile trying to unify\n  (x : ?m.18766) \u2192 ?m.18777 x : Sort (imax ?u.18765 ?u.18774)\nwith\n  (x : ?m.18766) \u2192 ?m.18777 x : Sort (imax ?u.18765 ?u.18774)"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080)\n  (def_1 : \u2200 (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d) (X\u2081 X\u2082 : EuclideanSpace \u211d (Fin n)),\n    ContinuousOn f N \u2227 DifferentiableOn \u211d f (segment \u211d X\u2081 X\u2082) \u2192\n      \u2203 X_c \u2208 segment \u211d X\u2081 X\u2082, f X\u2082 - f X\u2081 = (fderiv \u211d f X_c) (X\u2082 - X\u2081))\n  (\u03b4 : \u211d)\n  (l3 : \u03b4 > 0)\n  (X Y : EuclideanSpace \u211d (Fin n))\n  (hXY : X \u2208 Metric.ball X\u2080 \u03b4 \u2227 Y \u2208 Metric.ball X\u2080 \u03b4) :\n  \u2200 i : Fin m, \u2203 X_i \u2208 segment \u211d X Y, (F X i) - (F Y i) = \u2211 j : Fin n, (fderiv \u211d (fun x => F x i) X_i) (Pi.single j 1) * (X j - Y j) \u2227 X_i \u2208 Metric.ball X\u2080 \u03b4 := by\n  intro i\n  have hN : N \u2208 nhds X\u2080 := tc_1.right\n  have h_diff : ContDiffOn \u211d 1 (fun x => F x i) N := \n    ContDiffOn.comp tc_1.left (contDiff_apply i) (by simp)\n  have h_diff' : DifferentiableOn \u211d (fun x => F x i) (Metric.ball X\u2080 \u03b4) := \n    DifferentiableOn.mono (ContDiffOn.differentiableOn h_diff (by norm_num)) (Metric.ball_subset_of_mem_nhds hN)\n  have h_cont : ContinuousOn (fun x => F x i) (Metric.ball X\u2080 \u03b4) := \n    ContinuousOn.mono (ContDiffOn.continuousOn h_diff) (Metric.ball_subset_of_mem_nhds hN)\n  have h_seg : segment \u211d X Y \u2286 Metric.ball X\u2080 \u03b4 := \n    Convex.segment_subset (convex_ball X\u2080 \u03b4) hXY.left hXY.right\n  obtain \u27e8X_i, hX_i, h\u27e9 := def_1 (fun x => F x i) X Y \u27e8h_cont, h_diff'\u27e9\n  refine \u27e8X_i, hX_i, ?_, Convex.segment_subset (convex_ball X\u2080 \u03b4) hXY.left hXY.right hX_i\u27e9\n  rw [\u2190 neg_eq_iff_eq_neg, \u2190 h.2.2]\n  simp only [ContinuousLinearMap.map_sub, Pi.sub_apply, sub_eq_add_neg, neg_add]\n  rw [\u2190 ContinuousLinearMap.map_neg]\n  simp only [neg_sub]\n  rw [ContinuousLinearMap.map_sum]\n  simp only [Pi.single, ContinuousLinearMap.map_smul, smul_eq_mul]\n  rfl", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 22, "column": 46, "endLine": 22, "endColumn": 47, "data": "application type mismatch\n  @contDiff_apply i\nargument\n  i\nhas type\n  Fin m : Type\nbut is expected to have type\n  Type ?u.9584 : Type (?u.9584 + 1)"}, {"line": 22, "column": 53, "endLine": 22, "endColumn": 57, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "From \\eqref{eq:6.2.10}, \\eqref{eq:6.2.11}, and Schwarz's inequality,\n$$\n(g_i(\\mathbf{X})-g_i(\\mathbf{Y}))^2\\le\\left(\\sum_{j=1}^n\\left[\\frac{\\partial\ng_i\n(\\mathbf{X}_i)}{\\partial x_j}\\right]^2\\right)\n|\\mathbf{X}-\\mathbf{Y}|^2\n<\\frac{\\epsilon^2}{ m} |\\mathbf{X}-\\mathbf{Y}|^2.\n$$", "statement": "We assume:\n\u2022 There exists $\\delta > 0$ s.t. for $|\\mathbf{Z}-\\mathbf{X}_0|<\\delta$, $|\\frac{\\partial g_i(\\mathbf{Z})}{\\partial x_j}| < \\frac{\\epsilon}{\\sqrt{mn}}$ [l3].\n\u2022 For $\\mathbf{X}, \\mathbf{Y} \\in B_\\delta(\\mathbf{X}_0)$, $g_i(\\mathbf{X})-g_i(\\mathbf{Y})=\\sum_{j=1}^n \\frac{\\partial g_i(\\mathbf{X}_i)}{\\partial x_j}(x_j-y_j)$ with $\\mathbf{X}_i \\in B_\\delta(\\mathbf{X}_0)$ [l4].\nTherefore, we conclude:\n\u2022 For $\\mathbf{X}, \\mathbf{Y} \\in B_\\delta(\\mathbf{X}_0)$, we have $(g_i(\\mathbf{X})-g_i(\\mathbf{Y}))^2 < \\frac{\\epsilon^2}{m} |\\mathbf{X}-\\mathbf{Y}|^2$ [l5].", "dependencies": ["l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  {n m : \u2115} {\u03b1 : Type*} [NormedAddCommGroup \u03b1] [InnerProductSpace \u211d \u03b1]\n  (g : Fin m \u2192 \u03b1 \u2192 \u211d) (\u2202g : Fin m \u2192 Fin n \u2192 \u03b1 \u2192 \u211d) (X_0 : \u03b1) (\u03b5 : \u211d) (\u03b4 : \u211d)\n  (l3 : \u2203 (delta_l3 : \u211d), delta_l3 > 0 \u2227 (\u2200 (Z : \u03b1), \u2016Z - X_0\u2016 < delta_l3 \u2192 \u2200 (i : Fin m) (j : Fin n), \u2016\u2202g i j Z\u2016 < \u03b5 / sqrt (m * n : \u211d)))\n  (l4 : \u2200 (X Y : \u03b1), X \u2208 Metric.ball X_0 \u03b4 \u2192 Y \u2208 Metric.ball X_0 \u03b4 \u2192 \u2200 (i : Fin m), \u2203 (Xi : \u03b1), Xi \u2208 Metric.ball X_0 \u03b4 \u2227 g i X - g i Y = (\u2211 j : Fin n, \u2202g i j Xi * (X.coeff j - Y.coeff j))) :\n  \u2200 (X Y : \u03b1), X \u2208 Metric.ball X_0 \u03b4 \u2192 Y \u2208 Metric.ball X_0 \u03b4 \u2192 \u2200 (i : Fin m), (g i X - g i Y)^2 < \u03b5^2 / m * \u2016X - Y\u2016^2 := by\nsorry", "lean_pass": false, "error_msg": [{"line": 7, "column": 23, "endLine": 7, "endColumn": 24, "data": "unexpected token '\u2202'; expected '_' or identifier"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  {n m : \u2115} {\u03b1 : Type*} [NormedAddCommGroup \u03b1] [InnerProductSpace \u211d \u03b1]\n  (g : Fin m \u2192 \u03b1 \u2192 \u211d) (d_g : Fin m \u2192 Fin n \u2192 \u03b1 \u2192 \u211d) (X_0 : \u03b1) (\u03b5 : \u211d) (\u03b4 : \u211d)\n  (l3 : \u2203 (delta_l3 : \u211d), delta_l3 > 0 \u2227 (\u2200 (Z : \u03b1), \u2016Z - X_0\u2016 < delta_l3 \u2192 \u2200 (i : Fin m) (j : Fin n), \u2016d_g i j Z\u2016 < \u03b5 / Real.sqrt (m * n)))\n  (l4 : \u2200 (X Y : \u03b1), X \u2208 Metric.ball X_0 \u03b4 \u2192 Y \u2208 Metric.ball X_0 \u03b4 \u2192 \u2200 (i : Fin m), \u2203 (Xi : \u03b1), Xi \u2208 Metric.ball X_0 \u03b4 \u2227 g i X - g i Y = \u2211 j : Fin n, d_g i j Xi * (inner (X - Y) ((Pi.basisFun \u211d (Fin n)) j))) :\n  \u2200 (X Y : \u03b1), X \u2208 Metric.ball X_0 \u03b4 \u2192 Y \u2208 Metric.ball X_0 \u03b4 \u2192 \u2200 (i : Fin m), (g i X - g i Y)^2 < \u03b5^2 / m * \u2016X - Y\u2016^2 := by\n  obtain \u27e8\u03b4', h\u03b4', h\u27e9 := l3\n  intro X Y hX hY i\n  obtain \u27e8Xi, hXi, h_eq\u27e9 := l4 X Y hX hY i\n  have h_bound : \u2200 j : Fin n, \u2016d_g i j Xi\u2016 < \u03b5 / Real.sqrt (m * n) := by\n    intro j\n    apply h Xi\n    exact hXi\n  rw [h_eq]\n  simp_rw [\u2190 mul_assoc]\n  rw [norm_sq_eq_inner (X - Y)]\n  simp_rw [inner_sum]\n  rw [\u2190 Finset.sum_mul]\n  have : (\u2211 j : Fin n, d_g i j Xi * inner (X - Y) ((Pi.basisFun \u211d (Fin n)) j)) ^ 2 \u2264 (\u2211 j : Fin n, (d_g i j Xi) ^ 2) * (\u2211 j : Fin n, (inner (X - Y) ((Pi.basisFun \u211d (Fin n)) j)) ^ 2) := by\n    apply norm_sq_le_norm_sq_of_inner_le_norm\n    intro j\n    exact le_of_lt (h_bound j)\n  have h_sum : (\u2211 j : Fin n, (d_g i j Xi) ^ 2) < (\u03b5^2 / m) := by\n    simp_rw [sq_abs]\n    rw [\u2190 Finset.sum_div]\n    apply Finset.sum_lt_sum_of_nonneg (fun j _ => sq_nonneg _) (fun j _ => by rw [sq_abs]; exact (h_bound j).le)\n    simp [div_lt_div_right (by positivity), Finset.card_fin]\n  have h_norm : (\u2211 j : Fin n, (inner (X - Y) ((Pi.basisFun \u211d (Fin n)) j)) ^ 2) = \u2016X - Y\u2016^2 := by\n    rw [\u2190 norm_sq_eq_inner]\n    simp [norm_sq_eq_sum_abs_sq]\n  linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 9, "column": 178, "endLine": 9, "endColumn": 205, "data": "application type mismatch\n  inner (X - Y) ((Pi.basisFun \u211d (Fin n)) j)\nargument\n  (Pi.basisFun \u211d (Fin n)) j\nhas type\n  Fin n \u2192 \u211d : Type\nbut is expected to have type\n  \u03b1 : Type u_1"}, {"line": 17, "column": 4, "endLine": 17, "endColumn": 13, "data": "type mismatch\n  hXi\nhas type\n  Xi \u2208 Metric.ball X_0 \u03b4 : Prop\nbut is expected to have type\n  \u2016Xi - X_0\u2016 < \u03b4' : Prop"}, {"line": 19, "column": 11, "endLine": 19, "endColumn": 22, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "Summing this from $i=1$ to $i=m$ and taking square roots yields\n\\begin{equation}\n|\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})|<\\epsilon\n|\\mathbf{X}-\\mathbf{Y}|\n\\mbox{\\quad if\\quad}\\mathbf{X}, \\mathbf{Y}\\in B_\\delta(\\mathbf{X}_0).\n\\end{equation}", "statement": "We assume:\n\u2022 For $\\mathbf{X}, \\mathbf{Y} \\in B_\\delta(\\mathbf{X}_0)$, $(g_i(\\mathbf{X})-g_i(\\mathbf{Y}))^2 < \\frac{\\epsilon^2}{m} |\\mathbf{X}-\\mathbf{Y}|^2$ for each component $i=1,\\dots,m$ [l5].\nTherefore, we conclude:\n\u2022 If $\\mathbf{X}, \\mathbf{Y}\\in B_\\delta(\\mathbf{X}_0)$, then $|\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})| < \\epsilon |\\mathbf{X}-\\mathbf{Y}|$ [l6].", "dependencies": ["l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  {n m : \u2115} {E : Type*} [NormedAddCommGroup E] [InnerProductSpace \u211d E]\n  (g : Fin m \u2192 E \u2192 \u211d) (G : E \u2192 E) (X X0 Y : E) (delta epsilon : \u211d)\n  (hdelta : 0 < delta)\n  (h_epsilon : 0 < epsilon)\n  (l5 : \u2200 (X Y : E), X \u2208 Metric.ball X0 delta \u2192 Y \u2208 Metric.ball X0 delta \u2192\n    (\u2200 i : Fin m, (g i X - g i Y)^2 < (epsilon^2 / m) * (dist X Y)^2)) :\n  (X \u2208 Metric.ball X0 delta \u2227 Y \u2208 Metric.ball X0 delta) \u2192 dist (G X) (G Y) < epsilon * dist X Y := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  {n m : \u2115} {E : Type*} [NormedAddCommGroup E] [InnerProductSpace \u211d E]\n  (g : Fin m \u2192 E \u2192 \u211d) (G : E \u2192 E) (X X0 Y : E) (delta epsilon : \u211d)\n  (hdelta : 0 < delta)\n  (h_epsilon : 0 < epsilon)\n  (hG : \u2200 X, G X = \u2211 i, g i X \u2022 (Basis.ofVectorSpace \u211d E).i)\n  (l5 : \u2200 (X Y : E), X \u2208 Metric.ball X0 delta \u2192 Y \u2208 Metric.ball X0 delta \u2192\n    \u2200 i : Fin m, (g i X - g i Y)^2 < (epsilon^2 / m) * (dist X Y)^2) :\n  (X \u2208 Metric.ball X0 delta \u2227 Y \u2208 Metric.ball X0 delta) \u2192 dist (G X) (G Y) < epsilon * dist X Y := by\n  intro \u27e8hX, hY\u27e9\n  simp_rw [hG, dist_eq_norm, \u2190 sub_sum]\n  rw [\u2190 norm_smul]\n  simp_rw [sub_smul]\n  have : \u2016\u2211 i, (g i X - g i Y) \u2022 (Basis.ofVectorSpace \u211d E).i\u2016 ^ 2 \u2264 \u2211 i, \u2016(g i X - g i Y) \u2022 (Basis.ofVectorSpace \u211d E).i\u2016 ^ 2 :=\n    by apply norm_sum_le_of_le\n  simp_rw [norm_smul, Basis.coe_ofVectorSpace, IsROrC.norm_eq_abs, Real.norm_eq_abs]\n  have h\u2081 : \u2200 i, |g i X - g i Y| ^ 2 < (epsilon^2 / m) * (dist X Y)^2 := by\n    intro i\n    specialize l5 X Y hX hY i\n    exact Real.sqrt_lt'.mp l5\n  have h\u2082 : \u2211 i, |g i X - g i Y| ^ 2 < \u2211 i, (epsilon^2 / m) * (dist X Y)^2 := by\n    apply sum_lt_sum_of_nonneg (fun i _ => by positivity) h\u2081\n  simp_rw [mul_sum] at h\u2082\n  rw [\u2190 div_mul_eq_mul_div, div_self, one_mul] at h\u2082\n  \u00b7 norm_cast at h\u2082\n    rw [\u2190 Real.sqrt_lt_sqrt_iff (by positivity) (by positivity), Real.sqrt_mul (by positivity), Real.sqrt_sq (by positivity)] at h\u2082\n    exact h\u2082\n  \u00b7 exact Nat.cast_ne_zero.mpr (m.ne_zero)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 32, "endLine": 10, "endColumn": 59, "data": "invalid field 'i', the environment does not contain 'Basis.i'\n  Basis.ofVectorSpace \u211d E\nhas type\n  Basis \u2191(Basis.ofVectorSpaceIndex \u211d E) \u211d E"}, {"line": 15, "column": 31, "endLine": 15, "endColumn": 38, "data": "unknown identifier 'sub_sum'"}, {"line": 15, "column": 29, "endLine": 15, "endColumn": 38, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Mathematical objects and types are correctly represented with appropriate type classes for normed vector spaces", "Ball membership conditions are properly translated using Metric.ball with correct logical structure", "Component-wise inequality l5 accurately captures the mathematical constraint with proper indexing over Fin m", "Main conclusion l6 correctly expresses the Lipschitz condition using distance functions", "Logical structure properly represents the implication from assumption l5 to conclusion l6", "Additional positivity constraints for delta and epsilon are mathematically reasonable and don't contradict the natural language", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l6\n  {n m : \u2115} {E : Type*} [NormedAddCommGroup E] [NormedSpace \u211d E] [CompleteSpace E]\n  (g : Fin m \u2192 E \u2192 \u211d) (G : E \u2192 E) (X0 : E) (delta epsilon : \u211d)\n  (hdelta : 0 < delta)\n  (h_epsilon : 0 < epsilon)\n  (l5 : \u2200 (X Y : E), X \u2208 Metric.ball X0 delta \u2192 Y \u2208 Metric.ball X0 delta \u2192\n    (\u2200 i : Fin m, (g i X - g i Y)^2 < (epsilon^2 / m) * (dist X Y)^2)) :\n  \u2203 (X Y : E), (X \u2208 Metric.ball X0 delta \u2227 Y \u2208 Metric.ball X0 delta) \u2227 \u00ac (dist (G X) (G Y) < epsilon * dist X Y) := by\n  obtain \u27e8v, hv\u27e9 : \u2203 v : E, \u2016v\u2016 = 1 := by\n    let v := (1 : \u211d) \u2022 (1 : E)\n    simp [norm_smul, norm_one]\n    exact \u27e8v, by simp\u27e9\n  let X := X0\n  let Y := X0 + (delta / 2) \u2022 v\n  have hX : X \u2208 Metric.ball X0 delta := by simp [hdelta]\n  have hY : Y \u2208 Metric.ball X0 delta := by\n    simp [dist_eq_norm, Y]\n    rw [norm_smul, hv, mul_one]\n    apply (mul_lt_iff_lt_one_left hdelta).mpr\n    field_simp [hdelta]\n    exact half_lt_self hdelta\n  refine \u27e8X, Y, \u27e8hX, hY\u27e9, ?_\u27e9\n  intro h\n  have : dist (G X) (G Y) < epsilon * (dist X Y) := h\n  have : dist X Y = delta / 2 := by\n    simp [dist_eq_norm, Y]\n    rw [norm_smul, hv, mul_one]\n    field_simp [hdelta]\n  have : 0 < delta := hdelta\n  linarith [h_epsilon]"}, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "To complete the proof, we note that\n\\begin{equation}\n\\mathbf{F}(\\mathbf{X})-\\mathbf{F}(\\mathbf{Y})=\n\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})+\\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X}-\\mathbf{Y}),\n\\end{equation}", "statement": "We assume:\n\u2022 $\\mathbf{G}(\\mathbf{X})=\\mathbf{F}(\\mathbf{X})-\\mathbf{F}'(\\mathbf{X}_0)\\mathbf{X}$ [def_2].\nTherefore, we conclude:\n\u2022 $\\mathbf{F}(\\mathbf{X})-\\mathbf{F}(\\mathbf{Y}) = (\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})) + \\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X}-\\mathbf{Y})$ [l7].", "dependencies": ["def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (D_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m))\n  (G : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (def_2 : \u2200 X, G X = F X - D_F_X\u2080 X)\n  (X Y : EuclideanSpace \u211d (Fin n)) :\n  F X - F Y = (G X - G Y) + D_F_X\u2080 (X - Y) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (D_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m))\n  (G : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (def_2 : \u2200 X, G X = F X - D_F_X\u2080 X)\n  (X Y : EuclideanSpace \u211d (Fin n)) :\n  F X - F Y = (G X - G Y) + D_F_X\u2080 (X - Y) := by\n  simp_rw [def_2]\n  simp only [sub_left_inj, ContinuousLinearMap.map_sub]\n  abel", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical content from the natural language. The definition G(X) = F(X) - F'(X\u2080)X is properly represented as def_2, and the conclusion F(X) - F(Y) = (G(X) - G(Y)) + F'(X\u2080)(X - Y) is accurately formalized as lemma l7. The use of D_F_X\u2080 for the derivative F'(X\u2080) and the explicit Euclidean space types are appropriate mathematical representations that enhance precision without changing the logical meaning. The algebraic relationships and logical flow are preserved exactly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "so \\eqref{eq:6.2.12} and the triangle inequality imply \\eqref{eq:6.2.8}.", "statement": "We assume:\n\u2022 $\\mathbf{F}:\\R^n\\to\\R^m$ is a function with Jacobian matrix $\\mathbf{F}'$ [tc_1].\n\u2022 If $\\mathbf{X}, \\mathbf{Y}\\in B_\\delta(\\mathbf{X}_0)$, then $|\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})| < \\epsilon |\\mathbf{X}-\\mathbf{Y}|$ [l6].\n\u2022 $\\mathbf{F}(\\mathbf{X})-\\mathbf{F}(\\mathbf{Y}) = (\\mathbf{G}(\\mathbf{X})-\\mathbf{G}(\\mathbf{Y})) + \\mathbf{F}'(\\mathbf{X}_0)(\\mathbf{X}-\\mathbf{Y})$ [l7].\nTherefore, we conclude:\n\u2022 For $\\mathbf{X}, \\mathbf{Y}\\in B_\\delta(\\mathbf{X}_0)$, we have $|\\mathbf{F}(\\mathbf{X})-\\mathbf{F}(\\mathbf{Y})| < (\\|\\mathbf{F}'(\\mathbf{X}_{0})\\| + \\epsilon) |\\mathbf{X}-\\mathbf{Y}|$ [ts_1].", "dependencies": ["tc_1", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (D_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m))\n  (G : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (delta epsilon : \u211d)\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080)\n  (l6 : \u2200 (X Y : EuclideanSpace \u211d (Fin n)), (X \u2208 Metric.ball X\u2080 delta \u2227 Y \u2208 Metric.ball X\u2080 delta) \u2192 dist (G X) (G Y) < epsilon * dist X Y)\n  (l7 : \u2200 (X Y : EuclideanSpace \u211d (Fin n)), F X - F Y = (G X - G Y) + D_F_X\u2080 (X - Y)) :\n  \u2200 (X Y : EuclideanSpace \u211d (Fin n)), (X \u2208 Metric.ball X\u2080 delta \u2227 Y \u2208 Metric.ball X\u2080 delta) \u2192 dist (F X) (F Y) < (\u2016D_F_X\u2080\u2016 + epsilon) * dist X Y := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n m : \u2115}\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (D_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m))\n  (G : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (delta epsilon : \u211d)\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080)\n  (l6 : \u2200 (X Y : EuclideanSpace \u211d (Fin n)), (X \u2208 Metric.ball X\u2080 delta \u2227 Y \u2208 Metric.ball X\u2080 delta) \u2192 dist (G X) (G Y) < epsilon * dist X Y)\n  (l7 : \u2200 (X Y : EuclideanSpace \u211d (Fin n)), F X - F Y = (G X - G Y) + D_F_X\u2080 (X - Y)) :\n  \u2200 (X Y : EuclideanSpace \u211d (Fin n)), (X \u2208 Metric.ball X\u2080 delta \u2227 Y \u2208 Metric.ball X\u2080 delta) \u2192 dist (F X) (F Y) < (\u2016D_F_X\u2080\u2016 + epsilon) * dist X Y := by\n  intro X Y hXY\n  rw [dist_eq_norm, dist_eq_norm, dist_eq_norm] at *\n  rw [l7 X Y]\n  simp only [norm_add, norm_sub]\n  apply lt_of_le_of_lt (add_le_add (ContinuousLinearMap.le_op_norm D_F_X\u2080 (X - Y)) (l6 X Y hXY))\n  rw [mul_add]\n  simp only [norm_sub]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 34, "endLine": 18, "endColumn": 46, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the current goal\nn m : \u2115\nF : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m)\nX\u2080 : EuclideanSpace \u211d (Fin n)\nN : Set (EuclideanSpace \u211d (Fin n))\nD_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m)\nG : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m)\ndelta epsilon : \u211d\ntc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 \ud835\udcdd X\u2080\nl6 :\n  \u2200 (X Y : EuclideanSpace \u211d (Fin n)),\n    X \u2208 Metric.ball X\u2080 delta \u2227 Y \u2208 Metric.ball X\u2080 delta \u2192 Dist.dist (G X) (G Y) < epsilon * Dist.dist X Y\nl7 : \u2200 (X Y : EuclideanSpace \u211d (Fin n)), F X - F Y = G X - G Y + D_F_X\u2080 (X - Y)\nX Y : EuclideanSpace \u211d (Fin n)\nhXY : X \u2208 Metric.ball X\u2080 delta \u2227 Y \u2208 Metric.ball X\u2080 delta\n\u22a2 \u2016F X - F Y\u2016 < (\u2016D_F_X\u2080\u2016 + epsilon) * \u2016X - Y\u2016"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Function type and differentiability condition correctly formalized using EuclideanSpace and ContDiffOn", "Lipschitz condition for G properly translated using Metric.ball and dist functions", "Decomposition formula accurately represented with continuous linear map for Jacobian", "Conclusion correctly formalized with operator norm and distance functions", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_1\n  {n m : \u2115} [NeZero n]\n  (F : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (N : Set (EuclideanSpace \u211d (Fin n)))\n  (D_F_X\u2080 : EuclideanSpace \u211d (Fin n) \u2192L[\u211d] EuclideanSpace \u211d (Fin m))\n  (G : EuclideanSpace \u211d (Fin n) \u2192 EuclideanSpace \u211d (Fin m))\n  (delta epsilon : \u211d)\n  (tc_1 : ContDiffOn \u211d 1 F N \u2227 N \u2208 nhds X\u2080)\n  (l6 : \u2200 (X Y : EuclideanSpace \u211d (Fin n)), (X \u2208 Metric.ball X\u2080 delta \u2227 Y \u2208 Metric.ball X\u2080 delta) \u2192 dist (G X) (G Y) < epsilon * dist X Y)\n  (l7 : \u2200 (X Y : EuclideanSpace \u211d (Fin n)), F X - F Y = (G X - G Y) + D_F_X\u2080 (X - Y))\n  (delta_pos : delta > 0) :\n  \u2203 (X Y : EuclideanSpace \u211d (Fin n)), (X \u2208 Metric.ball X\u2080 delta \u2227 Y \u2208 Metric.ball X\u2080 delta) \u2227 dist (F X) (F Y) \u2265 (\u2016D_F_X\u2080\u2016 + epsilon) * dist X Y := by\n  let X := X\u2080\n  let i : Fin n := 0\n  let Y := X\u2080 + (min (delta / 2) 1) \u2022 (EuclideanSpace.single i 1)\n  have hX : X \u2208 Metric.ball X\u2080 delta := by simp [Metric.mem_ball, dist_self, delta_pos]\n  have hY : Y \u2208 Metric.ball X\u2080 delta := by\n    simp [Metric.mem_ball, dist_eq_norm, norm_smul, EuclideanSpace.norm_single, mul_one]\n    apply lt_of_le_of_lt (min_le_left _ _)\n    rw [div_lt_iff delta_pos]\n    exact lt_mul_of_one_lt_right delta_pos (by norm_num)\n  have hdist : dist X Y = min (delta / 2) 1 := by\n    simp [dist_eq_norm, norm_smul, EuclideanSpace.norm_single, mul_one]\n  refine \u27e8X, Y, \u27e8hX, hY\u27e9, ?_\u27e9\n  rw [dist_eq_norm, dist_eq_norm, l7 X Y, norm_add_comm]\n  have hG : \u2016G X - G Y\u2016 < epsilon * min (delta / 2) 1 := by\n    apply l6 X Y \u27e8hX, hY\u27e9\n  have hD : \u2016D_F_X\u2080 (X - Y)\u2016 = \u2016D_F_X\u2080\u2016 * min (delta / 2) 1 := by\n    simp [norm_smul, ContinuousLinearMap.norm_def]\n  rw [hdist]\n  linarith [hG, hD]"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    