
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z$ be a complex number. If $|z| = 2$, $\frac{z}{\bar{z}} = -\frac{1}{2} + i\frac{\sqrt{3}}{2}$, and $\operatorname{Re}(z) > 0$, then $z^3 = -8$.

Proof: From the condition $|z|=2$, we compute the product of $z$ and its conjugate as $z\bar{z} = |z|^2 = 4$. We then multiply this result by the second condition, $\frac{z}{\bar{z}} = -\frac{1}{2} + i\frac{\sqrt{3}}{2}$, to find $z^2$: $z^2 = (z\bar{z}) \cdot (\frac{z}{\bar{z}}) = 4(-\frac{1}{2} + i\frac{\sqrt{3}}{2}) = -2 + 2i\sqrt{3}$. The two square roots of $-2 + 2i\sqrt{3}$ are $1+i\sqrt{3}$ and $-1-i\sqrt{3}$, so these are the possible values for $z$. From the condition $\operatorname{Re}(z) > 0$, we select the solution with a positive real part, which is $z = 1+i\sqrt{3}$. Finally, we compute $z^3$ using the previously found values for $z$ and $z^2$: $z^3 = z \cdot z^2 = (1+i\sqrt{3})(-2+2i\sqrt{3}) = -8$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z$ be a complex number. If $|z| = 2$", "statement": "Premise:\n\u2022 $z$ is a complex number and $|z| = 2$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (tc_1 : Complex.abs z = 2)", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean type declaration (z : \u2102) perfectly captures that z is a complex number", "The Lean condition Complex.abs z = 2 perfectly represents the mathematical statement |z| = 2"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "$\frac{z}{\bar{z}} = -\frac{1}{2} + i\frac{\\sqrt{3}}{2}$", "statement": "Premise:\n\u2022 $z$ is a complex number and $\frac{z}{\bar{z}} = -\frac{1}{2} + i\frac{\\sqrt{3}}{2}$ [tc_2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102)\n(tc_2 : z / conj z = (-1 / 2 : \u2102) + (\u2191(Real.sqrt 3) / 2 : \u2102) * I)", "lean_pass": false, "error_msg": [{"line": 6, "column": 12, "endLine": 6, "endColumn": 18, "data": "function expected at\n  conj\nterm has type\n  ?m.9"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "$\\operatorname{Re}(z) > 0$", "statement": "Premise:\n\u2022 $z$ is a complex number and $\\operatorname{Re}(z) > 0$ [tc_3].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102)\n(tc_3 : z.re > 0)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'z : \u2102' perfectly captures that z is a complex number", "The Lean condition 'z.re > 0' perfectly matches the mathematical condition Re(z) > 0, where z.re is the standard way to access the real part of a complex number in Lean"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "From the condition $|z|=2$, we compute the product of $z$ and its conjugate as $z\bar{z} = |z|^2 = 4$.", "statement": "We assume:\n\u2022 $z$ is a complex number and $|z| = 2$ [tc_1].\nTherefore, we conclude:\n\u2022 $z\bar{z} = 4$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102)\n  (tc_1 : Complex.abs z = 2) :\n  z * conj z = 4 := by\nsorry", "lean_pass": false, "error_msg": [{"line": 8, "column": 6, "endLine": 8, "endColumn": 12, "data": "function expected at\n  conj\nterm has type\n  ?m.108"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102)\n  (tc_1 : Complex.abs z = 2) :\n  z * conj z = 4 := by\n  rw [\u2190 Complex.normSq_eq_abs, tc_1]\n  simp [normSq]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 8, "column": 6, "endLine": 8, "endColumn": 12, "data": "function expected at\n  conj\nterm has type\n  ?m.108"}, {"line": 9, "column": 6, "endLine": 9, "endColumn": 29, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  Complex.abs ?x ^ 2\nx\u271d : Sort u_1\nconj : x\u271d\nz : \u2102\ntc_1 : Complex.abs z = 2\n\u22a2 z * sorry = 4"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "$z^2 = (z\bar{z}) \\cdot (\frac{z}{\bar{z}}) = 4(-\frac{1}{2} + i\frac{\\sqrt{3}}{2}) = -2 + 2i\\sqrt{3}$.", "statement": "We assume:\n\u2022 $z$ is a complex number and $|z| = 2$ [tc_1]\n\u2022 $z$ is a complex number and $\frac{z}{\bar{z}} = -\frac{1}{2} + i\frac{\\sqrt{3}}{2}$ [tc_2]\n\u2022 $z\bar{z} = 4$ [l1].\nTherefore, we conclude:\n\u2022 $z^2 = -2 + 2i\\sqrt{3}$ [l2].", "dependencies": ["tc_1", "tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z : \u2102)\n  (tc_1 : Complex.abs z = 2)\n  (tc_2 : z / conj z = (-1 / 2) + I * (sqrt 3 / 2))\n  (l1 : z * conj z = 4) :\n  z ^ 2 = -2 + 2 * I * sqrt 3 := by\nsorry", "lean_pass": false, "error_msg": [{"line": 8, "column": 14, "endLine": 8, "endColumn": 20, "data": "function expected at\n  conj\nterm has type\n  ?m.108"}, {"line": 8, "column": 39, "endLine": 8, "endColumn": 43, "data": "ambiguous, possible interpretations \n  Rat.sqrt 3 : \u211a\n  \n  Nat.sqrt 3 : \u2115\n  \n  \u221a3 : \u211d"}, {"line": 10, "column": 23, "endLine": 10, "endColumn": 27, "data": "ambiguous, possible interpretations \n  Rat.sqrt 3 : \u211a\n  \n  Nat.sqrt 3 : \u2115\n  \n  \u221a3 : \u211d"}, {"line": 9, "column": 12, "endLine": 9, "endColumn": 18, "data": "function expected at\n  conj\nterm has type\n  ?m.108"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma l2\n  (z : \u2102)\n  (tc_1 : abs z = 2)\n  (tc_2 : z / conj z = (-1 / 2) + I * (Real.sqrt 3 / 2))\n  (l1 : z * conj z = 4) :\n  z ^ 2 = -2 + 2 * I * Real.sqrt 3 := by\n  have h1 : conj z \u2260 0 := by\n    intro h\n    rw [h, mul_zero] at l1\n    exact zero_ne_four l1.symm\n  have h2 : z = conj z * ((-1 / 2) + I * (Real.sqrt 3 / 2)) := by\n    rwa [\u2190 mul_div_cancel z (conj z) h1, eq_comm] at tc_2\n  rw [h2, mul_pow]\n  simp only [conj_conj z]\n  rw [l1]\n  ring_nf\n  simp only [I_sq]\n  ring_nf", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 8, "column": 14, "endLine": 8, "endColumn": 20, "data": "function expected at\n  conj\nterm has type\n  ?m.434"}, {"line": 9, "column": 12, "endLine": 9, "endColumn": 18, "data": "function expected at\n  conj\nterm has type\n  ?m.434"}, {"line": 11, "column": 12, "endLine": 11, "endColumn": 18, "data": "function expected at\n  conj\nterm has type\n  x\u271d"}, {"line": 15, "column": 16, "endLine": 15, "endColumn": 22, "data": "function expected at\n  conj\nterm has type\n  x\u271d"}, {"line": 16, "column": 29, "endLine": 16, "endColumn": 35, "data": "function expected at\n  conj\nterm has type\n  x\u271d"}, {"line": 16, "column": 9, "endLine": 16, "endColumn": 39, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.3220\nx\u271d : Sort u_1\nconj : x\u271d\nz : \u2102\ntc_1 : Complex.abs z = 2\ntc_2 : z / sorry = -1 / 2 + I * (\u2191\u221a3 / 2)\nl1 : z * sorry = 4\nh1 : sorry \u2260 0\n\u22a2 z = sorry * (-1 / 2 + I * (\u2191\u221a3 / 2))"}, {"line": 18, "column": 2, "endLine": 18, "endColumn": 25, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "The two square roots of $-2 + 2i\\sqrt{3}$ are $1+i\\sqrt{3}$ and $-1-i\\sqrt{3}$, so these are the possible values for $z$.", "statement": "We assume:\n\u2022 $z$ is a complex number [from tc_1]\n\u2022 $z^2 = -2 + 2i\\sqrt{3}$ [l2].\nTherefore, we conclude:\n\u2022 $z = 1+i\\sqrt{3}$ or $z = -1-i\\sqrt{3}$ [l3].", "dependencies": ["tc_1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102)\n  (tc_1 : Complex.abs z = 2)\n  (l2 : z ^ 2 = -2 + 2 * I * Real.sqrt 3) :\n  z = 1 + I * Real.sqrt 3 \u2228 z = -1 - I * Real.sqrt 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102)\n  (tc_1 : Complex.abs z = 2)\n  (l2 : z ^ 2 = -2 + 2 * I * Real.sqrt 3) :\n  z = 1 + I * Real.sqrt 3 \u2228 z = -1 - I * Real.sqrt 3 := by\n  have h1 : (1 + I * Real.sqrt 3) ^ 2 = -2 + 2 * I * Real.sqrt 3 := by\n    simp [pow_two]\n    ring\n    rw [I_mul_I]\n    simp\n    ring\n  have h2 : (-1 - I * Real.sqrt 3) ^ 2 = -2 + 2 * I * Real.sqrt 3 := by\n    simp [pow_two]\n    ring\n    rw [I_mul_I]\n    simp\n    ring\n  rw [\u2190 h1, \u2190 h2] at l2\n  have h3 : z ^ 2 = (1 + I * Real.sqrt 3) ^ 2 \u2228 z ^ 2 = (-1 - I * Real.sqrt 3) ^ 2 := by\n    rw [l2]\n    exact eq_or_eq_of_sq_eq_sq _ _\n  cases h3 with\n  | inl h => left; exact eq_of_sq_eq_sq h tc_1\n  | inr h => right; exact eq_of_sq_eq_sq h tc_1", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 8, "endLine": 13, "endColumn": 15, "data": "unknown identifier 'I_mul_I'"}, {"line": 13, "column": 8, "endLine": 13, "endColumn": 15, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.4897\nI z : \u2102\ntc_1 : Complex.abs z = 2\nl2 : z ^ 2 = -2 + 2 * I * \u2191\u221a3\n\u22a2 1 + I * \u2191\u221a3 * 2 + I ^ 2 * \u2191\u221a3 ^ 2 = -2 + I * \u2191\u221a3 * 2"}, {"line": 19, "column": 8, "endLine": 19, "endColumn": 15, "data": "unknown identifier 'I_mul_I'"}, {"line": 19, "column": 8, "endLine": 19, "endColumn": 15, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.7586\nI z : \u2102\ntc_1 : Complex.abs z = 2\nl2 : z ^ 2 = -2 + 2 * I * \u2191\u221a3\nh1 : (1 + I * \u2191\u221a3) ^ 2 = -2 + 2 * I * \u2191\u221a3\n\u22a2 1 + I * \u2191\u221a3 * 2 + I ^ 2 * \u2191\u221a3 ^ 2 = -2 + I * \u2191\u221a3 * 2"}, {"line": 22, "column": 12, "endLine": 22, "endColumn": 16, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  -2 + 2 * I * \u2191\u221a3\nI z : \u2102\ntc_1 : Complex.abs z = 2\nl2 : z ^ 2 = (1 + I * \u2191\u221a3) ^ 2\nh1 : (1 + I * \u2191\u221a3) ^ 2 = -2 + 2 * I * \u2191\u221a3\nh2 : (-1 - I * \u2191\u221a3) ^ 2 = -2 + 2 * I * \u2191\u221a3\n\u22a2 z = 1 + I * \u2191\u221a3 \u2228 z = -1 - I * \u2191\u221a3"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declaration matches perfectly - both declare z as a complex number.", "The natural language references tc_1 as an assumption but doesn't specify its content, while Lean explicitly states tc_1 as the absolute value condition. However, this is an acceptable additional constraint that doesn't contradict the natural language.", "The equation z^2 = -2 + 2i\u221a3 is represented identically in both versions, with appropriate Lean syntax for complex numbers.", "The conclusion about the two possible values of z matches perfectly in both logical content and structure.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l3\n  (z : \u2102)\n  (tc_1 : Complex.abs z = 2)\n  (l2 : z ^ 2 = -2 + 2 * I * Real.sqrt 3) :\n  \u00ac (z = 1 + I * Real.sqrt 3 \u2228 z = -1 - I * Real.sqrt 3) := by\n  intro h\n  cases h with\n  | inl h1 => \n    have : (1 + I * Real.sqrt 3) ^ 2 = -2 + 2 * I * Real.sqrt 3 := by rw [\u2190 l2, h1]\n    simp at this\n    norm_num at this\n    have : Real.sqrt 3 * Real.sqrt 3 = 3 := Real.mul_self_sqrt (by norm_num)\n    simp [this] at this\n    ring_nf at this\n    simp at this\n  | inr h2 => \n    have : (-1 - I * Real.sqrt 3) ^ 2 = -2 + 2 * I * Real.sqrt 3 := by rw [\u2190 l2, h2]\n    simp at this\n    norm_num at this\n    have : Real.sqrt 3 * Real.sqrt 3 = 3 := Real.mul_self_sqrt (by norm_num)\n    simp [this] at this\n    ring_nf at this\n    simp at this"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "From the condition $\\operatorname{Re}(z) > 0$, we select the solution with a positive real part, which is $z = 1+i\\sqrt{3}$.", "statement": "We assume:\n\u2022 $z$ is a complex number and $\\operatorname{Re}(z) > 0$ [tc_3]\n\u2022 $z = 1+i\\sqrt{3}$ or $z = -1-i\\sqrt{3}$ [l3].\nTherefore, we conclude:\n\u2022 $z = 1+i\\sqrt{3}$ [l4].", "dependencies": ["tc_3", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (z : \u2102)\n  (tc_3 : z.re > 0)\n  (l3 : z = 1 + I * Real.sqrt 3 \u2228 z = -1 - I * Real.sqrt 3) :\n  z = 1 + I * Real.sqrt 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (z : \u2102)\n  (tc_3 : z.re > 0)\n  (l3 : z = 1 + I * Real.sqrt 3 \u2228 z = -1 - I * Real.sqrt 3) :\n  z = 1 + I * Real.sqrt 3 := by\n  cases l3 with\n  | inl h => exact h\n  | inr h =>\n    rw [h] at tc_3\n    simp at tc_3\n    linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 4, "endLine": 15, "endColumn": 12, "data": "linarith failed to find a contradiction\ncase inr\nI z : \u2102\nh : z = -1 - I * \u2191\u221a3\ntc_3 : I.re * \u221a3 < -1\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declaration correctly captures z as a complex number", "Real part constraint is accurately formalized using z.re > 0", "Disjunctive constraint properly represents the 'or' condition with equivalent mathematical expressions", "Conclusion correctly states the final equality to be proven", "Overall logical structure perfectly mirrors the natural language reasoning from assumptions to conclusion", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l4\n  (z : \u2102)\n  (tc_3 : z.re > 0)\n  (l3 : z = 1 + I * Real.sqrt 3 \u2228 z = -1 - I * Real.sqrt 3) :\n  \u00ac (z = 1 + I * Real.sqrt 3) := by\n  intro h\n  rw [h] at tc_3\n  simp only [Complex.add_re, Complex.ofReal_re, Complex.I_re, zero_mul, add_zero, Complex.ofReal_im] at tc_3\n  cases l3 with\n  | inl h1 => \n    rw [h1] at tc_3\n    simp only [Complex.add_re, Complex.ofReal_re, Complex.I_re, zero_mul, add_zero, Complex.ofReal_im] at tc_3\n    linarith\n  | inr h2 => \n    rw [h2] at tc_3\n    simp only [Complex.add_re, Complex.ofReal_re, Complex.I_re, zero_mul, add_zero, Complex.ofReal_im, neg_re] at tc_3\n    linarith"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Finally, we compute $z^3$ using the previously found values for $z$ and $z^2$: $z^3 = z \\cdot z^2 = (1+i\\sqrt{3})(-2+2i\\sqrt{3}) = -8$.", "statement": "We assume:\n\u2022 $z^2 = -2 + 2i\\sqrt{3}$ [l2]\n\u2022 $z = 1+i\\sqrt{3}$ [l4].\nTherefore, we conclude:\n\u2022 $z^3 = -8$ [ts_1].", "dependencies": ["l2", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102)\n  (l2 : z^2 = -2 + 2 * I * Real.sqrt 3)\n  (l4 : z = 1 + I * Real.sqrt 3) :\n  z^3 = -8 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102)\n  (l2 : z^2 = -2 + 2 * I * Real.sqrt 3)\n  (l4 : z = 1 + I * Real.sqrt 3) :\n  z^3 = -8 := by\n  rw [l4]\n  simp only [pow_succ, mul_eq_mul_left_iff]\n  rw [mul_add, add_mul, add_mul, mul_assoc, mul_assoc]\n  simp only [I_mul_I, one_mul, mul_one]\n  rw [\u2190 mul_assoc, I_mul_I]\n  simp only [neg_one_mul, neg_mul, one_mul]\n  rw [Real.sq_sqrt, mul_assoc, \u2190 mul_add]\n  norm_num\n  exact zero_add (-8)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 15, "endLine": 12, "endColumn": 22, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  (?a + ?b) * ?c\nI z : \u2102\nl2 : z ^ 2 = -2 + 2 * I * \u2191\u221a3\nl4 : z = 1 + I * \u2191\u221a3\n\u22a2 (1 + I * \u2191\u221a3) ^ 0 * (1 + I * \u2191\u221a3) * (1 + I * \u2191\u221a3) * 1 +\n      (1 + I * \u2191\u221a3) ^ 0 * (1 + I * \u2191\u221a3) * (1 + I * \u2191\u221a3) * (I * \u2191\u221a3) =\n    -8"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The variable z is properly typed as a complex number, both assumptions (z\u00b2 = -2 + 2i\u221a3 and z = 1 + i\u221a3) are accurately represented with appropriate Lean notation for complex numbers and square roots, and the conclusion z\u00b3 = -8 is exactly preserved. The logical structure as a theorem with premises and conclusion is maintained. Minor notational differences like using 'I' instead of 'i' and explicit multiplication are standard Lean conventions that don't affect the mathematical meaning.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_1\n  (z : \u2102)\n  (l2 : z^2 = -2 + 2 * I * Real.sqrt 3)\n  (l4 : z = 1 + I * Real.sqrt 3) :\n  \u00ac(z^3 = -8) := by\n  rw [l4]\n  simp only [one_mul]\n  rw [pow_three']\n  ring_nf\n  simp only [I_mul_I, neg_one_mul, add_left_inj, neg_inj]\n  rw [Real.sqrt_mul_self (by norm_num : 0 \u2264 3)]\n  norm_num"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    