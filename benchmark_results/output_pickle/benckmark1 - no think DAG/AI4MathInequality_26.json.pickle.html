
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for any triangle with side lengths $a, b, c$ and semi-perimeter $s$, the following inequality holds: $a^{2}(s-a) + b^{2}(s-a) + c^{2}(s-a) \\leq \\frac{3}{2} a b c$.

Proof: Let $E=a^{2}(s-a)+b^{2}(s-b)+c^{2}(s-c)$ with $s=	frac{a+b+c}{2}$. Substituting $s-a=	frac{b+c-a}{2}$ and similar expressions gives $2E=(a^{2}b+a^{2}c+b^{2}a+b^{2}c+c^{2}a+c^{2}b)-(a^{3}+b^{3}+c^{3})$. On the other hand, expanding $(b+c-a)(c+a-b)(a+b-c)$ yields the same expression but with an extra $-2abc$, so $2E=(b+c-a)(c+a-b)(a+b-c)+2abc$, hence $E=	frac{(b+c-a)(c+a-b)(a+b-c)}{2}+abc$. To prove $E\leq 	frac{3}{2}abc$ it suffices to show $(b+c-a)(c+a-b)(a+b-c)\leq abc$. Setting $a=	frac{y+z}{2},\;b=	frac{x+z}{2},\;c=	frac{x+y}{2}$ with $x,y,z>0$, this becomes $8xyz\leq (x+y)(y+z)(z+x)$. Expanding the right-hand side gives $2xyz+(x^{2}y+xy^{2}+y^{2}z+yz^{2}+z^{2}x+x^{2}z)$, so the inequality reduces to $6xyz\leq x^{2}y+xy^{2}+y^{2}z+yz^{2}+z^{2}x+x^{2}z$. Grouping terms shows the right-hand side equals $x(y^{2}+z^{2})+y(x^{2}+z^{2})+z(x^{2}+y^{2})$, which is at least $2yzx+2xzy+2xy z=6xyz$ by AMâ€“GM. Therefore the inequality holds, and we conclude $E\leq	frac{3}{2}abc$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for any triangle with side lengths $a, b, c$", "statement": "Premise:\n\u2022 $a, b, c$ are the side lengths of a triangle, which implies they are positive real numbers satisfying the triangle inequalities: $a+b>c$, $b+c>a$, and $c+a>b$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that a, b, c are side lengths of a triangle by declaring them as real numbers and imposing the triangle inequality conditions in tc_1", "The Lean condition '0 < a \u2227 0 < b \u2227 0 < c' perfectly matches the conclusion that a, b, c are positive real numbers", "The Lean condition 'a + b > c' exactly matches the mathematical statement", "The Lean condition 'b + c > a' exactly matches the mathematical statement", "The Lean condition 'c + a > b' exactly matches the mathematical statement"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "and semi-perimeter $s$", "statement": "Definition:\n\u2022 The semi-perimeter is defined as $s = \\frac{a+b+c}{2}$ [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n(def_1 : s = (a + b + c) / 2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization captures 'triangle with sides a, b, and c' through the triangle inequality conditions (a + b > c \u2227 b + c > a \u2227 c + a > b) and positive side lengths (0 < a \u2227 0 < b \u2227 0 < c). This is mathematically equivalent and more precise than the natural language statement.", "The semi-perimeter definition s = (a + b + c) / 2 is exactly the same in both the natural language and Lean formalization."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "def_2": {"id": "def_2", "natural_language": "Let $E=a^{2}(s-a)+b^{2}(s-b)+c^{2}(s-c)$", "statement": "Definition:\n\u2022 Let the expression E be defined as $E = a^{2}(s-a)+b^{2}(s-b)+c^{2}(s-c)$ [def_2].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n(def_1 : s = (a + b + c) / 2)\n(def_2 : E = a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization declares variables a, b, c as real numbers and implicitly includes s through def_1. The additional type information and constraints (tc_1, def_1) are extra details not contradicting the natural language statement.", "The Lean definition of E exactly matches the mathematical expression, with only notational differences (using * for multiplication instead of implicit multiplication)."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Substituting $s-a=\tfrac{b+c-a}{2}$ and similar expressions gives $2E=(a^{2}b+a^{2}c+b^{2}a+b^{2}c+c^{2}a+c^{2}b)-(a^{3}+b^{3}+c^{3})$.", "statement": "We assume:\n\u2022 The semi-perimeter is $s = \\frac{a+b+c}{2}$ [def_1]\n\u2022 The expression E is $E = a^{2}(s-a)+b^{2}(s-b)+c^{2}(s-c)$ [def_2]\nTherefore, we conclude:\n\u2022 $2E = (a^{2}b+a^{2}c+b^{2}a+b^{2}c+c^{2}a+c^{2}b)-(a^{3}+b^{3}+c^{3})$ [l1].", "dependencies": ["def_1", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c : \u211d)\n  (s E : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : s = (a + b + c) / 2)\n  (def_2 : E = a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c)) :\n  2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c : \u211d)\n  (s E : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : s = (a + b + c) / 2)\n  (def_2 : E = a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c)) :\n  2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) := by\n  rw [def_2, def_1]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly capture the real number types implied in the natural language", "Semi-perimeter definition def_1 is perfectly translated with equivalent mathematical meaning", "Expression E definition def_2 correctly captures the algebraic structure with explicit multiplication notation", "The conclusion statement l1 perfectly matches the mathematical equation with all terms corresponding exactly", "The triangle inequality constraints tc_1, while not mentioned in natural language, are mathematically reasonable additional conditions that don't contradict the stated premises"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "On the other hand, expanding $(b+c-a)(c+a-b)(a+b-c)$ yields the same expression but with an extra $-2abc$", "statement": "We assume:\n\u2022 $a,b,c$ are real numbers [tc_1].\nTherefore, we conclude:\n\u2022 $(b+c-a)(c+a-b)(a+b-c) = (a^{2}b+a^{2}c+b^{2}a+b^{2}c+c^{2}a+c^{2}b)-(a^{3}+b^{3}+c^{3}) - 2abc$ [l2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b) :\n  (b + c - a) * (c + a - b) * (a + b - c) = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c : \u211d) :\n  (b + c - a) * (c + a - b) * (a + b - c) = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c := by\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language states that a,b,c are simply real numbers, but the Lean formalization adds substantial constraints (positivity and triangle inequalities) that are not mentioned in the natural language. This changes the scope of the statement from a general algebraic identity to a geometric constraint.", "The mathematical equation is perfectly translated from natural language to Lean with identical structure and meaning."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language states that a,b,c are simply real numbers, but the Lean formalization adds substantial constraints (positivity and triangle inequalities) that are not mentioned in the natural language. This changes the scope of the statement from a general algebraic identity to a geometric constraint.', 'The mathematical equation is perfectly translated from natural language to Lean with identical structure and meaning.']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "so $2E=(b+c-a)(c+a-b)(a+b-c)+2abc$, hence $E=\tfrac{(b+c-a)(c+a-b)(a+b-c)}{2}+abc$.", "statement": "We assume:\n\u2022 $2E = (a^{2}b+a^{2}c+b^{2}a+b^{2}c+c^{2}a+c^{2}b)-(a^{3}+b^{3}+c^{3})$ [l1]\n\u2022 $(b+c-a)(c+a-b)(a+b-c) = (a^{2}b+a^{2}c+b^{2}a+b^{2}c+c^{2}a+c^{2}b)-(a^{3}+b^{3}+c^{3}) - 2abc$ [l2]\nTherefore, we conclude:\n\u2022 $E = \\frac{(b+c-a)(c+a-b)(a+b-c)}{2} + abc$ [l3].", "dependencies": ["l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c E : \u211d)\n  (l1 : 2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3))\n  (l2 : (b + c - a) * (c + a - b) * (a + b - c) = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c) :\n  E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c E : \u211d)\n  (l1 : 2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3))\n  (l2 : (b + c - a) * (c + a - b) * (a + b - c) = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c) :\n  E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c := by\n  rw [\u2190 l1, l2]\n  field_simp\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 6, "endLine": 10, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  a ^ 2 * b + a ^ 2 * c + b ^ 2 * a + b ^ 2 * c + c ^ 2 * a + c ^ 2 * b - (a ^ 3 + b ^ 3 + c ^ 3)\na b c E : \u211d\nl1 : 2 * E = a ^ 2 * b + a ^ 2 * c + b ^ 2 * a + b ^ 2 * c + c ^ 2 * a + c ^ 2 * b - (a ^ 3 + b ^ 3 + c ^ 3)\nl2 :\n  (b + c - a) * (c + a - b) * (a + b - c) =\n    a ^ 2 * b + a ^ 2 * c + b ^ 2 * a + b ^ 2 * c + c ^ 2 * a + c ^ 2 * b - (a ^ 3 + b ^ 3 + c ^ 3) - 2 * a * b * c\n\u22a2 E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations are correctly formalized as real numbers, matching the mathematical context", "The first assumption l1 is perfectly translated with correct mathematical notation and operator precedence", "The second assumption l2 accurately captures the complex algebraic equation with proper grouping and syntax", "The conclusion l3 is correctly stated as the theorem goal, maintaining the exact mathematical relationship", "The overall logical structure properly represents the mathematical reasoning from assumptions to conclusion", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l3\n  (a b c E : \u211d)\n  (l1 : 2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3))\n  (l2 : (b + c - a) * (c + a - b) * (a + b - c) = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c) :\n  \u00ac (E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c) := by\n  intro h\n  rw [h] at l1\n  rw [l2] at l1\n  ring_nf at l1\n  have : 2 * ((b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c) = \n         (b + c - a) * (c + a - b) * (a + b - c) + 2 * a * b * c := by ring\n  rw [this] at l1\n  have : (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) = \n         (b + c - a) * (c + a - b) * (a + b - c) + 2 * a * b * c := by\n    rw [\u2190 l2]\n    ring\n  rw [this] at l1\n  simp at l1"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "To prove $E\\leq \tfrac{3}{2}abc$ it suffices to show $(b+c-a)(c+a-b)(a+b-c)\\leq abc$.", "statement": "We assume:\n\u2022 $E = \\frac{(b+c-a)(c+a-b)(a+b-c)}{2} + abc$ [l3]\nTherefore, we conclude:\n\u2022 The inequality $E \\leq \\frac{3}{2}abc$ is equivalent to proving $(b+c-a)(c+a-b)(a+b-c) \\leq abc$ [l4].", "dependencies": ["l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c E : \u211d)\n  (l3 : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c) :\n  (E \u2264 (3 / 2) * a * b * c) \u2194 ((b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c E : \u211d)\n  (l3 : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c) :\n  (E \u2264 (3 / 2) * a * b * c) \u2194 ((b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c) := by\n  rw [l3]\n  constructor\n  \u00b7 intro h\n    field_simp at h\n    linarith\n  \u00b7 intro h\n    field_simp\n    linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical content from the natural language. The assumption about E's definition is properly encoded as hypothesis l3, and the conclusion about the equivalence of the two inequalities is accurately represented using the biconditional operator. The explicit type declarations for real numbers are a helpful addition that doesn't change the mathematical meaning. The logical structure properly reflects that the equivalence follows from the given definition of E."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_3": {"id": "def_3", "natural_language": "Setting $a=\tfrac{y+z}{2},\\;b=\tfrac{x+z}{2},\\;c=\tfrac{x+y}{2}$ with $x,y,z>0$", "statement": "Definition:\n\u2022 We introduce a change of variables (Ravi substitution). From the triangle side lengths $a,b,c$ [tc_1], let $x=b+c-a$, $y=c+a-b$, $z=a+b-c$. The triangle inequalities from [tc_1] imply $x,y,z > 0$. The inverse substitution is $a=\\frac{y+z}{2}, b=\\frac{x+z}{2}, c=\\frac{x+y}{2}$ [def_3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (x y z : \u211d)\n  (def_3 : x = b + c - a \u2227 y = c + a - b \u2227 z = a + b - c \u2227 a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly declares triangle side lengths a, b, c as real numbers, matching the natural language condition", "The Lean tc_1 perfectly captures the triangle inequalities mentioned in the natural language, including positivity and the three triangle inequality conditions", "The Lean def_3 includes the Ravi substitution formulas x = b + c - a, y = c + a - b, z = a + b - c exactly as stated in the natural language", "The natural language explicitly concludes that x, y, z > 0, but this conclusion is completely missing from the Lean formalization. The Lean code only declares x, y, z as variables but does not include the positivity conclusion", "The Lean def_3 includes the inverse substitution formulas a = (y + z) / 2, b = (x + z) / 2, c = (x + y) / 2 exactly as stated in the natural language conclusion"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly declares triangle side lengths a, b, c as real numbers, matching the natural language condition', 'The Lean tc_1 perfectly captures the triangle inequalities mentioned in the natural language, including positivity and the three triangle inequality conditions', 'The Lean def_3 includes the Ravi substitution formulas x = b + c - a, y = c + a - b, z = a + b - c exactly as stated in the natural language', 'The natural language explicitly concludes that x, y, z > 0, but this conclusion is completely missing from the Lean formalization. The Lean code only declares x, y, z as variables but does not include the positivity conclusion', 'The Lean def_3 includes the inverse substitution formulas a = (y + z) / 2, b = (x + z) / 2, c = (x + y) / 2 exactly as stated in the natural language conclusion']"}, "type": "definition"}, "l5": {"id": "l5", "natural_language": "this becomes $8xyz\\leq (x+y)(y+z)(z+x)$.", "statement": "We assume:\n\u2022 The inequality to be proven is $(b+c-a)(c+a-b)(a+b-c) \\leq abc$ [l4]\n\u2022 The Ravi substitution from [def_3]\nTherefore, we conclude:\n\u2022 The inequality from [l4] is equivalent to $8xyz \\leq (x+y)(y+z)(z+x)$ after applying the substitutions [l5].", "dependencies": ["l4", "def_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c x y z : \u211d)\n  (l4 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c)\n  (def_3 : x = b + c - a \u2227 y = c + a - b \u2227 z = a + b - c \u2227 a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2) :\n  (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c \u2194 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c x y z : \u211d)\n  (l4 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c)\n  (def_3 : x = b + c - a \u2227 y = c + a - b \u2227 z = a + b - c \u2227 a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2) :\n  (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c \u2194 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x) := by\n  have hx := def_3.left\n  have hy := def_3.right.left\n  have hz := def_3.right.right.left\n  have ha := def_3.right.right.right.left\n  have hb := def_3.right.right.right.right.left\n  have hc := def_3.right.right.right.right.right\n  rw [hx, hy, hz, ha, hb, hc]\n  simp only [add_sub_cancel_left, add_sub_cancel_right]\n  ring_nf\n  field_simp\n  ring_nf\n  rw [mul_assoc, mul_assoc, mul_assoc]\n  simp only [mul_le_mul_left (by norm_num : (0:\u211d) < 8)]\n  ring_nf", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 17, "column": 2, "endLine": 17, "endColumn": 55, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The inequality (b+c-a)(c+a-b)(a+b-c) \u2264 abc is correctly represented as hypothesis l4 in Lean", "The Ravi substitution is completely captured in def_3, including both forward and inverse transformations between variables", "The equivalence conclusion 8xyz \u2264 (x+y)(y+z)(z+x) is correctly stated as the goal of the lemma", "The logical structure properly translates the natural language flow from assumptions to conclusion as a formal lemma with hypotheses and goal", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5\n  (a b c x y z : \u211d)\n  (l4 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c)\n  (def_3 : x = b + c - a \u2227 y = c + a - b \u2227 z = a + b - c \u2227 a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2) :\n  \u00ac((b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c \u2194 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x)) := by\n  intro h\n  let x := (1 : \u211d)\n  let y := (1 : \u211d)\n  let z := (1 : \u211d)\n  have h1 : 8 * x * y * z = 8 := by norm_num\n  have h2 : (x + y) * (y + z) * (z + x) = 8 := by norm_num\n  have h3 : 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x) := by linarith\n  have a := (y + z) / 2\n  have b := (x + z) / 2\n  have c := (x + y) / 2\n  have h4 : (b + c - a) * (c + a - b) * (a + b - c) = 1 := by\n    simp [a, b, c]\n    norm_num\n  have h5 : a * b * c = 1 := by\n    simp [a, b, c]\n    norm_num\n  have h6 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by linarith\n  have h7 := h.mp h6\n  have h8 : \u00ac(8 * x * y * z \u2264 (x + y) * (y + z) * (z + x)) := by\n    intro h9\n    rw [h1, h2] at h9\n    linarith\n  exact h8 h7"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "Expanding the right-hand side gives $2xyz+(x^{2}y+xy^{2}+y^{2}z+yz^{2}+z^{2}x+x^{2}z)$", "statement": "We assume:\n\u2022 $x,y,z$ are positive real numbers from [def_3].\nTherefore, we conclude:\n\u2022 The algebraic identity $(x+y)(y+z)(z+x) = 2xyz + x^2y + xy^2 + y^2z + yz^2 + z^2x + zx^2$ holds [l6].", "dependencies": ["def_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (x y z : \u211d)\n  (def_3 : x = b + c - a \u2227 y = c + a - b \u2227 z = a + b - c \u2227 a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2) :\n  (x + y) * (y + z) * (z + x) = 2 * x * y * z + x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (x y z : \u211d)\n  (def_3 : x = b + c - a \u2227 y = c + a - b \u2227 z = a + b - c \u2227 a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2) :\n  (x + y) * (y + z) * (z + x) = 2 * x * y * z + x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2 := by\n  rcases def_3 with \u27e8hx, hy, hz, ha, hb, hc\u27e9\n  have a_eq : a = (y + z) / 2 := ha\n  have b_eq : b = (x + z) / 2 := hb\n  have c_eq : c = (x + y) / 2 := hc\n  rw [hx, hy, hz]\n  simp only [add_sub, sub_add_cancel]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The natural language states x,y,z are positive real numbers, but the Lean formalization only declares them as real numbers without positivity constraints.", "The def_3 reference in natural language is unspecified, while Lean provides explicit equations involving additional variables a,b,c. This is acceptable as extra detail.", "The algebraic identity is perfectly captured with identical mathematical structure in both versions.", "Missing positivity constraint for variables x,y,z in the Lean formalization, though the core mathematical relationship is preserved."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: ['The natural language states x,y,z are positive real numbers, but the Lean formalization only declares them as real numbers without positivity constraints.', 'The def_3 reference in natural language is unspecified, while Lean provides explicit equations involving additional variables a,b,c. This is acceptable as extra detail.', 'The algebraic identity is perfectly captured with identical mathematical structure in both versions.', 'Missing positivity constraint for variables x,y,z in the Lean formalization, though the core mathematical relationship is preserved.']"}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "so the inequality reduces to $6xyz\\leq x^{2}y+xy^{2}+y^{2}z+yz^{2}+z^{2}x+x^{2}z$.", "statement": "We assume:\n\u2022 The inequality to be proven is $8xyz \\leq (x+y)(y+z)(z+x)$ [l5]\n\u2022 The expansion of the right side is $(x+y)(y+z)(z+x) = 2xyz + x^2y + xy^2 + y^2z + yz^2 + z^2x + zx^2$ [l6]\nTherefore, we conclude:\n\u2022 The inequality from [l5] is equivalent to $6xyz \\leq x^2y + xy^2 + y^2z + yz^2 + z^2x + zx^2$ [l7].", "dependencies": ["l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (x y z : \u211d)\n  (l5 : 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x))\n  (l6 : (x + y) * (y + z) * (z + x) = 2 * x * y * z + x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2) :\n  6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (x y z : \u211d)\n  (l5 : 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x))\n  (l6 : (x + y) * (y + z) * (z + x) = 2 * x * y * z + x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2) :\n  6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2 := by\n  rw [\u2190sub_nonneg, \u2190sub_nonneg] at l5\n  rw [l6] at l5\n  simp only [sub_add_eq_sub_sub, add_sub_assoc] at l5\n  linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The inequality assumption l5 is correctly formalized with the exact same mathematical content and structure.", "The expansion equation l6 is accurately captured with all terms present and correctly ordered.", "The conclusion l7 is properly formalized as the goal to be proven with the correct inequality.", "The logical structure perfectly captures the deductive reasoning: given l5 and l6 as premises, prove l7 as conclusion. The mathematical relationship (algebraic manipulation to derive the equivalent inequality) is correctly represented."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "Grouping terms shows the right-hand side equals $x(y^{2}+z^{2})+y(x^{2}+z^{2})+z(x^{2}+y^{2})$, which is at least $2yzx+2xzy+2xy z=6xyz$ by AM\u2013GM.", "statement": "We assume:\n\u2022 $x, y, z$ are positive real numbers [def_3]\nTherefore, we conclude:\n\u2022 The inequality $x^2y + xy^2 + y^2z + yz^2 + z^2x + zx^2 \\geq 6xyz$ holds true [l8].", "dependencies": ["def_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (x y z : \u211d)\n  (def_3 : 0 < x \u2227 0 < y \u2227 0 < z) :\n  x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2 \u2265 6 * x * y * z := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (x y z : \u211d)\n  (def_3 : 0 < x \u2227 0 < y \u2227 0 < z) :\n  x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2 \u2265 6 * x * y * z := by\n  have hx := def_3.1\n  have hy := def_3.2.1\n  have hz := def_3.2.2\n  have h1 : x^2 * y + x * y^2 \u2265 2 * x * y * sqrt (x * y) := by\n    rw [\u2190mul_assoc, \u2190mul_assoc]\n    have := arith_mean_le_geom_mean (x^2 * y) (x * y^2) (by positivity) (by positivity)\n    simp [\u2190mul_assoc, \u2190pow_add] at this\n    linarith\n  have h2 : y^2 * z + y * z^2 \u2265 2 * y * z * sqrt (y * z) := by\n    rw [\u2190mul_assoc, \u2190mul_assoc]\n    have := arith_mean_le_geom_mean (y^2 * z) (y * z^2) (by positivity) (by positivity)\n    simp [\u2190mul_assoc, \u2190pow_add] at this\n    linarith\n  have h3 : z^2 * x + z * x^2 \u2265 2 * z * x * sqrt (z * x) := by\n    rw [\u2190mul_assoc, \u2190mul_assoc]\n    have := arith_mean_le_geom_mean (z^2 * x) (z * x^2) (by positivity) (by positivity)\n    simp [\u2190mul_assoc, \u2190pow_add] at this\n    linarith\n  have h4 : sqrt (x * y) + sqrt (y * z) + sqrt (z * x) \u2265 3 * (x * y * z)^(1/3) := by\n    have := arith_mean_le_geom_mean (sqrt (x * y)) (sqrt (y * z)) (sqrt_nonneg _) (sqrt_nonneg _)\n    have := arith_mean_le_geom_mean ((sqrt (x * y) + sqrt (y * z)) / 2) (sqrt (z * x))\n      (by apply div_nonneg <;> apply add_nonneg <;> apply sqrt_nonneg)\n      (sqrt_nonneg _)\n    simp [div_eq_mul_inv, \u2190mul_assoc, \u2190pow_add] at this\n    linarith\n  linarith [h1, h2, h3, h4]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 8, "endLine": 13, "endColumn": 18, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a * (?b * ?c)\nx y z : \u211d\ndef_3 : 0 < x \u2227 0 < y \u2227 0 < z\nhx : 0 < x\nhy : 0 < y\nhz : 0 < z\n\u22a2 x ^ 2 * y + x * y ^ 2 \u2265 2 * x * y * \u221a(x * y)"}, {"line": 18, "column": 8, "endLine": 18, "endColumn": 18, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a * (?b * ?c)\nx y z : \u211d\ndef_3 : 0 < x \u2227 0 < y \u2227 0 < z\nhx : 0 < x\nhy : 0 < y\nhz : 0 < z\nh1 : x ^ 2 * y + x * y ^ 2 \u2265 2 * x * y * \u221a(x * y)\n\u22a2 y ^ 2 * z + y * z ^ 2 \u2265 2 * y * z * \u221a(y * z)"}, {"line": 23, "column": 8, "endLine": 23, "endColumn": 18, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a * (?b * ?c)\nx y z : \u211d\ndef_3 : 0 < x \u2227 0 < y \u2227 0 < z\nhx : 0 < x\nhy : 0 < y\nhz : 0 < z\nh1 : x ^ 2 * y + x * y ^ 2 \u2265 2 * x * y * \u221a(x * y)\nh2 : y ^ 2 * z + y * z ^ 2 \u2265 2 * y * z * \u221a(y * z)\n\u22a2 z ^ 2 * x + z * x ^ 2 \u2265 2 * z * x * \u221a(z * x)"}, {"line": 28, "column": 12, "endLine": 28, "endColumn": 35, "data": "unknown identifier 'arith_mean_le_geom_mean'"}, {"line": 34, "column": 2, "endLine": 34, "endColumn": 27, "data": "linarith failed to find a contradiction\ncase a\nx y z : \u211d\ndef_3 : 0 < x \u2227 0 < y \u2227 0 < z\nhx : 0 < x\nhy : 0 < y\nhz : 0 < z\nh1 : x ^ 2 * y + x * y ^ 2 \u2265 2 * x * y * \u221a(x * y)\nh2 : y ^ 2 * z + y * z ^ 2 \u2265 2 * y * z * \u221a(y * z)\nh3 : z ^ 2 * x + z * x ^ 2 \u2265 2 * z * x * \u221a(z * x)\nh4 : \u221a(x * y) + \u221a(y * z) + \u221a(z * x) \u2265 3 * (x * y * z) ^ (1 / 3)\na\u271d : 6 * x * y * z > x ^ 2 * y + x * y ^ 2 + y ^ 2 * z + y * z ^ 2 + z ^ 2 * x + z * x ^ 2\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The variable declarations and positivity constraints are correctly captured. The Lean code properly declares x, y, z as real numbers and includes the positivity condition through the hypothesis def_3.", "The mathematical inequality is perfectly translated. The explicit multiplication operators in Lean (*) correctly represent the implicit multiplication in the natural language, and all terms correspond exactly between the two representations.", "The logical structure is properly maintained. The assumption-conclusion format in natural language is appropriately translated to Lean's hypothesis-goal structure in the lemma statement.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l8 :\n    \u2203 (x y z : \u211d), 0 < x \u2227 0 < y \u2227 0 < z \u2227 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2 < 6 * x * y * z := by\n  use 1, 1, 1/4\n  constructor\n  \u00b7 norm_num\n  constructor\n  \u00b7 norm_num\n  constructor\n  \u00b7 norm_num\n  \u00b7 ring_nf; norm_num"}, "type": "lemma"}, "l9": {"id": "l9", "natural_language": "Therefore the inequality holds", "statement": "We assume:\n\u2022 Proving $(b+c-a)(c+a-b)(a+b-c) \\leq abc$ is a sufficient condition [l4]\n\u2022 This inequality is equivalent to $8xyz \\leq (x+y)(y+z)(z+x)$ [l5]\n\u2022 Which is equivalent to $6xyz \\leq x^2y + xy^2 + y^2z + yz^2 + z^2x + zx^2$ [l7]\n\u2022 And this final inequality is true [l8]\nTherefore, we conclude:\n\u2022 The inequality $(b+c-a)(c+a-b)(a+b-c) \\leq abc$ is true [l9].", "dependencies": ["l4", "l5", "l7", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l9\n  (a b c x y z : \u211d)\n  (def_3 : x = b + c - a \u2227 y = c + a - b \u2227 z = a + b - c \u2227 a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2)\n  (l4 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c \u2194 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x))\n  (l5 : 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x) \u2194 6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2)\n  (l8 : x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2 \u2265 6 * x * y * z) :\n  (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l9\n  (a b c x y z : \u211d)\n  (def_3 : x = b + c - a \u2227 y = c + a - b \u2227 z = a + b - c \u2227 a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2)\n  (l4 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c \u2194 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x))\n  (l5 : 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x) \u2194 6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2)\n  (l8 : x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + z * x^2 \u2265 6 * x * y * z) :\n  (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by\n  rw [l4]\n  rw [l5]\n  exact l8", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all the logical components from the natural language. The variable definitions include both forward and inverse relationships (which are mathematically consistent), all equivalences are properly formalized, the final inequality truth is captured (with equivalent \u2265 notation), and the conclusion matches exactly. The logical structure allows for the same chain of reasoning described in natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "and we conclude $E\\leq\tfrac{3}{2}abc$.", "statement": "We assume:\n\u2022 $E = \\frac{(b+c-a)(c+a-b)(a+b-c)}{2} + abc$ [l3]\n\u2022 The inequality $(b+c-a)(c+a-b)(a+b-c) \\leq abc$ is true [l9]\nTherefore, we conclude:\n\u2022 $E \\leq \\frac{3}{2}abc$ [ts_1].", "dependencies": ["l3", "l9"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c E x y z : \u211d)\n  (l3 : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c)\n  (l9 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c) :\n  E \u2264 (3 / 2) * a * b * c := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c E : \u211d)\n  (l3 : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c)\n  (l9 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c) :\n  E \u2264 (3 / 2) * a * b * c := by\n  rw [l3]\n  have h : (b + c - a) * (c + a - b) * (a + b - c) / 2 \u2264 a * b * c / 2 := by\n    rw [div_le_div_right (by norm_num)]\n    exact l9\n  linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations include extra variables (x, y, z) not mentioned in natural language, but this is acceptable as additional detail", "The definition of E in hypothesis l3 perfectly captures the natural language definition with appropriate Lean syntax", "The inequality assumption l9 exactly matches the natural language assumption", "The conclusion perfectly matches the natural language goal with appropriate Lean notation for fractions and multiplication"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_3", "label": "def_3", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l9", "label": "l9", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l9", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    