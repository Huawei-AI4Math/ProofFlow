
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z = x+iy$ for real numbers $x,y$. If $|z - (2+i)| = \sqrt{5}$, $|z - (4+i)| = \sqrt{5}$, and $\operatorname{Im}(z) > 1$, then $z = 3+3i$.

Proof: From the condition $|z - (2+i)| = \sqrt{5}$ and the representation $z=x+iy$, we get the equation $(x-2)^2 + (y-1)^2 = 5$. Similarly, from $|z - (4+i)| = \sqrt{5}$, we get $(x-4)^2 + (y-1)^2 = 5$. Equating these two expressions gives $(x-2)^2 = (x-4)^2$, which simplifies to $x=3$. Substituting $x=3$ into the first equation results in $(3-2)^2 + (y-1)^2 = 5$, which simplifies to $(y-1)^2 = 4$, yielding the solutions $y=3$ or $y=-1$. Finally, using the condition $\operatorname{Im}(z)>1$ selects $y=3$, which combined with $x=3$ gives the result $z=3+3i$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let z = x+iy for real numbers x,y.", "statement": "Premise:\n\u2022 z is a complex number, and x, y are real numbers such that z = x + iy [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `(z : \u2102)` correctly captures that z is a complex number", "The Lean declaration `(x y : \u211d)` correctly captures that x is a real number", "The Lean declaration `(x y : \u211d)` correctly captures that y is a real number", "The Lean condition `(tc_1 : z = x + y * I)` correctly captures z = x + iy, where `I` is the standard notation for the imaginary unit in Lean's complex number library"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "|z - (2+i)| = \\sqrt{5}", "statement": "Premise:\n\u2022 z is a complex number such that |z - (2+i)| = \\sqrt{5} [tc_2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (tc_2 : Complex.abs (z - (2 + Complex.I)) = Real.sqrt 5)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean type declaration z : \u2102 perfectly captures that z is a complex number", "The Lean constraint Complex.abs (z - (2 + Complex.I)) = Real.sqrt 5 perfectly captures the mathematical condition |z - (2+i)| = \u221a5, with appropriate Lean syntax for complex absolute value, complex numbers, and square root"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "|z - (4+i)| = \\sqrt{5}", "statement": "Premise:\n\u2022 z is a complex number such that |z - (4+i)| = \\sqrt{5} [tc_3].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102)\n(tc_3 : Complex.abs (z - (4 + I)) = (Real.sqrt 5))", "lean_pass": true, "error_msg": [], "tries": 3}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'variable (z : \u2102)' correctly captures that z is a complex number using the standard complex number type \u2102.", "The Lean condition 'Complex.abs (z - (4 + I)) = (Real.sqrt 5)' perfectly translates the mathematical condition |z - (4+i)| = \u221a5, with Complex.abs representing the modulus, I representing the imaginary unit, and Real.sqrt 5 representing the square root of 5."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_4": {"id": "tc_4", "natural_language": "\\operatorname{Im}(z) > 1", "statement": "Premise:\n\u2022 z is a complex number such that the imaginary part of z is greater than 1, Im(z) > 1 [tc_4].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (tc_4 : z.im > 1)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `(z : \u2102)` perfectly captures that z is a complex number, where \u2102 represents the complex numbers in Lean", "The Lean condition `(tc_4 : z.im > 1)` perfectly matches the natural language condition Im(z) > 1, where `z.im` is Lean's notation for the imaginary part of a complex number"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "From the condition |z - (2+i)| = \\sqrt{5} and the representation z=x+iy, we get the equation (x-2)^2 + (y-1)^2 = 5.", "statement": "We assume:\n\u2022 z is a complex number, and x, y are real numbers such that z = x + iy [tc_1]\n\u2022 |z - (2+i)| = \\sqrt{5} [tc_2]\nTherefore, we conclude:\n\u2022 (x-2)^2 + (y-1)^2 = 5 [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5) :\n  (x - 2)^2 + (y - 1)^2 = 5 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : abs (z - (2 + I)) = Real.sqrt 5) :\n  (x - 2)^2 + (y - 1)^2 = 5 := by\n  rw [tc_1] at tc_2\n  simp only [add_re, add_im, ofReal_re, ofReal_im, I_re, I_im, sub_re, sub_im] at tc_2\n  rw [abs_def, \u2190 normSq_eq_abs_sq] at tc_2\n  simp only [normSq] at tc_2\n  simp only [sub_zero, mul_zero, add_zero, zero_add, neg_zero] at tc_2\n  rw [\u2190 Real.sqrt_inj (by positivity) (by positivity)] at tc_2\n  simp only [sq, pow_two] at tc_2\n  exact tc_2", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 2, "endLine": 11, "endColumn": 86, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The complex number representation z = x + iy in natural language is correctly formalized as z = x + y * I in Lean, with proper type declarations for all variables.", "The absolute value condition |z - (2+i)| = \u221a5 is accurately captured using Complex.abs and Real.sqrt functions in Lean.", "The conclusion (x-2)\u00b2 + (y-1)\u00b2 = 5 is perfectly represented in Lean with equivalent mathematical meaning.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5) :\n  \u00ac((x - 2)^2 + (y - 1)^2 = 5) := by\n  intro h\n  have h1 : Complex.abs (z - (2 + I)) = Real.sqrt ((x - 2)^2 + (y - 1)^2) := by\n    rw [tc_1]\n    simp only [Complex.norm_eq_abs, Complex.abs, Complex.normSq]\n    simp\n    rw [\u2190 pow_two, \u2190 pow_two]\n    ring_nf\n    rw [Real.sqrt_sq_eq_abs]\n    \u00b7 ring_nf\n      simp\n    \u00b7 nlinarith\n  rw [tc_2, h] at h1\n  simp at h1\n  have h2 : Real.sqrt 5 ^ 2 = 5 := by simp\n  rw [\u2190 h1] at h2\n  norm_num at h2"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Similarly, from |z - (4+i)| = \\sqrt{5}, we get (x-4)^2 + (y-1)^2 = 5.", "statement": "We assume:\n\u2022 z is a complex number, and x, y are real numbers such that z = x + iy [tc_1]\n\u2022 |z - (4+i)| = \\sqrt{5} [tc_3]\nTherefore, we conclude:\n\u2022 (x-4)^2 + (y-1)^2 = 5 [l2].", "dependencies": ["tc_1", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_3 : Complex.abs (z - (4 + I)) = (Real.sqrt 5)) :\n  (x - 4)^2 + (y - 1)^2 = 5 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_3 : Complex.abs (z - (4 + I)) = (Real.sqrt 5)) :\n  (x - 4)^2 + (y - 1)^2 = 5 := by\n  rw [\u2190 Complex.abs_eq_sqrt_normSq] at tc_3\n  rw [Complex.normSq] at tc_3\n  rw [tc_1] at tc_3\n  simp only [Complex.sub_re, Complex.sub_im, Complex.add_re, Complex.add_im, Complex.ofReal_re, Complex.ofReal_im, Complex.I_re, Complex.I_im] at tc_3\n  simp only [sub_re, sub_im, add_re, add_im] at tc_3\n  rw [\u2190 Real.sq_sqrt (by norm_num : 0 \u2264 5)] at tc_3\n  simp only [pow_two] at tc_3\n  norm_num at tc_3\n  exact tc_3", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 8, "endLine": 10, "endColumn": 34, "data": "unknown constant 'Complex.abs_eq_sqrt_normSq'"}, {"line": 10, "column": 6, "endLine": 10, "endColumn": 34, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.1212\nI z : \u2102\nx y : \u211d\ntc_1 : z = \u2191x + \u2191y * I\ntc_3 : Complex.abs (z - (4 + I)) = \u221a5\n\u22a2 (x - 4) ^ 2 + (y - 1) ^ 2 = 5"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The complex number representation is correctly formalized. The notation 'y * I' in Lean is equivalent to 'iy' in natural language.", "The distance condition is properly captured using Complex.abs for modulus and Real.sqrt for square root, maintaining the exact mathematical meaning.", "The conclusion is identically expressed in both natural language and Lean formalization.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_3 : Complex.abs (z - (4 + I)) = (Real.sqrt 5)) :\n  \u00ac((x - 4)^2 + (y - 1)^2 = 5) := by\n  intro h\n  rw [tc_1] at tc_3\n  simp only [Complex.add_re, Complex.add_im, Complex.ofReal_re, Complex.ofReal_im, Complex.I_re, Complex.I_im, Complex.sub_re, Complex.sub_im] at tc_3\n  rw [\u2190 Complex.norm_eq_abs, \u2190 Complex.normSq_eq_norm_sq] at tc_3\n  simp only [sq] at tc_3\n  rw [h] at tc_3\n  norm_num at tc_3\n  contradiction"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Equating these two expressions gives (x-2)^2 = (x-4)^2", "statement": "We assume:\n\u2022 For real numbers x, y, (x-2)^2 + (y-1)^2 = 5 [l1]\n\u2022 For the same x, y, (x-4)^2 + (y-1)^2 = 5 [l2]\nTherefore, we conclude:\n\u2022 (x-2)^2 = (x-4)^2 [l3].", "dependencies": ["l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (x y : \u211d)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5) :\n  (x - 2)^2 = (x - 4)^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (x y : \u211d)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5) :\n  (x - 2)^2 = (x - 4)^2 := by\n  have h1 : (x - 2)^2 = 5 - (y - 1)^2 := by rw [\u2190 l1]; ring\n  have h2 : (x - 4)^2 = 5 - (y - 1)^2 := by rw [\u2190 l2]; ring\n  rw [h1, h2]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 4}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify x and y as real numbers", "First assumption l1 is perfectly captured with identical mathematical expression", "Second assumption l2 is perfectly captured with identical mathematical expression", "Conclusion l3 is correctly stated as the goal to be proven", "The logical structure properly represents the inference from assumptions to conclusion using Lean's lemma format"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "which simplifies to x=3.", "statement": "We assume:\n\u2022 For a real number x, (x-2)^2 = (x-4)^2 [l3]\nTherefore, we conclude:\n\u2022 x = 3 [l4].", "dependencies": ["l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (x : \u211d)\n  (l3 : (x - 2)^2 = (x - 4)^2) :\n  x = 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (x : \u211d)\n  (l3 : (x - 2)^2 = (x - 4)^2) :\n  x = 3 := by\n  have h1 : x^2 - 4*x + 4 = x^2 - 8*x + 16 := by\n    linear_combination l3\n  have h2 : -4*x + 4 = -8*x + 16 := by\n    linear_combination h1 - x^2\n  have h3 : 4*x = 12 := by\n    linear_combination h2 + 8*x - 4\n  linear_combination h3 / 4", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The variable x is properly declared as a real number, the premise (x-2)^2 = (x-4)^2 is correctly represented as hypothesis l3, and the conclusion x = 3 is properly stated as the goal to be proven. The logical structure of the argument (premise implies conclusion) is accurately preserved in the Lean formalization. The mathematical content is also correct - the given equation does indeed imply x = 3."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Substituting x=3 into the first equation results in (3-2)^2 + (y-1)^2 = 5", "statement": "We assume:\n\u2022 For real numbers x, y, (x-2)^2 + (y-1)^2 = 5 [l1]\n\u2022 x = 3 [l4]\nTherefore, we conclude:\n\u2022 (3-2)^2 + (y-1)^2 = 5 [l5].", "dependencies": ["l1", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (x y : \u211d)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l4 : x = 3) :\n  (3 - 2)^2 + (y - 1)^2 = 5 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (x y : \u211d)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l4 : x = 3) :\n  (3 - 2)^2 + (y - 1)^2 = 5 := by\n  rw [l4] at l1\n  exact l1", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The variable declarations (x y : \u211d) properly specify the real number types, the two assumptions l1 and l4 exactly match the given conditions, and the conclusion is the correct result of substituting x = 3 into the original equation. The logical structure and mathematical content are preserved completely."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "which simplifies to (y-1)^2 = 4", "statement": "We assume:\n\u2022 For a real number y, (3-2)^2 + (y-1)^2 = 5 [l5]\nTherefore, we conclude:\n\u2022 (y-1)^2 = 4 [l6].", "dependencies": ["l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (y : \u211d)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5) :\n  (y - 1)^2 = 4 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (y : \u211d)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5) :\n  (y - 1)^2 = 4 := by\n  have h : (3 - 2)^2 = 1 := by norm_num\n  rw [\u2190 h] at l5\n  simp at l5\n  exact l5", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 6, "endLine": 10, "endColumn": 9, "data": "tactic 'rewrite' failed, motive is not type correct:\n  fun _a => (3 - 2) ^ 2 + (y - 1) ^ 2 = 5\nError: application type mismatch\n  @instOfNatAtLeastTwo \u211d 3 Real.instNatCast \u22ef\nargument\n  instNatAtLeastTwo\nhas type\n  (_a + 2).AtLeastTwo : Prop\nbut is expected to have type\n  AtLeastTwo 3 : Prop\n\nExplanation: The rewrite tactic rewrites an expression 'e' using an equality 'a = b' by the following process. First, it looks for all 'a' in 'e'. Second, it tries to abstract these occurrences of 'a' to create a function 'm := fun _a => ...', called the *motive*, with the property that 'm a' is definitionally equal to 'e'. Third, we observe that 'congrArg' implies that 'm a = m b', which can be used with lemmas such as 'Eq.mpr' to change the goal. However, if 'e' depends on specific properties of 'a', then the motive 'm' might not typecheck.\n\nPossible solutions: use rewrite's 'occs' configuration option to limit which occurrences are rewritten, or use 'simp' or 'conv' mode, which have strategies for certain kinds of dependencies (these tactics can handle proofs and 'Decidable' instances whose types depend on the rewritten term, and 'simp' can apply user-defined '@[congr]' theorems as well).\ny : \u211d\nl5 : (3 - 2) ^ 2 + (y - 1) ^ 2 = 5\nh : (3 - 2) ^ 2 = 1\n\u22a2 (y - 1) ^ 2 = 4"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declaration correctly captures y as a real number", "The premise equation is exactly translated with proper mathematical notation and logical structure", "The conclusion statement is mathematically identical between natural language and Lean", "The logical flow from assumption to conclusion is properly preserved in the Lean lemma structure", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l6\n  (y : \u211d)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5) :\n  \u00ac (y - 1)^2 = 4 := by\n  have h : (3 - 2)^2 = 1 := by norm_num\n  rw [h, add_left_inj] at l5\n  intro h'\n  rw [h'] at l5\n  norm_num at l5"}, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "yielding the solutions y=3 or y=-1.", "statement": "We assume:\n\u2022 For a real number y, (y-1)^2 = 4 [l6]\nTherefore, we conclude:\n\u2022 y = 3 or y = -1 [l7].", "dependencies": ["l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (y : \u211d)\n  (l6 : (y - 1)^2 = 4) :\n  y = 3 \u2228 y = -1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (y : \u211d)\n  (l6 : (y - 1)^2 = 4) :\n  y = 3 \u2228 y = -1 := by\n  have h : y - 1 = 2 \u2228 y - 1 = -2 := by\n    rw [\u2190 sub_eq_zero, \u2190 sq_sub_sq (y - 1) 2, l6]\n    simp [sub_eq_zero]\n  cases h with\n  | inl h1 => left; linarith\n  | inr h2 => right; linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 23, "endLine": 10, "endColumn": 44, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  (y - 1 + 2) * (y - 1 - 2)\ny : \u211d\nl6 : (y - 1) ^ 2 = 4\n\u22a2 y - 1 - 2 = 0 \u2228 y - 1 = -2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The variable y is properly declared as a real number, the premise (y-1)\u00b2 = 4 is accurately represented as (y - 1)^2 = 4, and the conclusion y = 3 or y = -1 is correctly formalized as y = 3 \u2228 y = -1. The logical structure of the implication is preserved, and the mathematical meaning is identical between both representations.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l7\n  (y : \u211d)\n  (l6 : (y - 1)^2 = 4) :\n  \u00ac (y = 3 \u2228 y = -1) := by\n  intro h\n  cases h with\n  | inl h1 => \n    rw [h1] at l6\n    simp only [sub_self, zero_pow, zero_ne_bit0] at l6\n  | inr h2 => \n    rw [h2] at l6\n    simp only [sub_neg_eq_add, pow_two, neg_add_eq_sub] at l6\n    norm_num at l6"}, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "Finally, using the condition \\operatorname{Im}(z)>1 selects y=3", "statement": "We assume:\n\u2022 z is a complex number, and x, y are real numbers such that z = x + iy [tc_1]\n\u2022 Im(z) > 1 [tc_4]\n\u2022 y = 3 or y = -1 [l7]\nTherefore, we conclude:\n\u2022 y = 3 [l8].", "dependencies": ["tc_1", "tc_4", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_4 : z.im > 1)\n  (l7 : y = 3 \u2228 y = -1) :\n  y = 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_4 : z.im > 1)\n  (l7 : y = 3 \u2228 y = -1) :\n  y = 3 := by\n  rw [tc_1] at tc_4\n  simp only [Complex.add_im, Complex.ofReal_im, Complex.mul_im, Complex.I_im, Complex.ofReal_re, mul_one, add_zero] at tc_4\n  cases l7 with\n  | inl h => exact h\n  | inr h => \n    rw [h] at tc_4\n    simp only [Complex.I_im] at tc_4\n    linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 17, "column": 4, "endLine": 17, "endColumn": 36, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable types are correctly declared in Lean matching the natural language specification", "The complex number representation z = x + iy is correctly formalized as z = x + y * I", "The imaginary part constraint Im(z) > 1 is accurately represented as z.im > 1", "The disjunctive condition y = 3 or y = -1 is properly formalized using logical disjunction \u2228", "The conclusion y = 3 is identically represented in both versions", "The overall logical structure as a deductive argument is preserved in the Lean lemma formulation", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l8\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_4 : z.im > 1)\n  (l7 : y = 3 \u2228 y = -1) :\n  \u00ac (y = 3) := by\n  intro h\n  rw [tc_1, h] at tc_4\n  simp only [Complex.add_im, Complex.ofReal_im, Complex.I_im, mul_one, Complex.ofReal_re, mul_zero, add_zero] at tc_4\n  linarith"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "which combined with x=3 gives the result z=3+3i.", "statement": "We assume:\n\u2022 z is a complex number, and x, y are real numbers such that z = x + iy [tc_1]\n\u2022 x = 3 [l4]\n\u2022 y = 3 [l8]\nTherefore, we conclude:\n\u2022 z = 3 + 3i [ts_1].", "dependencies": ["tc_1", "l4", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (l4 : x = 3)\n  (l8 : y = 3) :\n  z = 3 + 3 * I := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (l4 : x = 3)\n  (l8 : y = 3) :\n  z = 3 + 3 * I := by\n  rw [tc_1, l4, l8]\n  simp", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The complex number relationship z = x + iy is correctly formalized as z = x + y * I with proper type declarations", "The condition x = 3 is directly and accurately represented", "The condition y = 3 is directly and accurately represented", "The conclusion z = 3 + 3i is correctly expressed as z = 3 + 3 * I using proper Lean syntax for complex numbers"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_4", "label": "tc_4", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    