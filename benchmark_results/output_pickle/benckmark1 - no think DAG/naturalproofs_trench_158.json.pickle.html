
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $f$ is differentiable at $\mathbf{X}_0=(x_{10},x_{20}, \dots,x_{n0}),$
then $f_{x_1}(\mathbf{X}_0),$ $f_{x_2}(\mathbf{X}_{0}),$
\dots$,$ $f_{x_n}(\mathbf{X}_0)$ exist and
the constants
 $m_1,$ $m_2,$ \dots$,$ $m_n$ in $\eqref{eq:5.3.16}$
are given by
\begin{equation}\label{eq:5.3.18}
m_i=f_{x_i}(\mathbf{X}_0),\quad 1\le i\le n;
\end{equation}
that is$,$
$$
\lim_{\mathbf{X}	o\mathbf{X}_0} \frac{f(\mathbf{X})-f(\mathbf{X}_0)-
\dst{\sum^n_{i=1}}\, f_{x_i}(\mathbf{X}_0) (x_i-x_{i0})}
{ |\mathbf{X}-\mathbf{X}_0|}=0.
$$

Proof: Let
 $i$ be a given integer in $\{1,2, \dots,n\}$.
Let $\mathbf{X}=\mathbf{X}_0+t\mathbf{E}_i$, so that $x_i=x_{i0}+t$,
$x_j =x_{j0}$ if $j
e i$, and $|\mathbf{X}-\mathbf{X}_0|=|t|$. Then
\eqref{eq:5.3.16}
and the differentiability of $f$ at $\mathbf{X}_0$ imply that
$$
\lim_{t	o 0}\frac{f(\mathbf{X}_0+t\mathbf{E}_i)-f(\mathbf{X}_0)-m_it}{ t}=0.
$$

ewpage

oindent
Hence,
$$
\lim_{t	o 0}\frac{f(\mathbf{X}_0+t\mathbf{E}_i)-f(\mathbf{X}_0)}{ t}=m_i.
$$
\vskip6pt

oindent
This proves \eqref{eq:5.3.18}, since the limit on the left is
$f_{x_i}
(\mathbf{X}_0)$, by definition.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "If $f$ is differentiable at $\\mathbf{X}_0=(x_{10},x_{20}, \\dots,x_{n0}),$ ... the constants $m_1,$ $m_2,$ \\dots$,$ $m_n$ in $\\eqref{eq:5.3.16}$", "statement": "Premise:\n\u2022 Let $f: \\mathbb{R}^n \\to \\mathbb{R}$ be a function. $f$ is differentiable at $\\mathbf{X}_0 \\in \\mathbb{R}^n$ means there exist constants $m_1, m_2, \\dots, m_n$ such that $\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0)- \\sum^n_{i=1} m_i (x_i-x_{i0})}{ |\\mathbf{X}-\\mathbf{X}_0|}=0$. This property is denoted as (5.3.16) [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X X\u2080 : EuclideanSpace \u211d (Fin n))\n  (tc_1 : DifferentiableAt \u211d f X\u2080)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The function type matches semantically - EuclideanSpace \u211d (Fin n) is equivalent to \u211d\u207f, and both map to \u211d", "X\u2080 being in EuclideanSpace \u211d (Fin n) corresponds exactly to \ud835\udc17\u2080 \u2208 \u211d\u207f", "The natural language provides the explicit limit definition of differentiability with constants m\u2081, m\u2082, ..., m\u2099, but the Lean code completely omits this condition and instead uses the built-in DifferentiableAt predicate", "The natural language treats 'f is differentiable at X\u2080' as the conclusion derived from the limit condition, but the Lean code treats it as a premise (tc_1). This reverses the logical structure completely"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The function type matches semantically - EuclideanSpace \u211d (Fin n) is equivalent to \u211d\u207f, and both map to \u211d', 'X\u2080 being in EuclideanSpace \u211d (Fin n) corresponds exactly to \ud835\udc17\u2080 \u2208 \u211d\u207f', 'The natural language provides the explicit limit definition of differentiability with constants m\u2081, m\u2082, ..., m\u2099, but the Lean code completely omits this condition and instead uses the built-in DifferentiableAt predicate', \"The natural language treats 'f is differentiable at X\u2080' as the conclusion derived from the limit condition, but the Lean code treats it as a premise (tc_1). This reverses the logical structure completely\"]"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let\n $i$ be a given integer in $\\{1,2, \\dots,n\\}$.\nLet $\\mathbf{X}=\\mathbf{X}_0+t\\mathbf{E}_i$, so that $x_i=x_{i0}+t$,\n$x_j =x_{j0}$ if $j\\ne i$, and $|\\mathbf{X}-\\mathbf{X}_0|=|t|$.", "statement": "Definition:\n\u2022 Let $i$ be a fixed integer in $\\{1, 2, \\dots, n\\}$. Let $\\mathbf{E}_i$ be the $i$-th standard basis vector in $\\mathbb{R}^n$. Define a path $\\mathbf{X}(t) = \\mathbf{X}_0 + t\\mathbf{E}_i$ for $t \\in \\mathbb{R}$. This implies that the components of $\\mathbf{X}$ are $x_i = x_{i0} + t$ and $x_j = x_{j0}$ for $j \\neq i$. Furthermore, the distance is $|\\mathbf{X} - \\mathbf{X}_0| = |t|$. As $\\mathbf{X} \\to \\mathbf{X}_0$, we have $t \\to 0$ [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X X\u2080 : EuclideanSpace \u211d (Fin n))\n  (tc_1 : DifferentiableAt \u211d f X\u2080)\n  (i : Fin n)\n  (E_i : EuclideanSpace \u211d (Fin n))\n  (h_Ei : E_i = fun j => if j = i then 1 else 0)\n  (X_t : \u211d \u2192 EuclideanSpace \u211d (Fin n))\n  (h_Xt : \u2200 (t : \u211d), X_t t = X\u2080 + t \u2022 E_i)\n  (h_X_comp_i : \u2200 (t : \u211d), (X_t t) i = X\u2080 i + t)\n  (h_X_comp_j : \u2200 (t : \u211d) (j : Fin n), j \u2260 i \u2192 (X_t t) j = X\u2080 j)\n  (h_dist_X_X0 : \u2200 (t : \u211d), dist (X_t t) X\u2080 = |t|)\n  (def_1 : Tendsto (X_t) (\ud835\udcdd 0) (\ud835\udcdd X\u2080))", "lean_pass": true, "error_msg": [], "tries": 3}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean type `Fin n` correctly represents integers in {1, 2, ..., n} (or more precisely {0, 1, ..., n-1} with appropriate indexing)", "The Lean definition `E_i = fun j => if j = i then 1 else 0` correctly captures the i-th standard basis vector", "The Lean formulation `X_t t = X\u2080 + t \u2022 E_i` correctly represents the path definition with scalar multiplication", "The component formula is correctly captured in Lean with explicit quantification over t", "The condition for components j \u2260 i is correctly formalized with explicit quantification", "The distance formula is correctly represented using Lean's `dist` function which corresponds to the Euclidean norm", "The convergence statement is correctly formalized using Lean's `Tendsto` with neighborhoods, capturing the limit behavior"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Then\n\\eqref{eq:5.3.16}\nand the differentiability of $f$ at $\\mathbf{X}_0$ imply that\n$$\n\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)-m_it}{ t}=0.\n$$", "statement": "We assume:\n\u2022 $f$ is differentiable at $\\mathbf{X}_0$, meaning there exist constants $m_1, \\dots, m_n$ such that $\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0)- \\sum^n_{i=1} m_i (x_i-x_{i0})}{ |\\mathbf{X}-\\mathbf{X}_0|}=0$ [tc_1].\n\u2022 A path is defined as $\\mathbf{X}(t) = \\mathbf{X}_0 + t\\mathbf{E}_i$, which implies $x_i = x_{i0} + t$, $x_j = x_{j0}$ for $j \\neq i$, and $|\\mathbf{X} - \\mathbf{X}_0| = |t|$ [def_1].\nTherefore, we conclude:\n\u2022 $\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)-m_it}{ t}=0$ [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : EuclideanSpace \u211d (Fin n))\n  (tc_1 : DifferentiableAt \u211d f X\u2080)\n  (def_1 : Tendsto (fun t : \u211d => X\u2080 + t \u2022 E_i) (\ud835\udcdd 0) (\ud835\udcdd X\u2080)) :\n  Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (\ud835\udcdd 0) (\ud835\udcdd 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : EuclideanSpace \u211d (Fin n))\n  (hE_i : E_i = Pi.single i 1)\n  (tc_1 : Tendsto (fun X => (f X - f X\u2080 - \u2211 i : Fin n, m i * (X i - X\u2080 i)) / \u2016X - X\u2080\u2016) (\ud835\udcdd X\u2080) (\ud835\udcdd 0)) :\n  Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (\ud835\udcdd 0) (\ud835\udcdd 0) := by\n  have hX : \u2200 t, X\u2080 + t \u2022 E_i = fun j => if j = i then X\u2080 j + t else X\u2080 j := by\n    intro t\n    ext j\n    simp [hE_i, Pi.single, add_comm (X\u2080 j)]\n  simp_rw [hX]\n  have : \u2200 t, \u2211 x : Fin n, m x * ((if x = i then X\u2080 x + t else X\u2080 x) - X\u2080 x) = m i * t := by\n    intro t\n    simp [ite_smul, sub_eq_add_neg]\n  simp_rw [this]\n  convert tc_1.comp (tendsto_id.add_const_right X\u2080)\n  simp [norm_eq_abs]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 77, "endLine": 18, "endColumn": 43, "data": "unsolved goals\ncase h\nn : \u2115\nf : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nX\u2080 : EuclideanSpace \u211d (Fin n)\nm : Fin n \u2192 \u211d\ni : Fin n\nE_i : EuclideanSpace \u211d (Fin n)\nhE_i : E_i = Pi.single i 1\ntc_1 : Tendsto (fun X => (f X - f X\u2080 - \u2211 i : Fin n, m i * (X i - X\u2080 i)) / \u2016X - X\u2080\u2016) (\ud835\udcdd X\u2080) (\ud835\udcdd 0)\nt : \u211d\nj : Fin n\n\u22a2 t * Function.update 0 i 1 j + X\u2080 j = if j = i then t + X\u2080 j else X\u2080 j"}, {"line": 20, "column": 90, "endLine": 22, "endColumn": 35, "data": "unsolved goals\nn : \u2115\nf : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nX\u2080 : EuclideanSpace \u211d (Fin n)\nm : Fin n \u2192 \u211d\ni : Fin n\nE_i : EuclideanSpace \u211d (Fin n)\nhE_i : E_i = Pi.single i 1\ntc_1 : Tendsto (fun X => (f X - f X\u2080 - \u2211 i : Fin n, m i * (X i - X\u2080 i)) / \u2016X - X\u2080\u2016) (\ud835\udcdd X\u2080) (\ud835\udcdd 0)\nhX : \u2200 (t : \u211d), X\u2080 + t \u2022 E_i = fun j => if j = i then X\u2080 j + t else X\u2080 j\nt : \u211d\n\u22a2 \u2211 x : Fin n, m x * ((if x = i then X\u2080 x + t else X\u2080 x) + -X\u2080 x) = m i * t"}, {"line": 23, "column": 11, "endLine": 23, "endColumn": 15, "data": "simp made no progress"}], "tries": 4}, "score": {"semantic_score": 0, "semantic_feedback": ["The differentiability assumption tc_1 correctly captures the mathematical concept using Mathlib's standard definition, which is equivalent to the explicit limit definition given in natural language.", "The path definition def_1 accurately represents X(t) = X\u2080 + tE\u1d62 using scalar multiplication. The additional tendsto condition is mathematically valid though redundant.", "The conclusion l1 has the correct limit structure but fails to connect the constants m to the actual partial derivatives from the differentiability assumption. In the natural language, m\u2081,...,m\u2099 are the specific constants from differentiability, but in Lean, m is an arbitrary function unrelated to the derivative of f.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The differentiability assumption tc_1 correctly captures the mathematical concept using Mathlib's standard definition, which is equivalent to the explicit limit definition given in natural language.\", 'The path definition def_1 accurately represents X(t) = X\u2080 + tE\u1d62 using scalar multiplication. The additional tendsto condition is mathematically valid though redundant.', 'The conclusion l1 has the correct limit structure but fails to connect the constants m to the actual partial derivatives from the differentiability assumption. In the natural language, m\u2081,...,m\u2099 are the specific constants from differentiability, but in Lean, m is an arbitrary function unrelated to the derivative of f.']"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Hence,\n$$\n\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)}{ t}=m_i.\n$$", "statement": "We assume:\n\u2022 $\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)-m_it}{ t}=0$ [l1].\nTherefore, we conclude:\n\u2022 $\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)}{ t}=m_i$ [l2].", "dependencies": ["l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : EuclideanSpace \u211d (Fin n))\n  (l1 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (\ud835\udcdd 0) (\ud835\udcdd 0)) :\n  Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (\ud835\udcdd 0) (\ud835\udcdd (m i)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : EuclideanSpace \u211d (Fin n))\n  (l1 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (\ud835\udcdd 0) (\ud835\udcdd 0)) :\n  Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (\ud835\udcdd 0) (\ud835\udcdd (m i)) := by\n  have : \u2200 t \u2260 0, (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t = (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t + m i := by\n    intro t ht\n    field_simp [ht]\n    ring\n  rw [\u2190 tendsto_add_const_right (m i)]\n  apply Tendsto.congr' (Eventually.filter_mono nhdsWithin_le_nhds ?_)\n  exact eventually_nhds_iff.mpr \u27e8{t | t \u2260 0}, by simp, fun t ht => this t ht\u27e9", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 17, "column": 4, "endLine": 17, "endColumn": 8, "data": "no goals to be solved"}, {"line": 18, "column": 8, "endLine": 18, "endColumn": 31, "data": "unknown identifier 'tendsto_add_const_right'"}, {"line": 18, "column": 6, "endLine": 18, "endColumn": 37, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.12757\nn : \u2115\nf : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nX\u2080 : EuclideanSpace \u211d (Fin n)\nm : Fin n \u2192 \u211d\ni : Fin n\nE_i : EuclideanSpace \u211d (Fin n)\nl1 : Tendsto (fun t => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (\ud835\udcdd 0) (\ud835\udcdd 0)\nthis : \u2200 (t : \u211d), t \u2260 0 \u2192 (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t = (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t + m i\n\u22a2 Tendsto (fun t => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (\ud835\udcdd 0) (\ud835\udcdd (m i))"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical content from the natural language. The limit expressions in both the assumption l1 and conclusion l2 are accurately translated using Tendsto and neighborhood notation. The vector space operations are properly represented with scalar multiplication (\u2022) and vector addition. The logical structure as an implication from l1 to l2 is preserved. The extra type declarations and variable E_i are mathematically consistent additions that don't contradict the natural language statement.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : EuclideanSpace \u211d (Fin n))\n  (l1 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (\ud835\udcdd 0) (\ud835\udcdd 0)) :\n  \u00ac Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (\ud835\udcdd 0) (\ud835\udcdd (m i)) := by\n  intro h\n  have : Tendsto (fun t => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t - m i) (\ud835\udcdd 0) (\ud835\udcdd 0) := by\n    convert h.sub (tendsto_const_nhds (x := m i)) using 1\n    simp\n  have : Tendsto (fun t => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (\ud835\udcdd 0) (\ud835\udcdd 0) := by\n    simp_rw [sub_div, mul_div_cancel_right\u2080 (m i) (Ne.symm (ne_of_lt (abs_pos.mp (Metric.nhds_basis_ball.eventually_iff.mp (Filter.Tendsto.eventually l1) 1 (by norm_num)).2)))]\n    exact this\n  have : 0 = 0 := tendsto_nhds_unique this l1\n  contradiction"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "since the limit on the left is\n$f_{x_i}\n(\\mathbf{X}_0)$, by definition.", "statement": "We assume:\n\u2022 (general mathematical knowledge)\nTherefore, we conclude:\n\u2022 The partial derivative of $f$ with respect to $x_i$ at $\\mathbf{X}_0$ is defined as $f_{x_i}(\\mathbf{X}_0) = \\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)}{ t}$ [l3].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {E : Type*} [NormedAddCommGroup E] [InnerProductSpace \u211d E] [CompleteSpace E]\n  {f : E \u2192 \u211d} (X0 : E) (i : \u2115) :\n  let Ei : E := (fun j => if j = i then 1 else 0) :=\n  HasPartialDerivAt f i (filter.at X0) (fderiv (fun t : \u211d => f (X0 + t \u2022 Ei)) 0) := by\nsorry", "lean_pass": false, "error_msg": [], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {E : Type*} [NormedAddCommGroup E] [InnerProductSpace \u211d E] [CompleteSpace E]\n  {f : E \u2192 \u211d} (X0 : E) (i : \u2115) :\n  let Ei : E := (fun j => if j = i then 1 else 0) :=\n  HasPartialDerivAt f i X0 (fderiv \u211d (fun t : \u211d => f (X0 + t \u2022 Ei)) 0) := by\n  simp only [HasPartialDerivAt]\n  apply DifferentiableAt.hasFDerivAt\n  exact (differentiableAt_id (x := 0)).comp (f := fun t => X0 + t \u2022 Ei) (differentiableAt_const_add _)", "lean_pass": false, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "This proves \\eqref{eq:5.3.18}, since the limit on the left is\n$f_{x_i}\n(\\mathbf{X}_0)$, by definition.", "statement": "We assume:\n\u2022 For a fixed $i \\in \\{1, ..., n\\}$, we have $\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)}{ t}=m_i$ [l2].\n\u2022 The partial derivative is defined as $f_{x_i}(\\mathbf{X}_0) = \\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)}{ t}$ [l3].\nTherefore, we conclude:\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the partial derivative $f_{x_i}(\\mathbf{X}_0)$ exists and $m_i=f_{x_i}(\\mathbf{X}_0)$ [ts_1].", "dependencies": ["l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : EuclideanSpace \u211d (Fin n))\n  (l2 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (\ud835\udcdd 0) (\ud835\udcdd (m i)))\n  (l3 : PartialDerivative f X\u2080 i = Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (\ud835\udcdd 0) (\ud835\udcdd (PartialDerivative f X\u2080 i))) :\n  (PartialDerivative f X\u2080 i).IsLimit (m i) \u2227 m i = PartialDerivative f X\u2080 i := by\nsorry", "lean_pass": false, "error_msg": [{"line": 13, "column": 8, "endLine": 13, "endColumn": 32, "data": "function expected at\n  PartialDerivative\nterm has type\n  ?m.4555"}, {"line": 13, "column": 98, "endLine": 13, "endColumn": 122, "data": "function expected at\n  PartialDerivative\nterm has type\n  ?m.4555"}, {"line": 14, "column": 3, "endLine": 14, "endColumn": 27, "data": "function expected at\n  PartialDerivative\nterm has type\n  ?m.4555"}, {"line": 14, "column": 51, "endLine": 14, "endColumn": 75, "data": "function expected at\n  PartialDerivative\nterm has type\n  ?m.4555"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : EuclideanSpace \u211d (Fin n))\n  (hE_i : E_i = (Pi.basisFun \u211d (Fin n)) i)\n  (l2 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (\ud835\udcdd 0) (\ud835\udcdd (m i)))\n  (l3 : \u2200 i, PartialDerivAt f X\u2080 i = Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 (Pi.basisFun \u211d (Fin n)) i) - f X\u2080) / t) (\ud835\udcdd 0) (\ud835\udcdd (PartialDerivAt f X\u2080 i))) :\n  Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (\ud835\udcdd 0) (\ud835\udcdd (PartialDerivAt f X\u2080 i)) \u2227 m i = PartialDerivAt f X\u2080 i := by\n  constructor\n  \u00b7 rw [\u2190 l3 i, hE_i]\n    exact l2\n  \u00b7 rw [\u2190 l3 i, hE_i]\n    exact tendsto_nhds_unique l2 (l3 i)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 63, "endLine": 14, "endColumn": 97, "data": "failed to synthesize\n  HAdd (EuclideanSpace \u211d (Fin n)) (Fin n \u2192 \u211d) ?m.10014\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 14, "column": 13, "endLine": 14, "endColumn": 34, "data": "function expected at\n  PartialDerivAt\nterm has type\n  ?m.5312"}, {"line": 14, "column": 122, "endLine": 14, "endColumn": 143, "data": "function expected at\n  PartialDerivAt\nterm has type\n  ?m.5312"}, {"line": 15, "column": 65, "endLine": 15, "endColumn": 86, "data": "function expected at\n  PartialDerivAt\nterm has type\n  ?m.5312"}, {"line": 15, "column": 97, "endLine": 15, "endColumn": 118, "data": "function expected at\n  PartialDerivAt\nterm has type\n  ?m.5312"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}, "ts_2": {"id": "ts_2", "natural_language": "that is$,$\n$$\n\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0)-\n\\dst{\\sum^n_{i=1}}\\, f_{x_i}(\\mathbf{X}_0) (x_i-x_{i0})}\n{ |\\mathbf{X}-\\mathbf{X}_0|}=0.\n$$", "statement": "We assume:\n\u2022 $f$ is differentiable at $\\mathbf{X}_0$, meaning $\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0)- \\sum^n_{i=1} m_i (x_i-x_{i0})}{ |\\mathbf{X}-\\mathbf{X}_0|}=0$ for some constants $m_i$ [tc_1].\n\u2022 For each $i$, the constant $m_i$ is equal to the partial derivative $f_{x_i}(\\mathbf{X}_0)$ [ts_1].\nTherefore, we conclude:\n\u2022 $\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0)- \\sum^n_{i=1} f_{x_i}(\\mathbf{X}_0) (x_i-x_{i0})}{ |\\mathbf{X}-\\mathbf{X}_0|}=0$ [ts_2].", "dependencies": ["tc_1", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X X\u2080 : EuclideanSpace \u211d (Fin n))\n  (m : Fin n \u2192 \u211d)\n  (tc_1 : Filter.Tendsto (fun X_val => (f X_val - f X\u2080 - (\u2211 i : Fin n, (m i) * ((X_val - X\u2080) i))) / (EuclideanSpace.dist X_val X\u2080)) (nhds X\u2080) (pure 0))\n  (ts_1 : \u2200 i : Fin n, m i = partialDeriv i f X\u2080) :\n  Filter.Tendsto (fun X_val => (f X_val - f X\u2080 - (\u2211 i : Fin n, (partialDeriv i f X\u2080) * ((X_val - X\u2080) i))) / (EuclideanSpace.dist X_val X\u2080)) (nhds X\u2080) (pure 0) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 10, "column": 101, "endLine": 10, "endColumn": 129, "data": "unknown constant 'EuclideanSpace.dist'"}, {"line": 12, "column": 109, "endLine": 12, "endColumn": 137, "data": "unknown constant 'EuclideanSpace.dist'"}, {"line": 11, "column": 29, "endLine": 11, "endColumn": 48, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.1107"}, {"line": 12, "column": 64, "endLine": 12, "endColumn": 83, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.1107"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  {n : \u2115}\n  (f : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (X\u2080 : EuclideanSpace \u211d (Fin n))\n  (m : Fin n \u2192 \u211d)\n  (tc_1 : Filter.Tendsto (fun X => (f X - f X\u2080 - \u2211 i, m i * (X - X\u2080) i) / \u2016X - X\u2080\u2016) (\ud835\udcdd X\u2080) (\ud835\udcdd 0))\n  (ts_1 : \u2200 i, m i = fderiv \u211d f X\u2080 (Pi.single i 1)) :\n  Filter.Tendsto (fun X => (f X - f X\u2080 - \u2211 i, (fderiv \u211d f X\u2080) (Pi.single i 1) * (X - X\u2080) i) / \u2016X - X\u2080\u2016) (\ud835\udcdd X\u2080) (\ud835\udcdd 0) := by\n  simp only [ts_1]\n  exact tc_1", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 2, "endLine": 14, "endColumn": 12, "data": "type mismatch\n  tc_1\nhas type\n  Tendsto (fun X => (f X - f X\u2080 - \u2211 i : Fin n, m i * (X - X\u2080) i) / \u2016X - X\u2080\u2016) (\ud835\udcdd X\u2080) (\ud835\udcdd 0) : Prop\nbut is expected to have type\n  Tendsto (fun X => (f X - f X\u2080 - \u2211 x : Fin n, (fderiv \u211d f X\u2080) (Pi.single x 1) * (X - X\u2080) x) / \u2016X - X\u2080\u2016) (\ud835\udcdd X\u2080)\n    (\ud835\udcdd 0) : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#fa2c07", "highlight": {"background": "#a3c2a8", "border": "#fa2c07"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#fa2c07", "highlight": {"background": "#a3c2a8", "border": "#fa2c07"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    