
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z_0$ be a complex number. If $z_0^2 + (-2 - 3i)z_0 + (-5 + 5i) = 0$ and $\operatorname{Re}(z_0) = 3$, then $\operatorname{Im}(z_0) = 1$.

Proof: From the condition $\operatorname{Re}(z_0) = 3$, we can write $z_0 = 3 + iy$ for some real number $y$. Using this form, we compute the term $z_0^2$ as $(3 + iy)^2 = (9 - y^2) + 6iy$. Similarly, we compute the term $(-2 - 3i)z_0$ as $(-2 - 3i)(3 + iy) = (-6 + 3y) - i(2y + 9)$. Substituting these results into the main equation $z_0^2 + (-2 - 3i)z_0 + (-5 + 5i) = 0$ and setting the imaginary part of the resulting expression to zero gives $6y - (2y + 9) + 5 = 0$. Solving this equation for $y$ yields $4y - 4 = 0$, which simplifies to $y = 1$, and thus $\operatorname{Im}(z_0) = 1$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z_0$ be a complex number.", "statement": "Premise:\n\u2022 $z_0$ is a complex number [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z_0 : \u2102)\n(tc_1 : True)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'z_0 : \u2102' directly and correctly formalizes that z_0 is a complex number", "The Lean code includes '(tc_1 : True)' which is a trivial proposition. Since the natural language states no conclusions are derived, this trivial proposition doesn't introduce any meaningful mathematical content and is consistent with having no substantial conclusions"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "If $z_0^2 + (-2 - 3i)z_0 + (-5 + 5i) = 0$", "statement": "Premise:\n\u2022 $z_0$ is a complex number [tc_1]\n\u2022 $z_0^2 + (-2 - 3i)z_0 + (-5 + 5i) = 0$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z_0 : \u2102)\n(tc_1 : True)\n(tc_2 : z_0^2 + (-2 - 3 * I) * z_0 + (-5 + 5 * I) = 0)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean variable declaration correctly captures that z_0 is a complex number using the standard Lean type \u2102", "The Lean equation correctly represents the quadratic equation, with standard notational differences (I instead of i, explicit multiplication symbols) that are expected in formal mathematics"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "and $\\operatorname{Re}(z_0) = 3$", "statement": "Premise:\n\u2022 $z_0$ is a complex number [tc_1]\n\u2022 $\\operatorname{Re}(z_0) = 3$ [tc_3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z_0 : \u2102)\n(tc_1 : True)\n(tc_3 : z_0.re = 3)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'variable (z_0 : \u2102)' correctly captures that z_0 is a complex number. The extra '(tc_1 : True)' is a trivial condition that doesn't affect the mathematical meaning.", "The Lean condition '(tc_3 : z_0.re = 3)' perfectly matches the mathematical statement 'Re(z_0) = 3', using Lean's notation for the real part of a complex number."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "From the condition $\\operatorname{Re}(z_0) = 3$, we can write $z_0 = 3 + iy$ for some real number $y$.", "statement": "We assume:\n\u2022 $z_0$ is a complex number [tc_1]\n\u2022 $\\operatorname{Re}(z_0) = 3$ [tc_3]\nDefinition:\n\u2022 There exists a real number $y$ such that $z_0 = 3 + iy$ and $y = \\operatorname{Im}(z_0)$ [def_1].", "dependencies": ["tc_1", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z_0 : \u2102)\n(tc_1 : True)\n(tc_3 : z_0.re = 3)\n(def_1 : \u2203 y : \u211d, z_0 = 3 + y * I \u2227 y = z_0.im)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.67, "semantic_feedback": ["The natural language states that z_0 is a complex number, which is captured by the type declaration (z_0 : \u2102). However, tc_1 is assigned the value True, which doesn't directly encode the fact that z_0 is complex - this information is already in the type. The condition is semantically captured but the encoding is indirect.", "The Lean formalization z_0.re = 3 perfectly matches the mathematical statement Re(z_0) = 3.", "The Lean formalization \u2203 y : \u211d, z_0 = 3 + y * I \u2227 y = z_0.im perfectly captures the mathematical statement. The notation y * I is equivalent to iy, and z_0.im corresponds to Im(z_0)."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Using this form, we compute the term $z_0^2$ as $(3 + iy)^2 = (9 - y^2) + 6iy$.", "statement": "We assume:\n\u2022 There exists a real number $y$ such that $z_0 = 3 + iy$ [def_1]\nTherefore, we conclude:\n\u2022 $z_0^2 = (9 - y^2) + i(6y)$ [l1].", "dependencies": ["def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z_0 : \u2102) (y : \u211d)\n  (def_1 : \u2203 y_0 : \u211d, z_0 = 3 + y_0 * I \u2227 y_0 = z_0.im)\n  (h_z0_eq : z_0 = 3 + y * I) :\n  z_0^2 = (9 - y^2) + I * (6 * y) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z_0 : \u2102) (y : \u211d)\n  (def_1 : \u2203 y_0 : \u211d, z_0 = 3 + y_0 * I \u2227 y_0 = z_0.im)\n  (h_z0_eq : z_0 = 3 + y * I) :\n  z_0^2 = (9 - y^2) + I * (6 * y) := by\n  rw [h_z0_eq]\n  simp only [Complex.add_mul, Complex.mul_add, Complex.mul_I, Complex.I_mul_I, Complex.ofReal_mul,\n    Complex.ofReal_add, Complex.ofReal_sub, Complex.ofReal_pow]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 13, "endLine": 11, "endColumn": 28, "data": "unknown constant 'Complex.add_mul'"}, {"line": 11, "column": 30, "endLine": 11, "endColumn": 45, "data": "unknown constant 'Complex.mul_add'"}, {"line": 11, "column": 47, "endLine": 11, "endColumn": 60, "data": "unknown constant 'Complex.mul_I'"}, {"line": 11, "column": 2, "endLine": 12, "endColumn": 63, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The existential statement is correctly captured. The additional constraint y_0 = z_0.im is mathematically consistent and makes the formalization more precise.", "The additional hypothesis h_z0_eq provides a concrete instantiation of the existential statement, which is logically consistent and helpful for the proof.", "The conclusion is mathematically identical to the natural language, with only notational differences (i vs I, multiplication formatting) that don't affect semantic meaning.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (z_0 : \u2102) (y : \u211d)\n  (def_1 : \u2203 y_0 : \u211d, z_0 = 3 + y_0 * I \u2227 y_0 = z_0.im)\n  (h_z0_eq : z_0 = 3 + y * I) :\n  \u00ac (z_0^2 = (9 - y^2) + I * (6 * y)) := by\n  intro h\n  have h_sq : z_0^2 = (3 + y * I)^2 := by rw [h_z0_eq]\n  have h_expand : (3 + y * I)^2 = (9 - y^2) + I * (6 * y) := by\n    simp [pow_two]\n    ring\n  rw [h_expand] at h_sq\n  rw [h_sq] at h\n  contradiction"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Similarly, we compute the term $(-2 - 3i)z_0$ as $(-2 - 3i)(3 + iy) = (-6 + 3y) - i(2y + 9)$.", "statement": "We assume:\n\u2022 There exists a real number $y$ such that $z_0 = 3 + iy$ [def_1]\nTherefore, we conclude:\n\u2022 $(-2 - 3i)z_0 = (-6 + 3y) - i(2y + 9)$ [l2].", "dependencies": ["def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z_0 : \u2102)\n  (def_1 : \u2203 y : \u211d, z_0 = 3 + y * I \u2227 y = z_0.im) :\n  (-2 - 3 * I) * z_0 = (-6 + 3 * z_0.im) - I * (2 * z_0.im + 9) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z_0 : \u2102)\n  (def_1 : \u2203 y : \u211d, z_0 = 3 + y * I \u2227 y = z_0.im) :\n  (-2 - 3 * I) * z_0 = (-6 + 3 * z_0.im) - I * (2 * z_0.im + 9) := by\n  rcases def_1 with \u27e8y, hz, hy\u27e9\n  rw [hz]\n  simp only [Complex.add_re, Complex.add_im, Complex.mul_re, Complex.mul_im, Complex.ofReal_re, Complex.ofReal_im, Complex.I_re, Complex.I_im]\n  simp\n  rw [hy]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 8, "column": 67, "endLine": 14, "endColumn": 6, "data": "unsolved goals\ncase intro.intro\nI z_0 : \u2102\ny : \u211d\nhz : z_0 = 3 + \u2191y * I\nhy : y = z_0.im\n\u22a2 -6 - I * 9 + (-(I * \u2191z_0.im * 2) - I ^ 2 * \u2191z_0.im * 3) =\n    -6 + (-(I * 9) - I * \u2191z_0.im * \u2191I.im * 2) + \u2191z_0.im * \u2191I.im * 3"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The premise is correctly formalized. The Lean version includes an additional constraint 'y = z_0.im' which is logically consistent and makes the relationship between y and z_0 more explicit than the natural language version.", "The conclusion is correctly formalized. While the natural language uses the variable 'y' and Lean uses 'z_0.im', these are semantically equivalent given the premise. The mathematical expression structure and meaning are preserved perfectly.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  (z_0 : \u2102)\n  (def_1 : \u2203 y : \u211d, z_0 = 3 + y * I \u2227 y = z_0.im) :\n  \u00ac (-2 - 3 * I) * z_0 = (-6 + 3 * z_0.im) - I * (2 * z_0.im + 9) := by\n  rcases def_1 with \u27e8y, rfl, hy\u27e9\n  simp [hy]\n  ring_nf\n  norm_num"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Substituting these results into the main equation $z_0^2 + (-2 - 3i)z_0 + (-5 + 5i) = 0$ and setting the imaginary part of the resulting expression to zero gives $6y - (2y + 9) + 5 = 0$.", "statement": "We assume:\n\u2022 $z_0^2 + (-2 - 3i)z_0 + (-5 + 5i) = 0$ [tc_2]\n\u2022 $z_0^2 = (9 - y^2) + i(6y)$ [l1]\n\u2022 $(-2 - 3i)z_0 = (-6 + 3y) - i(2y + 9)$ [l2]\n\u2022 y is a real number [def_1]\nTherefore, we conclude:\n\u2022 $6y - (2y + 9) + 5 = 0$ [l3].", "dependencies": ["tc_2", "l1", "l2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z_0 : \u2102) (y : \u211d)\n  (tc_2 : z_0^2 + (-2 - 3 * I) * z_0 + (-5 + 5 * I) = 0)\n  (l1 : z_0^2 = (9 - y^2) + I * (6 * y))\n  (l2 : (-2 - 3 * I) * z_0 = (-6 + 3 * y) - I * (2 * y + 9))\n  (def_1 : \u2203 y_0 : \u211d, z_0 = 3 + y_0 * I \u2227 y_0 = z_0.im) :\n  6 * y - (2 * y + 9) + 5 = 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z_0 : \u2102) (y : \u211d)\n  (tc_2 : z_0^2 + (-2 - 3 * I) * z_0 + (-5 + 5 * I) = 0)\n  (l1 : z_0^2 = (9 - y^2) + I * (6 * y))\n  (l2 : (-2 - 3 * I) * z_0 = (-6 + 3 * y) - I * (2 * y + 9))\n  (def_1 : \u2203 y_0 : \u211d, z_0 = 3 + y_0 * I \u2227 y_0 = z_0.im) :\n  6 * y - (2 * y + 9) + 5 = 0 := by\n  rw [\u2190 add_assoc, sub_eq_add_neg, neg_add, \u2190 add_assoc]\n  have h_imag := congrArg Complex.im tc_2\n  simp only [Complex.add_im, Complex.mul_im, Complex.ofReal_im, Complex.ofReal_re, Complex.I_im, Complex.I_re,\n    Complex.add_re, Complex.zero_im, mul_zero, mul_one, zero_add, sub_zero] at h_imag\n  rw [l1, l2] at h_imag\n  simp only [Complex.add_im, Complex.sub_im, Complex.ofReal_im, Complex.ofReal_re, Complex.I_im, Complex.I_re,\n    mul_zero, mul_one, zero_add, sub_zero] at h_imag\n  linear_combination h_imag", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 6, "endLine": 12, "endColumn": 17, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a + (?b + ?c)\nI z_0 : \u2102\ny : \u211d\ntc_2 : z_0 ^ 2 + (-2 - 3 * I) * z_0 + (-5 + 5 * I) = 0\nl1 : z_0 ^ 2 = 9 - \u2191y ^ 2 + I * (6 * \u2191y)\nl2 : (-2 - 3 * I) * z_0 = -6 + 3 * \u2191y - I * (2 * \u2191y + 9)\ndef_1 : \u2203 y_0, z_0 = 3 + \u2191y_0 * I \u2227 y_0 = z_0.im\n\u22a2 6 * y - (2 * y + 9) + 5 = 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_2: The quadratic equation is correctly formalized with proper complex number notation", "l1: The expression for z_0\u00b2 is accurately captured with correct complex arithmetic notation", "l2: The expression for (-2 - 3i)z_0 is properly formalized", "def_1: Major discrepancy - natural language only states 'y is a real number' but Lean introduces a complex existential statement constraining z_0 to have real part 3 and relating y_0 to z_0.im, which fundamentally changes the mathematical problem", "l3: The conclusion equation is correctly formalized", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['tc_2: The quadratic equation is correctly formalized with proper complex number notation', 'l1: The expression for z_0\u00b2 is accurately captured with correct complex arithmetic notation', 'l2: The expression for (-2 - 3i)z_0 is properly formalized', \"def_1: Major discrepancy - natural language only states 'y is a real number' but Lean introduces a complex existential statement constraining z_0 to have real part 3 and relating y_0 to z_0.im, which fundamentally changes the mathematical problem\", 'l3: The conclusion equation is correctly formalized']"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Solving this equation for $y$ yields $4y - 4 = 0$", "statement": "We assume:\n\u2022 $6y - (2y + 9) + 5 = 0$ [l3]\nTherefore, we conclude:\n\u2022 $4y - 4 = 0$ [l4].", "dependencies": ["l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (y : \u211d)\n  (l3 : 6 * y - (2 * y + 9) + 5 = 0) :\n  4 * y - 4 = 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (y : \u211d)\n  (l3 : 6 * y - (2 * y + 9) + 5 = 0) :\n  4 * y - 4 = 0 := by\n  rw [sub_add_eq_sub_sub] at l3\n  simp only [mul_sub, sub_add_sub_cancel] at l3\n  simp [l3]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 2, "endLine": 10, "endColumn": 47, "data": "simp made no progress"}], "tries": 4}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declaration correctly specifies y as a real number, which is appropriate for the mathematical context", "The premise l3 is exactly translated from natural language to Lean syntax with proper operator precedence", "The conclusion l4 is correctly formalized as the goal to be proved", "The logical structure properly captures the deductive reasoning from assumption to conclusion", "The mathematical relationship between premise and conclusion is algebraically sound", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l4\n  (y : \u211d)\n  (l3 : 6 * y - (2 * y + 9) + 5 = 0) :\n  \u00ac (4 * y - 4 = 0) := by\n  intro h\n  have : 6 * y - (2 * y + 9) + 5 = 4 * y - 4 := by ring\n  rw [l3, h] at this\n  simp at this"}, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "which simplifies to $y = 1$", "statement": "We assume:\n\u2022 $4y - 4 = 0$ [l4]\nTherefore, we conclude:\n\u2022 $y = 1$ [l5].", "dependencies": ["l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (y : \u211d)\n  (l4 : 4 * y - 4 = 0) :\n  y = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (y : \u211d)\n  (l4 : 4 * y - 4 = 0) :\n  y = 1 := by\n  linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the logical structure and mathematical content of the natural language statement. The assumption '4y - 4 = 0' is properly represented as a hypothesis, and the conclusion 'y = 1' is correctly stated as the goal to be proven. The addition of the real number type for y is a reasonable mathematical specification that doesn't contradict the natural language. All key components from the natural language are preserved in the formalization."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "and thus $\\operatorname{Im}(z_0) = 1$.", "statement": "We assume:\n\u2022 There exists a real number $y$ such that $y = \\operatorname{Im}(z_0)$ [def_1]\n\u2022 $y = 1$ [l5]\nTherefore, we conclude:\n\u2022 $\\operatorname{Im}(z_0) = 1$ [ts_1].", "dependencies": ["def_1", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z_0 : \u2102)\n  (def_1 : \u2203 y : \u211d, z_0 = 3 + y * I \u2227 y = z_0.im)\n  (l5 : (fun y => y = 1) (Classical.choose def_1)) :\n  z_0.im = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z_0 : \u2102)\n  (def_1 : \u2203 y : \u211d, z_0 = 3 + y * I \u2227 y = z_0.im)\n  (l5 : (fun y => y = 1) (Classical.choose def_1)) :\n  z_0.im = 1 := by\n  obtain \u27e8y, hz, hy\u27e9 := def_1\n  simp only [hz] at hy\n  rw [\u2190 hy]\n  exact l5", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 6, "endLine": 12, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  (3 + \u2191y * I).im\ncase intro.intro\nI z_0 : \u2102\ny : \u211d\nhz : z_0 = 3 + \u2191y * I\nhy\u271d : y = z_0.im\nl5 : Classical.choose \u22ef = 1\nhy : y = (3 + \u2191y * I).im\n\u22a2 z_0.im = 1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The def_1 formalization introduces a major additional constraint (z_0 = 3 + y * I) that fixes the real part of z_0 to 3, which is not mentioned in the natural language. The natural language only states the existence of y equal to Im(z_0).", "The l5 formalization uses Classical.choose and function application to express 'y = 1', which is structurally different from the direct statement in natural language, though semantically equivalent.", "The conclusion z_0.im = 1 perfectly matches the natural language statement Im(z_0) = 1.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The def_1 formalization introduces a major additional constraint (z_0 = 3 + y * I) that fixes the real part of z_0 to 3, which is not mentioned in the natural language. The natural language only states the existence of y equal to Im(z_0).', \"The l5 formalization uses Classical.choose and function application to express 'y = 1', which is structurally different from the direct statement in natural language, though semantically equivalent.\", 'The conclusion z_0.im = 1 perfectly matches the natural language statement Im(z_0) = 1.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    