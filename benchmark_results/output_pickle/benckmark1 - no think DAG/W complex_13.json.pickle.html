
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $C$ be the circle $|z|=2$ oriented counter-clockwise and let the function to be integrated be $f(z) = \frac{\cos(z)}{z-i}$. If Cauchy's Integral Formula, $\oint_C \frac{g(z)}{z-z_0} dz = 2\pi i g(z_0)$, holds for any function $g(z)$ that is analytic inside and on $C$ and any point $z_0$ inside $C$, then $\oint_C f(z) dz = 2\pi i \cosh(1)$.

Proof: To apply the given formula, we first identify the components of $f(z) = \frac{\cos(z)}{z-i}$ as $g(z) = \cos(z)$ and $z_0 = i$. We must verify the conditions of the formula. The singularity $z_0=i$ lies inside the contour $C$ since its modulus $|i|=1$ is less than the radius 2. The function $g(z)=\cos(z)$ is analytic on the entire complex plane, and thus is analytic on and inside $C$. With the conditions verified, we can apply the formula: $\oint_C f(z) dz = 2\pi i g(i) = 2\pi i \cos(i)$. Using the identity $\cos(i) = \cosh(1)$, we find the integral is equal to $2\pi i \cosh(1)$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $C$ be the circle $|z|=2$ oriented counter-clockwise", "statement": "Premise:\n\u2022 C is the circle $|z|=2$ in the complex plane, oriented counter-clockwise [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (C : Path (Complex.sphere 0 2))\n  (tc_1 : C.is_closed_oriented_path \u2227 C.is_param_on_with (fun t => 2 * Complex.exp (t * Complex.i)) 0 (2 * Complex.pi) \u2227 C.is_oriented_ccw_on (Complex.sphere 0 2))", "lean_pass": false, "error_msg": [{"line": 6, "column": 13, "endLine": 6, "endColumn": 31, "data": "unknown constant 'Complex.sphere'"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "let the function to be integrated be $f(z) = \\frac{\\cos(z)}{z-i}$", "statement": "Premise:\n\u2022 $f(z) = \\frac{\\cos(z)}{z-i}$ [tc_2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (f : \u2102 \u2192 \u2102)\n  (tc_2 : f = fun z => Complex.cos z / (z - Complex.I))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical definition. The function f is defined as cos(z)/(z-i) in both versions. The Lean version includes explicit type information (f : \u2102 \u2192 \u2102) and uses Lean's complex number notation (Complex.cos, Complex.I), but these are appropriate formalizations of the mathematical concepts. The logical meaning is preserved completely."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "If Cauchy's Integral Formula, $\\oint_C \\frac{g(z)}{z-z_0} dz = 2\\pi i g(z_0)$, holds for any function $g(z)$ that is analytic inside and on $C$ and any point $z_0$ inside $C$", "statement": "Premise:\n\u2022 For any function $g(z)$ that is analytic inside and on a contour $C$ and any point $z_0$ inside $C$, Cauchy's Integral Formula holds: $\\oint_C \\frac{g(z)}{z-z_0} dz = 2\\pi i g(z_0)$ [tc_3].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {\u03b1 : Type*} [NormedAddCommGroup \u03b1] [InnerProductSpace \u211d \u03b1] [Module \u211d \u03b1] [StarRing \u03b1]\n  (C : Path \u03b1) (g : \u03b1 \u2192 \u2102) (z z_0 : \u03b1)\n  (tc_3 : IsAnalyticOn \u2102 (g \u2218 C) (C.closure) \u2227 C.IsLoop \u2227 (\u2200 z' \u2208 C.range, DifferentiableAt \u2102 g z') \u2227 (\u2200 z' \u2208 C.interior, DifferentiableAt \u2102 g z') \u2192\n  \u222e z_in C, (g z) / (z - z_0) = (2 * \u03c0 * Complex.I) * (g z_0))", "lean_pass": false, "error_msg": [{"line": 9, "column": 8, "endLine": 9, "endColumn": 10, "data": "unexpected identifier; expected 'in'"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "we first identify the components of $f(z) = \\frac{\\cos(z)}{z-i}$ as $g(z) = \\cos(z)$ and $z_0 = i$.", "statement": "We assume:\n\u2022 $f(z) = \\frac{\\cos(z)}{z-i}$ [tc_2].\nDefinition:\n\u2022 We identify $g(z) = \\cos(z)$ and $z_0 = i$, such that $f(z)$ matches the form $\\frac{g(z)}{z-z_0}$ [def_1].", "dependencies": ["tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (f : \u2102 \u2192 \u2102)\n  (tc_2 : f = fun z => Complex.cos z / (z - Complex.I))\n  (g : \u2102 \u2192 \u2102)\n  (z_0 : \u2102)\n  (def_1 : g = Complex.cos \u2227 z_0 = Complex.I)", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean tc_2 correctly formalizes the condition that f(z) = cos(z)/(z-i) using Complex.cos and Complex.I", "The first part of def_1 correctly states g = Complex.cos, which matches g(z) = cos(z)", "The second part of def_1 correctly states z_0 = Complex.I, which matches z_0 = i", "The natural language explicitly concludes that f(z) matches the form g(z)/(z-z_0), but this conclusion is not present in the Lean formalization. While it can be derived from the given definitions, it's not explicitly stated as a conclusion"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean tc_2 correctly formalizes the condition that f(z) = cos(z)/(z-i) using Complex.cos and Complex.I', 'The first part of def_1 correctly states g = Complex.cos, which matches g(z) = cos(z)', 'The second part of def_1 correctly states z_0 = Complex.I, which matches z_0 = i', \"The natural language explicitly concludes that f(z) matches the form g(z)/(z-z_0), but this conclusion is not present in the Lean formalization. While it can be derived from the given definitions, it's not explicitly stated as a conclusion\"]"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "The singularity $z_0=i$ lies inside the contour $C$ since its modulus $|i|=1$ is less than the radius 2.", "statement": "We assume:\n\u2022 C is the circle $|z|=2$ [tc_1].\n\u2022 $z_0 = i$ [def_1].\nTherefore, we conclude:\n\u2022 The point $z_0 = i$ is inside the contour $C$, because its modulus $|i|=1$ is less than the radius 2 [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z_0 : \u2102)\n  (tc_1 : ({z : \u2102 | Complex.abs z = 2}) := by sorry)\n  (def_1 : z_0 = Complex.I) :\n  Complex.abs z_0 < 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z_0 : \u2102)\n  (tc_1 : ({z : \u2102 | Complex.abs z = 2}) := by sorry)\n  (def_1 : z_0 = Complex.I) :\n  Complex.abs z_0 < 2 := by\n  rw [def_1]\n  simp only [Complex.abs_I, one_lt_two]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The circle C is defined as a set {z : \u2102 | Complex.abs z = 2} but this set is never actually used in the lemma. The natural language establishes C as the contour, but the Lean formalization doesn't connect the conclusion to this circle definition. The variable tc_1 is defined but not referenced.", "The definition z\u2080 = i is correctly captured as z_0 = Complex.I, which is the standard Lean representation of the imaginary unit.", "The conclusion that z\u2080 is inside the contour (meaning |z\u2080| < 2) is correctly formalized as Complex.abs z_0 < 2.", "While the mathematical content is correct, there's a structural issue: the circle C (tc_1) is defined but never used to establish the relationship between being 'inside the contour' and having modulus less than the radius. The formalization misses the logical connection between the circle definition and the inside/outside criterion."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The circle C is defined as a set {z : \u2102 | Complex.abs z = 2} but this set is never actually used in the lemma. The natural language establishes C as the contour, but the Lean formalization doesn't connect the conclusion to this circle definition. The variable tc_1 is defined but not referenced.\", 'The definition z\u2080 = i is correctly captured as z_0 = Complex.I, which is the standard Lean representation of the imaginary unit.', 'The conclusion that z\u2080 is inside the contour (meaning |z\u2080| < 2) is correctly formalized as Complex.abs z_0 < 2.', \"While the mathematical content is correct, there's a structural issue: the circle C (tc_1) is defined but never used to establish the relationship between being 'inside the contour' and having modulus less than the radius. The formalization misses the logical connection between the circle definition and the inside/outside criterion.\"]"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "The function $g(z)=\\cos(z)$ is analytic on the entire complex plane, and thus is analytic on and inside $C$.", "statement": "We assume:\n\u2022 $g(z) = \\cos(z)$ [def_1].\n\u2022 C is the circle $|z|=2$ [tc_1].\nTherefore, we conclude:\n\u2022 The function $g(z) = \\cos(z)$ is analytic on and inside $C$ [l2].", "dependencies": ["def_1", "tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (g : \u2102 \u2192 \u2102)\n  (z_0 : \u2102)\n  (def_1 : g = Complex.cos \u2227 z_0 = Complex.I) :\n  AnalyticOn (fun z => Complex.cos z) (Metric.closedBall 0 2) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 9, "column": 13, "endLine": 9, "endColumn": 37, "data": "application type mismatch\n  @AnalyticOn fun z => Complex.cos z\nargument\n  fun z => Complex.cos z\nhas type\n  \u2102 \u2192 \u2102 : Type\nbut is expected to have type\n  Type ?u.19 : Type (?u.19 + 1)"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (g : \u2102 \u2192 \u2102)\n  (def_1 : g = Complex.cos) :\n  AnalyticOn g (Metric.closedBall 0 2) := by\n  rw [def_1]\n  exact Complex.analyticOn_cos (Metric.closedBall 0 2)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 8, "column": 13, "endLine": 8, "endColumn": 14, "data": "application type mismatch\n  @AnalyticOn g\nargument\n  g\nhas type\n  \u2102 \u2192 \u2102 : Type\nbut is expected to have type\n  Type ?u.15 : Type (?u.15 + 1)"}, {"line": 9, "column": 6, "endLine": 9, "endColumn": 11, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  g\ng : \u2102 \u2192 \u2102\ndef_1 : g = Complex.cos\n\u22a2 sorry"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "With the conditions verified, we can apply the formula: $\\oint_C f(z) dz = 2\\pi i g(i) = 2\\pi i \\cos(i)$.", "statement": "We assume:\n\u2022 C is the circle $|z|=2$ oriented counter-clockwise [tc_1].\n\u2022 $f(z) = \\frac{\\cos(z)}{z-i}$ [tc_2].\n\u2022 Cauchy's Integral Formula holds: For analytic g and $z_0$ inside C, $\\oint_C \\frac{g(z)}{z-z_0} dz = 2\\pi i g(z_0)$ [tc_3].\n\u2022 We identify $g(z) = \\cos(z)$ and $z_0 = i$ [def_1].\n\u2022 The point $z_0 = i$ is inside the contour C [l1].\n\u2022 The function $g(z) = \\cos(z)$ is analytic on and inside C [l2].\nTherefore, we conclude:\n\u2022 $\\oint_C f(z) dz = 2\\pi i \\cos(i)$ [l3].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (f : \u2102 \u2192 \u2102) (g : \u2102 \u2192 \u2102) (z_0 : \u2102)\n  (tc_1 : ({z : \u2102 | Complex.abs z = 2}))\n  (tc_2 : f = fun z => Complex.cos z / (z - Complex.I))\n  (tc_3 : \u2200 (C : Set \u2102) (g_analytic : AnalyticOn \u2102 g (C.interior)) (z_0_in : z_0 \u2208 C.interior), (\u222e z in C, g z / (z - z_0)) = (2 * Complex.pi * Complex.I) * g z_0)\n  (def_1 : g = Complex.cos \u2227 z_0 = Complex.I)\n  (l1 : Complex.abs z_0 < 2)\n  (l2 : AnalyticOn \u2102 g {z : \u2102 | Complex.abs z \u2264 2}) :\n  (\u222e z in {w : \u2102 | Complex.abs w = 2}, f z) = (2 * Complex.pi * Complex.I) * Complex.cos Complex.I := by\nsorry", "lean_pass": false, "error_msg": [{"line": 9, "column": 103, "endLine": 9, "endColumn": 105, "data": "unexpected identifier; expected 'C('"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma l3\n  (f : \u2102 \u2192 \u2102) (g : \u2102 \u2192 \u2102) (z\u2080 : \u2102)\n  (tc_1 : Set \u2102 := {z | abs z = 2})\n  (tc_2 : f = fun z => cos z / (z - I))\n  (tc_3 : \u2200 (C : Set \u2102) (g_analytic : AnalyticOn \u2102 g (interior C)) (z\u2080_in : z\u2080 \u2208 interior C), \n    (\u222e z in C, g z / (z - z\u2080)) = (2 * \u03c0 * I) * g z\u2080)\n  (def_1 : g = cos \u2227 z\u2080 = I)\n  (l1 : abs z\u2080 < 2)\n  (l2 : AnalyticOn \u2102 g {z | abs z \u2264 2}) :\n  (\u222e z in {w | abs w = 2}, f z) = (2 * \u03c0 * I) * cos I := by\n  rw [tc_2]\n  simp only [def_1.1, def_1.2]\n  apply tc_3 {z | abs z = 2} _ l1\n  rw [interior_setOf_abs_eq]\n  exact l2\n  where\n    interior_setOf_abs_eq : interior {z : \u2102 | abs z = 2} = {z | abs z < 2} := by\n      ext z\n      simp only [mem_setOf_eq, mem_interior_iff_mem_nhds, Metric.ball, mem_ball, dist_eq, sub_zero]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 11, "endLine": 10, "endColumn": 13, "data": "unexpected identifier; expected 'C('"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Using the identity $\\cos(i) = \\cosh(1)$", "statement": "We assume:\n\u2022 (Prior mathematical knowledge)\nTherefore, we conclude:\n\u2022 $\\cos(i) = \\cosh(1)$ [l4].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4:\n  Complex.cos (Complex.I) = Complex.cosh (1) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4:\n  Complex.cos (Complex.I) = Complex.cosh (1) := by\n  simp only [Complex.cos, Complex.cosh, Complex.I, Complex.exp_ofReal_mul_I, Complex.exp_neg,\n    Complex.exp_ofReal_mul_I_neg, Complex.ofReal_one, Complex.ofReal_neg, Complex.exp_one,\n    Complex.exp_neg_one]\n  simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 7, "column": 51, "endLine": 7, "endColumn": 75, "data": "unknown constant 'Complex.exp_ofReal_mul_I'"}, {"line": 8, "column": 4, "endLine": 8, "endColumn": 32, "data": "unknown constant 'Complex.exp_ofReal_mul_I_neg'"}, {"line": 8, "column": 74, "endLine": 8, "endColumn": 89, "data": "unknown constant 'Complex.exp_one'"}, {"line": 9, "column": 4, "endLine": 9, "endColumn": 23, "data": "unknown constant 'Complex.exp_neg_one'"}, {"line": 6, "column": 48, "endLine": 10, "endColumn": 6, "data": "unsolved goals\n\u22a2 (Complex.exp ({ re := 0, im := 1 } * { re := 0, im := 1 }) +\n        Complex.exp (-({ re := 0, im := 1 } * { re := 0, im := 1 }))) /\n      2 =\n    (Complex.exp 1 + (Complex.exp 1)\u207b\u00b9) / 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical identity cos(i) = cosh(1). The use of Complex.I for the imaginary unit i, Complex.cos and Complex.cosh for the respective functions, and the proper handling of the constant 1 all accurately represent the natural language statement. The additional type specifications (Complex.*) provide necessary precision for formal verification without changing the mathematical meaning.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l4:\n  \u00ac (Complex.cos (Complex.I) = Complex.cosh (1)) := by\n  simp only [Complex.cos, Complex.cosh, Complex.I_re, Complex.I_im, Complex.exp_zero, mul_one, one_mul,\n    add_zero, zero_add, sub_zero, zero_sub, neg_zero, mul_zero, neg_mul, one_mul, mul_one, inv_one,\n    div_one, neg_neg, add_sub_cancel, sub_self, add_comm, mul_comm, neg_add_rev, neg_sub, sub_neg_eq_add]\n  field_simp\n  rw [add_comm (Complex.exp (-1)) (Complex.exp 1)]\n  simp"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "we find the integral is equal to $2\\pi i \\cosh(1)$.", "statement": "We assume:\n\u2022 $\\oint_C f(z) dz = 2\\pi i \\cos(i)$ [l3].\n\u2022 $\\cos(i) = \\cosh(1)$ [l4].\nTherefore, we conclude:\n\u2022 $\\oint_C f(z) dz = 2\\pi i \\cosh(1)$ [ts_1].", "dependencies": ["l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (C : Type) (f : C \u2192 \u2102)\n  (l3 : (\u222e (z : C), f z) = 2 * Complex.pi * Complex.I * Complex.cos Complex.I)\n  (l4 : Complex.cos Complex.I = Complex.cosh 1) :\n  (\u222e (z : C), f z) = 2 * Complex.pi * Complex.I * Complex.cosh 1 := by\nsorry", "lean_pass": false, "error_msg": [{"line": 7, "column": 18, "endLine": 7, "endColumn": 19, "data": "unexpected token ','; expected 'in'"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma ts_1\n  (f : \u2102 \u2192 \u2102)\n  (l3 : (\u222e f) = 2 * \u03c0 * I * cos I)\n  (l4 : cos I = cosh 1) :\n  (\u222e f) = 2 * \u03c0 * I * cosh 1 := by\n  rw [l3, l4]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 7, "column": 12, "endLine": 7, "endColumn": 13, "data": "unexpected token ')'; expected 'in'"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#fa2c07", "highlight": {"background": "#a3c2a8", "border": "#fa2c07"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    