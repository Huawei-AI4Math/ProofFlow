
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for any positive real numbers $a, b, c, d, e$ such that $a+b+c+d+e=5$, the following inequality holds: $a b c + b c d + c d e + d e a + e a b \leq 5$.

Proof: Let $a, b, c, d, e > 0$ with $a+b+c+d+e=5$. Define $P = abc+bcd+cde+dea+eab$. We can rewrite $P$ as $P = e(a+c)(b+d) + bc(a+d-e)$. By the AM–GM inequality, $(a+c)(b+d) \le \left(	frac{a+b+c+d}{2}ight)^2 = 	frac{(5-e)^2}{4}$, and thus $e(a+c)(b+d) \le 	frac{e(5-e)^2}{4}$. Similarly, applying AM–GM to three variables gives $bc(a+d-e) \le \left(	frac{a+b+c+d-e}{3}ight)^3 = 	frac{(5-2e)^3}{27}$. Therefore, $P \le rac{e(5-e)^2}{4} + rac{(5-2e)^3}{27}.$ Expanding the numerator yields $P \le rac{-5e^3 - 30e^2 + 75e + 500}{108}$. To finish, we check that this is at most $5$, which is equivalent to showing $(e-1)^2(e+8) \ge 0$. Since $e>0$, both factors are nonnegative, so the inequality holds. Hence, we conclude that $abc+bcd+cde+dea+eab \le 5$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $a, b, c, d, e > 0$", "statement": "Premise:\n\u2022 a, b, c, d, e are positive real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c d e : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that a, b, c, d, e are positive real numbers by declaring them as real numbers and explicitly stating the positivity conditions through the conjunction 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e. This is a complete and accurate formalization of the natural language statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "with $a+b+c+d+e=5$", "statement": "Premise:\n\u2022 a, b, c, d, e are positive real numbers [tc_1].\n\u2022 a+b+c+d+e=5 [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c d e : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n(tc_2 : a + b + c + d + e = 5)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that a, b, c, d, e are positive real numbers through the variable declaration and the positivity constraint tc_1", "The Lean formalization exactly matches the sum condition a + b + c + d + e = 5"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Define $P = abc+bcd+cde+dea+eab$.", "statement": "Definition:\n\u2022 Given positive real numbers a, b, c, d, e [tc_1], let P be the expression P = abc+bcd+cde+dea+eab [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c d e : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n(def_1 : P = a * b * c + b * c * d + c * d * e + d * e * a + e * a * b)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that a, b, c, d, e are real numbers and positive through the variable declaration and the constraint tc_1", "The Lean definition of P exactly matches the mathematical expression, with multiplication explicitly denoted using * operator and the same term order"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "We can rewrite $P$ as $P = e(a+c)(b+d) + bc(a+d-e)$.", "statement": "We assume:\n\u2022 a, b, c, d, e are positive real numbers [tc_1].\n\u2022 P = abc+bcd+cde+dea+eab [def_1].\nTherefore, we conclude:\n\u2022 P = e(a+c)(b+d) + bc(a+d-e) [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (P : \u211d) (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (def_1 : P = a * b * c + b * c * d + c * d * e + d * e * a + e * a * b) :\n  P = e * (a + c) * (b + d) + b * c * (a + d - e) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (P : \u211d) (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (def_1 : P = a * b * c + b * c * d + c * d * e + d * e * a + e * a * b) :\n  P = e * (a + c) * (b + d) + b * c * (a + d - e) := by\n  rw [def_1]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations and positivity constraints are correctly formalized. The Lean code properly declares all five variables as real numbers and captures the positivity constraint using conjunction of inequalities.", "The definition of P is accurately translated. All five terms (abc, bcd, cde, dea, eab) are correctly represented with explicit multiplication operators, maintaining the exact mathematical meaning.", "The conclusion statement is perfectly formalized. The algebraic expression e(a+c)(b+d) + bc(a+d-e) is correctly represented with proper operator precedence and parentheses.", "The overall logical structure is well-preserved. The natural language's assumption-conclusion format is appropriately translated into Lean's lemma structure with hypotheses and goal, maintaining the logical flow and dependencies."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "By the AM\u2013GM inequality, $(a+c)(b+d) \\le \\left(\\frac{a+b+c+d}{2}\\right)^2 = \\frac{(5-e)^2}{4}$", "statement": "We assume:\n\u2022 a, b, c, d, e are positive real numbers [tc_1].\n\u2022 a+b+c+d+e=5 [tc_2].\nTherefore, we conclude:\n\u2022 (a+c)(b+d) <= (5-e)^2/4 [l2].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5) :\n  (a + c) * (b + d) \u2264 ((5 - e) ^ 2) / 4 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5) :\n  (a + c) * (b + d) \u2264 ((5 - e) ^ 2) / 4 := by\n  let x := a + c\n  let y := b + d\n  have hxy : x + y = 5 - e := by\n    rw [\u2190 add_assoc, \u2190 add_assoc, \u2190 tc_2]\n    ring\n  have hpos : 0 < x \u2227 0 < y := by\n    constructor <;> (apply add_pos; cases tc_1; assumption)\n  rw [hxy]\n  apply mul_self_le_mul_self_div_four", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 21, "endLine": 13, "endColumn": 32, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a + (?b + ?c)\na b c d e : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e\ntc_2 : a + b + c + d + e = 5\nx : \u211d := a + c\ny : \u211d := b + d\n\u22a2 x + b + d = 5 - e"}, {"line": 16, "column": 48, "endLine": 16, "endColumn": 58, "data": "tactic 'assumption' failed\ncase right.ha.intro\na b c d e : \u211d\ntc_2 : a + b + c + d + e = 5\nx : \u211d := a + c\ny : \u211d := b + d\nhxy : x + y = 5 - e\nleft\u271d : 0 < a\nright\u271d : 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e\n\u22a2 0 < b"}, {"line": 17, "column": 6, "endLine": 17, "endColumn": 9, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  x + y\na b c d e : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e\ntc_2 : a + b + c + d + e = 5\nx : \u211d := a + c\ny : \u211d := b + d\nhxy : x + y = 5 - e\nhpos : 0 < x \u2227 0 < y\n\u22a2 (a + c) * (b + d) \u2264 (5 - e) ^ 2 / 4"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations and positivity constraints are correctly formalized in Lean, with the conjunction properly expressing that all five variables are positive reals.", "The sum constraint a+b+c+d+e=5 is directly and accurately translated to Lean syntax.", "The inequality conclusion (a+c)(b+d) <= (5-e)^2/4 is correctly formalized with proper operator precedence and mathematical notation.", "The logical structure properly captures the implication from assumptions to conclusion using Lean's lemma format with hypotheses as parameters.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l2 :\n    \u2203 (a b c d e : \u211d),\n    0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e \u2227\n    a + b + c + d + e = 5 \u2227\n    \u00ac((a + c) * (b + d) \u2264 ((5 - e) ^ 2) / 4) := by\n  refine \u27e81.5, 1.5, 1.5, 1.5, -1.0, ?_\u27e9\n  constructor\n  \u00b7 linarith\n  constructor\n  \u00b7 linarith\n  constructor\n  \u00b7 linarith\n  constructor\n  \u00b7 linarith\n  constructor\n  \u00b7 linarith\n  constructor\n  \u00b7 linarith\n  \u00b7 norm_num\n    linarith"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "and thus $e(a+c)(b+d) \\le \\frac{e(5-e)^2}{4}$.", "statement": "We assume:\n\u2022 e is a positive real number [tc_1].\n\u2022 (a+c)(b+d) <= (5-e)^2/4 [l2].\nTherefore, we conclude:\n\u2022 e(a+c)(b+d) <= e(5-e)^2/4 [l3].", "dependencies": ["tc_1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (l2 : (a + c) * (b + d) \u2264 ((5 - e) ^ 2) / 4) :\n  e * ((a + c) * (b + d)) \u2264 e * (((5 - e) ^ 2) / 4) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c d e : \u211d)\n  (tc_1 : 0 < e)\n  (l2 : (a + c) * (b + d) \u2264 ((5 - e) ^ 2) / 4) :\n  e * ((a + c) * (b + d)) \u2264 e * (((5 - e) ^ 2) / 4) := by\n  exact mul_le_mul_of_nonneg_left l2 tc_1.le", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly capture all mentioned variables as real numbers", "Positivity constraint includes additional variables (a,b,c,d) beyond what's explicitly stated, but this is acceptable as extra logically consistent details", "Inequality assumption l2 is perfectly translated with equivalent mathematical notation", "Conclusion l3 correctly captures multiplying both sides by e with proper parenthesization", "Overall logical structure correctly represents the mathematical reasoning from premises to conclusion"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Similarly, applying AM\u2013GM to three variables gives $bc(a+d-e) \\le \\left(\\frac{a+b+c+d-e}{3}\\right)^3 = \\frac{(5-2e)^3}{27}$.", "statement": "We assume:\n\u2022 a, b, c, d, e are positive real numbers [tc_1].\n\u2022 a+b+c+d+e=5 [tc_2].\nTherefore, we conclude:\n\u2022 bc(a+d-e) <= (5-2e)^3/27 [l4].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5) :\n  b * c * (a + d - e) \u2264 (5 - 2 * e) ^ 3 / 27 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5) :\n  b * c * (a + d - e) \u2264 (5 - 2 * e) ^ 3 / 27 := by\n  have ha := tc_1.1\n  have hb := tc_1.2.1\n  have hc := tc_1.2.2.1\n  have hd := tc_1.2.2.2.1\n  have he := tc_1.2.2.2.2\n  have sum_eq : b + c + (a + d - e) = 5 - e := by\n    rw [\u2190 add_assoc, \u2190 add_assoc, tc_2]\n    ring\n  have h_le : a + d - e \u2264 5 - 2 * e := by\n    rw [\u2190 sum_eq]\n    have : b + c \u2265 0 := add_nonneg (le_of_lt hb) (le_of_lt hc)\n    linarith\n  have h_prod : b * c * (a + d - e) \u2264 ((5 - e) / 3) ^ 3 := by\n    have := ArithmeticGeometricMean.arithmetic_mean_three_le_geometric_mean_three (b + c) (a + d - e) (5 - e)\n    rw [\u2190 sum_eq] at this\n    simp only [two_mul, add_sub_cancel] at this\n    refine le_trans ?_ this\n    refine mul_le_mul (mul_le_mul (le_refl b) (le_refl c) (le_of_lt hc) (le_of_lt hb)) (le_refl (a + d - e)) ?_ ?_\n    \u00b7 exact le_of_lt (by linarith [ha, hd, he])\n    \u00b7 exact mul_nonneg (mul_nonneg (le_of_lt hb) (le_of_lt hc)) (by linarith [ha, hd, he])\n  have h_ineq : ((5 - e) / 3) ^ 3 \u2264 ((5 - 2 * e) / 3) ^ 3 := by\n    refine pow_le_pow_of_le_left (div_nonneg (by linarith) (by norm_num)) ?_ 3\n    refine div_le_div_of_le (by norm_num) ?_\n    linarith\n  refine le_trans h_prod ?_\n  rw [div_pow, div_pow] at h_ineq\n  simp at h_ineq\n  exact h_ineq", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 8, "endLine": 16, "endColumn": 19, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a + (?b + ?c)\na b c d e : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e\ntc_2 : a + b + c + d + e = 5\nha : 0 < a\nhb : 0 < b\nhc : 0 < c\nhd : 0 < d\nhe : 0 < e\n\u22a2 b + c + (a + d - e) = 5 - e"}, {"line": 19, "column": 8, "endLine": 19, "endColumn": 16, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  5 - e\na b c d e : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e\ntc_2 : a + b + c + d + e = 5\nha : 0 < a\nhb : 0 < b\nhc : 0 < c\nhd : 0 < d\nhe : 0 < e\nsum_eq : b + c + (a + d - e) = 5 - e\n\u22a2 a + d - e \u2264 5 - 2 * e"}, {"line": 23, "column": 12, "endLine": 23, "endColumn": 81, "data": "unknown identifier 'ArithmeticGeometricMean.arithmetic_mean_three_le_geometric_mean_three'"}, {"line": 31, "column": 34, "endLine": 31, "endColumn": 72, "data": "failed to synthesize\n  GroupWithZero \u2115\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 31, "column": 49, "endLine": 31, "endColumn": 57, "data": "tactic failed, resulting expression contains metavariables\n  Linarith.lt_irrefl\n    (Eq.mp\n      (congrArg (fun _a => _a < 0)\n        (Mathlib.Tactic.Ring.of_eq\n          (Mathlib.Tactic.Ring.add_congr\n            (Mathlib.Tactic.Ring.neg_congr\n              (Mathlib.Tactic.Ring.cast_pos (Mathlib.Meta.NormNum.isNat_ofNat \u2124 (Eq.refl 1)))\n              (Mathlib.Tactic.Ring.neg_add\n                (Mathlib.Tactic.Ring.neg_one_mul\n                  (Mathlib.Meta.NormNum.IsInt.to_raw_eq\n                    (Mathlib.Meta.NormNum.isInt_mul (Eq.refl HMul.hMul)\n                      (Mathlib.Meta.NormNum.IsInt.of_raw \u2124 (Int.negOfNat 1))\n                      (Mathlib.Meta.NormNum.IsNat.to_isInt (Mathlib.Meta.NormNum.IsNat.of_raw \u2124 1))\n                      (Eq.refl (Int.negOfNat 1)))))\n                Mathlib.Tactic.Ring.neg_zero))\n            (Mathlib.Tactic.Ring.sub_congr\n              (Mathlib.Tactic.Ring.add_congr (Mathlib.Tactic.Ring.atom_pf \u21910)\n                (Mathlib.Tactic.Ring.cast_pos (Mathlib.Meta.NormNum.isNat_ofNat \u2124 (Eq.refl 1)))\n                (Mathlib.Tactic.Ring.add_pf_add_gt (Nat.rawCast 1)\n                  (Mathlib.Tactic.Ring.add_pf_add_zero (\u21910 ^ Nat.rawCast 1 * Nat.rawCast 1 + 0))))\n              (Mathlib.Tactic.Ring.atom_pf \u21910)\n              (Mathlib.Tactic.Ring.sub_pf\n                (Mathlib.Tactic.Ring.neg_add\n                  (Mathlib.Tactic.Ring.neg_mul (\u21910) (Nat.rawCast 1)\n                    (Mathlib.Tactic.Ring.neg_one_mul\n                      (Mathlib.Meta.NormNum.IsInt.to_raw_eq\n                        (Mathlib.Meta.NormNum.isInt_mul (Eq.refl HMul.hMul)\n                          (Mathlib.Meta.NormNum.IsInt.of_raw \u2124 (Int.negOfNat 1))\n                          (Mathlib.Meta.NormNum.IsNat.to_isInt (Mathlib.Meta.NormNum.IsNat.of_raw \u2124 1))\n                          (Eq.refl (Int.negOfNat 1))))))\n                  Mathlib.Tactic.Ring.neg_zero)\n                (Mathlib.Tactic.Ring.add_pf_add_lt (Nat.rawCast 1)\n                  (Mathlib.Tactic.Ring.add_pf_add_overlap_zero\n                    (Mathlib.Tactic.Ring.add_overlap_pf_zero (\u21910) (Nat.rawCast 1)\n                      (Mathlib.Meta.NormNum.IsInt.to_isNat\n                        (Mathlib.Meta.NormNum.isInt_add (Eq.refl HAdd.hAdd)\n                          (Mathlib.Meta.NormNum.IsNat.to_isInt (Mathlib.Meta.NormNum.IsNat.of_raw \u2124 1))\n                          (Mathlib.Meta.NormNum.IsInt.of_raw \u2124 (Int.negOfNat 1)) (Eq.refl (Int.ofNat 0)))))\n                    (Mathlib.Tactic.Ring.add_pf_zero_add 0)))))\n            (Mathlib.Tactic.Ring.add_pf_add_overlap_zero\n              (Mathlib.Meta.NormNum.IsInt.to_isNat\n                (Mathlib.Meta.NormNum.isInt_add (Eq.refl HAdd.hAdd)\n                  (Mathlib.Meta.NormNum.IsInt.of_raw \u2124 (Int.negOfNat 1))\n                  (Mathlib.Meta.NormNum.IsNat.to_isInt (Mathlib.Meta.NormNum.IsNat.of_raw \u2124 1))\n                  (Eq.refl (Int.ofNat 0))))\n              (Mathlib.Tactic.Ring.add_pf_zero_add 0)))\n          (Mathlib.Tactic.Ring.cast_zero (Mathlib.Meta.NormNum.isNat_ofNat \u2124 (Eq.refl 0)))))\n      (Linarith.add_lt_of_neg_of_le (neg_neg_of_pos Linarith.zero_lt_one)\n        (Linarith.sub_nonpos_of_le (Int.add_one_le_iff.mpr (id (Eq.mp (Mathlib.Tactic.Zify._auxLemma.3 0 0) a\u271d))))))"}, {"line": 31, "column": 60, "endLine": 31, "endColumn": 71, "data": "unsolved goals\na b c d e : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e\ntc_2 : a + b + c + d + e = 5\nha : 0 < a\nhb : 0 < b\nhc : 0 < c\nhd : 0 < d\nhe : 0 < e\nsum_eq : b + c + (a + d - e) = 5 - e\nh_le : a + d - e \u2264 5 - 2 * e\nh_prod : b * c * (a + d - e) \u2264 ((5 - e) / 3) ^ 3\n\u22a2 0 \u2264 ?m.3113"}, {"line": 32, "column": 4, "endLine": 32, "endColumn": 44, "data": "no goals to be solved"}, {"line": 36, "column": 2, "endLine": 36, "endColumn": 16, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations and positivity constraints are correctly captured with appropriate real number types and conjunction of inequalities", "The sum constraint a+b+c+d+e=5 is directly and accurately translated", "The inequality conclusion is correctly formalized with proper explicit multiplication notation and mathematical symbols", "The overall logical structure (assumptions leading to conclusion) is properly represented in the lemma format", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4_negation\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5) :\n  \u00ac b * c * (a + d - e) \u2264 (5 - 2 * e) ^ 3 / 27 := by\n  intro h\n  have h1 : b * c * (a + d - e) \u2264 (5 - 2 * e) ^ 3 / 27 := h\n  let a := 1\n  let b := 1\n  let c := 1\n  let d := 1\n  let e := 1\n  have tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e := by norm_num\n  have tc_2 : a + b + c + d + e = 5 := by norm_num\n  have h2 : (5 - 2 * e) ^ 3 / 27 < b * c * (a + d - e) := by norm_num\n  linarith [h1, h2]"}, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Therefore, $P \\le \\frac{e(5-e)^2}{4} + \\frac{(5-2e)^3}{27}.$", "statement": "We assume:\n\u2022 P = e(a+c)(b+d) + bc(a+d-e) [l1].\n\u2022 e(a+c)(b+d) <= e(5-e)^2/4 [l3].\n\u2022 bc(a+d-e) <= (5-2e)^3/27 [l4].\nTherefore, we conclude:\n\u2022 P <= e(5-e)^2/4 + (5-2e)^3/27 [l5].", "dependencies": ["l1", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (P a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l3 : e * ((a + c) * (b + d)) \u2264 e * (((5 - e) ^ 2) / 4))\n  (l4 : b * c * (a + d - e) \u2264 (5 - 2 * e) ^ 3 / 27) :\n  P \u2264 e * (5 - e) ^ 2 / 4 + (5 - 2 * e) ^ 3 / 27 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (P a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l3 : e * ((a + c) * (b + d)) \u2264 e * (((5 - e) ^ 2) / 4))\n  (l4 : b * c * (a + d - e) \u2264 (5 - 2 * e) ^ 3 / 27) :\n  P \u2264 e * (5 - e) ^ 2 / 4 + (5 - 2 * e) ^ 3 / 27 := by\n  rw [l1]\n  apply add_le_add\n  \u00b7 rw [mul_assoc]\n    exact l3\n  \u00b7 exact l4", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 8, "endLine": 14, "endColumn": 18, "data": "ambiguous term, use fully qualified name, possible interpretations [@_root_.add_le_add, @Nat.add_le_add]"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations and positivity constraints are correctly formalized", "The sum constraint provides necessary mathematical context for the problem", "Definition l1 is perfectly translated with explicit multiplication operators", "Inequality l3 is correctly formalized with proper parenthesization", "Inequality l4 is accurately captured with explicit operators", "The conclusion l5 correctly represents the target inequality to be proven", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5 :\n  \u2203 (P a b c d e : \u211d),\n  (0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e) \u2227\n  (a + b + c + d + e = 5) \u2227\n  (P = e * (a + c) * (b + d) + b * c * (a + d - e)) \u2227\n  (e * ((a + c) * (b + d)) \u2264 e * (((5 - e) ^ 2) / 4)) \u2227\n  (b * c * (a + d - e) \u2264 (5 - 2 * e) ^ 3 / 27) \u2227\n  \u00ac (P \u2264 e * (5 - e) ^ 2 / 4 + (5 - 2 * e) ^ 3 / 27) := by\n  let a : \u211d := 1\n  let b : \u211d := 1\n  let c : \u211d := 1\n  let d : \u211d := 1\n  let e : \u211d := 1\n  let P : \u211d := e * (a + c) * (b + d) + b * c * (a + d - e)\n  refine \u27e8P, a, b, c, d, e, ?_, ?_, ?_, ?_, ?_, ?_\u27e9\n  \u00b7 norm_num\n  \u00b7 norm_num\n  \u00b7 simp [P]\n  \u00b7 norm_num\n  \u00b7 norm_num\n  \u00b7 simp [P]\n    norm_num"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "Expanding the numerator yields $P \\le \\frac{-5e^3 - 30e^2 + 75e + 500}{108}$.", "statement": "We assume:\n\u2022 P <= e(5-e)^2/4 + (5-2e)^3/27 [l5].\nTherefore, we conclude:\n\u2022 P <= (-5e^3 - 30e^2 + 75e + 500)/108 [l6].", "dependencies": ["l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (P e : \u211d)\n  (l5 : P \u2264 e * (5 - e) ^ 2 / 4 + (5 - 2 * e) ^ 3 / 27) :\n  P \u2264 (-5 * e ^ 3 - 30 * e ^ 2 + 75 * e + 500) / 108 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (P e : \u211d)\n  (l5 : P \u2264 e * (5 - e) ^ 2 / 4 + (5 - 2 * e) ^ 3 / 27) :\n  P \u2264 (-5 * e ^ 3 - 30 * e ^ 2 + 75 * e + 500) / 108 := by\n  have h1 : e * (5 - e) ^ 2 / 4 = (e ^ 3 - 10 * e ^ 2 + 25 * e) / 4 := by\n    ring\n  have h2 : (5 - 2 * e) ^ 3 / 27 = (-8 * e ^ 3 + 60 * e ^ 2 - 150 * e + 125) / 27 := by\n    ring\n  rw [h1, h2] at l5\n  have h3 : (e ^ 3 - 10 * e ^ 2 + 25 * e) / 4 + (-8 * e ^ 3 + 60 * e ^ 2 - 150 * e + 125) / 27 = \n      (-5 * e ^ 3 - 30 * e ^ 2 + 75 * e + 500) / 108 := by\n    ring\n  rw [h3] at l5\n  exact l5", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify P and e as real numbers, matching the implicit assumption in natural language", "The premise l5 is perfectly translated with identical mathematical content, just using explicit multiplication notation required by Lean", "The conclusion matches exactly with the same polynomial expression and inequality", "The logical structure correctly captures the deductive reasoning from assumption l5 to conclusion l6 using Lean's lemma format"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "To finish, we check that this is at most $5$, which is equivalent to showing $(e-1)^2(e+8) \\ge 0$.", "statement": "We assume:\n\u2022 e is a real number [tc_1].\nTherefore, we conclude:\n\u2022 The inequality (-5e^3 - 30e^2 + 75e + 500)/108 <= 5 is equivalent to (e-1)^2(e+8) >= 0 [l7].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (e : \u211d)\n  (tc_1 : 0 < e) :\n  (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (e : \u211d)\n  (tc_1 : 0 < e) :\n  (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0 := by\n  constructor\n  \u00b7 intro h\n    have h1 : -5 * e^3 - 30 * e^2 + 75 * e + 500 \u2264 540 := by\n      rw [\u2190 mul_le_mul_right (by norm_num : (0:\u211d) < 108)]\n      simp only [mul_div_cancel' _ (by norm_num : (108:\u211d) \u2260 0)]\n      exact h\n    have h2 : -5 * e^3 - 30 * e^2 + 75 * e - 40 \u2264 0 := by linarith\n    have h3 : -5 * (e^3 + 6 * e^2 - 15 * e + 8) \u2264 0 := by\n      linear_combination h2\n    have h4 : e^3 + 6 * e^2 - 15 * e + 8 \u2265 0 := by\n      rw [\u2190 neg_le_neg_iff, neg_zero, neg_mul] at h3\n      exact h3\n    have h5 : (e - 1)^2 * (e + 8) = e^3 + 6 * e^2 - 15 * e + 8 := by ring\n    rw [h5]\n    exact h4\n  \u00b7 intro h\n    have h1 : (e - 1)^2 * (e + 8) = e^3 + 6 * e^2 - 15 * e + 8 := by ring\n    rw [h1] at h\n    have h2 : -5 * (e^3 + 6 * e^2 - 15 * e + 8) \u2264 0 := by\n      rw [\u2190 neg_le_neg_iff, neg_zero, neg_mul]\n      exact h\n    have h3 : -5 * e^3 - 30 * e^2 + 75 * e - 40 \u2264 0 := by\n      linear_combination h2\n    have h4 : -5 * e^3 - 30 * e^2 + 75 * e + 500 \u2264 540 := by linarith\n    rw [\u2190 mul_le_mul_right (by norm_num : (0:\u211d) < 108)] at h4\n    simp only [mul_div_cancel' _ (by norm_num : (108:\u211d) \u2260 0)] at h4\n    exact h4", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 6, "endLine": 13, "endColumn": 63, "data": "simp made no progress"}, {"line": 20, "column": 6, "endLine": 20, "endColumn": 14, "data": "type mismatch\n  h3\nhas type\n  0 \u2264 - -(5 * (e ^ 3 + 6 * e ^ 2 - 15 * e + 8)) : Prop\nbut is expected to have type\n  e ^ 3 + 6 * e ^ 2 - 15 * e + 8 \u2265 0 : Prop"}, {"line": 29, "column": 6, "endLine": 29, "endColumn": 13, "data": "type mismatch\n  h\nhas type\n  e ^ 3 + 6 * e ^ 2 - 15 * e + 8 \u2265 0 : Prop\nbut is expected to have type\n  0 \u2264 - -(5 * (e ^ 3 + 6 * e ^ 2 - 15 * e + 8)) : Prop"}, {"line": 34, "column": 4, "endLine": 34, "endColumn": 67, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the natural language statement. The variable e is properly declared as a real number, and the equivalence between the two inequalities is accurately represented using the biconditional operator (\u2194). The additional constraint (0 < e) is an extra condition not mentioned in the natural language, but this is acceptable according to the guidelines as it doesn't contradict the original statement and may be necessary for the mathematical validity of the equivalence.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l7 :\n  \u2203 e : \u211d, 0 < e \u2227 \u00ac ((-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0) := by\n  use 2\n  constructor\n  \u00b7 norm_num\n  \u00b7 intro h\n    have h1 : (-5 * 2^3 - 30 * 2^2 + 75 * 2 + 500) / 108 \u2264 5 := by norm_num\n    have h2 := h.mp h1\n    have h3 : (2 - 1)^2 * (2 + 8) \u2265 0 := by norm_num\n    have h4 : \u00ac((-5 * 2^3 - 30 * 2^2 + 75 * 2 + 500) / 108 \u2264 5) := by norm_num\n    exact h4 h1"}, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "Since $e>0$, both factors are nonnegative, so the inequality holds.", "statement": "We assume:\n\u2022 e is a positive real number [tc_1].\nTherefore, we conclude:\n\u2022 (e-1)^2(e+8) >= 0 [l8].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (e : \u211d)\n  (tc_1 : 0 < e) :\n  (e - 1)^2 * (e + 8) \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (e : \u211d)\n  (tc_1 : 0 < e) :\n  (e - 1)^2 * (e + 8) \u2265 0 := by\n  have h1 : (e - 1)^2 \u2265 0 := by apply pow_two_nonneg\n  have h2 : e + 8 > 0 := by linarith\n  exact mul_nonneg h1 (le_of_lt h2)", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the natural language statement. The assumption that e is a positive real number is properly represented through the type declaration (e : \u211d) and constraint (0 < e). The mathematical expression (e-1)\u00b2(e+8) \u2265 0 is accurately formalized with explicit multiplication notation. All logical components from the natural language are preserved in the Lean code."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Hence, we conclude that $abc+bcd+cde+dea+eab \\le 5$.", "statement": "We assume:\n\u2022 P <= (-5e^3 - 30e^2 + 75e + 500)/108 [l6].\n\u2022 The inequality (-5e^3 - 30e^2 + 75e + 500)/108 <= 5 is equivalent to (e-1)^2(e+8) >= 0 [l7].\n\u2022 (e-1)^2(e+8) >= 0 [l8].\nTherefore, we conclude:\n\u2022 P <= 5 [ts_1].", "dependencies": ["l6", "l7", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (P e : \u211d)\n  (l6 : P \u2264 (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108)\n  (l7 : (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0)\n  (l8 : (e - 1)^2 * (e + 8) \u2265 0) :\n  P \u2264 5 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (P e : \u211d)\n  (l6 : P \u2264 (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108)\n  (l7 : (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0)\n  (l8 : (e - 1)^2 * (e + 8) \u2265 0) :\n  P \u2264 5 := by\n  have h := (l7.2 l8)\n  exact le_trans l6 h", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly capture P and e as real numbers", "Assumption l6 is faithfully translated with the exact mathematical expression", "Assumption l7 correctly uses the biconditional (\u2194) to represent 'is equivalent to' with matching expressions on both sides", "Assumption l8 accurately represents the inequality with explicit multiplication notation", "The conclusion P \u2264 5 is properly stated as the lemma's goal", "The overall logical structure preserves the deductive reasoning from the three assumptions to the conclusion"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    