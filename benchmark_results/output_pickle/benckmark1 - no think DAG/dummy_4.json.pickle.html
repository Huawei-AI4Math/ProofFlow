
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $A$ be a $2 	imes 2$ real matrix with eigenvalues $\lambda_1 = 3$ and $\lambda_2 = -2$. Then $\det(A) = -6$ and $	ext{trace}(A) = 1$.

Proof: For any square matrix, the determinant equals the product of its eigenvalues. Since $A$ has eigenvalues $\lambda_1 = 3$ and $\lambda_2 = -2$, we have $\det(A) = \lambda_1 \cdot \lambda_2 = 3 \cdot (-2) = -6$. Similarly, the trace of a matrix equals the sum of its eigenvalues. Therefore $	ext{trace}(A) = \lambda_1 + \lambda_2 = 3 + (-2) = 1$. These relationships follow from the characteristic polynomial $\det(A - \lambda I) = \lambda^2 - 	ext{trace}(A)\lambda + \det(A)$, whose roots are the eigenvalues.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $A$ be a $2 \times 2$ real matrix", "statement": "Premise:\n\u2022 $A$ is a $2 \\times 2$ real matrix [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (A : Matrix (Fin 2) (Fin 2) \u211d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `A : Matrix (Fin 2) (Fin 2) \u211d` perfectly captures that A is a 2\u00d72 real matrix. `Fin 2` provides exactly 2 indices (0,1) for both rows and columns, and `\u211d` specifies real entries."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "with eigenvalues $\\lambda_1 = 3$ and $\\lambda_2 = -2$", "statement": "Premise:\n\u2022 $A$ is a $2 \\times 2$ real matrix [tc_1]\n\u2022 The eigenvalues of $A$ are $\\lambda_1 = 3$ and $\\lambda_2 = -2$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (A : Matrix (Fin 2) (Fin 2) \u211d)\n(tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `A : Matrix (Fin 2) (Fin 2) \u211d` correctly captures that A is a 2\u00d72 real matrix. `Fin 2` represents the index set {0,1} for a 2\u00d72 matrix, and \u211d represents real numbers.", "The Lean condition correctly formalizes the eigenvalue condition. The existence of non-zero vectors v1 and v2 such that `A.vecMul v1 = 3 \u2022 v1` and `A.vecMul v2 = -2 \u2022 v2` is the precise mathematical definition of having eigenvalues 3 and -2. The `vecMul` operation and scalar multiplication `\u2022` correctly represent the eigenvalue equation Av = \u03bbv."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "These relationships follow from the characteristic polynomial $\\det(A - \\lambda I) = \\lambda^2 - \text{trace}(A)\\lambda + \\det(A)$, whose roots are the eigenvalues.", "statement": "Definition:\n\u2022 For a $2 \\times 2$ matrix $M$, its characteristic polynomial is $p(\\lambda) = \\det(M - \\lambda I)$. This polynomial can be expressed as $p(\\lambda) = \\lambda^2 - \text{trace}(M)\\lambda + \\det(M)$ and its roots are the eigenvalues of $M$ [def_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (M : Matrix (Fin n) (Fin n) \u211d)\n(def_1 : \u2200 (\u03bb : \u211d), det (M - \u03bb \u2022 Matrix.diag fun _ => (1 : \u211d)) = \u03bb^2 - (trace M) * \u03bb + det M)", "lean_pass": false, "error_msg": [{"line": 6, "column": 12, "endLine": 6, "endColumn": 13, "data": "unexpected token '\u03bb'; expected '_' or identifier"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "For any square matrix, the determinant equals the product of its eigenvalues.", "statement": "We assume:\n\u2022 For a $2 \\times 2$ matrix $M$, its characteristic polynomial is $p(\\lambda) = \\lambda^2 - \text{trace}(M)\\lambda + \\det(M)$ and its roots, the eigenvalues $\\lambda_1, \\lambda_2$, satisfy $p(\\lambda) = (\\lambda - \\lambda_1)(\\lambda - \\lambda_2)$ [def_1].\nTherefore, we conclude:\n\u2022 For a $2 \\times 2$ matrix $M$ with eigenvalues $\\lambda_1, \\lambda_2$, its determinant is $\\det(M) = \\lambda_1 \\cdot \\lambda_2$ [l1].", "dependencies": ["def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115} (hn : n = 2) (M : Matrix (Fin n) (Fin n) \u211d) (lambda1 lambda2 : \u211d)\n  (def_1 : \u2200 (p : \u211d \u2192 \u211d), (\u2200 (l : \u211d), p l = l^2 - (Matrix.trace M) * l + Matrix.det M) \u2192 (\u2200 (l : \u211d), p l = (l - lambda1) * (l - lambda2)) \u2192 (p lambda1 = 0 \u2227 p lambda2 = 0)) :\n  Matrix.det M = lambda1 * lambda2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 4}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115} (hn : n = 2) (M : Matrix (Fin n) (Fin n) \u211d) (lambda1 lambda2 : \u211d)\n  (def_1 : \u2200 (p : \u211d \u2192 \u211d), (\u2200 (l : \u211d), p l = l^2 - (Matrix.trace M) * l + Matrix.det M) \u2192 (\u2200 (l : \u211d), p l = (l - lambda1) * (l - lambda2)) \u2192 (p lambda1 = 0 \u2227 p lambda2 = 0)) :\n  Matrix.det M = lambda1 * lambda2 := by\n  let p := fun l => l^2 - (Matrix.trace M) * l + Matrix.det M\n  have h1 : \u2200 l, p l = l^2 - (Matrix.trace M) * l + Matrix.det M := by simp [p]\n  have h2 : \u2200 l, p l = (l - lambda1) * (l - lambda2) := by\n    intro l\n    rw [h1]\n    ring\n    rw [mul_sub, sub_mul, mul_comm l lambda1, mul_comm l lambda2]\n    ring\n  have h3 := def_1 p h1 h2\n  cases h3 with | intro hlambda1 hlambda2 =>\n    rw [p] at hlambda1\n    simp at hlambda1\n    rw [p] at hlambda2\n    simp at hlambda2\n    have eq1 : Matrix.det M = -lambda1^2 + (Matrix.trace M) * lambda1 := by linarith\n    have eq2 : Matrix.det M = -lambda2^2 + (Matrix.trace M) * lambda2 := by linarith\n    rw [eq1, eq2]\n    ring\n    have : (lambda1 - lambda2) * (Matrix.trace M - (lambda1 + lambda2)) = 0 := by ring\n    cases (mul_eq_zero.mp this) with\n    | inl h =>\n      have : lambda1 = lambda2 := by linarith\n      rw [this]\n      ring\n    | inr h =>\n      have : Matrix.trace M = lambda1 + lambda2 := by linarith\n      rw [this]\n      ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 8, "endLine": 15, "endColumn": 15, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a * (?b - ?c)\nn : \u2115\nhn : n = 2\nM : Matrix (Fin n) (Fin n) \u211d\nlambda1 lambda2 : \u211d\ndef_1 :\n  \u2200 (p : \u211d \u2192 \u211d),\n    (\u2200 (l : \u211d), p l = l ^ 2 - M.trace * l + M.det) \u2192\n      (\u2200 (l : \u211d), p l = (l - lambda1) * (l - lambda2)) \u2192 p lambda1 = 0 \u2227 p lambda2 = 0\np : \u211d \u2192 \u211d := fun l => l ^ 2 - M.trace * l + M.det\nh1 : \u2200 (l : \u211d), p l = l ^ 2 - M.trace * l + M.det\nl : \u211d\n\u22a2 -(l * M.trace) + l ^ 2 + M.det = -(l * lambda1) - l * lambda2 + l ^ 2 + lambda1 * lambda2"}, {"line": 19, "column": 8, "endLine": 19, "endColumn": 9, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  \u211d\ncase intro\nn : \u2115\nhn : n = 2\nM : Matrix (Fin n) (Fin n) \u211d\nlambda1 lambda2 : \u211d\ndef_1 :\n  \u2200 (p : \u211d \u2192 \u211d),\n    (\u2200 (l : \u211d), p l = l ^ 2 - M.trace * l + M.det) \u2192\n      (\u2200 (l : \u211d), p l = (l - lambda1) * (l - lambda2)) \u2192 p lambda1 = 0 \u2227 p lambda2 = 0\np : \u211d \u2192 \u211d := fun l => l ^ 2 - M.trace * l + M.det\nh1 : \u2200 (l : \u211d), p l = l ^ 2 - M.trace * l + M.det\nh2 : \u2200 (l : \u211d), p l = (l - lambda1) * (l - lambda2)\nhlambda1 : p lambda1 = 0\nhlambda2 : p lambda2 = 0\n\u22a2 M.det = lambda1 * lambda2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The matrix dimension specification correctly captures the 2\u00d72 constraint using parametric types.", "The characteristic polynomial formula is correctly formalized with the standard quadratic form.", "The factored form with eigenvalues is correctly represented.", "The eigenvalue property (being roots) is correctly captured.", "The conclusion about determinant equals product of eigenvalues is correctly stated.", "The logical structure is slightly different - def_1 is formalized as a conditional statement rather than a direct mathematical fact, but the mathematical content is preserved.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.83 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  {n : \u2115} (hn : n = 2) (M : Matrix (Fin n) (Fin n) \u211d) (lambda1 lambda2 : \u211d)\n  (def_1 : \u2200 (p : \u211d \u2192 \u211d), (\u2200 (l : \u211d), p l = l^2 - (Matrix.trace M) * l + Matrix.det M) \u2192 (\u2200 (l : \u211d), p l = (l - lambda1) * (l - lambda2)) \u2192 (p lambda1 = 0 \u2227 p lambda2 = 0)) :\n  \u00ac (Matrix.det M = lambda1 * lambda2) := by\n  let M : Matrix (Fin 2) (Fin 2) \u211d := !![1, 0; 0, 1]\n  have hM : Matrix.det M = 1 := by simp [Matrix.det_fin_two]\n  have h\u03bb : \u2200 p, (\u2200 l, p l = l^2 - (Matrix.trace M) * l + Matrix.det M) \u2192 (\u2200 l, p l = (l - 1) * (l - 1)) \u2192 (p 1 = 0 \u2227 p 1 = 0) := by\n    intro p h1 h2\n    simp [h1, h2, Matrix.trace]\n    constructor <;> rfl\n  intro h\n  simp [hM] at h\n  exact one_ne_zero (by simpa using h)"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "the trace of a matrix equals the sum of its eigenvalues.", "statement": "We assume:\n\u2022 For a $2 \\times 2$ matrix $M$, its characteristic polynomial is $p(\\lambda) = \\lambda^2 - \text{trace}(M)\\lambda + \\det(M)$ and its roots, the eigenvalues $\\lambda_1, \\lambda_2$, satisfy $p(\\lambda) = (\\lambda - \\lambda_1)(\\lambda - \\lambda_2)$ [def_1].\nTherefore, we conclude:\n\u2022 For a $2 \\times 2$ matrix $M$ with eigenvalues $\\lambda_1, \\lambda_2$, its trace is $\text{trace}(M) = \\lambda_1 + \\lambda_2$ [l2].", "dependencies": ["def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {M : Matrix (Fin 2) (Fin 2) \u211d} {\u03bb : \u211d} {\u03bb1 \u03bb2 : \u211d}\n  (def_1 : (\u2200 (M : Matrix (Fin 2) (Fin 2) \u211d) (\u03bb : \u211d), (charpoly M) \u03bb = \u03bb^2 - (trace M) * \u03bb + det M) \u2227 (\u2200 (M : Matrix (Fin 2) (Fin 2) \u211d) (\u03bb1 \u03bb2 : \u211d), (charpoly M) \u03bb = (\u03bb - \u03bb1) * (\u03bb - \u03bb2))) :\n  trace M = \u03bb1 + \u03bb2 := by\nsorry", "lean_pass": false, "error_msg": [{"line": 6, "column": 34, "endLine": 6, "endColumn": 35, "data": "unexpected token '\u03bb'; expected '_' or identifier"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {M : Matrix (Fin 2) (Fin 2) \u211d} {\u03bb \u03bb1 \u03bb2 : \u211d}\n  (def_1 : (\u2200 (M : Matrix (Fin 2) (Fin 2) \u211d) (\u03bb : \u211d), (charpoly M) \u03bb = \u03bb^2 - (trace M) * \u03bb + det M) \u2227 (\u2200 (M : Matrix (Fin 2) (Fin 2) \u211d) (\u03bb1 \u03bb2 : \u211d), (charpoly M) \u03bb = (\u03bb - \u03bb1) * (\u03bb - \u03bb2))) :\n  trace M = \u03bb1 + \u03bb2 := by\n  have h1 := def_1.1 M \u03bb\n  have h2 := def_1.2 M \u03bb1 \u03bb2\n  simp [charpoly] at h1\n  simp at h2\n  rw [h2] at h1\n  simp at h1\n  linear_combination h1", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 6, "column": 34, "endLine": 6, "endColumn": 35, "data": "unexpected token '\u03bb'; expected '_' or identifier"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Since $A$ has eigenvalues $\\lambda_1 = 3$ and $\\lambda_2 = -2$, we have $\\det(A) = \\lambda_1 \\cdot \\lambda_2 = 3 \\cdot (-2) = -6$.", "statement": "We assume:\n\u2022 $A$ is a $2 \\times 2$ real matrix [tc_1]\n\u2022 The eigenvalues of $A$ are $\\lambda_1 = 3$ and $\\lambda_2 = -2$ [tc_2]\n\u2022 For a $2 \\times 2$ matrix $M$ with eigenvalues $\\lambda_1, \\lambda_2$, its determinant is $\\det(M) = \\lambda_1 \\cdot \\lambda_2$ [l1]\nTherefore, we conclude:\n\u2022 $\\det(A) = -6$ [ts_1].", "dependencies": ["tc_1", "tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2)\n  (l1 : Matrix.det A = 3 * -2) :\n  Matrix.det A = -6 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2)\n  (l1 : Matrix.det A = 3 * -2) :\n  Matrix.det A = -6 := by\n  rw [l1]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Matrix A is correctly declared as a 2\u00d72 real matrix using appropriate Lean syntax.", "The eigenvalue condition tc_2 only establishes existence of eigenvectors for values 3 and -2, but doesn't ensure these are the complete set of eigenvalues. The natural language clearly states these ARE the eigenvalues (implying completeness), while Lean only shows they exist among possibly others.", "The general principle l1 about determinant-eigenvalue relationship is replaced with a specific assumption about matrix A. While this preserves the logical flow, it changes the structure from applying a general principle to assuming the specific result.", "The conclusion correctly states that the determinant of A equals -6.", "The overall logical structure is maintained - given the assumptions, the conclusion follows. However, the formalization approach differs from the natural language presentation."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Matrix A is correctly declared as a 2\u00d72 real matrix using appropriate Lean syntax.', \"The eigenvalue condition tc_2 only establishes existence of eigenvectors for values 3 and -2, but doesn't ensure these are the complete set of eigenvalues. The natural language clearly states these ARE the eigenvalues (implying completeness), while Lean only shows they exist among possibly others.\", 'The general principle l1 about determinant-eigenvalue relationship is replaced with a specific assumption about matrix A. While this preserves the logical flow, it changes the structure from applying a general principle to assuming the specific result.', 'The conclusion correctly states that the determinant of A equals -6.', 'The overall logical structure is maintained - given the assumptions, the conclusion follows. However, the formalization approach differs from the natural language presentation.']"}, "solved_negation": null, "type": "solution"}, "ts_2": {"id": "ts_2", "natural_language": "Similarly, the trace of a matrix equals the sum of its eigenvalues. Therefore $\text{trace}(A) = \\lambda_1 + \\lambda_2 = 3 + (-2) = 1$.", "statement": "We assume:\n\u2022 $A$ is a $2 \\times 2$ real matrix [tc_1]\n\u2022 The eigenvalues of $A$ are $\\lambda_1 = 3$ and $\\lambda_2 = -2$ [tc_2]\n\u2022 For a $2 \\times 2$ matrix $M$ with eigenvalues $\\lambda_1, \\lambda_2$, its trace is $\text{trace}(M) = \\lambda_1 + \\lambda_2$ [l2]\nTherefore, we conclude:\n\u2022 $\text{trace}(A) = 1$ [ts_2].", "dependencies": ["tc_1", "tc_2", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : A.det = A.det) -- Placeholder for tc_1 definition if it were provided.\n  (tc_2 : (\u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2) )\n  (l2 : \u2200 (M : Matrix (Fin 2) (Fin 2) \u211d) (lam1 lam2 : \u211d), (\u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 M.vecMul v1 = lam1 \u2022 v1 \u2227 M.vecMul v2 = lam2 \u2022 v2) \u2192 Matrix.trace M = lam1 + lam2) :\n  Matrix.trace A = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 3}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : A.det = A.det)\n  (tc_2 : (\u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = (3 : \u211d) \u2022 v1 \u2227 A.vecMul v2 = (-2) \u2022 v2) )\n  (l2 : \u2200 (M : Matrix (Fin 2) (Fin 2) \u211d) (lam1 lam2 : \u211d), (\u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 M.vecMul v1 = lam1 \u2022 v1 \u2227 M.vecMul v2 = lam2 \u2022 v2) \u2192 Matrix.trace M = lam1 + lam2) :\n  Matrix.trace A = 1 := by\n  have h := l2 A 3 (-2) tc_2\n  rw [h]\n  norm_num", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 24, "endLine": 11, "endColumn": 28, "data": "application type mismatch\n  l2 A 3 (-2) tc_2\nargument\n  tc_2\nhas type\n  \u2203 v1 v2, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 Matrix.vecMul v1 A = 3 \u2022 v1 \u2227 Matrix.vecMul v2 A = -(2 : \u2124) \u2022 v2 : Prop\nbut is expected to have type\n  \u2203 v1 v2, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 Matrix.vecMul v1 A = 3 \u2022 v1 \u2227 Matrix.vecMul v2 A = -(2 : \u211d) \u2022 v2 : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The matrix type declaration correctly captures a 2\u00d72 real matrix.", "The placeholder for tc_1 is appropriate since tc_1 is not defined in the natural language.", "The eigenvalue condition correctly formalizes the existence of eigenvectors with eigenvalues 3 and -2, though it doesn't explicitly ensure these are the only eigenvalues. For a 2\u00d72 matrix, this is typically sufficient but represents a minor structural difference.", "The trace lemma correctly formalizes the relationship between eigenvalues and trace for matrices with the specified eigenvalue structure.", "The conclusion correctly states that the trace of A equals 1.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.8 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_2\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : A.det = A.det)\n  (tc_2 : (\u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = (3 : \u211d) \u2022 v1 \u2227 A.vecMul v2 = (-2 : \u211d) \u2022 v2) )\n  (l2 : \u2200 (M : Matrix (Fin 2) (Fin 2) \u211d) (lam1 lam2 : \u211d), (\u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 M.vecMul v1 = lam1 \u2022 v1 \u2227 M.vecMul v2 = lam2 \u2022 v2) \u2192 Matrix.trace M = lam1 + lam2) :\n  \u00ac Matrix.trace A = 1 := by\n  intro h\n  have h_trace := l2 A 3 (-2) tc_2\n  rw [h_trace] at h\n  norm_num at h"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    