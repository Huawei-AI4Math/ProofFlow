
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $(a_n)$ be a sequence defined by $a_n = \frac{n^2-1}{3n^2+n}$. The limit of the sequence $(a_n)$ is $\frac{1}{3}$.

Proof: To find the limit of the sequence $(a_n)$, we evaluate the expression $\lim_{n 	o \infty} \frac{n^2-1}{3n^2+n}$. We can divide both the numerator and the denominator by the highest power of $n$, which is $n^2$. This gives us $\lim_{n 	o \infty} \frac{(n^2/n^2)-(1/n^2)}{(3n^2/n^2)+(n/n^2)} = \lim_{n 	o \infty} \frac{1-1/n^2}{3+1/n}$. We know that as $n$ approaches infinity, the terms $1/n^2$ and $1/n$ approach $0$. Therefore, we can substitute $0$ for these terms in the expression, which gives us $\frac{1-0}{3+0}$. This simplifies to $\frac{1}{3}$. So, the limit of the sequence $(a_n)$ is $\frac{1}{3}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $(a_n)$ be a sequence defined by $a_n = \\frac{n^2-1}{3n^2+n}$.", "statement": "Premise:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n^2-1}{3n^2+n}$ for $n \\in \\mathbb{N}$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.67, "semantic_feedback": ["The Lean declaration `(a : \u2115 \u2192 \u211d)` perfectly captures the concept of a sequence of real numbers", "The Lean formula with explicit type casting to reals correctly represents the mathematical expression, and the universal quantifier covers all natural numbers as required", "The well-definedness conclusion is implicitly captured in the Lean formalization through the type system and universal quantification, but is not explicitly stated as a separate proposition. The logical meaning is preserved but the structure is slightly different"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "We can divide both the numerator and the denominator by the highest power of $n$, which is $n^2$. This gives us $\\lim_{n \\to \\infty} \\frac{(n^2/n^2)-(1/n^2)}{(3n^2/n^2)+(n/n^2)} = \\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n}$.", "statement": "We assume:\n\u2022 The sequence $(a_n)$ is defined by $a_n = \\frac{n^2-1}{3n^2+n}$ [tc_1]\nTherefore, we conclude:\n\u2022 For $n \\in \\mathbb{N}$ and $n \\neq 0$, the expression for $a_n$ is algebraically equivalent to $\\frac{1 - 1/n^2}{3 + 1/n}$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (n : \u2115) (hn : n \u2260 0) :\n  a n = (1 - 1/ (n : \u211d)^2) / (3 + 1 / (n : \u211d)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (n : \u2115) (hn : n \u2260 0) :\n  a n = (1 - 1/ (n : \u211d)^2) / (3 + 1 / (n : \u211d)) := by\n  rw [tc_1]\n  have n_ne_zero : (n : \u211d) \u2260 0 := by exact mod_cast hn\n  field_simp\n  rw [div_div]\n  congr 1\n  \u00b7 ring\n  \u00b7 ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 6, "endLine": 13, "endColumn": 13, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a / ?b / ?c\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n : \u2115), a n = (\u2191n ^ 2 - 1) / (3 * \u2191n ^ 2 + \u2191n)\nn : \u2115\nhn : n \u2260 0\nn_ne_zero : \u2191n \u2260 0\n\u22a2 (\u2191n ^ 2 - 1) * (\u2191n ^ 2 * (3 * \u2191n + 1)) = (\u2191n ^ 2 - 1) * \u2191n * (3 * \u2191n ^ 2 + \u2191n)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition is correctly formalized with proper type declarations and the exact mathematical formula with appropriate type coercions from natural numbers to real numbers.", "The conclusion statement perfectly captures the domain restrictions (n \u2208 \u2115, n \u2260 0), the algebraic equivalence as an equality, and the target simplified expression with correct mathematical structure and type handling.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d)) :\n  \u2203 n : \u2115, n \u2260 0 \u2227 a n \u2260 (1 - 1/ (n : \u211d)^2) / (3 + 1 / (n : \u211d)) := by\n  use 1\n  constructor\n  \u00b7 simp\n  \u00b7 simp [tc_1]\n    field_simp\n    norm_num"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "We know that as $n$ approaches infinity, the terms $1/n^2$ ... approach $0$.", "statement": "We assume:\n\u2022 (General knowledge of limits)\nTherefore, we conclude:\n\u2022 The limit of the sequence $(\\frac{1}{n^2})$ as $n \\to \\infty$ is 0 [l2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2 :\n  Filter.Tendsto (fun n : \u2115 \u21a6 1 / (n : \u211d)^2) Filter.atTop 0 := by\nsorry", "lean_pass": false, "error_msg": [{"line": 6, "column": 58, "endLine": 6, "endColumn": 59, "data": "failed to synthesize\n  OfNat (Filter \u211d) 0\nnumerals are polymorphic in Lean, but the numeral `0` cannot be used in a context where the expected type is\n  Filter \u211d\ndue to the absence of the instance above\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2 :\n  Filter.Tendsto (fun n : \u2115 \u21a6 1 / (n : \u211d)^2) Filter.atTop (\ud835\udcdd 0) := by\n  simp_rw [\u2190one_div]\n  apply tendsto_one_div_atTop_nhds_zero_nat.comp (tendsto_pow_atTop_atTop_of_one_lt one_lt_two)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 7, "column": 11, "endLine": 7, "endColumn": 19, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "We know that as $n$ approaches infinity, the terms ... and $1/n$ approach $0$.", "statement": "We assume:\n\u2022 (General knowledge of limits)\nTherefore, we conclude:\n\u2022 The limit of the sequence $(\\frac{1}{n})$ as $n \\to \\infty$ is 0 [l3].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3 :\n  Filter.Tendsto (fun n : \u2115 \u21a6 (1 : \u211d) / n) Filter.atTop (nhds 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3 :\n  Filter.Tendsto (fun n : \u2115 \u21a6 (1 : \u211d) / n) Filter.atTop (nhds 0) := by\n  rw [tendsto_nhds]\n  intro \u03b5 h\u03b5\n  use Nat.ceil (1 / \u03b5) + 1\n  intro n hn\n  rw [dist_zero_right, abs_of_pos (div_pos (by norm_num) (Nat.cast_pos.mpr (Nat.succ_pos _)))]\n  apply lt_of_lt_of_le _ (Nat.ceil_lt_add_one (div_pos (by norm_num) h\u03b5)).le\n  exact inv_lt_of_inv_lt h\u03b5 (Nat.lt_ceil.mp (Nat.lt_of_succ_le hn))", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 9, "column": 16, "endLine": 9, "endColumn": 21, "data": "failed to synthesize\n  HDiv \u2115 (Set \u211d) ?m.994\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 9, "column": 6, "endLine": 9, "endColumn": 26, "data": "type mismatch\n  \u23081 / \u03b5\u2309\u208a + 1\nhas type\n  \u2115 : outParam Type\nbut is expected to have type\n  0 \u2208 \u03b5 \u2192 (fun n => 1 / \u2191n) \u207b\u00b9' \u03b5 \u2208 atTop : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical statement that the limit of 1/n as n approaches infinity is 0. The use of Filter.Tendsto with atTop and nhds is the standard and correct way to express this limit in Lean's mathematical library. The lemma name l3 matches the reference in the natural language, and all semantic content is preserved.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l3 :\n  \u00acFilter.Tendsto (fun n : \u2115 \u21a6 (1 : \u211d) / n) Filter.atTop (nhds 0) := by\n  intro h\n  have := h.eventually (eventually_gt_atTop (0 : \u211d))\n  rcases this.exists with \u27e8N, hN\u27e9\n  have : (1 : \u211d) / (N + 1) > 0 := by\n    apply one_div_pos_of_nat\n  specialize hN (N + 1) (Nat.le_succ N)\n  linarith"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Therefore, we can substitute $0$ for these terms in the expression, which gives us $\\frac{1-0}{3+0}$. This simplifies to $\\frac{1}{3}$.", "statement": "We assume:\n\u2022 The limit of the sequence $(\\frac{1}{n^2})$ as $n \\to \\infty$ is 0 [l2]\n\u2022 The limit of the sequence $(\\frac{1}{n})$ as $n \\to \\infty$ is 0 [l3]\nTherefore, we conclude:\n\u2022 The limit of the sequence $(\\frac{1-1/n^2}{3+1/n})$ as $n \\to \\infty$ is $\\frac{1}{3}$ [l4].", "dependencies": ["l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (l2 : Filter.Tendsto (fun n : \u2115 \u21a6 (1 : \u211d) / n ^ 2) Filter.atTop (nhds 0))\n  (l3 : Filter.Tendsto (fun n : \u2115 \u21a6 (1 : \u211d) / n) Filter.atTop (nhds 0)) :\n  Filter.Tendsto (fun n : \u2115 \u21a6 ((1 : \u211d) - 1 / n ^ 2) / (3 + 1 / n)) Filter.atTop (nhds (1 / 3)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (l2 : Filter.Tendsto (fun n : \u2115 \u21a6 (1 : \u211d) / n ^ 2) Filter.atTop (nhds 0))\n  (l3 : Filter.Tendsto (fun n : \u2115 \u21a6 (1 : \u211d) / n) Filter.atTop (nhds 0)) :\n  Filter.Tendsto (fun n : \u2115 \u21a6 ((1 : \u211d) - 1 / n ^ 2) / (3 + 1 / n)) Filter.atTop (nhds (1 / 3)) := by\n  have h1 : Filter.Tendsto (fun n : \u2115 \u21a6 (1 : \u211d) - 1 / n ^ 2) Filter.atTop (nhds 1) := by\n    simpa using Tendsto.const_sub 1 l2\n  have h2 : Filter.Tendsto (fun n : \u2115 \u21a6 (3 : \u211d) + 1 / n) Filter.atTop (nhds 3) := by\n    simpa using Tendsto.const_add 3 l3\n  have h3 : Filter.Tendsto (fun n : \u2115 \u21a6 (1 : \u211d) - 1 / n ^ 2) Filter.atTop (nhds 1) := h1\n  have h4 : Filter.Tendsto (fun n : \u2115 \u21a6 (3 : \u211d) + 1 / n) Filter.atTop (nhds 3) := h2\n  exact Tendsto.div h3 h4 (by norm_num)", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 5}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The assumption l2 is correctly formalized using Filter.Tendsto to express that the sequence 1/n\u00b2 converges to 0 as n approaches infinity. The mathematical content is identical.", "The assumption l3 is correctly formalized using Filter.Tendsto to express that the sequence 1/n converges to 0 as n approaches infinity. The mathematical content is identical.", "The conclusion l4 is correctly formalized, expressing that the sequence (1-1/n\u00b2)/(3+1/n) converges to 1/3. The complex fraction is properly parenthesized and the limit value matches exactly.", "The logical structure is preserved: l2 and l3 are taken as hypotheses (assumptions) and l4 is the conclusion to be proved. The implication structure from natural language is correctly captured in the Lean lemma format."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "So, the limit of the sequence $(a_n)$ is $\\frac{1}{3}$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n^2-1}{3n^2+n}$ for $n \\in \\mathbb{N}$ [tc_1]\n\u2022 For $n \\in \\mathbb{N}$ and $n \\neq 0$, $a_n$ is equal to $\\frac{1-1/n^2}{3+1/n}$ [l1]\n\u2022 The limit of the sequence $(\\frac{1-1/n^2}{3+1/n})$ as $n \\to \\infty$ is $\\frac{1}{3}$ [l4]\nTherefore, we conclude:\n\u2022 The limit of the sequence $(a_n)$ as $n \\to \\infty$ is $\\frac{1}{3}$ [ts_1].", "dependencies": ["tc_1", "l1", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : \u2200 (n : \u2115) (hn : n \u2260 0), a n = (1 - 1/ (n : \u211d)^2) / (3 + 1 / (n : \u211d)))\n  (l4 : Filter.Tendsto (fun n : \u2115 \u21a6 ((1 : \u211d) - 1 / n^2) / (3 + 1 / n)) Filter.atTop (nhds (1 / 3))) :\n  Filter.Tendsto a Filter.atTop (nhds (1 / 3)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : \u2200 (n : \u2115) (hn : n \u2260 0), a n = (1 - 1/ (n : \u211d)^2) / (3 + 1 / (n : \u211d)))\n  (l4 : Filter.Tendsto (fun n : \u2115 \u21a6 ((1 : \u211d) - 1 / n^2) / (3 + 1 / n)) Filter.atTop (nhds (1 / 3))) :\n  Filter.Tendsto a Filter.atTop (nhds (1 / 3)) := by\n  have h : a =\u1da0[Filter.atTop] (fun n : \u2115 \u21a6 ((1 : \u211d) - 1 / n^2) / (3 + 1 / n)) := by\n    rw [EventuallyEq]\n    refine eventually_atTop.2 \u27e81, fun n hn \u21a6 ?_\u27e9\n    exact l1 n (Nat.one_le_iff_ne_zero.1 hn)\n  exact l4.congr' h.symm", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The sequence definition is correctly formalized with proper type declarations and mathematical expression matching the natural language.", "The alternative form correctly includes the non-zero condition and the equivalent mathematical expression.", "The limit statement properly uses Lean's topology library to express convergence of the alternative form to 1/3.", "The conclusion correctly states that the original sequence converges to 1/3, matching the natural language goal."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    