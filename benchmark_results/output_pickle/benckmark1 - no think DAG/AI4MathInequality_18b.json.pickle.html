
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for all real numbers $a, b, c$, the following inequality holds:
$$ \\quad \frac{a^2+b^2+c^2}{(a+b+c)^2} \geq \frac{1}{3} $$

Proof: For the desired inequality, $rac{a^2+b^2+c^2}{(a+b+c)^2} \ge rac{1}{3}$, multiplying both sides by $(a+b+c)^2$ gives $3(a^2+b^2+c^2) - (a+b+c)^2 \ge 0$, which simplifies to $2(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2 \ge 0$. Since squares of real numbers are non-negative, both inequalities hold, with equality if and only if $a=b=c$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for all real numbers $a, b, c$", "statement": "Premise:\n\u2022 a, b, c are real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean variable declaration `(a b c : \u211d)` perfectly captures the condition that a, b, c are real numbers. The `\u211d` type in Lean represents real numbers, which directly corresponds to the natural language statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "the following inequality holds: $$ \\quad \\frac{a^2+b^2+c^2}{(a+b+c)^2} \\geq \\frac{1}{3} $$", "statement": "Premise:\n\u2022 a, b, c are real numbers [tc_1].\n\u2022 The expression is well-defined, which requires the denominator to be non-zero, so $(a+b+c)^2 \\neq 0$, which implies $a+b+c \\neq 0$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(tc_1 : True)\n(tc_2 : a + b + c \u2260 0)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean declaration `variable (a b c : \u211d)` correctly captures that a, b, c are real numbers", "The natural language states the condition as $(a+b+c)^2 \u2260 0$, but the Lean formalization directly uses `a + b + c \u2260 0`. While these are logically equivalent (since $(x)^2 \u2260 0$ if and only if $x \u2260 0$), the Lean version skips the intermediate step and goes directly to the simplified form, which changes the structure of the original condition", "The natural language presents $a+b+c \u2260 0$ as a conclusion derived from $(a+b+c)^2 \u2260 0$, but in the Lean formalization, this appears as a direct condition `tc_2` rather than a conclusion. The logical relationship between premise and conclusion is lost"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean declaration `variable (a b c : \u211d)` correctly captures that a, b, c are real numbers', 'The natural language states the condition as $(a+b+c)^2 \u2260 0$, but the Lean formalization directly uses `a + b + c \u2260 0`. While these are logically equivalent (since $(x)^2 \u2260 0$ if and only if $x \u2260 0$), the Lean version skips the intermediate step and goes directly to the simplified form, which changes the structure of the original condition', 'The natural language presents $a+b+c \u2260 0$ as a conclusion derived from $(a+b+c)^2 \u2260 0$, but in the Lean formalization, this appears as a direct condition `tc_2` rather than a conclusion. The logical relationship between premise and conclusion is lost']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "For the desired inequality, $\frac{a^2+b^2+c^2}{(a+b+c)^2} \\ge \frac{1}{3}$, multiplying both sides by $(a+b+c)^2$ gives $3(a^2+b^2+c^2) - (a+b+c)^2 \\ge 0$", "statement": "We assume:\n\u2022 a, b, c are real numbers [tc_1].\n\u2022 a+b+c \u2260 0 [tc_2].\nTherefore, we conclude:\n\u2022 The inequality $\\frac{a^2+b^2+c^2}{(a+b+c)^2} \\ge \\frac{1}{3}$ is equivalent to $3(a^2+b^2+c^2) - (a+b+c)^2 \\ge 0$ [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c : \u211d)\n  (tc_1 : True)\n  (tc_2 : a + b + c \u2260 0) :\n  (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 \u2194 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c : \u211d)\n  (tc_1 : True)\n  (tc_2 : a + b + c \u2260 0) :\n  (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 \u2194 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0 := by\n  have h : (a + b + c)^2 > 0 := by\n    apply pow_two_pos_of_ne_zero\n    exact tc_2\n  rw [div_le_iff (by linarith), mul_comm (1/3), \u2190mul_assoc, one_div_mul_cancel (by norm_num : (3 : \u211d) \u2260 0), one_mul]\n  ring_nf", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 6, "endLine": 13, "endColumn": 30, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?m.4944 / ?m.4945 \u2264 ?m.4943\na b c : \u211d\ntc_1 : True\ntc_2 : a + b + c \u2260 0\nh : (a + b + c) ^ 2 > 0\n\u22a2 (a ^ 2 + b ^ 2 + c ^ 2) / (a + b + c) ^ 2 \u2265 1 / 3 \u2194 3 * (a ^ 2 + b ^ 2 + c ^ 2) - (a + b + c) ^ 2 \u2265 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The variable declarations correctly capture that a, b, c are real numbers. The tc_1 : True condition is harmless and doesn't affect the mathematical content.", "The non-zero sum condition a + b + c \u2260 0 is perfectly preserved, which is crucial for the well-definedness of the division operation.", "The main equivalence statement is mathematically identical in both versions, correctly expressing the equivalence between the fractional inequality and the polynomial inequality.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1 :\n  \u00ac\u2200 (a b c : \u211d), a + b + c \u2260 0 \u2192 \n    ((a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 \u2194 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0) := by\n  push_neg\n  refine \u27e81, 1, -2, ?_, ?_\u27e9\n  \u00b7 norm_num\n  \u00b7 constructor\n    \u00b7 norm_num\n    \u00b7 intro h\n      norm_num at h"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "which simplifies to $2(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2$", "statement": "We assume:\n\u2022 a, b, c are real numbers [tc_1].\nTherefore, we conclude:\n\u2022 $3(a^2+b^2+c^2) - (a+b+c)^2 = (a-b)^2 + (b-c)^2 + (c-a)^2$ [l2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c : \u211d) :\n  3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = (a - b)^2 + (b - c)^2 + (c - a)^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c : \u211d) :\n  3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = (a - b)^2 + (b - c)^2 + (c - a)^2 := by\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations correctly capture that a, b, c are real numbers, using the appropriate Lean type \u211d.", "The mathematical equation is translated exactly from the natural language, with only notational changes (explicit multiplication operator) that are standard in Lean syntax.", "The logical structure properly represents the natural language conclusion as a lemma statement, maintaining the same mathematical meaning that the identity holds for all real numbers a, b, c."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Since squares of real numbers are non-negative, both inequalities hold", "statement": "We assume:\n\u2022 a, b, c are real numbers [tc_1].\nTherefore, we conclude:\n\u2022 $(a-b)^2 + (b-c)^2 + (c-a)^2 \\ge 0$ [l3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c : \u211d) :\n  (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c : \u211d) :\n  (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0 := by\n  have h1 : (a - b)^2 \u2265 0 := by apply pow_two_nonneg\n  have h2 : (b - c)^2 \u2265 0 := by apply pow_two_nonneg\n  have h3 : (c - a)^2 \u2265 0 := by apply pow_two_nonneg\n  linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization perfectly captures the natural language statement. The variable declarations (a b c : \u211d) correctly represent 'a, b, c are real numbers', and the mathematical expression (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0 is mathematically identical to the natural language conclusion. The differences in notation (^ vs superscript, \u2265 vs \\ge) are standard Lean syntax and do not affect the semantic meaning."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Since squares of real numbers are non-negative, both inequalities hold", "statement": "We assume:\n\u2022 The inequality $\\frac{a^2+b^2+c^2}{(a+b+c)^2} \\ge \\frac{1}{3}$ is equivalent to $3(a^2+b^2+c^2) - (a+b+c)^2 \\ge 0$ [l1].\n\u2022 $3(a^2+b^2+c^2) - (a+b+c)^2 = (a-b)^2 + (b-c)^2 + (c-a)^2$ [l2].\n\u2022 $(a-b)^2 + (b-c)^2 + (c-a)^2 \\ge 0$ [l3].\nTherefore, we conclude:\n\u2022 $\\frac{a^2+b^2+c^2}{(a+b+c)^2} \\ge \\frac{1}{3}$ [ts_1].", "dependencies": ["l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c : \u211d)\n  (tc_2 : a + b + c \u2260 0)\n  (l1 : (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 \u2194 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0)\n  (l2 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = (a - b)^2 + (b - c)^2 + (c - a)^2)\n  (l3 : (a - b)^2 + (b - c)^2 + (c - a)^2 \u2265 0) :\n  (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c : \u211d)\n  (tc_2 : a + b + c \u2260 0)\n  (l1 : (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 \u2194 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0)\n  (l2 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = (a - b)^2 + (b - c)^2 + (c - a)^2)\n  (l3 : (a - b)^2 + (b - c)^2 + (c - a)^2 \u2265 0) :\n  (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 := by\n  rw [l1]\n  rw [l2]\n  exact l3", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify real number types, which is appropriate for the mathematical context", "The non-zero denominator condition is a necessary mathematical constraint that ensures the fraction is well-defined, even though not explicitly stated in natural language", "The equivalence statement [l1] is perfectly captured with correct mathematical notation and logical structure", "The algebraic identity [l2] is accurately formalized with proper operator precedence and mathematical meaning", "The non-negativity statement [l3] is correctly translated with appropriate inequality notation", "The conclusion [ts_1] perfectly matches the target inequality from the natural language", "The overall logical structure correctly represents the mathematical argument flow from assumptions to conclusion"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}, "l4": {"id": "l4", "natural_language": "with equality if and only if $a=b=c$", "statement": "We assume:\n\u2022 a, b, c are real numbers [tc_1].\nTherefore, we conclude:\n\u2022 $(a-b)^2 + (b-c)^2 + (c-a)^2 = 0$ if and only if $a=b=c$ [l4].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c : \u211d) :\n  ((a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0) \u2194 (a = b \u2227 b = c) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c : \u211d) :\n  ((a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0) \u2194 (a = b \u2227 b = c) := by\n  constructor\n  \u00b7 intro h\n    have h1 : (a - b) ^ 2 = 0 := by linarith [pow_two_nonneg (a - b), pow_two_nonneg (b - c), pow_two_nonneg (c - a)]\n    have h2 : (b - c) ^ 2 = 0 := by linarith [pow_two_nonneg (a - b), pow_two_nonneg (b - c), pow_two_nonneg (c - a)]\n    have h3 : (c - a) ^ 2 = 0 := by linarith [pow_two_nonneg (a - b), pow_two_nonneg (b - c), pow_two_nonneg (c - a)]\n    rw [sub_eq_zero] at h1 h2 h3\n    exact \u27e8h1, h2.trans h3.symm\u27e9\n  \u00b7 rintro \u27e8h1, h2\u27e9\n    simp [h1, h2]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 8, "endLine": 13, "endColumn": 19, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?m.5077 - ?m.5078 = 0\ncase mp\na b c : \u211d\nh : (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0\nh1 : (a - b) ^ 2 = 0\nh2 : (b - c) ^ 2 = 0\nh3 : (c - a) ^ 2 = 0\n\u22a2 a = b \u2227 b = c"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The variable declarations match, the sum of squares expression is identical, and the condition 'a=b=c' is properly formalized as '(a = b \u2227 b = c)' which is logically equivalent and the standard way to express equality of three variables in formal logic.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l4 :\n    \u00ac (\u2200 (a b c : \u211d), ((a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0) \u2194 (a = b \u2227 b = c)) := by\n  intro h\n  have : (0 - 1) ^ 2 + (1 - 0) ^ 2 + (0 - 0) ^ 2 = 2 := by norm_num\n  have := h 0 1 0\n  rw [this] at this\n  have : \u00ac(0 = 1 \u2227 1 = 0) := by\n    intro \u27e8h1, h2\u27e9\n    linarith\n  contradiction"}, "type": "lemma"}, "ts_2": {"id": "ts_2", "natural_language": "with equality if and only if $a=b=c$.", "statement": "We assume:\n\u2022 The equivalence from [l1]\n\u2022 The identity from [l2]\n\u2022 The iff condition for the sum of squares from [l4].\nTherefore, we conclude:\n\u2022 Equality holds, i.e., $\\frac{a^2+b^2+c^2}{(a+b+c)^2} = \\frac{1}{3}$, if and only if $a=b=c$ [ts_2].", "dependencies": ["l1", "l2", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (a b c : \u211d)\n  (tc_2 : a + b + c \u2260 0)\n  (l1 : (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 \u2194 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0)\n  (l2 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = (a - b)^2 + (b - c)^2 + (c - a)^2)\n  (l4 : ((a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0) \u2194 (a = b \u2227 b = c)) :\n  (a^2 + b^2 + c^2) / (a + b + c)^2 = 1 / 3 \u2194 a = b \u2227 b = c := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (a b c : \u211d)\n  (tc_2 : a + b + c \u2260 0)\n  (l1 : (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 \u2194 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0)\n  (l2 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = (a - b)^2 + (b - c)^2 + (c - a)^2)\n  (l4 : ((a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0) \u2194 (a = b \u2227 b = c)) :\n  (a^2 + b^2 + c^2) / (a + b + c)^2 = 1 / 3 \u2194 a = b \u2227 b = c := by\n  constructor\n  \u00b7 intro h\n    have h' : (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 := by rw [h]; exact le_refl _\n    rw [l1] at h'\n    rw [l2] at h'\n    have h'' : (a - b)^2 + (b - c)^2 + (c - a)^2 = 0 := by\n      apply le_antisymm h'\n      simp only [sq_nonneg, add_nonneg]\n    rw [l4] at h''\n    exact h''\n  \u00b7 intro h\n    obtain \u27e8h1, h2\u27e9 := h\n    rw [h1, h2]\n    field_simp [tc_2]\n    ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 70, "endLine": 14, "endColumn": 85, "data": "no goals to be solved"}, {"line": 18, "column": 6, "endLine": 18, "endColumn": 26, "data": "tactic 'apply' failed, failed to unify\n  0 = (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2\nwith\n  (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0\na b c : \u211d\ntc_2 : a + b + c \u2260 0\nl1 : (a ^ 2 + b ^ 2 + c ^ 2) / (a + b + c) ^ 2 \u2265 1 / 3 \u2194 3 * (a ^ 2 + b ^ 2 + c ^ 2) - (a + b + c) ^ 2 \u2265 0\nl2 : 3 * (a ^ 2 + b ^ 2 + c ^ 2) - (a + b + c) ^ 2 = (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2\nl4 : (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0 \u2194 a = b \u2227 b = c\nh : (a ^ 2 + b ^ 2 + c ^ 2) / (a + b + c) ^ 2 = 1 / 3\nh' : (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0\n\u22a2 (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0"}, {"line": 22, "column": 2, "endLine": 26, "endColumn": 8, "data": "unsolved goals\ncase mpr.intro\na b c : \u211d\ntc_2 : a + b + c \u2260 0\nl1 : (a ^ 2 + b ^ 2 + c ^ 2) / (a + b + c) ^ 2 \u2265 1 / 3 \u2194 3 * (a ^ 2 + b ^ 2 + c ^ 2) - (a + b + c) ^ 2 \u2265 0\nl2 : 3 * (a ^ 2 + b ^ 2 + c ^ 2) - (a + b + c) ^ 2 = (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2\nl4 : (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0 \u2194 a = b \u2227 b = c\nh1 : a = b\nh2 : b = c\n\u22a2 c ^ 2 * c\u207b\u00b9 ^ 2 = 1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all the mathematical content from the natural language. The main conclusion is properly formulated with the equivalence between the equality condition and the constraint that all three variables are equal. The expression 'a = b \u2227 b = c' is logically equivalent to 'a=b=c' from the natural language. All three referenced assumptions (l1, l2, l4) are present as hypotheses with their correct mathematical content. The additional non-zero denominator condition (tc_2) is a necessary technical requirement for mathematical rigor that doesn't contradict the natural language statement. The formalization is mathematically sound and complete.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_2\n  (a b c : \u211d)\n  (tc_2 : a + b + c \u2260 0)\n  (l1 : (a^2 + b^2 + c^2) / (a + b + c)^2 \u2265 1 / 3 \u2194 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 \u2265 0)\n  (l2 : 3 * (a^2 + b^2 + c^2) - (a + b + c)^2 = (a - b)^2 + (b - c)^2 + (c - a)^2)\n  (l4 : ((a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 = 0) \u2194 (a = b \u2227 b = c)) :\n  \u00ac((a^2 + b^2 + c^2) / (a + b + c)^2 = 1 / 3 \u2194 a = b \u2227 b = c) := by\n  intro h\n  have h1 : \u2200 a b c : \u211d, a + b + c \u2260 0 \u2192 a = b \u2227 b = c \u2192 (a^2 + b^2 + c^2) / (a + b + c)^2 = 1 / 3 := by\n    intros a b c h h'\n    rcases h' with \u27e8hab, hbc\u27e9\n    rw [hab, hbc]\n    field_simp [h]\n    ring_nf\n    simp\n  have h2 : \u2203 a b c : \u211d, a + b + c \u2260 0 \u2227 (a^2 + b^2 + c^2) / (a + b + c)^2 = 1 / 3 \u2227 \u00ac(a = b \u2227 b = c) := by\n    use 1, 1, -2\n    constructor\n    \u00b7 norm_num\n    constructor\n    \u00b7 field_simp\n      norm_num\n    \u00b7 intro h\n      cases h\n      linarith\n  rcases h2 with \u27e8a, b, c, hneq, heq, hneq'\u27e9\n  have h3 := h1 a b c hneq\n  have h4 := h.mp.mpr heq\n  exact hneq' h4"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    