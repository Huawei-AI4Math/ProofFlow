
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for all real numbers $a, b, c$, the following inequality holds :
$$ \frac{(a+b+c)^2}{a b+b c+c a} \geq 3 \\quad $$

Proof: We want to prove that for real numbers $a, b, c$, $rac{(a+b+c)^2}{ab+bc+ca} \ge 3$, note that this is equivalent to $(a+b+c)^2 - 3(ab+bc+ca) \ge 0$, which expands to $a^2+b^2+c^2-ab-bc-ca \ge 0$. Multiplying by 2 and rearranging gives $(a-b)^2 + (b-c)^2 + (c-a)^2 \ge 0$, which is clearly true.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for all real numbers $a, b, c$", "statement": "Premise:\n\u2022 a, b, c are real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(tc_1 : True)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `variable (a b c : \u211d)` correctly formalizes that a, b, c are real numbers", "The Lean declaration `(tc_1 : True)` appropriately handles the tc_1 reference as a trivially true condition, which is suitable for a premise step with no substantive logical content"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "the following inequality holds :\\n$$ \\frac{(a+b+c)^2}{a b+b c+c a} \\geq 3 \\\\quad $$", "statement": "Premise:\n\u2022 a, b, c are real numbers [tc_1]\n\u2022 ab + bc + ca > 0 [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(tc_1 : True)\n(tc_2 : a * b + b * c + c * a > 0)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The Lean formalization declares a, b, c as real numbers correctly through 'variable (a b c : \u211d)', but tc_1 is assigned 'True' rather than capturing the real number constraint. The type constraint is properly handled by the variable declaration, but the labeling tc_1 : True doesn't correspond to the mathematical meaning of the condition.", "The mathematical expression ab + bc + ca > 0 is correctly formalized as a * b + b * c + c * a > 0 in Lean, with equivalent mathematical meaning."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The Lean formalization declares a, b, c as real numbers correctly through 'variable (a b c : \u211d)', but tc_1 is assigned 'True' rather than capturing the real number constraint. The type constraint is properly handled by the variable declaration, but the labeling tc_1 : True doesn't correspond to the mathematical meaning of the condition.\", 'The mathematical expression ab + bc + ca > 0 is correctly formalized as a * b + b * c + c * a > 0 in Lean, with equivalent mathematical meaning.']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "which is clearly true.", "statement": "We assume:\n\u2022 a, b, c are real numbers [tc_1].\nTherefore, we conclude:\n\u2022 (a-b)^2 + (b-c)^2 + (c-a)^2 >= 0 [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c : \u211d)\n  (tc_1 : True) :\n  (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c : \u211d)\n  (tc_1 : True) :\n  (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0 := by\n  have h1 : (a - b) ^ 2 \u2265 0 := by apply pow_two_nonneg\n  have h2 : (b - c) ^ 2 \u2265 0 := by apply pow_two_nonneg\n  have h3 : (c - a) ^ 2 \u2265 0 := by apply pow_two_nonneg\n  linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations correctly capture that a, b, c are real numbers using the appropriate Lean type \u211d.", "The conclusion statement is mathematically identical between natural language and Lean, with equivalent notation for exponentiation, addition, subtraction, and inequality.", "The overall logical structure properly formalizes the mathematical claim that the sum of squares of pairwise differences of three real numbers is non-negative. The tc_1 assumption, while trivial in Lean, doesn't contradict the natural language and represents an acceptable implementation detail."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Multiplying by 2 and rearranging gives $(a-b)^2 + (b-c)^2 + (c-a)^2 \\ge 0$", "statement": "We assume:\n\u2022 a, b, c are real numbers [tc_1].\nTherefore, we conclude:\n\u2022 2*(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2 [l2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c : \u211d)\n  (tc_1 : True) :\n  2 * (a^2 + b^2 + c^2 - a * b - b * c - c * a) = (a - b)^2 + (b - c)^2 + (c - a)^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c : \u211d)\n  (tc_1 : True) :\n  2 * (a^2 + b^2 + c^2 - a * b - b * c - c * a) = (a - b)^2 + (b - c)^2 + (c - a)^2 := by\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations are correctly formalized. The real number types are properly specified with \u211d, and tc_1 is appropriately represented as a trivial condition (True) since it just labels the assumption about variable types.", "The mathematical identity is perfectly translated from natural language to Lean. All arithmetic operations, exponentiation, and the equation structure are preserved exactly. The explicit multiplication operators (a * b instead of ab) are the correct Lean syntax for the same mathematical meaning."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "which expands to $a^2+b^2+c^2-ab-bc-ca \\ge 0$.", "statement": "We assume:\n\u2022 a, b, c are real numbers [tc_1]\n\u2022 (a-b)^2 + (b-c)^2 + (c-a)^2 >= 0 [l1]\n\u2022 2*(a^2+b^2+c^2-ab-bc-ca) = (a-b)^2 + (b-c)^2 + (c-a)^2 [l2].\nTherefore, we conclude:\n\u2022 a^2+b^2+c^2-ab-bc-ca >= 0 [l3].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c : \u211d)\n  (tc_1 : True)\n  (l1 : (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0)\n  (l2 : 2 * (a^2 + b^2 + c^2 - a * b - b * c - c * a) = (a - b)^2 + (b - c)^2 + (c - a)^2) :\n  a^2 + b^2 + c^2 - a * b - b * c - c * a \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c : \u211d)\n  (tc_1 : True)\n  (l1 : (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0)\n  (l2 : 2 * (a^2 + b^2 + c^2 - a * b - b * c - c * a) = (a - b)^2 + (b - c)^2 + (c - a)^2) :\n  a^2 + b^2 + c^2 - a * b - b * c - c * a \u2265 0 := by\n  rw [\u2190 l2, mul_nonneg_iff]\n  left\n  exact l1", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 6, "endLine": 11, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2\na b c : \u211d\ntc_1 : True\nl1 : (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0\nl2 : 2 * (a ^ 2 + b ^ 2 + c ^ 2 - a * b - b * c - c * a) = (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2\n\u22a2 a ^ 2 + b ^ 2 + c ^ 2 - a * b - b * c - c * a \u2265 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations are correctly typed as real numbers. The tc_1 : True is a harmless encoding of the label.", "The first assumption about the sum of squares being non-negative is perfectly captured.", "The equality relationship in l2 is correctly formalized with explicit multiplication notation.", "The conclusion inequality is accurately represented in Lean syntax.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l3\n  (a b c : \u211d)\n  (tc_1 : True)\n  (l1 : (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0)\n  (l2 : 2 * (a^2 + b^2 + c^2 - a * b - b * c - c * a) = (a - b)^2 + (b - c)^2 + (c - a)^2) :\n  \u00ac (a^2 + b^2 + c^2 - a * b - b * c - c * a \u2265 0) := by\n  intro h\n  have := congr_arg (fun x => x / 2) l2\n  simp at this\n  rw [\u2190 this] at h\n  have : (a - b) ^ 2 + (b - c) ^ 2 + (c - a) ^ 2 \u2265 0 := by linarith\n  linarith"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "note that this is equivalent to $(a+b+c)^2 - 3(ab+bc+ca) \\ge 0$, which expands to $a^2+b^2+c^2-ab-bc-ca \\ge 0$.", "statement": "We assume:\n\u2022 a, b, c are real numbers [tc_1].\nTherefore, we conclude:\n\u2022 (a+b+c)^2 - 3*(ab+bc+ca) = a^2+b^2+c^2-ab-bc-ca [l4].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c : \u211d)\n  (tc_1 : True) :\n  (a + b + c)^2 - 3 * (a * b + b * c + c * a) = a^2 + b^2 + c^2 - a * b - b * c - c * a := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c : \u211d)\n  (tc_1 : True) :\n  (a + b + c)^2 - 3 * (a * b + b * c + c * a) = a^2 + b^2 + c^2 - a * b - b * c - c * a := by\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The variables a, b, c are properly declared as real numbers, and the mathematical equation is exactly translated. The condition tc_1 is implemented as a trivial True condition, which doesn't contradict the natural language and the real number assumption is already captured in the variable declarations. The overall logical structure and mathematical content are perfectly preserved."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "note that this is equivalent to $(a+b+c)^2 - 3(ab+bc+ca) \\ge 0$, which expands to $a^2+b^2+c^2-ab-bc-ca \\ge 0$.", "statement": "We assume:\n\u2022 a^2+b^2+c^2-ab-bc-ca >= 0 [l3]\n\u2022 (a+b+c)^2 - 3*(ab+bc+ca) = a^2+b^2+c^2-ab-bc-ca [l4].\nTherefore, we conclude:\n\u2022 (a+b+c)^2 - 3*(ab+bc+ca) >= 0 [l5].", "dependencies": ["l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c : \u211d)\n  (l3 : a^2 + b^2 + c^2 - a * b - b * c - c * a \u2265 0)\n  (l4 : (a + b + c)^2 - 3 * (a * b + b * c + c * a) = a^2 + b^2 + c^2 - a * b - b * c - c * a) :\n  (a + b + c)^2 - 3 * (a * b + b * c + c * a) \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c : \u211d)\n  (l3 : a^2 + b^2 + c^2 - a * b - b * c - c * a \u2265 0)\n  (l4 : (a + b + c)^2 - 3 * (a * b + b * c + c * a) = a^2 + b^2 + c^2 - a * b - b * c - c * a) :\n  (a + b + c)^2 - 3 * (a * b + b * c + c * a) \u2265 0 := by\n  rw [l4]\n  exact l3", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization excellently captures all aspects of the natural language statement. The variable declarations, mathematical expressions, logical assumptions, and conclusion are all correctly represented. The proof structure properly reflects the deductive reasoning from the given assumptions to the desired conclusion. All mathematical notation is appropriately translated to Lean syntax while preserving semantic meaning."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "note that this is equivalent to $(a+b+c)^2 - 3(ab+bc+ca) \\ge 0$", "statement": "We assume:\n\u2022 a, b, c are real numbers [tc_1]\n\u2022 ab + bc + ca > 0 [tc_2]\n\u2022 (a+b+c)^2 - 3*(ab+bc+ca) >= 0 [l5].\nTherefore, we conclude:\n\u2022 (a+b+c)^2 / (ab+bc+ca) >= 3 [ts_1].", "dependencies": ["tc_1", "tc_2", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c : \u211d)\n  (tc_1 : True)\n  (tc_2 : a * b + b * c + c * a > 0)\n  (l5 : (a + b + c)^2 - 3 * (a * b + b * c + c * a) \u2265 0) :\n  (a + b + c)^2 / (a * b + b * c + c * a) \u2265 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c : \u211d)\n  (tc_1 : True)\n  (tc_2 : a * b + b * c + c * a > 0)\n  (l5 : (a + b + c)^2 - 3 * (a * b + b * c + c * a) \u2265 0) :\n  (a + b + c)^2 / (a * b + b * c + c * a) \u2265 3 := by\n  have h : (a + b + c)^2 \u2265 3 * (a * b + b * c + c * a) := by linarith\n  rw [div_le_iff (by linarith)]\n  exact h", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 6, "endLine": 12, "endColumn": 30, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?m.2441 / ?m.2442 \u2264 ?m.2440\na b c : \u211d\ntc_1 : True\ntc_2 : a * b + b * c + c * a > 0\nl5 : (a + b + c) ^ 2 - 3 * (a * b + b * c + c * a) \u2265 0\nh : (a + b + c) ^ 2 \u2265 3 * (a * b + b * c + c * a)\n\u22a2 (a + b + c) ^ 2 / (a * b + b * c + c * a) \u2265 3"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical content from the natural language. The variable types are properly declared as real numbers, all three conditions (positivity of ab+bc+ca, the inequality constraint, and the conclusion) are accurately translated. The encoding of tc_1 as True is appropriate since the real number constraint is handled by the type system. All mathematical expressions, operators, and logical relationships are preserved exactly.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_1\n  (a b c : \u211d)\n  (tc_1 : True)\n  (tc_2 : a * b + b * c + c * a > 0)\n  (l5 : (a + b + c)^2 - 3 * (a * b + b * c + c * a) \u2265 0) :\n  \u00ac((a + b + c)^2 / (a * b + b * c + c * a) \u2265 3) := by\n  intro h\n  have h1 : (a + b + c)^2 \u2265 3 * (a * b + b * c + c * a) := by\n    rwa [div_le_iff' tc_2, mul_comm] at h\n  have h2 : (a + b + c)^2 - 3 * (a * b + b * c + c * a) = 0 := by linarith [h1, l5]\n  have h3 : (a + b + c)^2 - 3 * (a * b + b * c + c * a) = a^2 + b^2 + c^2 - a*b - b*c - c*a := by ring\n  rw [h3] at h2\n  have h4 : a = b \u2227 b = c := by\n    have h5 : \u2200 x y z : \u211d, x^2 + y^2 + z^2 - x*y - y*z - z*x = 0 \u2192 x = y \u2227 y = z := by\n      intro x y z h\n      have : (x - y)^2 + (y - z)^2 + (z - x)^2 = 0 := by linarith\n      simp [pow_two_nonneg, add_nonneg] at this\n      constructor <;> linarith\n    exact h5 a b c h2\n  rcases h4 with \u27e8hab, hbc\u27e9\n  subst hab\n  subst hbc\n  simp [mul_assoc] at tc_2\n  have : (3 * a)^2 / (3 * a^2) = 3 := by field_simp; ring\n  linarith [h, this]"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    