
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z$ be a complex number and $\operatorname{Log}(z)$ denote its principal logarithm. If $\operatorname{Re}(\operatorname{Log}(z)) = \ln(\sqrt{8})$, $\operatorname{Im}(z) = \operatorname{Re}(z)$, and $\operatorname{Re}(z) > 0$, then $z = 2+2i$.

Proof: From the condition $\operatorname{Re}(\operatorname{Log}(z)) = \ln(\sqrt{8})$ and the definition $\operatorname{Re}(\operatorname{Log}(z)) = \ln|z|$, we deduce that $|z| = \sqrt{8}$. Letting $z = x+iy$, this implies $x^2+y^2 = 8$. Using the condition $\operatorname{Im}(z) = \operatorname{Re}(z)$, we substitute $y=x$ into the previous equation to get $x^2+x^2=8$, which simplifies to $x^2=4$. Given that $\operatorname{Re}(z) > 0$, we must have $x>0$, so we take the positive root $x=2$, which in turn implies $y=2$. Therefore, since $z=x+iy$, we conclude that $z = 2+2i$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z$ be a complex number", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean variable declaration (z : \u2102) perfectly captures the natural language condition that z is a complex number. Both establish z as a complex number with no additional constraints or conclusions."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "$\\operatorname{Re}(\\operatorname{Log}(z)) = \\ln(\\sqrt{8})$", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1]\n\u2022 $\\operatorname{Re}(\\operatorname{Log}(z)) = \\ln(\\sqrt{8})$, where $\\operatorname{Log}(z)$ is the principal logarithm of $z$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (tc_2 : (Complex.log z).re = real_log (Real.sqrt 8))", "lean_pass": false, "error_msg": [{"line": 7, "column": 31, "endLine": 7, "endColumn": 53, "data": "function expected at\n  real_log\nterm has type\n  ?m.6"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "$\\operatorname{Im}(z) = \\operatorname{Re}(z)$", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1]\n\u2022 $\\operatorname{Im}(z) = \\operatorname{Re}(z)$ [tc_3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (tc_1 : True)\n  (tc_3 : z.im = z.re)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration (z : \u2102) directly corresponds to stating that z is a complex number", "The Lean condition z.im = z.re perfectly captures the mathematical statement Im(z) = Re(z) using standard Lean notation for complex number parts"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_4": {"id": "tc_4", "natural_language": "$\\operatorname{Re}(z) > 0$", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1]\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_4].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (tc_1 : True)\n  (tc_4 : 0 < z.re)", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The natural language states that z is a complex number and labels this as [tc_1], but in Lean, the declaration (z : \u2102) establishes z as complex while (tc_1 : True) is just a trivial proposition. The semantic meaning is preserved since z is indeed declared as complex, but the labeling tc_1 doesn't directly correspond to the complex number property.", "The Lean formalization (tc_4 : 0 < z.re) perfectly captures the mathematical statement Re(z) > 0, with z.re being the standard Lean notation for the real part of a complex number."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The natural language states that z is a complex number and labels this as [tc_1], but in Lean, the declaration (z : \u2102) establishes z as complex while (tc_1 : True) is just a trivial proposition. The semantic meaning is preserved since z is indeed declared as complex, but the labeling tc_1 doesn't directly correspond to the complex number property.\", 'The Lean formalization (tc_4 : 0 < z.re) perfectly captures the mathematical statement Re(z) > 0, with z.re being the standard Lean notation for the real part of a complex number.']"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "the definition $\\operatorname{Re}(\\operatorname{Log}(z)) = \\ln|z|$", "statement": "Definition:\n\u2022 For any non-zero complex number $w$, its principal logarithm $\\operatorname{Log}(w)$ satisfies $\\operatorname{Re}(\\operatorname{Log}(w)) = \\ln|w|$ [def_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (w : \u2102)\n  (w_ne_zero : w \u2260 0)\n  (def_1 : (w.log).re = Real.log (Complex.abs w))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that w is a non-zero complex number through the type declaration (w : \u2102) and the non-zero condition (w_ne_zero : w \u2260 0)", "The Lean formalization perfectly matches the mathematical definition: (w.log).re corresponds to Re(Log(w)) and Real.log (Complex.abs w) corresponds to ln|w|"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "From the condition $\\operatorname{Re}(\\operatorname{Log}(z)) = \\ln(\\sqrt{8})$ and the definition $\\operatorname{Re}(\\operatorname{Log}(z)) = \\ln|z|$, we deduce that $|z| = \\sqrt{8}$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1]\n\u2022 $\\operatorname{Re}(\\operatorname{Log}(z)) = \\ln(\\sqrt{8})$ [tc_2]\n\u2022 For any non-zero complex number $w$, $\\operatorname{Re}(\\operatorname{Log}(w)) = \\ln|w|$ [def_1]\nTherefore, we conclude:\n\u2022 $|z| = \\sqrt{8}$ [l1].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102)\n  (tc_1 : True)\n  (tc_2 : (z.log).re = Real.log (Real.sqrt 8))\n  (def_1 : \u2200 (w : \u2102), w \u2260 0 \u2192 (w.log).re = Real.log (Complex.abs w)) :\n  Complex.abs z = Real.sqrt 8 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102)\n  (tc_1 : True)\n  (tc_2 : (z.log).re = Real.log (Real.sqrt 8))\n  (def_1 : \u2200 (w : \u2102), w \u2260 0 \u2192 (w.log).re = Real.log (Complex.abs w)) :\n  Complex.abs z = Real.sqrt 8 := by\n  by_cases hz : z = 0\n  \u00b7 rw [hz] at tc_2\n    simp at tc_2\n    have : Real.log (Real.sqrt 8) \u2260 0 := by\n      rw [ne_eq, Real.log_eq_zero]\n      push_neg\n      constructor\n      \u00b7 exact Real.sqrt_pos.mpr (by norm_num)\n      \u00b7 norm_num\n    contradiction\n  \u00b7 specialize def_1 z hz\n    rw [tc_2] at def_1\n    have h : Real.sqrt 8 > 0 := by norm_num\n    exact Real.log_injOn_pos h (Complex.abs.pos hz) def_1", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 33, "endLine": 18, "endColumn": 44, "data": "unsolved goals\nz : \u2102\ntc_1 : True\ndef_1 : \u2200 (w : \u2102), w \u2260 0 \u2192 (Complex.log w).re = Real.log (Complex.abs w)\nhz : z = 0\ntc_2 : 0 = Real.log \u221a8\n\u22a2 0 < ?m.524"}, {"line": 19, "column": 6, "endLine": 19, "endColumn": 16, "data": "unsolved goals\ncase right\nz : \u2102\ntc_1 : True\ndef_1 : \u2200 (w : \u2102), w \u2260 0 \u2192 (Complex.log w).re = Real.log (Complex.abs w)\nhz : z = 0\ntc_2 : 0 = Real.log \u221a8\n\u22a2 \u00ac\u221a8 = -1"}, {"line": 20, "column": 4, "endLine": 20, "endColumn": 17, "data": "tactic 'contradiction' failed\ncase pos\nz : \u2102\ntc_1 : True\ndef_1 : \u2200 (w : \u2102), w \u2260 0 \u2192 (Complex.log w).re = Real.log (Complex.abs w)\nhz : z = 0\ntc_2 : 0 = Real.log \u221a8\nthis : Real.log \u221a8 \u2260 0\n\u22a2 Complex.abs z = \u221a8"}, {"line": 24, "column": 4, "endLine": 24, "endColumn": 57, "data": "type mismatch\n  log_injOn_pos h (AbsoluteValue.pos Complex.abs hz) def_1\nhas type\n  \u221a8 = Complex.abs z : Prop\nbut is expected to have type\n  Complex.abs z = \u221a8 : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The declaration of z as a complex number is correctly captured. The tc_1 : True condition is unusual but doesn't affect the mathematical content.", "The equation Re(Log(z)) = ln(\u221a8) is accurately translated using appropriate Lean mathematical notation.", "The universal statement about the real part of complex logarithm for non-zero complex numbers is correctly formalized with proper quantification and conditions.", "The conclusion |z| = \u221a8 is correctly represented using Complex.abs and Real.sqrt functions.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (z : \u2102)\n  (tc_1 : True)\n  (tc_2 : (z.log).re = Real.log (Real.sqrt 8))\n  (def_1 : \u2200 (w : \u2102), w \u2260 0 \u2192 (w.log).re = Real.log (Complex.abs w)) :\n  \u00ac(Complex.abs z = Real.sqrt 8) := by\n  intro h\n  have h1 := def_1 z (by aesop)\n  rw [tc_2] at h1\n  rw [h] at h1\n  have h2 : Real.sqrt 8 > 0 := by positivity\n  have h3 : Real.log (Real.sqrt 8) \u2260 Real.sqrt 8 := by\n    intro h4\n    have h5 : Real.log (Real.sqrt 8) = Real.sqrt 8 := h4\n    have h6 : Real.sqrt 8 = 1 := by\n      apply_fun (fun x => Real.exp x) at h5\n      rw [Real.exp_log h2] at h5\n      exact h5.symm\n    have h7 : Real.sqrt 8 \u2260 1 := by norm_num\n    exact h7 h6\n  exact h3 h1.symm"}, "type": "lemma"}, "def_2": {"id": "def_2", "natural_language": "Letting $z = x+iy$", "statement": "Definition:\n\u2022 Let $z$ be a complex number [tc_1]. We write $z = x+iy$, where $x = \\operatorname{Re}(z)$ and $y = \\operatorname{Im}(z)$ are real numbers [def_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (tc_1 : True)\n  (x : \u211d)\n  (y : \u211d)\n  (def_2 : z = x + y * I \u2227 x = z.re \u2227 y = z.im)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Both declare z as a complex number using equivalent notation", "The Lean formalization correctly captures the decomposition z = x + y*I with x = z.re and y = z.im, where x and y are real numbers. The notation y*I is equivalent to iy, and z.re/z.im are equivalent to Re(z)/Im(z)"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l2": {"id": "l2", "natural_language": "this implies $x^2+y^2 = 8$.", "statement": "We assume:\n\u2022 $|z| = \\sqrt{8}$ [l1]\n\u2022 We write $z = x+iy$, where $x = \\operatorname{Re}(z)$ and $y = \\operatorname{Im}(z)$ [def_2]\nTherefore, we conclude:\n\u2022 $x^2+y^2 = 8$ [l2].", "dependencies": ["l1", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z : \u2102) (x y : \u211d)\n  (l1 : Complex.abs z = Real.sqrt 8)\n  (def_2 : z = x + y * I \u2227 x = z.re \u2227 y = z.im) :\n  x^2 + y^2 = 8 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z : \u2102) (x y : \u211d)\n  (l1 : Complex.abs z = Real.sqrt 8)\n  (def_2 : z = x + y * I \u2227 x = z.re \u2227 y = z.im) :\n  x^2 + y^2 = 8 := by\n  rw [\u2190 Complex.normSq_eq_abs_sq, Complex.normSq, def_2.2.1, def_2.2.2]\n  simp only [Complex.abs, Complex.normSq] at l1\n  rw [\u2190 l1, Real.sq_sqrt]\n  norm_num", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 8, "endLine": 10, "endColumn": 32, "data": "unknown constant 'Complex.normSq_eq_abs_sq'"}, {"line": 10, "column": 6, "endLine": 10, "endColumn": 32, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.1047\nI z : \u2102\nx y : \u211d\nl1 : Complex.abs z = \u221a8\ndef_2 : z = \u2191x + \u2191y * I \u2227 x = z.re \u2227 y = z.im\n\u22a2 x ^ 2 + y ^ 2 = 8"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The assumption |z| = \u221a8 is correctly formalized using Complex.abs and Real.sqrt", "The definition z = x+iy with real/imaginary part specifications is completely captured in the conjunction", "The conclusion x\u00b2 + y\u00b2 = 8 is directly translated", "Variable type declarations appropriately make explicit the mathematical types implied in natural language", "The logical structure from assumptions to conclusion is preserved correctly in the lemma format", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  (z : \u2102) (x y : \u211d)\n  (l1 : Complex.abs z = Real.sqrt 8)\n  (def_2 : z = x + y * I \u2227 x = z.re \u2227 y = z.im) :\n  \u00ac(x^2 + y^2 = 8) := by\n  rw [\u2190 Complex.norm_eq_abs, Complex.norm_eq_abs] at l1\n  simp only [Complex.norm_eq_abs, Complex.abs_def] at l1\n  rw [\u2190 l1]\n  simp [def_2]\n  norm_num"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Using the condition $\\operatorname{Im}(z) = \\operatorname{Re}(z)$, we substitute $y=x$ into the previous equation to get $x^2+x^2=8$", "statement": "We assume:\n\u2022 $\\operatorname{Im}(z) = \\operatorname{Re}(z)$ [tc_3]\n\u2022 $x^2+y^2 = 8$ [l2]\n\u2022 We write $z = x+iy$, where $x = \\operatorname{Re}(z)$ and $y = \\operatorname{Im}(z)$ [def_2]\nTherefore, we conclude:\n\u2022 $x^2+x^2=8$ [l3].", "dependencies": ["tc_3", "l2", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102) (x y : \u211d)\n  (tc_3 : z.im = z.re)\n  (l2 : x^2 + y^2 = 8)\n  (def_2 : z = x + y * I \u2227 x = z.re \u2227 y = z.im) :\n  x^2 + x^2 = 8 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102) (x y : \u211d)\n  (tc_3 : z.im = z.re)\n  (l2 : x^2 + y^2 = 8)\n  (def_2 : z = x + y * I \u2227 x = z.re \u2227 y = z.im) :\n  x^2 + x^2 = 8 := by\n  rcases def_2 with \u27e8h1, h2, h3\u27e9\n  rw [\u2190h3, tc_3, \u2190h2] at l2\n  simp at l2\n  exact l2", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 6, "endLine": 12, "endColumn": 9, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  z.im\ncase intro.intro\nI z : \u2102\nx y : \u211d\ntc_3 : z.im = z.re\nl2 : x ^ 2 + y ^ 2 = 8\nh1 : z = \u2191x + \u2191y * I\nh2 : x = z.re\nh3 : y = z.im\n\u22a2 x ^ 2 + x ^ 2 = 8"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The condition tc_3 correctly formalizes Im(z) = Re(z) using Lean's complex number notation.", "The premise l2 is a direct translation of the equation x\u00b2 + y\u00b2 = 8.", "The definition def_2 properly captures the complex number representation z = x + iy and the constraints that x and y are the real and imaginary parts respectively.", "The conclusion l3 correctly states x\u00b2 + x\u00b2 = 8, which follows logically from the given premises.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l3\n  (z : \u2102) (x y : \u211d)\n  (tc_3 : z.im = z.re)\n  (l2 : x^2 + y^2 = 8)\n  (def_2 : z = x + y * I \u2227 x = z.re \u2227 y = z.im) :\n  \u00ac(x^2 + x^2 = 8) := by\n  rw [def_2.2.1, def_2.2.2, tc_3] at l2\n  have h : x^2 + x^2 = 2 * x^2 := by ring\n  intro h'\n  rw [h'] at l2\n  rw [h] at l2\n  norm_num at l2"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "which simplifies to $x^2=4$.", "statement": "We assume:\n\u2022 $x^2+x^2=8$ [l3]\nTherefore, we conclude:\n\u2022 $x^2=4$ [l4].", "dependencies": ["l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (x : \u211d)\n  (l3 : x^2 + x^2 = 8) :\n  x^2 = 4 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (x : \u211d)\n  (l3 : x^2 + x^2 = 8) :\n  x^2 = 4 := by\n  rw [\u2190 two_mul] at l3\n  rw [mul_comm] at l3\n  exact (mul_right_inj' (two_ne_zero)).mp l3", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 42, "endLine": 11, "endColumn": 44, "data": "application type mismatch\n  (mul_right_inj' two_ne_zero).mp l3\nargument\n  l3\nhas type\n  x ^ 2 * 2 = 8 : Prop\nbut is expected to have type\n  2 * x ^ 2 = 2 * 4 : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declaration appropriately adds type information (real number) that is mathematically consistent with the natural language context", "The premise is translated exactly as stated in the natural language", "The conclusion is translated exactly as stated in the natural language", "The logical structure correctly captures the deductive relationship from assumption to conclusion using Lean's implication syntax", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l4\n  (x : \u211d)\n  (l3 : x^2 + x^2 = 8) :\n  \u00ac (x^2 = 4) := by\n  intro h\n  rw [h] at l3\n  norm_num at l3\n  linarith"}, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Given that $\\operatorname{Re}(z) > 0$, we must have $x>0$, so we take the positive root $x=2$", "statement": "We assume:\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_4]\n\u2022 $x^2=4$ [l4]\n\u2022 $x = \\operatorname{Re}(z)$ [def_2]\nTherefore, we conclude:\n\u2022 $x=2$ [l5].", "dependencies": ["tc_4", "l4", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (z : \u2102) (x : \u211d)\n  (tc_4 : 0 < z.re)\n  (l4 : x^2 = 4)\n  (def_2 : x = z.re) :\n  x = 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (z : \u2102) (x : \u211d)\n  (tc_4 : 0 < z.re)\n  (l4 : x^2 = 4)\n  (def_2 : x = z.re) :\n  x = 2 := by\n  have h := eq_or_eq_neg_of_sq_eq_sq x 2 (by rw [l4, sq])\n  cases h with\n  | inl h => exact h\n  | inr h => \n    rw [h, def_2] at tc_4\n    linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 42, "endLine": 11, "endColumn": 56, "data": "unsolved goals\nz : \u2102\nx : \u211d\ntc_4 : 0 < z.re\nl4 : x ^ 2 = 4\ndef_2 : x = z.re\n\u22a2 4 = 2 * 2"}, {"line": 15, "column": 8, "endLine": 15, "endColumn": 9, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  x\ncase inr\nz : \u2102\nx : \u211d\ntc_4 : 0 < z.re\nl4 : x ^ 2 = 4\ndef_2 : x = z.re\nh : x = -2\n\u22a2 x = 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations correctly capture the types mentioned in natural language", "The positivity condition is correctly translated, with equivalent mathematical meaning despite order difference", "The quadratic equation is directly and accurately translated", "The definition relating x to the real part of z is correctly formalized using Lean's notation", "The conclusion is properly stated as the goal to be proven", "The overall logical structure faithfully represents the mathematical reasoning pattern from assumptions to conclusion", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l5\n  (z : \u2102) (x : \u211d)\n  (tc_4 : 0 < z.re)\n  (l4 : x^2 = 4)\n  (def_2 : x = z.re) :\n  \u00ac(x = 2) := by\n  intro h\n  rw [h] at def_2\n  rw [def_2] at tc_4\n  simp at tc_4\n  have h' : (-2)^2 = 4 := by norm_num\n  rw [\u2190 l4, h] at h'\n  norm_num at h'\n  contradiction"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "which in turn implies $y=2$.", "statement": "We assume:\n\u2022 $\\operatorname{Im}(z) = \\operatorname{Re}(z)$ [tc_3]\n\u2022 $x=2$ [l5]\n\u2022 We write $z = x+iy$, where $x = \\operatorname{Re}(z)$ and $y = \\operatorname{Im}(z)$ [def_2]\nTherefore, we conclude:\n\u2022 $y=2$ [l6].", "dependencies": ["tc_3", "l5", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (z : \u2102) (x y : \u211d)\n  (tc_3 : z.im = z.re)\n  (l5 : x = 2)\n  (def_2 : z = x + y * I \u2227 x = z.re \u2227 y = z.im) :\n  y = 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (z : \u2102) (x y : \u211d)\n  (tc_3 : z.im = z.re)\n  (l5 : x = 2)\n  (def_2 : z = x + y * I \u2227 x = z.re \u2227 y = z.im) :\n  y = 2 := by\n  rcases def_2 with \u27e8h1, h2, h3\u27e9\n  rw [\u2190h3, tc_3, \u2190h2, l5]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 6, "endLine": 12, "endColumn": 9, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  z.im\ncase intro.intro\nI z : \u2102\nx y : \u211d\ntc_3 : z.im = z.re\nl5 : x = 2\nh1 : z = \u2191x + \u2191y * I\nh2 : x = z.re\nh3 : y = z.im\n\u22a2 y = 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The condition tc_3 correctly captures that the imaginary part equals the real part using Lean's complex number notation.", "The premise l5 is identical in both natural language and Lean formalization.", "The definition def_2 completely captures the complex number representation with all three stated relationships: the form z = x + iy, x being the real part, and y being the imaginary part.", "The conclusion y = 2 is correctly stated as the goal of the lemma, following logically from the given premises.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l6\n  (z : \u2102) (x y : \u211d)\n  (tc_3 : z.im = z.re)\n  (l5 : x = 2)\n  (def_2 : z = x + y * I \u2227 x = z.re \u2227 y = z.im) :\n  \u00ac y = 2 := by\n  rcases def_2 with \u27e8h1, h2, h3\u27e9\n  rw [h2, l5] at tc_3\n  rw [h3, tc_3]\n  simp [l5]\n  exact Ne.symm (Ne.refl 2)"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Therefore, since $z=x+iy$, we conclude that $z = 2+2i$.", "statement": "We assume:\n\u2022 $x=2$ [l5]\n\u2022 $y=2$ [l6]\n\u2022 We write $z = x+iy$ [def_2]\nTherefore, we conclude:\n\u2022 $z = 2+2i$ [ts_1].", "dependencies": ["l5", "l6", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102) (x y : \u211d)\n  (l5 : x = 2)\n  (l6 : y = 2)\n  (def_2 : z = x + y * I) :\n  z = 2 + 2 * I := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102) (x y : \u211d)\n  (l5 : x = 2)\n  (l6 : y = 2)\n  (def_2 : z = x + y * I) :\n  z = 2 + 2 * I := by\n  rw [def_2, l5, l6]\n  simp", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical and logical content from the natural language. The assumptions x=2, y=2, and the definition z=x+iy are properly represented as hypotheses. The conclusion z=2+2i is correctly stated as the goal. The notation differences (iy vs y*I, 2i vs 2*I) are standard mathematical equivalents in Lean's complex number representation. All logical relationships and mathematical meanings are preserved."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_4", "label": "tc_4", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    