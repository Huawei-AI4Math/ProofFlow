
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $f$ is differentiable at $\mathbf{X}_0=(x_{10},x_{20}, \dots,x_{n0}),$
then $f_{x_1}(\mathbf{X}_0),$ $f_{x_2}(\mathbf{X}_{0}),$
\dots$,$ $f_{x_n}(\mathbf{X}_0)$ exist and
the constants
 $m_1,$ $m_2,$ \dots$,$ $m_n$ in $\eqref{eq:5.3.16}$
are given by
\begin{equation}\label{eq:5.3.18}
m_i=f_{x_i}(\mathbf{X}_0),\quad 1\le i\le n;
\end{equation}
that is$,$
$$
\lim_{\mathbf{X}	o\mathbf{X}_0} \frac{f(\mathbf{X})-f(\mathbf{X}_0)-
\dst{\sum^n_{i=1}}\, f_{x_i}(\mathbf{X}_0) (x_i-x_{i0})}
{ |\mathbf{X}-\mathbf{X}_0|}=0.
$$

Proof: Let
 $i$ be a given integer in $\{1,2, \dots,n\}$.
Let $\mathbf{X}=\mathbf{X}_0+t\mathbf{E}_i$, so that $x_i=x_{i0}+t$,
$x_j =x_{j0}$ if $j
e i$, and $|\mathbf{X}-\mathbf{X}_0|=|t|$. Then
\eqref{eq:5.3.16}
and the differentiability of $f$ at $\mathbf{X}_0$ imply that
$$
\lim_{t	o 0}\frac{f(\mathbf{X}_0+t\mathbf{E}_i)-f(\mathbf{X}_0)-m_it}{ t}=0.
$$

ewpage

oindent
Hence,
$$
\lim_{t	o 0}\frac{f(\mathbf{X}_0+t\mathbf{E}_i)-f(\mathbf{X}_0)}{ t}=m_i.
$$
\vskip6pt

oindent
This proves \eqref{eq:5.3.18}, since the limit on the left is
$f_{x_i}
(\mathbf{X}_0)$, by definition.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "If $f$ is differentiable at $\\mathbf{X}_0=(x_{10},x_{20}, \\dots,x_{n0}),$", "statement": "Premise:\n\u2022 $f$ is a function from $\\mathbb{R}^n$ to $\\mathbb{R}$ and is differentiable at $\\mathbf{X}_0=(x_{10}, \\dots, x_{n0})$. This means there exist constants $m_1, \\dots, m_n$ such that $\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0) - \\sum^n_{i=1} m_i (x_i-x_{i0})} { |\\mathbf{X}-\\mathbf{X}_0|}=0$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {n : \u2115}\n  (f : (Fin n \u2192 \u211d) \u2192 \u211d)\n  (X X\u2080 : Fin n \u2192 \u211d)\n  (m : Fin n \u2192 \u211d)\n  (tc_1 : DifferentiableAt \u211d f X\u2080 \u2227 (\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i) \u2227 (Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, m i * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0)))", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.75, "semantic_feedback": ["The Lean type `(Fin n \u2192 \u211d) \u2192 \u211d` correctly represents a function from \u211d\u207f to \u211d, using `Fin n \u2192 \u211d` as the standard representation of \u211d\u207f in Lean", "The Lean condition `DifferentiableAt \u211d f X\u2080` directly corresponds to the natural language statement that f is differentiable at X\u2080", "The Lean condition `(\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i)` is a tautological statement that doesn't properly capture the existence claim. The natural language says there exist constants m\u2081,...,m\u2099, but the Lean version assumes m already exists and just states that for each i, there exists an m_i equal to m i, which is trivially true but doesn't establish existence", "The Lean limit condition using `Tendsto` with `nhds` correctly formalizes the limit statement, with `\u2016X' - X\u2080\u2016` appropriately representing the norm |X - X\u2080|, and the sum and fraction structure matching the mathematical expression"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let $i$ be a given integer in $\\{1,2, \\dots,n\\}$. Let $\\mathbf{X}=\\mathbf{X}_0+t\\mathbf{E}_i$, so that $x_i=x_{i0}+t$, $x_j =x_{j0}$ if $j\\ne i$, and $|\\mathbf{X}-\\mathbf{X}_0|=|t|$.", "statement": "Definition:\n\u2022 For a given integer $i \\in \\{1, 2, \\dots, n\\}$, let the vector $\\mathbf{X}$ be defined as $\\mathbf{X} = \\mathbf{X}_0 + t\\mathbf{E}_i$, where $\\mathbf{E}_i$ is the $i$-th standard basis vector and $t$ is a real number. This implies that the components of $\\mathbf{X}$ are $x_i = x_{i0}+t$ and $x_j = x_{j0}$ for $j \\neq i$. Consequently, the distance is $|\\mathbf{X}-\\mathbf{X}_0| = |t|$ [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {n : \u2115}\n  (f : (Fin n \u2192 \u211d) \u2192 \u211d)\n  (X X\u2080 : Fin n \u2192 \u211d)\n  (m : Fin n \u2192 \u211d)\n  (tc_1 : DifferentiableAt \u211d f X\u2080 \u2227 (\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i) \u2227 (Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, m i * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0)))\n  (i : Fin n)\n  (t : \u211d)\n  (E_i : Fin n \u2192 \u211d)\n  (def_1 : X = X\u2080 + t \u2022 E_i \u2227 (\u2200 j : Fin n, (j = i \u2192 X j = X\u2080 j + t) \u2227 (j \u2260 i \u2192 X j = X\u2080 j)) \u2227 \u2016X - X\u2080\u2016 = |t|)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Natural language uses 1-indexed set {1, 2, ..., n} while Lean uses Fin n which is 0-indexed {0, 1, ..., n-1}. This is a notational difference but doesn't affect the mathematical meaning.", "The vector equation X = X\u2080 + t \u2022 E_i perfectly matches the mathematical statement.", "The Lean code declares E_i as a general function Fin n \u2192 \u211d but never constrains it to be the i-th standard basis vector. This is a major omission as the standard basis property is crucial for the mathematical meaning.", "Both declare t as a real number, perfect match.", "The component equation for index i matches perfectly between natural language and Lean.", "The component equation for j \u2260 i matches perfectly between natural language and Lean.", "The distance/norm equation matches perfectly, with \u2016\u00b7\u2016 being the standard notation for norm in Lean."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"Natural language uses 1-indexed set {1, 2, ..., n} while Lean uses Fin n which is 0-indexed {0, 1, ..., n-1}. This is a notational difference but doesn't affect the mathematical meaning.\", 'The vector equation X = X\u2080 + t \u2022 E_i perfectly matches the mathematical statement.', 'The Lean code declares E_i as a general function Fin n \u2192 \u211d but never constrains it to be the i-th standard basis vector. This is a major omission as the standard basis property is crucial for the mathematical meaning.', 'Both declare t as a real number, perfect match.', 'The component equation for index i matches perfectly between natural language and Lean.', 'The component equation for j \u2260 i matches perfectly between natural language and Lean.', 'The distance/norm equation matches perfectly, with \u2016\u00b7\u2016 being the standard notation for norm in Lean.']"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Then \\eqref{eq:5.3.16} and the differentiability of $f$ at $\\mathbf{X}_0$ imply that\n$$ \\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)-m_it}{ t}=0. $$", "statement": "We assume:\n\u2022 $f$ is a function from $\\mathbb{R}^n$ to $\\mathbb{R}$ and is differentiable at $\\mathbf{X}_0=(x_{10}, \\dots, x_{n0})$, which means there exist constants $m_1, \\dots, m_n$ such that $\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0) - \\sum^n_{i=1} m_i (x_i-x_{i0})} { |\\mathbf{X}-\\mathbf{X}_0|}=0$ [tc_1];\n\u2022 For a given integer $i \\in \\{1, 2, \\dots, n\\}$, the vector $\\mathbf{X}$ is defined as $\\mathbf{X} = \\mathbf{X}_0 + t\\mathbf{E}_i$, which implies $x_i = x_{i0}+t$, $x_j = x_{j0}$ for $j \\neq i$, and $|\\mathbf{X}-\\mathbf{X}_0| = |t|$ [def_1].\nTherefore, we conclude:\n\u2022 $\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)-m_it}{ t}=0$ [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115}\n  (f : (Fin n \u2192 \u211d) \u2192 \u211d)\n  (X X\u2080 : Fin n \u2192 \u211d)\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : Fin n \u2192 \u211d)\n  (tc_1 : DifferentiableAt \u211d f X\u2080 \u2227 (\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i) \u2227 (Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, m i * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0)))\n  (def_1 : X = X\u2080 + t \u2022 E_i \u2227 (\u2200 j : Fin n, (j = i \u2192 X j = X\u2080 j + t) \u2227 (j \u2260 i \u2192 X j = X\u2080 j)) \u2227 \u2016X - X\u2080\u2016 = |t|) :\n  Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (nhds 0) (nhds 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115}\n  (f : (Fin n \u2192 \u211d) \u2192 \u211d)\n  (X\u2080 : Fin n \u2192 \u211d)\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : Fin n \u2192 \u211d)\n  (tc_1 : DifferentiableAt \u211d f X\u2080 \u2227 (\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i) \u2227 (Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, m i * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0)))\n  (hE_i : \u2200 j, E_i j = if j = i then 1 else 0) :\n  Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (nhds 0) (nhds 0) := by\n  simp only [DifferentiableAt] at tc_1\n  obtain \u27e8_, _, h\u27e9 := tc_1\n  have : \u2200 t, \u2016(X\u2080 + t \u2022 E_i) - X\u2080\u2016 = |t| := by\n    intro t\n    simp [norm_eq_abs, Pi.add_apply, Pi.sub_apply, Pi.smul_apply, smul_eq_mul]\n    rw [Finset.sum_eq_single i]\n    \u00b7 simp [hE_i, mul_one]\n    \u00b7 intro j _ hj\n      simp [hE_i, hj.symm]\n    \u00b7 intro hi; exact (hi (Finset.mem_univ _)).elim\n  simp_rw [this]\n  have : \u2200 t \u2260 0, (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t = \n    (f (X\u2080 + t \u2022 E_i) - f X\u2080 - \u2211 j, m j * ((X\u2080 + t \u2022 E_i) j - X\u2080 j)) / |t| * (|t| / t) := by\n    intro t ht\n    rw [mul_div_assoc, div_mul_cancel _ (abs_ne_zero.mpr ht)]\n    congr\n    simp [Pi.add_apply, Pi.smul_apply, Pi.sub_apply, hE_i]\n    rw [Finset.sum_eq_single i]\n    \u00b7 simp [smul_eq_mul]\n    \u00b7 intro j _ hj\n      simp [hE_i, hj.symm]\n    \u00b7 intro hi; exact (hi (Finset.mem_univ _)).elim\n  refine Tendsto.congr' ?_ (Tendsto.mul (h.comp ?_) (tendsto_abs_div_self))\n  filter_upwards [compl_singleton_mem_nhds (0 : \u211d)] with t ht\n  exact this t ht\n  simp_rw [this]\n  have : Tendsto (fun t : \u211d => X\u2080 + t \u2022 E_i) (nhds 0) (nhds X\u2080) := by\n    refine tendsto_const_nhds.add ?_\n    refine Tendsto.smul tendsto_id ?_\n    exact tendsto_const_nhds\n  exact this", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 20, "column": 8, "endLine": 20, "endColumn": 30, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u2211 x \u2208 ?m.30853, ?m.30854 x\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX\u2080 m : Fin n \u2192 \u211d\ni : Fin n\nE_i : Fin n \u2192 \u211d\nhE_i : \u2200 (j : Fin n), E_i j = if j = i then 1 else 0\nleft\u271d\u00b9 : \u2203 f', HasFDerivAt f f' X\u2080\nleft\u271d : \u2200 (i : Fin n), \u2203 m_i, m_i = m i\nh : Tendsto (fun X' => (f X' - f X\u2080 - \u2211 i : Fin n, m i * (X' i - X\u2080 i)) / \u2016X' - X\u2080\u2016) (\ud835\udcdd X\u2080) (\ud835\udcdd 0)\nt : \u211d\n\u22a2 \u2016t \u2022 E_i\u2016 = |t|"}, {"line": 25, "column": 11, "endLine": 25, "endColumn": 15, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the main mathematical content, including the function type, differentiability condition, vector operations, and limit conclusion. However, there are some structural issues: (1) a redundant existence condition for the constants m_i, (2) the parameter t is used but not explicitly declared in the lemma signature, and (3) some defined variables are not used in the conclusion. These are minor structural inconsistencies that don't affect the core mathematical meaning.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The Lean formalization correctly captures the main mathematical content, including the function type, differentiability condition, vector operations, and limit conclusion. However, there are some structural issues: (1) a redundant existence condition for the constants m_i, (2) the parameter t is used but not explicitly declared in the lemma signature, and (3) some defined variables are not used in the conclusion. These are minor structural inconsistencies that don't affect the core mathematical meaning.\"]"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Hence,\n$$ \\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)}{ t}=m_i. $$", "statement": "We assume:\n\u2022 $f$ is a function from $\\mathbb{R}^n$ to $\\mathbb{R}$ and is differentiable at $\\mathbf{X}_0=(x_{10}, \\dots, x_{n0})$, which means there exist constants $m_1, \\dots, m_n$ such that $\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0) - \\sum^n_{i=1} m_i (x_i-x_{i0})} { |\\mathbf{X}-\\mathbf{X}_0|}=0$ [tc_1];\n\u2022 For a given integer $i \\in \\{1, 2, \\dots, n\\}$, the vector $\\mathbf{X}$ is defined as $\\mathbf{X} = \\mathbf{X}_0 + t\\mathbf{E}_i$, which implies $x_i = x_{i0}+t$, $x_j = x_{j0}$ for $j \\neq i$, and $|\\mathbf{X}-\\mathbf{X}_0| = |t|$ [def_1];\n\u2022 $\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)-m_it}{ t}=0$ [l1].\nTherefore, we conclude:\n\u2022 The limit $\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)}{ t}$ exists and is equal to $m_i$ [l2].", "dependencies": ["tc_1", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115}\n  (f : (Fin n \u2192 \u211d) \u2192 \u211d)\n  (X X\u2080 : Fin n \u2192 \u211d)\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : Fin n \u2192 \u211d)\n  (tc_1 : DifferentiableAt \u211d f X\u2080 \u2227 (\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i) \u2227 (Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, m i * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0)))\n  (def_1 : X = X\u2080 + t \u2022 E_i \u2227 (\u2200 j : Fin n, (j = i \u2192 X j = X\u2080 j + t) \u2227 (j \u2260 i \u2192 X j = X\u2080 j)) \u2227 \u2016X - X\u2080\u2016 = |t|)\n  (l1 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (nhds 0) (nhds 0)) :\n  Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (nhds 0) (nhds (m i)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115}\n  (f : (Fin n \u2192 \u211d) \u2192 \u211d)\n  (X X\u2080 : Fin n \u2192 \u211d)\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : Fin n \u2192 \u211d)\n  (tc_1 : DifferentiableAt \u211d f X\u2080 \u2227 (\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i) \u2227 (Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, m i * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0)))\n  (def_1 : X = X\u2080 + t \u2022 E_i \u2227 (\u2200 j : Fin n, (j = i \u2192 X j = X\u2080 j + t) \u2227 (j \u2260 i \u2192 X j = X\u2080 j)) \u2227 \u2016X - X\u2080\u2016 = |t|)\n  (l1 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (nhds 0) (nhds 0)) :\n  Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (nhds 0) (nhds (m i)) := by\n  have h : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t + m i) (nhds 0) (nhds (0 + m i)) :=\n    Tendsto.add l1 tendsto_const_nhds\n  simp only [zero_add] at h\n  convert h using 1\n  ext t\n  field_simp\n  rw [sub_div, add_div]\n  congr 1\n  simp only [mul_comm (m i) t, mul_assoc, inv_mul_cancel (Ne.symm (ne_of_lt (abs_pos.mpr (Ne.symm (ne_of_apply_ne norm (norm_ne_zero_iff.mpr (ne_of_apply_ne (X\u2080 + t \u2022 E_i - X\u2080) ?_)))))))]\n  ring\n  simp [def_1]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 21, "column": 2, "endLine": 21, "endColumn": 12, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The condition '(\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i)' in tc_1 is trivially true and doesn't capture the mathematical meaning that m_1, ..., m_n are the specific constants from the differentiability definition. This should be removed or reformulated.", "The variable 't' is used in def_1 but not declared as a parameter, creating a scope inconsistency. While the mathematical meaning is preserved, this is a structural issue.", "The limit condition l1 is correctly formalized using Tendsto, accurately capturing the mathematical statement.", "The conclusion l2 correctly formalizes the existence and value of the limit using Tendsto.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The condition '(\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i)' in tc_1 is trivially true and doesn't capture the mathematical meaning that m_1, ..., m_n are the specific constants from the differentiability definition. This should be removed or reformulated.\", \"The variable 't' is used in def_1 but not declared as a parameter, creating a scope inconsistency. While the mathematical meaning is preserved, this is a structural issue.\", 'The limit condition l1 is correctly formalized using Tendsto, accurately capturing the mathematical statement.', 'The conclusion l2 correctly formalizes the existence and value of the limit using Tendsto.']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "This proves \\eqref{eq:5.3.18}, since the limit on the left is $f_{x_i} (\\mathbf{X}_0)$, by definition.", "statement": "We assume:\n\u2022 $f$ is a function from $\\mathbb{R}^n$ to $\\mathbb{R}$ and is differentiable at $\\mathbf{X}_0=(x_{10}, \\dots, x_{n0})$, which means there exist constants $m_1, \\dots, m_n$ such that $\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0) - \\sum^n_{i=1} m_i (x_i-x_{i0})} { |\\mathbf{X}-\\mathbf{X}_0|}=0$ [tc_1];\n\u2022 For a given integer $i \\in \\{1, 2, \\dots, n\\}$, the vector $\\mathbf{X}$ is defined as $\\mathbf{X} = \\mathbf{X}_0 + t\\mathbf{E}_i$, which implies $x_i = x_{i0}+t$, $x_j = x_{j0}$ for $j \\neq i$, and $|\\mathbf{X}-\\mathbf{X}_0| = |t|$ [def_1];\n\u2022 $\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)-m_it}{ t}=0$ [l1];\n\u2022 The limit $\\lim_{t\\to 0}\\frac{f(\\mathbf{X}_0+t\\mathbf{E}_i)-f(\\mathbf{X}_0)}{ t}$ exists and is equal to $m_i$ [l2].\nTherefore, we conclude:\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the partial derivative $f_{x_i}(\\mathbf{X}_0)$ exists and is equal to $m_i$ [ts_1].", "dependencies": ["tc_1", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115}\n  (f : (Fin n \u2192 \u211d) \u2192 \u211d)\n  (X X\u2080 : Fin n \u2192 \u211d)\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : Fin n \u2192 \u211d)\n  (t : \u211d)\n  (tc_1 : DifferentiableAt \u211d f X\u2080 \u2227 (\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i) \u2227 (Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, m i * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0)))\n  (def_1 : X = X\u2080 + t \u2022 E_i \u2227 (\u2200 j : Fin n, (j = i \u2192 X j = X\u2080 j + t) \u2227 (j \u2260 i \u2192 X j = X\u2080 j)) \u2227 \u2016X - X\u2080\u2016 = |t|)\n  (l1 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (nhds 0) (nhds 0))\n  (l2 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (nhds 0) (nhds (m i))) :\n  HasPartialDerivAt f X\u2080 i (m i) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 17, "column": 2, "endLine": 17, "endColumn": 32, "data": "function expected at\n  HasPartialDerivAt\nterm has type\n  ?m.3484"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115}\n  (f : (Fin n \u2192 \u211d) \u2192 \u211d)\n  (X\u2080 : Fin n \u2192 \u211d)\n  (m : Fin n \u2192 \u211d)\n  (i : Fin n)\n  (E_i : Fin n \u2192 \u211d)\n  (tc_1 : DifferentiableAt \u211d f X\u2080 \u2227 (\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i) \u2227 (Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, m i * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0)))\n  (hE_i : \u2200 j, E_i j = if j = i then 1 else 0)\n  (l1 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080 - m i * t) / t) (nhds 0) (nhds 0))\n  (l2 : Tendsto (fun t : \u211d => (f (X\u2080 + t \u2022 E_i) - f X\u2080) / t) (nhds 0) (nhds (m i))) :\n  HasDerivAt (fun t => f (Function.update X\u2080 i (X\u2080 i + t))) (m i) 0 := by\n  rw [HasDerivAt]\n  convert l2\n  ext t\n  simp [hE_i, Function.update_apply, Pi.smul_apply, smul_eq_mul]\n  congr\n  funext j\n  split_ifs with h\n  \u00b7 simp [h]\n  \u00b7 simp [h]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 20, "column": 2, "endLine": 20, "endColumn": 64, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}, "ts_2": {"id": "ts_2", "natural_language": "that is$,$\n$$\n\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0)-\n\\dst{\\sum^n_{i=1}}\\, f_{x_i}(\\mathbf{X}_0) (x_i-x_{i0})}\n{ |\\mathbf{X}-\\mathbf{X}_0|}=0.\n$$", "statement": "We assume:\n\u2022 $f$ is a function from $\\mathbb{R}^n$ to $\\mathbb{R}$ and is differentiable at $\\mathbf{X}_0=(x_{10}, \\dots, x_{n0})$, which means there exist constants $m_1, \\dots, m_n$ such that $\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0) - \\sum^n_{i=1} m_i (x_i-x_{i0})} { |\\mathbf{X}-\\mathbf{X}_0|}=0$ [tc_1];\n\u2022 For each $i \\in \\{1, \\dots, n\\}$, the partial derivative $f_{x_i}(\\mathbf{X}_0)$ exists and is equal to $m_i$ [ts_1].\nTherefore, we conclude:\n\u2022 The definition of differentiability can be written as $\\lim_{\\mathbf{X}\\to\\mathbf{X}_0} \\frac{f(\\mathbf{X})-f(\\mathbf{X}_0) - \\sum^n_{i=1} f_{x_i}(\\mathbf{X}_0) (x_i-x_{i0})} { |\\mathbf{X}-\\mathbf{X}_0|}=0$ [ts_2].", "dependencies": ["tc_1", "def_1", "l1", "l2", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  {n : \u2115} [Fact (0 < n)]\n  (f : (Fin n \u2192 \u211d) \u2192 \u211d)\n  (X X\u2080 : Fin n \u2192 \u211d)\n  (m : Fin n \u2192 \u211d)\n  (tc_1 : DifferentiableAt \u211d f X\u2080 \u2227 (\u2200 (i : Fin n), \u2203 (m_i : \u211d), m_i = m i) \u2227 (Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, m i * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0)))\n  (ts_1 : \u2200 (i : Fin n), HasPartialDerivAt f X\u2080 i (m i)) :\n  Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, (partialDeriv f i X\u2080) * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 11, "column": 25, "endLine": 11, "endColumn": 55, "data": "function expected at\n  HasPartialDerivAt\nterm has type\n  ?m.1990"}, {"line": 12, "column": 63, "endLine": 12, "endColumn": 82, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.3869"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  {n : \u2115} [Fact (0 < n)]\n  (f : (Fin n \u2192 \u211d) \u2192 \u211d)\n  (X\u2080 : Fin n \u2192 \u211d)\n  (m : Fin n \u2192 \u211d)\n  (tc_1 : Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, m i * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0))\n  (ts_1 : \u2200 (i : Fin n), HasDerivAt (fun (x : \u211d) => f (Function.update X\u2080 i x)) (m i) (X\u2080 i)) :\n  Tendsto (fun X' : Fin n \u2192 \u211d => (f X' - f X\u2080 - (\u2211 i : Fin n, (deriv (fun (x : \u211d) => f (Function.update X\u2080 i x)) (X\u2080 i)) * (X' i - X\u2080 i))) / \u2016X' - X\u2080\u2016) (nhds X\u2080) (nhds 0) := by\n  have : \u2200 i, deriv (fun (x : \u211d) => f (Function.update X\u2080 i x)) (X\u2080 i) = m i := by\n    intro i\n    exact (ts_1 i).deriv\n  simp_rw [this]\n  exact tc_1", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#fa2c07", "highlight": {"background": "#a3c2a8", "border": "#fa2c07"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    