
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: For any~$a$ not divisible by~$p$,
$$
\ds g_a^2 = (-1)^{(p-1)/2}p.
$$

Proof: If $a\con 0\pmod{p}$, then $\zeta^a=1$, so the sum equals the number of summands,
which is~$p$.  If $a
ot\con 0\pmod{p}$, then we use the
identity $$x^p - 1 = (x-1)(x^{p-1} + \cdots + x + 1)$$ with $x = \zeta^a$. We have
 $\zeta^a
eq 1$, so $\zeta^a - 1 
eq 0$ and
$$
\sum_{n=0}^{p-1} \zeta^{an} = \frac{\zeta^{ap}-1}{\zeta^a-1} =
\frac{1-1}{\zeta^a-1} = 0.
$$
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "For any a not divisible by p,", "statement": "Premise:\n\u2022 p is a prime number and a is an integer [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (p : \u2115) (a : \u2124)\n(tc_1 : Nat.Prime p)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that p is a prime number using Nat.Prime p, with p declared as a natural number (\u2115), which is the standard mathematical representation of primes", "The Lean formalization correctly represents a as an integer using the type \u2124, which directly corresponds to the mathematical statement"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "If $a\\con 0\\pmod{p}$, then $\\zeta^a=1$, so the sum equals the number of summands, which is~$p$.", "statement": "Premise:\n\u2022 p is a prime number and a is an integer [tc_1];\n\u2022 \u03b6 is a primitive p-th root of unity (implying \u03b6^p = 1, and for 1 \u2264 k < p, \u03b6^k \u2260 1) [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (p : \u2115) (a : \u2124)\n(tc_1 : Nat.Prime p)\n(\u03b6 : \u2102)\n(tc_2 : IsPrimitiveRoot \u03b6 p)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that p is a prime number using Nat.Prime p", "The Lean formalization correctly captures that a is an integer using a : \u2124", "The Lean formalization correctly captures that \u03b6 is a primitive p-th root of unity using IsPrimitiveRoot \u03b6 p", "The conclusion \u03b6^p = 1 is automatically included in the definition of IsPrimitiveRoot \u03b6 p in Lean's mathlib", "The conclusion that for 1 \u2264 k < p, \u03b6^k \u2260 1 is automatically included in the definition of IsPrimitiveRoot \u03b6 p in Lean's mathlib"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "the sum equals the number of summands", "statement": "Definition:\n\u2022 p is a prime number and a is an integer [tc_1];\n\u2022 \u03b6 is a primitive p-th root of unity [tc_2];\n\u2022 The sum under consideration is S_a = \u2211_{n=0}^{p-1} \u03b6^{an} [def_1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (p : \u2115) (a : \u2124)\n(tc_1 : Nat.Prime p)\n(\u03b6 : \u2102)\n(tc_2 : IsPrimitiveRoot \u03b6 p)\n(def_1 : \u2211 n : Fin p, \u03b6^(a * n) = \u2211 n in Finset.range p, \u03b6^(a * n))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly captures that p is a prime number (Nat.Prime p) and a is an integer (a : \u2124). The variable declarations and the condition tc_1 perfectly match the natural language statement.", "The Lean formalization correctly captures that \u03b6 is a primitive p-th root of unity using IsPrimitiveRoot \u03b6 p, and \u03b6 is properly typed as a complex number. This perfectly matches the mathematical concept.", "The Lean def_1 is an equality between two different representations of the same sum, not a definition of S_a as the sum \u2211_{n=0}^{p-1} \u03b6^{an}. The natural language defines S_a as this sum, but the Lean code doesn't define S_a at all - it only states an equality between two equivalent ways to write the sum. This misses the key definitional component."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly captures that p is a prime number (Nat.Prime p) and a is an integer (a : \u2124). The variable declarations and the condition tc_1 perfectly match the natural language statement.', 'The Lean formalization correctly captures that \u03b6 is a primitive p-th root of unity using IsPrimitiveRoot \u03b6 p, and \u03b6 is properly typed as a complex number. This perfectly matches the mathematical concept.', \"The Lean def_1 is an equality between two different representations of the same sum, not a definition of S_a as the sum \u2211_{n=0}^{p-1} \u03b6^{an}. The natural language defines S_a as this sum, but the Lean code doesn't define S_a at all - it only states an equality between two equivalent ways to write the sum. This misses the key definitional component.\"]"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "If $a\\con 0\\pmod{p}$, then $\\zeta^a=1$", "statement": "We assume:\n\u2022 p is a prime number and a is an integer [tc_1];\n\u2022 \u03b6 is a primitive p-th root of unity [tc_2].\nTherefore, we conclude:\n\u2022 If a \u2261 0 (mod p), then \u03b6^a = 1 [l1].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p) :\n  (a \u2261 0 [ZMOD p]) \u2192 \u03b6 ^ a = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p) :\n  (a \u2261 0 [ZMOD p]) \u2192 \u03b6 ^ a = 1 := by\n  intro h\n  rw [Int.modEq_iff_dvd] at h\n  obtain \u27e8k, hk\u27e9 := h\n  have : a = p * k := by\n    rw [\u2190sub_eq_zero.mp hk, sub_zero]\n  rw [this, zpow_mul, zpow_natCast, IsPrimitiveRoot.pow_eq_one_iff_dvd p tc_2]\n  simp [tc_1.pos]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 8, "endLine": 14, "endColumn": 26, "data": "tactic 'rewrite' failed, pattern is a metavariable\n  ?m.685\nfrom equation\n  ?m.685 = ?m.684\np : \u2115\na : \u2124\n\u03b6 : \u2102\ntc_1 : Nat.Prime p\ntc_2 : IsPrimitiveRoot \u03b6 p\nk : \u2124\nhk : 0 - a = \u2191p * k\n\u22a2 a = \u2191p * k"}, {"line": 15, "column": 71, "endLine": 15, "endColumn": 72, "data": "application type mismatch\n  IsPrimitiveRoot.pow_eq_one_iff_dvd p\nargument\n  p\nhas type\n  \u2115 : Type\nbut is expected to have type\n  IsPrimitiveRoot ?m.1285 ?m.1284 : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The prime assumption is correctly formalized with Nat.Prime p and appropriate type \u2115", "The integer assumption is perfectly captured with type \u2124", "The primitive root assumption is correctly formalized using IsPrimitiveRoot with appropriate complex type", "The conditional conclusion perfectly matches the natural language with correct congruence notation and exponentiation", "The overall logical structure correctly captures the mathematical statement as a conditional lemma", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p) :\n  \u2203 a, (a \u2261 0 [ZMOD p]) \u2227 \u03b6 ^ a \u2260 1 := by\n  use p\n  constructor\n  \u00b7 rw [Int.ModEq, Int.emod_eq_zero_of_dvd]\n    exact dvd_refl p\n  \u00b7 exact tc_2.pow_ne_one_of_pos_of_lt (Nat.Prime.pos tc_1) (Nat.Prime.one_lt tc_1)"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "so the sum equals the number of summands", "statement": "We assume:\n\u2022 The sum is S_a = \u2211_{n=0}^{p-1} \u03b6^{an} [def_1];\n\u2022 If a \u2261 0 (mod p), then \u03b6^a = 1 [l1].\nTherefore, we conclude:\n\u2022 If a \u2261 0 (mod p), then S_a = \u2211_{n=0}^{p-1} 1 [l2].", "dependencies": ["tc_1", "tc_2", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p)\n  (def_1 : \u2211 n : Fin p, \u03b6^(a * n) = \u2211 n in Finset.range p, \u03b6^(a * n))\n  (l1 : (a \u2261 0 [ZMOD p]) \u2192 \u03b6 ^ a = 1) :\n  (a \u2261 0 [ZMOD p]) \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n) = \u2211 n in Finset.range p, 1) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p)\n  (def_1 : \u2211 n : Fin p, \u03b6^(a * n) = \u2211 n in Finset.range p, \u03b6^(a * n))\n  (l1 : (a \u2261 0 [ZMOD p]) \u2192 \u03b6 ^ a = 1) :\n  (a \u2261 0 [ZMOD p]) \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n) = \u2211 n in Finset.range p, 1) := by\n  intro h\n  rw [\u2190 def_1]\n  simp only [ZMod.natCast_zmod_eq_zero_iff_dvd.1 (Int.coe_nat_dvd.2 (Int.modEq_iff_dvd.1 h)), l1 h]\n  simp [one_pow]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 6, "endLine": 13, "endColumn": 13, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u2211 n \u2208 Finset.range p, \u03b6 ^ (a * \u2191n)\np : \u2115\na : \u2124\n\u03b6 : \u2102\ntc_1 : Nat.Prime p\ntc_2 : IsPrimitiveRoot \u03b6 p\ndef_1 : \u2211 n : Fin p, \u03b6 ^ (a * \u2191\u2191n) = \u2211 n \u2208 Finset.range p, \u03b6 ^ (a * \u2191n)\nl1 : a \u2261 0 [ZMOD \u2191p] \u2192 \u03b6 ^ a = 1\nh : a \u2261 0 [ZMOD \u2191p]\n\u22a2 \u2211 n : Fin p, \u03b6 ^ (a * \u2191\u2191n) = \u2211 n \u2208 Finset.range p, 1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization accurately captures all the mathematical content from the natural language. The sum definition, modular arithmetic condition, and logical conclusion are all correctly represented. The additional type constraints and primitive root conditions provide necessary mathematical context without contradicting the original statement. The structural differences (presenting the sum definition as an equality rather than a direct definition) are mathematically equivalent and represent standard formalization practices.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p)\n  (def_1 : \u2211 n : Fin p, \u03b6^(a * n) = \u2211 n in Finset.range p, \u03b6^(a * n))\n  (l1 : (a \u2261 0 [ZMOD p]) \u2192 \u03b6 ^ a = 1) :\n  \u2203 (h : a \u2261 0 [ZMOD p]), \u2211 n : Fin p, \u03b6 ^ (a * n) \u2260 \u2211 n in Finset.range p, 1 := by\n  use 0\n  simp [Finset.sum_const, Finset.card_range]\n  intro h\n  have := IsPrimitiveRoot.sum_pow_eq_zero tc_2\n  contradiction"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "which is~$p$.", "statement": "We assume:\n\u2022 p is a prime number [tc_1];\n\u2022 If a \u2261 0 (mod p), then S_a = \u2211_{n=0}^{p-1} 1 [l2].\nTherefore, we conclude:\n\u2022 If a \u2261 0 (mod p), then S_a = p [ts_1].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p)\n  (def_1 : \u2211 n : Fin p, \u03b6^(a * n) = \u2211 n in Finset.range p, \u03b6^(a * n))\n  (l1 : (a \u2261 0 [ZMOD p]) \u2192 \u03b6 ^ a = 1)\n  (l2 : (a \u2261 0 [ZMOD p]) \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n) = \u2211 n in Finset.range p, 1)) :\n  (a \u2261 0 [ZMOD p]) \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n) = p) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p)\n  (def_1 : \u2211 n : Fin p, \u03b6^(a * n) = \u2211 n in Finset.range p, \u03b6^(a * n))\n  (l1 : (a \u2261 0 [ZMOD p]) \u2192 \u03b6 ^ a = 1)\n  (l2 : (a \u2261 0 [ZMOD p]) \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n) = \u2211 n in Finset.range p, 1)) :\n  (a \u2261 0 [ZMOD p]) \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n) = p) := by\n  intro h\n  rw [l2 h]\n  simp [Finset.sum_const, Finset.card_range, Nat.smul_one_eq_coe]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The prime assumption is correctly formalized with identical semantic meaning.", "The conditional assumption about S_a is properly captured, with the Lean code making explicit that S_a represents the sum \u2211 n : Fin p, \u03b6 ^ (a * n). The logical structure matches perfectly.", "The conclusion is correctly formalized with the same logical meaning. The Lean formalization includes additional mathematically necessary components (primitive root conditions, variable declarations) that are consistent with but not explicitly mentioned in the natural language, which is acceptable."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}, "l3": {"id": "l3", "natural_language": "If $a\\not\\con 0\\pmod{p}$, then ... We have $\\zeta^a\\neq 1$", "statement": "We assume:\n\u2022 p is a prime number and a is an integer [tc_1];\n\u2022 \u03b6 is a primitive p-th root of unity [tc_2].\nTherefore, we conclude:\n\u2022 If a \u2262 0 (mod p), then \u03b6^a \u2260 1 [l3].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p) :\n  (a \u2262 0 [ZMOD p]) \u2192 \u03b6 ^ a \u2260 1 := by\nsorry", "lean_pass": false, "error_msg": [], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p) :\n  (a \u2262 0 [ZMOD p]) \u2192 \u03b6 ^ a \u2260 1 := by\n  intro h\n  have h\u2081 : p \u2260 0 := Nat.Prime.ne_zero tc_1\n  apply mt (IsPrimitiveRoot.pow_eq_one_iff tc_2 h\u2081).mpr\n  intro ha\n  apply h\n  rw [\u2190 ZMod.int_cast_zmod_eq_zero_iff p]\n  exact ha", "lean_pass": false, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "so $\\zeta^a - 1 \\neq 0$", "statement": "We assume:\n\u2022 If a \u2262 0 (mod p), then \u03b6^a \u2260 1 [l3].\nTherefore, we conclude:\n\u2022 If a \u2262 0 (mod p), then \u03b6^a - 1 \u2260 0 [l4].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "ts_1", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p)\n  (l3 : a \u2262 0 [ZMOD p] \u2192 \u03b6 ^ a \u2260 1) :\n  a \u2262 0 [ZMOD p] \u2192 \u03b6 ^ a - 1 \u2260 0 := by\nsorry", "lean_pass": false, "error_msg": [], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p)\n  (l3 : a \u2262 0 [ZMOD p] \u2192 \u03b6 ^ a \u2260 1) :\n  a \u2262 0 [ZMOD p] \u2192 \u03b6 ^ a - 1 \u2260 0 := by\n  intro h\n  exact sub_ne_zero.2 (l3 h)", "lean_pass": false, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "we use the identity $$x^p - 1 = (x-1)(x^{p-1} + \\cdots + x + 1)$$", "statement": "We assume:\n\u2022 p is a natural number.\nTherefore, we conclude:\n\u2022 For any complex number x where x \u2260 1, the identity \u2211_{n=0}^{p-1} x^n = (x^p - 1) / (x - 1) holds [l5].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "ts_1", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (p : \u2115)\n  (x : \u2102)\n  (hx : x \u2260 1) :\n  \u2211 n in Finset.range p, x^n = (x^p - 1) / (x - 1) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (p : \u2115)\n  (x : \u2102)\n  (hx : x \u2260 1) :\n  \u2211 n in Finset.range p, x^n = (x^p - 1) / (x - 1) := by\n  induction p with\n  | zero =>\n    rw [Finset.range_zero, Finset.sum_empty]\n    simp only [zero_eq, zero_sub, pow_zero, sub_self, zero_div]\n  | succ p ih =>\n    rw [Finset.sum_range_succ, ih, pow_succ]\n    field_simp [hx]\n    ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 4, "endLine": 16, "endColumn": 19, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The variable p is correctly declared as a natural number (\u2115) matching the natural language assumption.", "The complex number x with constraint x \u2260 1 is properly formalized with appropriate type and hypothesis.", "The summation identity is accurately represented - Finset.range p correctly captures the range from 0 to p-1, and the algebraic expression matches exactly.", "The overall logical structure as a lemma with premises and conclusion perfectly mirrors the natural language reasoning flow.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5 :\n    \u2203 (p : \u2115) (x : \u2102), x \u2260 1 \u2227 \u2211 n in Finset.range p, x^n \u2260 (x^p - 1) / (x - 1) := by\n  use 2, -1\n  constructor\n  \u00b7 norm_num\n  \u00b7 simp [Finset.sum_range_succ]\n    norm_num\n    field_simp\n    ring_nf\n    norm_num"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "$\\sum_{n=0}^{p-1} \\zeta^{an} = \\frac{\\zeta^{ap}-1}{\\zeta^a-1}$", "statement": "We assume:\n\u2022 The sum S_a = \u2211_{n=0}^{p-1} \u03b6^{an} [def_1];\n\u2022 If a \u2262 0 (mod p), then \u03b6^a \u2260 1 [l3];\n\u2022 For any complex number x where x \u2260 1, the identity \u2211_{n=0}^{p-1} x^n = (x^p - 1) / (x - 1) holds [l5].\nTherefore, we conclude:\n\u2022 If a \u2262 0 (mod p), then S_a = ( (\u03b6^a)^p - 1 ) / (\u03b6^a - 1) [l6].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "ts_1", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p)\n  (def_1 : \u2211 n : Fin p, \u03b6^(a * n) = \u2211 n in Finset.range p, \u03b6^(a * n))\n  (l3 : (a \u2262 0 [ZMOD p]) \u2192 \u03b6 ^ a \u2260 1)\n  (l5 : \u2200 (x : \u2102), x \u2260 1 \u2192 \u2211 n in Finset.range p, x^n = (x^p - 1) / (x - 1)) :\n  (a \u2262 0 [ZMOD p]) \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n) = ((\u03b6 ^ a) ^ p - 1) / (\u03b6 ^ a - 1)) := by\nsorry", "lean_pass": false, "error_msg": [], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (hp : Nat.Prime p)\n  (h\u03b6 : IsPrimitiveRoot \u03b6 p)\n  (hsum : \u2211 n : Fin p, \u03b6^(a * n) = \u2211 n in Finset.range p, \u03b6^(a * n))\n  (hne : a \u2262 0 [ZMOD p] \u2192 \u03b6 ^ a \u2260 1)\n  (hgeom : \u2200 x : \u2102, x \u2260 1 \u2192 \u2211 n in Finset.range p, x^n = (x^p - 1) / (x - 1)) :\n  a \u2262 0 [ZMOD p] \u2192 \u2211 n : Fin p, \u03b6 ^ (a * n) = ((\u03b6 ^ a) ^ p - 1) / (\u03b6 ^ a - 1) := by\n  intro ha\n  rw [hsum]\n  exact hgeom (\u03b6 ^ a) (hne ha)", "lean_pass": false, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "= \\frac{1-1}{\\zeta^a-1}", "statement": "We assume:\n\u2022 p is a prime number and a is an integer [tc_1];\n\u2022 \u03b6 is a primitive p-th root of unity [tc_2].\nTherefore, we conclude:\n\u2022 (\u03b6^a)^p = 1 [l7].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "ts_1", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p) :\n  (\u03b6 ^ a) ^ p = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p) :\n  (\u03b6 ^ a) ^ p = 1 := by\n  rw [\u2190 zpow_natCast]\n  simp_rw [zpow_mul]\n  rw [IsPrimitiveRoot.pow_eq_one tc_2]\n  simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 11, "endLine": 11, "endColumn": 19, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable types are correctly specified. The complex number type for \u03b6 is mathematically appropriate and consistent, even though not explicitly mentioned in natural language.", "The prime condition is accurately translated using Lean's standard Nat.Prime predicate.", "The primitive root condition is correctly formalized using IsPrimitiveRoot from Mathlib.", "The conclusion statement is an exact mathematical translation with proper operator precedence.", "The overall logical structure correctly captures the assumption-conclusion relationship as a lemma with hypotheses.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l7\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p) :\n  \u00ac (\u03b6 ^ a) ^ p = 1 := by\n  intro h\n  have h1 : (\u03b6 ^ a) ^ p = \u03b6 ^ (a * p) := by rw [zpow_mul, zpow_natCast]\n  rw [h1] at h\n  have h2 : \u03b6 ^ (a * p) = 1 := h\n  have h3 : p \u2223 (a * p).natAbs := by\n    rw [Int.natAbs_mul]\n    exact dvd_mul_right p a.natAbs\n  have h4 := IsPrimitiveRoot.pow_eq_one_iff_dvd tc_2 (a * p).natAbs\n  rw [h2] at h4\n  have h5 : p \u2264 (a * p).natAbs := by\n    obtain \u27e8k, hk\u27e9 := h4\n    rw [hk]\n    exact Nat.le_mul_of_pos_left (Nat.pos_of_ne_zero (\u03bb hk' => by simp [hk'] at hk))\n  have h6 : (a * p).natAbs = p * a.natAbs := by exact Int.natAbs_mul a p\n  rw [h6] at h5\n  have h7 : 1 \u2264 a.natAbs := by\n    by_contra hc\n    simp only [not_le, Nat.lt_one_iff] at hc\n    simp [hc] at h5\n  exact (lt_self_mul_iff h7 (Nat.Prime.pos tc_1)).not_le h5"}, "type": "lemma"}, "ts_2": {"id": "ts_2", "natural_language": "= \\frac{1-1}{\\zeta^a-1} = 0.", "statement": "We assume:\n\u2022 If a \u2262 0 (mod p), then \u03b6^a - 1 \u2260 0 [l4];\n\u2022 If a \u2262 0 (mod p), then S_a = ( (\u03b6^a)^p - 1 ) / (\u03b6^a - 1) [l6];\n\u2022 (\u03b6^a)^p = 1 [l7].\nTherefore, we conclude:\n\u2022 If a \u2262 0 (mod p), then S_a = 0 [ts_2].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "ts_1", "l3", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p)\n  (l4 : a \u2262 0 [ZMOD p] \u2192 \u03b6 ^ a - 1 \u2260 0)\n  (l6 : a \u2262 0 [ZMOD p] \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n)) = ((\u03b6 ^ a) ^ p - 1) / (\u03b6 ^ a - 1))\n  (l7 : (\u03b6 ^ a) ^ p = 1) :\n  a \u2262 0 [ZMOD p] \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n)) = 0 := by\nsorry", "lean_pass": false, "error_msg": [], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (p : \u2115) (a : \u2124) (\u03b6 : \u2102)\n  (tc_1 : Nat.Prime p)\n  (tc_2 : IsPrimitiveRoot \u03b6 p)\n  (l4 : a \u2262 0 [ZMOD p] \u2192 \u03b6 ^ a - 1 \u2260 0)\n  (l6 : a \u2262 0 [ZMOD p] \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n)) = ((\u03b6 ^ a) ^ p - 1) / (\u03b6 ^ a - 1))\n  (l7 : (\u03b6 ^ a) ^ p = 1) :\n  a \u2262 0 [ZMOD p] \u2192 (\u2211 n : Fin p, \u03b6 ^ (a * n)) = 0 := by\n  intro h\n  rw [l6 h]\n  rw [l7, sub_self]\n  exact zero_div _", "lean_pass": false, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#fa2c07", "highlight": {"background": "#a3c2a8", "border": "#fa2c07"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    