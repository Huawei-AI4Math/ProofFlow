
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $A$ be a $2 	imes 2$ real matrix with eigenvalues $\lambda_1 = 3$ and $\lambda_2 = -2$. Then $\det(A) = -6$ and $	ext{trace}(A) = 1$.

Proof: For any square matrix, the determinant equals the product of its eigenvalues. Since $A$ has eigenvalues $\lambda_1 = 3$ and $\lambda_2 = -2$, we have $\det(A) = \lambda_1 \cdot \lambda_2 = 3 \cdot (-2) = -6$. Similarly, the trace of a matrix equals the sum of its eigenvalues. Therefore $	ext{trace}(A) = \lambda_1 + \lambda_2 = 3 + (-2) = 1$. These relationships follow from the characteristic polynomial $\det(A - \lambda I) = \lambda^2 - 	ext{trace}(A)\lambda + \det(A)$, whose roots are the eigenvalues.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $A$ be a $2 \times 2$ real matrix", "statement": "Premise:\n\u2022 Let $A$ be a $2 \\times 2$ real matrix [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (A : Matrix (Fin 2) (Fin 2) \u211d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `A : Matrix (Fin 2) (Fin 2) \u211d` correctly formalizes 'A is a 2\u00d72 real matrix' where Fin 2 represents the 2-dimensional index sets for rows and columns, and \u211d represents real numbers"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "with eigenvalues $\\lambda_1 = 3$ and $\\lambda_2 = -2$.", "statement": "Premise:\n\u2022 Let $A$ be a $2 \\times 2$ real matrix [tc_1];\n\u2022 The eigenvalues of $A$ are $\\lambda_1 = 3$ and $\\lambda_2 = -2$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `(A : Matrix (Fin 2) (Fin 2) \u211d)` correctly captures that A is a 2\u00d72 real matrix using Mathlib's matrix type with finite indexing.", "The Lean condition `tc_2` correctly formalizes that A has eigenvalues 3 and -2 by asserting the existence of non-zero eigenvectors v1 and v2 such that A.vecMul v1 = 3 \u2022 v1 and A.vecMul v2 = -2 \u2022 v2, which is the standard definition of eigenvalues and eigenvectors."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "For any square matrix, the determinant equals the product of its eigenvalues.", "statement": "We assume:\n\u2022 Let $A$ be a $2 \\times 2$ real matrix [tc_1];\n\u2022 The eigenvalues of $A$ are $\\lambda_1 = 3$ and $\\lambda_2 = -2$ [tc_2].\nTherefore, we conclude:\n\u2022 For any square matrix, its determinant is the product of its eigenvalues [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2) :\n  A.det = 3 * (-2) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2) :\n  A.det = 3 * (-2) := by\n  rcases tc_2 with \u27e8v1, v2, h1, h2, h3, h4\u27e9\n  have h_char_poly : Matrix.charpoly A = (Polynomial.X - 3) * (Polynomial.X - (-2)) := by\n    apply Matrix.charpoly_eq_prod_eigenvalues\n    \u00b7 use ![v1, v2]\n      constructor\n      \u00b7 intro f hf\n        have h_eq : \u2211 i, f i \u2022 (if i = 0 then v1 else v2) = 0 := by\n          rw [\u2190 hf]\n          simp\n        cases' i with i hi\n        cases' i with i hi\n        \u00b7 simp [h_eq, h1]\n        \u00b7 cases' i with i hi\n          \u00b7 simp [h_eq, h2]\n          \u00b7 exact (hi (Nat.lt_succ_self 1)).elim\n      \u00b7 simp [h3, h4]\n  have h_det : A.det = (Matrix.charpoly A).coeff 0 := by\n    rw [Matrix.det_eq_neg_charpoly_coeff]\n    simp\n  rw [h_char_poly, h_det]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 10, "endLine": 12, "endColumn": 45, "data": "unknown constant 'Matrix.charpoly_eq_prod_eigenvalues'"}, {"line": 13, "column": 4, "endLine": 25, "endColumn": 21, "data": "no goals to be solved"}, {"line": 27, "column": 8, "endLine": 27, "endColumn": 40, "data": "unknown constant 'Matrix.det_eq_neg_charpoly_coeff'"}, {"line": 27, "column": 8, "endLine": 27, "endColumn": 40, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.8539\nA : Matrix (Fin 2) (Fin 2) \u211d\ntc_1 : True\nv1 v2 : Fin 2 \u2192 \u211d\nh1 : v1 \u2260 0\nh2 : v2 \u2260 0\nh3 : Matrix.vecMul v1 A = 3 \u2022 v1\nh4 : Matrix.vecMul v2 A = -2 \u2022 v2\nh_char_poly : A.charpoly = (Polynomial.X - 3) * (Polynomial.X - -2)\n\u22a2 A.det = A.charpoly.coeff 0"}, {"line": 29, "column": 6, "endLine": 29, "endColumn": 17, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  A.charpoly\ncase intro.intro.intro.intro.intro\nA : Matrix (Fin 2) (Fin 2) \u211d\ntc_1 : True\nv1 v2 : Fin 2 \u2192 \u211d\nh1 : v1 \u2260 0\nh2 : v2 \u2260 0\nh3 : Matrix.vecMul v1 A = 3 \u2022 v1\nh4 : Matrix.vecMul v2 A = -2 \u2022 v2\nh_char_poly : A.charpoly = (Polynomial.X - 3) * (Polynomial.X - -2)\nh_det : A.det = A.charpoly.coeff 0\n\u22a2 A.det = 3 * -2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The matrix A definition correctly captures a 2\u00d72 real matrix in Lean syntax.", "The eigenvalue condition captures the existence of eigenvectors for values 3 and -2, but doesn't explicitly state these are the complete set of eigenvalues (though for a 2\u00d72 matrix this is implied).", "The conclusion in natural language states a general theorem about any square matrix, but the Lean formalization only proves the specific case for matrix A. The general principle is missing from the formalization.", "The overall logical structure differs: natural language presents a general principle applied to a specific case, while Lean only addresses the specific case without the general theorem.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The matrix A definition correctly captures a 2\u00d72 real matrix in Lean syntax.', \"The eigenvalue condition captures the existence of eigenvectors for values 3 and -2, but doesn't explicitly state these are the complete set of eigenvalues (though for a 2\u00d72 matrix this is implied).\", 'The conclusion in natural language states a general theorem about any square matrix, but the Lean formalization only proves the specific case for matrix A. The general principle is missing from the formalization.', 'The overall logical structure differs: natural language presents a general principle applied to a specific case, while Lean only addresses the specific case without the general theorem.']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Since $A$ has eigenvalues $\\lambda_1 = 3$ and $\\lambda_2 = -2$, we have $\\det(A) = \\lambda_1 \\cdot \\lambda_2 = 3 \\cdot (-2) = -6$.", "statement": "We assume:\n\u2022 Let $A$ be a $2 \\times 2$ real matrix [tc_1];\n\u2022 The eigenvalues of $A$ are $\\lambda_1 = 3$ and $\\lambda_2 = -2$ [tc_2];\n\u2022 For any square matrix, its determinant is the product of its eigenvalues [l1].\nTherefore, we conclude:\n\u2022 The determinant of $A$, $\\det(A)$, is -6 [ts_1].", "dependencies": ["tc_1", "tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2)\n  (l1 : A.det = 3 * (-2)) :\n  A.det = -6 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2)\n  (l1 : A.det = 3 * (-2)) :\n  A.det = -6 := by\n  rw [l1]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.75, "semantic_feedback": ["Matrix type declaration correctly captures 2\u00d72 real matrix", "Eigenvalue condition correctly represents existence of eigenvectors with eigenvalues 3 and -2", "The general principle about determinant being product of eigenvalues is represented as a specific assumption about matrix A rather than a general mathematical fact, but the logical content is equivalent", "Conclusion correctly states det(A) = -6"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}, "l2": {"id": "l2", "natural_language": "Similarly, the trace of a matrix equals the sum of its eigenvalues.", "statement": "We assume:\n\u2022 Let $A$ be a $2 \\times 2$ real matrix [tc_1];\n\u2022 The eigenvalues of $A$ are $\\lambda_1 = 3$ and $\\lambda_2 = -2$ [tc_2];\n\u2022 For any square matrix, its determinant is the product of its eigenvalues [l1];\n\u2022 The determinant of $A$, $\\det(A)$, is -6 [ts_1].\nTherefore, we conclude:\n\u2022 For any square matrix, its trace is the sum of its eigenvalues [l2].", "dependencies": ["tc_1", "tc_2", "l1", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2)\n  (l1 : A.det = 3 * (-2))\n  (ts_1 : A.det = -6) :\n  A.trace = 3 + (-2) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Polynomial Matrix\n\nlemma l2\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 vecMul v1 A = 3 \u2022 v1 \u2227 vecMul v2 A = -2 \u2022 v2)\n  (l1 : A.det = 3 * (-2))\n  (ts_1 : A.det = -6) :\n  trace A = 3 + (-2) := by\n  have h_trace : trace A = A 0 0 + A 1 1 := by rw [trace_fin_two]\n  have h_det : det A = A 0 0 * A 1 1 - A 0 1 * A 1 0 := by rw [det_fin_two]\n  rw [h_trace, h_det] at l1 ts_1 \u22a2\n  rw [ts_1] at l1\n  simp at l1\n  rw [\u2190 l1]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 6, "endLine": 14, "endColumn": 13, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  A.trace\nA : Matrix (Fin 2) (Fin 2) \u211d\ntc_1 : True\ntc_2 : \u2203 v1 v2, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 v1 \u1d65* A = 3 \u2022 v1 \u2227 v2 \u1d65* A = -2 \u2022 v2\nl1 : A.det = 3 * -2\nts_1 : A.det = -6\nh_trace : A.trace = A 0 0 + A 1 1\nh_det : A.det = A 0 0 * A 1 1 - A 0 1 * A 1 0\n\u22a2 A.trace = 3 + -2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1 is formalized as 'True' which doesn't capture the constraint that A is a 2\u00d72 real matrix, though the matrix type is correctly declared in the function signature.", "tc_2 captures the existence of eigenvectors for eigenvalues 3 and -2, but doesn't guarantee these are the complete set of eigenvalues for the 2\u00d72 matrix.", "l1 should express a general theorem about any square matrix, but the Lean formalization only states the specific case for matrix A.", "The determinant value constraint is perfectly captured.", "The conclusion should be a general statement about any square matrix, but the Lean formalization only proves the specific case for matrix A with its particular eigenvalues.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"tc_1 is formalized as 'True' which doesn't capture the constraint that A is a 2\u00d72 real matrix, though the matrix type is correctly declared in the function signature.\", \"tc_2 captures the existence of eigenvectors for eigenvalues 3 and -2, but doesn't guarantee these are the complete set of eigenvalues for the 2\u00d72 matrix.\", 'l1 should express a general theorem about any square matrix, but the Lean formalization only states the specific case for matrix A.', 'The determinant value constraint is perfectly captured.', 'The conclusion should be a general statement about any square matrix, but the Lean formalization only proves the specific case for matrix A with its particular eigenvalues.']"}, "solved_negation": null, "type": "lemma"}, "ts_2": {"id": "ts_2", "natural_language": "Therefore $\text{trace}(A) = \\lambda_1 + \\lambda_2 = 3 + (-2) = 1$.", "statement": "We assume:\n\u2022 Let $A$ be a $2 \\times 2$ real matrix [tc_1];\n\u2022 The eigenvalues of $A$ are $\\lambda_1 = 3$ and $\\lambda_2 = -2$ [tc_2];\n\u2022 For any square matrix, its determinant is the product of its eigenvalues [l1];\n\u2022 The determinant of $A$, $\\det(A)$, is -6 [ts_1];\n\u2022 For any square matrix, its trace is the sum of its eigenvalues [l2].\nTherefore, we conclude:\n\u2022 The trace of $A$, $\text{trace}(A)$, is 1 [ts_2].", "dependencies": ["tc_1", "tc_2", "l1", "ts_1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2)\n  (l1 : A.det = 3 * (-2))\n  (ts_1 : A.det = -6)\n  (l2 : A.trace = 3 + (-2)) :\n  A.trace = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (A : Matrix (Fin 2) (Fin 2) \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2203 v1 v2 : Fin 2 \u2192 \u211d, v1 \u2260 0 \u2227 v2 \u2260 0 \u2227 A.vecMul v1 = 3 \u2022 v1 \u2227 A.vecMul v2 = -2 \u2022 v2)\n  (l1 : A.det = 3 * (-2))\n  (ts_1 : A.det = -6)\n  (l2 : A.trace = 3 + (-2)) :\n  A.trace = 1 := by\n  rw [l2]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.67, "semantic_feedback": ["The matrix declaration is correct, but tc_1 : True is a trivial placeholder that doesn't capture the mathematical content of declaring A as a 2\u00d72 real matrix, though the main declaration (A : Matrix (Fin 2) (Fin 2) \u211d) is perfect.", "The eigenvalue condition is correctly formalized using the existence of non-zero eigenvectors with the specified eigenvalues 3 and -2.", "The general statement about determinant being the product of eigenvalues is correctly instantiated for this specific matrix A, though it's presented as a specific fact rather than a general theorem. This is acceptable since the conclusion only needs this specific instance.", "The determinant value A.det = -6 perfectly matches the natural language statement.", "The trace-eigenvalue relationship is correctly expressed as A.trace = 3 + (-2) for this specific matrix.", "The conclusion A.trace = 1 perfectly matches the natural language conclusion."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    