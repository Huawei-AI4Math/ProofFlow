
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $(a_n)$ is an arithmetic sequence with $a_1 = 5$ and $a_3 = 11$, then $a_5 = 17$.

Proof: Since $(a_n)$ is arithmetic, there exists a common difference $d$ such that $a_n = a_1 + (n-1)d$ for all $n$. From the given information, $a_3 = a_1 + 2d$. Substituting the values: $11 = 5 + 2d$, which gives us $2d = 6$, so $d = 3$. Now we can find $a_5 = a_1 + 4d = 5 + 4(3) = 5 + 12 = 17$
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "If $(a_n)$ is an arithmetic sequence", "statement": "Premise:\n\u2022 (a_n) is an arithmetic sequence [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the arithmetic sequence property. The condition `\u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d` is the precise mathematical definition of an arithmetic sequence, which matches the natural language statement.", "Both the natural language and Lean formalization contain no conclusions, only establishing the premise."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "with $a_1 = 5$ and $a_3 = 11$", "statement": "Premise:\n\u2022 (a_n) is an arithmetic sequence [tc_1];\n\u2022 a\u2081 = 5 and a\u2083 = 11 [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n(tc_2 : a 1 = 5 \u2227 a 3 = 11)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization defines an arithmetic sequence as '\u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d', which allows the common difference d to vary between different pairs of terms. However, an arithmetic sequence by definition has a single constant common difference throughout the entire sequence. The correct formalization should be '\u2203 d, \u2200 n, a (n + 1) = a n + d' or equivalent.", "The Lean formalization correctly captures both conditions a\u2081 = 5 and a\u2083 = 11 using conjunction, matching the natural language exactly.", ""]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean formalization defines an arithmetic sequence as '\u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d', which allows the common difference d to vary between different pairs of terms. However, an arithmetic sequence by definition has a single constant common difference throughout the entire sequence. The correct formalization should be '\u2203 d, \u2200 n, a (n + 1) = a n + d' or equivalent.\", 'The Lean formalization correctly captures both conditions a\u2081 = 5 and a\u2083 = 11 using conjunction, matching the natural language exactly.', '']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "Since $(a_n)$ is arithmetic, there exists a common difference $d$ such that $a_n = a_1 + (n-1)d$ for all $n$. From the given information, $a_3 = a_1 + 2d$.", "statement": "We assume:\n\u2022 (a_n) is an arithmetic sequence [tc_1];\n\u2022 a\u2081 = 5 and a\u2083 = 11 [tc_2].\nTherefore, we conclude:\n\u2022 There exists a common difference d such that a\u2083 = a\u2081 + 2d [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11) :\n  \u2203 d, a 3 = a 1 + 2 * d := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11) :\n  \u2203 d, a 3 = a 1 + 2 * d := by\n  obtain \u27e8d, hd\u27e9 := tc_1 1 3 (by norm_num)\n  use d\n  rw [\u2190 sub_eq_iff_eq_add, \u2190 hd]\n  simp [tc_2.1, tc_2.2]\n  norm_num\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 27, "endLine": 12, "endColumn": 31, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  (\u21913 - \u21911) * d\ncase h\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n m : \u2115), n < m \u2192 \u2203 d, a m - a n = (\u2191m - \u2191n) * d\ntc_2 : a 1 = 5 \u2227 a 3 = 11\nd : \u211d\nhd : a 3 - a 1 = (\u21913 - \u21911) * d\n\u22a2 a 3 - 2 * d = a 1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization of arithmetic sequence allows different common differences for different index pairs (\u2203 d for each pair), which contradicts the mathematical definition of arithmetic sequence that requires a single common difference throughout the sequence.", "The initial conditions a\u2081 = 5 and a\u2083 = 11 are correctly captured in both natural language and Lean formalization.", "The conclusion about the existence of a common difference d such that a\u2083 = a\u2081 + 2d is accurately represented in both versions.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization of arithmetic sequence allows different common differences for different index pairs (\u2203 d for each pair), which contradicts the mathematical definition of arithmetic sequence that requires a single common difference throughout the sequence.', 'The initial conditions a\u2081 = 5 and a\u2083 = 11 are correctly captured in both natural language and Lean formalization.', 'The conclusion about the existence of a common difference d such that a\u2083 = a\u2081 + 2d is accurately represented in both versions.']"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Substituting the values: $11 = 5 + 2d$", "statement": "We assume:\n\u2022 (a_n) is an arithmetic sequence [tc_1];\n\u2022 a\u2081 = 5 and a\u2083 = 11 [tc_2];\n\u2022 There exists a common difference d such that a\u2083 = a\u2081 + 2d [l1].\nTherefore, we conclude:\n\u2022 11 = 5 + 2d [l2].", "dependencies": ["tc_1", "tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d) :\n  11 = 5 + 2 * (Classical.choose l1) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d) :\n  11 = 5 + 2 * (Classical.choose l1) := by\n  have h := Classical.choose_spec l1\n  rw [\u2190 tc_2.2] at h\n  rw [h]\n  rw [tc_2.1]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 6, "endLine": 12, "endColumn": 14, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  11\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n m : \u2115), n < m \u2192 \u2203 d, a m - a n = (\u2191m - \u2191n) * d\ntc_2 : a 1 = 5 \u2227 a 3 = 11\nl1 : \u2203 d, a 3 = a 1 + 2 * d\nh : a 3 = a 1 + 2 * Classical.choose l1\n\u22a2 11 = 5 + 2 * Classical.choose l1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The arithmetic sequence definition in tc_1 allows different common differences for different index pairs, which contradicts the fundamental property that arithmetic sequences have a single common difference throughout.", "The initial conditions a\u2081 = 5 and a\u2083 = 11 are correctly captured in the conjunction.", "The existence of common difference d with the relationship a\u2083 = a\u2081 + 2d is properly formalized.", "The conclusion correctly uses Classical.choose to extract the witness d from the existential statement l1, properly representing '11 = 5 + 2d'.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The arithmetic sequence definition in tc_1 allows different common differences for different index pairs, which contradicts the fundamental property that arithmetic sequences have a single common difference throughout.', 'The initial conditions a\u2081 = 5 and a\u2083 = 11 are correctly captured in the conjunction.', 'The existence of common difference d with the relationship a\u2083 = a\u2081 + 2d is properly formalized.', \"The conclusion correctly uses Classical.choose to extract the witness d from the existential statement l1, properly representing '11 = 5 + 2d'.\"]"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "which gives us $2d = 6$", "statement": "We assume:\n\u2022 (a_n) is an arithmetic sequence [tc_1];\n\u2022 a\u2081 = 5 and a\u2083 = 11 [tc_2];\n\u2022 There exists a common difference d such that a\u2083 = a\u2081 + 2d [l1];\n\u2022 11 = 5 + 2d [l2].\nTherefore, we conclude:\n\u2022 2d = 6 [l3].", "dependencies": ["tc_1", "tc_2", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d)\n  (l2 : 11 = 5 + 2 * (Classical.choose l1)) :\n  2 * (Classical.choose l1) = 6 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d)\n  (l2 : 11 = 5 + 2 * (Classical.choose l1)) :\n  2 * (Classical.choose l1) = 6 := by\n  have h : 2 * Classical.choose l1 = 11 - 5 := by\n    rw [\u2190 l2]\n    ring\n  rw [h]\n  norm_num", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 8, "endLine": 13, "endColumn": 12, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  5 + 2 * Classical.choose l1\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n m : \u2115), n < m \u2192 \u2203 d, a m - a n = (\u2191m - \u2191n) * d\ntc_2 : a 1 = 5 \u2227 a 3 = 11\nl1 : \u2203 d, a 3 = a 1 + 2 * d\nl2 : 11 = 5 + 2 * Classical.choose l1\n\u22a2 2 * Classical.choose l1 = 11 - 5"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The arithmetic sequence definition in Lean allows for different common differences between different pairs of terms, while the natural language implies a single common difference. This is a structural difference but doesn't contradict the logical development.", "The initial conditions a\u2081 = 5 and a\u2083 = 11 are perfectly captured in the Lean formalization.", "The existence of common difference d is correctly formalized as an existential statement.", "The substitution step correctly uses Classical.choose to extract the witness from l1, which is semantically equivalent to referencing d from the natural language.", "The conclusion correctly uses the same Classical.choose reference to maintain consistency with the extracted common difference.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.8 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l3\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d)\n  (l2 : 11 = 5 + 2 * (Classical.choose l1)) :\n  \u00ac (2 * (Classical.choose l1) = 6) := by\n  have h : Classical.choose l1 = 3 := by\n    rw [\u2190 sub_eq_iff_eq_add'] at l2\n    simp [tc_2.left] at l2\n    exact (eq_of_sub_eq l2).symm\n  rw [h]\n  norm_num"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "so $d = 3$", "statement": "We assume:\n\u2022 (a_n) is an arithmetic sequence [tc_1];\n\u2022 a\u2081 = 5 and a\u2083 = 11 [tc_2];\n\u2022 There exists a common difference d such that a\u2083 = a\u2081 + 2d [l1];\n\u2022 11 = 5 + 2d [l2];\n\u2022 2d = 6 [l3].\nTherefore, we conclude:\n\u2022 d = 3 [l4].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d)\n  (l2 : 11 = 5 + 2 * (Classical.choose l1))\n  (l3 : 2 * (Classical.choose l1) = 6) :\n  Classical.choose l1 = 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d)\n  (l2 : 11 = 5 + 2 * (Classical.choose l1))\n  (l3 : 2 * (Classical.choose l1) = 6) :\n  Classical.choose l1 = 3 := by\n  have h : Classical.choose l1 = 6 / 2 := by rw [\u2190 l3]; ring\n  rw [h]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The arithmetic sequence definition is correctly formalized using the standard mathematical definition with existential quantification over the common difference.", "The initial conditions a\u2081 = 5 and a\u2083 = 11 are perfectly captured using conjunction.", "The existence of common difference d with the relationship a\u2083 = a\u2081 + 2d is correctly expressed using existential quantification.", "The substitution 11 = 5 + 2d is properly formalized using Classical.choose to extract the witness d from the existential in l1.", "The equation 2d = 6 correctly uses Classical.choose l1 to maintain consistency with the representation of d.", "The final conclusion d = 3 is consistently formalized using the same Classical.choose l1 representation for d."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Now we can find $a_5 = a_1 + 4d$", "statement": "We assume:\n\u2022 (a_n) is an arithmetic sequence [tc_1];\n\u2022 a\u2081 = 5 and a\u2083 = 11 [tc_2];\n\u2022 There exists a common difference d such that a\u2083 = a\u2081 + 2d [l1];\n\u2022 11 = 5 + 2d [l2];\n\u2022 2d = 6 [l3];\n\u2022 d = 3 [l4].\nTherefore, we conclude:\n\u2022 a\u2085 = a\u2081 + 4d [l5].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d)\n  (l2 : 11 = 5 + 2 * (Classical.choose l1))\n  (l3 : 2 * (Classical.choose l1) = 6)\n  (l4 : Classical.choose l1 = 3) :\n  a 5 = a 1 + 4 * (Classical.choose l1) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d)\n  (l2 : 11 = 5 + 2 * (Classical.choose l1))\n  (l3 : 2 * (Classical.choose l1) = 6)\n  (l4 : Classical.choose l1 = 3) :\n  a 5 = a 1 + 4 * (Classical.choose l1) := by\n  have hd : Classical.choose l1 = 3 := l4\n  rw [hd]\n  have \u27e8d, h\u27e9 := tc_1 1 5 (by linarith)\n  have h\u2081 : d = 3 := by\n    have \u27e8d', hd'\u27e9 := tc_1 1 3 (by linarith)\n    rw [tc_2.1, tc_2.2] at hd'\n    simp at hd'\n    rw [\u2190 hd'] at l4\n    exact l4.symm\n  rw [h\u2081] at h\n  simp at h\n  rw [h]\n  rw [tc_2.1]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 21, "column": 8, "endLine": 21, "endColumn": 13, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  (3 - 1) * d'\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n m : \u2115), n < m \u2192 \u2203 d, a m - a n = (\u2191m - \u2191n) * d\ntc_2 : a 1 = 5 \u2227 a 3 = 11\nl1 : \u2203 d, a 3 = a 1 + 2 * d\nl2 : 11 = 5 + 2 * Classical.choose l1\nl3 : 2 * Classical.choose l1 = 6\nl4 hd : Classical.choose l1 = 3\nd : \u211d\nh : a 5 - a 1 = (\u21915 - \u21911) * d\nd' : \u211d\nhd' : 11 - 5 = (3 - 1) * d'\n\u22a2 d = 3"}, {"line": 25, "column": 6, "endLine": 25, "endColumn": 7, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  a 5 - a 1\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n m : \u2115), n < m \u2192 \u2203 d, a m - a n = (\u2191m - \u2191n) * d\ntc_2 : a 1 = 5 \u2227 a 3 = 11\nl1 : \u2203 d, a 3 = a 1 + 2 * d\nl2 : 11 = 5 + 2 * Classical.choose l1\nl3 : 2 * Classical.choose l1 = 6\nl4 hd : Classical.choose l1 = 3\nd : \u211d\nh\u2081 : d = 3\nh : a 5 - a 1 = (5 - 1) * 3\n\u22a2 a 5 = a 1 + 4 * 3"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1 incorrectly formalizes arithmetic sequence. It allows different common differences for different term pairs, whereas an arithmetic sequence should have exactly one common difference throughout. The correct formalization should be \u2203 d, \u2200 n, a (n + 1) = a n + d", "tc_2 correctly captures the given values a\u2081 = 5 and a\u2083 = 11", "l1 correctly expresses the existence of common difference d with the relationship a\u2083 = a\u2081 + 2d", "l2 correctly represents 11 = 5 + 2d using Classical.choose to extract the witness d", "l3 correctly represents 2d = 6 using the same witness d", "l4 correctly represents d = 3 using the same witness d", "The goal correctly represents a\u2085 = a\u2081 + 4d using the same witness d", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['tc_1 incorrectly formalizes arithmetic sequence. It allows different common differences for different term pairs, whereas an arithmetic sequence should have exactly one common difference throughout. The correct formalization should be \u2203 d, \u2200 n, a (n + 1) = a n + d', 'tc_2 correctly captures the given values a\u2081 = 5 and a\u2083 = 11', 'l1 correctly expresses the existence of common difference d with the relationship a\u2083 = a\u2081 + 2d', 'l2 correctly represents 11 = 5 + 2d using Classical.choose to extract the witness d', 'l3 correctly represents 2d = 6 using the same witness d', 'l4 correctly represents d = 3 using the same witness d', 'The goal correctly represents a\u2085 = a\u2081 + 4d using the same witness d']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "= 5 + 4(3) = 5 + 12 = 17", "statement": "We assume:\n\u2022 (a_n) is an arithmetic sequence [tc_1];\n\u2022 a\u2081 = 5 and a\u2083 = 11 [tc_2];\n\u2022 There exists a common difference d such that a\u2083 = a\u2081 + 2d [l1];\n\u2022 11 = 5 + 2d [l2];\n\u2022 2d = 6 [l3];\n\u2022 d = 3 [l4];\n\u2022 a\u2085 = a\u2081 + 4d [l5].\nTherefore, we conclude:\n\u2022 a\u2085 = 17 [ts_1].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d)\n  (l2 : 11 = 5 + 2 * (Classical.choose l1))\n  (l3 : 2 * (Classical.choose l1) = 6)\n  (l4 : Classical.choose l1 = 3)\n  (l5 : a 5 = a 1 + 4 * (Classical.choose l1)) :\n  a 5 = 17 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n m, (n < m) \u2192 \u2203 d, a m - a n = (m - n) * d)\n  (tc_2 : a 1 = 5 \u2227 a 3 = 11)\n  (l1 : \u2203 d, a 3 = a 1 + 2 * d)\n  (l2 : 11 = 5 + 2 * (Classical.choose l1))\n  (l3 : 2 * (Classical.choose l1) = 6)\n  (l4 : Classical.choose l1 = 3)\n  (l5 : a 5 = a 1 + 4 * (Classical.choose l1)) :\n  a 5 = 17 := by\n  let d := Classical.choose l1\n  rw [l5, tc_2.1, l4]\n  norm_num", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 10, "endLine": 16, "endColumn": 16, "data": "tactic 'rewrite' failed, motive is not type correct:\n  fun _a => _a + 4 * Classical.choose l1 = 17\nError: application type mismatch\n  Classical.choose l1\nargument\n  l1\nhas type\n  \u2203 d, a 3 = a 1 + 2 * d : Prop\nbut is expected to have type\n  \u2203 x, a 3 = _a + 2 * x : Prop\n\nExplanation: The rewrite tactic rewrites an expression 'e' using an equality 'a = b' by the following process. First, it looks for all 'a' in 'e'. Second, it tries to abstract these occurrences of 'a' to create a function 'm := fun _a => ...', called the *motive*, with the property that 'm a' is definitionally equal to 'e'. Third, we observe that 'congrArg' implies that 'm a = m b', which can be used with lemmas such as 'Eq.mpr' to change the goal. However, if 'e' depends on specific properties of 'a', then the motive 'm' might not typecheck.\n\nPossible solutions: use rewrite's 'occs' configuration option to limit which occurrences are rewritten, or use 'simp' or 'conv' mode, which have strategies for certain kinds of dependencies (these tactics can handle proofs and 'Decidable' instances whose types depend on the rewritten term, and 'simp' can apply user-defined '@[congr]' theorems as well).\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n m : \u2115), n < m \u2192 \u2203 d, a m - a n = (\u2191m - \u2191n) * d\ntc_2 : a 1 = 5 \u2227 a 3 = 11\nl1 : \u2203 d, a 3 = a 1 + 2 * d\nl2 : 11 = 5 + 2 * Classical.choose l1\nl3 : 2 * Classical.choose l1 = 6\nl4 : Classical.choose l1 = 3\nl5 : a 5 = a 1 + 4 * Classical.choose l1\nd : \u211d := Classical.choose l1\n\u22a2 a 1 + 4 * Classical.choose l1 = 17"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The arithmetic sequence definition allows different common differences for different index pairs, which contradicts the fundamental property of arithmetic sequences having a single common difference", "The initial conditions a\u2081 = 5 and a\u2083 = 11 are correctly captured", "The existence of common difference d with the relationship a\u2083 = a\u2081 + 2d is correctly formalized", "The substitution 11 = 5 + 2d is correctly represented using Classical.choose to extract the witness", "The algebraic step 2d = 6 is correctly maintained using Classical.choose", "The common difference value d = 3 is correctly represented", "The fifth term formula a\u2085 = a\u2081 + 4d is correctly formalized", "The conclusion a\u2085 = 17 is perfectly captured", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The arithmetic sequence definition allows different common differences for different index pairs, which contradicts the fundamental property of arithmetic sequences having a single common difference', 'The initial conditions a\u2081 = 5 and a\u2083 = 11 are correctly captured', 'The existence of common difference d with the relationship a\u2083 = a\u2081 + 2d is correctly formalized', 'The substitution 11 = 5 + 2d is correctly represented using Classical.choose to extract the witness', 'The algebraic step 2d = 6 is correctly maintained using Classical.choose', 'The common difference value d = 3 is correctly represented', 'The fifth term formula a\u2085 = a\u2081 + 4d is correctly formalized', 'The conclusion a\u2085 = 17 is perfectly captured']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    