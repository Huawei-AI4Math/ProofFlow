
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $f: \mathbb{R} 	o \mathbb{R}$ be differentiable. If $f'(x) > 0$ for all $x \in \mathbb{R}$, then $f$ is strictly increasing.

Proof: Take any two points $a, b \in \mathbb{R}$ with $a < b$. By the Mean Value Theorem, there exists $c \in (a, b)$ such that $f'(c) = rac{f(b) - f(a)}{b - a}$. Since $f'(c) > 0$ by hypothesis and $b - a > 0$, we have $rac{f(b) - f(a)}{b - a} > 0$. Therefore $f(b) - f(a) > 0$, which means $f(a) < f(b)$. Since this holds for any $a < b$, the function $f$ is strictly increasing.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $f: \\mathbb{R} \to \\mathbb{R}$ be differentiable.", "statement": "Premise:\n\u2022 $f: \\mathbb{R} \\to \\mathbb{R}$ is differentiable [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (f : \u211d \u2192 \u211d)\n(tc_1 : Differentiable \u211d f)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The function type declaration in Lean `(f : \u211d \u2192 \u211d)` perfectly matches the mathematical notation $f: \\mathbb{R} \\to \\mathbb{R}$", "The differentiability condition `Differentiable \u211d f` in Lean correctly captures that f is differentiable on the reals, matching the natural language statement"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "If $f'(x) > 0$ for all $x \\in \\mathbb{R}$", "statement": "Premise:\n\u2022 $f: \\mathbb{R} \\to \\mathbb{R}$ is differentiable [tc_1];\n\u2022 $f'(x) > 0$ for all $x \\in \\mathbb{R}$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (f : \u211d \u2192 \u211d)\n(tc_1 : Differentiable \u211d f)\n(tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures both the function type \u211d \u2192 \u211d and the differentiability condition using Differentiable \u211d f", "The Lean formalization correctly expresses the positive derivative condition using \u2200 x : \u211d, 0 < (deriv f) x, which is semantically identical to f'(x) > 0 for all x \u2208 \u211d"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Take any two points $a, b \\in \\mathbb{R}$ with $a < b$.", "statement": "Definition:\n\u2022 $f: \\mathbb{R} \\to \\mathbb{R}$ is differentiable [tc_1];\n\u2022 $f'(x) > 0$ for all $x \\in \\mathbb{R}$ [tc_2];\n\u2022 Let $a, b \\in \\mathbb{R}$ be two arbitrary points such that $a < b$ [def_1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (f : \u211d \u2192 \u211d)\n(tc_1 : Differentiable \u211d f)\n(tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n(a b : \u211d)\n(def_1 : a < b)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that f is a function from reals to reals and is differentiable. The type declaration (f : \u211d \u2192 \u211d) establishes the function signature, and (tc_1 : Differentiable \u211d f) captures the differentiability condition.", "The Lean formalization correctly captures that the derivative is positive everywhere. The condition (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x) is mathematically equivalent to f'(x) > 0 for all x \u2208 \u211d, where 'deriv f' represents the derivative function.", "The Lean formalization correctly captures the existence of two real numbers a and b with a < b. The declarations (a b : \u211d) establish them as real numbers, and (def_1 : a < b) captures the ordering constraint."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "By the Mean Value Theorem, there exists $c \\in (a, b)$ such that $f'(c) = \\frac{f(b) - f(a)}{b - a}$.", "statement": "We assume:\n\u2022 $f: \\mathbb{R} \\to \\mathbb{R}$ is differentiable [tc_1];\n\u2022 $f'(x) > 0$ for all $x \\in \\mathbb{R}$ [tc_2];\n\u2022 Let $a, b \\in \\mathbb{R}$ be two arbitrary points such that $a < b$ [def_1];\nTherefore, we conclude:\n\u2022 There exists $c \\in (a, b)$ such that $f'(c) = \\frac{f(b) - f(a)}{b - a}$ [l1].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b) :\n  \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b) :\n  \u2203 c \u2208 Set.Ioo a b, (deriv f) c = (f b - f a) / (b - a) := by\n  have hcont : ContinuousOn f (Set.Icc a b) :=\n    Continuous.continuousOn (Differentiable.continuous tc_1)\n  have hdiff : \u2200 x \u2208 Set.Ioo a b, DifferentiableAt \u211d f x :=\n    fun x _ => tc_1 x\n  exact exists_deriv_eq_slope f a b def_1 hcont hdiff", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 32, "endLine": 15, "endColumn": 33, "data": "application type mismatch\n  exists_deriv_eq_slope f a\nargument\n  a\nhas type\n  \u211d : Type\nbut is expected to have type\n  ?m.2541 < ?m.2542 : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Function type declaration and differentiability condition are correctly formalized", "The derivative positivity condition is accurately captured with universal quantification", "The points declaration and ordering constraint are properly formalized", "The Mean Value Theorem conclusion is correctly stated, with \u0399 a b representing the open interval (a,b) in Mathlib notation", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b) :\n  \u00ac \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a) := by\n  intro h\n  rcases h with \u27e8c, hc, heq\u27e9\n  have := tc_2 c\n  rw [heq] at this\n  have h_pos : 0 < b - a := by linarith\n  have : 0 < f b - f a := by\n    rw [\u2190 mul_pos_iff_of_pos_right h_pos]\n    rwa [div_mul_cancel _ (ne_of_gt h_pos)] at this\n  have h_mono : StrictMono f := by\n    apply StrictMono.strictMono_of_deriv_pos (differentiableOn_univ.2 tc_1) tc_2\n  have := h_mono def_1\n  linarith [this]"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "b - a > 0", "statement": "We assume:\n\u2022 $f: \\mathbb{R} \\to \\mathbb{R}$ is differentiable [tc_1];\n\u2022 $f'(x) > 0$ for all $x \\in \\mathbb{R}$ [tc_2];\n\u2022 Let $a, b \\in \\mathbb{R}$ be two arbitrary points such that $a < b$ [def_1];\n\u2022 There exists $c \\in (a, b)$ such that $f'(c) = \\frac{f(b) - f(a)}{b - a}$ [l1];\nTherefore, we conclude:\n\u2022 $b - a > 0$ [l2].", "dependencies": ["tc_1", "tc_2", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a)) :\n  b - a > 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a)) :\n  b - a > 0 := by\n  linarith [def_1]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Function type and differentiability condition are correctly formalized", "Positive derivative condition correctly captures the universal quantification with proper inequality direction", "Point declarations and ordering constraint are properly represented", "Mean Value Theorem condition correctly uses open interval notation and derivative function", "Conclusion statement is identical in both representations"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Since $f'(c) > 0$ by hypothesis", "statement": "We assume:\n\u2022 $f: \\mathbb{R} \\to \\mathbb{R}$ is differentiable [tc_1];\n\u2022 $f'(x) > 0$ for all $x \\in \\mathbb{R}$ [tc_2];\n\u2022 Let $a, b \\in \\mathbb{R}$ be two arbitrary points such that $a < b$ [def_1];\n\u2022 There exists $c \\in (a, b)$ such that $f'(c) = \\frac{f(b) - f(a)}{b - a}$ [l1];\n\u2022 $b - a > 0$ [l2];\nTherefore, we conclude:\n\u2022 $f'(c) > 0$ [l3].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a))\n  (l2 : b - a > 0) :\n  (deriv f) (Classical.choose l1) > 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a))\n  (l2 : b - a > 0) :\n  (deriv f) (Classical.choose l1) > 0 := by\n  have hc := Classical.choose_spec l1\n  rw [hc.2]\n  have hdiv : 0 < (f b - f a) / (b - a) := by\n    apply div_pos\n    \u00b7 apply sub_pos_of_lt\n      have : f a < f b := by\n        apply StrictMono.strictMonoOn_of_deriv_pos (convex_univ _) (fun x _ => tc_2 x) trivial trivial def_1\n      assumption\n    \u00b7 exact l2\n  exact hdiv", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 19, "column": 14, "endLine": 19, "endColumn": 108, "data": "invalid field notation, type is not of the form (C ...) where C is a constant\n  StrictMono\nhas type\n  (?m.2043 \u2192 ?m.2044) \u2192 Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Function type and differentiability assumption correctly formalized", "Universal quantification over derivative positivity correctly captured", "Point ordering assumption correctly formalized", "Existential statement for Mean Value Theorem correctly formalized with proper open interval notation", "Difference positivity statement correctly formalized", "Conclusion is semantically correct but uses Classical.choose to extract witness from existential rather than directly referencing 'c'. This is a valid logical approach but structurally different from natural language presentation", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.83 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l3\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a))\n  (l2 : b - a > 0) :\n  \u00ac (deriv f) (Classical.choose l1) > 0 := by\n  have hc : Classical.choose l1 \u2208 \u0399 a b \u2227 deriv f (Classical.choose l1) = (f b - f a) / (b - a) := \n    Classical.choose_spec l1\n  rw [hc.right]\n  exact tc_2 (Classical.choose l1)"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "we have $\\frac{f(b) - f(a)}{b - a} > 0$.", "statement": "We assume:\n\u2022 $f: \\mathbb{R} \\to \\mathbb{R}$ is differentiable [tc_1];\n\u2022 $f'(x) > 0$ for all $x \\in \\mathbb{R}$ [tc_2];\n\u2022 Let $a, b \\in \\mathbb{R}$ be two arbitrary points such that $a < b$ [def_1];\n\u2022 There exists $c \\in (a, b)$ such that $f'(c) = \\frac{f(b) - f(a)}{b - a}$ [l1];\n\u2022 $b - a > 0$ [l2];\n\u2022 $f'(c) > 0$ [l3];\nTherefore, we conclude:\n\u2022 $\\frac{f(b) - f(a)}{b - a} > 0$ [l4].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a))\n  (l2 : b - a > 0)\n  (l3 : (deriv f) (Classical.choose l1) > 0) :\n  (f b - f a) / (b - a) > 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a))\n  (l2 : b - a > 0)\n  (l3 : (deriv f) (Classical.choose l1) > 0) :\n  (f b - f a) / (b - a) > 0 := by\n  let \u27e8c, hc, h\u27e9 := l1\n  rw [\u2190 h]\n  exact tc_2 c", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1: Differentiable \u211d f correctly captures that f is differentiable from \u211d to \u211d", "tc_2: The universal quantification \u2200 x : \u211d, 0 < (deriv f) x perfectly matches f'(x) > 0 for all x \u2208 \u211d", "def_1: The type declarations a b : \u211d and constraint a < b correctly represent the natural language condition", "l1: The bounded existential \u2203 c \u2208 \u0399 a b correctly represents the existence of c in the open interval (a,b) with the Mean Value Theorem equation", "l2: b - a > 0 correctly translates the natural language statement, though it's redundant given a < b", "l3: Major inconsistency - Classical.choose l1 is incorrectly applied to a bounded existential. The natural language refers to 'the c from l1' but the Lean formalization cannot properly extract this witness due to type mismatch", "l4: The conclusion (f b - f a) / (b - a) > 0 perfectly matches the natural language conclusion", "Wrong dependencies in Lean4 tactics!"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['tc_1: Differentiable \u211d f correctly captures that f is differentiable from \u211d to \u211d', \"tc_2: The universal quantification \u2200 x : \u211d, 0 < (deriv f) x perfectly matches f'(x) > 0 for all x \u2208 \u211d\", 'def_1: The type declarations a b : \u211d and constraint a < b correctly represent the natural language condition', 'l1: The bounded existential \u2203 c \u2208 \u0399 a b correctly represents the existence of c in the open interval (a,b) with the Mean Value Theorem equation', \"l2: b - a > 0 correctly translates the natural language statement, though it's redundant given a < b\", \"l3: Major inconsistency - Classical.choose l1 is incorrectly applied to a bounded existential. The natural language refers to 'the c from l1' but the Lean formalization cannot properly extract this witness due to type mismatch\", 'l4: The conclusion (f b - f a) / (b - a) > 0 perfectly matches the natural language conclusion']"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Therefore $f(b) - f(a) > 0$, which means $f(a) < f(b)$.", "statement": "We assume:\n\u2022 $f: \\mathbb{R} \\to \\mathbb{R}$ is differentiable [tc_1];\n\u2022 $f'(x) > 0$ for all $x \\in \\mathbb{R}$ [tc_2];\n\u2022 Let $a, b \\in \\mathbb{R}$ be two arbitrary points such that $a < b$ [def_1];\n\u2022 There exists $c \\in (a, b)$ such that $f'(c) = \\frac{f(b) - f(a)}{b - a}$ [l1];\n\u2022 $b - a > 0$ [l2];\n\u2022 $f'(c) > 0$ [l3];\n\u2022 $\\frac{f(b) - f(a)}{b - a} > 0$ [l4];\nTherefore, we conclude:\n\u2022 $f(a) < f(b)$ [l5].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a))\n  (l2 : b - a > 0)\n  (l3 : (deriv f) (Classical.choose l1) > 0)\n  (l4 : (f b - f a) / (b - a) > 0) :\n  f a < f b := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a))\n  (l2 : b - a > 0)\n  (l3 : (deriv f) (Classical.choose l1) > 0)\n  (l4 : (f b - f a) / (b - a) > 0) :\n  f a < f b := by\n  have h : f b - f a > 0 := by\n    rw [div_pos_iff] at l4\n    simp [l2] at l4\n    exact l4.1\n  linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 8, "endLine": 16, "endColumn": 19, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  0 < ?m.1115 / ?m.1116\nf : \u211d \u2192 \u211d\na b : \u211d\ntc_1 : Differentiable \u211d f\ntc_2 : \u2200 (x : \u211d), 0 < deriv f x\ndef_1 : a < b\nl1 : \u2203 c \u2208 \u0399 a b, deriv f c = (f b - f a) / (b - a)\nl2 : b - a > 0\nl3 : deriv f (Classical.choose l1) > 0\nl4 : (f b - f a) / (b - a) > 0\n\u22a2 f b - f a > 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The differentiability assumption is correctly formalized using Differentiable \u211d f", "The positive derivative condition is properly captured with the universal quantifier", "The ordering constraint a < b is correctly stated, with \u211d typing implicit", "The Mean Value Theorem condition is properly formalized using existential quantification over the open interval", "The positivity of b - a is directly translated", "The condition f'(c) > 0 is correctly formalized using Classical.choose to extract the witness c from the existential statement l1", "The positivity of the difference quotient is directly translated", "The conclusion f(a) < f(b) is correctly stated as the goal to prove", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5\n  (f : \u211d \u2192 \u211d) (a b : \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a))\n  (l2 : b - a > 0)\n  (l3 : (deriv f) (Classical.choose l1) > 0)\n  (l4 : (f b - f a) / (b - a) > 0) :\n  \u00ac (f a < f b) := by\n  have h : f b - f a > 0 := by\n    rw [div_eq_mul_inv] at l4\n    rw [\u2190 mul_lt_mul_right l2] at l4\n    simp at l4\n    exact l4\n  simp [sub_pos] at h\n  exact not_lt_of_lt h"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Since this holds for any $a < b$, the function $f$ is strictly increasing.", "statement": "We assume:\n\u2022 $f: \\mathbb{R} \\to \\mathbb{R}$ is differentiable [tc_1];\n\u2022 $f'(x) > 0$ for all $x \\in \\mathbb{R}$ [tc_2];\n\u2022 Let $a, b \\in \\mathbb{R}$ be two arbitrary points such that $a < b$ [def_1];\n\u2022 There exists $c \\in (a, b)$ such that $f'(c) = \\frac{f(b) - f(a)}{b - a}$ [l1];\n\u2022 $b - a > 0$ [l2];\n\u2022 $f'(c) > 0$ [l3];\n\u2022 $\\frac{f(b) - f(a)}{b - a} > 0$ [l4];\n\u2022 For any arbitrary $a, b$ with $a < b$, it holds that $f(a) < f(b)$ [l5];\nTherefore, we conclude:\n\u2022 $f$ is strictly increasing [ts_1].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (f : \u211d \u2192 \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (a b : \u211d)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a))\n  (l2 : b - a > 0)\n  (l3 : (deriv f) (Classical.choose l1) > 0)\n  (l4 : (f b - f a) / (b - a) > 0)\n  (l5 : f a < f b) :\n  StrictMono f := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (f : \u211d \u2192 \u211d)\n  (tc_1 : Differentiable \u211d f)\n  (tc_2 : \u2200 x : \u211d, 0 < (deriv f) x)\n  (a b : \u211d)\n  (def_1 : a < b)\n  (l1 : \u2203 c \u2208 \u0399 a b, (deriv f) c = (f b - f a) / (b - a))\n  (l2 : b - a > 0)\n  (l3 : (deriv f) (Classical.choose l1) > 0)\n  (l4 : (f b - f a) / (b - a) > 0)\n  (l5 : f a < f b) :\n  StrictMono f := by\n  intro x y hxy\n  have hcont : ContinuousOn f (Set.Icc x y) := (Differentiable.continuous tc_1).continuousOn\n  have hdiff : DifferentiableOn \u211d f (Set.Ioo x y) := fun z hz => (tc_1 z).differentiableWithinAt\n  have h : \u2203 c \u2208 Set.Ioo x y, deriv f c = (f y - f x) / (y - x) := exists_deriv_eq_slope f hxy hcont hdiff\n  let c := Classical.choose h\n  have hc : c \u2208 Set.Ioo x y \u2227 deriv f c = (f y - f x) / (y - x) := Classical.choose_spec h\n  have hpos : deriv f c > 0 := tc_2 c\n  have hyx : y - x > 0 := by linarith\n  have hdiv : f y - f x > 0 := by\n    rw [hc.2] at hpos\n    exact (mul_pos_iff_of_pos_right hyx).mp (by rwa [div_eq_mul_inv, mul_comm] at hpos)\n  linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 27, "column": 48, "endLine": 27, "endColumn": 86, "data": "tactic 'assumption' failed\nf : \u211d \u2192 \u211d\ntc_1 : Differentiable \u211d f\ntc_2 : \u2200 (x : \u211d), 0 < deriv f x\na b : \u211d\ndef_1 : a < b\nl1 : \u2203 c \u2208 \u0399 a b, deriv f c = (f b - f a) / (b - a)\nl2 : b - a > 0\nl3 : deriv f (Classical.choose l1) > 0\nl4 : (f b - f a) / (b - a) > 0\nl5 : f a < f b\nx y : \u211d\nhxy : x < y\nhcont : ContinuousOn f (Set.Icc x y)\nhdiff : DifferentiableOn \u211d f (Set.Ioo x y)\nh : \u2203 c \u2208 Set.Ioo x y, deriv f c = (f y - f x) / (y - x)\nc : \u211d := Classical.choose h\nhc : c \u2208 Set.Ioo x y \u2227 deriv f c = (f y - f x) / (y - x)\nhpos : (y - x)\u207b\u00b9 * (f y - f x) > 0\nhyx : y - x > 0\n\u22a2 0 < (f y - f x) * (y - x)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The differentiability assumption tc_1 correctly captures that f: \u211d \u2192 \u211d is differentiable using Lean's Differentiable type class.", "The condition tc_2 properly formalizes that f'(x) > 0 for all x \u2208 \u211d using deriv f to represent the derivative.", "The variables a, b \u2208 \u211d with constraint def_1: a < b correctly represent the natural language specification.", "The existence statement l1 uses \u0399 a b (open interval) instead of the standard notation for open interval (a,b), but this is just notational difference - the semantic meaning is preserved.", "The condition l2: b - a > 0 directly matches the natural language statement.", "The condition l3 uses Classical.choose l1 to extract the witness c from the existential statement l1, which is a valid way to reference the c that exists, though the natural language simply refers to 'c' directly.", "The condition l4 correctly formalizes that (f(b) - f(a))/(b - a) > 0.", "The condition l5: f a < f b represents a specific instance for the given a, b, but the natural language states 'For any arbitrary a, b with a < b, it holds that f(a) < f(b)' which should be universally quantified over all such pairs, not just the specific a, b in scope.", "The conclusion ts_1: StrictMono f correctly captures that f is strictly increasing using Lean's standard definition of strict monotonicity.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The differentiability assumption tc_1 correctly captures that f: \u211d \u2192 \u211d is differentiable using Lean's Differentiable type class.\", \"The condition tc_2 properly formalizes that f'(x) > 0 for all x \u2208 \u211d using deriv f to represent the derivative.\", 'The variables a, b \u2208 \u211d with constraint def_1: a < b correctly represent the natural language specification.', 'The existence statement l1 uses \u0399 a b (open interval) instead of the standard notation for open interval (a,b), but this is just notational difference - the semantic meaning is preserved.', 'The condition l2: b - a > 0 directly matches the natural language statement.', \"The condition l3 uses Classical.choose l1 to extract the witness c from the existential statement l1, which is a valid way to reference the c that exists, though the natural language simply refers to 'c' directly.\", 'The condition l4 correctly formalizes that (f(b) - f(a))/(b - a) > 0.', \"The condition l5: f a < f b represents a specific instance for the given a, b, but the natural language states 'For any arbitrary a, b with a < b, it holds that f(a) < f(b)' which should be universally quantified over all such pairs, not just the specific a, b in scope.\", \"The conclusion ts_1: StrictMono f correctly captures that f is strictly increasing using Lean's standard definition of strict monotonicity.\"]"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    