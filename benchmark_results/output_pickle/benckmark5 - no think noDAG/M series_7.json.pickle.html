
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $(a_n)$ be a sequence such that $a_n = \frac{n+1}{2n+1}$. Then for all integers $n \geq 1$, the inequality $\frac{1}{2} < a_n \leq \frac{2}{3}$ holds.

Proof: First, we prove the left-hand side of the inequality, $\frac{1}{2} < a_n$. We are given $a_n = \frac{n+1}{2n+1}$. To show $\frac{1}{2} < \frac{n+1}{2n+1}$, we can cross-multiply since both denominators are positive for $n \geq 1$. This gives us $1(2n+1) < 2(n+1)$, which simplifies to $2n+1 < 2n+2$. Subtracting $2n$ from both sides gives $1 < 2$, which is a true statement. Therefore, $\frac{1}{2} < a_n$ holds for all $n \geq 1$. Next, we prove the right-hand side of the inequality, $a_n \leq \frac{2}{3}$. We need to show that $\frac{n+1}{2n+1} \leq \frac{2}{3}$. Again, we can cross-multiply to get $3(n+1) \leq 2(2n+1)$. This simplifies to $3n+3 \leq 4n+2$. Subtracting $3n$ and $2$ from both sides gives $1 \leq n$. This is true for all integers $n \geq 1$. Since both parts of the inequality hold, the full inequality $\frac{1}{2} < a_n \leq \frac{2}{3}$ is proven.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $(a_n)$ be a sequence such that $a_n = \\frac{n+1}{2n+1}$.", "statement": "Premise:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n+1}{2n+1}$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, a n = (n + 1) / (2 * n + 1))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'a : \u2115 \u2192 \u211d' perfectly captures the concept of a sequence of real numbers, which is mathematically a function from natural numbers to real numbers.", "The Lean formula '(n + 1) / (2 * n + 1)' is identical to the mathematical formula, with explicit multiplication notation as required by Lean syntax."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "for all integers $n \\geq 1$", "statement": "Premise:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n+1}{2n+1}$ [tc_1]\n\u2022 $n$ is an integer such that $n \\geq 1$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, a n = (n + 1) / (2 * n + 1))\n(tc_2 : \u2200 n : \u2115, n \u2265 1)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization captures the sequence definition correctly with `a : \u2115 \u2192 \u211d` representing a sequence of real numbers and the formula `(n + 1) / (2 * n + 1)` matching the mathematical expression. However, there's a minor inconsistency in that the natural language refers to 'n is an integer' while Lean uses natural numbers (\u2115). Since the constraint is n \u2265 1, natural numbers are actually more appropriate here, making this a minor structural difference.", "The Lean condition `\u2200 n : \u2115, n \u2265 1` is logically incorrect. In Lean's type system, natural numbers (\u2115) include 0, so this condition excludes n = 0. However, the way it's written suggests that ALL natural numbers are \u2265 1, which is false since 0 \u2208 \u2115. The natural language intends to restrict the domain to n \u2265 1, but the Lean formalization makes a universal claim about all natural numbers that is mathematically incorrect."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean formalization captures the sequence definition correctly with `a : \u2115 \u2192 \u211d` representing a sequence of real numbers and the formula `(n + 1) / (2 * n + 1)` matching the mathematical expression. However, there's a minor inconsistency in that the natural language refers to 'n is an integer' while Lean uses natural numbers (\u2115). Since the constraint is n \u2265 1, natural numbers are actually more appropriate here, making this a minor structural difference.\", \"The Lean condition `\u2200 n : \u2115, n \u2265 1` is logically incorrect. In Lean's type system, natural numbers (\u2115) include 0, so this condition excludes n = 0. However, the way it's written suggests that ALL natural numbers are \u2265 1, which is false since 0 \u2208 \u2115. The natural language intends to restrict the domain to n \u2265 1, but the Lean formalization makes a universal claim about all natural numbers that is mathematically incorrect.\"]"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "we can cross-multiply since both denominators are positive for $n \\geq 1$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n+1}{2n+1}$ [tc_1]\n\u2022 $n$ is an integer such that $n \\geq 1$ [tc_2]\nTherefore, we conclude:\n\u2022 The denominators in the expression $\\frac{1}{2} < \\frac{n+1}{2n+1}$ are positive, specifically $2 > 0$ and $2n+1 > 0$ [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1) :\n  (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1) :\n  (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0 := by\n  constructor\n  \u00b7 norm_num\n  \u00b7 have : (n : \u211d) \u2265 1 := by exact_mod_cast tc_2\n    linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The variable type differs: natural language specifies 'integer' while Lean uses natural numbers (\u2115). However, since n \u2265 1, this doesn't affect the mathematical validity as positive integers are contained in natural numbers.", "The mathematical expression and constraint n \u2265 1 are correctly captured in Lean, with appropriate type annotations.", "The conclusion about positive denominators is correctly formalized, but the natural language mentions the context of an inequality (1/2 < (n+1)/(2n+1)) that is not present in the Lean formalization. The core mathematical content about positivity is preserved."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The variable type differs: natural language specifies 'integer' while Lean uses natural numbers (\u2115). However, since n \u2265 1, this doesn't affect the mathematical validity as positive integers are contained in natural numbers.\", 'The mathematical expression and constraint n \u2265 1 are correctly captured in Lean, with appropriate type annotations.', 'The conclusion about positive denominators is correctly formalized, but the natural language mentions the context of an inequality (1/2 < (n+1)/(2n+1)) that is not present in the Lean formalization. The core mathematical content about positivity is preserved.']"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "To show $\\frac{1}{2} < \\frac{n+1}{2n+1}$, we can cross-multiply since both denominators are positive for $n \\geq 1$. This gives us $1(2n+1) < 2(n+1)$, which simplifies to $2n+1 < 2n+2$. Subtracting $2n$ from both sides gives $1 < 2$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n+1}{2n+1}$ [tc_1]\n\u2022 $n$ is an integer such that $n \\geq 1$ [tc_2]\n\u2022 The denominators in the expression $\\frac{1}{2} < \\frac{n+1}{2n+1}$ are positive, specifically $2 > 0$ and $2n+1 > 0$ [l1]\nTherefore, we conclude:\n\u2022 The inequality $\\frac{1}{2} < \\frac{n+1}{2n+1}$ is equivalent to the inequality $1 < 2$ [l2].", "dependencies": ["tc_1", "tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0) :\n  (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0) :\n  (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d) := by\n  rw [tc_1]\n  constructor\n  \u00b7 intro h\n    norm_num\n  \u00b7 intro h\n    have : (2 : \u211d) * n + 1 > 0 := l1.2\n    rw [div_lt_div_right this]\n    field_simp\n    norm_cast\n    linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 17, "column": 8, "endLine": 17, "endColumn": 29, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?m.1075 / (2 * \u2191n + 1) < ?m.1076 / (2 * \u2191n + 1)\ncase mpr\na : \u2115 \u2192 \u211d\nn : \u2115\ntc_1 : a n = (\u2191n + 1) / (2 * \u2191n + 1)\ntc_2 : n \u2265 1\nl1 : 2 > 0 \u2227 2 * \u2191n + 1 > 0\nh : 1 < 2\nthis : 2 * \u2191n + 1 > 0\n\u22a2 1 / 2 < (\u2191n + 1) / (2 * \u2191n + 1)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition is correctly formalized with proper type declarations for the function and the defining equation.", "The domain constraint is properly captured using natural numbers with the additional constraint n \u2265 1.", "The positivity conditions are correctly formalized as a conjunction with appropriate real number type annotations.", "The main equivalence statement is correctly formalized using the biconditional operator and proper substitution of the sequence notation.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2_neg\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0) :\n  \u00ac((1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d)) := by\n  simp [tc_1]\n  intro h\n  have h1 : (1 : \u211d) < (2 : \u211d) := by norm_num\n  have h2 : (1 / 2 : \u211d) < (n + 1) / (2 * n + 1) := by\n    rw [div_lt_div_iff (by norm_num) l1.2]\n    ring_nf\n    norm_num\n  have h3 := h.mp h2\n  rw [h1] at h3\n  exact h3 trivial"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "which is a true statement.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n+1}{2n+1}$ [tc_1]\n\u2022 $n$ is an integer such that $n \\geq 1$ [tc_2]\n\u2022 The denominators in the expression $\\frac{1}{2} < \\frac{n+1}{2n+1}$ are positive, specifically $2 > 0$ and $2n+1 > 0$ [l1]\n\u2022 The inequality $\\frac{1}{2} < \\frac{n+1}{2n+1}$ is equivalent to the inequality $1 < 2$ [l2]\nTherefore, we conclude:\n\u2022 The inequality $1 < 2$ is true [l3].", "dependencies": ["tc_1", "tc_2", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d)) :\n  (1 : \u211d) < (2 : \u211d) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d)) :\n  (1 : \u211d) < (2 : \u211d) := by\n  rw [\u2190 l2, tc_1]\n  field_simp [l1.1, l1.2]\n  have : (n + 1 : \u211d) / (2 * n + 1) > 1 / 2 := by\n    rw [div_lt_div_right (l1.2), \u2190 mul_lt_mul_left (l1.1)]\n    ring_nf\n    simp [tc_2]\n  exact this.mp (by norm_num)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 2, "endLine": 13, "endColumn": 25, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition is correctly formalized with equivalent mathematical notation.", "The domain constraint uses natural numbers (\u2115) instead of integers (\u2124), but given the constraint n \u2265 1, this is functionally equivalent and appropriate for the context.", "The positivity conditions for denominators are perfectly captured with the conjunction of both inequalities.", "The equivalence between the original inequality and the simplified form is correctly expressed using the biconditional (\u2194).", "The final conclusion correctly states the inequality 1 < 2 over real numbers.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.8 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l3\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d)) :\n  \u00ac (1 : \u211d) < (2 : \u211d) := by\n  have h : (1 : \u211d) < (2 : \u211d) := by norm_num\n  exact not_le_of_lt h"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Therefore, $\\frac{1}{2} < a_n$ holds for all $n \\geq 1$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n+1}{2n+1}$ [tc_1]\n\u2022 $n$ is an integer such that $n \\geq 1$ [tc_2]\n\u2022 The denominators in the expression $\\frac{1}{2} < \\frac{n+1}{2n+1}$ are positive, specifically $2 > 0$ and $2n+1 > 0$ [l1]\n\u2022 The inequality $\\frac{1}{2} < \\frac{n+1}{2n+1}$ is equivalent to the inequality $1 < 2$ [l2]\n\u2022 The inequality $1 < 2$ is true [l3]\nTherefore, we conclude:\n\u2022 $\\frac{1}{2} < a_n$ [l4].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d))\n  (l3 : (1 : \u211d) < (2 : \u211d)) :\n  (1 / 2 : \u211d) < a n := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d))\n  (l3 : (1 : \u211d) < (2 : \u211d)) :\n  (1 / 2 : \u211d) < a n := by\n  rw [tc_1]\n  rw [div_lt_div_iff l1.1 l1.2]\n  simp [mul_lt_mul_left l1.1]\n  ring_nf\n  simp [Nat.succ_le_iff.mp tc_2]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition is correctly formalized with proper mathematical notation.", "Natural language specifies 'integer such that n \u2265 1' but Lean uses natural numbers (\u2115). However, since n \u2265 1 is specified, this effectively represents positive integers, making it semantically equivalent.", "The positivity conditions for denominators are accurately captured.", "The logical equivalence between the inequality and the simpler form is correctly formalized.", "The basic arithmetic fact 1 < 2 is properly stated.", "The final conclusion matches the natural language statement exactly.", "Wrong dependencies in Lean4 tactics!"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "We need to show that $\\frac{n+1}{2n+1} \\leq \\frac{2}{3}$. Again, we can cross-multiply to get $3(n+1) \\leq 2(2n+1)$. This simplifies to $3n+3 \\leq 4n+2$. Subtracting $3n$ and $2$ from both sides gives $1 \\leq n$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n+1}{2n+1}$ [tc_1]\n\u2022 $n$ is an integer such that $n \\geq 1$ [tc_2]\n\u2022 $\\frac{1}{2} < a_n$ [l4]\nTherefore, we conclude:\n\u2022 The inequality $\\frac{n+1}{2n+1} \\leq \\frac{2}{3}$ is equivalent to the inequality $1 \\leq n$ [l5].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d))\n  (l3 : (1 : \u211d) < (2 : \u211d))\n  (l4 : (1 / 2 : \u211d) < a n) :\n  (a n \u2264 (2 : \u211d) / 3) \u2194 (1 \u2264 n) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 3}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d))\n  (l3 : (1 : \u211d) < (2 : \u211d))\n  (l4 : (1 / 2 : \u211d) < a n) :\n  (a n \u2264 (2 : \u211d) / 3) \u2194 (1 \u2264 n) := by\n  rw [tc_1]\n  constructor\n  \u00b7 intro h\n    have : (0 : \u211d) < 3 := by norm_num\n    rw [div_le_div_iff (by norm_num) (by exact l1.2)] at h\n    simp only [Nat.cast_add, Nat.cast_mul, Nat.cast_one, Nat.cast_ofNat] at h\n    ring_nf at h\n    linarith\n  \u00b7 intro h\n    have : (0 : \u211d) < 3 := by norm_num\n    rw [div_le_div_iff (by norm_num) (by exact l1.2)]\n    simp only [Nat.cast_add, Nat.cast_mul, Nat.cast_one, Nat.cast_ofNat]\n    ring_nf\n    linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 24, "endLine": 18, "endColumn": 35, "data": "unsolved goals\na : \u2115 \u2192 \u211d\nn : \u2115\ntc_1 : a n = (\u2191n + 1) / (2 * \u2191n + 1)\ntc_2 : n \u2265 1\nl1 : 2 > 0 \u2227 2 * \u2191n + 1 > 0\nl2 : 1 / 2 < a n \u2194 1 < 2\nl3 : 1 < 2\nl4 : 1 / 2 < a n\nh : (\u2191n + 1) / (2 * \u2191n + 1) \u2264 2 / 3\nthis : 0 < 3\n\u22a2 0 < 2 * \u2191n + 1"}, {"line": 18, "column": 41, "endLine": 18, "endColumn": 51, "data": "type mismatch\n  l1.right\nhas type\n  2 * \u2191n + 1 > 0 : Prop\nbut is expected to have type\n  0 < 3 : Prop"}, {"line": 19, "column": 4, "endLine": 19, "endColumn": 77, "data": "simp made no progress"}, {"line": 24, "column": 24, "endLine": 24, "endColumn": 35, "data": "unsolved goals\na : \u2115 \u2192 \u211d\nn : \u2115\ntc_1 : a n = (\u2191n + 1) / (2 * \u2191n + 1)\ntc_2 : n \u2265 1\nl1 : 2 > 0 \u2227 2 * \u2191n + 1 > 0\nl2 : 1 / 2 < a n \u2194 1 < 2\nl3 : 1 < 2\nl4 : 1 / 2 < a n\nh : 1 \u2264 n\nthis : 0 < 3\n\u22a2 0 < 2 * \u2191n + 1"}, {"line": 24, "column": 41, "endLine": 24, "endColumn": 51, "data": "type mismatch\n  l1.right\nhas type\n  2 * \u2191n + 1 > 0 : Prop\nbut is expected to have type\n  0 < 3 : Prop"}, {"line": 25, "column": 4, "endLine": 25, "endColumn": 72, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The natural language specifies n as an integer \u2265 1, while Lean uses natural numbers. Though mathematically equivalent given the constraint n \u2265 1, this represents a slight type difference.", "The domain constraint n \u2265 1 is correctly captured in both versions.", "The premise condition 1/2 < a_n is directly and accurately translated.", "The main conclusion about the equivalence of the two inequalities is perfectly captured in the Lean formalization.", "The Lean formalization includes additional auxiliary conditions (l1, l2, l3) that support the proof but are not explicitly mentioned in the natural language. These are logically consistent and acceptable as extra details.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.8 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d))\n  (l3 : (1 : \u211d) < (2 : \u211d))\n  (l4 : (1 / 2 : \u211d) < a n) :\n  \u00ac((a n \u2264 (2 : \u211d) / 3) \u2194 (1 \u2264 n)) := by\n  simp [tc_1]\n  intro h\n  have h1 : (1 + 1) / (2 * 1 + 1) \u2264 (2 : \u211d) / 3 := by norm_num\n  have h2 : 1 \u2264 1 := by norm_num\n  have h3 := (h (n := 1)).mpr h2\n  have h4 : \u00ac((2 + 1) / (2 * 2 + 1) \u2264 (2 : \u211d) / 3) := by norm_num\n  have h5 : 1 \u2264 2 := by norm_num\n  have h6 := (h (n := 2)).mp h5\n  exact h4 h6"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "This is true for all integers $n \\geq 1$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n+1}{2n+1}$ [tc_1]\n\u2022 $n$ is an integer such that $n \\geq 1$ [tc_2]\n\u2022 $\\frac{1}{2} < a_n$ [l4]\n\u2022 The inequality $\\frac{n+1}{2n+1} \\leq \\frac{2}{3}$ is equivalent to the inequality $1 \\leq n$ [l5]\nTherefore, we conclude:\n\u2022 The inequality $1 \\leq n$ is true [l6].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d))\n  (l3 : (1 : \u211d) < (2 : \u211d))\n  (l4 : (1 / 2 : \u211d) < a n)\n  (l5 : (a n \u2264 (2 : \u211d) / 3) \u2194 (1 \u2264 n)) :\n  1 \u2264 n := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d))\n  (l3 : (1 : \u211d) < (2 : \u211d))\n  (l4 : (1 / 2 : \u211d) < a n)\n  (l5 : (a n \u2264 (2 : \u211d) / 3) \u2194 (1 \u2264 n)) :\n  1 \u2264 n := by\n  exact tc_2", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The sequence definition is correctly formalized with equivalent mathematical notation", "The domain constraint n \u2265 1 is properly captured using natural number type with explicit constraint", "The inequality constraint (1/2) < a_n is directly translated", "The equivalence statement correctly uses the defined sequence a_n and maintains the logical structure", "The conclusion 1 \u2264 n is properly represented as the goal to be proven"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "Since both parts of the inequality hold...", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n+1}{2n+1}$ [tc_1]\n\u2022 $n$ is an integer such that $n \\geq 1$ [tc_2]\n\u2022 $\\frac{1}{2} < a_n$ [l4]\n\u2022 The inequality $\\frac{n+1}{2n+1} \\leq \\frac{2}{3}$ is equivalent to the inequality $1 \\leq n$ [l5]\n\u2022 The inequality $1 \\leq n$ is true [l6]\nTherefore, we conclude:\n\u2022 $a_n \\leq \\frac{2}{3}$ [l7].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d))\n  (l3 : (1 : \u211d) < (2 : \u211d))\n  (l4 : (1 / 2 : \u211d) < a n)\n  (l5 : (a n \u2264 (2 : \u211d) / 3) \u2194 (1 \u2264 n))\n  (l6 : 1 \u2264 n) :\n  a n \u2264 (2 : \u211d) / 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l1 : (2 : \u211d) > 0 \u2227 (2 * n + 1 : \u211d) > 0)\n  (l2 : (1 / 2 : \u211d) < a n \u2194 (1 : \u211d) < (2 : \u211d))\n  (l3 : (1 : \u211d) < (2 : \u211d))\n  (l4 : (1 / 2 : \u211d) < a n)\n  (l5 : (a n \u2264 (2 : \u211d) / 3) \u2194 (1 \u2264 n))\n  (l6 : 1 \u2264 n) :\n  a n \u2264 (2 : \u211d) / 3 := by\n  rw [tc_1] at l5 \u22a2\n  rw [l5]\n  exact l6", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all the essential components from the natural language: the sequence definition, constraints, conditions, equivalence statement, and conclusion. The additional elements (l1, l2, l3) provide supporting mathematical details that are logically consistent with the natural language reasoning, even though they weren't explicitly stated. The core logical structure and mathematical meaning are preserved accurately."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Since both parts of the inequality hold, the full inequality $\\frac{1}{2} < a_n \\leq \\frac{2}{3}$ is proven.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n+1}{2n+1}$ [tc_1]\n\u2022 $n$ is an integer such that $n \\geq 1$ [tc_2]\n\u2022 The inequality $\\frac{1}{2} < a_n$ holds [l4]\n\u2022 The inequality $a_n \\leq \\frac{2}{3}$ holds [l7]\nTherefore, we conclude:\n\u2022 $\\frac{1}{2} < a_n \\leq \\frac{2}{3}$ [ts_1].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l4 : (1 / 2 : \u211d) < a n)\n  (l7 : a n \u2264 (2 : \u211d) / 3) :\n  (1 / 2 : \u211d) < a n \u2227 a n \u2264 (2 : \u211d) / 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d) (n : \u2115)\n  (tc_1 : a n = (n + 1) / (2 * n + 1))\n  (tc_2 : n \u2265 1)\n  (l4 : (1 / 2 : \u211d) < a n)\n  (l7 : a n \u2264 (2 : \u211d) / 3) :\n  (1 / 2 : \u211d) < a n \u2227 a n \u2264 (2 : \u211d) / 3 := by\n  exact \u27e8l4, l7\u27e9", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The sequence definition is correctly formalized with matching mathematical expression", "Using natural numbers instead of integers is mathematically equivalent given the constraint n \u2265 1, and is actually more precise", "The first inequality assumption is perfectly captured with appropriate type annotations", "The second inequality assumption is perfectly captured with appropriate type annotations", "The compound inequality conclusion is correctly expressed as a logical conjunction", "The overall logical structure from premises to conclusion is properly maintained in the lemma format"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    