
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $(a_n)$ be a sequence such that $a_n = 3n^2 - 3n + 1$. Let the partial sum be $S_N = \sum_{n=1}^{N} a_n$. Prove that $S_N = N^3$ for all integers $N \geq 1$.

Proof: We will prove this by induction on $N$. First, for the base case $N=1$, we have $S_1 = a_1$. We calculate $a_1=3(1)^2-3(1)+1 = 3-3+1 = 1$. The formula for the sum gives $1^3=1$. So $S_1 = 1^3$, which holds. Now, for the inductive step, we assume the statement is true for some integer $k \geq 1$, which means $S_k = k^3$. We want to show that the statement is true for $k+1$, i.e., $S_{k+1} = (k+1)^3$. We know that $S_{k+1} = S_k + a_{k+1}$. From the inductive hypothesis, $S_k = k^3$, and we have $a_{k+1} = 3(k+1)^2-3(k+1)+1$. So we need to show that $k^3 + 3(k+1)^2-3(k+1)+1 = (k+1)^3$. We expand the terms on the left side: $3(k+1)^2 = 3(k^2+2k+1) = 3k^2+6k+3$. Also, $-3(k+1) = -3k-3$. So the left side becomes $k^3 + (3k^2+6k+3) + (-3k-3) + 1 = k^3 + 3k^2+3k+1$. The right side is $(k+1)^3 = k^3+3k^2+3k+1$. Since the left side equals the right side, the statement is true for $k+1$. By the principle of mathematical induction, the statement is true for all integers $N \geq 1$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $(a_n)$ be a sequence such that $a_n = 3n^2 - 3n + 1$.", "statement": "Premise:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.5, "semantic_feedback": ["Natural language says 'sequence of numbers' which could be any type of numbers, while Lean specifically uses real numbers (\u211d). This is a minor specification difference but doesn't change the mathematical meaning significantly.", "Natural language says 'integers n \u2265 1' while Lean uses natural numbers \u2115 with n \u2265 1. Since natural numbers starting from 1 are equivalent to positive integers, this is essentially the same constraint but with slightly different type specification.", "The formula is identical in both representations, with Lean using explicit multiplication notation."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"Natural language says 'sequence of numbers' which could be any type of numbers, while Lean specifically uses real numbers (\u211d). This is a minor specification difference but doesn't change the mathematical meaning significantly.\", \"Natural language says 'integers n \u2265 1' while Lean uses natural numbers \u2115 with n \u2265 1. Since natural numbers starting from 1 are equivalent to positive integers, this is essentially the same constraint but with slightly different type specification.\", 'The formula is identical in both representations, with Lean using explicit multiplication notation.']"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "Let the partial sum be $S_N = \\sum_{n=1}^{N} a_n$.", "statement": "Premise:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n(S : \u2115 \u2192 \u211d)\n(tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The Lean formalization correctly captures the sequence definition. The type is specified as \u2115 \u2192 \u211d (natural numbers to reals) and the condition n \u2265 1 with the formula 3n\u00b2 - 3n + 1 matches exactly.", "The mathematical meaning is equivalent but the indexing is handled differently. The natural language uses \u2211_{n=1}^{N} a_n, while Lean uses \u2211 n in Finset.range N, a (n + 1). Since Finset.range N gives {0, 1, ..., N-1}, using a(n+1) effectively sums a(1) through a(N), which is mathematically equivalent to the natural language definition."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly captures the sequence definition. The type is specified as \u2115 \u2192 \u211d (natural numbers to reals) and the condition n \u2265 1 with the formula 3n\u00b2 - 3n + 1 matches exactly.', 'The mathematical meaning is equivalent but the indexing is handled differently. The natural language uses \u2211_{n=1}^{N} a_n, while Lean uses \u2211 n in Finset.range N, a (n + 1). Since Finset.range N gives {0, 1, ..., N-1}, using a(n+1) effectively sums a(1) through a(N), which is mathematically equivalent to the natural language definition.']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "We calculate $a_1=3(1)^2-3(1)+1 = 3-3+1 = 1$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2].\nTherefore, we conclude:\n\u2022 $a_1 = 1$ [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1)) :\n  a 1 = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * (n : \u211d)^2 - 3 * (n : \u211d) + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1)) :\n  a 1 = 1 := by\n  have h := tc_1 1 (by norm_num)\n  simp only [Nat.cast_one, one_pow, mul_one] at h\n  exact h", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 2, "endLine": 13, "endColumn": 9, "data": "type mismatch\n  h\nhas type\n  a 1 = 3 - 3 + 1 : Prop\nbut is expected to have type\n  a 1 = 1 : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition is correctly formalized. Using natural numbers with the constraint n \u2265 1 appropriately captures 'integers n \u2265 1'.", "The partial sum definition correctly uses Finset.range N with a(n+1) to represent the sum from n=1 to N.", "The conclusion a 1 = 1 is directly and correctly translated.", "The overall logical structure properly represents the assumptions-conclusion relationship from the natural language.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * (n : \u211d)^2 - 3 * (n : \u211d) + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1)) :\n  \u00ac a 1 = 1 := by\n  intro h\n  have h1 := tc_1 1 (by simp)\n  rw [h] at h1\n  norm_num at h1"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "for the base case $N=1$, we have $S_1 = a_1$. We calculate $a_1=3(1)^2-3(1)+1 = 3-3+1 = 1$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2];\n\u2022 $a_1 = 1$ [l1].\nTherefore, we conclude:\n\u2022 $S_1 = 1$ [l2].", "dependencies": ["tc_1", "tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1) :\n  S 1 = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1) :\n  S 1 = 1 := by\n  have h : S 1 = \u2211 n in Finset.range 1, a (n + 1) := tc_2 1 (by simp)\n  simp [Finset.range] at h\n  rw [h, l1]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The sequence definition tc_1 correctly captures the formula and domain restriction from natural language.", "The partial sum definition tc_2 is mathematically equivalent to the natural language version. While using different indexing notation (Finset.range N with offset), it produces the same sum from n=1 to N.", "The initial condition l1 is directly and correctly translated.", "The conclusion l2 matches the natural language statement exactly.", "The overall logical structure properly formalizes the mathematical reasoning from assumptions to conclusion."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "The formula for the sum gives $1^3=1$. So $S_1 = 1^3$, which holds.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2];\n\u2022 $a_1 = 1$ [l1];\n\u2022 $S_1 = 1$ [l2].\nTherefore, we conclude:\n\u2022 For the base case N=1, $S_1 = 1^3$ [l3].", "dependencies": ["tc_1", "tc_2", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1) :\n  S 1 = (1 : \u211d)^3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1) :\n  S 1 = (1 : \u211d)^3 := by\n  rw [l2]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.8, "semantic_feedback": ["The sequence definition is correctly formalized with equivalent domain specification.", "The partial sum definition uses different indexing notation (Finset.range with offset vs direct 1 to N indexing) but achieves the same mathematical result.", "The base case value a_1 = 1 is directly and correctly translated.", "The base case value S_1 = 1 is directly and correctly translated.", "The conclusion S_1 = 1^3 is correctly formalized with appropriate type annotation."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_1": {"id": "def_1", "natural_language": "Now, for the inductive step, we assume the statement is true for some integer $k \\geq 1$, which means $S_k = k^3$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2];\n\u2022 $a_1 = 1$ [l1];\n\u2022 $S_1 = 1$ [l2];\n\u2022 For the base case N=1, $S_1 = 1^3$ [l3].\nDefinition:\n\u2022 For the inductive step, we assume for some integer $k \\geq 1$ that $S_k = k^3$ holds (Inductive Hypothesis) [def_1].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n(S : \u2115 \u2192 \u211d)\n(tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n(l1 : a 1 = 1)\n(l2 : S 1 = 1)\n(l3 : S 1 = (1 : \u211d)^3)\n(k : \u2115)\n(def_1 : k \u2265 1 \u2192 S k = k^3)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the sequence definition with the same formula and domain constraint", "The Lean sum using Finset.range N with a(n+1) is equivalent to the mathematical notation \u2211_{n=1}^{N} a_n, as Finset.range N gives {0,1,...,N-1} and a(n+1) shifts the indexing appropriately", "Direct match of the condition a_1 = 1", "Direct match of the condition S_1 = 1", "The Lean formalization correctly captures the inductive hypothesis as an implication, which is mathematically equivalent to the stated assumption", "The Lean formalization correctly represents the conclusion S_1 = 1^3, with explicit real number typing that doesn't change the mathematical meaning"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l4": {"id": "l4", "natural_language": "We know that $S_{k+1} = S_k + a_{k+1}$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2];\n\u2022 $a_1 = 1$ [l1];\n\u2022 $S_1 = 1$ [l2];\n\u2022 For the base case N=1, $S_1 = 1^3$ [l3];\n\u2022 For some integer $k \\geq 1$, $S_k = k^3$ holds (Inductive Hypothesis) [def_1].\nTherefore, we conclude:\n\u2022 $S_{k+1} = S_k + a_{k+1}$ [l4].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (def_1 : k \u2265 1 \u2192 S k = k^3) :\n  S (k + 1) = S k + a (k + 1) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (def_1 : k \u2265 1 \u2192 S k = k^3) :\n  S (k + 1) = S k + a (k + 1) := by\n  have hk : k + 1 \u2265 1 := by simp\n  rw [tc_2 (k + 1) hk]\n  rw [Finset.sum_range_succ]\n  simp\n  cases k with\n  | zero => \n    simp [Finset.sum_range_zero]\n    rfl\n  | succ k => \n    rw [tc_2 (k + 1) (Nat.succ_pos k)]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 23, "column": 4, "endLine": 23, "endColumn": 7, "data": "tactic 'rfl' failed, the left-hand side\n  0\nis not definitionally equal to the right-hand side\n  S 0\ncase zero\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 n \u2265 1, a n = 3 * \u2191n ^ 2 - 3 * \u2191n + 1\nS : \u2115 \u2192 \u211d\ntc_2 : \u2200 N \u2265 1, S N = \u2211 n \u2208 Finset.range N, a (n + 1)\nl1 : a 1 = 1\nl2 : S 1 = 1\nl3 : S 1 = 1 ^ 3\ndef_1 : 0 \u2265 1 \u2192 S 0 = \u21910 ^ 3\nhk : 0 + 1 \u2265 1\n\u22a2 0 = S 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition correctly captures the mathematical formula, with natural numbers being appropriate for n \u2265 1.", "The partial sum definition is mathematically equivalent but structurally different - uses Finset.range N with a(n+1) instead of direct summation from 1 to N.", "The condition a_1 = 1 is perfectly captured.", "The condition S_1 = 1 is perfectly captured.", "The base case S_1 = 1\u00b3 is correctly formalized.", "The inductive hypothesis is properly captured with the implication structure.", "The conclusion S_{k+1} = S_k + a_{k+1} is correctly stated as the goal to prove.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.86 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem neg_l4\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (def_1 : k \u2265 1 \u2192 S k = k^3) :\n  \u00ac (S (k + 1) = S k + a (k + 1)) := by\n  intro h\n  by_cases hk : k \u2265 1\n  \u00b7 have h1 := def_1 hk\n    rw [h1] at h\n    have h2 := tc_1 (k + 1) (by linarith)\n    rw [h2] at h\n    have h3 := tc_2 (k + 1) (by linarith)\n    rw [h3] at h\n    simp [Finset.sum_range_succ] at h\n    rw [def_1 hk] at h\n    ring_nf at h\n    linarith\n  \u00b7 push_neg at hk\n    have hk' : k = 0 := by linarith\n    subst hk'\n    simp [tc_2, l2] at h\n    norm_num at h"}, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "From the inductive hypothesis, $S_k = k^3$, and we have $a_{k+1} = 3(k+1)^2-3(k+1)+1$. So we need to show that $k^3 + 3(k+1)^2-3(k+1)+1 = (k+1)^3$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2];\n\u2022 $a_1 = 1$ [l1];\n\u2022 $S_1 = 1$ [l2];\n\u2022 For the base case N=1, $S_1 = 1^3$ [l3];\n\u2022 For some integer $k \\geq 1$, $S_k = k^3$ holds (Inductive Hypothesis) [def_1];\n\u2022 $S_{k+1} = S_k + a_{k+1}$ [l4].\nTherefore, we conclude:\n\u2022 $S_{k+1} = k^3 + a_{k+1}$ [l5].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "def_1", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (h_k : k \u2265 1)\n  (def_1 : S k = k^3)\n  (l4 : S (k + 1) = S k + a (k + 1)) :\n  S (k + 1) = k^3 + a (k + 1) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (h_k : k \u2265 1)\n  (def_1 : S k = k^3)\n  (l4 : S (k + 1) = S k + a (k + 1)) :\n  S (k + 1) = k^3 + a (k + 1) := by\n  rw [l4, def_1]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all the mathematical statements and logical relationships from the natural language. The sequence definition, partial sum definition, base cases, inductive hypothesis, recurrence relation, and conclusion are all accurately represented. The use of natural numbers (\u2115) instead of integers is appropriate since we're dealing with n \u2265 1, and the Finset.range implementation correctly represents the summation. All logical dependencies and the substitution-based conclusion are properly formalized."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "We expand the terms on the left side: $3(k+1)^2 = 3(k^2+2k+1) = 3k^2+6k+3$. Also, $-3(k+1) = -3k-3$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2];\n\u2022 $a_1 = 1$ [l1];\n\u2022 $S_1 = 1$ [l2];\n\u2022 For the base case N=1, $S_1 = 1^3$ [l3];\n\u2022 For some integer $k \\geq 1$, $S_k = k^3$ holds (Inductive Hypothesis) [def_1];\n\u2022 $S_{k+1} = S_k + a_{k+1}$ [l4];\n\u2022 $S_{k+1} = k^3 + a_{k+1}$ [l5].\nTherefore, we conclude:\n\u2022 $a_{k+1} = 3k^2 + 3k + 1$ [l6].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "def_1", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (def_1 : k \u2265 1 \u2192 S k = k^3)\n  (l4 : S (k + 1) = S k + a (k + 1))\n  (l5 : S (k + 1) = k^3 + a (k + 1)) :\n  a (k + 1) = 3 * k^2 + 3 * k + 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (def_1 : k \u2265 1 \u2192 S k = k^3)\n  (l4 : S (k + 1) = S k + a (k + 1))\n  (l5 : S (k + 1) = k^3 + a (k + 1)) :\n  a (k + 1) = 3 * k^2 + 3 * k + 1 := by\n  have hk : k + 1 \u2265 1 := by simp\n  rw [tc_1 (k + 1) hk]\n  simp [Nat.cast_add, Nat.cast_one]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0.0, "semantic_feedback": ["While the individual mathematical statements are correctly translated from natural language to Lean, there is a fundamental logical inconsistency in the overall structure. The natural language presents the conclusion a_{k+1} = 3k^2 + 3k + 1 as following from the inductive hypothesis and sum relationships, but this conclusion actually follows directly from the sequence definition tc_1 by substituting n = k+1. The Lean formalization faithfully captures this flawed logical structure, making the overall reasoning mathematically incorrect despite accurate individual translations."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['While the individual mathematical statements are correctly translated from natural language to Lean, there is a fundamental logical inconsistency in the overall structure. The natural language presents the conclusion a_{k+1} = 3k^2 + 3k + 1 as following from the inductive hypothesis and sum relationships, but this conclusion actually follows directly from the sequence definition tc_1 by substituting n = k+1. The Lean formalization faithfully captures this flawed logical structure, making the overall reasoning mathematically incorrect despite accurate individual translations.']"}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "So the left side becomes $k^3 + (3k^2+6k+3) + (-3k-3) + 1 = k^3 + 3k^2+3k+1$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2];\n\u2022 $a_1 = 1$ [l1];\n\u2022 $S_1 = 1$ [l2];\n\u2022 For the base case N=1, $S_1 = 1^3$ [l3];\n\u2022 For some integer $k \\geq 1$, $S_k = k^3$ holds (Inductive Hypothesis) [def_1];\n\u2022 $S_{k+1} = S_k + a_{k+1}$ [l4];\n\u2022 $S_{k+1} = k^3 + a_{k+1}$ [l5];\n\u2022 $a_{k+1} = 3k^2 + 3k + 1$ [l6].\nTherefore, we conclude:\n\u2022 $S_{k+1} = k^3 + 3k^2 + 3k + 1$ [l7].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "def_1", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (def_1 : k \u2265 1 \u2192 S k = k^3)\n  (l4 : S (k + 1) = S k + a (k + 1))\n  (l5 : S (k + 1) = k^3 + a (k + 1))\n  (l6 : a (k + 1) = 3 * k^2 + 3 * k + 1) :\n  S (k + 1) = k^3 + 3 * k^2 + 3 * k + 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (def_1 : k \u2265 1 \u2192 S k = k^3)\n  (l4 : S (k + 1) = S k + a (k + 1))\n  (l5 : S (k + 1) = k^3 + a (k + 1))\n  (l6 : a (k + 1) = 3 * k^2 + 3 * k + 1) :\n  S (k + 1) = k^3 + 3 * k^2 + 3 * k + 1 := by\n  rw [l5, l6]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization accurately captures all mathematical statements from the natural language. The sequence definition, partial sum definition, base cases, inductive hypothesis, and conclusion are all correctly translated. The use of Finset.range with appropriate indexing correctly represents the summation notation. All logical relationships and mathematical expressions are preserved in the formalization."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "The right side is $(k+1)^3 = k^3+3k^2+3k+1$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2];\n\u2022 $a_1 = 1$ [l1];\n\u2022 $S_1 = 1$ [l2];\n\u2022 For the base case N=1, $S_1 = 1^3$ [l3];\n\u2022 For some integer $k \\geq 1$, $S_k = k^3$ holds (Inductive Hypothesis) [def_1];\n\u2022 $S_{k+1} = S_k + a_{k+1}$ [l4];\n\u2022 $S_{k+1} = k^3 + a_{k+1}$ [l5];\n\u2022 $a_{k+1} = 3k^2 + 3k + 1$ [l6];\n\u2022 $S_{k+1} = k^3 + 3k^2 + 3k + 1$ [l7].\nTherefore, we conclude:\n\u2022 $(k+1)^3 = k^3 + 3k^2 + 3k + 1$ [l8].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "def_1", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (k : \u2115) :\n  (k + 1 : \u211d)^3 = k^3 + 3 * k^2 + 3 * k + 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (k : \u2115) :\n  (k + 1 : \u211d)^3 = k^3 + 3 * k^2 + 3 * k + 1 := by\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical statement from conclusion [l8]. The algebraic identity (k+1)\u00b3 = k\u00b3 + 3k\u00b2 + 3k + 1 is accurately represented. The use of natural numbers instead of integers \u22651 is mathematically equivalent and appropriate. The casting to reals handles the arithmetic operations properly. While the formalization doesn't include all the premises and intermediate steps, it correctly captures the specific conclusion [l8] that was identified in the natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l9": {"id": "l9", "natural_language": "Since the left side equals the right side, the statement is true for $k+1$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2];\n\u2022 $a_1 = 1$ [l1];\n\u2022 $S_1 = 1$ [l2];\n\u2022 For the base case N=1, $S_1 = 1^3$ [l3];\n\u2022 For some integer $k \\geq 1$, $S_k = k^3$ holds (Inductive Hypothesis) [def_1];\n\u2022 $S_{k+1} = S_k + a_{k+1}$ [l4];\n\u2022 $S_{k+1} = k^3 + a_{k+1}$ [l5];\n\u2022 $a_{k+1} = 3k^2 + 3k + 1$ [l6];\n\u2022 $S_{k+1} = k^3 + 3k^2 + 3k + 1$ [l7];\n\u2022 $(k+1)^3 = k^3 + 3k^2 + 3k + 1$ [l8].\nTherefore, we conclude:\n\u2022 $S_{k+1} = (k+1)^3$ [l9].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "def_1", "l4", "l5", "l6", "l7", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l9\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (def_1 : k \u2265 1 \u2192 S k = k^3)\n  (l4 : S (k + 1) = S k + a (k + 1))\n  (l5 : S (k + 1) = k^3 + a (k + 1))\n  (l6 : a (k + 1) = 3 * k^2 + 3 * k + 1)\n  (l7 : S (k + 1) = k^3 + 3 * k^2 + 3 * k + 1)\n  (l8 : (k + 1 : \u211d)^3 = k^3 + 3 * k^2 + 3 * k + 1) :\n  S (k + 1) = (k + 1) ^ 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l9\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l1 : a 1 = 1)\n  (l2 : S 1 = 1)\n  (l3 : S 1 = (1 : \u211d)^3)\n  (k : \u2115)\n  (def_1 : k \u2265 1 \u2192 S k = k^3)\n  (l4 : S (k + 1) = S k + a (k + 1))\n  (l5 : S (k + 1) = k^3 + a (k + 1))\n  (l6 : a (k + 1) = 3 * k^2 + 3 * k + 1)\n  (l7 : S (k + 1) = k^3 + 3 * k^2 + 3 * k + 1)\n  (l8 : (k + 1 : \u211d)^3 = k^3 + 3 * k^2 + 3 * k + 1) :\n  S (k + 1) = (k + 1) ^ 3 := by\n  rw [l7, l8]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The sequence definition correctly translates the mathematical formula with proper type constraints", "The partial sum definition uses Finset.range with index shifting to correctly capture summation from 1 to N", "Base case a_1 = 1 is directly and correctly translated", "Base case S_1 = 1 is directly and correctly translated", "Base case S_1 = 1^3 is correctly formalized with proper type annotation", "The inductive hypothesis is properly formalized as a conditional statement", "The recurrence relation for partial sums is correctly translated", "The substitution step using the inductive hypothesis is correctly formalized", "The formula for a_{k+1} is correctly translated with proper arithmetic operations", "The algebraic combination is correctly represented", "The binomial expansion identity is correctly formalized with type annotation", "The final conclusion correctly captures the inductive step result"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "By the principle of mathematical induction, the statement is true for all integers $N \\geq 1$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of numbers where $a_n = 3n^2 - 3n + 1$ for all integers $n \\geq 1$ [tc_1];\n\u2022 The partial sum of the sequence $(a_n)$ is defined as $S_N = \\sum_{n=1}^{N} a_n$ [tc_2];\n\u2022 The base case $N=1$ holds, i.e., $S_1 = 1^3$ [l3];\n\u2022 For an integer $k \\geq 1$, assuming $S_k = k^3$ [def_1] implies that $S_{k+1} = (k+1)^3$ [l9].\nTherefore, we conclude:\n\u2022 $S_N = N^3$ for all integers $N \\geq 1$ [ts_1].", "dependencies": ["tc_1", "tc_2", "l1", "l2", "l3", "def_1", "l4", "l5", "l6", "l7", "l8", "l9"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l3 : S 1 = (1 : \u211d)^3)\n  (def_1 : \u2200 k : \u2115, k \u2265 1 \u2192 S k = k^3)\n  (l9 : \u2200 k : \u2115, (k \u2265 1 \u2192 S k = k^3) \u2192 S (k + 1) = (k + 1) ^ 3) :\n  \u2200 N : \u2115, N \u2265 1 \u2192 S N = N^3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 3 * n^2 - 3 * n + 1)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.range N, a (n + 1))\n  (l3 : S 1 = (1 : \u211d)^3)\n  (def_1 : \u2200 k : \u2115, k \u2265 1 \u2192 S k = k^3)\n  (l9 : \u2200 k : \u2115, (k \u2265 1 \u2192 S k = k^3) \u2192 S (k + 1) = (k + 1) ^ 3) :\n  \u2200 N : \u2115, N \u2265 1 \u2192 S N = N^3 := by\n  intro N hN\n  induction' N using Nat.strong_induction_on with N ih\n  cases' N with N\n  \u00b7 simp at hN\n  \u00b7 cases' N with N\n    \u00b7 simp [l3]\n    \u00b7 have hN1 : N + 1 \u2265 1 := by simp\n      have ih' := ih (N + 1) (Nat.lt_succ_self (N + 1))\n      have h := l9 (N + 1) (fun _ => ih' hN1)\n      simp at h \u22a2\n      exact h", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The partial sum definition has a minor notational difference. The natural language uses standard mathematical notation \u2211_{n=1}^{N} a_n, while Lean uses Finset.range N with a (n + 1). These are mathematically equivalent but structurally different representations.", "The sequence definition perfectly matches - both specify the formula for a_n with the constraint n \u2265 1.", "The base case S_1 = 1\u00b3 is perfectly captured in both versions.", "Major logical inconsistency in the inductive step assumption. The natural language presents def_1 as an assumption for the inductive step, but the Lean formalization treats it as a universal statement that S_k = k\u00b3 holds for all k \u2265 1. This makes def_1 equivalent to the final conclusion, which is logically problematic for an inductive proof structure.", "Major logical inconsistency in the inductive step. The natural language describes a conditional implication for induction, but the Lean version has l9 assume the universal statement (k \u2265 1 \u2192 S k = k\u00b3) rather than the specific case S k = k\u00b3. This changes the logical structure from a proper inductive step to something that assumes the general result.", "The final conclusion perfectly matches - both state that S_N = N\u00b3 for all N \u2265 1."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The partial sum definition has a minor notational difference. The natural language uses standard mathematical notation \u2211_{n=1}^{N} a_n, while Lean uses Finset.range N with a (n + 1). These are mathematically equivalent but structurally different representations.', 'The sequence definition perfectly matches - both specify the formula for a_n with the constraint n \u2265 1.', 'The base case S_1 = 1\u00b3 is perfectly captured in both versions.', 'Major logical inconsistency in the inductive step assumption. The natural language presents def_1 as an assumption for the inductive step, but the Lean formalization treats it as a universal statement that S_k = k\u00b3 holds for all k \u2265 1. This makes def_1 equivalent to the final conclusion, which is logically problematic for an inductive proof structure.', 'Major logical inconsistency in the inductive step. The natural language describes a conditional implication for induction, but the Lean version has l9 assume the universal statement (k \u2265 1 \u2192 S k = k\u00b3) rather than the specific case S k = k\u00b3. This changes the logical structure from a proper inductive step to something that assumes the general result.', 'The final conclusion perfectly matches - both state that S_N = N\u00b3 for all N \u2265 1.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l9", "label": "l9", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l9", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    