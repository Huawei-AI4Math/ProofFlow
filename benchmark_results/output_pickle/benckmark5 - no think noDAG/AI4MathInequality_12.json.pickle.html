
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for any $a, b, c$ which are the lengths of the sides of a triangle, the following inequality holds:
$$ (a+b-c)^{a}(b+c-a)^{b}(c+a-b)^{c} \leq a^{a} b^{b} c^{c} $$

Proof: Let $x = a+b-c$, $y = b+c-a$, and $z = c+a-b$. Since $a, b, c$ are the side lengths of a triangle, we have $a+b>c$, $b+c>a$, and $c+a>b$, so $x, y, z > 0$. Consider the expression $$P = \left(rac{x}{a}ight)^a \left(rac{y}{b}ight)^b \left(rac{z}{c}ight)^c.$$. Taking logarithms, we obtain $\ln P = a \ln rac{x}{a} + b \ln rac{y}{b} + c \ln rac{z}{c}$. Using the inequality $\ln u \le u-1$ for $u>0$, we have $a \ln rac{x}{a} \le x-a = b-c$, $b \ln rac{y}{b} \le y-b = c-a$, and $c \ln rac{z}{c} \le z-c = a-b$. Summing these inequalities gives $\ln P \le (b-c) + (c-a) + (a-b) = 0$, so $P \le 1$. Multiplying both sides by $a^a b^b c^c > 0$ yields $(a+b-c)^a (b+c-a)^b (c+a-b)^c \le a^a b^b c^c$, which proves the desired inequality.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for any $a, b, c$ which are the lengths of the sides of a triangle", "statement": "Premise:\n\u2022 a, b, c are positive real numbers and are the lengths of the sides of a triangle [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly declares a, b, c as real numbers and includes the positivity conditions (0 < a \u2227 0 < b \u2227 0 < c) which perfectly matches the natural language requirement.", "The Lean formalization uses the triangle inequality conditions (a + b > c \u2227 b + c > a \u2227 c + a > b) which is the precise mathematical definition of when three positive real numbers can form the sides of a triangle. This perfectly captures the natural language condition."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let $x = a+b-c$, $y = b+c-a$, and $z = c+a-b$.", "statement": "We assume:\n\u2022 a, b, c are positive real numbers and are the lengths of the sides of a triangle [tc_1].\nDefinition:\n\u2022 Let x, y, z be real numbers such that x = a + b - c, y = b + c - a, and z = c + a - b [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n(def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `(a b c : \u211d)` correctly captures that a, b, c are real numbers. The positivity is captured in tc_1.", "The Lean condition `tc_1` correctly formalizes both the positivity requirement (0 < a \u2227 0 < b \u2227 0 < c) and the triangle inequality conditions (a + b > c \u2227 b + c > a \u2227 c + a > b) which together ensure that a, b, c are the lengths of sides of a triangle.", "The Lean condition `def_1` exactly matches the mathematical definitions with x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Since $a, b, c$ are the side lengths of a triangle, we have $a+b>c$, $b+c>a$, and $c+a>b$", "statement": "We assume:\n\u2022 a, b, c are positive real numbers and are the lengths of the sides of a triangle [tc_1];\n\u2022 Let x, y, z be real numbers such that x = a + b - c, y = b + c - a, and z = c + a - b [def_1].\nTherefore, we conclude:\n\u2022 The triangle inequalities hold: a + b > c, b + c > a, and c + a > b [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b) :\n  a + b > c \u2227 b + c > a \u2227 c + a > b := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b) :\n  a + b > c \u2227 b + c > a \u2227 c + a > b := by\n  exact tc_1.2.2.2", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable types and positivity conditions are correctly formalized", "Triangle side length condition is properly represented through triangle inequalities", "The definitions of variables x, y, z are completely missing from the Lean formalization, despite being explicitly stated in the natural language", "The conclusion about triangle inequalities is correctly formalized"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable types and positivity conditions are correctly formalized', 'Triangle side length condition is properly represented through triangle inequalities', 'The definitions of variables x, y, z are completely missing from the Lean formalization, despite being explicitly stated in the natural language', 'The conclusion about triangle inequalities is correctly formalized']"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "so $x, y, z > 0$.", "statement": "We assume:\n\u2022 a, b, c are positive real numbers and are the lengths of the sides of a triangle [tc_1];\n\u2022 Let x, y, z be real numbers such that x = a + b - c, y = b + c - a, and z = c + a - b [def_1];\n\u2022 The triangle inequalities hold: a + b > c, b + c > a, and c + a > b [l1].\nTherefore, we conclude:\n\u2022 x > 0, y > 0, and z > 0 [l2].", "dependencies": ["tc_1", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c : \u211d)\n  (x y z : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b) :\n  x > 0 \u2227 y > 0 \u2227 z > 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c : \u211d)\n  (x y z : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b) :\n  x > 0 \u2227 y > 0 \u2227 z > 0 := by\n  rcases def_1 with \u27e8hx, hy, hz\u27e9\n  rcases l1 with \u27e8habc, hbca, hcab\u27e9\n  constructor\n  \u00b7 rw [hx]; linarith\n  \u00b7 constructor\n    \u00b7 rw [hy]; linarith\n    \u00b7 rw [hz]; linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all the mathematical content and logical structure from the natural language. The variable declarations, definitions (x = a + b - c, etc.), triangle inequalities, and the conclusion (x > 0, y > 0, z > 0) are all properly represented. There is some redundancy with triangle inequalities appearing in both tc_1 and l1, but this doesn't affect the logical correctness. The formalization preserves the assumption-to-conclusion structure and all mathematical relationships."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_2": {"id": "def_2", "natural_language": "Consider the expression $$P = \\left(\frac{x}{a}ight)^a \\left(\frac{y}{b}ight)^b \\left(\frac{z}{c}ight)^c.$$", "statement": "We assume:\n\u2022 a, b, c are positive real numbers and are the lengths of the sides of a triangle [tc_1];\n\u2022 Let x, y, z be real numbers such that x = a + b - c, y = b + c - a, and z = c + a - b [def_1];\n\u2022 The triangle inequalities hold: a + b > c, b + c > a, and c + a > b [l1];\n\u2022 x > 0, y > 0, and z > 0 [l2].\nDefinition:\n\u2022 Let P be a real number such that $P = (x/a)^a * (y/b)^b * (z/c)^c$ [def_2].", "dependencies": ["tc_1", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (a b c : \u211d)\n  (x y z : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization captures both the positivity of a, b, c and the triangle inequalities in tc_1, which matches the natural language condition about positive real numbers being sides of a triangle", "The definitions of x, y, z in terms of a, b, c are identical between natural language and Lean", "The triangle inequalities are explicitly stated in both natural language and Lean with identical mathematical content", "The positivity conditions for x, y, z are identical in both versions", "The definition of P using the product formula is mathematically identical, with Lean using standard notation for exponentiation and multiplication"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l3": {"id": "l3", "natural_language": "Taking logarithms, we obtain $\\ln P = a \\ln \frac{x}{a} + b \\ln \frac{y}{b} + c \\ln \frac{z}{c}$.", "statement": "We assume:\n\u2022 a, b, c are positive real numbers and are the lengths of the sides of a triangle [tc_1];\n\u2022 Let x, y, z be real numbers such that x = a + b - c, y = b + c - a, and z = c + a - b [def_1];\n\u2022 The triangle inequalities hold: a + b > c, b + c > a, and c + a > b [l1];\n\u2022 x > 0, y > 0, and z > 0 [l2];\n\u2022 Let P be a real number such that $P = (x/a)^a * (y/b)^b * (z/c)^c$ [def_2].\nTherefore, we conclude:\n\u2022 $\\ln(P) = a * \\ln(x/a) + b * \\ln(y/b) + c * \\ln(z/c)$ [l3].", "dependencies": ["tc_1", "def_1", "l1", "l2", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c x y z P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c) :\n  Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c x y z P : \u211d)\n  (ha : 0 < a) (hb : 0 < b) (hc : 0 < c)\n  (tc_1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c) :\n  Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c) := by\n  rw [def_2]\n  have hx : 0 < x / a := by apply div_pos; exact l2.1; exact ha\n  have hy : 0 < y / b := by apply div_pos; exact l2.2.1; exact hb\n  have hz : 0 < z / c := by apply div_pos; exact l2.2.2; exact hc\n  have h1 : (x / a) ^ a > 0 := Real.rpow_pos_of_pos hx a\n  have h2 : (y / b) ^ b > 0 := Real.rpow_pos_of_pos hy b\n  have h3 : (z / c) ^ c > 0 := Real.rpow_pos_of_pos hz c\n  rw [Real.log_mul (ne_of_gt (mul_pos h1 h2)), Real.log_mul (ne_of_gt h1)]\n  rw [Real.log_rpow hx, Real.log_rpow hy, Real.log_rpow hz]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 85, "endLine": 23, "endColumn": 6, "data": "unsolved goals\na b c x y z P : \u211d\nha : 0 < a\nhb : 0 < b\nhc : 0 < c\ntc_1 : a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nl1 : a + b > c \u2227 b + c > a \u2227 c + a > b\nl2 : x > 0 \u2227 y > 0 \u2227 z > 0\ndef_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c\nhx : 0 < x / a\nhy : 0 < y / b\nhz : 0 < z / c\nh1 : (x / a) ^ a > 0\nh2 : (y / b) ^ b > 0\nh3 : (z / c) ^ c > 0\n\u22a2 (y * b\u207b\u00b9) ^ b \u2260 0\n\na b c x y z P : \u211d\nha : 0 < a\nhb : 0 < b\nhc : 0 < c\ntc_1 : a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nl1 : a + b > c \u2227 b + c > a \u2227 c + a > b\nl2 : x > 0 \u2227 y > 0 \u2227 z > 0\ndef_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c\nhx : 0 < x / a\nhy : 0 < y / b\nhz : 0 < z / c\nh1 : (x / a) ^ a > 0\nh2 : (y / b) ^ b > 0\nh3 : (z / c) ^ c > 0\n\u22a2 (z / c) ^ c \u2260 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all components from the natural language. The variable declarations, definitions, and logical relationships are all properly represented. The redundancy in triangle inequalities (appearing in both tc_1 and l1) is acceptable as it doesn't create logical inconsistency. The use of Real.log instead of ln notation is standard in Lean and semantically equivalent. All mathematical content and logical structure from the natural language is preserved in the formalization.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l3\n  (a b c x y z P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c) :\n  \u00ac(Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c)) := by\n  intro h\n  rw [def_2] at h\n  have hx : x / a > 0 := by linarith [tc_1.1, l2.1]\n  have hy : y / b > 0 := by linarith [tc_1.2.1, l2.2.1]\n  have hz : z / c > 0 := by linarith [tc_1.2.2, l2.2.2]\n  rw [Real.log_mul (pow_pos hx a), Real.log_mul (pow_pos hy b), \n      Real.log_pow hx a, Real.log_pow hy b, Real.log_pow hz c] at h\n  rw [Real.log_div (by linarith [l2.1]) (by linarith [tc_1.1]), \n      Real.log_div (by linarith [l2.2.1]) (by linarith [tc_1.2.1]),\n      Real.log_div (by linarith [l2.2.2]) (by linarith [tc_1.2.2])] at h\n  simp_rw [mul_add, mul_add] at h\n  rw [def_1.1, def_1.2.1, def_1.2.2] at h\n  simp at h\n  contradiction"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Using the inequality $\\ln u \\le u-1$ for $u>0$, we have $a \\ln \frac{x}{a} \\le x-a = b-c$", "statement": "We assume:\n\u2022 a, b, c are positive real numbers and are the lengths of the sides of a triangle [tc_1];\n\u2022 Let x, y, z be real numbers such that x = a + b - c, y = b + c - a, and z = c + a - b [def_1];\n\u2022 x > 0, y > 0, and z > 0 [l2].\nTherefore, we conclude:\n\u2022 $a * \\ln(x/a) \\le b - c$ [l4].", "dependencies": ["tc_1", "def_1", "l1", "l2", "def_2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c x y z : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b) :\n  a * Real.log (x / a) \u2264 b - c := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c x y z : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b) :\n  a * Real.log (x / a) \u2264 b - c := by\n  have hx : x / a = (a + b - c) / a := by rw [def_1.1]\n  have h1 : (a + b - c) / a = (a + (b - c)) / a := by ring\n  rw [hx, h1]\n  have h2 : (a + (b - c)) / a = 1 + (b - c)/a := by\n    rw [add_div, div_self (ne_of_gt tc_1.1)]\n    ring\n  rw [h2]\n  have h3 : b - c > -a := by linarith [tc_1.2.2.2]\n  have h4 : (b - c)/a > -1 := by\n    rw [div_gt_iff' (tc_1.1)]\n    exact h3\n  have h5 : 1 + (b - c)/a > 0 := by linarith\n  have h6 := Real.log_le_sub_one_of_pos h5\n  rw [mul_comm]\n  have h7 : b - c \u2265 0 := by linarith [tc_1.2.2.2]\n  convert mul_le_mul_of_nonneg_right h6 (le_of_lt tc_1.1) using 1\n  field_simp\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 8, "endLine": 14, "endColumn": 15, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  (?m.1318 + ?m.1319) / ?m.1320\na b c x y z : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nhx : x / a = (a + b - c) / a\nh1 : (a + b - c) / a = (a + (b - c)) / a\n\u22a2 (a + (b - c)) / a = 1 + (b - c) / a"}, {"line": 19, "column": 8, "endLine": 19, "endColumn": 19, "data": "unknown identifier 'div_gt_iff''"}, {"line": 19, "column": 8, "endLine": 19, "endColumn": 28, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.2670\na b c x y z : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nhx : x / a = (a + b - c) / a\nh1 : (a + b - c) / a = (a + (b - c)) / a\nh2 : (a + (b - c)) / a = 1 + (b - c) / a\nh3 : b - c > -a\n\u22a2 (b - c) / a > -1"}, {"line": 24, "column": 28, "endLine": 24, "endColumn": 49, "data": "linarith failed to find a contradiction\ncase a\na b c x y z : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nhx : x / a = (a + b - c) / a\nh1 : (a + b - c) / a = (a + (b - c)) / a\nh2 : (a + (b - c)) / a = 1 + (b - c) / a\nh3 : b - c > -a\nh4 : (b - c) / a > -1\nh5 : 1 + (b - c) / a > 0\nh6 : Real.log (1 + (b - c) / a) \u2264 1 + (b - c) / a - 1\na\u271d : 0 > b - c\n\u22a2 False failed"}, {"line": 9, "column": 34, "endLine": 27, "endColumn": 6, "data": "unsolved goals\ncase h.e'_4\na b c x y z : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nhx : x / a = (a + b - c) / a\nh1 : (a + b - c) / a = (a + (b - c)) / a\nh2 : (a + (b - c)) / a = 1 + (b - c) / a\nh3 : b - c > -a\nh4 : (b - c) / a > -1\nh5 : 1 + (b - c) / a > 0\nh6 : Real.log (1 + (b - c) / a) \u2264 1 + (b - c) / a - 1\nh7 : b - c \u2265 0\n\u22a2 b - c = b * a * a\u207b\u00b9 - c * a * a\u207b\u00b9"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization is missing a key assumption from the natural language: 'x > 0, y > 0, and z > 0 [l2]'. This condition is explicitly listed as one of the assumptions in the natural language but is completely absent from the Lean lemma statement. This omission is significant because: (1) it's explicitly stated as an assumption we have, and (2) the condition x > 0 is likely necessary for the logarithm ln(x/a) to be well-defined. All other components (variable types, triangle conditions, definitions, and the conclusion) are correctly formalized.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean formalization is missing a key assumption from the natural language: 'x > 0, y > 0, and z > 0 [l2]'. This condition is explicitly listed as one of the assumptions in the natural language but is completely absent from the Lean lemma statement. This omission is significant because: (1) it's explicitly stated as an assumption we have, and (2) the condition x > 0 is likely necessary for the logarithm ln(x/a) to be well-defined. All other components (variable types, triangle conditions, definitions, and the conclusion) are correctly formalized.\"]"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "$b \\ln \frac{y}{b} \\le y-b = c-a$", "statement": "We assume:\n\u2022 a, b, c are positive real numbers and are the lengths of the sides of a triangle [tc_1];\n\u2022 Let x, y, z be real numbers such that x = a + b - c, y = b + c - a, and z = c + a - b [def_1];\n\u2022 x > 0, y > 0, and z > 0 [l2].\nTherefore, we conclude:\n\u2022 $b * \\ln(y/b) \\le c - a$ [l5].", "dependencies": ["tc_1", "def_1", "l1", "l2", "def_2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c x y z : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0) :\n  b * log (y / b) \u2264 c - a := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c x y z : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0) :\n  b * log (y / b) \u2264 c - a := by\n  have h1 : y = b + c - a := def_1.2.1\n  have h2 : y / b = 1 + (c - a) / b := by\n    rw [h1]\n    field_simp [tc_1.2.1]\n    ring\n  rw [h2]\n  have h3 : (c - a) / b > -1 := by\n    have : c + a > b := tc_1.2.2.2.2\n    have : c - a > -b := by linarith\n    field_simp [tc_1.2.1]\n    rw [\u2190 neg_div, neg_lt_neg_iff]\n    exact this\n  have h4 : log (1 + (c - a) / b) \u2264 (c - a) / b := by\n    have h : -1 < (c - a) / b := h3\n    have := exp_ge_one_add_this h\n    rw [\u2190 exp_le_exp, exp_log (by linarith [h])]\n    exact this\n  rw [mul_comm]\n  apply mul_le_of_le_one_left (by linarith [tc_1.2.1]) h4", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 4, "endLine": 14, "endColumn": 25, "data": "simp made no progress"}, {"line": 18, "column": 24, "endLine": 18, "endColumn": 36, "data": "type mismatch\n  tc_1.right.right.right.right\nhas type\n  b + c > a \u2227 c + a > b : Prop\nbut is expected to have type\n  c + a > b : Prop"}, {"line": 21, "column": 8, "endLine": 21, "endColumn": 17, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  -(?b / ?a)\na b c x y z : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nl2 : x > 0 \u2227 y > 0 \u2227 z > 0\nh1 : y = b + c - a\nh2 : y / b = 1 + (c - a) / b\nthis\u271d : c + a > b\nthis : c - a > -b\n\u22a2 -1 < (c - a) / b"}, {"line": 25, "column": 12, "endLine": 25, "endColumn": 31, "data": "unknown identifier 'exp_ge_one_add_this'"}, {"line": 29, "column": 2, "endLine": 29, "endColumn": 57, "data": "tactic 'apply' failed, failed to unify\n  ?m.12520 * ?m.12521 \u2264 ?m.12521\nwith\n  Real.log (1 + (c - a) / b) * b \u2264 c - a\na b c x y z : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nl2 : x > 0 \u2227 y > 0 \u2227 z > 0\nh1 : y = b + c - a\nh2 : y / b = 1 + (c - a) / b\nh3 : (c - a) / b > -1\nh4 : Real.log (1 + (c - a) / b) \u2264 (c - a) / b\n\u22a2 Real.log (1 + (c - a) / b) * b \u2264 c - a"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations correctly specify all variables as real numbers, with positivity constraints properly handled in conditions", "Triangle condition correctly expands 'sides of a triangle' to include both positivity and triangle inequality constraints", "Variable definitions x, y, z are exactly as specified in natural language", "Positivity conditions for x, y, z match exactly", "Conclusion inequality matches the mathematical content, with appropriate notation translation from LaTeX to Lean", "Overall logical structure correctly represents the premise-conclusion relationship", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5 :\n  \u2203 (a b c x y z : \u211d),\n    0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b \u2227\n    x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b \u2227\n    x > 0 \u2227 y > 0 \u2227 z > 0 \u2227\n    \u00ac b * log (y / b) \u2264 c - a := by\n  use 1, 2, 1.5\n  have tc_1 : 0 < 1 \u2227 0 < 2 \u2227 0 < 1.5 \u2227 1 + 2 > 1.5 \u2227 2 + 1.5 > 1 \u2227 1.5 + 1 > 2 := by norm_num\n  have def_1 : 1 + 2 - 1.5 = 1 + 2 - 1.5 \u2227 2 + 1.5 - 1 = 2 + 1.5 - 1 \u2227 1.5 + 1 - 2 = 1.5 + 1 - 2 := by constructor <;> rfl\n  have l2 : 1 + 2 - 1.5 > 0 \u2227 2 + 1.5 - 1 > 0 \u2227 1.5 + 1 - 2 > 0 := by norm_num\n  simp [def_1]\n  have : 2 * log (2.5 / 2) \u2248 0.446287 := by norm_num\n  have : 1.5 - 1 = 0.5 := by norm_num\n  linarith"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "$c \\ln \frac{z}{c} \\le z-c = a-b$.", "statement": "We assume:\n\u2022 a, b, c are positive real numbers and are the lengths of the sides of a triangle [tc_1];\n\u2022 Let x, y, z be real numbers such that x = a + b - c, y = b + c - a, and z = c + a - b [def_1];\n\u2022 x > 0, y > 0, and z > 0 [l2].\nTherefore, we conclude:\n\u2022 $c * \\ln(z/c) \\le a - b$ [l6].", "dependencies": ["tc_1", "def_1", "l1", "l2", "def_2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a b c x y z : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0) :\n  c * log (z / c) \u2264 a - b := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a b c x y z : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0) :\n  c * log (z / c) \u2264 a - b := by\n  have hc : c > 0 := tc_1.2.2.1\n  have hz : z > 0 := l2.2.2\n  have hzc : z / c > 0 := div_pos hz hc\n  have h1 : log (z / c) \u2264 z / c - 1 := log_le_sub_one_of_pos hzc\n  rw [def_1.2.2] at h1 \u22a2\n  have h2 : c * log ((c + a - b) / c) \u2264 c * ((c + a - b) / c - 1) := mul_le_mul_of_nonneg_left h1 (le_of_lt hc)\n  simp only [div_eq_mul_inv, mul_sub, mul_one] at h2\n  rw [mul_assoc, mul_inv_cancel hc.ne', mul_one] at h2\n  simp at h2\n  exact h2", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 6, "endLine": 18, "endColumn": 15, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a * ?b * ?c\na b c x y z : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nl2 : x > 0 \u2227 y > 0 \u2227 z > 0\nhc : c > 0\nhz : z > 0\nhzc : z / c > 0\nh1 : Real.log ((c + a - b) / c) \u2264 (c + a - b) / c - 1\nh2 : c * Real.log ((c + a - b) * c\u207b\u00b9) \u2264 c * ((c + a - b) * c\u207b\u00b9) - c\n\u22a2 c * Real.log ((c + a - b) / c) \u2264 a - b"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations correctly specify all variables as real numbers, with positivity constraints properly handled in the conditions.", "Triangle conditions are completely and correctly formalized, including both positivity of side lengths and all three triangle inequality constraints.", "The definitions of x, y, z are exactly matched between natural language and Lean formalization.", "The positivity conditions for x, y, z are perfectly captured.", "The conclusion inequality is correctly translated, with proper use of natural logarithm and less-than-or-equal-to relation.", "The overall logical structure properly represents the implication from assumptions to conclusion.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l6 :\n  \u2203 (a b c x y z : \u211d),\n    0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b \u2227\n    x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b \u2227\n    x > 0 \u2227 y > 0 \u2227 z > 0 \u2227\n    \u00ac c * log (z / c) \u2264 a - b := by\n  use 2, 1, 1.5\n  have tc_1 : 0 < 2 \u2227 0 < 1 \u2227 0 < 1.5 \u2227 2 + 1 > 1.5 \u2227 1 + 1.5 > 2 \u2227 1.5 + 2 > 1 := by norm_num\n  have def_1 : (2 + 1 - 1.5) = 2 + 1 - 1.5 \u2227 (1 + 1.5 - 2) = 1 + 1.5 - 2 \u2227 (1.5 + 2 - 1) = 1.5 + 2 - 1 := by norm_num\n  have l2 : (2 + 1 - 1.5) > 0 \u2227 (1 + 1.5 - 2) > 0 \u2227 (1.5 + 2 - 1) > 0 := by norm_num\n  simp [def_1]\n  have : 1.5 * log (2.5 / 1.5) > 1 := by\n    have : log (2.5 / 1.5) \u2248 0.510825623766 := by\n      rw [div_eq_mul_inv]\n      exact Real.log_mul (by norm_num) (by norm_num) (by norm_num)\n    norm_num [this]\n  linarith"}, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "Summing these inequalities gives $\\ln P \\le (b-c) + (c-a) + (a-b) = 0$", "statement": "We assume:\n\u2022 $\\ln(P) = a * \\ln(x/a) + b * \\ln(y/b) + c * \\ln(z/c)$ [l3];\n\u2022 $a * \\ln(x/a) \\le b - c$ [l4];\n\u2022 $b * \\ln(y/b) \\le c - a$ [l5];\n\u2022 $c * \\ln(z/c) \\le a - b$ [l6].\nTherefore, we conclude:\n\u2022 $\\ln(P) \\le 0$ [l7].", "dependencies": ["tc_1", "def_1", "l1", "l2", "def_2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a b c x y z P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c)\n  (l3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c))\n  (l4 : a * Real.log (x / a) \u2264 b - c)\n  (l5 : b * Real.log (y / b) \u2264 c - a)\n  (l6 : c * Real.log (z / c) \u2264 a - b) :\n  Real.log P \u2264 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a b c x y z P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c)\n  (l3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c))\n  (l4 : a * Real.log (x / a) \u2264 b - c)\n  (l5 : b * Real.log (y / b) \u2264 c - a)\n  (l6 : c * Real.log (z / c) \u2264 a - b) :\n  Real.log P \u2264 0 := by\n  rw [l3]\n  have h1 := add_le_add l4 l5\n  have h2 := add_le_add h1 l6\n  simp at h2\n  linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The core logical structure from the natural language (assumptions l3, l4, l5, l6 leading to conclusion l7) is perfectly captured in the Lean formalization. However, the Lean version includes substantial additional context including triangle inequality constraints, specific definitions relating the variables, and positivity requirements that are not mentioned in the natural language. While these additions don't contradict the natural language and may be necessary for a complete mathematical proof, they significantly expand the scope beyond what was stated in the premise. The natural language presents this as a general logical inference, while the Lean formalization embeds it in a specific mathematical context."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The core logical structure from the natural language (assumptions l3, l4, l5, l6 leading to conclusion l7) is perfectly captured in the Lean formalization. However, the Lean version includes substantial additional context including triangle inequality constraints, specific definitions relating the variables, and positivity requirements that are not mentioned in the natural language. While these additions don't contradict the natural language and may be necessary for a complete mathematical proof, they significantly expand the scope beyond what was stated in the premise. The natural language presents this as a general logical inference, while the Lean formalization embeds it in a specific mathematical context.\"]"}, "solved_negation": null, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "so $P \\le 1$.", "statement": "We assume:\n\u2022 $\\ln(P) \\le 0$ [l7].\nTherefore, we conclude:\n\u2022 $P \\le 1$ [l8].", "dependencies": ["tc_1", "def_1", "l1", "l2", "def_2", "l3", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (a b c x y z P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c)\n  (l3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c))\n  (l4 : a * Real.log (x / a) \u2264 b - c)\n  (l5 : b * Real.log (y / b) \u2264 c - a)\n  (l6 : c * Real.log (z / c) \u2264 a - b)\n  (l7 : Real.log P \u2264 0) :\n  P \u2264 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (a b c x y z P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c)\n  (l3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c))\n  (l4 : a * Real.log (x / a) \u2264 b - c)\n  (l5 : b * Real.log (y / b) \u2264 c - a)\n  (l6 : c * Real.log (z / c) \u2264 a - b)\n  (l7 : Real.log P \u2264 0) :\n  P \u2264 1 := by\n  have hP : 0 < P := by\n    rw [def_2]\n    apply mul_pos (mul_pos (rpow_pos_of_pos (div_pos (by linarith [l2.1]) (tc_1.1)) a)\n      (rpow_pos_of_pos (div_pos (by linarith [l2.2.1]) (tc_1.2.1)) b))\n      (rpow_pos_of_pos (div_pos (by linarith [l2.2.2]) (tc_1.2.2.1)) c)\n  rw [\u2190 Real.exp_le_exp, Real.exp_log hP, Real.exp_zero]\n  exact l7", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 23, "column": 25, "endLine": 23, "endColumn": 40, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  rexp (Real.log P)\na b c x y z P : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nl1 : a + b > c \u2227 b + c > a \u2227 c + a > b\nl2 : x > 0 \u2227 y > 0 \u2227 z > 0\ndef_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c\nl3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c)\nl4 : a * Real.log (x / a) \u2264 b - c\nl5 : b * Real.log (y / b) \u2264 c - a\nl6 : c * Real.log (z / c) \u2264 a - b\nl7 : Real.log P \u2264 0\nhP : 0 < P\n\u22a2 rexp P \u2264 rexp 1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the core logical relationship from the natural language. The assumption 'Real.log P \u2264 0' perfectly corresponds to 'ln(P) \u2264 0', and the conclusion 'P \u2264 1' matches exactly. While the Lean code includes extensive additional mathematical context not mentioned in the natural language snippet, these extra conditions are logically consistent and don't alter the fundamental reasoning step being formalized.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l8\n  (a b c x y z P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c)\n  (l3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c))\n  (l4 : a * Real.log (x / a) \u2264 b - c)\n  (l5 : b * Real.log (y / b) \u2264 c - a)\n  (l6 : c * Real.log (z / c) \u2264 a - b)\n  (l7 : Real.log P \u2264 0) :\n  \u2203 P, P > 1 := by\n  sorry"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Multiplying both sides by $a^a b^b c^c > 0$ yields $(a+b-c)^a (b+c-a)^b (c+a-b)^c \\le a^a b^b c^c$, which proves the desired inequality.", "statement": "We assume:\n\u2022 a, b, c are positive real numbers [tc_1];\n\u2022 Let x, y, z be real numbers such that x = a + b - c, y = b + c - a, and z = c + a - b [def_1];\n\u2022 Let P be a real number such that $P = (x/a)^a * (y/b)^b * (z/c)^c$ [def_2];\n\u2022 $P \\le 1$ [l8].\nTherefore, we conclude:\n\u2022 $(a+b-c)^a (b+c-a)^b (c+a-b)^c \\le a^a b^b c^c$ [ts_1].", "dependencies": ["tc_1", "def_1", "l1", "l2", "def_2", "l3", "l4", "l5", "l6", "l7", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c x y z P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c)\n  (l3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c))\n  (l4 : a * Real.log (x / a) \u2264 b - c)\n  (l5 : b * Real.log (y / b) \u2264 c - a)\n  (l6 : c * Real.log (z / c) \u2264 a - b)\n  (l7 : Real.log P \u2264 0)\n  (l8 : P \u2264 1) :\n  (a + b - c) ^ a * (b + c - a) ^ b * (c + a - b) ^ c \u2264 a ^ a * b ^ b * c ^ c := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c x y z P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c)\n  (l3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c))\n  (l4 : a * Real.log (x / a) \u2264 b - c)\n  (l5 : b * Real.log (y / b) \u2264 c - a)\n  (l6 : c * Real.log (z / c) \u2264 a - b)\n  (l7 : Real.log P \u2264 0)\n  (l8 : P \u2264 1) :\n  (a + b - c) ^ a * (b + c - a) ^ b * (c + a - b) ^ c \u2264 a ^ a * b ^ b * c ^ c := by\n  rw [\u2190 def_1.1, \u2190 def_1.2.1, \u2190 def_1.2.2]\n  rw [def_2] at l8\n  simp only [div_eq_mul_inv] at l8\n  have h1 : (x * a\u207b\u00b9) ^ a = x ^ a * a\u207b\u00b9 ^ a := by\n    apply mul_rpow\n    \u00b7 linarith [l2.1]\n    \u00b7 exact inv_nonneg.mpr (le_of_lt (by linarith [tc_1.1]))\n  have h2 : (y * b\u207b\u00b9) ^ b = y ^ b * b\u207b\u00b9 ^ b := by\n    apply mul_rpow\n    \u00b7 linarith [l2.2.1]\n    \u00b7 exact inv_nonneg.mpr (le_of_lt (by linarith [tc_1.2.1]))\n  have h3 : (z * c\u207b\u00b9) ^ c = z ^ c * c\u207b\u00b9 ^ c := by\n    apply mul_rpow\n    \u00b7 linarith [l2.2.2]\n    \u00b7 exact inv_nonneg.mpr (le_of_lt (by linarith [tc_1.2.2]))\n  rw [h1, h2, h3] at l8\n  simp only [mul_assoc] at l8\n  have h4 : a\u207b\u00b9 ^ a = (a ^ a)\u207b\u00b9 := by rw [\u2190 rpow_neg_one, \u2190 rpow_mul (by linarith [tc_1.1])]\n  have h5 : b\u207b\u00b9 ^ b = (b ^ b)\u207b\u00b9 := by rw [\u2190 rpow_neg_one, \u2190 rpow_mul (by linarith [tc_1.2.1])]\n  have h6 : c\u207b\u00b9 ^ c = (c ^ c)\u207b\u00b9 := by rw [\u2190 rpow_neg_one, \u2190 rpow_mul (by linarith [tc_1.2.2])]\n  rw [h4, h5, h6] at l8\n  simp only [mul_inv_rev, inv_inv] at l8\n  rw [mul_comm (x ^ a), mul_comm (y ^ b), mul_comm (z ^ c)] at l8\n  rw [\u2190 mul_assoc, \u2190 mul_assoc, \u2190 mul_assoc] at l8\n  rw [\u2190 mul_inv, \u2190 mul_inv, \u2190 mul_inv] at l8\n  simp only [mul_one] at l8\n  exact l8", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 36, "column": 35, "endLine": 36, "endColumn": 92, "data": "unsolved goals\na b c x y z P : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nl1 : a + b > c \u2227 b + c > a \u2227 c + a > b\nl2 : x > 0 \u2227 y > 0 \u2227 z > 0\ndef_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c\nl3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c)\nl4 : a * Real.log (x / a) \u2264 b - c\nl5 : b * Real.log (y / b) \u2264 c - a\nl6 : c * Real.log (z / c) \u2264 a - b\nl7 : Real.log P \u2264 0\nh1 : (x * a\u207b\u00b9) ^ a = x ^ a * a\u207b\u00b9 ^ a\nh2 : (y * b\u207b\u00b9) ^ b = y ^ b * b\u207b\u00b9 ^ b\nh3 : (z * c\u207b\u00b9) ^ c = z ^ c * c\u207b\u00b9 ^ c\nl8 : x ^ a * (a\u207b\u00b9 ^ a * (y ^ b * (b\u207b\u00b9 ^ b * (z ^ c * c\u207b\u00b9 ^ c)))) \u2264 1\n\u22a2 a ^ (-1 * a) = (a ^ a)\u207b\u00b9"}, {"line": 37, "column": 35, "endLine": 37, "endColumn": 94, "data": "unsolved goals\na b c x y z P : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nl1 : a + b > c \u2227 b + c > a \u2227 c + a > b\nl2 : x > 0 \u2227 y > 0 \u2227 z > 0\ndef_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c\nl3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c)\nl4 : a * Real.log (x / a) \u2264 b - c\nl5 : b * Real.log (y / b) \u2264 c - a\nl6 : c * Real.log (z / c) \u2264 a - b\nl7 : Real.log P \u2264 0\nh1 : (x * a\u207b\u00b9) ^ a = x ^ a * a\u207b\u00b9 ^ a\nh2 : (y * b\u207b\u00b9) ^ b = y ^ b * b\u207b\u00b9 ^ b\nh3 : (z * c\u207b\u00b9) ^ c = z ^ c * c\u207b\u00b9 ^ c\nl8 : x ^ a * (a\u207b\u00b9 ^ a * (y ^ b * (b\u207b\u00b9 ^ b * (z ^ c * c\u207b\u00b9 ^ c)))) \u2264 1\nh4 : a\u207b\u00b9 ^ a = (a ^ a)\u207b\u00b9\n\u22a2 b ^ (-1 * b) = (b ^ b)\u207b\u00b9"}, {"line": 38, "column": 35, "endLine": 38, "endColumn": 94, "data": "unsolved goals\na b c x y z P : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b\ndef_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b\nl1 : a + b > c \u2227 b + c > a \u2227 c + a > b\nl2 : x > 0 \u2227 y > 0 \u2227 z > 0\ndef_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c\nl3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c)\nl4 : a * Real.log (x / a) \u2264 b - c\nl5 : b * Real.log (y / b) \u2264 c - a\nl6 : c * Real.log (z / c) \u2264 a - b\nl7 : Real.log P \u2264 0\nh1 : (x * a\u207b\u00b9) ^ a = x ^ a * a\u207b\u00b9 ^ a\nh2 : (y * b\u207b\u00b9) ^ b = y ^ b * b\u207b\u00b9 ^ b\nh3 : (z * c\u207b\u00b9) ^ c = z ^ c * c\u207b\u00b9 ^ c\nl8 : x ^ a * (a\u207b\u00b9 ^ a * (y ^ b * (b\u207b\u00b9 ^ b * (z ^ c * c\u207b\u00b9 ^ c)))) \u2264 1\nh4 : a\u207b\u00b9 ^ a = (a ^ a)\u207b\u00b9\nh5 : b\u207b\u00b9 ^ b = (b ^ b)\u207b\u00b9\n\u22a2 c ^ (-1 * c) = (c ^ c)\u207b\u00b9"}, {"line": 40, "column": 2, "endLine": 40, "endColumn": 40, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The variable declarations correctly capture the positivity of a, b, c. The additional triangle inequality constraints are mathematically consistent and help ensure well-definedness.", "The definitions of x, y, z are exactly as stated in the natural language.", "The definition of P matches perfectly with the natural language expression.", "The constraint P \u2264 1 is correctly formalized.", "The conclusion statement correctly translates the natural language inequality, with proper substitution of the defined variables.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_1\n  (a b c x y z P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (def_1 : x = a + b - c \u2227 y = b + c - a \u2227 z = c + a - b)\n  (l1 : a + b > c \u2227 b + c > a \u2227 c + a > b)\n  (l2 : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (def_2 : P = (x / a) ^ a * (y / b) ^ b * (z / c) ^ c)\n  (l3 : Real.log P = a * Real.log (x / a) + b * Real.log (y / b) + c * Real.log (z / c))\n  (l4 : a * Real.log (x / a) \u2264 b - c)\n  (l5 : b * Real.log (y / b) \u2264 c - a)\n  (l6 : c * Real.log (z / c) \u2264 a - b)\n  (l7 : Real.log P \u2264 0)\n  (l8 : P \u2264 1) :\n  \u00ac((a + b - c) ^ a * (b + c - a) ^ b * (c + a - b) ^ c \u2264 a ^ a * b ^ b * c ^ c) := by\n  rw [\u2190def_1.1, \u2190def_1.2.1, \u2190def_1.2.2]\n  rw [def_2]\n  simp only [div_eq_mul_inv, mul_pow]\n  intro h\n  have : P \u2264 1 := l8\n  have : P = 1 := by\n    have h1 : (x / a) ^ a * (y / b) ^ b * (z / c) ^ c \u2264 1 := by rwa [\u2190def_2] at h\n    have h2 : (x / a) ^ a * (y / b) ^ b * (z / c) ^ c \u2265 1 := by\n      rw [\u2190def_2]\n      exact le_of_eq rfl\n    exact le_antisymm h1 h2\n  rw [this] at l3\n  simp at l3\n  have := add_le_add (add_le_add l4 l5) l6\n  linarith"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    