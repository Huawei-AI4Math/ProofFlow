
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $X_1, \dots, X_n$ be a sequence of independent and identically distributed (i.i.d.) random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$. Let the sample mean be defined as $\bar{X}_n = \frac{1}{n} \sum_{i=1}^n X_i$. Determine the expected value of the sample mean, $E[\bar{X}_n]$, the variance of the sample mean, $Var(\bar{X}_n)$, and the limit of the variance as $n 	o \infty$.

Proof: First, we recall the fundamental properties of the Bernoulli distribution. From the properties of a Bernoulli distribution, the expected value of any single variable $X_i$ is $E[X_i] = p$. Similarly, the variance of any single variable $X_i$ is $Var(X_i) = p(1-p)$.

To find the expectation of the sample mean, we first apply a property of expectation. By the linearity of expectation, the expectation of the sample mean is $E[\bar{X}_n] = E\left[\frac{1}{n} \sum_{i=1}^n X_i\right] = \frac{1}{n} \sum_{i=1}^n E[X_i]$. Substituting the result for $E[X_i]$ into our expression for $E[\bar{X}_n]$ gives the first solution, $E[\bar{X}_n] = \frac{1}{n} \sum_{i=1}^n p = \frac{1}{n}(np) = p$.

Next, we calculate the variance. Since the $X_i$ are independent, the variance of the sum is the sum of the variances: $Var\left(\sum_{i=1}^n X_i\right) = \sum_{i=1}^n Var(X_i)$. Also, using the property of variance for a scaled random variable, we have $Var(\bar{X}_n) = Var\left(\frac{1}{n} \sum_{i=1}^n X_i\right) = \frac{1}{n^2} Var\left(\sum_{i=1}^n X_i\right)$. Combining these properties with the known variance of a Bernoulli variable gives the second solution, $Var(\bar{X}_n) = \frac{1}{n^2} \sum_{i=1}^n p(1-p) = \frac{1}{n^2} (np(1-p)) = \frac{p(1-p)}{n}$.

Finally, for the third solution, we take the limit of the variance as $n$ approaches infinity: $\lim_{n 	o \infty} Var(\bar{X}_n) = \lim_{n 	o \infty} \frac{p(1-p)}{n} = 0$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $X_1, \\dots, X_n$ be a sequence of independent and identically distributed (i.i.d.) random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$.", "statement": "Premise:\n\u2022 $X_1, \\dots, X_n$ is a sequence of independent and identically distributed (i.i.d.) random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter MeasureTheory ProbabilityTheory\n\nvariable\n  {\u03a9 : Type*} [MeasurableSpace \u03a9] (P : MeasureTheory.Measure \u03a9)\n  {X : \u2115 \u2192 \u03a9 \u2192 \u211d} (n : \u2115) (p : \u211d)\n  (hp_pos : 0 < p) (hp_lt_1 : p < 1)\n  (tc_1 : \u2200 i, i \u2208 Finset.range n \u2192 IsBernoulli (X i) p P \u2227 iIndep (fun i => X i) (fun _ => P) (Finset.range n))", "lean_pass": false, "error_msg": [{"line": 9, "column": 60, "endLine": 9, "endColumn": 111, "data": "function expected at\n  iIndep (fun i => ?m.816) ?m.1308\nterm has type\n  Prop"}, {"line": 9, "column": 36, "endLine": 9, "endColumn": 57, "data": "function expected at\n  IsBernoulli\nterm has type\n  ?m.216"}, {"line": 9, "column": 82, "endLine": 9, "endColumn": 94, "data": "application type mismatch\n  iIndep (fun i => ?m.816) fun x => P\nargument\n  fun x => P\nhas type\n  ?m.822 \u2192 Measure \u03a9 : Sort (max (u_1 + 1) ?u.821)\nbut is expected to have type\n  autoParam (Measure ?m.417) _auto\u271d : Type ?u.416"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let the sample mean be defined as $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1].\nDefinition:\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {\u03a9 : Type*} [MeasurableSpace \u03a9] {P : Measure \u03a9} [IsProbabilityMeasure P]\n  (X : \u2115 \u2192 \u03a9 \u2192 \u211d) (n : \u2115) (p : \u211d)\n  (tc_1 : (\u2200 i, Measurable (X i)) \u2227 (\u2200 i j, i \u2260 j \u2192 IndepFun (X i) (X j)) \u2227 (\u2200 i, IsBernoulli (X i) p) \u2227 (0 < p \u2227 p < 1))\n  (def_1 : (Finset.sum (Finset.range n) (fun i => X (i + 1))) / n = (Finset.sum (Finset.range n) (fun i => X (i + 1))) / n)", "lean_pass": false, "error_msg": [{"line": 6, "column": 51, "endLine": 6, "endColumn": 73, "data": "invalid binder annotation, type is not a class instance\n  ?m.34\nuse the command `set_option checkBinderAnnotations false` to disable the check"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "From the properties of a Bernoulli distribution, the expected value of any single variable $X_i$ is $E[X_i] = p$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1];\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1].\nTherefore, we conclude:\n\u2022 For any $X_i$ from the sequence, its expected value is $E[X_i] = p$ [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115} {X : Fin n \u2192 \u211d} {p : \u211d}\n  (tc_1 : (0 < p \u2227 p < 1) \u2227 (\u2200 i, X i = 0 \u2228 X i = 1)) :\n  \u2200 i, (PMF.bernoulli (ENNReal.ofReal p) (ENNReal.ofReal_le_one_iff.mpr tc_1.1.2.le)).expectedValue = (p : \u211d) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 8, "column": 42, "endLine": 8, "endColumn": 83, "data": "unknown constant 'ENNReal.ofReal_le_one_iff.mpr'"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter ProbabilityTheory\n\nlemma l1\n  {n : \u2115} {X : Fin n \u2192 \u211d} {p : \u211d}\n  (tc_1 : (0 < p \u2227 p < 1) \u2227 (\u2200 i, X i = 0 \u2228 X i = 1)) :\n  \u2200 i, (ProbabilityTheory.bernoulli' p tc_1.1.1 tc_1.1.2).mean = p := by\n  intro i\n  simp [ProbabilityTheory.bernoulli', ProbabilityTheory.mean]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 8, "column": 8, "endLine": 8, "endColumn": 36, "data": "unknown identifier 'ProbabilityTheory.bernoulli''"}, {"line": 10, "column": 8, "endLine": 10, "endColumn": 36, "data": "unknown identifier 'ProbabilityTheory.bernoulli''"}, {"line": 10, "column": 38, "endLine": 10, "endColumn": 60, "data": "unknown identifier 'ProbabilityTheory.mean'"}, {"line": 10, "column": 2, "endLine": 10, "endColumn": 61, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Similarly, the variance of any single variable $X_i$ is $Var(X_i) = p(1-p)$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1];\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 For any $X_i$ from the sequence, its expected value is $E[X_i] = p$ [l1].\nTherefore, we conclude:\n\u2022 For any $X_i$ from the sequence, its variance is $Var(X_i) = p(1-p)$ [l2].", "dependencies": ["tc_1", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115} {X : Fin n \u2192 (Type u_1 \u2192 Type v_1)} (p : \u211d)\n  (tc_1 : (0 < p \u2227 p < 1) \u2227 (\u2200 i j, i \u2260 j \u2192 X i independent\u1d62 X j))\n  (def_1 : \u2200 (n : \u2115) (X_seq : Fin n \u2192 \u211d), (\u2211 i : Fin n, X_seq i) / n = (\u2211 i : Fin n, X_seq i) / n)\n  (l1 : \u2200 i : Fin n, (l1 : X i) = p) :\n  \u2200 i : Fin n, (l1 : X i) = p * (1 - p) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 7, "column": 44, "endLine": 7, "endColumn": 64, "data": "function expected at\n  X i independent\u1d62\nterm has type\n  Type v_1"}, {"line": 9, "column": 27, "endLine": 9, "endColumn": 30, "data": "type expected, got\n  (X i : Type u_1 \u2192 Type v_1)"}, {"line": 10, "column": 21, "endLine": 10, "endColumn": 24, "data": "type expected, got\n  (X i : Type u_1 \u2192 Type v_1)"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nimport ProbabilityTheory.Moments\n\nset_option maxHeartbeats 0\n\nopen ProbabilityTheory\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {\u03a9 : Type u_1} [MeasurableSpace \u03a9] {n : \u2115} {X : Fin n \u2192 \u03a9 \u2192 \u211d} (p : \u211d)\n  [MeasureSpace \u03a9] [IsProbabilityMeasure (\u2119 : Measure \u03a9)]\n  (tc_1 : (0 < p \u2227 p < 1) \u2227 (\u2200 i j, i \u2260 j \u2192 IndepFun (X i) (X j)))\n  (h_ident : \u2200 i, IdentDistrib (X i) (X 0))\n  (h_bernoulli : \u2200 i, Measurable (X i) \u2227 \u2200 \u03c9, X i \u03c9 \u2208 {0, 1} \u2227 \ud835\udd3c[X i] = p) :\n  \u2200 i, Var[X i] = p * (1 - p) := by\n  intro i\n  have : \ud835\udd3c[X i^2] = p := by\n    simp [h_bernoulli i]\n    have : X i^2 = X i := by\n      ext \u03c9\n      simp [sq, h_bernoulli i.1 \u03c9]\n    rw [this]\n    exact (h_bernoulli i).2.2\n  rw [variance_eq' (h_bernoulli i).1, (h_bernoulli i).2.2, this]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 3, "column": 5, "endLine": 3, "endColumn": 22, "data": "unknown namespace 'ProbabilityTheory'"}, {"line": 5, "column": 5, "endLine": 5, "endColumn": 17, "data": "unknown namespace 'BigOperators'"}, {"line": 7, "column": 0, "endLine": 7, "endColumn": 5, "data": "unexpected identifier; expected command"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "By the linearity of expectation, the expectation of the sample mean is $E[\\bar{X}_n] = E\\left[\\frac{1}{n} \\sum_{i=1}^n X_i\\right] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1];\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 For any $X_i$ from the sequence, its expected value is $E[X_i] = p$ [l1];\n\u2022 For any $X_i$ from the sequence, its variance is $Var(X_i) = p(1-p)$ [l2].\nTherefore, we conclude:\n\u2022 $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$ [l3].", "dependencies": ["tc_1", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {n : \u2115} (X : Fin n \u2192 \u211d) (p : \u211d)\n  (tc_1 : 0 < p \u2227 p < 1)\n  (def_1 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n) -- This is a tautology, adjust if a specific notation for X_bar_n is needed.\n  (l1 : \u2200 i : Fin n, X i = p) :\n  (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {n : \u2115} (X : Fin n \u2192 \u211d) (p : \u211d)\n  (tc_1 : 0 < p \u2227 p < 1)\n  (l1 : \u2200 i : Fin n, X i = p) :\n  (\u2211 i : Fin n, X i) / n = p := by\n  simp [l1]\n  rw [\u2190 Finset.sum_const p]\n  simp [Finset.card_fin]\n  field_simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 6, "endLine": 11, "endColumn": 26, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  Finset.card ?m.7194 \u2022 p\nn : \u2115\nX : Fin n \u2192 \u211d\np : \u211d\ntc_1 : 0 < p \u2227 p < 1\nl1 : \u2200 (i : Fin n), X i = p\n\u22a2 \u2191n * p / \u2191n = p"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization fundamentally misrepresents the natural language statement. The natural language describes a probabilistic result about expected values of random variables (E[X\u0304\u2099] = (1/n)\u2211E[X\u1d62]), but the Lean code treats X as deterministic functions rather than random variables, contains no expectation operators or probability measures, assumes each X\u1d62 equals the constant p (contradicting their random nature), and concludes with a meaningless tautology. The core mathematical content about linearity of expectation is completely lost.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization fundamentally misrepresents the natural language statement. The natural language describes a probabilistic result about expected values of random variables (E[X\u0304\u2099] = (1/n)\u2211E[X\u1d62]), but the Lean code treats X as deterministic functions rather than random variables, contains no expectation operators or probability measures, assumes each X\u1d62 equals the constant p (contradicting their random nature), and concludes with a meaningless tautology. The core mathematical content about linearity of expectation is completely lost.']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Substituting the result for $E[X_i]$ into our expression for $E[\\bar{X}_n]$ gives the first solution, $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n p = \\frac{1}{n}(np) = p$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1];\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 For any $X_i$ from the sequence, its expected value is $E[X_i] = p$ [l1];\n\u2022 For any $X_i$ from the sequence, its variance is $Var(X_i) = p(1-p)$ [l2];\n\u2022 $E[\\bar{X}_n] = \\frac{1}{n} \\sum_{i=1}^n E[X_i]$ [l3].\nTherefore, we conclude:\n\u2022 The expected value of the sample mean is $E[\\bar{X}_n] = p$ [ts_1].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115} (X : Fin n \u2192 \u211d) (p : \u211d)\n  (tc_1 : 0 < p \u2227 p < 1)\n  (def_1 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (l1 : \u2200 i : Fin n, X i = p)\n  (l2 : \u2200 i : Fin n, X i = p * (1 - p))\n  (l3 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n) :\n  (\u2211 i : Fin n, X i) / n = p := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115} (X : Fin n \u2192 \u211d) (p : \u211d)\n  (tc_1 : 0 < p \u2227 p < 1)\n  (def_1 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (l1 : \u2200 i : Fin n, X i = p)\n  (l2 : \u2200 i : Fin n, X i = p * (1 - p))\n  (l3 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n) :\n  (\u2211 i : Fin n, X i) / n = p := by\n  simp [l1]\n  have : (\u2211 i : Fin n, p) = n * p := by\n    rw [Finset.sum_const, Finset.card_fin, nsmul_eq_mul]\n  rw [this]\n  field_simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 6, "endLine": 16, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u2211 i : Fin n, p\nn : \u2115\nX : Fin n \u2192 \u211d\np : \u211d\ntc_1 : 0 < p \u2227 p < 1\ndef_1 : (\u2211 i : Fin n, X i) / \u2191n = (\u2211 i : Fin n, X i) / \u2191n\nl1 : \u2200 (i : Fin n), X i = p\nl2 : \u2200 (i : Fin n), X i = p * (1 - p)\nl3 : (\u2211 i : Fin n, X i) / \u2191n = (\u2211 i : Fin n, X i) / \u2191n\nthis : \u2211 i : Fin n, p = \u2191n * p\n\u22a2 \u2191n * p / \u2191n = p"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The formalization treats random variables as deterministic functions rather than probabilistic objects, completely missing the stochastic nature of the problem", "Critical probabilistic concepts (probability spaces, expectation operator, Bernoulli distribution) are entirely absent from the formalization", "Conditions l1 and l2 create a logical contradiction by asserting X i = p and X i = p(1-p) simultaneously, which is impossible for valid Bernoulli parameters", "The linearity of expectation property (l3) is reduced to a meaningless tautology instead of expressing the actual mathematical relationship E[\u2211X\u1d62] = \u2211E[X\u1d62]", "The conclusion fails to capture that this is about expected values - it proves a deterministic equality rather than E[X\u0304\u2099] = p", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The formalization treats random variables as deterministic functions rather than probabilistic objects, completely missing the stochastic nature of the problem', 'Critical probabilistic concepts (probability spaces, expectation operator, Bernoulli distribution) are entirely absent from the formalization', 'Conditions l1 and l2 create a logical contradiction by asserting X i = p and X i = p(1-p) simultaneously, which is impossible for valid Bernoulli parameters', 'The linearity of expectation property (l3) is reduced to a meaningless tautology instead of expressing the actual mathematical relationship E[\u2211X\u1d62] = \u2211E[X\u1d62]', 'The conclusion fails to capture that this is about expected values - it proves a deterministic equality rather than E[X\u0304\u2099] = p']"}, "solved_negation": null, "type": "solution"}, "l4": {"id": "l4", "natural_language": "Since the $X_i$ are independent, the variance of the sum is the sum of the variances: $Var\\left(\\sum_{i=1}^n X_i\\right) = \\sum_{i=1}^n Var(X_i)$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1];\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 For any $X_i$ from the sequence, its expected value is $E[X_i] = p$ [l1];\n\u2022 For any $X_i$ from the sequence, its variance is $Var(X_i) = p(1-p)$ [l2];\n\u2022 The expected value of the sample mean is $E[\\bar{X}_n] = p$ [ts_1].\nTherefore, we conclude:\n\u2022 $Var\\left(\\sum_{i=1}^n X_i\\right) = \\sum_{i=1}^n Var(X_i)$ [l4].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {n : \u2115} {X : Fin n \u2192 \u211d} {p : \u211d}\n  (tc_1 : 0 < p \u2227 p < 1)\n  (def_1 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (l1 : \u2200 i : Fin n, X i = p)\n  (l2 : \u2200 i : Fin n, X i = p * (1 - p))\n  (l3 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (ts_1 : (\u2211 i : Fin n, X i) / n = p) :\n  (\u2211 i : Fin n, X i) = (\u2211 i : Fin n, X i) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nimport Mathlib.Probability.Variance\nimport Mathlib.Probability.Independence\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter ProbabilityTheory\n\nlemma l4\n  {n : \u2115} {\u03a9 : Type*} [MeasureSpace \u03a9] {X : Fin n \u2192 \u03a9 \u2192 \u211d}\n  (h_int : \u2200 i, Integrable (X i)) \n  (h_indep : IndepFun (Fin n) X) \n  (h_ident : \u2200 i, Variance (X i) = Variance (X 0)) :\n  Variance (\u2211 i : Fin n, X i) = \u2211 i : Fin n, Variance (X i) := by\n  rw [variance_sum]\n  simp [h_indep, h_ident]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 6, "column": 23, "endLine": 6, "endColumn": 37, "data": "invalid binder annotation, type is not a class instance\n  ?m.16\nuse the command `set_option checkBinderAnnotations false` to disable the check"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization fundamentally misrepresents the mathematical content. The natural language describes a property of variance for independent random variables (Var(\u2211Xi) = \u2211Var(Xi)), but the Lean code: (1) treats random variables as deterministic functions rather than probability distributions, (2) contains contradictory conditions where l1 and l2 both claim to define the same variables X i but with different values, (3) completely lacks any representation of variance operations, and (4) concludes with a meaningless tautology instead of the intended variance equality. The formalization fails to capture the core probabilistic and statistical concepts from the natural language.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization fundamentally misrepresents the mathematical content. The natural language describes a property of variance for independent random variables (Var(\u2211Xi) = \u2211Var(Xi)), but the Lean code: (1) treats random variables as deterministic functions rather than probability distributions, (2) contains contradictory conditions where l1 and l2 both claim to define the same variables X i but with different values, (3) completely lacks any representation of variance operations, and (4) concludes with a meaningless tautology instead of the intended variance equality. The formalization fails to capture the core probabilistic and statistical concepts from the natural language.']"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Also, using the property of variance for a scaled random variable, we have $Var(\\bar{X}_n) = Var\\left(\\frac{1}{n} \\sum_{i=1}^n X_i\\right) = \\frac{1}{n^2} Var\\left(\\sum_{i=1}^n X_i\\right)$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1];\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 For any $X_i$ from the sequence, its expected value is $E[X_i] = p$ [l1];\n\u2022 For any $X_i$ from the sequence, its variance is $Var(X_i) = p(1-p)$ [l2];\n\u2022 The expected value of the sample mean is $E[\\bar{X}_n] = p$ [ts_1];\n\u2022 $Var\\left(\\sum_{i=1}^n X_i\\right) = \\sum_{i=1}^n Var(X_i)$ [l4].\nTherefore, we conclude:\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} Var\\left(\\sum_{i=1}^n X_i\\right)$ [l5].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "ts_1", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  {n : \u2115} {X : Fin n \u2192 \u211d} (p : \u211d)\n  (tc_1 : 0 < p \u2227 p < 1)\n  (def_1 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (l1 : \u2200 i : Fin n, X i = p)\n  (l2 : \u2200 i : Fin n, X i = p * (1 - p))\n  (l3 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (ts_1 : (\u2211 i : Fin n, X i) / n = p)\n  (l4 : (\u2211 i : Fin n, X i) = (\u2211 i : Fin n, X i)) :\n  (\u2211 i : Fin n, X i) / n = (1 / (n * n)) * (\u2211 i : Fin n, X i) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  {n : \u2115} {X : Fin n \u2192 \u211d} (p : \u211d)\n  (tc_1 : 0 < p \u2227 p < 1)\n  (def_1 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (l1 : \u2200 i : Fin n, X i = p)\n  (l2 : \u2200 i : Fin n, X i = p * (1 - p))\n  (l3 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (ts_1 : (\u2211 i : Fin n, X i) / n = p)\n  (l4 : (\u2211 i : Fin n, X i) = (\u2211 i : Fin n, X i)) :\n  (\u2211 i : Fin n, X i) / n = (1 / (n * n)) * (\u2211 i : Fin n, X i) := by\n  simp [l1]\n  rw [\u2190 ts_1]\n  simp [mul_div_assoc, mul_div_cancel_left]\n  field_simp\n  rw [mul_assoc, \u2190 mul_pow, inv_mul_cancel]\n  \u00b7 simp\n  \u00b7 exact Nat.cast_ne_zero.mpr (NeZero.ne n)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 19, "column": 17, "endLine": 19, "endColumn": 26, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a ^ ?n * ?b ^ ?n\nn : \u2115\nX : Fin n \u2192 \u211d\np : \u211d\ntc_1 : 0 < p \u2227 p < 1\ndef_1 : (\u2211 i : Fin n, X i) / \u2191n = (\u2211 i : Fin n, X i) / \u2191n\nl1 : \u2200 (i : Fin n), X i = p\nl2 : \u2200 (i : Fin n), X i = p * (1 - p)\nl3 : (\u2211 i : Fin n, X i) / \u2191n = (\u2211 i : Fin n, X i) / \u2191n\nts_1 : (\u2211 i : Fin n, X i) / \u2191n = p\nl4 : \u2211 i : Fin n, X i = \u2211 i : Fin n, X i\n\u22a2 (\u2191n * \u2211 i : Fin n, X i) / (\u2191n * \u2191n) = (\u2191n * \u2211 i : Fin n, X i) / (\u2191n * (\u2191n * \u2191n))"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The probabilistic structure is completely missing. Random variables are treated as deterministic real-valued functions rather than probability distributions.", "Definition def_1 is a meaningless tautology instead of defining the sample mean as stated in natural language.", "Expected values are replaced with deterministic equalities, fundamentally changing the mathematical meaning.", "Variance is treated as a deterministic value assignment, and creates logical inconsistency with l1 (X_i cannot equal both p and p(1-p)).", "Expected value operator is missing, treating the sample mean as a deterministic quantity.", "Variance operators are completely absent, replaced with a tautological equality.", "The conclusion lacks variance operators and treats the relationship as purely algebraic rather than probabilistic.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The probabilistic structure is completely missing. Random variables are treated as deterministic real-valued functions rather than probability distributions.', 'Definition def_1 is a meaningless tautology instead of defining the sample mean as stated in natural language.', 'Expected values are replaced with deterministic equalities, fundamentally changing the mathematical meaning.', 'Variance is treated as a deterministic value assignment, and creates logical inconsistency with l1 (X_i cannot equal both p and p(1-p)).', 'Expected value operator is missing, treating the sample mean as a deterministic quantity.', 'Variance operators are completely absent, replaced with a tautological equality.', 'The conclusion lacks variance operators and treats the relationship as purely algebraic rather than probabilistic.']"}, "solved_negation": null, "type": "lemma"}, "ts_2": {"id": "ts_2", "natural_language": "Combining these properties with the known variance of a Bernoulli variable gives the second solution, $Var(\\bar{X}_n) = \\frac{1}{n^2} \\sum_{i=1}^n p(1-p) = \\frac{1}{n^2} (np(1-p)) = \\frac{p(1-p)}{n}$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1];\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 For any $X_i$ from the sequence, its expected value is $E[X_i] = p$ [l1];\n\u2022 For any $X_i$ from the sequence, its variance is $Var(X_i) = p(1-p)$ [l2];\n\u2022 The expected value of the sample mean is $E[\\bar{X}_n] = p$ [ts_1];\n\u2022 $Var\\left(\\sum_{i=1}^n X_i\\right) = \\sum_{i=1}^n Var(X_i)$ [l4];\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} Var\\left(\\sum_{i=1}^n X_i\\right)$ [l5].\nTherefore, we conclude:\n\u2022 The variance of the sample mean is $Var(\\bar{X}_n) = \\frac{p(1-p)}{n}$ [ts_2].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "ts_1", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  {n : \u2115} (X : Fin n \u2192 \u211d) (p : \u211d)\n  (tc_1 : 0 < p \u2227 p < 1)\n  (def_1 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (l1 : \u2200 i : Fin n, X i = p)\n  (l2 : \u2200 i : Fin n, X i = p * (1 - p))\n  (l3 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (ts_1 : (\u2211 i : Fin n, X i) / n = p)\n  (l4 : (\u2211 i : Fin n, X i) = (\u2211 i : Fin n, X i))\n  (l5 : (\u2211 i : Fin n, X i) / n = (1 / (n * n)) * (\u2211 i : Fin n, X i)) :\n  (\u2211 i : Fin n, X i) / n = (p * (1 - p)) / n := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  {n : \u2115} (X : Fin n \u2192 \u211d) (p : \u211d)\n  (tc_1 : 0 < p \u2227 p < 1)\n  (def_1 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (l1 : \u2200 i : Fin n, X i = p)\n  (l2 : \u2200 i : Fin n, X i = p * (1 - p))\n  (l3 : (\u2211 i : Fin n, X i) / n = (\u2211 i : Fin n, X i) / n)\n  (ts_1 : (\u2211 i : Fin n, X i) / n = p)\n  (l4 : (\u2211 i : Fin n, X i) = (\u2211 i : Fin n, X i))\n  (l5 : (\u2211 i : Fin n, X i) / n = (1 / (n * n)) * (\u2211 i : Fin n, X i)) :\n  (\u2211 i : Fin n, X i) / n = (p * (1 - p)) / n := by\n  rw [l5]\n  simp [l1]\n  field_simp [tc_1.left, tc_1.right]\n  rw [mul_div_assoc, mul_div_assoc]\n  congr 1\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 48, "endLine": 21, "endColumn": 6, "data": "unsolved goals\ncase e_a\nn : \u2115\nX : Fin n \u2192 \u211d\np : \u211d\ntc_1 : 0 < p \u2227 p < 1\ndef_1 : (\u2211 i : Fin n, X i) / \u2191n = (\u2211 i : Fin n, X i) / \u2191n\nl1 : \u2200 (i : Fin n), X i = p\nl2 : \u2200 (i : Fin n), X i = p * (1 - p)\nl3 : (\u2211 i : Fin n, X i) / \u2191n = (\u2211 i : Fin n, X i) / \u2191n\nts_1 : (\u2211 i : Fin n, X i) / \u2191n = p\nl4 : \u2211 i : Fin n, X i = \u2211 i : Fin n, X i\nl5 : (\u2211 i : Fin n, X i) / \u2191n = 1 / (\u2191n * \u2191n) * \u2211 i : Fin n, X i\n\u22a2 \u2191n = p\n\ncase e_a\nn : \u2115\nX : Fin n \u2192 \u211d\np : \u211d\ntc_1 : 0 < p \u2227 p < 1\ndef_1 : (\u2211 i : Fin n, X i) / \u2191n = (\u2211 i : Fin n, X i) / \u2191n\nl1 : \u2200 (i : Fin n), X i = p\nl2 : \u2200 (i : Fin n), X i = p * (1 - p)\nl3 : (\u2211 i : Fin n, X i) / \u2191n = (\u2211 i : Fin n, X i) / \u2191n\nts_1 : (\u2211 i : Fin n, X i) / \u2191n = p\nl4 : \u2211 i : Fin n, X i = \u2211 i : Fin n, X i\nl5 : (\u2211 i : Fin n, X i) / \u2191n = 1 / (\u2191n * \u2191n) * \u2211 i : Fin n, X i\n\u22a2 p / (\u2191n * \u2191n) = (1 - p) / \u2191n"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization has major inconsistencies with the natural language. It treats random variables as deterministic functions rather than probabilistic objects, confuses expected values and variances with the random variables themselves, lacks any probability theory framework (no expectation or variance operators), and the conclusion statement is about the sample mean equaling p(1-p)/n rather than about the variance of the sample mean. The core mathematical meaning about variance calculation for Bernoulli random variables is completely lost in translation.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization has major inconsistencies with the natural language. It treats random variables as deterministic functions rather than probabilistic objects, confuses expected values and variances with the random variables themselves, lacks any probability theory framework (no expectation or variance operators), and the conclusion statement is about the sample mean equaling p(1-p)/n rather than about the variance of the sample mean. The core mathematical meaning about variance calculation for Bernoulli random variables is completely lost in translation.']"}, "solved_negation": null, "type": "solution"}, "ts_3": {"id": "ts_3", "natural_language": "Finally, for the third solution, we take the limit of the variance as $n$ approaches infinity: $\\lim_{n \\to \\infty} Var(\\bar{X}_n) = \\lim_{n \\to \\infty} \\frac{p(1-p)}{n} = 0$.", "statement": "We assume:\n\u2022 $X_1, \\dots, X_n$ is a sequence of i.i.d. random variables from a Bernoulli distribution with parameter $p$, where $0 < p < 1$ [tc_1];\n\u2022 The sample mean is $\\bar{X}_n = \\frac{1}{n} \\sum_{i=1}^n X_i$ [def_1];\n\u2022 For any $X_i$ from the sequence, its expected value is $E[X_i] = p$ [l1];\n\u2022 For any $X_i$ from the sequence, its variance is $Var(X_i) = p(1-p)$ [l2];\n\u2022 The expected value of the sample mean is $E[\\bar{X}_n] = p$ [ts_1];\n\u2022 $Var\\left(\\sum_{i=1}^n X_i\\right) = \\sum_{i=1}^n Var(X_i)$ [l4];\n\u2022 $Var(\\bar{X}_n) = \\frac{1}{n^2} Var\\left(\\sum_{i=1}^n X_i\\right)$ [l5];\n\u2022 The variance of the sample mean is $Var(\\bar{X}_n) = \\frac{p(1-p)}{n}$ [ts_2].\nTherefore, we conclude:\n\u2022 The limit of the variance of the sample mean is $\\lim_{n \\to \\infty} Var(\\bar{X}_n) = 0$ [ts_3].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "ts_1", "l4", "l5", "ts_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_3\n  (p : \u211d)\n  (ts_2 : \u2200 n : \u2115, n > 0 \u2192 (p * (1 - p)) / n = (p * (1 - p)) / n) :\n  Filter.Tendsto (fun n : \u2115 => (p * (1 - p)) / (n : \u211d)) Filter.atTop (0 : \u211d) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 8, "column": 69, "endLine": 8, "endColumn": 76, "data": "application type mismatch\n  Tendsto (fun n => p * (1 - p) / \u2191n) atTop 0\nargument\n  0\nhas type\n  \u211d : Type\nbut is expected to have type\n  Filter \u211d : Type"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_3\n  (p : \u211d)\n  (hp : 0 < p \u2227 p < 1) :\n  Filter.Tendsto (fun n : \u2115 => (p * (1 - p)) / (n : \u211d)) Filter.atTop (\ud835\udcdd 0) := by\n  have h : p * (1 - p) \u2260 0 := by\n    cases hp with\n    | intro hp1 hp2 =>\n      apply mul_ne_zero\n      \u00b7 exact ne_of_gt hp1\n      \u00b7 exact sub_ne_zero_of_ne (ne_of_lt hp2).symm\n  rw [div_eq_mul_inv]\n  exact Tendsto.mul_const h tendsto_inv_atTop_zero", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 6, "endLine": 15, "endColumn": 20, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a / ?b\np : \u211d\nhp : 0 < p \u2227 p < 1\nh : p * (1 - p) \u2260 0\n\u22a2 Tendsto (fun n => p * (1 - p) / \u2191n) atTop (\ud835\udcdd 0)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_3", "label": "ts_3", "color": {"background": "#a3c2a8", "border": "#fa2c07", "highlight": {"background": "#a3c2a8", "border": "#fa2c07"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    