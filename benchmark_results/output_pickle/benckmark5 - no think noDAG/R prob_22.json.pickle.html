
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $X_1, X_2, X_3$ are independent exponential random variables with parameters $\lambda_1, \lambda_2, \lambda_3$, respectively, then $P(X_1 < \min(X_2, X_3)) = \frac{\lambda_1}{\lambda_1 + \lambda_2 + \lambda_3}$.

Proof: The problem asks for $P(X_1 < \min(X_2, X_3))$. This is a special case of the problem in part (a), where we found $P(X_1 < X_2)$. The key is to recognize that $\min(X_2, X_3)$ is a single exponential random variable. From part (b), we know that the distribution of $\min(X_2, X_3)$ is exponential with parameter $\lambda_2 + \lambda_3$. Since $X_1$ is independent of $X_2$ and $X_3$, it is also independent of $\min(X_2, X_3)$. We can then apply the result from part (a) to the pair of independent exponential random variables $X_1$ and $\min(X_2, X_3)$. Replacing $\lambda_2$ in the formula from part (a) with the parameter of $\min(X_2, X_3)$, which is $\lambda_2 + \lambda_3$, we get $P(X_1 < \min(X_2, X_3)) = \frac{\lambda_1}{\lambda_1 + (\lambda_2 + \lambda_3)} = \frac{\lambda_1}{\lambda_1 + \lambda_2 + \lambda_3}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "If $X_1, X_2, X_3$ are independent exponential random variables with parameters $\\lambda_1, \\lambda_2, \\lambda_3$, respectively", "statement": "Premise:\n\u2022 $X_1, X_2, X_3$ are independent exponential random variables with positive parameters $\\lambda_1, \\lambda_2, \\lambda_3$, respectively [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {\u03a9 : Type*} {m\u03a9 : MeasurableSpace \u03a9} [MeasureSpace \u03a9]\n  (X1 X2 X3 : \u03a9 \u2192 \u211d)\n  (l1 l2 l3 : \u211d)\n  (tc_1 : (0 < l1 \u2227 0 < l2 \u2227 0 < l3) \u2227 (MeasureTheory.IsExponential l1 (Measure.dirac 0) X1) \u2227 (MeasureTheory.IsExponential l2 (Measure.dirac 0) X2) \u2227 (MeasureTheory.IsExponential l3 (Measure.dirac 0) X3) \u2227 MeasureTheory.IndepFun X1 X2 \u2227 MeasureTheory.IndepFun X1 X3 \u2227 MeasureTheory.IndepFun X2 X3)", "lean_pass": false, "error_msg": [{"line": 6, "column": 40, "endLine": 6, "endColumn": 54, "data": "invalid binder annotation, type is not a class instance\n  ?m.18\nuse the command `set_option checkBinderAnnotations false` to disable the check"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "This is a special case of the problem in part (a), where we found $P(X_1 < X_2)$.", "statement": "We assume:\n\u2022 $X_1, X_2, X_3$ are independent exponential random variables with positive parameters $\\lambda_1, \\lambda_2, \\lambda_3$, respectively [tc_1].\nDefinition:\n\u2022 For any two independent exponential random variables $Y_1, Y_2$ with parameters $\\mu_1 > 0, \\mu_2 > 0$, the probability $P(Y_1 < Y_2)$ is given by the formula $\\frac{\\mu_1}{\\mu_1 + \\mu_2}$ [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter MeasureTheory\n\nvariable\n  {\u03a9 : Type*} [m : MeasurableSpace \u03a9] (P : Measure \u03a9) [IsProbabilityMeasure P]\n  (X\u2081 X\u2082 X\u2083 Y\u2081 Y\u2082 : \u03a9 \u2192 \u211d)\n  (lambda\u2081 lambda\u2082 lambda\u2083 mu\u2081 mu\u2082 : \u211d)\n  (tc_1 :\n    (P.IsExponential X\u2081 lambda\u2081) \u2227 (P.IsExponential X\u2082 lambda\u2082) \u2227 (P.IsExponential X\u2083 lambda\u2083) \u2227\n    (P.Indep X\u2081 X\u2082) \u2227 (P.Indep X\u2081 X\u2083) \u2227 (P.Indep X\u2082 X\u2083) \u2227\n    lambda\u2081 > 0 \u2227 lambda\u2082 > 0 \u2227 lambda\u2083 > 0)\n  (def_1 :\n    ((P.IsExponential Y\u2081 mu\u2081) \u2227 (P.IsExponential Y\u2082 mu\u2082) \u2227 (P.Indep Y\u2081 Y\u2082) \u2227 mu\u2081 > 0 \u2227 mu\u2082 > 0) \u2192\n    P {\u03c9 | Y\u2081 \u03c9 < Y\u2082 \u03c9} = mu\u2081 / (mu\u2081 + mu\u2082))", "lean_pass": false, "error_msg": [{"line": 10, "column": 5, "endLine": 10, "endColumn": 31, "data": "invalid field 'IsExponential', the environment does not contain 'MeasureTheory.Measure.IsExponential'\n  P\nhas type\n  Measure \u03a9"}, {"line": 10, "column": 36, "endLine": 10, "endColumn": 62, "data": "invalid field 'IsExponential', the environment does not contain 'MeasureTheory.Measure.IsExponential'\n  P\nhas type\n  Measure \u03a9"}, {"line": 10, "column": 67, "endLine": 10, "endColumn": 93, "data": "invalid field 'IsExponential', the environment does not contain 'MeasureTheory.Measure.IsExponential'\n  P\nhas type\n  Measure \u03a9"}, {"line": 11, "column": 5, "endLine": 11, "endColumn": 18, "data": "invalid field 'Indep', the environment does not contain 'MeasureTheory.Measure.Indep'\n  P\nhas type\n  Measure \u03a9"}, {"line": 11, "column": 23, "endLine": 11, "endColumn": 36, "data": "invalid field 'Indep', the environment does not contain 'MeasureTheory.Measure.Indep'\n  P\nhas type\n  Measure \u03a9"}, {"line": 11, "column": 41, "endLine": 11, "endColumn": 54, "data": "invalid field 'Indep', the environment does not contain 'MeasureTheory.Measure.Indep'\n  P\nhas type\n  Measure \u03a9"}, {"line": 14, "column": 6, "endLine": 14, "endColumn": 28, "data": "invalid field 'IsExponential', the environment does not contain 'MeasureTheory.Measure.IsExponential'\n  P\nhas type\n  Measure \u03a9"}, {"line": 14, "column": 33, "endLine": 14, "endColumn": 55, "data": "invalid field 'IsExponential', the environment does not contain 'MeasureTheory.Measure.IsExponential'\n  P\nhas type\n  Measure \u03a9"}, {"line": 14, "column": 60, "endLine": 14, "endColumn": 73, "data": "invalid field 'Indep', the environment does not contain 'MeasureTheory.Measure.Indep'\n  P\nhas type\n  Measure \u03a9"}, {"line": 15, "column": 26, "endLine": 15, "endColumn": 43, "data": "type mismatch\n  mu\u2081 / (mu\u2081 + mu\u2082)\nhas type\n  \u211d : outParam Type\nbut is expected to have type\n  ENNReal : Type"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "def_2": {"id": "def_2", "natural_language": "the distribution of $\\min(X_2, X_3)$ is exponential with parameter $\\lambda_2 + \\lambda_3$.", "statement": "We assume:\n\u2022 $X_1, X_2, X_3$ are independent exponential random variables with positive parameters $\\lambda_1, \\lambda_2, \\lambda_3$, respectively [tc_1];\n\u2022 For any two independent exponential random variables $Y_1, Y_2$ with parameters $\\mu_1 > 0, \\mu_2 > 0$, the probability $P(Y_1 < Y_2)$ is given by the formula $\\frac{\\mu_1}{\\mu_1 + \\mu_2}$ [def_1].\nDefinition:\n\u2022 For any two independent exponential random variables $Y_2, Y_3$ with parameters $\\mu_2 > 0, \\mu_3 > 0$, the random variable $\\min(Y_2, Y_3)$ is also an exponential random variable with parameter $\\mu_2 + \\mu_3$ [def_2].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  {\u03a9 : Type*} [MeasurableSpace \u03a9] [MeasureSpace \u03a9]\n  (X\u2081 X\u2082 X\u2083 : \u03a9 \u2192 \u211d) (lambda1 lambda2 lambda3 : \u211d)\n  (tc_1 :\n    (\n      (Measure.IsMarkovProcess (exponential_distribution lambda1) X\u2081) \u2227\n      (Measure.IsMarkovProcess (exponential_distribution lambda2) X\u2082) \u2227\n      (Measure.IsMarkovProcess (exponential_distribution lambda3) X\u2083)\n    ) \u2227\n    (\n      Independent X\u2081 X\u2082 \u2227\n      Independent X\u2081 X\u2083 \u2227\n      Independent X\u2082 X\u2083\n    )\n  )\n  (def_1 :\n    \u2200 {Y\u2081 Y\u2082 : \u03a9 \u2192 \u211d} {mu1 mu2 : \u211d},\n      (Measure.IsMarkovProcess (exponential_distribution mu1) Y\u2081) \u2192\n      (Measure.IsMarkovProcess (exponential_distribution mu2) Y\u2082) \u2192\n      Independent Y\u2081 Y\u2082 \u2192\n      mu1 > 0 \u2192 mu2 > 0 \u2192\n      ENNReal.toReal (Measure.prob (Metric.ball (Y\u2081\u207b\u00b9' {x | x < Y\u2082 x}) 0)) = mu1 / (mu1 + mu2)\n  )\n  (def_2 :\n    \u2200 {Y\u2082 Y\u2083 : \u03a9 \u2192 \u211d} {mu2 mu3 : \u211d},\n      (Measure.IsMarkovProcess (exponential_distribution mu2) Y\u2082) \u2192\n      (Measure.IsMarkovProcess (exponential_distribution mu3) Y\u2083) \u2192\n      Independent Y\u2082 Y\u2083 \u2192\n      mu2 > 0 \u2192 mu3 > 0 \u2192\n      (Measure.IsMarkovProcess (exponential_distribution (mu2 + mu3)) (fun x => min (Y\u2082 x) (Y\u2083 x)))\n  )", "lean_pass": false, "error_msg": [{"line": 6, "column": 35, "endLine": 6, "endColumn": 49, "data": "invalid binder annotation, type is not a class instance\n  ?m.18\nuse the command `set_option checkBinderAnnotations false` to disable the check"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "From part (b), we know that the distribution of $\\min(X_2, X_3)$ is exponential with parameter $\\lambda_2 + \\lambda_3$.", "statement": "We assume:\n\u2022 $X_1, X_2, X_3$ are independent exponential random variables with positive parameters $\\lambda_1, \\lambda_2, \\lambda_3$, respectively [tc_1];\n\u2022 For any two independent exponential random variables $Y_1, Y_2$ with parameters $\\mu_1 > 0, \\mu_2 > 0$, the probability $P(Y_1 < Y_2)$ is given by the formula $\\frac{\\mu_1}{\\mu_1 + \\mu_2}$ [def_1];\n\u2022 For any two independent exponential random variables $Y_2, Y_3$ with parameters $\\mu_2 > 0, \\mu_3 > 0$, the random variable $\\min(Y_2, Y_3)$ is an exponential random variable with parameter $\\mu_2 + \\mu_3$ [def_2].\nTherefore, we conclude:\n\u2022 The random variable $\\min(X_2, X_3)$ is an exponential random variable with parameter $\\lambda_2 + \\lambda_3$ [l1].", "dependencies": ["tc_1", "def_1", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {\u03a9 : Type*} [MeasurableSpace \u03a9]\n  (X1 X2 X3 : \u03a9 \u2192 \u211d)\n  (lambda1 lambda2 lambda3 : \u211d) (hlambda1 : lambda1 > 0) (hlambda2 : lambda2 > 0) (hlambda3 : lambda3 > 0)\n  (tc_1 : (IsIndependent X1 (Exponential (lambda1))) \u2227 (IsIndependent X2 (Exponential (lambda2))) \u2227 (IsIndependent X3 (Exponential (lambda3))))\n  (def_1 : \u2200 (Y1 Y2 : \u03a9 \u2192 \u211d) (mu1 mu2 : \u211d) (hmu1 : mu1 > 0) (hmu2 : mu2 > 0), (IsIndependent Y1 (Exponential mu1)) \u2227 (IsIndependent Y2 (Exponential mu2)) \u2192 (P (Y1 < Y2) = mu1 / (mu1 + mu2)))\n  (def_2 : \u2200 (Y2 Y3 : \u03a9 \u2192 \u211d) (mu2 mu3 : \u211d) (hmu2 : mu2 > 0) (hmu3 : mu3 > 0), (IsIndependent Y2 (Exponential mu2)) \u2227 (IsIndependent Y3 (Exponential mu3)) \u2192 (IsRandomVariable (min Y2 Y3) (Exponential (mu2 + mu3)))) :\n  IsRandomVariable (min X2 X3) (Exponential (lambda2 + lambda3)) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 9, "column": 11, "endLine": 9, "endColumn": 51, "data": "function expected at\n  IsIndependent\nterm has type\n  ?m.114"}, {"line": 9, "column": 56, "endLine": 9, "endColumn": 96, "data": "function expected at\n  IsIndependent\nterm has type\n  ?m.114"}, {"line": 9, "column": 101, "endLine": 9, "endColumn": 141, "data": "function expected at\n  IsIndependent\nterm has type\n  ?m.114"}, {"line": 10, "column": 79, "endLine": 10, "endColumn": 113, "data": "function expected at\n  IsIndependent\nterm has type\n  ?m.114"}, {"line": 10, "column": 118, "endLine": 10, "endColumn": 152, "data": "function expected at\n  IsIndependent\nterm has type\n  ?m.114"}, {"line": 10, "column": 157, "endLine": 10, "endColumn": 168, "data": "function expected at\n  P\nterm has type\n  ?m.291"}, {"line": 11, "column": 79, "endLine": 11, "endColumn": 113, "data": "function expected at\n  IsIndependent\nterm has type\n  ?m.114"}, {"line": 11, "column": 118, "endLine": 11, "endColumn": 152, "data": "function expected at\n  IsIndependent\nterm has type\n  ?m.114"}, {"line": 11, "column": 157, "endLine": 11, "endColumn": 211, "data": "function expected at\n  IsRandomVariable\nterm has type\n  ?m.642"}, {"line": 12, "column": 2, "endLine": 12, "endColumn": 64, "data": "function expected at\n  IsRandomVariable\nterm has type\n  ?m.642"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib.Probability.Distribution\nimport Mathlib.Probability.Independence\n\nopen MeasureTheory ProbabilityTheory\n\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {\u03a9 : Type*} [MeasurableSpace \u03a9] {\u03bc : Measure \u03a9} [IsProbabilityMeasure \u03bc]\n  (X1 X2 X3 : \u03a9 \u2192 \u211d)\n  (lambda1 lambda2 lambda3 : \u211d) (hlambda1 : lambda1 > 0) (hlambda2 : lambda2 > 0) (hlambda3 : lambda3 > 0)\n  (tc_1 : IndepFun X1 X2 \u03bc \u2227 IndepFun X1 X3 \u03bc \u2227 IndepFun X2 X3 \u03bc)\n  (hX1 : Measurable X1) (hX2 : Measurable X2) (hX3 : Measurable X3)\n  (hdistX1 : X1 ~\u2098[\u03bc] exponential \u03bb1)\n  (hdistX2 : X2 ~\u2098[\u03bc] exponential \u03bb2)\n  (hdistX3 : X3 ~\u2098[\u03bc] exponential \u03bb3)\n  (def_2 : \u2200 (Y2 Y3 : \u03a9 \u2192 \u211d) (mu2 mu3 : \u211d) (hmu2 : mu2 > 0) (hmu3 : mu3 > 0),\n    Measurable Y2 \u2192 Measurable Y3 \u2192\n    IndepFun Y2 Y3 \u03bc \u2192\n    Y2 ~\u2098[\u03bc] exponential mu2 \u2192\n    Y3 ~\u2098[\u03bc] exponential mu3 \u2192\n    (fun \u03c9 => min (Y2 \u03c9) (Y3 \u03c9)) ~\u2098[\u03bc] exponential (mu2 + mu3)) :\n  (fun \u03c9 => min (X2 \u03c9) (X3 \u03c9)) ~\u2098[\u03bc] exponential (lambda2 + lambda3) :=\n  def_2 X2 X3 lambda2 lambda3 hlambda2 hlambda3 hX2 hX3 tc_1.2.2 hdistX2 hdistX3", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 3, "column": 0, "endLine": 3, "endColumn": 6, "data": "invalid 'import' command, it must be used in the beginning of the file"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Since $X_1$ is independent of $X_2$ and $X_3$, it is also independent of $\\min(X_2, X_3)$.", "statement": "We assume:\n\u2022 $X_1, X_2, X_3$ are independent exponential random variables with positive parameters $\\lambda_1, \\lambda_2, \\lambda_3$, respectively [tc_1];\n\u2022 For any two independent exponential random variables $Y_1, Y_2$ with parameters $\\mu_1 > 0, \\mu_2 > 0$, the probability $P(Y_1 < Y_2)$ is given by the formula $\\frac{\\mu_1}{\\mu_1 + \\mu_2}$ [def_1];\n\u2022 For any two independent exponential random variables $Y_2, Y_3$ with parameters $\\mu_2 > 0, \\mu_3 > 0$, the random variable $\\min(Y_2, Y_3)$ is an exponential random variable with parameter $\\mu_2 + \\mu_3$ [def_2];\n\u2022 The random variable $\\min(X_2, X_3)$ is an exponential random variable with parameter $\\lambda_2 + \\lambda_3$ [l1].\nTherefore, we conclude:\n\u2022 The random variable $X_1$ is independent of the random variable $\\min(X_2, X_3)$ [l2].", "dependencies": ["tc_1", "def_1", "def_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {\u03a9 : Type*} [MeasurableSpace \u03a9] [MeasureTheory.MeasureSpace \u03a9] {X1 X2 X3 : \u03a9 \u2192 \u211d}\n  (tc_1 : ProbabilityTheory.IsMarkovProcess X1 \u2227 ProbabilityTheory.IsMarkovProcess X2 \u2227 ProbabilityTheory.IsMarkovProcess X3 \u2227 ProbabilityTheory.IndepFun X1 X2 \u2227 ProbabilityTheory.IndepFun X1 X3 \u2227 ProbabilityTheory.IndepFun X2 X3)\n  (def_1 : \u2200 (Y1 Y2 : \u03a9 \u2192 \u211d) (\u03bc1 \u03bc2 : \u211d), \u03bc1 > 0 \u2192 \u03bc2 > 0 \u2192 ProbabilityTheory.IsMarkovProcess Y1 \u2192 ProbabilityTheory.IsMarkovProcess Y2 \u2192 ProbabilityTheory.IndepFun Y1 Y2 \u2192 ENNReal.toReal (MeasureTheory.Measure.volume {\u03c9 | Y1 \u03c9 < Y2 \u03c9}) = \u03bc1 / (\u03bc1 + \u03bc2))\n  (def_2 : \u2200 (Y2 Y3 : \u03a9 \u2192 \u211d) (\u03bc2 \u03bc3 : \u211d), \u03bc2 > 0 \u2192 \u03bc3 > 0 \u2192 ProbabilityTheory.IsMarkovProcess Y2 \u2192 ProbabilityTheory.IsMarkovProcess Y3 \u2192 ProbabilityTheory.IndepFun Y2 Y3 \u2192 ProbabilityTheory.IsMarkovProcess (fun \u03c9 => min (Y2 \u03c9) (Y3 \u03c9)) \u2227 True)\n  (l1 : ProbabilityTheory.IsMarkovProcess (fun \u03c9 => min (X2 \u03c9) (X3 \u03c9))) :\n  ProbabilityTheory.IndepFun X1 (fun \u03c9 => min (X2 \u03c9) (X3 \u03c9)) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 7, "column": 10, "endLine": 7, "endColumn": 43, "data": "unknown identifier 'ProbabilityTheory.IsMarkovProcess'"}, {"line": 7, "column": 49, "endLine": 7, "endColumn": 82, "data": "unknown identifier 'ProbabilityTheory.IsMarkovProcess'"}, {"line": 7, "column": 88, "endLine": 7, "endColumn": 121, "data": "unknown identifier 'ProbabilityTheory.IsMarkovProcess'"}, {"line": 8, "column": 60, "endLine": 8, "endColumn": 93, "data": "unknown identifier 'ProbabilityTheory.IsMarkovProcess'"}, {"line": 8, "column": 99, "endLine": 8, "endColumn": 132, "data": "unknown identifier 'ProbabilityTheory.IsMarkovProcess'"}, {"line": 8, "column": 189, "endLine": 8, "endColumn": 235, "data": "unknown constant 'MeasureTheory.Measure.volume'"}, {"line": 9, "column": 60, "endLine": 9, "endColumn": 93, "data": "unknown identifier 'ProbabilityTheory.IsMarkovProcess'"}, {"line": 9, "column": 99, "endLine": 9, "endColumn": 132, "data": "unknown identifier 'ProbabilityTheory.IsMarkovProcess'"}, {"line": 9, "column": 173, "endLine": 9, "endColumn": 206, "data": "unknown identifier 'ProbabilityTheory.IsMarkovProcess'"}, {"line": 10, "column": 8, "endLine": 10, "endColumn": 41, "data": "unknown identifier 'ProbabilityTheory.IsMarkovProcess'"}, {"line": 8, "column": 138, "endLine": 8, "endColumn": 164, "data": "could not synthesize default value for parameter '\u03bc' using tactics"}, {"line": 8, "column": 138, "endLine": 8, "endColumn": 164, "data": "type mismatch\n  MeasureTheory.volume\nhas type\n  @MeasureTheory.Measure ?m.832 MeasureTheory.MeasureSpace.toMeasurableSpace : Type ?u.831\nbut is expected to have type\n  @MeasureTheory.Measure \u03a9 (?m.369 Y1 Y2 \u03bc1 \u03bc2) : Type u_1"}, {"line": 9, "column": 138, "endLine": 9, "endColumn": 164, "data": "could not synthesize default value for parameter '\u03bc' using tactics"}, {"line": 9, "column": 138, "endLine": 9, "endColumn": 164, "data": "type mismatch\n  MeasureTheory.volume\nhas type\n  @MeasureTheory.Measure ?m.954 MeasureTheory.MeasureSpace.toMeasurableSpace : Type ?u.953\nbut is expected to have type\n  @MeasureTheory.Measure \u03a9 (?m.540 Y2 Y3 \u03bc2 \u03bc3) : Type u_1"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nimport Mathlib.Probability.Independence.Basic\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter ProbabilityTheory MeasureTheory\n\nlemma l2\n  {\u03a9 : Type*} [MeasurableSpace \u03a9] {\u03bc : Measure \u03a9} {X1 X2 X3 : \u03a9 \u2192 \u211d}\n  (tc_1 : IndepFun X1 X2 \u03bc \u2227 IndepFun X1 X3 \u03bc \u2227 IndepFun X2 X3 \u03bc)\n  (def_1 : \u2200 (Y1 Y2 : \u03a9 \u2192 \u211d) (\u03bc1 \u03bc2 : \u211d), \u03bc1 > 0 \u2192 \u03bc2 > 0 \u2192 IndepFun Y1 Y2 \u03bc \u2192 ENNReal.toReal (\u03bc {\u03c9 | Y1 \u03c9 < Y2 \u03c9}) = \u03bc1 / (\u03bc1 + \u03bc2))\n  (def_2 : \u2200 (Y2 Y3 : \u03a9 \u2192 \u211d) (\u03bc2 \u03bc3 : \u211d), \u03bc2 > 0 \u2192 \u03bc3 > 0 \u2192 IndepFun Y2 Y3 \u03bc \u2192 IndepFun (fun \u03c9 => min (Y2 \u03c9) (Y3 \u03c9)) Y2 \u03bc \u2227 IndepFun (fun \u03c9 => min (Y2 \u03c9) (Y3 \u03c9)) Y3 \u03bc)\n  (l1 : AEMeasurable (fun \u03c9 => min (X2 \u03c9) (X3 \u03c9)) \u03bc) :\n  IndepFun X1 (fun \u03c9 => min (X2 \u03c9) (X3 \u03c9)) \u03bc := by\n  have h1 : IndepFun X1 X2 \u03bc := tc_1.1\n  have h2 : IndepFun X1 X3 \u03bc := tc_1.2.1\n  have h3 : IndepFun X2 X3 \u03bc := tc_1.2.2\n  exact ProbabilityTheory.iIndepFun.indepFun_min (by simp [h1, h2]) 0 1 (by simp)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 8, "endLine": 15, "endColumn": 81, "data": "invalid field notation, type is not of the form (C ...) where C is a constant\n  @iIndepFun ?m.1726 ?m.1727 ?m.1728 ?m.1729\nhas type\n  ((x : ?m.1727) \u2192 MeasurableSpace (?m.1729 x)) \u2192\n    ((x : ?m.1727) \u2192 ?m.1726 \u2192 ?m.1729 x) \u2192 autoParam (Measure ?m.1726) _auto\u271d \u2192 Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Replacing $\\lambda_2$ in the formula from part (a) with the parameter of $\\min(X_2, X_3)$, which is $\\lambda_2 + \\lambda_3$, we get $P(X_1 < \\min(X_2, X_3)) = \\frac{\\lambda_1}{\\lambda_1 + (\\lambda_2 + \\lambda_3)} = \\frac{\\lambda_1}{\\lambda_1 + \\lambda_2 + \\lambda_3}$.", "statement": "We assume:\n\u2022 $X_1, X_2, X_3$ are independent exponential random variables with positive parameters $\\lambda_1, \\lambda_2, \\lambda_3$, respectively [tc_1];\n\u2022 For any two independent exponential random variables $Y_1, Y_2$ with parameters $\\mu_1 > 0, \\mu_2 > 0$, the probability $P(Y_1 < Y_2)$ is given by the formula $\\frac{\\mu_1}{\\mu_1 + \\mu_2}$ [def_1];\n\u2022 For any two independent exponential random variables $Y_2, Y_3$ with parameters $\\mu_2 > 0, \\mu_3 > 0$, the random variable $\\min(Y_2, Y_3)$ is an exponential random variable with parameter $\\mu_2 + \\mu_3$ [def_2];\n\u2022 The random variable $\\min(X_2, X_3)$ is an exponential random variable with parameter $\\lambda_2 + \\lambda_3$ [l1];\n\u2022 The random variable $X_1$ is independent of the random variable $\\min(X_2, X_3)$ [l2].\nTherefore, we conclude:\n\u2022 $P(X_1 < \\min(X_2, X_3)) = \\frac{\\lambda_1}{\\lambda_1 + \\lambda_2 + \\lambda_3}$ [ts_1].", "dependencies": ["tc_1", "def_1", "def_2", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (\u03a9 : Type*) [MeasureSpace \u03a9]\n  (X1 X2 X3 : \u03a9 \u2192 \u211d) [IsRandomVariable X1] [IsRandomVariable X2] [IsRandomVariable X3]\n  (lambda1 lambda2 lambda3 : \u211d) (h_lambda1 : lambda1 > 0) (h_lambda2 : lambda2 > 0) (h_lambda3 : lambda3 > 0)\n  (tc_1 : IsIndependent X1 (Exponential lambda1) \u2227 IsIndependent X2 (Exponential lambda2) \u2227 IsIndependent X3 (Exponential lambda3) \u2227 Pairwise (fun (i j : Nat) => IsIndependent (match i with 0 => X1 | 1 => X2 | 2 => X3 | _ => X1) (match j with 0 => X1 | 1 => X2 | 2 => X3 | _ => X1)))\n  (def_1 : \u2200 (Y1 Y2 : \u03a9 \u2192 \u211d) (mu1 mu2 : \u211d), mu1 > 0 \u2192 mu2 > 0 \u2192 IsIndependent Y1 (Exponential mu1) \u2192 IsIndependent Y2 (Exponential mu2) \u2192 P(Y1 < Y2) = mu1 / (mu1 + mu2))\n  (def_2 : \u2200 (Y2 Y3 : \u03a9 \u2192 \u211d) (mu2 mu3 : \u211d), mu2 > 0 \u2192 mu3 > 0 \u2192 IsIndependent Y2 (Exponential mu2) \u2192 IsIndependent Y3 (Exponential mu3) \u2192 IsIndependent Y2 Y3 \u2192 IsRandomVariable (min Y2 Y3) \u2227 (min Y2 Y3) \u223c Exponential (mu2 + mu3))\n  (l1 : IsRandomVariable (min X2 X3) \u2227 (min X2 X3) \u223c Exponential (lambda2 + lambda3))\n  (l2 : IsIndependent X1 (min X2 X3)) :\n  P(X1 < min X2 X3) = lambda1 / (lambda1 + lambda2 + lambda3) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 9, "column": 189, "endLine": 9, "endColumn": 191, "data": "unexpected token; expected '.' or '|'"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (\u03a9 : Type*) [MeasureSpace \u03a9]\n  (X1 X2 X3 : \u03a9 \u2192 \u211d) [IsRandomVariable X1] [IsRandomVariable X2] [IsRandomVariable X3]\n  (lambda1 lambda2 lambda3 : \u211d) (h_lambda1 : lambda1 > 0) (h_lambda2 : lambda2 > 0) (h_lambda3 : lambda3 > 0)\n  (tc_1 : IsIndependent X1 (Exponential lambda1) \u2227 IsIndependent X2 (Exponential lambda2) \u2227 IsIndependent X3 (Exponential lambda3) \u2227 Pairwise (fun i j => IsIndependent (if i = 0 then X1 else if i = 1 then X2 else X3) (if j = 0 then X1 else if j = 1 then X2 else X3)))\n  (def_1 : \u2200 (Y1 Y2 : \u03a9 \u2192 \u211d) (mu1 mu2 : \u211d), mu1 > 0 \u2192 mu2 > 0 \u2192 IsIndependent Y1 (Exponential mu1) \u2192 IsIndependent Y2 (Exponential mu2) \u2192 IsIndependent Y1 Y2 \u2192 P (fun \u03c9 => Y1 \u03c9 < Y2 \u03c9) = mu1 / (mu1 + mu2))\n  (def_2 : \u2200 (Y2 Y3 : \u03a9 \u2192 \u211d) (mu2 mu3 : \u211d), mu2 > 0 \u2192 mu3 > 0 \u2192 IsIndependent Y2 (Exponential mu2) \u2192 IsIndependent Y3 (Exponential mu3) \u2192 IsIndependent Y2 Y3 \u2192 IsRandomVariable (fun \u03c9 => min (Y2 \u03c9) (Y3 \u03c9)) \u2227 (fun \u03c9 => min (Y2 \u03c9) (Y3 \u03c9)) \u223c Exponential (mu2 + mu3))\n  (l1 : IsRandomVariable (fun \u03c9 => min (X2 \u03c9) (X3 \u03c9)) \u2227 (fun \u03c9 => min (X2 \u03c9) (X3 \u03c9)) \u223c Exponential (lambda2 + lambda3))\n  (l2 : IsIndependent X1 (fun \u03c9 => min (X2 \u03c9) (X3 \u03c9))) :\n  P (fun \u03c9 => X1 \u03c9 < min (X2 \u03c9) (X3 \u03c9)) = lambda1 / (lambda1 + lambda2 + lambda3) := by\n  have h_min := l1.2\n  have h_indep := l2\n  have h_X1 := tc_1.1\n  rw [def_1 X1 (fun \u03c9 => min (X2 \u03c9) (X3 \u03c9)) lambda1 (lambda2 + lambda3) h_lambda1 (add_pos h_lambda2 h_lambda3) h_X1 h_min h_indep]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#fa2c07", "highlight": {"background": "#a3c2a8", "border": "#fa2c07"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    