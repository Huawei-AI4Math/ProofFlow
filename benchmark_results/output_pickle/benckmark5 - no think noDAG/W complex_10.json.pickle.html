
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z$ be a complex number. If $z=x+iy$ for real numbers $x, y$, $|z+1| = |z-i|$, and $|z| = \sqrt{2}$, then $z^2 = -2i$.

Proof: Given $z=x+iy$, the condition $|z+1| = |z-i|$ implies $(x+1)^2+y^2 = x^2+(y-1)^2$, which simplifies to $x+y=0$. The condition $|z|=\sqrt{2}$ implies $x^2+y^2=2$. By substituting $y=-x$ into the second equation, we get $x^2+(-x)^2=2$, which simplifies to $x^2=1$. We express $z^2$ in terms of $x$ using $y=-x$: $z^2 = (x+iy)^2 = x^2-y^2+2ixy = x^2-(-x)^2+2ix(-x) = -2ix^2$. Finally, substituting $x^2=1$ into this expression yields $z^2=-2i$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z$ be a complex number. If $z=x+iy$ for real numbers $x, y$", "statement": "Premise:\n\u2022 z is a complex number such that z = x + iy for real numbers x, y [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (x y : \u211d)\n  (tc_1 : z = x + y * I)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `(z : \u2102)` correctly captures that z is a complex number", "The Lean expression `z = x + y * I` correctly formalizes z = x + iy, where `I` represents the imaginary unit i in Lean's complex number notation", "The Lean declaration `(x y : \u211d)` correctly specifies that x is a real number", "The Lean declaration `(x y : \u211d)` correctly specifies that y is a real number"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "$|z+1| = |z-i|$", "statement": "Premise:\n\u2022 z is a complex number such that z = x + iy for real numbers x, y [tc_1]\n\u2022 |z+1| = |z-i| [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that z is a complex number with z = x + iy where x, y are real numbers. The notation 'y * I' in Lean is equivalent to 'iy' in mathematical notation.", "The Lean formalization correctly captures the absolute value equality |z+1| = |z-i| using Complex.abs for the modulus operation and I for the imaginary unit.", "The Lean code appropriately contains no conclusions, matching the natural language statement which explicitly notes no conclusions are derived."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "$|z| = \\sqrt{2}$", "statement": "Premise:\n\u2022 z is a complex number such that z = x + iy for real numbers x, y [tc_1]\n\u2022 |z+1| = |z-i| [tc_2]\n\u2022 |z| = sqrt(2) [tc_3].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that z is a complex number equal to x + iy where x and y are real numbers. The notation 'y * I' in Lean is equivalent to 'iy' in mathematical notation.", "The Lean formalization correctly represents the absolute value equality using Complex.abs, and 'I' in Lean represents the imaginary unit i.", "The Lean formalization correctly represents the absolute value of z equals square root of 2, using Complex.abs for the modulus and Real.sqrt for the square root function."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "Given $z=x+iy$, the condition $|z+1| = |z-i|$ implies $(x+1)^2+y^2 = x^2+(y-1)^2$", "statement": "We assume:\n\u2022 z is a complex number such that z = x + iy for real numbers x, y [tc_1]\n\u2022 |z+1| = |z-i| [tc_2]\n\u2022 |z| = sqrt(2) [tc_3]\nTherefore, we conclude:\n\u2022 (x+1)^2 + y^2 = x^2 + (y-1)^2 [l1].", "dependencies": ["tc_1", "tc_2", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2) :\n  (x + 1)^2 + y^2 = x^2 + (y - 1)^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2) :\n  (x + 1)^2 + y^2 = x^2 + (y - 1)^2 := by\n  rw [\u2190 Complex.norm_eq_abs, \u2190 Complex.norm_eq_abs] at tc_2\n  rw [tc_1] at tc_2\n  simp only [Complex.normSq, Complex.add_re, Complex.add_im, Complex.ofReal_re, Complex.ofReal_im, Complex.mul_re, Complex.mul_im, Complex.I_re, Complex.I_im, one_mul, zero_mul, sub_zero, add_zero, Complex.sub_re, Complex.sub_im] at tc_2\n  simp only [pow_two] at tc_2\n  rw [\u2190 sub_eq_zero] at tc_2\n  simp only [sub_eq_zero] at tc_2\n  exact tc_2", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 2, "endLine": 13, "endColumn": 237, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly and completely captures all logical and mathematical meaning from the natural language. The complex number representation z = x + y * I is equivalent to z = x + iy, Complex.abs properly represents absolute value, and all conditions (tc_1, tc_2, tc_3) and the conclusion are accurately translated. The logical structure appropriately converts the natural language reasoning into formal mathematical logic.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2) :\n  \u00ac((x + 1)^2 + y^2 = x^2 + (y - 1)^2) := by\n  simp [tc_1] at *\n  rw [Complex.abs, Complex.abs, Complex.normSq, Complex.normSq] at tc_2\n  simp [sq] at tc_2 tc_3\n  rw [\u2190 add_left_inj (x^2 + y^2)] at tc_2\n  simp only [add_left_inj, add_right_inj] at tc_2\n  rw [tc_3] at tc_2\n  norm_num at tc_2\n  intro h\n  rw [h] at tc_2\n  norm_num at tc_2"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "which simplifies to $x+y=0$", "statement": "We assume:\n\u2022 z is a complex number such that z = x + iy for real numbers x, y [tc_1]\n\u2022 |z+1| = |z-i| [tc_2]\n\u2022 |z| = sqrt(2) [tc_3]\n\u2022 (x+1)^2 + y^2 = x^2 + (y-1)^2 [l1]\nTherefore, we conclude:\n\u2022 x + y = 0 [l2].", "dependencies": ["tc_1", "tc_2", "tc_3", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2) :\n  x + y = 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2) :\n  x + y = 0 := by\n  simp only [Complex.abs, Complex.normSq] at tc_2 tc_3\n  simp only [Complex.add_re, Complex.add_im, Complex.ofReal_re, Complex.ofReal_im, Complex.I_re, Complex.I_im, Complex.sub_re, Complex.sub_im] at tc_2\n  simp only [Complex.ofReal_re, Complex.ofReal_im, Complex.I_re, Complex.I_im, Complex.mul_re, Complex.mul_im] at tc_3\n  simp only [tc_1] at *\n  simp at l1\n  rw [add_pow_two, sub_pow_two] at l1\n  simp only [add_mul, sub_mul, mul_one, one_mul] at l1\n  ring_nf at l1\n  simp at l1\n  linear_combination l1 / 2", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 2, "endLine": 13, "endColumn": 150, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations correctly specify types for complex number z and real numbers x, y", "Complex number representation tc_1 correctly uses Lean's complex number notation with y * I representing iy", "Modulus equality condition tc_2 properly uses Complex.abs for absolute value and I for imaginary unit", "Modulus constraint tc_3 correctly represents |z| = \u221a2 using Complex.abs and Real.sqrt", "Algebraic equation l1 is an exact syntactic and semantic match", "Conclusion l2 exactly matches the natural language statement x + y = 0", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2) :\n  \u00ac (x + y = 0) := by\n  rw [tc_1] at tc_2 tc_3\n  simp only [Complex.add_re, Complex.add_im, Complex.ofReal_re, Complex.ofReal_im, Complex.I_re, Complex.I_im,\n    Complex.abs, Complex.normSq, Complex.mul_re, Complex.mul_im, Complex.sub_re, Complex.sub_im] at tc_2 tc_3\n  simp only [pow_two] at tc_2 tc_3 l1\n  intro h\n  have : x = -1 := by\n    linear_combination (1) h\n  have : y = 1 := by\n    linear_combination (1) h\n  rw [this] at tc_3\n  simp at tc_3\n  norm_num at tc_3"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "The condition $|z|=\\sqrt{2}$ implies $x^2+y^2=2$.", "statement": "We assume:\n\u2022 z is a complex number such that z = x + iy for real numbers x, y [tc_1]\n\u2022 |z+1| = |z-i| [tc_2]\n\u2022 |z| = sqrt(2) [tc_3]\n\u2022 (x+1)^2 + y^2 = x^2 + (y-1)^2 [l1]\n\u2022 x + y = 0 [l2]\nTherefore, we conclude:\n\u2022 x^2 + y^2 = 2 [l3].", "dependencies": ["tc_1", "tc_2", "tc_3", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0) :\n  x^2 + y^2 = 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0) :\n  x^2 + y^2 = 2 := by\n  have h : Complex.normSq z = x^2 + y^2 := by\n    rw [tc_1]\n    simp [Complex.normSq_add_mul_I]\n  rw [\u2190 Complex.abs_apply, tc_3, Real.sq_sqrt (by norm_num)] at h\n  exact h.symm", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 4, "endLine": 15, "endColumn": 35, "data": "simp made no progress"}, {"line": 16, "column": 6, "endLine": 16, "endColumn": 25, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u221a(Complex.normSq ?m.21273)\nI z : \u2102\nx y : \u211d\ntc_1 : z = \u2191x + \u2191y * I\ntc_2 : Complex.abs (z + 1) = Complex.abs (z - I)\ntc_3 : Complex.abs z = \u221a2\nl1 : (x + 1) ^ 2 + y ^ 2 = x ^ 2 + (y - 1) ^ 2\nl2 : x + y = 0\nh : Complex.normSq z = x ^ 2 + y ^ 2\n\u22a2 x ^ 2 + y ^ 2 = 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all the mathematical content from the natural language. The complex number representation z = x + y * I is mathematically equivalent to z = x + iy. All conditions (tc_1, tc_2, tc_3, l1, l2) are properly formalized as hypotheses, and the conclusion (l3) is correctly stated as the goal. The type declarations for complex and real numbers are appropriate additions that don't change the logical meaning. The overall structure as a lemma with hypotheses and conclusion accurately reflects the natural language reasoning.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma neg_l3\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : abs (z + 1) = abs (z - I))\n  (tc_3 : abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0) :\n  \u00ac(x^2 + y^2 = 2) := by\n  rw [tc_1] at tc_3\n  simp only [abs_add, abs_ofReal, abs_I, normSq_eq_abs] at tc_3\n  rw [Real.sqrt_eq_iff_sq_eq] at tc_3\n  \u00b7 rw [l2] at tc_3\n    simp at tc_3\n    norm_num at tc_3\n    exact tc_3\n  \u00b7 exact Real.sqrt_nonneg _\n  \u00b7 exact le_of_eq rfl"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "By substituting $y=-x$ into the second equation, we get $x^2+(-x)^2=2$", "statement": "We assume:\n\u2022 z is a complex number such that z = x + iy for real numbers x, y [tc_1]\n\u2022 |z+1| = |z-i| [tc_2]\n\u2022 |z| = sqrt(2) [tc_3]\n\u2022 (x+1)^2 + y^2 = x^2 + (y-1)^2 [l1]\n\u2022 x + y = 0 [l2]\n\u2022 x^2 + y^2 = 2 [l3]\nTherefore, we conclude:\n\u2022 x^2 + (-x)^2 = 2 [l4].", "dependencies": ["tc_1", "tc_2", "tc_3", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0)\n  (l3 : x^2 + y^2 = 2) :\n  x^2 + (-x)^2 = 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0)\n  (l3 : x^2 + y^2 = 2) :\n  x^2 + (-x)^2 = 2 := by\n  have h : y = -x := by linarith [l2]\n  rw [h] at l3\n  simp at l3\n  rw [\u2190 l3]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 5}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Complex number definition correctly uses Lean's complex number notation with I for the imaginary unit", "Absolute value condition perfectly translated using Complex.abs function", "Magnitude condition correctly uses Real.sqrt for square root", "Algebraic equation l1 is exactly reproduced", "Linear equation l2 is exactly reproduced", "Constraint l3 is exactly reproduced", "Conclusion l4 is exactly reproduced with proper negation syntax"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "which simplifies to $x^2=1$.", "statement": "We assume:\n\u2022 z is a complex number such that z = x + iy for real numbers x, y [tc_1]\n\u2022 |z+1| = |z-i| [tc_2]\n\u2022 |z| = sqrt(2) [tc_3]\n\u2022 (x+1)^2 + y^2 = x^2 + (y-1)^2 [l1]\n\u2022 x + y = 0 [l2]\n\u2022 x^2 + y^2 = 2 [l3]\n\u2022 x^2 + (-x)^2 = 2 [l4]\nTherefore, we conclude:\n\u2022 x^2 = 1 [l5].", "dependencies": ["tc_1", "tc_2", "tc_3", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0)\n  (l3 : x^2 + y^2 = 2)\n  (l4 : x^2 + (-x)^2 = 2) :\n  x^2 = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0)\n  (l3 : x^2 + y^2 = 2)\n  (l4 : x^2 + (-x)^2 = 2) :\n  x^2 = 1 := by\n  rw [\u2190 l4, neg_pow, pow_two] at l4\n  simp only [mul_one, neg_mul, neg_neg] at l4\n  rw [\u2190 two_mul] at l4\n  rw [mul_eq_mul_left_iff] at l4\n  cases l4 with\n  | inl h => rw [h]; simp\n  | inr h => \n    rw [h] at l3\n    simp at l3\n    exact l3", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 17, "column": 6, "endLine": 17, "endColumn": 15, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?n + ?n\nI z : \u2102\nx y : \u211d\ntc_1 : z = \u2191x + \u2191y * I\ntc_2 : Complex.abs (z + 1) = Complex.abs (z - I)\ntc_3 : Complex.abs z = \u221a2\nl1 : (x + 1) ^ 2 + y ^ 2 = x ^ 2 + (y - 1) ^ 2\nl2 : x + y = 0\nl3 : x ^ 2 + y ^ 2 = 2\nl4 : True\n\u22a2 x ^ 2 = 1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The complex number representation z = x + y * I correctly captures z = x + iy with proper Lean syntax for the imaginary unit", "The absolute value condition |z+1| = |z-i| is perfectly translated using Complex.abs", "The magnitude condition |z| = sqrt(2) is correctly formalized with appropriate type specifications", "The algebraic equation (x+1)^2 + y^2 = x^2 + (y-1)^2 is exactly preserved", "The linear constraint x + y = 0 is directly translated", "The Pythagorean-like equation x^2 + y^2 = 2 matches exactly", "The equation x^2 + (-x)^2 = 2 is preserved with proper parentheses", "The conclusion x^2 = 1 is correctly stated as the goal to prove", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0)\n  (l3 : x^2 + y^2 = 2)\n  (l4 : x^2 + (-x)^2 = 2) :\n  \u00ac (x^2 = 1) := by\n  have h : x^2 = 1 := by\n    rw [l2] at l3\n    simp at l3\n    rw [mul_comm, \u2190 two_mul] at l3\n    rw [mul_left_inj' (two_ne_zero)] at l3\n    exact l3\n  intro h'\n  have : 1 = 2 := by\n    rw [\u2190 h, \u2190 l3]\n    rw [l2] at l3\n    simp at l3\n    exact l3\n  norm_num at this"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "We express $z^2$ in terms of $x$ using $y=-x$: $z^2 = (x+iy)^2 = x^2-y^2+2ixy = x^2-(-x)^2+2ix(-x) = -2ix^2$.", "statement": "We assume:\n\u2022 z is a complex number such that z = x + iy for real numbers x, y [tc_1]\n\u2022 |z+1| = |z-i| [tc_2]\n\u2022 |z| = sqrt(2) [tc_3]\n\u2022 (x+1)^2 + y^2 = x^2 + (y-1)^2 [l1]\n\u2022 x + y = 0 [l2]\n\u2022 x^2 + y^2 = 2 [l3]\n\u2022 x^2 + (-x)^2 = 2 [l4]\n\u2022 x^2 = 1 [l5]\nTherefore, we conclude:\n\u2022 z^2 = -2*i*x^2 [l6].", "dependencies": ["tc_1", "tc_2", "tc_3", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0)\n  (l3 : x^2 + y^2 = 2)\n  (l4 : x^2 + (-x)^2 = 2)\n  (l5 : x^2 = 1) :\n  z^2 = -2 * I * x^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0)\n  (l3 : x^2 + y^2 = 2)\n  (l4 : x^2 + (-x)^2 = 2)\n  (l5 : x^2 = 1) :\n  z^2 = -2 * I * x^2 := by\n  rw [tc_1, pow_two]\n  ring_nf\n  rw [\u2190 l2]\n  simp only [mul_neg, neg_mul, neg_neg]\n  rw [mul_assoc, \u2190 pow_two, l5]\n  norm_num\n  simp [I_sq]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 6, "endLine": 18, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  0\nI z : \u2102\nx y : \u211d\ntc_1 : z = \u2191x + \u2191y * I\ntc_2 : Complex.abs (z + 1) = Complex.abs (z - I)\ntc_3 : Complex.abs z = \u221a2\nl1 : (x + 1) ^ 2 + y ^ 2 = x ^ 2 + (y - 1) ^ 2\nl2 : x + y = 0\nl3 : x ^ 2 + y ^ 2 = 2\nl4 : x ^ 2 + (-x) ^ 2 = 2\nl5 : x ^ 2 = 1\n\u22a2 \u2191x * \u2191y * I * 2 + \u2191x ^ 2 + \u2191y ^ 2 * I ^ 2 = -(\u2191x ^ 2 * I * 2)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical relationships and logical components from the natural language. The differences are purely notational: 'i' vs 'I' for the imaginary unit, 'x + iy' vs 'x + y * I' for complex representation, and multiplication order in the final expression. All semantic meaning is preserved, including the complex number constraints, absolute value relationships, algebraic derivations, and the final conclusion. The explicit type declarations in Lean (\u2102, \u211d) appropriately formalize the natural language specification of complex and real numbers.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l6\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0)\n  (l3 : x^2 + y^2 = 2)\n  (l4 : x^2 + (-x)^2 = 2)\n  (l5 : x^2 = 1) :\n  \u00ac (z^2 = -2 * I * x^2) := by\n  rw [tc_1]\n  simp\n  rw [l2] at *\n  simp\n  rw [l5]\n  norm_num\n  simp\n  rw [mul_assoc, \u2190 mul_assoc I x, I_mul_I]\n  simp\n  rw [mul_neg, \u2190 mul_assoc, neg_mul, one_mul]\n  simp\n  rw [\u2190 neg_mul, neg_eq_iff_eq_neg]\n  intro h\n  have : x = 0 := by\n    rw [\u2190 neg_eq_zero]\n    apply_fun (\u00b7 * x) at h\n    simp at h\n    rw [mul_zero] at h\n    exact h\n  rw [this] at l5\n  simp at l5"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Finally, substituting $x^2=1$ into this expression yields $z^2=-2i$.", "statement": "We assume:\n\u2022 z is a complex number such that z = x + iy for real numbers x, y [tc_1]\n\u2022 |z+1| = |z-i| [tc_2]\n\u2022 |z| = sqrt(2) [tc_3]\n\u2022 (x+1)^2 + y^2 = x^2 + (y-1)^2 [l1]\n\u2022 x + y = 0 [l2]\n\u2022 x^2 + y^2 = 2 [l3]\n\u2022 x^2 + (-x)^2 = 2 [l4]\n\u2022 x^2 = 1 [l5]\n\u2022 z^2 = -2*i*x^2 [l6]\nTherefore, we conclude:\n\u2022 z^2 = -2*i [ts_1].", "dependencies": ["tc_1", "tc_2", "tc_3", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0)\n  (l3 : x^2 + y^2 = 2)\n  (l4 : x^2 + (-x)^2 = 2)\n  (l5 : x^2 = 1)\n  (l6 : z^2 = -2 * I * x^2) :\n  z^2 = -2 * I := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - I))\n  (tc_3 : Complex.abs z = Real.sqrt 2)\n  (l1 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (l2 : x + y = 0)\n  (l3 : x^2 + y^2 = 2)\n  (l4 : x^2 + (-x)^2 = 2)\n  (l5 : x^2 = 1)\n  (l6 : z^2 = -2 * I * x^2) :\n  z^2 = -2 * I := by\n  rw [l6]\n  norm_cast\n  rw [l5]\n  simp", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["tc_1: 'z = x + iy' and 'z = x + y * I' are mathematically equivalent representations of the same complex number", "tc_2: The condition |z+1| = |z-i| is identically represented in both versions", "tc_3: The condition |z| = sqrt(2) matches exactly", "l1: The equation (x+1)^2 + y^2 = x^2 + (y-1)^2 is identical in both", "l2: The equation x + y = 0 matches perfectly", "l3: The equation x^2 + y^2 = 2 is identical", "l4: The equation x^2 + (-x)^2 = 2 matches exactly", "l5: The equation x^2 = 1 is identical", "l6: The equation z^2 = -2*i*x^2 vs z^2 = -2 * I * x^2 uses equivalent notation for the imaginary unit", "ts_1: The conclusion z^2 = -2*i vs z^2 = -2 * I represents the same mathematical statement", "The Lean formalization includes appropriate type declarations and captures all logical components from the natural language"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    