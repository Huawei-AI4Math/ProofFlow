
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for all real numbers $x$ and $y$, the following inequality holds: $3(x+y+1)^{2}+1 \geq 3 x y$.

Proof: We want to prove that $3(x+y+1)^{2}+1 \geq 3xy$ for all real numbers $x,y$. Observe first that for any real numbers $a,b$, the identity $(a+	frac{b}{2})^2+	frac{3b^2}{4}=a^2+ab+b^2$ shows that $a^2+ab+b^2\geq 0$, since both terms on the left are non-negative. Now set $a=x+	frac{2}{3}$ and $b=y+	frac{2}{3}$. Substituting into this inequality gives $(x+	frac{2}{3})^2+(x+	frac{2}{3})(y+	frac{2}{3})+(y+	frac{2}{3})^2\geq 0$. Expanding and simplifying yields $x^2+y^2+xy+2x+2y+	frac{4}{3}\geq 0$, and multiplying through by 3 gives $3x^2+3y^2+3xy+6x+6y+4\geq 0$. On the other hand, expanding the left-hand side of the target inequality gives $3(x+y+1)^2+1=3x^2+3y^2+6xy+6x+6y+4$. Subtracting $3xy$ from this expression gives exactly $3x^2+3y^2+3xy+6x+6y+4$, which we have already shown is non-negative. Therefore, $3(x+y+1)^2+1\geq 3xy$ holds for all real $x,y$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for all real numbers $x$ and $y$", "statement": "Premise:\n\u2022 x and y are real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (x y : \u211d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean variable declaration `(x y : \u211d)` directly and correctly captures that x and y are real numbers", "Both the natural language and Lean code contain no conclusions or propositions, only the premise conditions"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "Observe first that for any real numbers $a,b$, the identity $(a+\\frac{b}{2})^2+\\frac{3b^2}{4}=a^2+ab+b^2$ shows that $a^2+ab+b^2\\geq 0$, since both terms on the left are non-negative.", "statement": "We assume:\n\u2022 a and b are real numbers.\nTherefore, we conclude:\n\u2022 $(a + \\frac{b}{2})^2 + \\frac{3b^2}{4} = a^2+ab+b^2$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b : \u211d) :\n  (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b : \u211d) :\n  (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2 := by\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures both the assumptions (a and b are real numbers) and the conclusion (the mathematical equation). The mathematical expressions are equivalent between the natural language and Lean versions, with appropriate translation of mathematical notation to Lean syntax. The logical structure is preserved with assumptions as hypotheses and the equation as the lemma statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Observe first that for any real numbers $a,b$, the identity $(a+\\frac{b}{2})^2+\\frac{3b^2}{4}=a^2+ab+b^2$ shows that $a^2+ab+b^2\\geq 0$, since both terms on the left are non-negative.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a,b, $(a + \\frac{b}{2})^2 + \\frac{3b^2}{4} = a^2+ab+b^2$ [l1].\nTherefore, we conclude:\n\u2022 For any real numbers a,b, $a^2+ab+b^2 \\geq 0$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b : \u211d)\n  (l1 : (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) :\n  a^2 + a * b + b^2 \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b : \u211d)\n  (l1 : (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) :\n  a^2 + a * b + b^2 \u2265 0 := by\n  rw [\u2190 l1]\n  have h : (a + b / 2)^2 \u2265 0 := by apply pow_two_nonneg\n  have h' : 3 * b^2 / 4 \u2265 0 := by\n    apply div_nonneg\n    . nlinarith\n    . linarith\n  linarith [h, h']", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.75, "semantic_feedback": ["The natural language mentions variables x and y as real numbers, but the Lean formalization uses variables a and b. This is a minor notational difference that doesn't affect the logical meaning.", "The algebraic identity is perfectly captured in Lean with the correct mathematical expression and quantification structure.", "The conclusion about non-negativity is exactly represented in the Lean formalization.", "The logical flow from assumption l1 to conclusion l2 is correctly structured in Lean as a hypothesis leading to a goal."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Now set $a=x+\\frac{2}{3}$ and $b=y+\\frac{2}{3}$. Substituting into this inequality gives $(x+\\frac{2}{3})^2+(x+\\frac{2}{3})(y+\\frac{2}{3})+(y+\\frac{2}{3})^2\\geq 0$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a,b, $(a + \\frac{b}{2})^2 + \\frac{3b^2}{4} = a^2+ab+b^2$ [l1];\n\u2022 For any real numbers a,b, $a^2+ab+b^2 \\geq 0$ [l2].\nTherefore, we conclude:\n\u2022 $(x+\\frac{2}{3})^2+(x+\\frac{2}{3})(y+\\frac{2}{3})+(y+\\frac{2}{3})^2\\geq 0$ [l3].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (x y : \u211d)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0) :\n  (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (x y : \u211d)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0) :\n  (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0 := by\n  apply l2 (x + 2/3) (y + 2/3)\n  exact l1 (x + 2/3) (y + 2/3)", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations correctly capture that x and y are real numbers.", "The first assumption l1 is correctly formalized as a universal equality statement over real numbers a and b.", "The second assumption l2 has a major logical inconsistency. The natural language states it as a direct universal statement '\u2200 a b : \u211d, a^2 + a*b + b^2 \u2265 0', but the Lean formalization makes it conditional on l1, changing it to an implication '\u2200 a b : \u211d, (l1_condition \u2192 inequality)'. This fundamentally alters the logical structure.", "The conclusion l3 is correctly formalized with the proper mathematical expression and inequality."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations correctly capture that x and y are real numbers.', 'The first assumption l1 is correctly formalized as a universal equality statement over real numbers a and b.', \"The second assumption l2 has a major logical inconsistency. The natural language states it as a direct universal statement '\u2200 a b : \u211d, a^2 + a*b + b^2 \u2265 0', but the Lean formalization makes it conditional on l1, changing it to an implication '\u2200 a b : \u211d, (l1_condition \u2192 inequality)'. This fundamentally alters the logical structure.\", 'The conclusion l3 is correctly formalized with the proper mathematical expression and inequality.']"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Expanding and simplifying yields $x^2+y^2+xy+2x+2y+\\frac{4}{3}\\geq 0$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a,b, $(a + \\frac{b}{2})^2 + \\frac{3b^2}{4} = a^2+ab+b^2$ [l1];\n\u2022 For any real numbers a,b, $a^2+ab+b^2 \\geq 0$ [l2];\n\u2022 $(x+\\frac{2}{3})^2+(x+\\frac{2}{3})(y+\\frac{2}{3})+(y+\\frac{2}{3})^2\\geq 0$ [l3].\nTherefore, we conclude:\n\u2022 $x^2+y^2+xy+2x+2y+\\frac{4}{3}\\geq 0$ [l4].", "dependencies": ["tc_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (x y : \u211d)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0)\n  (l3 : (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0) :\n  x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (x y : \u211d)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0)\n  (l3 : (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0) :\n  x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0 := by\n  have h1 : (x + 2/3)^2 + (x + 2/3)*(y + 2/3) + (y + 2/3)^2 = x^2 + y^2 + x*y + 2*x + 2*y + 4/3 := by\n    ring\n  rw [\u2190 h1]\n  exact l3", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations for x and y as real numbers are correctly captured in both versions.", "The mathematical identity l1 is accurately translated with proper operator precedence and notation.", "The assumption l2 has a major logical inconsistency. The natural language presents it as an independent universal statement about non-negativity of the quadratic form, while Lean makes it conditional on l1. This changes the logical structure from an assumption to a conditional statement.", "The specific inequality l3 is correctly formalized with proper parentheses and mathematical operations.", "The conclusion l4 is accurately represented with all terms and coefficients matching the natural language expression."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations for x and y as real numbers are correctly captured in both versions.', 'The mathematical identity l1 is accurately translated with proper operator precedence and notation.', 'The assumption l2 has a major logical inconsistency. The natural language presents it as an independent universal statement about non-negativity of the quadratic form, while Lean makes it conditional on l1. This changes the logical structure from an assumption to a conditional statement.', 'The specific inequality l3 is correctly formalized with proper parentheses and mathematical operations.', 'The conclusion l4 is accurately represented with all terms and coefficients matching the natural language expression.']"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "and multiplying through by 3 gives $3x^2+3y^2+3xy+6x+6y+4\\geq 0$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a,b, $(a + \\frac{b}{2})^2 + \\frac{3b^2}{4} = a^2+ab+b^2$ [l1];\n\u2022 For any real numbers a,b, $a^2+ab+b^2 \\geq 0$ [l2];\n\u2022 $(x+\\frac{2}{3})^2+(x+\\frac{2}{3})(y+\\frac{2}{3})+(y+\\frac{2}{3})^2\\geq 0$ [l3];\n\u2022 $x^2+y^2+xy+2x+2y+\\frac{4}{3}\\geq 0$ [l4].\nTherefore, we conclude:\n\u2022 $3x^2+3y^2+3xy+6x+6y+4 \\geq 0$ [l5].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (x y : \u211d)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0)\n  (l3 : (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0) :\n  3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (x y : \u211d)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0)\n  (l3 : (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0) :\n  3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0 := by\n  have h : 3 * (x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3) = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 := by ring\n  rw [\u2190h]\n  exact mul_nonneg (by norm_num) l4", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations x and y as real numbers are correctly formalized.", "The mathematical identity l1 is perfectly captured with correct quantification and equation structure.", "The assumption l2 has a major inconsistency. The natural language states a direct inequality 'a\u00b2+ab+b\u00b2 \u2265 0' for any real numbers a,b, but the Lean version makes this conditional on the identity from l1, changing it to an implication rather than a standalone assumption.", "The inequality l3 involving (x+2/3) terms is correctly formalized.", "The inequality l4 with the specific polynomial expression is correctly formalized.", "The conclusion l5 with the scaled polynomial inequality is correctly formalized."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations x and y as real numbers are correctly formalized.', 'The mathematical identity l1 is perfectly captured with correct quantification and equation structure.', \"The assumption l2 has a major inconsistency. The natural language states a direct inequality 'a\u00b2+ab+b\u00b2 \u2265 0' for any real numbers a,b, but the Lean version makes this conditional on the identity from l1, changing it to an implication rather than a standalone assumption.\", 'The inequality l3 involving (x+2/3) terms is correctly formalized.', 'The inequality l4 with the specific polynomial expression is correctly formalized.', 'The conclusion l5 with the scaled polynomial inequality is correctly formalized.']"}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "On the other hand, expanding the left-hand side of the target inequality gives $3(x+y+1)^2+1=3x^2+3y^2+6xy+6x+6y+4$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a,b, $(a + \\frac{b}{2})^2 + \\frac{3b^2}{4} = a^2+ab+b^2$ [l1];\n\u2022 For any real numbers a,b, $a^2+ab+b^2 \\geq 0$ [l2];\n\u2022 $(x+\\frac{2}{3})^2+(x+\\frac{2}{3})(y+\\frac{2}{3})+(y+\\frac{2}{3})^2\\geq 0$ [l3];\n\u2022 $x^2+y^2+xy+2x+2y+\\frac{4}{3}\\geq 0$ [l4];\n\u2022 $3x^2+3y^2+3xy+6x+6y+4 \\geq 0$ [l5].\nTherefore, we conclude:\n\u2022 $3(x+y+1)^2+1 = 3x^2+3y^2+6xy+6x+6y+4$ [l6].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (x y : \u211d)\n  (tc_1 : True)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0)\n  (l3 : (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0)\n  (l5 : 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0) :\n  3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (x y : \u211d)\n  (tc_1 : True)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0)\n  (l3 : (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0)\n  (l5 : 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0) :\n  3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4 := by\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.86, "semantic_feedback": ["Variable declarations match correctly between natural language and Lean", "The algebraic identity is perfectly captured in both versions", "The Lean formalization adds an unnecessary implication condition. Natural language states the inequality directly for any real numbers a,b, while Lean makes it conditional on the equation from l1", "The inequality involving (x+2/3) terms matches exactly", "The inequality l4 is perfectly translated", "The inequality l5 is perfectly translated", "The conclusion l6 equality is perfectly captured"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "Subtracting $3xy$ from this expression gives exactly $3x^2+3y^2+3xy+6x+6y+4$, which we have already shown is non-negative.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a,b, $(a + \\frac{b}{2})^2 + \\frac{3b^2}{4} = a^2+ab+b^2$ [l1];\n\u2022 For any real numbers a,b, $a^2+ab+b^2 \\geq 0$ [l2];\n\u2022 $(x+\\frac{2}{3})^2+(x+\\frac{2}{3})(y+\\frac{2}{3})+(y+\\frac{2}{3})^2\\geq 0$ [l3];\n\u2022 $x^2+y^2+xy+2x+2y+\\frac{4}{3}\\geq 0$ [l4];\n\u2022 $3x^2+3y^2+3xy+6x+6y+4 \\geq 0$ [l5];\n\u2022 $3(x+y+1)^2+1 = 3x^2+3y^2+6xy+6x+6y+4$ [l6].\nTherefore, we conclude:\n\u2022 $3(x+y+1)^2+1 - 3xy = 3x^2+3y^2+3xy+6x+6y+4$ [l7].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (x y : \u211d)\n  (tc_1 : True)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0)\n  (l3 : (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0)\n  (l5 : 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0)\n  (l6 : 3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4) :\n  3 * (x + y + 1)^2 + 1 - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (x y : \u211d)\n  (tc_1 : True)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0)\n  (l3 : (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0)\n  (l5 : 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0)\n  (l6 : 3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4) :\n  3 * (x + y + 1)^2 + 1 - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 := by\n  rw [l6]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations correctly match - x and y as real numbers", "tc_1 is labeled differently but this is a minor structural difference", "Lemma l1 formula matches exactly between natural language and Lean", "Lemma l2 has a major inconsistency - natural language states 'a\u00b2+ab+b\u00b2 \u2265 0' as a standalone fact, but Lean makes it conditional on l1 with an implication arrow", "Lemma l3 formula matches exactly accounting for notation differences", "Lemma l4 formula matches exactly accounting for notation differences", "Lemma l5 formula matches exactly accounting for notation differences", "Lemma l6 formula matches exactly accounting for notation differences", "Conclusion l7 matches exactly between natural language and Lean formalization"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations correctly match - x and y as real numbers', 'tc_1 is labeled differently but this is a minor structural difference', 'Lemma l1 formula matches exactly between natural language and Lean', \"Lemma l2 has a major inconsistency - natural language states 'a\u00b2+ab+b\u00b2 \u2265 0' as a standalone fact, but Lean makes it conditional on l1 with an implication arrow\", 'Lemma l3 formula matches exactly accounting for notation differences', 'Lemma l4 formula matches exactly accounting for notation differences', 'Lemma l5 formula matches exactly accounting for notation differences', 'Lemma l6 formula matches exactly accounting for notation differences', 'Conclusion l7 matches exactly between natural language and Lean formalization']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "which we have already shown is non-negative. Therefore, $3(x+y+1)^2+1\\geq 3xy$ holds for all real $x,y$.", "statement": "We assume:\n\u2022 x and y are real numbers [tc_1];\n\u2022 For any real numbers a,b, $(a + \\frac{b}{2})^2 + \\frac{3b^2}{4} = a^2+ab+b^2$ [l1];\n\u2022 For any real numbers a,b, $a^2+ab+b^2 \\geq 0$ [l2];\n\u2022 $(x+\\frac{2}{3})^2+(x+\\frac{2}{3})(y+\\frac{2}{3})+(y+\\frac{2}{3})^2\\geq 0$ [l3];\n\u2022 $x^2+y^2+xy+2x+2y+\\frac{4}{3}\\geq 0$ [l4];\n\u2022 $3x^2+3y^2+3xy+6x+6y+4 \\geq 0$ [l5];\n\u2022 $3(x+y+1)^2+1 = 3x^2+3y^2+6xy+6x+6y+4$ [l6];\n\u2022 $3(x+y+1)^2+1 - 3xy = 3x^2+3y^2+3xy+6x+6y+4$ [l7].\nTherefore, we conclude:\n\u2022 $3(x+y+1)^2+1 \\geq 3xy$ [ts_1].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (x y : \u211d)\n  (tc_1 : True)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0)\n  (l3 : (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0)\n  (l5 : 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0)\n  (l6 : 3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4)\n  (l7 : 3 * (x + y + 1)^2 + 1 - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4) :\n  3 * (x + y + 1)^2 + 1 \u2265 3 * x * y := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (x y : \u211d)\n  (tc_1 : True)\n  (l1 : \u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2)\n  (l2 : \u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0)\n  (l3 : (x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0)\n  (l4 : x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0)\n  (l5 : 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0)\n  (l6 : 3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4)\n  (l7 : 3 * (x + y + 1)^2 + 1 - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4) :\n  3 * (x + y + 1)^2 + 1 \u2265 3 * x * y := by\n  have h : 3 * (x + y + 1)^2 + 1 - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 := l7\n  rw [\u2190sub_nonneg, h]\n  exact l5", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 17, "column": 6, "endLine": 17, "endColumn": 17, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?m.37826 \u2264 ?m.37825\nx y : \u211d\ntc_1 : True\nl1 : \u2200 (a b : \u211d), (a + b / 2) ^ 2 + 3 * b ^ 2 / 4 = a ^ 2 + a * b + b ^ 2\nl2 : \u2200 (a b : \u211d), (a + b / 2) ^ 2 + 3 * b ^ 2 / 4 = a ^ 2 + a * b + b ^ 2 \u2192 a ^ 2 + a * b + b ^ 2 \u2265 0\nl3 : (x + 2 / 3) ^ 2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3) ^ 2 \u2265 0\nl4 : x ^ 2 + y ^ 2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0\nl5 : 3 * x ^ 2 + 3 * y ^ 2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0\nl6 : 3 * (x + y + 1) ^ 2 + 1 = 3 * x ^ 2 + 3 * y ^ 2 + 6 * x * y + 6 * x + 6 * y + 4\nl7 h : 3 * (x + y + 1) ^ 2 + 1 - 3 * x * y = 3 * x ^ 2 + 3 * y ^ 2 + 3 * x * y + 6 * x + 6 * y + 4\n\u22a2 3 * (x + y + 1) ^ 2 + 1 \u2265 3 * x * y"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations match perfectly - both declare x and y as real numbers.", "The algebraic identity is correctly formalized with equivalent mathematical expressions.", "The Lean formalization adds an unnecessary implication condition. The natural language states the inequality directly for any real a,b, while Lean makes it conditional on the equality from l1.", "The inequality involving (x+2/3) terms is perfectly captured in both versions.", "The inequality x\u00b2+y\u00b2+xy+2x+2y+4/3\u22650 matches exactly between natural language and Lean.", "The inequality 3x\u00b2+3y\u00b2+3xy+6x+6y+4\u22650 is correctly formalized.", "The equality 3(x+y+1)\u00b2+1 = 3x\u00b2+3y\u00b2+6xy+6x+6y+4 is perfectly captured.", "The equality 3(x+y+1)\u00b2+1-3xy = 3x\u00b2+3y\u00b2+3xy+6x+6y+4 is correctly formalized.", "The final conclusion 3(x+y+1)\u00b2+1\u22653xy is perfectly matched in both versions.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.89 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_1 :\n    \u2203 (x y : \u211d),\n    (\u2200 (a b : \u211d), (a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192\n    (\u2200 (a b : \u211d), ((a + b / 2)^2 + 3 * b^2 / 4 = a^2 + a * b + b^2) \u2192 a^2 + a * b + b^2 \u2265 0) \u2192\n    ((x + 2 / 3)^2 + (x + 2 / 3) * (y + 2 / 3) + (y + 2 / 3)^2 \u2265 0) \u2192\n    (x^2 + y^2 + x * y + 2 * x + 2 * y + 4 / 3 \u2265 0) \u2192\n    (3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4 \u2265 0) \u2192\n    (3 * (x + y + 1)^2 + 1 = 3 * x^2 + 3 * y^2 + 6 * x * y + 6 * x + 6 * y + 4) \u2192\n    (3 * (x + y + 1)^2 + 1 - 3 * x * y = 3 * x^2 + 3 * y^2 + 3 * x * y + 6 * x + 6 * y + 4) \u2192\n    \u00ac (3 * (x + y + 1)^2 + 1 \u2265 3 * x * y) := by\n  exists -1, -1\n  intro l1 l2 l3 l4 l5 l6 l7\n  have h1 : 3 * (-1 + -1 + 1)^2 + 1 = 4 := by norm_num\n  have h2 : 3 * (-1) * (-1) = 3 := by norm_num\n  rw [h1, h2] at *\n  linarith"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    