
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z$ be a complex number. If $\operatorname{Re}(z) = 2$ and $\operatorname{Im}(z) = 3$, then $|e^{z^2}| = e^{-5}$.

Proof: From the conditions $\operatorname{Re}(z) = 2$ and $\operatorname{Im}(z) = 3$, we can write $z = 2+3i$. We then compute the square of $z$, which is $z^2 = (2+3i)^2 = -5+12i$. Now we consider the expression $e^{z^2}$, which is $e^{-5+12i}$. The modulus of a complex exponential $e^{a+ib}$ is $e^a$, so we find that $|e^{z^2}| = |e^{-5+12i}| = e^{-5}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z$ be a complex number. If $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$", "statement": "Premise:\n\u2022 $z$ is a complex number such that $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102)\n(tc_1 : z.re = 2 \u2227 z.im = 3)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'variable (z : \u2102)' correctly captures that z is a complex number", "The Lean condition 'z.re = 2' in the conjunction perfectly matches the natural language condition Re(z) = 2", "The Lean condition 'z.im = 3' in the conjunction perfectly matches the natural language condition Im(z) = 3"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "From the conditions $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$, we can write $z = 2+3i$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$ [tc_1].\nTherefore, we conclude:\n\u2022 $z = 2 + 3i$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102)\n  (tc_1 : z.re = 2 \u2227 z.im = 3) :\n  z = 2 + 3 * I := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102)\n  (tc_1 : z.re = 2 \u2227 z.im = 3) :\n  z = 2 + 3 * I := by\n  apply Complex.ext\n  simp [tc_1.left]\n  simp [tc_1.right]\n  rw [Complex.add_im, Complex.mul_im, Complex.I_im]\n  simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 2, "endLine": 11, "endColumn": 19, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The variable declaration correctly captures z as a complex number in both representations.", "The assumptions about real and imaginary parts are perfectly translated, with z.re and z.im being the appropriate Lean notation for Re(z) and Im(z).", "The conclusion correctly represents z = 2 + 3i using Lean's notation where I is the imaginary unit and 3 * I represents 3i.", "The logical structure properly captures the implication from the given assumptions to the conclusion about z's explicit form.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1_neg\n  (z : \u2102)\n  (tc_1 : z.re = 2 \u2227 z.im = 3) :\n  \u00ac(z = 2 + 3 * I) := by\n  intro h\n  rw [h] at tc_1\n  simp at tc_1\n  have : (2 + 3 * I).re = 2 := by simp\n  have : (2 + 3 * I).im = 3 := by simp\n  simp [*] at tc_1"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "We then compute the square of $z$, which is $z^2 = (2+3i)^2 = -5+12i$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$ [tc_1];\n\u2022 $z = 2 + 3i$ [l1].\nTherefore, we conclude:\n\u2022 $z^2 = -5 + 12i$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z : \u2102)\n  (tc_1 : z.re = 2 \u2227 z.im = 3)\n  (l1 : z = 2 + 3 * I) :\n  z ^ 2 = -5 + 12 * I := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z : \u2102)\n  (tc_1 : z.re = 2 \u2227 z.im = 3)\n  (l1 : z = 2 + 3 * I) :\n  z ^ 2 = -5 + 12 * I := by\n  rw [l1]\n  simp only [pow_two]\n  ring_nf\n  rw [I_mul_I]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 6, "endLine": 13, "endColumn": 13, "data": "unknown identifier 'I_mul_I'"}, {"line": 13, "column": 6, "endLine": 13, "endColumn": 13, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.1960\nI z : \u2102\ntc_1 : z.re = 2 \u2227 z.im = 3\nl1 : z = 2 + 3 * I\n\u22a2 4 + I * 12 + I ^ 2 * 9 = -5 + I * 12"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declaration correctly captures z as a complex number", "The condition tc_1 perfectly translates the real and imaginary part constraints using appropriate Lean syntax", "The representation l1 correctly expresses z = 2 + 3i using Lean's complex number notation", "The conclusion correctly states the goal z\u00b2 = -5 + 12i with proper Lean exponentiation syntax", "The logical structure appropriately translates assumptions and conclusion into lemma format", "All mathematical content and relationships are preserved accurately between natural language and Lean formalization", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l2\n  (z : \u2102)\n  (tc_1 : z.re = 2 \u2227 z.im = 3)\n  (l1 : z = 2 + 3 * I) :\n  \u00ac (z ^ 2 = -5 + 12 * I) := by\n  rw [l1]\n  simp only [pow_two]\n  ring_nf\n  norm_num"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Now we consider the expression $e^{z^2}$, which is $e^{-5+12i}$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$ [tc_1];\n\u2022 $z = 2 + 3i$ [l1];\n\u2022 $z^2 = -5 + 12i$ [l2].\nTherefore, we conclude:\n\u2022 $e^{z^2} = e^{-5+12i}$ [l3].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102)\n  (tc_1 : z.re = 2 \u2227 z.im = 3)\n  (l1 : z = 2 + 3 * I)\n  (l2 : z ^ 2 = -5 + 12 * I) :\n  Complex.exp (z ^ 2) = Complex.exp (-5 + 12 * I) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102)\n  (tc_1 : z.re = 2 \u2227 z.im = 3)\n  (l1 : z = 2 + 3 * I)\n  (l2 : z ^ 2 = -5 + 12 * I) :\n  Complex.exp (z ^ 2) = Complex.exp (-5 + 12 * I) := by\n  rw [l2]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical content and logical structure from the natural language. The complex number operations, conditions on real/imaginary parts, and the exponential function conclusion are all properly represented using appropriate Lean syntax and library functions."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "The modulus of a complex exponential $e^{a+ib}$ is $e^a$", "statement": "We assume:\n\u2022 $z$ is a complex number such that $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$ [tc_1];\n\u2022 $z = 2 + 3i$ [l1];\n\u2022 $z^2 = -5 + 12i$ [l2];\n\u2022 $e^{z^2} = e^{-5+12i}$ [l3].\nTherefore, we conclude:\n\u2022 For any complex number $w = a+ib$ where a and b are real numbers, the modulus $|e^w|$ is equal to $e^a$ [l4].", "dependencies": ["tc_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (z w : \u2102) (a b : \u211d)\n  (tc_1 : z.re = 2 \u2227 z.im = 3)\n  (l1 : z = 2 + 3 * I)\n  (l2 : z ^ 2 = -5 + 12 * I)\n  (l3 : Complex.exp (z ^ 2) = Complex.exp (-5 + 12 * I))\n  (hw : w = a + b * I) :\n  Complex.abs (Complex.exp w) = Complex.exp a := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (z w : \u2102) (a b : \u211d)\n  (tc_1 : z.re = 2 \u2227 z.im = 3)\n  (l1 : z = 2 + 3 * I)\n  (l2 : z ^ 2 = -5 + 12 * I)\n  (l3 : Complex.exp (z ^ 2) = Complex.exp (-5 + 12 * I))\n  (hw : w = a + b * I) :\n  Complex.abs (Complex.exp w) = Complex.exp a := by\n  rw [hw, Complex.exp_add]\n  simp only [Complex.abs.map_mul, Complex.abs_exp_ofReal_mul_I, mul_one, Complex.abs_exp]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 49, "endLine": 14, "endColumn": 89, "data": "unsolved goals\nI z w : \u2102\na b : \u211d\ntc_1 : z.re = 2 \u2227 z.im = 3\nl1 : z = 2 + 3 * I\nl2 : z ^ 2 = -5 + 12 * I\nl3 : Complex.exp (z ^ 2) = Complex.exp (-5 + 12 * I)\nhw : w = \u2191a + \u2191b * I\n\u22a2 \u2191(rexp (\u2191a).re * rexp (\u2191b * I).re) = Complex.exp \u2191a"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations correctly capture all mentioned variables with proper types", "Condition tc_1 perfectly represents the real and imaginary part constraints", "Condition l1 correctly formalizes z = 2 + 3i using proper Lean syntax", "Condition l2 correctly represents z\u00b2 = -5 + 12i", "Condition l3 correctly formalizes the exponential equality", "The hw condition appropriately makes explicit the w = a + bi relationship", "The main conclusion correctly captures |e^w| = e^a, but the formalization includes irrelevant premises about z that don't affect the general theorem being stated", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.86 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma not_l4 :\n  \u00ac (\u2200 (z w : \u2102) (a b : \u211d),\n    (z.re = 2 \u2227 z.im = 3) \u2192\n    (z = 2 + 3 * I) \u2192\n    (z ^ 2 = -5 + 12 * I) \u2192\n    (Complex.exp (z ^ 2) = Complex.exp (-5 + 12 * I)) \u2192\n    (w = a + b * I) \u2192\n    Complex.abs (Complex.exp w) = Real.exp a) := by\n  intro h\n  let w := 1 + \u03c0 * I\n  have hw : w = 1 + \u03c0 * I := rfl\n  have := h (2 + 3 * I) w 1 \u03c0 (by simp) (by simp) (by simp) (by simp) hw\n  simp only [Complex.abs_exp, hw, Complex.ofReal_one, Complex.ofReal_pi, Complex.add_re, Complex.mul_re, Complex.I_re, Complex.I_im,\n    Complex.one_re, Complex.add_im, Complex.mul_im, Complex.one_im, Real.exp_ne_zero] at this\n  exact (ne_of_lt (Real.exp_pos 1)).symm this"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "so we find that $|e^{z^2}| = |e^{-5+12i}| = e^{-5}$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$ [tc_1];\n\u2022 $z = 2 + 3i$ [l1];\n\u2022 $z^2 = -5 + 12i$ [l2];\n\u2022 $e^{z^2} = e^{-5+12i}$ [l3];\n\u2022 For any complex number $w = a+ib$ where a and b are real numbers, the modulus $|e^w|$ is equal to $e^a$ [l4].\nTherefore, we conclude:\n\u2022 $|e^{z^2}| = e^{-5}$ [ts_1].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102)\n  (tc_1 : z.re = 2 \u2227 z.im = 3)\n  (l1 : z = 2 + 3 * I)\n  (l2 : z ^ 2 = -5 + 12 * I)\n  (l3 : Complex.exp (z ^ 2) = Complex.exp (-5 + 12 * I))\n  (l4 : \u2200 (w : \u2102) (a b : \u211d), w = a + b * I \u2192 Complex.abs (Complex.exp w) = Complex.exp a) :\n  Complex.abs (Complex.exp (z ^ 2)) = Complex.exp (-5) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102)\n  (tc_1 : z.re = 2 \u2227 z.im = 3)\n  (l1 : z = 2 + 3 * I)\n  (l2 : z ^ 2 = -5 + 12 * I)\n  (l3 : Complex.exp (z ^ 2) = Complex.exp (-5 + 12 * I))\n  (l4 : \u2200 (w : \u2102) (a b : \u211d), w = \u2191a + \u2191b * I \u2192 Complex.abs (Complex.exp w) = Complex.exp a) :\n  Complex.abs (Complex.exp (z ^ 2)) = Complex.exp (-5) := by\n  rw [l3]\n  rw [l4 (-5 + 12 * I) (-5) 12]\n  simp\n  norm_cast", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 4}, "score": {"semantic_score": 1.0, "semantic_feedback": ["tc_1 correctly captures the real and imaginary part conditions using conjunction", "l1 accurately represents the complex number equation using Lean's notation with I for the imaginary unit", "l2 properly formalizes the quadratic equation result", "l3 correctly represents the exponential equation, though it's somewhat redundant", "l4 accurately captures the general modulus property with proper universal quantification and implication structure", "The conclusion ts_1 is correctly stated as the goal to prove"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    