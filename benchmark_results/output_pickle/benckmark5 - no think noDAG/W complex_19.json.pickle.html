
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z = x+iy$ for real numbers $x,y$. If $|z - (2+i)| = \sqrt{5}$, $|z - (4+i)| = \sqrt{5}$, and $\operatorname{Im}(z) > 1$, then $z = 3+3i$.

Proof: From the condition $|z - (2+i)| = \sqrt{5}$ and the representation $z=x+iy$, we get the equation $(x-2)^2 + (y-1)^2 = 5$. Similarly, from $|z - (4+i)| = \sqrt{5}$, we get $(x-4)^2 + (y-1)^2 = 5$. Equating these two expressions gives $(x-2)^2 = (x-4)^2$, which simplifies to $x=3$. Substituting $x=3$ into the first equation results in $(3-2)^2 + (y-1)^2 = 5$, which simplifies to $(y-1)^2 = 4$, yielding the solutions $y=3$ or $y=-1$. Finally, using the condition $\operatorname{Im}(z)>1$ selects $y=3$, which combined with $x=3$ gives the result $z=3+3i$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z = x+iy$ for real numbers $x,y$.", "statement": "Premise:\n\u2022 z is a complex number represented as z = x+iy, where x and y are real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102) (x y : \u211d)\n(tc_1 : z = x + y * I)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `(z : \u2102)` perfectly captures that z is a complex number", "The Lean equation `z = x + y * I` correctly represents z = x + iy, where `I` is the imaginary unit in Lean's complex number notation", "The Lean declaration `(x y : \u211d)` correctly specifies that x is a real number", "The Lean declaration `(x y : \u211d)` correctly specifies that y is a real number"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "If $|z - (2+i)| = \\sqrt{5}$", "statement": "Premise:\n\u2022 z is a complex number represented as z = x+iy, where x and y are real numbers [tc_1];\n\u2022 The modulus of the complex number z - (2+i) is equal to \u221a5, i.e., |z - (2+i)| = sqrt(5) [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102) (x y : \u211d)\n(tc_1 : z = x + y * I)\n(tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the complex number representation. The variable declarations establish z as a complex number and x, y as real numbers, while tc_1 establishes the relationship z = x + y*I, which is equivalent to z = x + iy in mathematical notation.", "The Lean formalization correctly captures the modulus condition. Complex.abs represents the modulus operation, and the equation structure matches exactly with the mathematical statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "$|z - (4+i)| = \\sqrt{5}$", "statement": "Premise:\n\u2022 z is a complex number represented as z = x+iy, where x and y are real numbers [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 The modulus of the complex number z - (4+i) is equal to \u221a5, i.e., |z - (4+i)| = sqrt(5) [tc_3].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102) (x y : \u211d)\n(tc_1 : z = x + y * I)\n(tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n(tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that z is a complex number with z = x + iy where x and y are real. The notation 'y * I' in Lean is equivalent to 'iy' in mathematical notation, where I represents the imaginary unit.", "The Lean formalization correctly represents |z - (2+i)| = \u221a5 using Complex.abs for the modulus and Real.sqrt for the square root. The complex number (2+i) is represented as (2 + I) in Lean notation.", "The Lean formalization correctly represents |z - (4+i)| = \u221a5 using Complex.abs for the modulus and Real.sqrt for the square root. The complex number (4+i) is represented as (4 + I) in Lean notation."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_4": {"id": "tc_4", "natural_language": "$\\operatorname{Im}(z) > 1$", "statement": "Premise:\n\u2022 z is a complex number represented as z = x+iy, where x and y are real numbers [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 |z - (4+i)| = sqrt(5) [tc_3];\n\u2022 The imaginary part of z is greater than 1, i.e., Im(z) > 1 [tc_4].", "dependencies": ["tc_1", "tc_2", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.75, "semantic_feedback": ["The Lean formalization correctly declares z as a complex number, x and y as real numbers, and establishes z = x + y*I, which perfectly captures z = x+iy", "Complex.abs and Real.sqrt correctly formalize the absolute value and square root operations, matching |z - (2+i)| = \u221a5", "Complex.abs and Real.sqrt correctly formalize the absolute value and square root operations, matching |z - (4+i)| = \u221a5", "The condition Im(z) > 1 is represented as y > 1 in Lean. While mathematically equivalent (since y is the imaginary part of z = x + y*I), it's not a direct translation of the Im(z) notation used in the natural language"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "From the condition $|z - (2+i)| = \\sqrt{5}$ and the representation $z=x+iy$, we get the equation $(x-2)^2 + (y-1)^2 = 5$.", "statement": "We assume:\n\u2022 z = x+iy for real numbers x, y [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 |z - (4+i)| = sqrt(5) [tc_3];\n\u2022 Im(z) > 1 [tc_4].\nTherefore, we conclude:\n\u2022 (x-2)^2 + (y-1)^2 = 5 [l1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1) :\n  (x - 2)^2 + (y - 1)^2 = 5 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1) :\n  (x - 2)^2 + (y - 1)^2 = 5 := by\n  rw [Complex.abs] at tc_2 tc_3\n  simp only [Complex.normSq, sub_add_eq_add_sub, Complex.add_re, Complex.add_im, Complex.ofReal_re, Complex.ofReal_im, Complex.I_re, Complex.I_im] at tc_2 tc_3\n  simp only [tc_1, Complex.ofReal_re, Complex.ofReal_im, Complex.I_re, Complex.I_im, Complex.add_re, Complex.add_im] at tc_2 tc_3\n  simp only [mul_one, mul_zero, add_zero, zero_add, sub_self, add_sub_cancel, pow_two] at tc_2 tc_3\n  rw [\u2190 Real.sqrt_inj (by positivity) (by positivity)] at tc_2 tc_3\n  simp only [Real.sq_sqrt (by positivity)] at tc_2 tc_3\n  simp at tc_2\n  assumption", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 2, "endLine": 15, "endColumn": 99, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations correctly establish z as complex number and x,y as reals with the relationship z = x + y*I", "Condition tc_2 perfectly translates the modulus equation |z - (2+i)| = sqrt(5)", "Condition tc_3 perfectly translates the modulus equation |z - (4+i)| = sqrt(5)", "Condition tc_4 correctly represents Im(z) > 1 as y > 1, since z = x + iy implies Im(z) = y", "The conclusion (x-2)^2 + (y-1)^2 = 5 is identically represented in both natural language and Lean", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1) :\n  \u00ac((x - 2)^2 + (y - 1)^2 = 5) := by\n  intro h\n  have h2 := congrArg (fun w => w^2) tc_2\n  have h3 := congrArg (fun w => w^2) tc_3\n  simp at h2 h3\n  rw [Complex.abs_def, Complex.abs_def] at h2 h3\n  simp [tc_1] at h2 h3\n  have h1 : (x - 3)^2 = 0 := by\n    linear_combination (h2 - h3) / 4\n  have hx : x = 3 := by\n    rw [sub_eq_zero] at h1\n    exact pow_eq_zero h1\n  rw [hx, tc_1] at tc_2\n  simp at tc_2\n  have hy : y = 0 \u2228 y = 2 := by\n    rw [\u2190 sub_eq_zero, \u2190 pow_eq_zero (n := 2), \u2190 mul_self_eq_zero]\n    linear_combination tc_2^2 - 5\n  cases hy with\n  | inl h => rw [h] at tc_4; linarith [tc_4]\n  | inr h => rw [h, hx] at h; norm_num at h"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Similarly, from $|z - (4+i)| = \\sqrt{5}$, we get $(x-4)^2 + (y-1)^2 = 5$.", "statement": "We assume:\n\u2022 z = x+iy for real numbers x, y [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 |z - (4+i)| = sqrt(5) [tc_3];\n\u2022 Im(z) > 1 [tc_4];\n\u2022 (x-2)^2 + (y-1)^2 = 5 [l1].\nTherefore, we conclude:\n\u2022 (x-4)^2 + (y-1)^2 = 5 [l2].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5) :\n  (x - 4)^2 + (y - 1)^2 = 5 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma l2\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5) :\n  (x - 4)^2 + (y - 1)^2 = 5 := by\n  rw [\u2190 norm_eq_abs, \u2190 norm_eq_abs] at tc_2 tc_3\n  simp only [normSq, sub_re, sub_im, tc_1, \u2190 ofReal_sub, \u2190 ofReal_add, \u2190 ofReal_pow,\n    re_add_im, re_ofReal, im_ofReal, re_I, im_I, sub_self, mul_zero, add_zero, zero_add] at tc_2 tc_3\n  simp only [\u2190 l1] at tc_2\n  simp only [\u2190 tc_2]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 8, "endLine": 13, "endColumn": 19, "data": "ambiguous, possible interpretations \n  Complex.norm_eq_abs : \u2200 (z : \u2102), \u2016z\u2016 = Complex.abs z\n  \n  Real.norm_eq_abs : \u2200 (r : \u211d), \u2016r\u2016 = |r|"}, {"line": 13, "column": 6, "endLine": 13, "endColumn": 19, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.2711\nz : \u2102\nx y : \u211d\ntc_1 : z = \u2191x + \u2191y * I\ntc_2 : Complex.abs (z - (2 + I)) = \u221a5\ntc_3 : Complex.abs (z - (4 + I)) = \u221a5\ntc_4 : y > 1\nl1 : (x - 2) ^ 2 + (y - 1) ^ 2 = 5\n\u22a2 (x - 4) ^ 2 + (y - 1) ^ 2 = 5"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations correctly capture z as complex and x, y as real numbers", "tc_1 correctly represents z = x+iy using Lean's complex number notation y * I", "tc_2 correctly translates the absolute value condition |z - (2+i)| = sqrt(5)", "tc_3 correctly translates the absolute value condition |z - (4+i)| = sqrt(5)", "tc_4 correctly captures Im(z) > 1 as y > 1, which is mathematically equivalent since Im(x + iy) = y", "l1 perfectly matches the equation (x-2)^2 + (y-1)^2 = 5", "l2 perfectly matches the conclusion (x-4)^2 + (y-1)^2 = 5", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma neg_l2\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5) :\n  \u00ac (x - 4)^2 + (y - 1)^2 = 5 := by\n  intro h\n  rw [\u2190 Complex.norm_eq_abs, \u2190 Complex.norm_eq_abs] at tc_2 tc_3\n  simp only [Complex.norm_eq_abs, Complex.sub_re, Complex.sub_im, Complex.ofReal_sub, Complex.ofReal_add, \n    Complex.ofReal_mul, Complex.I_re, Complex.I_im, mul_zero, add_zero, zero_add, mul_one, \u2190 sub_eq_add_neg] at tc_2 tc_3\n  rw [\u2190 Real.sqrt_inj (by positivity) (by positivity), \u2190 tc_2, \u2190 tc_3]\n  simp only [Complex.sub_re, Complex.sub_im, Complex.norm_eq_abs]\n  field_simp [l1, h]\n  ring_nf\n  simp only [sub_self, zero_mul, zero_add]\n  norm_num"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Equating these two expressions gives $(x-2)^2 = (x-4)^2$", "statement": "We assume:\n\u2022 z = x+iy for real numbers x, y [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 |z - (4+i)| = sqrt(5) [tc_3];\n\u2022 Im(z) > 1 [tc_4];\n\u2022 (x-2)^2 + (y-1)^2 = 5 [l1];\n\u2022 (x-4)^2 + (y-1)^2 = 5 [l2].\nTherefore, we conclude:\n\u2022 (x-2)^2 = (x-4)^2 [l3].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5) :\n  (x - 2)^2 = (x - 4)^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5) :\n  (x - 2)^2 = (x - 4)^2 := by\n  have h1 : (x - 2)^2 = 5 - (y - 1)^2 := by\n    rw [\u2190 l1]\n    ring\n  have h2 : (x - 4)^2 = 5 - (y - 1)^2 := by\n    rw [\u2190 l2]\n    ring\n  rw [h1, h2]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 4}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations correctly capture z as a complex number and x,y as real numbers, with the relationship z = x + iy properly expressed using Lean's complex number notation.", "Both distance constraints are accurately formalized using Complex.abs for the modulus operation and Real.sqrt for the square root, maintaining the exact mathematical meaning.", "The imaginary part constraint is correctly represented. Since z = x + y*I in the Lean formalization, y represents Im(z), so 'y > 1' correctly captures 'Im(z) > 1'.", "Both circle equations are perfectly translated with identical mathematical structure and meaning.", "The conclusion is exactly the same in both natural language and Lean formalization."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "which simplifies to $x=3$.", "statement": "We assume:\n\u2022 z = x+iy for real numbers x, y [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 |z - (4+i)| = sqrt(5) [tc_3];\n\u2022 Im(z) > 1 [tc_4];\n\u2022 (x-2)^2 + (y-1)^2 = 5 [l1];\n\u2022 (x-4)^2 + (y-1)^2 = 5 [l2];\n\u2022 (x-2)^2 = (x-4)^2 [l3].\nTherefore, we conclude:\n\u2022 x = 3 [l4].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2) :\n  x = 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2) :\n  x = 3 := by\n  have h1 : (x - 2)^2 = (x - 4)^2 := l3\n  have h2 : x - 2 = x - 4 \u2228 x - 2 = -(x - 4) := eq_or_eq_neg_of_sq_eq_sq _ _ h1\n  cases h2 with\n  | inl h => \n    have h3 : -2 = -4 := by rw [\u2190 sub_sub] at h; exact h\n    linarith\n  | inr h =>\n    have h3 : x - 2 = -x + 4 := by linear_combination h\n    linear_combination h3 / 2", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 19, "column": 32, "endLine": 19, "endColumn": 41, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a - (?b + ?c)\nI z : \u2102\nx y : \u211d\ntc_1 : z = \u2191x + \u2191y * I\ntc_2 : Complex.abs (z - (2 + I)) = \u221a5\ntc_3 : Complex.abs (z - (4 + I)) = \u221a5\ntc_4 : y > 1\nl1 : (x - 2) ^ 2 + (y - 1) ^ 2 = 5\nl2 : (x - 4) ^ 2 + (y - 1) ^ 2 = 5\nl3 h1 : (x - 2) ^ 2 = (x - 4) ^ 2\nh : x - 2 = x - 4\n\u22a2 -2 = -4"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization accurately captures all components of the natural language premise. The complex number representation, distance conditions, constraints, intermediate algebraic relationships, and conclusion are all correctly formalized. The use of appropriate Lean mathematical functions (Complex.abs, Real.sqrt) and the logical structure perfectly match the natural language description.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l4\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2) :\n  \u00ac x = 3 := by\n  intro h\n  rw [h] at l3\n  have : (1)^2 = (-1)^2 := by rw [\u2190 sub_sub, \u2190 sub_sub] at l3; exact l3\n  norm_num at this"}, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Substituting $x=3$ into the first equation results in $(3-2)^2 + (y-1)^2 = 5$", "statement": "We assume:\n\u2022 z = x+iy for real numbers x, y [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 |z - (4+i)| = sqrt(5) [tc_3];\n\u2022 Im(z) > 1 [tc_4];\n\u2022 (x-2)^2 + (y-1)^2 = 5 [l1];\n\u2022 (x-4)^2 + (y-1)^2 = 5 [l2];\n\u2022 (x-2)^2 = (x-4)^2 [l3];\n\u2022 x = 3 [l4].\nTherefore, we conclude:\n\u2022 (3-2)^2 + (y-1)^2 = 5 [l5].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3) :\n  (3 - 2)^2 + (y - 1)^2 = 5 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3) :\n  (3 - 2)^2 + (y - 1)^2 = 5 := by\n  rw [l4] at l1\n  exact l1", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical statements from the natural language. The complex number representation z = x + y * I is equivalent to z = x+iy, the distance constraints using Complex.abs and Real.sqrt are mathematically identical to the absolute value and square root notation, and the condition y > 1 correctly represents Im(z) > 1 since y is the imaginary part of z. All derived equations and the conclusion are faithfully represented with identical mathematical meaning."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "which simplifies to $(y-1)^2 = 4$", "statement": "We assume:\n\u2022 z = x+iy for real numbers x, y [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 |z - (4+i)| = sqrt(5) [tc_3];\n\u2022 Im(z) > 1 [tc_4];\n\u2022 (x-2)^2 + (y-1)^2 = 5 [l1];\n\u2022 (x-4)^2 + (y-1)^2 = 5 [l2];\n\u2022 (x-2)^2 = (x-4)^2 [l3];\n\u2022 x = 3 [l4];\n\u2022 (3-2)^2 + (y-1)^2 = 5 [l5].\nTherefore, we conclude:\n\u2022 (y-1)^2 = 4 [l6].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5) :\n  (y - 1)^2 = 4 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5) :\n  (y - 1)^2 = 4 := by\n  have h : (y - 1)^2 = 5 - (3 - 2)^2 := by linear_combination l5\n  rw [h]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 5}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The complex number representation z = x + y*I properly corresponds to z = x+iy, the distance conditions using Complex.abs match the modulus notation, the imaginary part constraint y > 1 correctly represents Im(z) > 1, and all algebraic equations are faithfully translated. The conclusion (y-1)^2 = 4 is exactly as stated in the natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "yielding the solutions $y=3$ or $y=-1$.", "statement": "We assume:\n\u2022 z = x+iy for real numbers x, y [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 |z - (4+i)| = sqrt(5) [tc_3];\n\u2022 Im(z) > 1 [tc_4];\n\u2022 (x-2)^2 + (y-1)^2 = 5 [l1];\n\u2022 (x-4)^2 + (y-1)^2 = 5 [l2];\n\u2022 (x-2)^2 = (x-4)^2 [l3];\n\u2022 x = 3 [l4];\n\u2022 (3-2)^2 + (y-1)^2 = 5 [l5];\n\u2022 (y-1)^2 = 4 [l6].\nTherefore, we conclude:\n\u2022 y = 3 or y = -1 [l7].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5)\n  (l6 : (y - 1)^2 = 4) :\n  y = 3 \u2228 y = -1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5)\n  (l6 : (y - 1)^2 = 4) :\n  y = 3 \u2228 y = -1 := by\n  have h : y - 1 = 2 \u2228 y - 1 = -2 := by\n    rw [\u2190 pow_two, \u2190 pow_two] at l6\n    exact eq_or_eq_neg_of_sq_eq_sq l6\n  cases h with\n  | inl h1 => left; linarith\n  | inr h2 => right; linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 19, "column": 8, "endLine": 19, "endColumn": 17, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a * ?a\nI z : \u2102\nx y : \u211d\ntc_1 : z = \u2191x + \u2191y * I\ntc_2 : Complex.abs (z - (2 + I)) = \u221a5\ntc_3 : Complex.abs (z - (4 + I)) = \u221a5\ntc_4 : y > 1\nl1 : (x - 2) ^ 2 + (y - 1) ^ 2 = 5\nl2 : (x - 4) ^ 2 + (y - 1) ^ 2 = 5\nl3 : (x - 2) ^ 2 = (x - 4) ^ 2\nl4 : x = 3\nl5 : (3 - 2) ^ 2 + (y - 1) ^ 2 = 5\nl6 : (y - 1) ^ 2 = 4\n\u22a2 y - 1 = 2 \u2228 y - 1 = -2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization accurately captures all components from the natural language, including variable declarations, complex number operations, distance constraints, algebraic steps, and the final conclusion. While there is a logical inconsistency between the constraint y > 1 and the conclusion y = -1, this inconsistency exists in both the natural language and Lean versions, so the formalization is faithful to the source material. All mathematical operations, logical structures, and variable relationships are correctly translated.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l7\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5)\n  (l6 : (y - 1)^2 = 4) :\n  \u00ac (y = 3 \u2228 y = -1) := by\n  rw [not_or]\n  constructor\n  \u00b7 intro h\n    rw [h] at l6\n    norm_num at l6\n    contradiction\n  \u00b7 intro h\n    rw [h] at tc_4\n    linarith"}, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "Finally, using the condition $\\operatorname{Im}(z)>1$ selects $y=3$", "statement": "We assume:\n\u2022 z = x+iy for real numbers x, y [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 |z - (4+i)| = sqrt(5) [tc_3];\n\u2022 Im(z) > 1 [tc_4];\n\u2022 (x-2)^2 + (y-1)^2 = 5 [l1];\n\u2022 (x-4)^2 + (y-1)^2 = 5 [l2];\n\u2022 (x-2)^2 = (x-4)^2 [l3];\n\u2022 x = 3 [l4];\n\u2022 (3-2)^2 + (y-1)^2 = 5 [l5];\n\u2022 (y-1)^2 = 4 [l6];\n\u2022 y = 3 or y = -1 [l7].\nTherefore, we conclude:\n\u2022 y = 3 [l8].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5)\n  (l6 : (y - 1)^2 = 4)\n  (l7 : y = 3 \u2228 y = -1) :\n  y = 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5)\n  (l6 : (y - 1)^2 = 4)\n  (l7 : y = 3 \u2228 y = -1) :\n  y = 3 := by\n  cases l7 with\n  | inl h => exact h\n  | inr h => \n    have : y = -1 := h\n    have : \u00ac y > 1 := by simp [this]\n    contradiction", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Complex number representation z = x + y * I correctly captures z = x+iy from natural language", "Distance condition |z - (2+i)| = sqrt(5) is correctly formalized as Complex.abs (z - (2 + I)) = Real.sqrt 5", "Distance condition |z - (4+i)| = sqrt(5) is correctly formalized as Complex.abs (z - (4 + I)) = Real.sqrt 5", "Condition Im(z) > 1 is correctly captured as y > 1 since Im(z) = y when z = x + y*I", "Algebraic equation l1: (x-2)^2 + (y-1)^2 = 5 matches exactly", "Algebraic equation l2: (x-4)^2 + (y-1)^2 = 5 matches exactly", "Algebraic equation l3: (x-2)^2 = (x-4)^2 matches exactly", "Algebraic equation l4: x = 3 matches exactly", "Algebraic equation l5: (3-2)^2 + (y-1)^2 = 5 matches exactly", "Algebraic equation l6: (y-1)^2 = 4 matches exactly", "Algebraic equation l7: y = 3 or y = -1 is correctly formalized as y = 3 \u2228 y = -1", "Conclusion l8: y = 3 matches exactly between natural language and Lean"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "which combined with $x=3$ gives the result $z=3+3i$.", "statement": "We assume:\n\u2022 z = x+iy for real numbers x, y [tc_1];\n\u2022 |z - (2+i)| = sqrt(5) [tc_2];\n\u2022 |z - (4+i)| = sqrt(5) [tc_3];\n\u2022 Im(z) > 1 [tc_4];\n\u2022 (x-2)^2 + (y-1)^2 = 5 [l1];\n\u2022 (x-4)^2 + (y-1)^2 = 5 [l2];\n\u2022 (x-2)^2 = (x-4)^2 [l3];\n\u2022 x = 3 [l4];\n\u2022 (3-2)^2 + (y-1)^2 = 5 [l5];\n\u2022 (y-1)^2 = 4 [l6];\n\u2022 y = 3 or y = -1 [l7];\n\u2022 y = 3 [l8].\nTherefore, we conclude:\n\u2022 z = 3 + 3i [ts_1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "l1", "l2", "l3", "l4", "l5", "l6", "l7", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5)\n  (l6 : (y - 1)^2 = 4)\n  (l7 : y = 3 \u2228 y = -1)\n  (l8 : y = 3) :\n  z = 3 + 3 * I := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * I)\n  (tc_2 : Complex.abs (z - (2 + I)) = Real.sqrt 5)\n  (tc_3 : Complex.abs (z - (4 + I)) = Real.sqrt 5)\n  (tc_4 : y > 1)\n  (l1 : (x - 2)^2 + (y - 1)^2 = 5)\n  (l2 : (x - 4)^2 + (y - 1)^2 = 5)\n  (l3 : (x - 2)^2 = (x - 4)^2)\n  (l4 : x = 3)\n  (l5 : (3 - 2)^2 + (y - 1)^2 = 5)\n  (l6 : (y - 1)^2 = 4)\n  (l7 : y = 3 \u2228 y = -1)\n  (l8 : y = 3) :\n  z = 3 + 3 * I := by\n  rw [tc_1, l4, l8]\n  simp", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical and logical content from the natural language. The use of 'y > 1' instead of 'Im(z) > 1' is semantically equivalent given that z = x + y*I is established in tc_1. All equations, constraints, and the final conclusion are properly formalized using appropriate Lean/Mathlib notation."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_4", "label": "tc_4", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    