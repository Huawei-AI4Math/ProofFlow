
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for any positive real numbers $a, b, c, d, e$ such that $a+b+c+d+e=5$, the following inequality holds: $a b c + b c d + c d e + d e a + e a b \leq 5$.

Proof: Let $a, b, c, d, e > 0$ with $a+b+c+d+e=5$. Define $P = abc+bcd+cde+dea+eab$. We can rewrite $P$ as $P = e(a+c)(b+d) + bc(a+d-e)$. By the AMâ€“GM inequality, $(a+c)(b+d) \le \left(	frac{a+b+c+d}{2}ight)^2 = 	frac{(5-e)^2}{4}$, and thus $e(a+c)(b+d) \le 	frac{e(5-e)^2}{4}$. Similarly, applying AMâ€“GM to three variables gives $bc(a+d-e) \le \left(	frac{a+b+c+d-e}{3}ight)^3 = 	frac{(5-2e)^3}{27}$. Therefore, $P \le rac{e(5-e)^2}{4} + rac{(5-2e)^3}{27}.$ Expanding the numerator yields $P \le rac{-5e^3 - 30e^2 + 75e + 500}{108}$. To finish, we check that this is at most $5$, which is equivalent to showing $(e-1)^2(e+8) \ge 0$. Since $e>0$, both factors are nonnegative, so the inequality holds. Hence, we conclude that $abc+bcd+cde+dea+eab \le 5$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $a, b, c, d, e > 0$", "statement": "Premise:\n\u2022 $a, b, c, d, e$ are positive real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c d e : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly declares a, b, c, d, e as real numbers and explicitly states they are all positive through the conjunction 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e, which perfectly captures the natural language condition"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "$a+b+c+d+e=5$", "statement": "Premise:\n\u2022 $a, b, c, d, e$ are positive real numbers [tc_1];\n\u2022 $a+b+c+d+e=5$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that a, b, c, d, e are positive real numbers through the variable declaration (a b c d e : \u211d) and the positivity condition (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)", "The Lean formalization exactly matches the sum condition with (tc_2 : a + b + c + d + e = 5)"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Define $P = abc+bcd+cde+dea+eab$.", "statement": "Definition:\n\u2022 Let $P = abc+bcd+cde+dea+eab$ [def_1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The natural language states this is a pure definition with no conditions, but the Lean formalization introduces additional constraints (tc_1: all variables are positive, tc_2: sum equals 5) that are not mentioned in the natural language definition. However, these are extra conditions that don't contradict the definition itself.", "The definition of P matches perfectly. The Lean expression 'a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P' is mathematically equivalent to 'P = abc+bcd+cde+dea+eab', just with the equality flipped and explicit multiplication operators."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The natural language states this is a pure definition with no conditions, but the Lean formalization introduces additional constraints (tc_1: all variables are positive, tc_2: sum equals 5) that are not mentioned in the natural language definition. However, these are extra conditions that don't contradict the definition itself.\", \"The definition of P matches perfectly. The Lean expression 'a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P' is mathematically equivalent to 'P = abc+bcd+cde+dea+eab', just with the equality flipped and explicit multiplication operators.\"]"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "We can rewrite $P$ as $P = e(a+c)(b+d) + bc(a+d-e)$.", "statement": "We assume:\n\u2022 $a, b, c, d, e$ are positive real numbers [tc_1];\n\u2022 $a+b+c+d+e=5$ [tc_2];\n\u2022 $P = abc+bcd+cde+dea+eab$ [def_1].\nTherefore, we conclude:\n\u2022 $P = e(a+c)(b+d) + bc(a+d-e)$ [l1].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P) :\n  P = e * (a + c) * (b + d) + b * c * (a + d - e) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P) :\n  P = e * (a + c) * (b + d) + b * c * (a + d - e) := by\n  rw [\u2190 def_1]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable types and positivity constraints are correctly formalized using real number type and conjunction of inequalities", "Sum constraint is directly and accurately translated", "Definition of P correctly captures all five product terms with proper multiplication syntax", "Conclusion formula is mathematically equivalent with proper operator precedence and parentheses"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "By the AM\u2013GM inequality, $(a+c)(b+d) \\le \\left(\\frac{a+b+c+d}{2}\\right)^2$", "statement": "We assume:\n\u2022 $a, b, c, d, e$ are positive real numbers [tc_1];\n\u2022 $a+b+c+d+e=5$ [tc_2];\n\u2022 $P = abc+bcd+cde+dea+eab$ [def_1];\n\u2022 $P = e(a+c)(b+d) + bc(a+d-e)$ [l1].\nTherefore, we conclude:\n\u2022 $(a+c)(b+d) \\le \\left(\\frac{a+b+c+d}{2}\\right)^2$ [l2].", "dependencies": ["tc_1", "tc_2", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e)) :\n  (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e)) :\n  (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2 := by\n  have h : a + b + c + d = 5 - e := by linarith [tc_2]\n  have h1 : (a + c) + (b + d) = a + b + c + d := by ring\n  rw [\u2190h1]\n  apply mul_self_le_mul_self\n  simp\n  apply le_of_eq\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 8, "endLine": 16, "endColumn": 28, "data": "ambiguous term, use fully qualified name, possible interpretations [@_root_.mul_self_le_mul_self,\n @Nat.mul_self_le_mul_self]"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations and positivity constraints are correctly captured with appropriate real number types and conjunction of positivity conditions.", "The sum constraint a+b+c+d+e=5 is perfectly translated.", "The definition of P matches exactly, with equation direction being semantically equivalent (P = expression vs expression = P).", "The alternative expression for P (l1) is correctly formalized with proper operator precedence and parentheses.", "The main inequality conclusion is perfectly captured with correct mathematical notation for division, exponentiation, and inequality.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2 :\n  \u2203 (a b c d e : \u211d),\n    0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e \u2227\n    a + b + c + d + e = 5 \u2227\n    \u00ac (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2 := by\n  use 1, 1, 1, 1, 1\n  constructor <;> try simp\n  constructor <;> try simp\n  constructor <;> try simp\n  constructor <;> try simp\n  constructor <;> try simp\n  constructor <;> norm_num\n  norm_num"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "= \\frac{(5-e)^2}{4}", "statement": "We assume:\n\u2022 $a, b, c, d, e$ are positive real numbers [tc_1];\n\u2022 $a+b+c+d+e=5$ [tc_2];\n\u2022 $P = abc+bcd+cde+dea+eab$ [def_1];\n\u2022 $P = e(a+c)(b+d) + bc(a+d-e)$ [l1];\n\u2022 $(a+c)(b+d) \\le \\left(\\frac{a+b+c+d}{2}\\right)^2$ [l2].\nTherefore, we conclude:\n\u2022 $\\left(\\frac{a+b+c+d}{2}\\right)^2 = \\frac{(5-e)^2}{4}$ [l3].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l2 : (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2) :\n  ((a + b + c + d) / 2) ^ 2 = ((5 - e) / 2) ^ 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l2 : (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2) :\n  ((a + b + c + d) / 2) ^ 2 = ((5 - e) / 2) ^ 2 := by\n  have h : a + b + c + d = 5 - e := by\n    rw [\u2190 tc_2]\n    ring\n  rw [h]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify real numbers, with positivity handled in tc_1", "Positivity conditions are correctly expressed as conjunctions of strict inequalities", "Sum constraint matches exactly between natural language and Lean", "P definition correctly translates the product terms, with proper operator precedence in Lean", "Alternative expression for P matches exactly with proper parenthesization", "Inequality constraint is perfectly translated with correct mathematical notation", "Conclusion correctly represents the mathematical equality, noting that ((5-e)/2)\u00b2 = (5-e)\u00b2/4"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "and thus $e(a+c)(b+d) \\le \\frac{e(5-e)^2}{4}$.", "statement": "We assume:\n\u2022 $a, b, c, d, e$ are positive real numbers [tc_1];\n\u2022 $a+b+c+d+e=5$ [tc_2];\n\u2022 $P = abc+bcd+cde+dea+eab$ [def_1];\n\u2022 $P = e(a+c)(b+d) + bc(a+d-e)$ [l1];\n\u2022 $(a+c)(b+d) \\le \\left(\\frac{a+b+c+d}{2}\\right)^2$ [l2];\n\u2022 $\\left(\\frac{a+b+c+d}{2}\\right)^2 = \\frac{(5-e)^2}{4}$ [l3].\nTherefore, we conclude:\n\u2022 $e(a+c)(b+d) \\le \\frac{e(5-e)^2}{4}$ [l4].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l2 : (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2)\n  (l3 : ((a + b + c + d) / 2) ^ 2 = ((5 - e) / 2) ^ 2) :\n  e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l2 : (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2)\n  (l3 : ((a + b + c + d) / 2) ^ 2 = ((5 - e) / 2) ^ 2) :\n  e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2 := by\n  have h1 : (a + c) * (b + d) \u2264 ((5 - e) / 2) ^ 2 := by linarith [l2, l3]\n  have h2 : 0 \u2264 (a + c) * (b + d) := by\n    apply mul_nonneg\n    \u00b7 linarith [tc_1.1, tc_1.2.2.1]\n    \u00b7 linarith [tc_1.2.1, tc_1.2.2.2.1]\n  have h3 : e * (a + c) * (b + d) = e * ((a + c) * (b + d)) := by ring\n  rw [h3]\n  exact mul_le_mul_of_nonneg_left h1 (le_of_lt tc_1.2.2.2.2)", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify real numbers as required", "Positivity conditions perfectly capture 'positive real numbers' requirement", "Sum constraint matches exactly: a+b+c+d+e=5", "Definition of P matches exactly with proper Lean multiplication syntax", "Alternative form l1 matches exactly with proper parenthesization", "Inequality l2 matches exactly with Lean exponentiation syntax", "Equality l3 matches exactly", "Conclusion matches exactly - ((5-e)/2)\u00b2 is equivalent to (5-e)\u00b2/4 from natural language"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Similarly, applying AM\u2013GM to three variables gives $bc(a+d-e) \\le \\left(\\frac{a+b+c+d-e}{3}\\right)^3$", "statement": "We assume:\n\u2022 $a, b, c, d, e$ are positive real numbers [tc_1];\n\u2022 $a+b+c+d+e=5$ [tc_2];\n\u2022 $P = abc+bcd+cde+dea+eab$ [def_1];\n\u2022 $P = e(a+c)(b+d) + bc(a+d-e)$ [l1];\n\u2022 $e(a+c)(b+d) \\le \\frac{e(5-e)^2}{4}$ [l4].\nTherefore, we conclude:\n\u2022 $bc(a+d-e) \\le \\left(\\frac{a+b+c+d-e}{3}\\right)^3$ [l5].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l2 : (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2)\n  (l3 : ((a + b + c + d) / 2) ^ 2 = ((5 - e) / 2) ^ 2)\n  (l4 : e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2) :\n  b * c * (a + d - e) \u2264 ((a + b + c + d - e) / 3) ^ 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l2 : (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2)\n  (l3 : ((a + b + c + d) / 2) ^ 2 = ((5 - e) / 2) ^ 2)\n  (l4 : e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2) :\n  b * c * (a + d - e) \u2264 ((a + b + c + d - e) / 3) ^ 3 := by\n  have h_sum : a + b + c + d = 5 - e := by linarith [tc_2]\n  rw [h_sum]\n  have h_pos : 0 < a + b + c + d - e := by\n    rw [h_sum]\n    have : e < 5 := by linarith [tc_1.2.2.2.2, tc_2]\n    linarith\n  have h_denom_pos : 0 < (3 : \u211d) := by norm_num\n  have h_denom_ne_zero : (3 : \u211d) \u2260 0 := by norm_num\n  have h_AM_GM := Real.arith_mean_le_geom_mean_weighted ![1, 1, 1] ![b, c, a + d - e]\n    (fun i => by fin_cases i <;> linarith [tc_1.2.1, tc_1.2.2.1, h_pos])\n  simp only [Matrix.cons_val_zero, Matrix.cons_val_one, Matrix.head_cons, Matrix.cons_val_two, \n    Matrix.tail_cons, Finset.univ_unique, Finset.sum_singleton, Nat.cast_one, one_mul] at h_AM_GM\n  rw [\u2190 mul_assoc] at h_AM_GM\n  rw [\u2190 mul_pow, \u2190 inv_eq_one_div] at h_AM_GM\n  rw [\u2190 div_eq_mul_inv] at h_AM_GM\n  refine le_trans ?_ h_AM_GM\n  rw [\u2190 div_pow]\n  ring_nf\n  rw [\u2190 pow_div_cancel _ h_denom_ne_zero]\n  apply pow_le_pow_left (by linarith [h_pos])\n  rw [div_le_div_right h_denom_pos]\n  linarith [tc_2]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 21, "column": 4, "endLine": 21, "endColumn": 12, "data": "linarith failed to find a contradiction\ncase h\na b c d e : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e\ntc_2 : a + b + c + d + e = 5\nP : \u211d\ndef_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P\nl1 : P = e * (a + c) * (b + d) + b * c * (a + d - e)\nl2 : (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2\nl3 : ((a + b + c + d) / 2) ^ 2 = ((5 - e) / 2) ^ 2\nl4 : e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2\nh_sum : a + b + c + d = 5 - e\nthis : e < 5\na\u271d : 0 \u2265 5 - e - e\n\u22a2 False failed"}, {"line": 24, "column": 18, "endLine": 25, "endColumn": 72, "data": "unknown constant 'Real.arith_mean_le_geom_mean_weighted'"}, {"line": 15, "column": 57, "endLine": 37, "endColumn": 17, "data": "unsolved goals\na b c d e : \u211d\ntc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e\ntc_2 : a + b + c + d + e = 5\nP : \u211d\ndef_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P\nl1 : P = e * (a + c) * (b + d) + b * c * (a + d - e)\nl2 : (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2\nl3 : ((a + b + c + d) / 2) ^ 2 = ((5 - e) / 2) ^ 2\nl4 : e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2\nh_sum : a + b + c + d = 5 - e\nh_pos : 0 < a + b + c + d - e\nh_denom_pos : 0 < 3\nh_denom_ne_zero : 3 \u2260 0\n\u22a2 b * c * (a + d - e) \u2264 ((5 - e - e) / 3) ^ 3"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1: The positivity constraints for all five variables are correctly captured in Lean.", "tc_2: The sum constraint is exactly represented.", "def_1: The definition of P is correctly formalized, with equivalent equation order.", "l1: The equation for P is perfectly matched in the Lean formalization.", "l4: The inequality is mathematically equivalent - ((5-e)/2)\u00b2 equals (5-e)\u00b2/4, so this is a perfect match despite different notation.", "l5: The conclusion inequality is correctly formalized. The Lean version includes additional intermediate lemmas l2 and l3 not mentioned in natural language, but these don't contradict the stated premises and may be helpful for the proof.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l5 :\n  \u2203 (a b c d e : \u211d),\n    0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e \u2227\n    a + b + c + d + e = 5 \u2227\n    \u2203 (P : \u211d),\n      a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P \u2227\n      P = e * (a + c) * (b + d) + b * c * (a + d - e) \u2227\n      e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2 \u2227\n      \u00ac b * c * (a + d - e) \u2264 ((a + b + c + d - e) / 3) ^ 3 := by\n  let a : \u211d := 2\n  let b : \u211d := 1\n  let c : \u211d := 1\n  let d : \u211d := 0.5\n  let e : \u211d := 0.5\n  refine \u27e8a, b, c, d, e, ?_, ?_, ?_, ?_, ?_, ?_, ?_\u27e9\n  \u00b7 linarith\n  \u00b7 linarith\n  \u00b7 linarith\n  \u00b7 linarith\n  \u00b7 linarith\n  \u00b7 linarith\n  \u00b7 refine \u27e8a * b * c + b * c * d + c * d * e + d * e * a + e * a * b, ?_, ?_, ?_, ?_\u27e9\n    \u00b7 ring\n    \u00b7 ring\n    \u00b7 ring\n    \u00b7 ring\n    \u00b7 norm_num"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "= \\frac{(5-2e)^3}{27}$.", "statement": "We assume:\n\u2022 $a, b, c, d, e$ are positive real numbers [tc_1];\n\u2022 $a+b+c+d+e=5$ [tc_2];\n\u2022 $P = e(a+c)(b+d) + bc(a+d-e)$ [l1];\n\u2022 $e(a+c)(b+d) \\le \\frac{e(5-e)^2}{4}$ [l4];\n\u2022 $bc(a+d-e) \\le \\left(\\frac{a+b+c+d-e}{3}\\right)^3$ [l5].\nTherefore, we conclude:\n\u2022 $\\left(\\frac{a+b+c+d-e}{3}\\right)^3 = \\frac{(5-2e)^3}{27}$ [l6].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l2 : (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2)\n  (l3 : ((a + b + c + d) / 2) ^ 2 = ((5 - e) / 2) ^ 2)\n  (l4 : e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2)\n  (l5 : b * c * (a + d - e) \u2264 ((a + b + c + d - e) / 3) ^ 3) :\n  ((a + b + c + d - e) / 3) ^ 3 = ((5 - 2 * e) / 3) ^ 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l2 : (a + c) * (b + d) \u2264 ((a + b + c + d) / 2) ^ 2)\n  (l3 : ((a + b + c + d) / 2) ^ 2 = ((5 - e) / 2) ^ 2)\n  (l4 : e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2)\n  (l5 : b * c * (a + d - e) \u2264 ((a + b + c + d - e) / 3) ^ 3) :\n  ((a + b + c + d - e) / 3) ^ 3 = ((5 - 2 * e) / 3) ^ 3 := by\n  rw [\u2190 tc_2]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations and positivity constraints correctly capture that a, b, c, d, e are positive real numbers", "The sum constraint a + b + c + d + e = 5 is correctly formalized in tc_2", "Major inconsistency in P definition: def_1 defines P as a*b*c + b*c*d + c*d*e + d*e*a + e*a*b, which is completely different from the natural language definition P = e(a+c)(b+d) + bc(a+d-e). However, l1 does correctly state the natural language definition", "The inequality l4 correctly represents e(a+c)(b+d) \u2264 e(5-e)\u00b2/4, as e * ((5-e)/2)\u00b2 = e(5-e)\u00b2/4", "The inequality l5 correctly matches bc(a+d-e) \u2264 ((a+b+c+d-e)/3)\u00b3", "The conclusion l6 is mathematically equivalent to the natural language: ((a+b+c+d-e)/3)\u00b3 = ((5-2e)/3)\u00b3 is the same as ((a+b+c+d-e)/3)\u00b3 = (5-2e)\u00b3/27", "Extra conditions l2 and l3 are auxiliary lemmas not mentioned in natural language but are logically consistent and don't contradict the given information"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations and positivity constraints correctly capture that a, b, c, d, e are positive real numbers', 'The sum constraint a + b + c + d + e = 5 is correctly formalized in tc_2', 'Major inconsistency in P definition: def_1 defines P as a*b*c + b*c*d + c*d*e + d*e*a + e*a*b, which is completely different from the natural language definition P = e(a+c)(b+d) + bc(a+d-e). However, l1 does correctly state the natural language definition', 'The inequality l4 correctly represents e(a+c)(b+d) \u2264 e(5-e)\u00b2/4, as e * ((5-e)/2)\u00b2 = e(5-e)\u00b2/4', 'The inequality l5 correctly matches bc(a+d-e) \u2264 ((a+b+c+d-e)/3)\u00b3', 'The conclusion l6 is mathematically equivalent to the natural language: ((a+b+c+d-e)/3)\u00b3 = ((5-2e)/3)\u00b3 is the same as ((a+b+c+d-e)/3)\u00b3 = (5-2e)\u00b3/27', \"Extra conditions l2 and l3 are auxiliary lemmas not mentioned in natural language but are logically consistent and don't contradict the given information\"]"}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "Therefore, $P \\le \\frac{e(5-e)^2}{4} + \\frac{(5-2e)^3}{27}.$", "statement": "We assume:\n\u2022 $a, b, c, d, e$ are positive real numbers [tc_1];\n\u2022 $a+b+c+d+e=5$ [tc_2];\n\u2022 $P = e(a+c)(b+d) + bc(a+d-e)$ [l1];\n\u2022 $e(a+c)(b+d) \\le \\frac{e(5-e)^2}{4}$ [l4];\n\u2022 $bc(a+d-e) \\le \\left(\\frac{a+b+c+d-e}{3}\\right)^3$ [l5];\n\u2022 $\\left(\\frac{a+b+c+d-e}{3}\\right)^3 = \\frac{(5-2e)^3}{27}$ [l6].\nTherefore, we conclude:\n\u2022 $P \\le \\frac{e(5-e)^2}{4} + \\frac{(5-2e)^3}{27}$ [l7].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l4 : e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2)\n  (l5 : b * c * (a + d - e) \u2264 ((a + b + c + d - e) / 3) ^ 3)\n  (l6 : ((a + b + c + d - e) / 3) ^ 3 = ((5 - 2 * e) / 3) ^ 3) :\n  P \u2264 e * ((5 - e) / 2) ^ 2 + ((5 - 2 * e) / 3) ^ 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l4 : e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2)\n  (l5 : b * c * (a + d - e) \u2264 ((a + b + c + d - e) / 3) ^ 3)\n  (l6 : ((a + b + c + d - e) / 3) ^ 3 = ((5 - 2 * e) / 3) ^ 3) :\n  P \u2264 e * ((5 - e) / 2) ^ 2 + ((5 - 2 * e) / 3) ^ 3 := by\n  rw [l1]\n  apply add_le_add l4\n  rw [\u2190 l6]\n  exact l5", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations and positivity constraints match perfectly", "Sum constraint tc_2 matches exactly", "Definition l1 of P matches perfectly", "Constraint l4 is mathematically equivalent: e(5-e)\u00b2/4 = e((5-e)/2)\u00b2", "Constraint l5 matches exactly", "Constraint l6 is mathematically equivalent: (5-2e)\u00b3/27 = ((5-2e)/3)\u00b3", "Conclusion l7 follows the same mathematical equivalences as l4 and l6", "Extra definition def_1 provides additional constraint not contradicting the natural language"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "Expanding the numerator yields $P \\le \\frac{-5e^3 - 30e^2 + 75e + 500}{108}$.", "statement": "We assume:\n\u2022 $P \\le \\frac{e(5-e)^2}{4} + \\frac{(5-2e)^3}{27}$ [l7].\nTherefore, we conclude:\n\u2022 $P \\le \\frac{-5e^3 - 30e^2 + 75e + 500}{108}$ [l8].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l4 : e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2)\n  (l5 : b * c * (a + d - e) \u2264 ((a + b + c + d - e) / 3) ^ 3)\n  (l6 : ((a + b + c + d - e) / 3) ^ 3 = ((5 - 2 * e) / 3) ^ 3)\n  (l7 : P \u2264 e * ((5 - e) / 2) ^ 2 + ((5 - 2 * e) / 3) ^ 3) :\n  P \u2264 (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (a b c d e : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (P : \u211d)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l1 : P = e * (a + c) * (b + d) + b * c * (a + d - e))\n  (l4 : e * (a + c) * (b + d) \u2264 e * ((5 - e) / 2) ^ 2)\n  (l5 : b * c * (a + d - e) \u2264 ((a + b + c + d - e) / 3) ^ 3)\n  (l6 : ((a + b + c + d - e) / 3) ^ 3 = ((5 - 2 * e) / 3) ^ 3)\n  (l7 : P \u2264 e * ((5 - e) / 2) ^ 2 + ((5 - 2 * e) / 3) ^ 3) :\n  P \u2264 (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 := by\n  have h1 : e * ((5 - e) / 2) ^ 2 = e * (5 - e)^2 / 4 := by ring\n  have h2 : ((5 - 2 * e) / 3) ^ 3 = (5 - 2 * e)^3 / 27 := by ring\n  rw [h1, h2] at l7\n  have h3 : e * (5 - e)^2 / 4 + (5 - 2 * e)^3 / 27 = (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 := by ring\n  linarith [l7]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The assumption P \u2264 (e(5-e)\u00b2)/4 + ((5-2e)\u00b3)/27 is correctly captured in Lean as l7, with mathematically equivalent expressions where ((5-e)/2)\u00b2 = (5-e)\u00b2/4 and ((5-2e)/3)\u00b3 = (5-2e)\u00b3/27.", "The conclusion P \u2264 (-5e\u00b3 - 30e\u00b2 + 75e + 500)/108 is perfectly represented in the Lean goal statement with identical mathematical content.", "The additional context in Lean (variable declarations, constraints, and intermediate lemmas l1, l4, l5, l6) provides mathematical background that supports the logical development. While not explicitly mentioned in the natural language, these are consistent additional details that don't contradict the stated premise and conclusion."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l9": {"id": "l9", "natural_language": "To finish, we check that this is at most $5$, which is equivalent to showing $(e-1)^2(e+8) \\ge 0$.", "statement": "We assume:\n\u2022 All previous steps.\nTherefore, we conclude:\n\u2022 The inequality $\\frac{-5e^3 - 30e^2 + 75e + 500}{108} \\le 5$ is equivalent to the inequality $(e-1)^2(e+8) \\ge 0$ [l9].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5", "l6", "l7", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l9\n  (e : \u211d) :\n  (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l9\n  (e : \u211d) :\n  (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0 := by\n  rw [div_le_iff (by norm_num : (0 : \u211d) < 108)]\n  ring_nf\n  rw [\u2190 sub_nonneg]\n  ring_nf\n  have : -5 * e ^ 3 - 30 * e ^ 2 + 75 * e + 500 - 540 = -5 * (e ^ 3 + 6 * e ^ 2 - 15 * e + 8) := by ring\n  rw [this, neg_mul, neg_nonneg]\n  have : e ^ 3 + 6 * e ^ 2 - 15 * e + 8 = (e - 1)^2 * (e + 8) := by ring\n  rw [this]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 6, "endLine": 13, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  -5 * e ^ 3 - 30 * e ^ 2 + 75 * e + 500 - 540\ne : \u211d\nthis : -5 * e ^ 3 - 30 * e ^ 2 + 75 * e + 500 - 540 = -5 * (e ^ 3 + 6 * e ^ 2 - 15 * e + 8)\n\u22a2 0 \u2264 40 - e * 75 + e ^ 2 * 30 + e ^ 3 * 5 \u2194 8 - e * 15 + e ^ 2 * 6 + e ^ 3 \u2265 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the equivalence between the two inequalities using the biconditional operator. All mathematical expressions are properly translated with correct syntax and operator precedence. The explicit real number type declaration for variable e is appropriate and enhances the formalization without contradicting the natural language statement.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l9 :\n    \u2203 e : \u211d, \u00ac ((-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0) := by\n  use -9\n  simp only [sub_neg_eq_add, add_left_neg, zero_pow, ne_eq, OfNat.ofNat_ne_zero, not_false_eq_true,\n    mul_zero, zero_le', not_le, ge_iff_le]\n  rw [not_iff]\n  constructor\n  \u00b7 intro h\n    simp only [neg_pow, mul_neg, neg_mul, neg_add_rev, add_neg_le_iff_le_add, le_add_iff_nonneg_right] at h\n    norm_num at h\n  \u00b7 intro h\n    simp only [pow_two, mul_neg, neg_mul, neg_add_rev, add_neg_le_iff_le_add, le_add_iff_nonneg_right] at h\n    norm_num at h"}, "type": "lemma"}, "l10": {"id": "l10", "natural_language": "Since $e>0$, both factors are nonnegative, so the inequality holds.", "statement": "We assume:\n\u2022 $e$ is a positive real number [tc_1].\nTherefore, we conclude:\n\u2022 $(e-1)^2(e+8) \\ge 0$ [l10].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5", "l6", "l7", "l8", "l9"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l10\n  (e : \u211d)\n  (tc_1 : 0 < e)\n  (l9 : (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0) :\n  (e - 1)^2 * (e + 8) \u2265 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l10\n  (e : \u211d)\n  (tc_1 : 0 < e)\n  (l9 : (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0) :\n  (e - 1)^2 * (e + 8) \u2265 0 := by\n  have h : e + 8 > 0 := by linarith [tc_1]\n  have h1 : (e - 1)^2 \u2265 0 := by nlinarith\n  nlinarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization introduces an additional assumption l9 (a biconditional involving a complex fraction) that is not mentioned in the natural language. While the variable declarations and goal statement match perfectly, this extra assumption fundamentally changes the logical structure of the proof. The natural language suggests proving (e-1)\u00b2(e+8) \u2265 0 directly from e > 0, but the Lean version relies on an additional biconditional assumption not present in the natural language statement."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization introduces an additional assumption l9 (a biconditional involving a complex fraction) that is not mentioned in the natural language. While the variable declarations and goal statement match perfectly, this extra assumption fundamentally changes the logical structure of the proof. The natural language suggests proving (e-1)\u00b2(e+8) \u2265 0 directly from e > 0, but the Lean version relies on an additional biconditional assumption not present in the natural language statement.']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Hence, we conclude that $abc+bcd+cde+dea+eab \\le 5$.", "statement": "We assume:\n\u2022 $a, b, c, d, e$ are positive real numbers [tc_1];\n\u2022 $a+b+c+d+e=5$ [tc_2];\n\u2022 $P = abc+bcd+cde+dea+eab$ [def_1];\n\u2022 $P \\le \\frac{-5e^3 - 30e^2 + 75e + 500}{108}$ [l8];\n\u2022 The inequality $\\frac{-5e^3 - 30e^2 + 75e + 500}{108} \\le 5$ is equivalent to $(e-1)^2(e+8) \\ge 0$ [l9];\n\u2022 $(e-1)^2(e+8) \\ge 0$ [l10].\nTherefore, we conclude:\n\u2022 $abc+bcd+cde+dea+eab \\le 5$ [ts_1].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5", "l6", "l7", "l8", "l9", "l10"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c d e : \u211d)\n  (P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l8 : P \u2264 (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108)\n  (l9 : (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0)\n  (l10 : (e - 1)^2 * (e + 8) \u2265 0) :\n  a * b * c + b * c * d + c * d * e + d * e * a + e * a * b \u2264 5 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c d e : \u211d)\n  (P : \u211d)\n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 0 < d \u2227 0 < e)\n  (tc_2 : a + b + c + d + e = 5)\n  (def_1 : a * b * c + b * c * d + c * d * e + d * e * a + e * a * b = P)\n  (l8 : P \u2264 (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108)\n  (l9 : (-5 * e^3 - 30 * e^2 + 75 * e + 500) / 108 \u2264 5 \u2194 (e - 1)^2 * (e + 8) \u2265 0)\n  (l10 : (e - 1)^2 * (e + 8) \u2265 0) :\n  a * b * c + b * c * d + c * d * e + d * e * a + e * a * b \u2264 5 := by\n  rw [def_1]\n  apply le_trans l8\n  exact (l9.2 l10)", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly capture both the real number type and positivity constraints from the natural language.", "The sum constraint is perfectly translated.", "The definition of P is mathematically equivalent despite the equation being flipped (P = expression vs expression = P).", "The inequality l8 is correctly formalized with proper operator precedence.", "The equivalence l9 correctly uses the biconditional operator to capture the stated equivalence.", "The inequality l10 is perfectly matched.", "The conclusion correctly states the target inequality without referencing P.", "The overall logical structure provides all necessary premises to prove the conclusion through transitivity, maintaining the mathematical reasoning chain from the natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l9", "label": "l9", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l10", "label": "l10", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "l9", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l9", "to": "l10", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l9", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l10", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    