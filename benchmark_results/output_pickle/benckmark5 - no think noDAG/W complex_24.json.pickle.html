
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z$ be a complex number. If $z^2 = i$ and $\operatorname{Re}(z) > 0$, then $z = \frac{1}{\sqrt{2}} + i\frac{1}{\sqrt{2}}$.

Proof: Let $z=re^{i	heta}$ be the polar form of $z$. From the condition $z^2=i$, we have $r^2e^{i2	heta} = i$. The polar form of $i$ is $e^{i(\pi/2+2k\pi)}$, so by equating the moduli and arguments we get $r^2=1$ and $2	heta = \pi/2+2k\pi$. This gives two distinct solutions for $z$: $z_0 = e^{i\pi/4}$ and $z_1 = e^{i5\pi/4}$. The condition $\operatorname{Re}(z) > 0$ selects the solution $z = e^{i\pi/4}$, since $\operatorname{Re}(e^{i5\pi/4}) < 0$. In Cartesian form, $z=e^{i\pi/4}$ is $z = \frac{1}{\sqrt{2}} + i\frac{1}{\sqrt{2}}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z$ be a complex number.", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean variable declaration (z : \u2102) perfectly captures the natural language condition that z is a complex number. Both establish z as a complex number with no additional constraints or conclusions."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "If $z^2 = i$", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^2 = i$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean type declaration (z : \u2102) perfectly captures that z is a complex number", "The Lean condition z ^ 2 = Complex.I perfectly matches the mathematical statement z^2 = i, with Complex.I being the standard representation of the imaginary unit in Lean"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "and $\\operatorname{Re}(z) > 0$", "statement": "Premise:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^2 = i$ [tc_2];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_3].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that z is a complex number through the type declaration (z : \u2102). The tc_1 : True is redundant but doesn't affect correctness.", "The Lean formalization perfectly matches the mathematical condition, with Complex.I being the standard representation of the imaginary unit i.", "The Lean formalization perfectly matches the mathematical condition. The inequality 0 < z.re is equivalent to Re(z) > 0, just written in reverse order."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let $z=re^{i\theta}$ be the polar form of $z$.", "statement": "Definition:\n\u2022 Let $z=re^{i\\theta}$ be the polar form of the complex number $z$ [tc_1], where $r$ is the modulus and $\\theta$ is the argument [def_1].", "dependencies": ["tc_1", "tc_2", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (z : \u2102)\n  (r : \u211d)\n  (\u03b8 : \u211d)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = Complex.exp (r * Complex.exp (\u03b8 * Complex.I)))", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean definition `z = Complex.exp (r * Complex.exp (\u03b8 * Complex.I))` is mathematically incorrect. The standard polar form should be `z = r * Complex.exp (\u03b8 * Complex.I)`, not with r inside the exponential. This fundamentally changes the mathematical meaning.", "The natural language states r is the modulus, but the Lean formalization doesn't establish this relationship. In standard polar form, r should be the modulus (absolute value) of z, but this constraint is missing in the Lean code.", "The natural language states \u03b8 is the argument, but the Lean formalization doesn't establish this relationship. In standard polar form, \u03b8 should be the argument (angle) of z, but this constraint is missing in the Lean code.", "The conclusion about expressing z in polar form is contradicted by the incorrect Lean definition. Additionally, the Lean code introduces extraneous conditions like `z ^ 2 = Complex.I` and `0 < z.re` that are not mentioned in the natural language definition and restrict the generality of the polar form definition."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean definition `z = Complex.exp (r * Complex.exp (\u03b8 * Complex.I))` is mathematically incorrect. The standard polar form should be `z = r * Complex.exp (\u03b8 * Complex.I)`, not with r inside the exponential. This fundamentally changes the mathematical meaning.', \"The natural language states r is the modulus, but the Lean formalization doesn't establish this relationship. In standard polar form, r should be the modulus (absolute value) of z, but this constraint is missing in the Lean code.\", \"The natural language states \u03b8 is the argument, but the Lean formalization doesn't establish this relationship. In standard polar form, \u03b8 should be the argument (angle) of z, but this constraint is missing in the Lean code.\", 'The conclusion about expressing z in polar form is contradicted by the incorrect Lean definition. Additionally, the Lean code introduces extraneous conditions like `z ^ 2 = Complex.I` and `0 < z.re` that are not mentioned in the natural language definition and restrict the generality of the polar form definition.']"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "From the condition $z^2=i$, we have $r^2e^{i2\\theta} = i$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^2 = i$ [tc_2];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_3];\n\u2022 $z=re^{i\\theta}$ is the polar form of $z$ [def_1].\nTherefore, we conclude:\n\u2022 $r^2e^{i2\\theta} = i$ [l1].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I)) :\n  r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I)) :\n  r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I := by\n  rw [\u2190 def_1] at tc_2\n  simp only [Complex.pow_two] at tc_2\n  rw [\u2190 tc_2]\n  simp only [Complex.ofReal_mul, Complex.ofReal_pow]\n  rfl", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 6, "endLine": 12, "endColumn": 13, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u2191r * Complex.exp (\u2191\u03b8 * Complex.I)\nz : \u2102\nr \u03b8 : \u211d\ntc_1 : True\ntc_2 : z ^ 2 = Complex.I\ntc_3 : 0 < z.re\ndef_1 : z = \u2191r * Complex.exp (\u2191\u03b8 * Complex.I)\n\u22a2 \u2191r ^ 2 * Complex.exp (2 * \u2191\u03b8 * Complex.I) = Complex.I"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable z is correctly declared as complex number type \u2102", "The equation z\u00b2 = i is accurately represented using Complex.I for the imaginary unit", "The real part constraint Re(z) > 0 is correctly formalized as 0 < z.re", "The polar form z = re^(i\u03b8) is properly represented using Complex.exp", "Real number types for r and \u03b8 are appropriately declared, matching mathematical convention", "The conclusion r\u00b2e^(i2\u03b8) = i is correctly formalized with proper complex arithmetic", "The trivial assumption tc_1 : True is harmless and doesn't affect the logical content", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1_neg\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I)) :\n  \u00ac (r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I) := by\n  rw [def_1] at tc_2\n  have h : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I := by\n    rw [\u2190 tc_2]\n    simp only [pow_two]\n    rw [mul_assoc, mul_assoc]\n    simp [Complex.exp_add]\n  intro hn\n  contradiction"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "The polar form of $i$ is $e^{i(\\pi/2+2k\\pi)}$", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^2 = i$ [tc_2];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_3];\n\u2022 $z=re^{i\\theta}$ is the polar form of $z$ [def_1];\n\u2022 $r^2e^{i2\\theta} = i$ [l1].\nTherefore, we conclude:\n\u2022 The polar form of $i$ is $e^{i(\\pi/2+2k\\pi)}$ for any integer k [l2].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) :\n  Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191(k : \u2124) * \u03c0)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) (k : \u2124) :\n  Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)) := by\n  rw [Complex.exp_eq_exp_\u2102]\n  simp only [Complex.I_eq_exp]\n  simp [mul_add, add_mul, mul_assoc]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 13, "endLine": 14, "endColumn": 29, "data": "unknown constant 'Complex.I_eq_exp'"}, {"line": 14, "column": 2, "endLine": 14, "endColumn": 30, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations and type constraints are properly captured in Lean", "The assumption z\u00b2 = i is correctly formalized as tc_2", "The condition Re(z) > 0 is properly represented as tc_3", "The polar form definition is accurately captured in def_1", "The derived equation l1 correctly represents r\u00b2e^{i2\u03b8} = i", "The conclusion captures the mathematical content correctly, but the natural language states 'for any integer k' suggesting universal quantification, while Lean treats k as a parameter. The mathematical meaning is preserved but the logical structure differs slightly in how the generality over k is expressed.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.83 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) :\n  \u00ac \u2200 k : \u2124, Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)) := by\n  intro h\n  have h1 : Complex.exp (Complex.I * (2 * \u03c0)) = 1 := by\n    specialize h 1\n    rw [h]\n    simp [Complex.exp_add]\n    ring_nf\n    simp [Complex.exp_eq_one_iff]\n    use 1\n    ring\n  have h2 : Complex.exp (Complex.I * (2 * \u03c0)) \u2260 1 := by\n    rw [Complex.exp_eq_one_iff]\n    push_neg\n    intro k\n    ring_nf\n    intro hk\n    have : \u03c0 = k * \u03c0 := by linarith [hk]\n    cases' k with k k\n    \u00b7 simp at this\n      linarith [this]\n    \u00b7 simp at this\n      linarith [this]\n  exact h2 h1"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "so by equating the moduli and arguments we get $r^2=1$ and $2\\theta = \\pi/2+2k\\pi$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^2 = i$ [tc_2];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_3];\n\u2022 $z=re^{i\\theta}$ is the polar form of $z$ [def_1];\n\u2022 $r^2e^{i2\\theta} = i$ [l1];\n\u2022 The polar form of $i$ is $e^{i(\\pi/2+2k\\pi)}$ for any integer k [l2].\nTherefore, we conclude:\n\u2022 $r^2=1$ and $2\\theta = \\pi/2+2k\\pi$ for some integer $k$ [l3].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (l2 : Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191(k : \u2124) * \u03c0))) :\n  r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191(k : \u2124) * \u03c0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (l2 : \u2200 k : \u2124, Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * k * \u03c0))) :\n  \u2203 k : \u2124, r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * k * \u03c0 := by\n  have h_r : r ^ 2 = 1 := by\n    rw [\u2190 Complex.norm_eq_abs, \u2190 Complex.norm_sq_eq_abs_sq, Complex.norm_sq, Complex.norm_sq] at l1\n    simp at l1\n    exact l1.1\n  refine \u27e80, h_r, ?_\u27e9\n  have h_exp : Complex.exp (2 * \u03b8 * Complex.I) = Complex.exp (\u03c0 / 2 * Complex.I) := by\n    rw [l1, h_r, one_mul]\n    exact l2 0\n  rw [\u2190 Complex.exp_eq_exp_iff_exists_int, h_exp]\n  simp\n  use 0\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 8, "endLine": 15, "endColumn": 29, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  Complex.abs ?z\nz : \u2102\nr \u03b8 : \u211d\ntc_1 : True\ntc_2 : z ^ 2 = Complex.I\ntc_3 : 0 < z.re\ndef_1 : z = \u2191r * Complex.exp (\u2191\u03b8 * Complex.I)\nl1 : \u2191r ^ 2 * Complex.exp (2 * \u2191\u03b8 * Complex.I) = Complex.I\nl2 : \u2200 (k : \u2124), Complex.I = Complex.exp (Complex.I * (\u2191\u03c0 / 2 + 2 * \u2191k * \u2191\u03c0))\n\u22a2 r ^ 2 = 1"}, {"line": 20, "column": 8, "endLine": 20, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u2191r ^ 2 * Complex.exp (2 * \u2191\u03b8 * Complex.I)\nz : \u2102\nr \u03b8 : \u211d\ntc_1 : True\ntc_2 : z ^ 2 = Complex.I\ntc_3 : 0 < z.re\ndef_1 : z = \u2191r * Complex.exp (\u2191\u03b8 * Complex.I)\nl1 : \u2191r ^ 2 * Complex.exp (2 * \u2191\u03b8 * Complex.I) = Complex.I\nl2 : \u2200 (k : \u2124), Complex.I = Complex.exp (Complex.I * (\u2191\u03c0 / 2 + 2 * \u2191k * \u2191\u03c0))\nh_r : r ^ 2 = 1\n\u22a2 Complex.exp (2 * \u2191\u03b8 * Complex.I) = Complex.exp (\u2191\u03c0 / 2 * Complex.I)"}, {"line": 22, "column": 6, "endLine": 22, "endColumn": 41, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u2203 n, ?m.3510 = ?m.3511 + \u2191n * (2 * \u2191\u03c0 * Complex.I)\nz : \u2102\nr \u03b8 : \u211d\ntc_1 : True\ntc_2 : z ^ 2 = Complex.I\ntc_3 : 0 < z.re\ndef_1 : z = \u2191r * Complex.exp (\u2191\u03b8 * Complex.I)\nl1 : \u2191r ^ 2 * Complex.exp (2 * \u2191\u03b8 * Complex.I) = Complex.I\nl2 : \u2200 (k : \u2124), Complex.I = Complex.exp (Complex.I * (\u2191\u03c0 / 2 + 2 * \u2191k * \u2191\u03c0))\nh_r : r ^ 2 = 1\nh_exp : Complex.exp (2 * \u2191\u03b8 * Complex.I) = Complex.exp (\u2191\u03c0 / 2 * Complex.I)\n\u22a2 2 * \u03b8 = \u03c0 / 2 + 2 * \u21910 * \u03c0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1 is appropriately handled as True since z is already declared as complex type in the function signature", "tc_2 correctly formalizes z\u00b2 = i using Lean's complex number notation", "tc_3 correctly represents Re(z) > 0 using Lean's real part accessor z.re", "def_1 accurately captures the polar form representation z = re^(i\u03b8)", "l1 properly formalizes the equation r\u00b2e^(i2\u03b8) = i with correct exponential notation", "l2 correctly represents the polar form of i with the general form including integer k", "The conclusion accurately captures both conditions r\u00b2 = 1 and 2\u03b8 = \u03c0/2+2k\u03c0 using logical conjunction, with proper variable scoping for k", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma neg_l3\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * exp (\u03b8 * I))\n  (l1 : r ^ 2 * exp (2 * \u03b8 * I) = I)\n  (l2 : I = exp (I * (\u03c0 / 2 + 2 * k * \u03c0))) :\n  \u00ac (r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * k * \u03c0) := by\n  intro h\n  have h_r : r ^ 2 = 1 := h.1\n  have h_\u03b8 : 2 * \u03b8 = \u03c0 / 2 + 2 * k * \u03c0 := h.2\n  have h_z : z = exp (I * (\u03c0 / 4 + k * \u03c0)) := by\n    rw [def_1, \u2190 ofReal_pow, h_r, ofReal_one, one_mul]\n    rw [h_\u03b8]\n    simp [exp_add, exp_mul_I]\n  have h_re : z.re = cos (\u03c0 / 4 + k * \u03c0) := by\n    rw [h_z]\n    simp [exp_mul_I, cos]\n  have h_pos : 0 < cos (\u03c0 / 4 + k * \u03c0) := by\n    rw [\u2190 h_re]\n    exact tc_3\n  have h_neg : cos (\u03c0 / 4 + k * \u03c0) \u2264 0 := by\n    cases' k with k k\n    \u00b7 simp [Int.ofNat_eq_coe]\n      rw [add_comm, Real.cos_add_pi]\n      norm_num [Real.cos_pi_div_four]\n    \u00b7 simp [Int.negSucc_coe]\n      rw [\u2190 neg_add', Real.cos_neg, add_comm, Real.cos_add_pi]\n      norm_num [Real.cos_pi_div_four]\n  linarith [h_pos, h_neg]"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "This gives two distinct solutions for $z$: $z_0 = e^{i\\pi/4}$ and $z_1 = e^{i5\\pi/4}$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^2 = i$ [tc_2];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_3];\n\u2022 $z=re^{i\\theta}$ is the polar form of $z$ [def_1];\n\u2022 $r^2e^{i2\\theta} = i$ [l1];\n\u2022 The polar form of $i$ is $e^{i(\\pi/2+2k\\pi)}$ for any integer k [l2];\n\u2022 $r^2=1$ and $2\\theta = \\pi/2+2k\\pi$ for some integer $k$ [l3].\nTherefore, we conclude:\n\u2022 The two distinct solutions for $z$ satisfying $z^2=i$ are $z = e^{i\\pi/4}$ and $z = e^{i5\\pi/4}$ [l4].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d)\n  (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (l2 : Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0) :\n  (z = Complex.exp (Complex.I * (\u03c0 / 4))) \u2228 (z = Complex.exp (Complex.I * (5 * \u03c0 / 4))) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d)\n  (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (l2 : Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0) :\n  (z = Complex.exp (Complex.I * (\u03c0 / 4))) \u2228 (z = Complex.exp (Complex.I * (5 * \u03c0 / 4))) := by\n  rw [def_1]\n  rcases l3 with \u27e8hr, h\u03b8\u27e9\n  rw [show r = 1 \u2228 r = -1 by rw [\u2190 sq_eq_one_iff, hr]]\n  have hpos : r = 1 := by\n    have := tc_3\n    rw [def_1] at this\n    simp [Complex.ext_iff] at this\n    cases hr.symm \u25b8 this with\n    | inl h => exact h\n    | inr h => contradiction\n  rw [hpos, one_mul]\n  have hk : k = 0 \u2228 k = 1 := by\n    have h\u03b8' : \u03b8 = \u03c0 / 4 + k * \u03c0 := by\n      rw [\u2190 mul_div_cancel' (\u03c0 / 2 + 2 * k * \u03c0) (2 : \u211d) two_ne_zero, h\u03b8]\n      ring\n    have hre : 0 < (Complex.exp (\u03b8 * Complex.I)).re := by\n      rw [\u2190 def_1] at tc_3\n      simp [hpos] at tc_3\n      exact tc_3\n    simp [Complex.exp_re, Complex.cos] at hre\n    have hcos : 0 < cos \u03b8 := by\n      rw [Complex.exp_eq_exp_re_mul_sin_add_cos, Complex.norm_eq_abs, Complex.abs_exp_ofReal_mul_I,\n        mul_one] at hre\n      exact hre\n    rw [h\u03b8'] at hcos\n    have hcos0 : cos (\u03c0 / 4 + 0 * \u03c0) = cos (\u03c0 / 4) := by simp\n    have hcos1 : cos (\u03c0 / 4 + 1 * \u03c0) = cos (5 * \u03c0 / 4) := by ring_nf\n    have hcos0_pos : 0 < cos (\u03c0 / 4) := by simp [cos_pos, show \u03c0 / 4 < \u03c0 / 2 by linarith [pi_pos]]\n    have hcos1_neg : cos (5 * \u03c0 / 4) < 0 := by\n      have : 5 * \u03c0 / 4 \u2208 Ioc \u03c0 (2 * \u03c0) := by\n        constructor <;> linarith [pi_pos]\n      simp [cos_neg_of_pi_lt_of_lt_two_pi this]\n    cases' Int.eq_of_abs_le_two (by decide : |k| \u2264 2) with hk hk\n    \u00b7 left; exact hk\n    \u00b7 right; exact hk\n    \u00b7 cases hk <;> linarith\n  cases hk with\n  | inl hk0 =>\n    left\n    rw [hk0] at h\u03b8\n    simp at h\u03b8\n    rw [h\u03b8]\n    simp\n  | inr hk1 =>\n    right\n    rw [hk1] at h\u03b8\n    simp at h\u03b8\n    rw [h\u03b8]\n    simp\n    ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 6, "endLine": 18, "endColumn": 53, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  r = 1 \u2228 r = -1\ncase intro\nz : \u2102\nr \u03b8 : \u211d\nk : \u2124\ntc_1 : True\ntc_2 : z ^ 2 = Complex.I\ntc_3 : 0 < z.re\ndef_1 : z = \u2191r * Complex.exp (\u2191\u03b8 * Complex.I)\nl1 : \u2191r ^ 2 * Complex.exp (2 * \u2191\u03b8 * Complex.I) = Complex.I\nl2 : Complex.I = Complex.exp (Complex.I * (\u2191\u03c0 / 2 + 2 * \u2191k * \u2191\u03c0))\nhr : r ^ 2 = 1\nh\u03b8 : 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0\n\u22a2 \u2191r * Complex.exp (\u2191\u03b8 * Complex.I) = Complex.exp (Complex.I * (\u2191\u03c0 / 4)) \u2228\n    \u2191r * Complex.exp (\u2191\u03b8 * Complex.I) = Complex.exp (Complex.I * (5 * \u2191\u03c0 / 4))"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization accurately captures all components of the natural language statement. The type declarations, mathematical operations, and logical structure are correctly translated. The use of disjunction (\u2228) properly represents the two distinct solutions, and all mathematical notation is appropriately converted to Lean syntax. The formalization includes all necessary premises and reaches the same conclusion as stated in natural language.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma neg_l4\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d)\n  (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * exp (\u03b8 * I))\n  (l1 : r ^ 2 * exp (2 * \u03b8 * I) = I)\n  (l2 : I = exp (I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0) :\n  \u00ac((z = exp (I * (\u03c0 / 4))) \u2228 (z = exp (I * (5 * \u03c0 / 4)))) := by\n  intro h\n  cases h with\n  | inl h1 =>\n    rw [h1] at tc_3\n    simp only [exp_ofReal_mul_I, ofReal_re] at tc_3\n    have : (exp (I * (\u03c0 / 4))).re = Real.cos (\u03c0 / 4) := by simp [cos]\n    rw [this] at tc_3\n    norm_num at tc_3\n  | inr h2 =>\n    rw [h2] at tc_3\n    simp only [exp_ofReal_mul_I, ofReal_re] at tc_3\n    have : (exp (I * (5 * \u03c0 / 4))).re = Real.cos (5 * \u03c0 / 4) := by simp [cos]\n    rw [this] at tc_3\n    norm_num at tc_3"}, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "since $\\operatorname{Re}(e^{i5\\pi/4}) < 0$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^2 = i$ [tc_2];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_3];\n\u2022 $z=re^{i\\theta}$ is the polar form of $z$ [def_1];\n\u2022 $r^2e^{i2\\theta} = i$ [l1];\n\u2022 The polar form of $i$ is $e^{i(\\pi/2+2k\\pi)}$ for any integer k [l2];\n\u2022 $r^2=1$ and $2\\theta = \\pi/2+2k\\pi$ for some integer $k$ [l3];\n\u2022 The two distinct solutions for $z$ satisfying $z^2=i$ are $z = e^{i\\pi/4}$ and $z = e^{i5\\pi/4}$ [l4].\nTherefore, we conclude:\n\u2022 $\\operatorname{Re}(e^{i\\pi/4}) > 0$ and $\\operatorname{Re}(e^{i5\\pi/4}) < 0$ [l5].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (l2 : Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0)\n  (l4 : (z = Complex.exp (Complex.I * (\u03c0 / 4))) \u2228 (z = Complex.exp (Complex.I * (5 * \u03c0 / 4)))) :\n  (0 < (Complex.exp (Complex.I * (\u03c0 / 4))).re) \u2227 ((Complex.exp (Complex.I * (5 * \u03c0 / 4))).re < 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (l2 : Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0)\n  (l4 : (z = Complex.exp (Complex.I * (\u03c0 / 4))) \u2228 (z = Complex.exp (Complex.I * (5 * \u03c0 / 4)))) :\n  (0 < (Complex.exp (Complex.I * (\u03c0 / 4))).re) \u2227 ((Complex.exp (Complex.I * (5 * \u03c0 / 4))).re < 0) := by\n  have h1 : (Complex.exp (Complex.I * (\u03c0 / 4))).re = Real.cos (\u03c0 / 4) := by simp [Complex.exp_re]\n  have h2 : (Complex.exp (Complex.I * (5 * \u03c0 / 4))).re = Real.cos (5 * \u03c0 / 4) := by simp [Complex.exp_re]\n  have h3 : Real.cos (\u03c0 / 4) = Real.sqrt 2 / 2 := by\n    rw [cos_pi_div_four]\n    norm_num\n  have h4 : Real.cos (5 * \u03c0 / 4) = -Real.sqrt 2 / 2 := by\n    rw [show 5 * \u03c0 / 4 = \u03c0 + \u03c0 / 4 by ring]\n    rw [Complex.cos_add_pi]\n    rw [cos_pi_div_four]\n    norm_num\n  rw [h1, h2, h3, h4]\n  constructor\n  \u00b7 exact div_pos (Real.sqrt_pos.mpr zero_lt_two) zero_lt_two\n  \u00b7 simp only [neg_div]\n    exact neg_lt_zero.mpr (div_pos (Real.sqrt_pos.mpr zero_lt_two) zero_lt_two)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 20, "column": 4, "endLine": 20, "endColumn": 12, "data": "no goals to be solved"}, {"line": 23, "column": 8, "endLine": 23, "endColumn": 26, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  Complex.cos (?x + \u2191\u03c0)\nz : \u2102\nr \u03b8 : \u211d\nk : \u2124\ntc_1 : True\ntc_2 : z ^ 2 = Complex.I\ntc_3 : 0 < z.re\ndef_1 : z = \u2191r * Complex.exp (\u2191\u03b8 * Complex.I)\nl1 : \u2191r ^ 2 * Complex.exp (2 * \u2191\u03b8 * Complex.I) = Complex.I\nl2 : Complex.I = Complex.exp (Complex.I * (\u2191\u03c0 / 2 + 2 * \u2191k * \u2191\u03c0))\nl3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0\nl4 : z = Complex.exp (Complex.I * (\u2191\u03c0 / 4)) \u2228 z = Complex.exp (Complex.I * (5 * \u2191\u03c0 / 4))\nh1 : (Complex.exp (Complex.I * (\u2191\u03c0 / 4))).re = cos (\u03c0 / 4)\nh2 : (Complex.exp (Complex.I * (5 * \u2191\u03c0 / 4))).re = cos (5 * \u03c0 / 4)\nh3 : cos (\u03c0 / 4) = \u221a2 / 2\n\u22a2 cos (\u03c0 + \u03c0 / 4) = -\u221a2 / 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The complex number assumption is correctly handled through type declaration", "The equation z\u00b2 = i is accurately formalized using Complex.I", "The real part condition Re(z) > 0 is correctly expressed as 0 < z.re", "The polar form definition z = re^(i\u03b8) is properly represented", "The derived equation r\u00b2e^(i2\u03b8) = i is correctly formalized", "The polar form of i with integer parameter k is accurately captured", "Both conditions r\u00b2 = 1 and 2\u03b8 = \u03c0/2+2k\u03c0 are correctly conjoined", "The two distinct solutions are properly expressed as a disjunction", "The conclusion about real parts of the two solutions is correctly formalized as the goal", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma neg_l5\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * exp (\u03b8 * I))\n  (l1 : r ^ 2 * exp (2 * \u03b8 * I) = I)\n  (l2 : I = exp (I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0)\n  (l4 : (z = exp (I * (\u03c0 / 4))) \u2228 (z = exp (I * (5 * \u03c0 / 4)))) :\n  \u00ac((0 < (exp (I * (\u03c0 / 4))).re) \u2227 ((exp (I * (5 * \u03c0 / 4))).re < 0)) := by\n  simp only [exp_eq_exp_im_add_re]\n  simp only [re_ofReal_mul, re_exp_ofReal_mul_I, im_exp_ofReal_mul_I]\n  simp only [cos_pi_div_four, sin_pi_div_four]\n  have h1 : cos (5 * \u03c0 / 4) = -cos (\u03c0 / 4) := by\n    rw [show 5 * \u03c0 / 4 = \u03c0 + \u03c0 / 4 by ring]\n    exact cos_add_pi _\n  simp only [h1, neg_lt_zero]\n  norm_num"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "The condition $\\operatorname{Re}(z) > 0$ selects the solution $z = e^{i\\pi/4}$", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^2 = i$ [tc_2];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_3];\n\u2022 $z=re^{i\\theta}$ is the polar form of $z$ [def_1];\n\u2022 $r^2e^{i2\\theta} = i$ [l1];\n\u2022 The polar form of $i$ is $e^{i(\\pi/2+2k\\pi)}$ for any integer k [l2];\n\u2022 $r^2=1$ and $2\\theta = \\pi/2+2k\\pi$ for some integer $k$ [l3];\n\u2022 The two distinct solutions for $z$ satisfying $z^2=i$ are $z = e^{i\\pi/4}$ and $z = e^{i5\\pi/4}$ [l4];\n\u2022 $\\operatorname{Re}(e^{i\\pi/4}) > 0$ and $\\operatorname{Re}(e^{i5\\pi/4}) < 0$ [l5].\nTherefore, we conclude:\n\u2022 $z = e^{i\\pi/4}$ [l6].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (l2 : Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0)\n  (l4 : (z = Complex.exp (Complex.I * (\u03c0 / 4))) \u2228 (z = Complex.exp (Complex.I * (5 * \u03c0 / 4))))\n  (l5 : (0 < (Complex.exp (Complex.I * (\u03c0 / 4))).re) \u2227 ((Complex.exp (Complex.I * (5 * \u03c0 / 4))).re < 0)) :\n  z = Complex.exp (Complex.I * (\u03c0 / 4)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (l2 : Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0)\n  (l4 : (z = Complex.exp (Complex.I * (\u03c0 / 4))) \u2228 (z = Complex.exp (Complex.I * (5 * \u03c0 / 4))))\n  (l5 : (0 < (Complex.exp (Complex.I * (\u03c0 / 4))).re) \u2227 ((Complex.exp (Complex.I * (5 * \u03c0 / 4))).re < 0)) :\n  z = Complex.exp (Complex.I * (\u03c0 / 4)) := by\n  cases l4 with\n  | inl h => exact h\n  | inr h => \n    rw [h] at tc_3\n    have := l5.2\n    linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.8, "semantic_feedback": ["tc_1 is declared as True in Lean but represents 'z is complex' in natural language. However, z is properly typed as \u2102 in the signature, so the semantic meaning is preserved despite the misleading True assignment.", "Perfect correspondence between z\u00b2 = i and the Lean formalization.", "Perfect match - Re(z) > 0 is equivalent to 0 < z.re.", "The polar form definition matches perfectly between natural language and Lean.", "The equation r\u00b2e^{i2\u03b8} = i is correctly formalized.", "Natural language describes a general property for any integer k, while Lean fixes a specific k. This is a minor structural difference but captures the essential mathematical meaning.", "The conjunction of r\u00b2 = 1 and the angle condition is perfectly captured.", "The disjunction of the two solutions is correctly formalized.", "The real part conditions for both exponential forms match perfectly.", "The conclusion z = e^{i\u03c0/4} is perfectly formalized."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "In Cartesian form, $z=e^{i\\pi/4}$ is $z = \\frac{1}{\\sqrt{2}} + i\\frac{1}{\\sqrt{2}}$.", "statement": "We assume:\n\u2022 $z$ is a complex number [tc_1];\n\u2022 $z^2 = i$ [tc_2];\n\u2022 $\\operatorname{Re}(z) > 0$ [tc_3];\n\u2022 $z=re^{i\\theta}$ is the polar form of $z$ [def_1];\n\u2022 $r^2e^{i2\\theta} = i$ [l1];\n\u2022 The polar form of $i$ is $e^{i(\\pi/2+2k\\pi)}$ for any integer k [l2];\n\u2022 $r^2=1$ and $2\\theta = \\pi/2+2k\\pi$ for some integer $k$ [l3];\n\u2022 The two distinct solutions for $z$ satisfying $z^2=i$ are $z = e^{i\\pi/4}$ and $z = e^{i5\\pi/4}$ [l4];\n\u2022 $\\operatorname{Re}(e^{i\\pi/4}) > 0$ and $\\operatorname{Re}(e^{i5\\pi/4}) < 0$ [l5];\n\u2022 $z = e^{i\\pi/4}$ [l6].\nTherefore, we conclude:\n\u2022 $z = \\frac{1}{\\sqrt{2}} + i\\frac{1}{\\sqrt{2}}$ [ts_1].", "dependencies": ["tc_1", "tc_2", "tc_3", "def_1", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = Complex.I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * Complex.exp (\u03b8 * Complex.I))\n  (l1 : r ^ 2 * Complex.exp (2 * \u03b8 * Complex.I) = Complex.I)\n  (l2 : Complex.I = Complex.exp (Complex.I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0)\n  (l4 : (z = Complex.exp (Complex.I * (\u03c0 / 4))) \u2228 (z = Complex.exp (Complex.I * (5 * \u03c0 / 4))))\n  (l5 : (0 < (Complex.exp (Complex.I * (\u03c0 / 4))).re) \u2227 ((Complex.exp (Complex.I * (5 * \u03c0 / 4))).re < 0))\n  (l6 : z = Complex.exp (Complex.I * (\u03c0 / 4))) :\n  z = (1 / (Real.sqrt 2)) + Complex.I * (1 / (Real.sqrt 2)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 3}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma ts_1\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * exp (\u03b8 * I))\n  (l1 : r ^ 2 * exp (2 * \u03b8 * I) = I)\n  (l2 : I = exp (I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0)\n  (l4 : (z = exp (I * (\u03c0 / 4))) \u2228 (z = exp (I * (5 * \u03c0 / 4))))\n  (l5 : (0 < (exp (I * (\u03c0 / 4))).re) \u2227 ((exp (I * (5 * \u03c0 / 4))).re < 0))\n  (l6 : z = exp (I * (\u03c0 / 4))) :\n  z = (1 / (Real.sqrt 2)) + I * (1 / (Real.sqrt 2)) := by\n  rw [l6]\n  simp only [exp_eq_exp_\u2102]\n  rw [\u2190 exp_mul_I]\n  simp only [ofReal_div, ofReal_mul, ofReal_one]\n  simp [cos_pi_div_four, sin_pi_div_four]\n  field_simp\n  rfl", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 20, "column": 6, "endLine": 20, "endColumn": 17, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  Complex.cos ?x + Complex.sin ?x * I\nz : \u2102\nr \u03b8 : \u211d\nk : \u2124\ntc_1 : True\ntc_2 : z ^ 2 = I\ntc_3 : 0 < z.re\ndef_1 : z = \u2191r * cexp (\u2191\u03b8 * I)\nl1 : \u2191r ^ 2 * cexp (2 * \u2191\u03b8 * I) = I\nl2 : I = cexp (I * (\u2191\u03c0 / 2 + 2 * \u2191k * \u2191\u03c0))\nl3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0\nl4 : z = cexp (I * (\u2191\u03c0 / 4)) \u2228 z = cexp (I * (5 * \u2191\u03c0 / 4))\nl5 : 0 < (cexp (I * (\u2191\u03c0 / 4))).re \u2227 (cexp (I * (5 * \u2191\u03c0 / 4))).re < 0\nl6 : z = cexp (I * (\u2191\u03c0 / 4))\n\u22a2 NormedSpace.exp \u2102 (I * (\u2191\u03c0 / 4)) = 1 / \u2191\u221a2 + I * (1 / \u2191\u221a2)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1 in natural language states 'z is a complex number' but Lean has '(tc_1 : True)' which is meaningless. However, z is properly declared as complex type in the signature, so the semantic meaning is preserved.", "tc_2 perfectly captures z\u00b2 = i with correct Lean syntax", "tc_3 correctly represents Re(z) > 0, just with reordered inequality", "def_1 accurately formalizes the polar form definition z = re^{i\u03b8}", "l1 correctly represents the equation r\u00b2e^{i2\u03b8} = i", "l2 properly formalizes the polar form of i with the general form including integer k", "l3 accurately captures both conditions r\u00b2=1 and the angle relationship using logical conjunction", "l4 correctly represents the two solutions using logical disjunction, capturing that z equals one of the two values", "l5 properly formalizes the real part conditions for both exponential expressions", "l6 accurately represents the conclusion that z equals the specific exponential form", "ts_1 perfectly captures the final result in rectangular form with proper complex number syntax", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.9 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Complex\n\nlemma neg_ts_1\n  (z : \u2102) (r : \u211d) (\u03b8 : \u211d) (k : \u2124)\n  (tc_1 : True)\n  (tc_2 : z ^ 2 = I)\n  (tc_3 : 0 < z.re)\n  (def_1 : z = r * exp (\u03b8 * I))\n  (l1 : r ^ 2 * exp (2 * \u03b8 * I) = I)\n  (l2 : I = exp (I * (\u03c0 / 2 + 2 * \u2191k * \u03c0)))\n  (l3 : r ^ 2 = 1 \u2227 2 * \u03b8 = \u03c0 / 2 + 2 * \u2191k * \u03c0)\n  (l4 : (z = exp (I * (\u03c0 / 4))) \u2228 (z = exp (I * (5 * \u03c0 / 4))))\n  (l5 : (0 < (exp (I * (\u03c0 / 4))).re) \u2227 ((exp (I * (5 * \u03c0 / 4))).re < 0))\n  (l6 : z = exp (I * (\u03c0 / 4))) :\n  \u00ac(z = (1 / (Real.sqrt 2)) + I * (1 / (Real.sqrt 2))) := by\n  rw [l6]\n  simp only [exp_eq_exp_im_add_re, cos, sin]\n  field_simp\n  norm_num"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    