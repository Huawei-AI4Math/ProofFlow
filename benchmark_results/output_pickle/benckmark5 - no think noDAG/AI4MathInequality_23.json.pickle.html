
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that if $x, y, z$ are positive real numbers satisfying $x^2 + y^2 + z^2 + 2xyz = 1$, then $xyz \leq \\frac{1}{8}$.

Proof: Let $x, y, z > 0$ satisfy $x^2+y^2+z^2+2xyz=1$ and denote $P = xyz$. Then $x^2+y^2+z^2 = 1-2P$, and by AMâ€“GM, $x^2+y^2+z^2 \ge 3(xyz)^{2/3} = 3P^{2/3}$. Combining these gives $1-2P \ge 3P^{2/3}$. Letting $t = P^{1/3}$, this becomes $1 - 2t^3 \ge 3t^2$, or equivalently $2t^3 + 3t^2 - 1 \le 0$. Factoring, we get $(2t-1)(t+1)^2 \le 0$, and since $t>0$, it follows that $2t-1 \le 0$, so $t \le rac{1}{2}$. Therefore $xyz = t^3 \le rac{1}{8}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let x, y, z > 0", "statement": "Premise:\n\u2022 x, y, z are positive real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (x y z : \u211d)\n(tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly declares x, y, z as real numbers and states they are positive using the conjunction 0 < x \u2227 0 < y \u2227 0 < z, which perfectly captures 'x, y, z are positive real numbers'", "The Lean formalization contains no conclusions, which matches the natural language statement that explicitly notes no conclusions are derived in this premise step"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "satisfy $x^2+y^2+z^2+2xyz=1$", "statement": "Premise:\n\u2022 x, y, z are positive real numbers [tc_1].\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (x y z : \u211d)\n(tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n(tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that x, y, z are positive real numbers. The variable declaration establishes them as real numbers, and tc_1 explicitly states they are positive using the conjunction 0 < x \u2227 0 < y \u2227 0 < z.", "The Lean formalization perfectly matches the mathematical equation. The expression x^2 + y^2 + z^2 + 2 * x * y * z = 1 in Lean directly corresponds to x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 in the natural language, with appropriate Lean syntax for exponentiation and multiplication."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "and denote P = xyz.", "statement": "Definition:\n\u2022 x, y, z are positive real numbers [tc_1].\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2].\n\u2022 Let P be the product of x, y, and z, i.e., P = xyz [def_1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (x y z : \u211d)\n(tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n(tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n(def_1 : x * y * z = P)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.67, "semantic_feedback": ["The Lean formalization correctly captures that x, y, z are positive real numbers using the conjunction of inequalities 0 < x \u2227 0 < y \u2227 0 < z", "The Lean formalization correctly captures the constraint equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 using appropriate mathematical notation", "The natural language defines P = xyz, but the Lean formalization has x * y * z = P (reversed order). While mathematically equivalent due to equality being symmetric, this is a slight structural difference from the natural language definition"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Then x^2+y^2+z^2 = 1-2P", "statement": "We assume:\n\u2022 x, y, z are positive real numbers [tc_1];\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2];\n\u2022 Let P be the product of x, y, and z, i.e., P = xyz [def_1].\nTherefore, we conclude:\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P [l1].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (x y z P : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P) :\n  x^2 + y^2 + z^2 = 1 - 2 * P := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (x y z P : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P) :\n  x^2 + y^2 + z^2 = 1 - 2 * P := by\n  rw [\u2190 tc_2]\n  rw [\u2190 def_1]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 4}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations and positivity constraints are correctly captured", "The main constraint equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 is perfectly translated", "The definition of P as the product xyz is correctly represented (equality direction doesn't affect logical meaning)", "The conclusion x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P is exactly matched in the Lean formalization"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "and by AM\u2013GM, $x^2+y^2+z^2 \\ge 3(xyz)^{2/3} = 3P^{2/3}$.", "statement": "We assume:\n\u2022 x, y, z are positive real numbers [tc_1];\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2];\n\u2022 Let P be the product of x, y, and z, i.e., P = xyz [def_1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P [l1].\nTherefore, we conclude:\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 \u2265 3 * P^(2/3) [l2].", "dependencies": ["tc_1", "tc_2", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (x y z P : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P) :\n  x^2 + y^2 + z^2 \u2265 3 * P^(2/3) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (x y z P : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P) :\n  x^2 + y^2 + z^2 \u2265 3 * P^(2/3) := by\n  rw [l1]\n  have hP : P \u2264 1/2 := by\n    have h := tc_2\n    rw [def_1, l1] at h\n    ring_nf at h\n    have h' : (x + y + z - 1) * (x + y + z + 1) + 2 * (x*y + y*z + z*x - 1) + 4 * P = 0 := by ring\n    have h'' : x*y + y*z + z*x \u2264 1 := by\n      have := add_nonneg (add_nonneg (mul_nonneg (le_of_lt tc_1.1) (le_of_lt tc_1.2.1)) \n        (mul_nonneg (le_of_lt tc_1.2.1) (le_of_lt tc_1.2.2))) \n        (mul_nonneg (le_of_lt tc_1.1) (le_of_lt tc_1.2.2))\n      linarith [h']\n    have h''' : P \u2264 ((x*y + y*z + z*x)/3)^(3/2) := by\n      rw [\u2190 def_1]\n      refine Real.geom_mean_le_arith_mean3 (le_of_lt tc_1.1) (le_of_lt tc_1.2.1) (le_of_lt tc_1.2.2)\n    refine le_trans h''' ?_\n    apply pow_le_pow_of_le_left (div_nonneg (by linarith) (by norm_num)) (by linarith) (by norm_num)\n  have h : 1 - 2 * P \u2265 3 * P^(2/3) := by\n    have h\u2081 : P^(2/3) \u2264 (1/2)^(2/3) := by\n      refine Real.rpow_le_rpow (le_of_lt (mul_pos (mul_pos tc_1.1 tc_1.2.1) tc_1.2.2)) hP ?_\n      norm_num\n    have h\u2082 : 3 * P^(2/3) \u2264 3 * (1/2)^(2/3) := mul_le_mul_of_nonneg_left h\u2081 (by norm_num)\n    have h\u2083 : (1/2)^(2/3) \u2264 1/3 := by\n      rw [\u2190 Real.rpow_one (1/2), \u2190 Real.rpow_mul (le_of_lt (by norm_num))]\n      norm_num\n      refine Real.rpow_le_rpow_of_exponent_ge (by norm_num) (by norm_num) (by norm_num)\n    have h\u2084 : 3 * (1/2)^(2/3) \u2264 1 := by linarith [h\u2083]\n    linarith [h\u2082, h\u2084]\n  exact h", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 8, "endLine": 15, "endColumn": 13, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  x * y * z\nx y z P : \u211d\ntc_1 : 0 < x \u2227 0 < y \u2227 0 < z\ntc_2 : x ^ 2 + y ^ 2 + z ^ 2 + 2 * x * y * z = 1\ndef_1 : x * y * z = P\nl1 : x ^ 2 + y ^ 2 + z ^ 2 = 1 - 2 * P\nh : x ^ 2 + y ^ 2 + z ^ 2 + 2 * x * y * z = 1\n\u22a2 P \u2264 1 / 2"}, {"line": 30, "column": 87, "endLine": 30, "endColumn": 89, "data": "application type mismatch\n  rpow_le_rpow (le_of_lt (mul_pos (mul_pos tc_1.left tc_1.right.left) tc_1.right.right)) hP\nargument\n  hP\nhas type\n  P \u2264 1 / 2 : Prop\nbut is expected to have type\n  x * y * z \u2264 ?m.11484 : Prop"}, {"line": 34, "column": 10, "endLine": 34, "endColumn": 31, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  1 / 2\nx y z P : \u211d\ntc_1 : 0 < x \u2227 0 < y \u2227 0 < z\ntc_2 : x ^ 2 + y ^ 2 + z ^ 2 + 2 * x * y * z = 1\ndef_1 : x * y * z = P\nl1 : x ^ 2 + y ^ 2 + z ^ 2 = 1 - 2 * P\nhP : P \u2264 1 / 2\nh\u2081 : P ^ (2 / 3) \u2264 (1 / 2) ^ (2 / 3)\nh\u2082 : 3 * P ^ (2 / 3) \u2264 3 * (1 / 2) ^ (2 / 3)\n\u22a2 (1 / 2) ^ (2 / 3) \u2264 1 / 3"}, {"line": 37, "column": 40, "endLine": 37, "endColumn": 53, "data": "linarith failed to find a contradiction\ncase a\nx y z P : \u211d\ntc_1 : 0 < x \u2227 0 < y \u2227 0 < z\ntc_2 : x ^ 2 + y ^ 2 + z ^ 2 + 2 * x * y * z = 1\ndef_1 : x * y * z = P\nl1 : x ^ 2 + y ^ 2 + z ^ 2 = 1 - 2 * P\nhP : P \u2264 1 / 2\nh\u2081 : P ^ (2 / 3) \u2264 (1 / 2) ^ (2 / 3)\nh\u2082 : 3 * P ^ (2 / 3) \u2264 3 * (1 / 2) ^ (2 / 3)\nh\u2083 : (1 / 2) ^ (2 / 3) \u2264 1 / 3\na\u271d : 3 * (1 / 2) ^ (2 / 3) > 1\n\u22a2 False failed"}, {"line": 38, "column": 4, "endLine": 38, "endColumn": 21, "data": "linarith failed to find a contradiction\ncase a\nx y z P : \u211d\ntc_1 : 0 < x \u2227 0 < y \u2227 0 < z\ntc_2 : x ^ 2 + y ^ 2 + z ^ 2 + 2 * x * y * z = 1\ndef_1 : x * y * z = P\nl1 : x ^ 2 + y ^ 2 + z ^ 2 = 1 - 2 * P\nhP : P \u2264 1 / 2\nh\u2081 : P ^ (2 / 3) \u2264 (1 / 2) ^ (2 / 3)\nh\u2082 : 3 * P ^ (2 / 3) \u2264 3 * (1 / 2) ^ (2 / 3)\nh\u2083 : (1 / 2) ^ (2 / 3) \u2264 1 / 3\nh\u2084 : 3 * (1 / 2) ^ (2 / 3) \u2264 1\na\u271d : 3 * P ^ (2 / 3) > 1 - 2 * P\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Variable declarations and positivity constraints are correctly captured. The additional P : \u211d declaration is logically necessary and consistent.", "The main equation constraint x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 is perfectly translated to Lean syntax.", "The product definition is correctly formalized. The equation x * y * z = P is mathematically equivalent to P = xyz.", "The derived equation x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P is exactly matched in the Lean formalization.", "The main inequality conclusion x\u00b2 + y\u00b2 + z\u00b2 \u2265 3 * P^(2/3) is perfectly captured.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  (x y z P : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P) :\n  \u00ac (x^2 + y^2 + z^2 \u2265 3 * P^(2/3)) := by\n  intro h\n  have h_AM_GM : x^2 + y^2 + z^2 \u2265 3 * (x * y * z)^(2/3) := by\n    have := Real.arith_mean_geom_mean3 (x^2) (y^2) (z^2)\n    simp [\u2190mul_pow] at this\n    rw [\u2190def_1] at this\n    exact this\n  rw [l1] at h_AM_GM\n  have h_bound : P \u2264 1/8 := by\n    have : x^2 + y^2 + z^2 + 2 * P = 1 := by rw [tc_2, def_1]\n    linarith [h_AM_GM]\n  have h_eq : x = y \u2227 y = z := by\n    have : x^2 = y^2 \u2227 y^2 = z^2 := by\n      apply Real.eq_of_arith_mean_eq_geom_mean3\n      \u00b7 positivity\n      \u00b7 rw [\u2190mul_pow]\n        simp [h_AM_GM.le, h_bound.le]\n    simp [this]\n  rcases h_eq with \u27e8rfl, rfl\u27e9\n  simp [def_1] at *\n  have : 3 * x^2 + 2 * x^3 = 1 := by linarith [tc_2]\n  have hx : x = 1/2 := by\n    have : (2 * x - 1) * (x^2 + x + 1) = 0 := by\n      linear_combination this - (3 * x^2 + 2 * x^3 - 1)\n    simp at this\n    cases this with\n    | inl h => linarith [h]\n    | inr h =>\n      have : x^2 + x + 1 > 0 := by nlinarith\n      contradiction\n  rw [hx] at *\n  norm_num at h"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Combining these gives $1-2P \\ge 3P^{2/3}$.", "statement": "We assume:\n\u2022 x, y, z are positive real numbers [tc_1];\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2];\n\u2022 Let P be the product of x, y, and z, i.e., P = xyz [def_1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P [l1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 \u2265 3 * P^(2/3) [l2].\nTherefore, we conclude:\n\u2022 1 - 2P \u2265 3 * P^(2/3) [l3].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (x y z P : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3)) :\n  1 - 2 * P \u2265 3 * P^(2/3) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (x y z P : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3)) :\n  1 - 2 * P \u2265 3 * P^(2/3) := by\n  rw [l1] at l2\n  exact l2", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable types and positivity constraints are correctly captured. The additional declaration of P as real is mathematically consistent.", "The constraint equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 is perfectly translated to Lean syntax.", "The definition P = xyz is correctly represented as x * y * z = P (equivalent forms).", "Lemma l1 stating x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P is perfectly formalized.", "Lemma l2 stating the inequality x\u00b2 + y\u00b2 + z\u00b2 \u2265 3 * P^(2/3) is correctly captured.", "The conclusion 1 - 2P \u2265 3 * P^(2/3) is perfectly formalized in the goal statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_2": {"id": "def_2", "natural_language": "Letting $t = P^{1/3}$", "statement": "Definition:\n\u2022 x, y, z are positive real numbers [tc_1];\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2];\n\u2022 Let P be the product of x, y, and z, i.e., P = xyz [def_1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P [l1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 \u2265 3 * P^(2/3) [l2];\n\u2022 1 - 2P \u2265 3 * P^(2/3) [l3];\n\u2022 Let t = P^(1/3) [def_2].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (x y z P t : \u211d)\n(tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n(tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n(def_1 : x * y * z = P)\n(l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n(l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n(l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n(def_2 : t = P^(1/3))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.86, "semantic_feedback": ["The Lean formalization correctly captures that x, y, z are positive real numbers using conjunction of strict inequalities", "The Lean formalization perfectly matches the constraint equation with appropriate operator precedence", "The natural language states P = xyz while Lean states x * y * z = P. These are mathematically equivalent but the order is reversed", "The Lean formalization correctly represents the algebraic relationship derived from the constraint", "The Lean formalization correctly captures the inequality involving the fractional power", "The Lean formalization correctly represents the derived inequality combining previous results", "The Lean formalization perfectly matches the definition of t as the cube root of P"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l4": {"id": "l4", "natural_language": "this becomes $1 - 2t^3 \\ge 3t^2$, or equivalently $2t^3 + 3t^2 - 1 \\le 0$.", "statement": "We assume:\n\u2022 x, y, z are positive real numbers [tc_1];\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2];\n\u2022 Let P be the product of x, y, and z, i.e., P = xyz [def_1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P [l1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 \u2265 3 * P^(2/3) [l2];\n\u2022 1 - 2P \u2265 3 * P^(2/3) [l3];\n\u2022 Let t = P^(1/3) [def_2].\nTherefore, we conclude:\n\u2022 2t\u00b3 + 3t\u00b2 - 1 \u2264 0 [l4].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3)) :\n  2 * t^3 + 3 * t^2 - 1 \u2264 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3)) :\n  2 * t^3 + 3 * t^2 - 1 \u2264 0 := by\n  have hP : 0 \u2264 P := by\n    rw [\u2190 def_1]\n    positivity\n  rw [def_2]\n  have h : (0:\u211d) < 3 := by norm_num\n  rw [\u2190 mul_le_mul_right h]\n  ring_nf\n  rw [\u2190 mul_assoc, \u2190 pow_add]\n  norm_num\n  rw [\u2190 mul_assoc]\n  norm_num\n  rw [\u2190 pow_add]\n  norm_num\n  rw [\u2190 def_2]\n  rw [\u2190 l1] at l2\n  linarith [l3]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 17, "column": 4, "endLine": 17, "endColumn": 14, "data": "failed to prove positivity/nonnegativity/nonzeroness"}, {"line": 22, "column": 6, "endLine": 22, "endColumn": 17, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a * (?b * ?c)\nx y z P t : \u211d\ntc_1 : 0 < x \u2227 0 < y \u2227 0 < z\ntc_2 : x ^ 2 + y ^ 2 + z ^ 2 + 2 * x * y * z = 1\ndef_1 : x * y * z = P\nl1 : x ^ 2 + y ^ 2 + z ^ 2 = 1 - 2 * P\nl2 : x ^ 2 + y ^ 2 + z ^ 2 \u2265 3 * P ^ (2 / 3)\nl3 : 1 - 2 * P \u2265 3 * P ^ (2 / 3)\ndef_2 : t = P ^ (1 / 3)\nhP : 0 \u2264 P\nh : 0 < 3\n\u22a2 12 \u2264 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly and completely captures all the mathematical content from the natural language. All assumptions, definitions, and the conclusion are accurately represented. The additional explicit variable declarations (P, t) in the parameter list are appropriate for Lean syntax and don't change the logical meaning. The mathematical relationships, inequalities, and the final conclusion are all faithfully translated.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l4\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3)) :\n  \u00ac (2 * t^3 + 3 * t^2 - 1 \u2264 0) := by\n  rw [def_2]\n  simp\n  have h : P = 1/4 := by\n    have h1 : 1 - 2 * P = 3 * P^(2/3) := by\n      apply le_antisymm\n      \u00b7 rw [\u2190 l1]\n        exact l3\n      \u00b7 rw [\u2190 l1]\n        exact l2\n    have h2 : (1 - 2 * P)^3 = (3 * P^(2/3))^3 := by congr\n    ring_nf at h2\n    simp at h2\n    have h3 : 64 * P^3 - 96 * P^2 + 36 * P - 4 = 0 := by\n      rw [\u2190 sub_eq_zero]\n      exact h2\n    have h4 : 16 * P^3 - 24 * P^2 + 9 * P - 1 = 0 := by\n      linear_combination h3 / 4\n    have h5 : (4 * P - 1)^2 * P = 1 := by\n      ring_nf\n      rw [\u2190 h4]\n      ring\n    have h6 : P = 1/4 \u2228 P = (1 + \u221a5)/4 \u2228 P = (1 - \u221a5)/4 := by\n      rw [\u2190 sub_eq_zero]\n      have h7 : P * (4 * P - 1)^2 - 1 = 0 := by rw [h5]\n      ring_nf at h7\n      have h8 : (4 * P - 1) * (4 * P^2 - 3 * P + 1) = 0 := by\n        linear_combination h7\n      rw [mul_eq_zero] at h8\n      cases h8\n      \u00b7 left\n        linear_combination h8\n      \u00b7 right\n        have h9 : 4 * P^2 - 3 * P + 1 = 0 := by assumption\n        have h10 : discriminant 4 (-3) 1 = (-3)^2 - 4 * 4 * 1 := by rfl\n        simp at h10\n        have h11 : P = (3 + \u221a (discriminant 4 (-3) 1)) / (2 * 4) \u2228 P = (3 - \u221a (discriminant 4 (-3) 1)) / (2 * 4) := by\n          apply quadratic_eq_zero_iff.2 \u27e8h10, h9\u27e9\n        rw [h10] at h11\n        simp at h11\n        exact h11\n    cases h6\n    \u00b7 exact h6\n    \u00b7 cases h6\n      \u00b7 have h12 : (1 + \u221a5)/4 > 1/4 := by\n          have h13 : \u221a5 > 1 := by\n            rw [sqrt_lt]\n            \u00b7 norm_num\n            \u00b7 norm_num\n          linarith\n        have h14 : P = (1 + \u221a5)/4 \u2192 False := by\n          intro h\n          have h15 : 1 - 2 * P = 3 * P^(2/3) := by\n            apply le_antisymm\n            \u00b7 rw [\u2190 l1]\n              exact l3\n            \u00b7 rw [\u2190 l1]\n              exact l2\n          rw [h] at h15\n          have h16 : (1 - \u221a5)/2 = 3 * ((1 + \u221a5)/4)^(2/3) := by\n            ring_nf at h15\n            exact h15\n          have h17 : (1 - \u221a5)/2 < 0 := by\n            have h18 : \u221a5 > 2 := by\n              rw [sqrt_lt]\n              \u00b7 norm_num\n              \u00b7 norm_num\n            linarith\n          have h19 : 3 * ((1 + \u221a5)/4)^(2/3) > 0 := by\n            have h20 : (1 + \u221a5)/4 > 0 := by\n              have h21 : \u221a5 > 0 := by\n                rw [sqrt_pos]\n                norm_num\n              linarith\n            have h22 : ((1 + \u221a5)/4)^(2/3) > 0 := by\n              apply rpow_pos_of_pos h20\n            linarith\n          linarith\n        contradiction\n      \u00b7 have h23 : (1 - \u221a5)/4 < 0 := by\n          have h24 : \u221a5 > 2 := by\n            rw [sqrt_lt]\n            \u00b7 norm_num\n            \u00b7 norm_num\n          linarith\n        have h25 : P > 0 := by\n          rw [def_1]\n          exact mul_pos (mul_pos tc_1.1 tc_1.2.1) tc_1.2.2\n        linarith\n  rw [h]\n  norm_num\n  rw [rpow_def_of_pos (by norm_num)]\n  norm_num"}, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Factoring, we get $(2t-1)(t+1)^2 \\le 0$", "statement": "We assume:\n\u2022 x, y, z are positive real numbers [tc_1];\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2];\n\u2022 Let P be the product of x, y, and z, i.e., P = xyz [def_1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P [l1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 \u2265 3 * P^(2/3) [l2];\n\u2022 1 - 2P \u2265 3 * P^(2/3) [l3];\n\u2022 Let t = P^(1/3) [def_2];\n\u2022 2t\u00b3 + 3t\u00b2 - 1 \u2264 0 [l4].\nTherefore, we conclude:\n\u2022 (2t - 1) * (t + 1)\u00b2 \u2264 0 [l5].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "def_2", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0) :\n  (2 * t - 1) * (t + 1)^2 \u2264 0 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0) :\n  (2 * t - 1) * (t + 1)^2 \u2264 0 := by\n  have h : 2 * t^3 + 3 * t^2 - 1 = (2 * t - 1) * (t + 1)^2 := by\n    ring\n  rw [\u2190h]\n  exact l4", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization perfectly captures all components of the natural language premise. Each assumption (tc_1, tc_2, def_1, l1-l4) is correctly translated with proper mathematical notation. The conclusion (l5) is accurately stated as the goal. The additional type declarations for variables are standard Lean practice and don't contradict the natural language. All mathematical relationships, inequalities, and logical dependencies are preserved exactly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "since t>0", "statement": "We assume:\n\u2022 x, y, z are positive real numbers [tc_1];\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2];\n\u2022 Let P be the product of x, y, and z, i.e., P = xyz [def_1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P [l1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 \u2265 3 * P^(2/3) [l2];\n\u2022 1 - 2P \u2265 3 * P^(2/3) [l3];\n\u2022 Let t = P^(1/3) [def_2];\n\u2022 2t\u00b3 + 3t\u00b2 - 1 \u2264 0 [l4];\n\u2022 (2t - 1) * (t + 1)\u00b2 \u2264 0 [l5].\nTherefore, we conclude:\n\u2022 t > 0 [l6].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "def_2", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0)\n  (l5 : (2 * t - 1) * (t + 1)^2 \u2264 0) :\n  0 < t := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0)\n  (l5 : (2 * t - 1) * (t + 1)^2 \u2264 0) :\n  0 < t := by\n  have hP : 0 < P := by\n    rw [\u2190 def_1]\n    exact mul_pos (mul_pos tc_1.1 tc_1.2.1) tc_1.2.2\n  rw [def_2]\n  exact Real.rpow_pos_of_pos hP (1/3)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 21, "column": 2, "endLine": 21, "endColumn": 37, "data": "type mismatch\n  rpow_pos_of_pos hP (1 / 3)\nhas type\n  0 < P ^ ((1 : \u211d) / 3) : Prop\nbut is expected to have type\n  0 < P ^ ((1 : \u2115) / 3) : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization accurately captures all mathematical statements from the natural language. Each assumption, definition, and derived statement has a direct correspondence. The variable types are appropriately declared as real numbers, the positivity constraints are correctly expressed, and all mathematical expressions (equations, inequalities, exponentiation) are properly translated. The logical structure of premises leading to a conclusion is preserved, with all assumptions listed as hypotheses and the conclusion stated as the goal to prove.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l6\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0)\n  (l5 : (2 * t - 1) * (t + 1)^2 \u2264 0) :\n  \u00ac 0 < t := by\n  have h : t \u2264 1/2 := by\n    have h1 := l5\n    simp at h1\n    cases h1 with\n    | inl h1 => linarith\n    | inr h1 => rw [eq_of_sub_eq_zero h1]; norm_num\n  rw [def_2] at h\n  have hP : P \u2264 (1/2)^3 := by\n    rw [\u2190 Real.rpow_le_rpow_iff (by positivity) (by norm_num) (by norm_num : 0 < (3:\u211d))]\n    simp [def_2, h]\n    norm_num\n  rw [l1] at l2\n  have h' : 1 - 2 * P \u2265 3 * P^(2/3) := l3\n  rw [\u2190 l1] at h'\n  have h'' : P = (1/2)^3 := by\n    have := eq_of_le_of_ge hP (by rw [\u2190 h']; linarith)\n    assumption\n  rw [h''] at def_2\n  rw [def_2]\n  norm_num"}, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "it follows that $2t-1 \\le 0$, so $t \\le \\frac{1}{2}$.", "statement": "We assume:\n\u2022 x, y, z are positive real numbers [tc_1];\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2];\n\u2022 Let P be the product of x, y, and z, i.e., P = xyz [def_1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P [l1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 \u2265 3 * P^(2/3) [l2];\n\u2022 1 - 2P \u2265 3 * P^(2/3) [l3];\n\u2022 Let t = P^(1/3) [def_2];\n\u2022 2t\u00b3 + 3t\u00b2 - 1 \u2264 0 [l4];\n\u2022 (2t - 1) * (t + 1)\u00b2 \u2264 0 [l5];\n\u2022 t > 0 [l6].\nTherefore, we conclude:\n\u2022 t \u2264 1/2 [l7].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "def_2", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0)\n  (l5 : (2 * t - 1) * (t + 1)^2 \u2264 0)\n  (l6 : 0 < t) :\n  t \u2264 1/2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0)\n  (l5 : (2 * t - 1) * (t + 1)^2 \u2264 0)\n  (l6 : 0 < t) :\n  t \u2264 1/2 := by\n  have h1 : (t + 1)^2 > 0 := by nlinarith [l6]\n  have h2 : 2 * t - 1 \u2264 0 := by\n    rw [\u2190 mul_le_mul_right h1]\n    exact l5\n  linarith [h2]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 21, "column": 4, "endLine": 21, "endColumn": 12, "data": "type mismatch\n  l5\nhas type\n  (2 * t - 1) * (t + 1) ^ 2 \u2264 0 : Prop\nbut is expected to have type\n  (2 * t - 1) * (t + 1) ^ 2 \u2264 0 * (t + 1) ^ 2 : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical statements from the natural language. All variables are properly typed as real numbers with appropriate positivity constraints. The main equation, product definition, derived inequalities, substitution variable, polynomial constraints, and final conclusion are all accurately represented. The slight differences in notation (e.g., explicit multiplication symbols, reordered equalities) are standard mathematical equivalences that preserve the logical meaning.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "NL statement", "error_report": "Formalization appears correct (score=1.0 > 0.6), and the prover could prove the NEGATION of the NL lemma. The NL statement is likely incorrect."}, "solved_negation": {"lean_verify": true, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l7\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0)\n  (l5 : (2 * t - 1) * (t + 1)^2 \u2264 0)\n  (l6 : 0 < t) :\n  \u00ac t \u2264 1/2 := by\n  intro h\n  have h1 : (2 * t - 1) * (t + 1)^2 \u2264 0 := l5\n  have h2 : t + 1 > 0 := by linarith [l6]\n  have h3 : (t + 1)^2 > 0 := by nlinarith\n  have h4 : 2 * t - 1 \u2264 0 := by\n    rw [mul_nonpos_iff] at h1\n    cases h1 with\n    | inl h =>\n      cases h with\n      | intro hle hpos =>\n        linarith [hpos]\n    | inr h =>\n      cases h with\n      | intro hge hneg =>\n        linarith [hneg]\n  linarith [h4, h]"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Therefore $xyz = t^3 \\le \\frac{1}{8}$.", "statement": "We assume:\n\u2022 x, y, z are positive real numbers [tc_1];\n\u2022 x, y, z satisfy the equation x\u00b2 + y\u00b2 + z\u00b2 + 2xyz = 1 [tc_2];\n\u2022 Let P be the product of x, y, and z, i.e., P = xyz [def_1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 = 1 - 2P [l1];\n\u2022 x\u00b2 + y\u00b2 + z\u00b2 \u2265 3 * P^(2/3) [l2];\n\u2022 1 - 2P \u2265 3 * P^(2/3) [l3];\n\u2022 Let t = P^(1/3) [def_2];\n\u2022 2t\u00b3 + 3t\u00b2 - 1 \u2264 0 [l4];\n\u2022 (2t - 1) * (t + 1)\u00b2 \u2264 0 [l5];\n\u2022 t > 0 [l6];\n\u2022 t \u2264 1/2 [l7].\nTherefore, we conclude:\n\u2022 xyz \u2264 1/8 [ts_1].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "def_2", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0)\n  (l5 : (2 * t - 1) * (t + 1)^2 \u2264 0)\n  (l6 : 0 < t)\n  (l7 : t \u2264 1/2) :\n  x * y * z \u2264 1/8 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0)\n  (l5 : (2 * t - 1) * (t + 1)^2 \u2264 0)\n  (l6 : 0 < t)\n  (l7 : t \u2264 1/2) :\n  x * y * z \u2264 1/8 := by\n  have h1 : (t + 1)^2 > 0 := by nlinarith\n  have h2 : 2 * t - 1 \u2264 0 := by\n    rw [mul_nonpos_iff] at l5\n    cases l5 with\n    | inl h => linarith [h.2]\n    | inr h => exact h.1\n  have h3 : t \u2264 1/2 := by linarith [h2]\n  rw [def_1, def_2]\n  have h4 : P = t^3 := by rw [def_2]; simp [Real.rpow_one_div]\n  rw [h4]\n  have h5 : t^3 \u2264 (1/2)^3 := by\n    apply pow_le_pow_left (by linarith) h3 (by norm_num)\n  simp at h5\n  exact h5", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 26, "column": 13, "endLine": 26, "endColumn": 18, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  t\nx y z P t : \u211d\ntc_1 : 0 < x \u2227 0 < y \u2227 0 < z\ntc_2 : x ^ 2 + y ^ 2 + z ^ 2 + 2 * x * y * z = 1\ndef_1 : x * y * z = P\nl1 : x ^ 2 + y ^ 2 + z ^ 2 = 1 - 2 * P\nl2 : x ^ 2 + y ^ 2 + z ^ 2 \u2265 3 * P ^ (2 / 3)\nl3 : 1 - 2 * P \u2265 3 * P ^ (2 / 3)\ndef_2 : t = P ^ (1 / 3)\nl4 : 2 * t ^ 3 + 3 * t ^ 2 - 1 \u2264 0\nl5 : (2 * t - 1) * (t + 1) ^ 2 \u2264 0\nl6 : 0 < t\nl7 : t \u2264 1 / 2\nh1 : (t + 1) ^ 2 > 0\nh2 : 2 * t - 1 \u2264 0\nh3 : t \u2264 1 / 2\n\u22a2 P \u2264 1 / 8"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly and completely captures all logical and mathematical content from the natural language. All assumptions, definitions, intermediate steps, and the conclusion are accurately represented. The additional variable declarations (P and t) and the use of explicit multiplication operators are appropriate for Lean syntax and do not change the mathematical meaning. Minor notational differences like '0 < x' vs 'x > 0' are semantically equivalent.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_1\n  (x y z P t : \u211d)\n  (tc_1 : 0 < x \u2227 0 < y \u2227 0 < z)\n  (tc_2 : x^2 + y^2 + z^2 + 2 * x * y * z = 1)\n  (def_1 : x * y * z = P)\n  (l1 : x^2 + y^2 + z^2 = 1 - 2 * P)\n  (l2 : x^2 + y^2 + z^2 \u2265 3 * P^(2/3))\n  (l3 : 1 - 2 * P \u2265 3 * P^(2/3))\n  (def_2 : t = P^(1/3))\n  (l4 : 2 * t^3 + 3 * t^2 - 1 \u2264 0)\n  (l5 : (2 * t - 1) * (t + 1)^2 \u2264 0)\n  (l6 : 0 < t)\n  (l7 : t \u2264 1/2) :\n  \u00ac(x * y * z \u2264 1/8) := by\n  rw [def_1]\n  intro h\n  have h1 : P \u2264 1/8 := h\n  have h2 : P^(1/3) \u2264 (1/8)^(1/3) := by\n    apply Real.rpow_le_rpow (le_of_lt (by linarith [tc_1.1, tc_1.2.1, tc_1.2.2])) h1\n    norm_num\n  have h3 : (1/8)^(1/3) = 1/2 := by\n    rw [\u2190 Real.rpow_mul (by norm_num : (0 : \u211d) \u2264 1/8)]\n    norm_num\n    simp\n  rw [def_2, h3] at h2\n  have h4 : t = 1/2 := by\n    apply le_antisymm l7 h2\n  have h5 : P = (1/2)^3 := by\n    rw [def_2, h4]\n    norm_num\n  rw [h5] at h1\n  norm_num at h1"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    