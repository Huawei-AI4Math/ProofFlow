
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Suppose~$n$ is the area of a right
triangle with rational side lengths $a, b, c$, with
$a\leq b<c$.
Let $A=(c/2)^2$.  Then
$$A-n, \quad A,\, 	ext{ and } A+n$$
are all perfect squares of rational numbers.

Proof: We have
\begin{eqnarray*}
a^2+b^2&=&c^2\\
\frac{1}{2}ab&=&n
\end{eqnarray*}
Add or subtract $4$ times the second equation to the first to get
\begin{eqnarray*}
a^2\pm2ab +b^2&=&c^2\pm 4n\\
(a\pm b)^2 &=& c^2 \pm 4n\\
\left(\frac{a\pm b}{2}\right)^2 &=&
   \left( \frac{c}{2}\right)^2 \pm n \\
  &=& A \pm n
\end{eqnarray*}
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Suppose~$n$ is the area of a right triangle with rational side lengths $a, b, c$, with $a\\leq b<c$.", "statement": "Premise:\n\u2022 a, b, c are rational numbers with a \u2264 b < c, representing the side lengths of a right triangle where c is the hypotenuse, and n is the area of this triangle [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (a b c : \u211a)\n  (n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `(a b c : \u211a)` correctly captures that a, b, c are rational numbers", "The Lean condition `a \u2264 b \u2227 b < c` in tc_1 perfectly matches the natural language constraint a \u2264 b < c", "The right triangle property is implicitly captured through the Pythagorean theorem constraint in Lean, which is the defining property of right triangles", "The hypotenuse property is implicitly captured since c is the largest side (from a \u2264 b < c) and satisfies the Pythagorean theorem", "The Lean declaration `(n : \u211a)` and the area formula constraint together establish n as the area of the triangle", "The Lean condition `a^2 + b^2 = c^2` in tc_1 perfectly matches the Pythagorean theorem a\u00b2 + b\u00b2 = c\u00b2", "The Lean condition `1 / 2 * a * b = n` in tc_1 perfectly matches the triangle area formula n = (1/2)ab"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let $A=(c/2)^2$.", "statement": "We assume:\n\u2022 a, b, c are rational numbers with a \u2264 b < c, representing the side lengths of a right triangle where c is the hypotenuse, and n is the area of this triangle [tc_1].\nDefinition:\n\u2022 A = (c/2)^2 [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (a b c : \u211a)\n  (n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean declaration (a b c : \u211a) correctly captures that a, b, c are rational numbers", "The Lean condition a \u2264 b \u2227 b < c correctly captures the ordering constraint a \u2264 b < c", "The Lean condition a^2 + b^2 = c^2 correctly captures that a, b, c form a right triangle with c as hypotenuse (Pythagorean theorem)", "The Lean condition 1 / 2 * a * b = n correctly captures that n is the area of the right triangle with legs a and b", "The Lean definition (def_1 : (c / 2)^2 = (c / 2)^2) is a tautology that doesn't actually define A. The natural language defines A = (c/2)^2, but there is no variable A declared in the Lean code, and def_1 is just an identity statement rather than a meaningful definition"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean declaration (a b c : \u211a) correctly captures that a, b, c are rational numbers', 'The Lean condition a \u2264 b \u2227 b < c correctly captures the ordering constraint a \u2264 b < c', 'The Lean condition a^2 + b^2 = c^2 correctly captures that a, b, c form a right triangle with c as hypotenuse (Pythagorean theorem)', 'The Lean condition 1 / 2 * a * b = n correctly captures that n is the area of the right triangle with legs a and b', \"The Lean definition (def_1 : (c / 2)^2 = (c / 2)^2) is a tautology that doesn't actually define A. The natural language defines A = (c/2)^2, but there is no variable A declared in the Lean code, and def_1 is just an identity statement rather than a meaningful definition\"]"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "a^2+b^2&=&c^2", "statement": "We assume:\n\u2022 a, b, c are rational numbers with a \u2264 b < c, representing the side lengths of a right triangle where c is the hypotenuse, and n is the area of this triangle [tc_1];\n\u2022 A = (c/2)^2 [def_1].\nTherefore, we conclude:\n\u2022 a^2 + b^2 = c^2 [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2) :\n  a^2 + b^2 = c^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2) :\n  a^2 + b^2 = c^2 := by\n  exact tc_1.2.2.1", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations correctly capture all mentioned variables with proper types", "Ordering constraints a \u2264 b < c are correctly formalized as conjunction", "Right triangle constraint is properly captured via Pythagorean theorem", "Area constraint correctly formalizes n as the triangle's area using standard formula", "Definition A = (c/2)\u00b2 is not properly formalized - instead of introducing variable A, the Lean code presents a tautology (c/2)\u00b2 = (c/2)\u00b2", "The conclusion a\u00b2 + b\u00b2 = c\u00b2 matches the natural language statement exactly", "Overall logical structure is preserved, though the conclusion follows trivially from the assumptions"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations correctly capture all mentioned variables with proper types', 'Ordering constraints a \u2264 b < c are correctly formalized as conjunction', 'Right triangle constraint is properly captured via Pythagorean theorem', \"Area constraint correctly formalizes n as the triangle's area using standard formula\", 'Definition A = (c/2)\u00b2 is not properly formalized - instead of introducing variable A, the Lean code presents a tautology (c/2)\u00b2 = (c/2)\u00b2', 'The conclusion a\u00b2 + b\u00b2 = c\u00b2 matches the natural language statement exactly', 'Overall logical structure is preserved, though the conclusion follows trivially from the assumptions']"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "\\frac{1}{2}ab&=&n", "statement": "We assume:\n\u2022 a, b, c are rational numbers with a \u2264 b < c, representing the side lengths of a right triangle where c is the hypotenuse, and n is the area of this triangle [tc_1];\n\u2022 A = (c/2)^2 [def_1];\n\u2022 a^2 + b^2 = c^2 [l1].\nTherefore, we conclude:\n\u2022 n = (1/2)*a*b [l2].", "dependencies": ["tc_1", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2) :\n  n = (1 / 2) * a * b := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2) :\n  n = (1 / 2) * a * b := by\n  exact tc_1.2.2.2.symm", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization has a major inconsistency: it completely omits the variable A that is defined in the natural language as A = (c/2)^2. Instead, def_1 contains a meaningless tautology (c/2)^2 = (c/2)^2. Additionally, the formalization makes the proof trivial by including the conclusion n = (1/2)*a*b as part of the premise tc_1, creating circular reasoning. While the mathematical constraints for the right triangle are correctly captured, the missing variable A and the structural issues constitute major logical inconsistencies with the natural language statement."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization has a major inconsistency: it completely omits the variable A that is defined in the natural language as A = (c/2)^2. Instead, def_1 contains a meaningless tautology (c/2)^2 = (c/2)^2. Additionally, the formalization makes the proof trivial by including the conclusion n = (1/2)*a*b as part of the premise tc_1, creating circular reasoning. While the mathematical constraints for the right triangle are correctly captured, the missing variable A and the structural issues constitute major logical inconsistencies with the natural language statement.']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Add or subtract $4$ times the second equation to the first to get\n\\begin{eqnarray*}\na^2\\pm2ab +b^2&=&c^2\\pm 4n", "statement": "We assume:\n\u2022 a, b, c are rational numbers with a \u2264 b < c, representing the side lengths of a right triangle where c is the hypotenuse, and n is the area of this triangle [tc_1];\n\u2022 A = (c/2)^2 [def_1];\n\u2022 a^2 + b^2 = c^2 [l1];\n\u2022 n = (1/2)*a*b [l2].\nTherefore, we conclude:\n\u2022 a^2 + 2*a*b + b^2 = c^2 + 4*n and a^2 - 2*a*b + b^2 = c^2 - 4*n [l3].", "dependencies": ["tc_1", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b) :\n  a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b) :\n  a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n := by\n  constructor\n  \u00b7 rw [l2]\n    rw [\u2190 l1]\n    ring\n  \u00b7 rw [l2]\n    rw [\u2190 l1]\n    ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations correctly specify rational numbers for a, b, c, n", "Ordering constraints a \u2264 b < c are correctly captured", "Pythagorean theorem a^2 + b^2 = c^2 is correctly stated, though redundantly included in both tc_1 and l1", "Area formula n = (1/2)*a*b is correctly captured, though redundantly included and with equation flipped in tc_1", "Definition A = (c/2)^2 is completely missing - def_1 is just a tautology (c/2)^2 = (c/2)^2 instead of defining variable A", "The conclusion equations are perfectly captured with correct logical conjunction"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations correctly specify rational numbers for a, b, c, n', 'Ordering constraints a \u2264 b < c are correctly captured', 'Pythagorean theorem a^2 + b^2 = c^2 is correctly stated, though redundantly included in both tc_1 and l1', 'Area formula n = (1/2)*a*b is correctly captured, though redundantly included and with equation flipped in tc_1', 'Definition A = (c/2)^2 is completely missing - def_1 is just a tautology (c/2)^2 = (c/2)^2 instead of defining variable A', 'The conclusion equations are perfectly captured with correct logical conjunction']"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "(a\\pm b)^2 &=& c^2 \\pm 4n", "statement": "We assume:\n\u2022 a, b, c are rational numbers with a \u2264 b < c, representing the side lengths of a right triangle where c is the hypotenuse, and n is the area of this triangle [tc_1];\n\u2022 A = (c/2)^2 [def_1];\n\u2022 a^2 + b^2 = c^2 [l1];\n\u2022 n = (1/2)*a*b [l2];\n\u2022 a^2 + 2*a*b + b^2 = c^2 + 4*n and a^2 - 2*a*b + b^2 = c^2 - 4*n [l3].\nTherefore, we conclude:\n\u2022 (a + b)^2 = c^2 + 4*n and (a - b)^2 = c^2 - 4*n [l4].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b)\n  (l3 : a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n) :\n  (a + b)^2 = c^2 + 4 * n \u2227 (a - b)^2 = c^2 - 4 * n := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b)\n  (l3 : a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n) :\n  (a + b)^2 = c^2 + 4 * n \u2227 (a - b)^2 = c^2 - 4 * n := by\n  constructor\n  \u00b7 rw [add_pow_two]\n    exact l3.1\n  \u00b7 rw [sub_pow_two]\n    exact l3.2", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0.83, "semantic_feedback": ["The variable declarations and basic constraints are correctly captured in tc_1, including the rational number types, ordering constraints, Pythagorean theorem, and area relationship.", "The definition A = (c/2)^2 is represented as def_1 : (c / 2)^2 = (c / 2)^2, which is a tautology rather than defining a variable A. However, since A is not used elsewhere in the problem, this doesn't affect the logical meaning significantly.", "The Pythagorean theorem a^2 + b^2 = c^2 is correctly represented in l1.", "The area formula is correctly captured in l2, with n = (1/2) * a * b being equivalent to the natural language n = (1/2)*a*b.", "The algebraic identities in l3 correctly capture both equations: a^2 + 2*a*b + b^2 = c^2 + 4*n and a^2 - 2*a*b + b^2 = c^2 - 4*n.", "The conclusion is perfectly represented as (a + b)^2 = c^2 + 4*n \u2227 (a - b)^2 = c^2 - 4*n, which matches the natural language conclusion exactly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "\\left(\\frac{a\\pm b}{2}\\right)^2 &=& \\left( \\frac{c}{2}\\right)^2 \\pm n", "statement": "We assume:\n\u2022 a, b, c are rational numbers with a \u2264 b < c, representing the side lengths of a right triangle where c is the hypotenuse, and n is the area of this triangle [tc_1];\n\u2022 A = (c/2)^2 [def_1];\n\u2022 (a + b)^2 = c^2 + 4*n and (a - b)^2 = c^2 - 4*n [l4].\nTherefore, we conclude:\n\u2022 ((a + b)/2)^2 = (c/2)^2 + n and ((a - b)/2)^2 = (c/2)^2 - n [l5].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b)\n  (l3 : a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n)\n  (l4 : (a + b)^2 = c^2 + 4 * n \u2227 (a - b)^2 = c^2 - 4 * n) :\n  ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b)\n  (l3 : a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n)\n  (l4 : (a + b)^2 = c^2 + 4 * n \u2227 (a - b)^2 = c^2 - 4 * n) :\n  ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n := by\n  have h1 : ((a + b)/2)^2 = (a + b)^2 / 4 := by ring\n  have h2 : ((a - b)/2)^2 = (a - b)^2 / 4 := by ring\n  have h3 : (c/2)^2 = c^2 / 4 := by ring\n  rw [h1, h2, h3, l4.1, l4.2]\n  constructor <;> field_simp <;> ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable types and ordering constraints (a \u2264 b < c) are correctly captured as rational numbers in Lean", "Right triangle constraint is properly formalized using Pythagorean theorem (a^2 + b^2 = c^2)", "Area constraint correctly uses the right triangle area formula (1/2 * a * b = n)", "The premise l4 equations are perfectly translated to Lean with correct logical conjunction", "The conclusion l5 equations match exactly in mathematical content and logical structure", "Extra premises (l1, l2, l3) in Lean are logically consistent and don't contradict the natural language; def_1 being a tautology doesn't affect the overall logical meaning since A is not used in the conclusion"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "&=& A \\pm n", "statement": "We assume:\n\u2022 a, b, c are rational numbers with a \u2264 b < c, representing the side lengths of a right triangle where c is the hypotenuse, and n is the area of this triangle [tc_1];\n\u2022 A = (c/2)^2 [def_1];\n\u2022 ((a + b)/2)^2 = (c/2)^2 + n and ((a - b)/2)^2 = (c/2)^2 - n [l5].\nTherefore, we conclude:\n\u2022 ((a + b)/2)^2 = A + n and ((a - b)/2)^2 = A - n [l6].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b)\n  (l3 : a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n)\n  (l4 : (a + b)^2 = c^2 + 4 * n \u2227 (a - b)^2 = c^2 - 4 * n)\n  (l5 : ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n) :\n  ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b)\n  (l3 : a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n)\n  (l4 : (a + b)^2 = c^2 + 4 * n \u2227 (a - b)^2 = c^2 - 4 * n)\n  (l5 : ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n) :\n  ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n := by\n  exact l5", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable types and ordering constraints (a \u2264 b < c) are correctly captured", "Right triangle constraint using Pythagorean theorem is properly formalized", "Area formula for right triangle is correctly represented", "Definition A = (c/2)^2 is completely missing from Lean formalization. Instead there's a meaningless tautology def_1", "Premise l5 equations are perfectly translated to Lean", "Conclusion uses (c/2)^2 instead of A, which would be equivalent if A were properly defined, but creates inconsistency since A is not defined", "Extra intermediate premises (l1-l4) are logically consistent additions that support the proof structure"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable types and ordering constraints (a \u2264 b < c) are correctly captured', 'Right triangle constraint using Pythagorean theorem is properly formalized', 'Area formula for right triangle is correctly represented', \"Definition A = (c/2)^2 is completely missing from Lean formalization. Instead there's a meaningless tautology def_1\", 'Premise l5 equations are perfectly translated to Lean', 'Conclusion uses (c/2)^2 instead of A, which would be equivalent if A were properly defined, but creates inconsistency since A is not defined', 'Extra intermediate premises (l1-l4) are logically consistent additions that support the proof structure']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "\\left(\\frac{a\\pm b}{2}\\right)^2 = \\left( \\frac{c}{2}\\right)^2 \\pm n = A \\pm n", "statement": "We assume:\n\u2022 a, b, c are rational numbers [tc_1];\n\u2022 ((a + b)/2)^2 = A + n [l6];\nTherefore, we conclude:\n\u2022 A + n is a perfect square of a rational number [ts_1].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b)\n  (l3 : a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n)\n  (l4 : (a + b)^2 = c^2 + 4 * n \u2227 (a - b)^2 = c^2 - 4 * n)\n  (l5 : ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n)\n  (l6 : ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n) :\n  \u2203 x : \u211a, ((c / 2)^2 + n) = x^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b)\n  (l3 : a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n)\n  (l4 : (a + b)^2 = c^2 + 4 * n \u2227 (a - b)^2 = c^2 - 4 * n)\n  (l5 : ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n)\n  (l6 : ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n) :\n  \u2203 x : \u211a, ((c / 2)^2 + n) = x^2 := by\n  use (a + b) / 2\n  exact Eq.symm l6.1", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The variable declarations have a major inconsistency. While the natural language only states that a, b, c are rational numbers, the Lean formalization introduces significant additional constraints (ordering relationships, Pythagorean theorem, area relationship) that are not mentioned in the natural language.", "The key equation has a major inconsistency. The natural language introduces a variable 'A' in the equation '((a + b)/2)^2 = A + n', but the Lean formalization uses '(c / 2)^2' instead of 'A'. This represents a different mathematical relationship than what was stated in natural language.", "The conclusion has a major inconsistency. While the logical structure (proving something is a perfect square) is correct, the Lean formalization proves that '(c / 2)^2 + n' is a perfect square, whereas the natural language states that 'A + n' is a perfect square. Since A and (c / 2)^2 are not established as equivalent, this is a significant discrepancy."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The variable declarations have a major inconsistency. While the natural language only states that a, b, c are rational numbers, the Lean formalization introduces significant additional constraints (ordering relationships, Pythagorean theorem, area relationship) that are not mentioned in the natural language.', \"The key equation has a major inconsistency. The natural language introduces a variable 'A' in the equation '((a + b)/2)^2 = A + n', but the Lean formalization uses '(c / 2)^2' instead of 'A'. This represents a different mathematical relationship than what was stated in natural language.\", \"The conclusion has a major inconsistency. While the logical structure (proving something is a perfect square) is correct, the Lean formalization proves that '(c / 2)^2 + n' is a perfect square, whereas the natural language states that 'A + n' is a perfect square. Since A and (c / 2)^2 are not established as equivalent, this is a significant discrepancy.\"]"}, "solved_negation": null, "type": "solution"}, "ts_2": {"id": "ts_2", "natural_language": "\\left(\\frac{a\\pm b}{2}\\right)^2 = \\left( \\frac{c}{2}\\right)^2 \\pm n = A \\pm n", "statement": "We assume:\n\u2022 a, b, c are rational numbers [tc_1];\n\u2022 ((a - b)/2)^2 = A - n [l6];\nTherefore, we conclude:\n\u2022 A - n is a perfect square of a rational number [ts_2].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "l4", "l5", "l6", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b)\n  (l3 : a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n)\n  (l4 : (a + b)^2 = c^2 + 4 * n \u2227 (a - b)^2 = c^2 - 4 * n)\n  (l5 : ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n)\n  (l6 : ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n) :\n  \u2203 x : \u211a, ((c / 2)^2 - n) = x^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (a b c n : \u211a)\n  (tc_1 : a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 1 / 2 * a * b = n)\n  (def_1 : (c / 2)^2 = (c / 2)^2)\n  (l1 : a^2 + b^2 = c^2)\n  (l2 : n = (1 / 2) * a * b)\n  (l3 : a^2 + 2 * a * b + b^2 = c^2 + 4 * n \u2227 a^2 - 2 * a * b + b^2 = c^2 - 4 * n)\n  (l4 : (a + b)^2 = c^2 + 4 * n \u2227 (a - b)^2 = c^2 - 4 * n)\n  (l5 : ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n)\n  (l6 : ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n) :\n  \u2203 x : \u211a, ((c / 2)^2 - n) = x^2 := by\n  use (a - b) / 2\n  exact Eq.symm l6.2", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations correctly specify a, b, c as rational numbers, with additional variable n appropriately included.", "The key premise shows a major inconsistency: natural language states '((a - b)/2)^2 = A - n' but Lean uses '((a - b) / 2)^2 = (c / 2)^2 - n'. The variable A is undefined in natural language but replaced with (c / 2)^2 in Lean without explicit justification.", "The conclusion correctly formalizes 'A - n is a perfect square' as '\u2203 x : \u211a, ((c / 2)^2 - n) = x^2', maintaining the logical structure despite the A vs (c / 2)^2 substitution."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations correctly specify a, b, c as rational numbers, with additional variable n appropriately included.', \"The key premise shows a major inconsistency: natural language states '((a - b)/2)^2 = A - n' but Lean uses '((a - b) / 2)^2 = (c / 2)^2 - n'. The variable A is undefined in natural language but replaced with (c / 2)^2 in Lean without explicit justification.\", \"The conclusion correctly formalizes 'A - n is a perfect square' as '\u2203 x : \u211a, ((c / 2)^2 - n) = x^2', maintaining the logical structure despite the A vs (c / 2)^2 substitution.\"]"}, "solved_negation": null, "type": "solution"}, "ts_3": {"id": "ts_3", "natural_language": "Let $A=(c/2)^2$.", "statement": "We assume:\n\u2022 c is a rational number [tc_1];\n\u2022 A = (c/2)^2 [def_1];\nTherefore, we conclude:\n\u2022 A is a perfect square of a rational number [ts_3].", "dependencies": ["tc_1", "def_1", "l1", "l2", "l3", "l4", "l5", "l6", "ts_1", "ts_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_3\n  (c : \u211a)\n  (A : \u211a)\n  (tc_1 : True)\n  (def_1 : A = (c / 2)^2) :\n  \u2203 x : \u211a, A = x^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_3\n  (c : \u211a)\n  (A : \u211a)\n  (tc_1 : True)\n  (def_1 : A = (c / 2)^2) :\n  \u2203 x : \u211a, A = x^2 := by\n  exists c / 2\n  simp [def_1]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 2, "endLine": 12, "endColumn": 14, "data": "no goals to be solved"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The variable c is properly declared as rational, the definition A = (c/2)^2 is exactly preserved, and the conclusion that A is a perfect square of a rational number is appropriately formalized as \u2203 x : \u211a, A = x^2. The auxiliary condition tc_1 : True does not contradict any natural language statements and appears to be a harmless placeholder. The logical structure and mathematical meaning are completely preserved.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_3 :\n  \u2203 (c : \u211a) (A : \u211a), A = (c / 2)^2 \u2227 \u2200 x : \u211a, A \u2260 x^2 := by\n  use 1, (1 / 2)^2\n  constructor\n  \u00b7 rfl\n  \u00b7 intro x\n    simp only [div_pow, one_pow]\n    intro h\n    have hx : (1 / 4 : \u211a) = x^2 := h\n    have : (1 : \u211a) / 4 = (x * x) := by rw [\u2190 pow_two x]; exact hx\n    have : (1 : \u211a) = 4 * (x * x) := by linear_combination 4 * this\n    have := congr_arg Rat.den this\n    simp at this"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_3", "label": "ts_3", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    