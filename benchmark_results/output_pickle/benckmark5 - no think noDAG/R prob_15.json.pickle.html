
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $X$ be a continuous random variable with a probability density function (PDF) given by $f(x) = \lambda e^{-\lambda x}$ for $x \ge 0$ and $f(x) = 0$ for $x < 0$. We are given that the parameter $\lambda = 2$. Then, the expected value $E[X] = 1/2$, the variance $Var(X) = 1/4$, and the probability $P(X > 1) = e^{-2}$.

Proof: From the given conditions, the specific PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \ge 0$. To find the expected value, we compute the integral $E[X] = \int_0^\infty x f(x) dx = \int_0^\infty 2x e^{-2x} dx$. Using integration by parts, this integral evaluates to $1/2$. Therefore, the expected value is $E[X] = 1/2$. To find the variance, we first need the second moment $E[X^2] = \int_0^\infty x^2 f(x) dx = \int_0^\infty 2x^2 e^{-2x} dx$. Evaluating this integral using integration by parts yields $E[X^2] = 1/2$. The variance is then $Var(X) = E[X^2] - (E[X])^2 = 1/2 - (1/2)^2 = 1/4$. Finally, the probability $P(X > 1)$ is found by integrating the PDF from $1$ to $\infty$, which is $\int_1^\infty 2e^{-2x} dx = e^{-2}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $X$ be a continuous random variable with a probability density function (PDF) given by $f(x) = \\lambda e^{-\\lambda x}$ for $x \\ge 0$ and $f(x) = 0$ for $x < 0$.", "statement": "Premise:\n\u2022 $X$ is a continuous random variable with a probability density function (PDF) given by $f(x) = \\lambda e^{-\\lambda x}$ for $x \\ge 0$ and $f(x) = 0$ for $x < 0$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization declares X as a function \u211d \u2192 \u211d but does not capture that X is a continuous random variable. The natural language specifies X as a random variable with continuity properties, but Lean only shows X as a mathematical function without any probabilistic or continuity structure.", "The Lean condition '\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)' perfectly matches the natural language condition 'f(x) = \u03bbe^(-\u03bbx) for x \u2265 0', just using X instead of f for the function name.", "The Lean condition '\u2200 x : \u211d, x < 0 \u2192 X x = 0' perfectly matches the natural language condition 'f(x) = 0 for x < 0', again using X instead of f for the function name.", "The Lean formalization completely misses the conclusion that f(x) (or X in Lean) is a probability density function. There is no statement in Lean establishing X as a PDF or relating it to any probabilistic structure."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization declares X as a function \u211d \u2192 \u211d but does not capture that X is a continuous random variable. The natural language specifies X as a random variable with continuity properties, but Lean only shows X as a mathematical function without any probabilistic or continuity structure.', \"The Lean condition '\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)' perfectly matches the natural language condition 'f(x) = \u03bbe^(-\u03bbx) for x \u2265 0', just using X instead of f for the function name.\", \"The Lean condition '\u2200 x : \u211d, x < 0 \u2192 X x = 0' perfectly matches the natural language condition 'f(x) = 0 for x < 0', again using X instead of f for the function name.\", 'The Lean formalization completely misses the conclusion that f(x) (or X in Lean) is a probability density function. There is no statement in Lean establishing X as a PDF or relating it to any probabilistic structure.']"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "We are given that the parameter $\\lambda = 2$.", "statement": "Premise:\n\u2022 $X$ is a continuous random variable with a probability density function (PDF) given by $f(x) = \\lambda e^{-\\lambda x}$ for $x \\ge 0$ and $f(x) = 0$ for $x < 0$ [tc_1];\n\u2022 The parameter $\\lambda = 2$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization uses variable X to represent what should be the PDF f(x). In probability theory, X typically denotes the random variable itself, while f(x) denotes its probability density function. The Lean code treats X as a function from reals to reals representing the PDF, which is a fundamental conceptual mismatch with standard probability notation.", "The parameter assignment lambda = 2 is correctly captured in both the natural language and Lean formalization."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization uses variable X to represent what should be the PDF f(x). In probability theory, X typically denotes the random variable itself, while f(x) denotes its probability density function. The Lean code treats X as a function from reals to reals representing the PDF, which is a fundamental conceptual mismatch with standard probability notation.', 'The parameter assignment lambda = 2 is correctly captured in both the natural language and Lean formalization.']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "From the given conditions, the specific PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with a probability density function (PDF) given by $f(x) = \\lambda e^{-\\lambda x}$ for $x \\ge 0$ and $f(x) = 0$ for $x < 0$ [tc_1];\n\u2022 The parameter $\\lambda = 2$ [tc_2].\nTherefore, we conclude:\n\u2022 The specific PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$ and $f(x) = 0$ for $x < 0$ [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2) :\n  (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * rexp (-lambda * x)))\n  (tc_2 : lambda = 2) :\n  (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * rexp (-2 * x)) := by\n  constructor\n  \u00b7 exact tc_1.1\n  \u00b7 intro x hx\n    rw [tc_1.2 x hx, tc_2]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly represent X as a function (PDF) and lambda as a real parameter", "The piecewise PDF definition is accurately formalized with proper conditional statements and mathematical expressions", "Parameter value assignment is directly and correctly translated", "The conclusion correctly shows the substituted form of the PDF with lambda = 2"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_1": {"id": "def_1", "natural_language": "To find the expected value, we compute the integral $E[X] = \\int_0^\\infty x f(x) dx$.", "statement": "We assume:\n\u2022 The specific PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$ and $f(x) = 0$ for $x < 0$ [l1].\nDefinition:\n\u2022 The expected value of $X$ is given by $E[X] = \\int_{-\\infty}^\\infty x f(x) dx$ [def_1].", "dependencies": ["tc_1", "tc_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the PDF definition. The `l1` component exactly matches the natural language condition, defining X(x) = 0 for x < 0 and X(x) = 2 * exp(-2 * x) for x \u2265 0. The additional components `tc_1` and `tc_2` provide extra structure but are logically consistent and lead to the same result.", "The Lean formalization appropriately captures the expected value definition using measure theory notation. The integral over `Set.univ` corresponds to the integral from -\u221e to \u221e, and the equality with the integral over `Set.Ici 0` (which is [0,\u221e)) correctly reflects that the PDF is zero for negative values. This is mathematically equivalent to the natural language definition."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l2": {"id": "l2", "natural_language": "$E[X] = \\int_0^\\infty x f(x) dx = \\int_0^\\infty 2x e^{-2x} dx$.", "statement": "We assume:\n\u2022 The specific PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$ and $f(x) = 0$ for $x < 0$ [l1];\n\u2022 The expected value of $X$ is given by $E[X] = \\int_{-\\infty}^\\infty x f(x) dx$ [def_1].\nTherefore, we conclude:\n\u2022 $E[X] = \\int_0^\\infty 2x e^{-2x} dx$ [l2].", "dependencies": ["tc_1", "tc_2", "l1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume) :\n  \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume) :\n  \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume := by\n  rw [def_1]\n  congr\n  ext x\n  cases lt_or_ge x 0 with\n  | inl h => \n      rw [l1.1 x h, mul_zero]\n      exact mul_eq_zero_of_left (by linarith) _\n  | inr h => \n      rw [l1.2 x h]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 19, "column": 36, "endLine": 19, "endColumn": 44, "data": "linarith failed to find a contradiction\ninst\u271d : MeasurableSpace \u211d\nvolume : MeasureTheory.Measure \u211d\nX : \u211d \u2192 \u211d\nlambda : \u211d\ntc_1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = lambda * rexp (-lambda * x)\ntc_2 : lambda = 2\nl1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = 2 * rexp (-2 * x)\ndef_1 : \u222b (x : \u211d) in Set.univ, x * X x \u2202volume = \u222b (x : \u211d) in Set.Ici 0, x * X x \u2202volume\nx : \u211d\nh : x < 0\n\u22a2 False failed"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all the mathematical content from the natural language. The PDF definition is properly represented through the conditions on X, the expected value definition is mathematically equivalent using measure theory notation, and the conclusion correctly represents the integral from 0 to infinity with the specified PDF. While the logical structure combines steps that are shown separately in natural language, all the essential mathematical relationships are preserved and the reasoning is sound.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume) :\n  \u00ac (\u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume) := by\n  simp [l1, def_1]\n  intro h\n  have h1 : \u2200 x \u2265 0, X x = 2 * exp (-2 * x) := l1.right\n  have h2 : \u222b x in Set.Ici 0, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume := by\n    apply MeasureTheory.set_integral_congr\n    simp [h1]\n  rw [h2] at def_1\n  contradiction"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Using integration by parts, this integral evaluates to $1/2$.", "statement": "We assume:\n\u2022 $E[X] = \\int_0^\\infty 2x e^{-2x} dx$ [l2].\nTherefore, we conclude:\n\u2022 The integral $\\int_0^\\infty 2x e^{-2x} dx$ evaluates to $1/2$ [l3].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume) :\n  \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter MeasureTheory\n\nlemma l3\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume) :\n  \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2 := by\n  have : \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume = \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume := by\n    congr; ext x; rw [mul_comm x, mul_assoc]\n  rw [\u2190 this, \u2190 l2, def_1]\n  have h : \u2200 x, x * X x = if x < 0 then 0 else 2 * x * exp (-2 * x) := by\n    intro x\n    cases' lt_or_ge x 0 with hx hx\n    \u00b7 simp [hx, (l1.1 x hx)]\n    \u00b7 simp [hx, (l1.2 x hx)]\n      rw [mul_comm x, mul_assoc]\n  rw [\u2190 integral_univ, \u2190 integral_congr h]\n  simp_rw [mul_assoc]\n  rw [integral_mul_left]\n  simp_rw [\u2190 mul_assoc]\n  rw [integral_mul_right]\n  norm_num\n  exact integral_exp_neg_sq_sq_div_two 1", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 112, "endLine": 15, "endColumn": 44, "data": "unsolved goals\ncase e_f.h\nX : \u211d \u2192 \u211d\nlambda : \u211d\ntc_1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = lambda * rexp (-lambda * x)\ntc_2 : lambda = 2\nl1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = 2 * rexp (-2 * x)\ndef_1 : \u222b (x : \u211d) in Set.univ, x * X x = \u222b (x : \u211d) in Set.Ici 0, x * X x\nl2 : \u222b (x : \u211d) in Set.univ, x * X x = \u222b (x : \u211d) in Set.Ici 0, x * (2 * rexp (-2 * x))\nx : \u211d\n\u22a2 2 * (rexp (-2 * x) * x) = 2 * x * rexp (-2 * x)"}, {"line": 21, "column": 4, "endLine": 22, "endColumn": 32, "data": "unsolved goals\ncase inr\nX : \u211d \u2192 \u211d\nlambda : \u211d\ntc_1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = lambda * rexp (-lambda * x)\ntc_2 : lambda = 2\nl1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = 2 * rexp (-2 * x)\ndef_1 : \u222b (x : \u211d) in Set.univ, x * X x = \u222b (x : \u211d) in Set.Ici 0, x * X x\nl2 : \u222b (x : \u211d) in Set.univ, x * X x = \u222b (x : \u211d) in Set.Ici 0, x * (2 * rexp (-2 * x))\nthis : \u222b (x : \u211d) in Set.Ici 0, x * (2 * rexp (-2 * x)) = \u222b (x : \u211d) in Set.Ici 0, 2 * x * rexp (-2 * x)\nx : \u211d\nhx : x \u2265 0\n\u22a2 2 * (rexp (-(2 * x)) * x) = if x < 0 then 0 else 2 * x * rexp (-(2 * x))"}, {"line": 23, "column": 25, "endLine": 23, "endColumn": 39, "data": "unknown identifier 'integral_congr'"}, {"line": 23, "column": 23, "endLine": 23, "endColumn": 41, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.6292\nX : \u211d \u2192 \u211d\nlambda : \u211d\ntc_1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = lambda * rexp (-lambda * x)\ntc_2 : lambda = 2\nl1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = 2 * rexp (-2 * x)\ndef_1 : \u222b (x : \u211d) in Set.univ, x * X x = \u222b (x : \u211d) in Set.Ici 0, x * X x\nl2 : \u222b (x : \u211d) in Set.univ, x * X x = \u222b (x : \u211d) in Set.Ici 0, x * (2 * rexp (-2 * x))\nthis : \u222b (x : \u211d) in Set.Ici 0, x * (2 * rexp (-2 * x)) = \u222b (x : \u211d) in Set.Ici 0, 2 * x * rexp (-2 * x)\nh : \u2200 (x : \u211d), x * X x = if x < 0 then 0 else 2 * x * rexp (-2 * x)\n\u22a2 \u222b (x : \u211d) in Set.univ, x * X x \u2202volume.restrict (Set.Ici 0) = 1 / 2"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The assumption E[X] = \u222b\u2080^\u221e 2x e^{-2x} dx is correctly captured in Lean as l2, with mathematically equivalent expressions for the integrand (x * (2 * exp (-2 * x)) vs 2x e^{-2x}). The additional context about X being a probability density function provides helpful mathematical rigor without contradicting the natural language.", "The conclusion that the integral evaluates to 1/2 is perfectly captured in the Lean goal statement, with Set.Ici 0 correctly representing [0,\u221e) and 2 * x * exp (-2 * x) being mathematically equivalent to 2x e^{-2x}. The logical flow from assumption to conclusion is preserved.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l3\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume) :\n  \u00ac (\u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2) := by\n  have h : \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2 := by\n    simp [integral_mul_exp_neg_mul]\n    norm_num\n  simp [h]"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Therefore, the expected value is $E[X] = 1/2$.", "statement": "We assume:\n\u2022 $E[X] = \\int_0^\\infty 2x e^{-2x} dx$ [l2];\n\u2022 The integral $\\int_0^\\infty 2x e^{-2x} dx$ evaluates to $1/2$ [l3].\nTherefore, we conclude:\n\u2022 The expected value $E[X] = 1/2$ [ts_1].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume)\n  (l3 : \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2) :\n  \u222b x in Set.univ, x * X x \u2202 volume = 1 / 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume)\n  (l3 : \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2) :\n  \u222b x in Set.univ, x * X x \u2202 volume = 1 / 2 := by\n  rw [l2]\n  have : \u2200 x, x * (2 * exp (-2 * x)) = 2 * x * exp (-2 * x) := by intro x; ring\n  simp_rw [this]\n  exact l3", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 5}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The expected value E[X] is correctly represented as an integral over the universal set with appropriate domain restrictions", "The integral evaluation \u222b\u2080^\u221e 2x e^(-2x) dx = 1/2 is accurately translated using Set.Ici 0 for the domain [0,\u221e)", "The conclusion E[X] = 1/2 is precisely captured in the goal statement", "The function X is properly defined as a piecewise exponential distribution density, making explicit what was implicit in the natural language", "The logical flow from assumptions to conclusion is complete and mathematically sound, with necessary intermediate steps provided"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}, "def_2": {"id": "def_2", "natural_language": "To find the variance, we first need the second moment $E[X^2] = \\int_0^\\infty x^2 f(x) dx$.", "statement": "We assume:\n\u2022 All previous steps [tc_1, tc_2, l1, def_1, l2, l3, ts_1].\nDefinition:\n\u2022 The second moment of $X$ is given by $E[X^2] = \\int_{-\\infty}^\\infty x^2 f(x) dx$ [def_2].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2", "l3", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (f : \u211d \u2192 \u211d)\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume)\n  (l3 : \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2)\n  (ts_1 : \u222b x in Set.univ, x * X x \u2202 volume = 1 / 2)\n  (def_2 : \u222b x in Set.univ, x^2 * f x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["All previous steps tc_1, tc_2, l1, def_1, l2, l3, ts_1 are present as variables in the Lean formalization", "The natural language defines the second moment as E[X^2] = \u222b_{-\u221e}^\u221e x^2 f(x) dx, which should be a definition of what E[X^2] equals. However, the Lean version (def_2) shows an equality between \u222b x in Set.univ, x^2 * f x and \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)), which appears to be a computational step rather than the definition of the second moment itself. The Lean version is missing the explicit connection to E[X^2] and instead shows a transformation of the integral."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['All previous steps tc_1, tc_2, l1, def_1, l2, l3, ts_1 are present as variables in the Lean formalization', 'The natural language defines the second moment as E[X^2] = \u222b_{-\u221e}^\u221e x^2 f(x) dx, which should be a definition of what E[X^2] equals. However, the Lean version (def_2) shows an equality between \u222b x in Set.univ, x^2 * f x and \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)), which appears to be a computational step rather than the definition of the second moment itself. The Lean version is missing the explicit connection to E[X^2] and instead shows a transformation of the integral.']"}, "type": "definition"}, "l4": {"id": "l4", "natural_language": "$E[X^2] = \\int_0^\\infty x^2 f(x) dx = \\int_0^\\infty 2x^2 e^{-2x} dx$.", "statement": "We assume:\n\u2022 The specific PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$ [l1];\n\u2022 The second moment of $X$ is given by $E[X^2] = \\int_{-\\infty}^\\infty x^2 f(x) dx$ [def_2].\nTherefore, we conclude:\n\u2022 $E[X^2] = \\int_0^\\infty 2x^2 e^{-2x} dx$ [l4].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2", "l3", "ts_1", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume) :\n  \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume) :\n  \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume := by\n  rw [def_2]\n  congr\n  ext x\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The PDF specification in l1 and supporting conditions correctly capture f(x) = 2e^{-2x} for x \u2265 0 with appropriate zero conditions for negative x.", "The second moment definition def_2 accurately represents E[X\u00b2] = \u222b_{-\u221e}^\u221e x\u00b2 f(x) dx by showing the equivalence between integration over all reals and the restricted domain with the specific PDF.", "The conclusion correctly captures E[X\u00b2] = \u222b_0^\u221e 2x\u00b2 e^{-2x} dx with mathematically equivalent notation. The rearrangement of multiplication order (2 * x^2 * exp(-2*x)) does not change the semantic meaning."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Evaluating this integral using integration by parts yields $E[X^2] = 1/2$.", "statement": "We assume:\n\u2022 $E[X^2] = \\int_0^\\infty 2x^2 e^{-2x} dx$ [l4].\nTherefore, we conclude:\n\u2022 The integral $\\int_0^\\infty 2x^2 e^{-2x} dx$ evaluates to $1/2$, so $E[X^2] = 1/2$ [l5].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2", "l3", "ts_1", "def_2", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume)\n  (l4 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume) :\n  \u222b x in Set.univ, x^2 * X x \u2202 volume = 1 / 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume)\n  (l4 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume) :\n  \u222b x in Set.univ, x^2 * X x \u2202 volume = 1 / 2 := by\n  rw [l4]\n  simp_rw [mul_assoc]\n  rw [\u2190 integral_mul_left 2 _]\n  have : \u222b x in Set.Ici (0 : \u211d), x^2 * exp (-2 * x) \u2202 volume = 1/4 := by\n    simp_rw [\u2190 integral_Ici_eq_integral_Ioi]\n    have : \u222b x in (0:\u211d)..\u221e, x^2 * exp (-2 * x) = 1/4 := by\n      have := integral_rpow_mul_exp_neg (2:\u211d) (by norm_num) (n := 2)\n      simp at this\n      rw [this]\n      norm_num\n    rw [\u2190 integral_ofReal]\n    simp\n    exact this\n  rw [this]\n  norm_num", "lean_pass": false, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The assumption E[X\u00b2] = \u222b\u2080^\u221e 2x\u00b2 e^{-2x} dx is correctly captured in Lean using measure-theoretic notation. The expected value is represented as \u222b x in Set.univ, x^2 * X x \u2202 volume and the integral from 0 to \u221e is represented using Set.Ici 0.", "The conclusion that E[X\u00b2] = 1/2 is correctly represented in the Lean goal. The intermediate step about the integral evaluating to 1/2 is implicitly captured through the equality established in premise l4. The additional context about the exponential distribution provides necessary mathematical background without contradicting the natural language.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume)\n  (l4 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume) :\n  \u00ac (\u222b x in Set.univ, x^2 * X x \u2202 volume = 1 / 2) := by\n  rw [l4]\n  have h : \u222b x in Set.Ici (0 : \u211d), (2 * x^2 * exp (-2 * x)) \u2202 volume = 1/2 := by\n    simp_rw [mul_assoc]\n    rw [integral_mul_right]\n    have : \u222b x in Set.Ici (0 : \u211d), x^2 * exp (-2 * x) \u2202 volume = 1/4 := by\n      have := integral_rpow_mul_exp_neg (a := 2) (n := 2) (by norm_num)\n      simp at this\n      exact this\n    rw [this]\n    norm_num\n  rw [h]\n  norm_num"}, "type": "lemma"}, "def_3": {"id": "def_3", "natural_language": "The variance is then $Var(X) = E[X^2] - (E[X])^2$.", "statement": "We assume:\n\u2022 All previous steps [tc_1, tc_2, l1, def_1, l2, l3, ts_1, def_2, l4, l5].\nDefinition:\n\u2022 The variance of $X$ is given by $Var(X) = E[X^2] - (E[X])^2$ [def_3].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2", "l3", "ts_1", "def_2", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume)\n  (l3 : \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2)\n  (ts_1 : \u222b x in Set.univ, x * X x \u2202 volume = 1 / 2)\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume)\n  (l4 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume)\n  (l5 : \u222b x in Set.univ, x^2 * X x \u2202 volume = 1 / 2)\n  (def_3 : (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 4)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["All previous steps tc_1 through l5 are correctly included as variable hypotheses in the Lean formalization", "The natural language states a general definition 'Var(X) = E[X^2] - (E[X])^2', but the Lean formalization gives a specific numerical result '= 1/4'. While the Lean correctly represents E[X^2] and E[X] as integrals, it provides a computed variance value rather than stating the general definitional relationship"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['All previous steps tc_1 through l5 are correctly included as variable hypotheses in the Lean formalization', \"The natural language states a general definition 'Var(X) = E[X^2] - (E[X])^2', but the Lean formalization gives a specific numerical result '= 1/4'. While the Lean correctly represents E[X^2] and E[X] as integrals, it provides a computed variance value rather than stating the general definitional relationship\"]"}, "type": "definition"}, "l6": {"id": "l6", "natural_language": "$Var(X) = E[X^2] - (E[X])^2 = 1/2 - (1/2)^2$.", "statement": "We assume:\n\u2022 The expected value $E[X] = 1/2$ [ts_1];\n\u2022 $E[X^2] = 1/2$ [l5];\n\u2022 The variance of $X$ is given by $Var(X) = E[X^2] - (E[X])^2$ [def_3].\nTherefore, we conclude:\n\u2022 $Var(X) = 1/2 - (1/2)^2$ [l6].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2", "l3", "ts_1", "def_2", "l4", "l5", "def_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume)\n  (l3 : \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2)\n  (ts_1 : \u222b x in Set.univ, x * X x \u2202 volume = 1 / 2)\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume)\n  (l4 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume)\n  (l5 : \u222b x in Set.univ, x^2 * X x \u2202 volume = 1 / 2)\n  (def_3 : (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 4) :\n  (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 2 - (1 / 2)^2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume)\n  (l3 : \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2)\n  (ts_1 : \u222b x in Set.univ, x * X x \u2202 volume = 1 / 2)\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume)\n  (l4 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume)\n  (l5 : \u222b x in Set.univ, x^2 * X x \u2202 volume = 1 / 2)\n  (def_3 : (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 4) :\n  (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 2 - (1 / 2)^2 := by\n  rw [ts_1, l5]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The expected value E[X] = 1/2 is correctly represented as an integral in ts_1", "The second moment E[X\u00b2] = 1/2 is correctly represented as an integral in l5", "def_3 should define the variance formula Var(X) = E[X\u00b2] - (E[X])\u00b2, but instead gives the specific numerical result 1/4. This conflates the definition with the conclusion", "The conclusion that Var(X) = 1/2 - (1/2)\u00b2 is correctly stated as the goal to prove, and this expression correctly evaluates to 1/4"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The expected value E[X] = 1/2 is correctly represented as an integral in ts_1', 'The second moment E[X\u00b2] = 1/2 is correctly represented as an integral in l5', 'def_3 should define the variance formula Var(X) = E[X\u00b2] - (E[X])\u00b2, but instead gives the specific numerical result 1/4. This conflates the definition with the conclusion', 'The conclusion that Var(X) = 1/2 - (1/2)\u00b2 is correctly stated as the goal to prove, and this expression correctly evaluates to 1/4']"}, "solved_negation": null, "type": "lemma"}, "ts_2": {"id": "ts_2", "natural_language": "= 1/4.", "statement": "We assume:\n\u2022 $Var(X) = 1/2 - (1/2)^2$ [l6].\nTherefore, we conclude:\n\u2022 The variance $Var(X) = 1/4$ [ts_2].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2", "l3", "ts_1", "def_2", "l4", "l5", "def_3", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume)\n  (l3 : \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2)\n  (ts_1 : \u222b x in Set.univ, x * X x \u2202 volume = 1 / 2)\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume)\n  (l4 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume)\n  (l5 : \u222b x in Set.univ, x^2 * X x \u2202 volume = 1 / 2)\n  (def_3 : (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 4)\n  (l6 : (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 2 - (1 / 2)^2) :\n  (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 4 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume)\n  (l3 : \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2)\n  (ts_1 : \u222b x in Set.univ, x * X x \u2202 volume = 1 / 2)\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume)\n  (l4 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume)\n  (l5 : \u222b x in Set.univ, x^2 * X x \u2202 volume = 1 / 2)\n  (def_3 : (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 4)\n  (l6 : (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 2 - (1 / 2)^2) :\n  (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 4 := by\n  rw [l6]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical reasoning from natural language. The assumption l6 precisely matches the stated assumption 'Var(X) = 1/2 - (1/2)^2', and the goal correctly represents the conclusion 'Var(X) = 1/4'. The variance is properly represented using the standard formula E[X\u00b2] - (E[X])\u00b2 expressed as integrals. While the Lean code includes additional context about the exponential distribution and intermediate calculations, these provide supporting mathematical detail without contradicting or altering the core logical relationship described in the natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}, "def_4": {"id": "def_4", "natural_language": "Finally, the probability $P(X > 1)$ is found by integrating the PDF from $1$ to $\\infty$.", "statement": "We assume:\n\u2022 All previous steps.\nDefinition:\n\u2022 For a continuous random variable $X$ with PDF $f(x)$, the probability $P(X > a)$ is given by $\\int_a^\\infty f(x) dx$ [def_4].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2", "l3", "ts_1", "def_2", "l4", "l5", "def_3", "l6", "ts_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (f : \u211d \u2192 \u211d)\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (def_1 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * X x \u2202 volume)\n  (l2 : \u222b x in Set.univ, x * X x \u2202 volume = \u222b x in Set.Ici 0, x * (2 * exp (-2 * x)) \u2202 volume)\n  (l3 : \u222b x in Set.Ici 0, 2 * x * exp (-2 * x) \u2202 volume = 1 / 2)\n  (ts_1 : \u222b x in Set.univ, x * X x \u2202 volume = 1 / 2)\n  (def_2 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, x^2 * (2 * exp (-2 * x)) \u2202 volume)\n  (l4 : \u222b x in Set.univ, x^2 * X x \u2202 volume = \u222b x in Set.Ici 0, (2 * x^2 * exp (-2 * x)) \u2202 volume)\n  (l5 : \u222b x in Set.univ, x^2 * X x \u2202 volume = 1 / 2)\n  (def_3 : (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 4)\n  (l6 : (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 2 - (1 / 2)^2)\n  (ts_2 : (\u222b x in Set.univ, x^2 * X x \u2202 volume) - (\u222b x in Set.univ, x * X x \u2202 volume)^2 = 1 / 4)\n  (a : \u211d)\n  (def_4 : MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi a)) f = MeasureTheory.integral MeasureTheory.volume f)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean code contains multiple previous steps and definitions, matching the 'all previous steps' condition", "The Lean code declares f and X as separate real functions but doesn't establish that X is a continuous random variable with PDF f(x). This relationship is crucial for the probability interpretation", "The Lean def_4 incorrectly states an equality between the integral over (a,\u221e) and the integral over all reals, which is mathematically wrong. The correct statement should define P(X > a) as the integral of f over (a,\u221e), not equate it to the integral over all reals"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean code contains multiple previous steps and definitions, matching the 'all previous steps' condition\", \"The Lean code declares f and X as separate real functions but doesn't establish that X is a continuous random variable with PDF f(x). This relationship is crucial for the probability interpretation\", 'The Lean def_4 incorrectly states an equality between the integral over (a,\u221e) and the integral over all reals, which is mathematically wrong. The correct statement should define P(X > a) as the integral of f over (a,\u221e), not equate it to the integral over all reals']"}, "type": "definition"}, "l7": {"id": "l7", "natural_language": "which is $\\int_1^\\infty 2e^{-2x} dx$.", "statement": "We assume:\n\u2022 The specific PDF of $X$ is $f(x) = 2e^{-2x}$ for $x \\ge 0$ [l1];\n\u2022 For a continuous random variable $X$ with PDF $f(x)$, the probability $P(X > a)$ is given by $\\int_a^\\infty f(x) dx$ for any a [def_4].\nTherefore, we conclude:\n\u2022 $P(X > 1) = \\int_1^\\infty 2e^{-2x} dx$ [l7].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2", "l3", "ts_1", "def_2", "l4", "l5", "def_3", "l6", "ts_2", "def_4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (a : \u211d)\n  (def_4 : MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi a)) X = MeasureTheory.integral MeasureTheory.volume X) :\n  MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi 1)) X = MeasureTheory.integral MeasureTheory.volume (fun x \u21a6 2 * exp (-2 * x)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (a : \u211d)\n  (def_4 : MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi a)) X = MeasureTheory.integral MeasureTheory.volume X) :\n  MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi 1)) X = MeasureTheory.integral MeasureTheory.volume (fun x \u21a6 2 * exp (-2 * x)) := by\n  simp [l1, tc_2]\n  have h : \u2200 x, X x = (fun x \u21a6 if x \u2265 0 then 2 * exp (-2 * x) else 0) x := by\n    intro x\n    cases lt_or_ge x 0 with\n    | inl hx => simp [l1.1 x hx]\n    | inr hx => simp [l1.2 x hx]\n  rw [MeasureTheory.integral_congr_ae (Filter.eventually_of_forall h)]\n  simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 13, "endLine": 18, "endColumn": 32, "data": "unsolved goals\ncase inl\nX : \u211d \u2192 \u211d\nlambda : \u211d\ntc_1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = lambda * rexp (-lambda * x)\ntc_2 : lambda = 2\nl1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = 2 * rexp (-2 * x)\na : \u211d\ndef_4 :\n  MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi a)) X = MeasureTheory.integral MeasureTheory.volume X\nx : \u211d\nhx : x < 0\n\u22a2 0 = if 0 \u2264 x then 2 * rexp (-(2 * x)) else 0"}, {"line": 19, "column": 13, "endLine": 19, "endColumn": 32, "data": "unsolved goals\ncase inr\nX : \u211d \u2192 \u211d\nlambda : \u211d\ntc_1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = lambda * rexp (-lambda * x)\ntc_2 : lambda = 2\nl1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = 2 * rexp (-2 * x)\na : \u211d\ndef_4 :\n  MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi a)) X = MeasureTheory.integral MeasureTheory.volume X\nx : \u211d\nhx : x \u2265 0\n\u22a2 2 * rexp (-(2 * x)) = if 0 \u2264 x then 2 * rexp (-(2 * x)) else 0"}, {"line": 13, "column": 147, "endLine": 21, "endColumn": 6, "data": "unsolved goals\nX : \u211d \u2192 \u211d\nlambda : \u211d\ntc_1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = lambda * rexp (-lambda * x)\ntc_2 : lambda = 2\nl1 : (\u2200 x < 0, X x = 0) \u2227 \u2200 x \u2265 0, X x = 2 * rexp (-2 * x)\na : \u211d\ndef_4 :\n  MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi a)) X = MeasureTheory.integral MeasureTheory.volume X\nh : \u2200 (x : \u211d), X x = (fun x => if x \u2265 0 then 2 * rexp (-2 * x) else 0) x\n\u22a2 (\u222b (a : \u211d) in Set.Ioi 1, if 0 \u2264 a then 2 * rexp (-(2 * a)) else 0) = \u222b (x : \u211d), 2 * rexp (-(2 * x))"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The PDF definition l1 correctly captures the piecewise nature of the exponential distribution with the right formula for x \u2265 0 and zero for x < 0.", "The general probability formula def_4 incorrectly states that the integral from a to infinity equals the integral over all reals. This should represent P(X > a) = \u222b_a^\u221e f(x)dx, not that this integral equals the total integral over \u211d.", "The conclusion incorrectly follows the flawed def_4 pattern. It should state that P(X > 1) equals the integral from 1 to infinity, but instead equates the restricted integral to the full integral over \u211d, which is mathematically incorrect.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The PDF definition l1 correctly captures the piecewise nature of the exponential distribution with the right formula for x \u2265 0 and zero for x < 0.', 'The general probability formula def_4 incorrectly states that the integral from a to infinity equals the integral over all reals. This should represent P(X > a) = \u222b_a^\u221e f(x)dx, not that this integral equals the total integral over \u211d.', 'The conclusion incorrectly follows the flawed def_4 pattern. It should state that P(X > 1) equals the integral from 1 to infinity, but instead equates the restricted integral to the full integral over \u211d, which is mathematically incorrect.']"}, "solved_negation": null, "type": "lemma"}, "ts_3": {"id": "ts_3", "natural_language": "$\\int_1^\\infty 2e^{-2x} dx = e^{-2}$.", "statement": "We assume:\n\u2022 $P(X > 1) = \\int_1^\\infty 2e^{-2x} dx$ [l7].\nTherefore, we conclude:\n\u2022 The probability $P(X > 1) = e^{-2}$ [ts_3].", "dependencies": ["tc_1", "tc_2", "l1", "def_1", "l2", "l3", "ts_1", "def_2", "l4", "l5", "def_3", "l6", "ts_2", "def_4", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_3\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (a : \u211d)\n  (def_4 : MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi a)) X = MeasureTheory.integral MeasureTheory.volume X)\n  (l7 : MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi 1)) X = MeasureTheory.integral MeasureTheory.volume (fun x \u21a6 2 * exp (-2 * x))) :\n  MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi 1)) X = exp (-2) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nimport Mathlib.MeasureTheory.Integral.IntervalIntegral\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter MeasureTheory\n\nlemma ts_3\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (a : \u211d)\n  (def_4 : MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi a)) X = MeasureTheory.integral MeasureTheory.volume X)\n  (l7 : MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi 1)) X = MeasureTheory.integral MeasureTheory.volume (fun x \u21a6 2 * exp (-2 * x))) :\n  MeasureTheory.integral (MeasureTheory.volume.restrict (Set.Ioi 1)) X = exp (-2) := by\n  rw [l7]\n  simp only [integral_eq_improper, volume_Ioi, ENNReal.ofReal_pos]\n  have : \u2200 x, 0 \u2264 x \u2192 (fun x \u21a6 2 * exp (-2 * x)) x = 2 * exp (-2 * x) := fun x _ => rfl\n  rw [integral_ofReal]\n  simp only [this]\n  have : \u222b x in Set.Ioi 0, 2 * exp (-2 * x) = -exp (-2 * x) | (0 : \u211d) := by\n    apply integral_mul_exp_neg\n    linarith\n  simp at this\n  rw [this]\n  simp [tc_2]\n  norm_num", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 20, "column": 69, "endLine": 20, "endColumn": 72, "data": "unexpected token ':='; expected '=>'"}, {"line": 16, "column": 13, "endLine": 16, "endColumn": 33, "data": "unknown identifier 'integral_eq_improper'"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical content of the natural language. The assumption P(X > 1) = \u222b\u2081^\u221e 2e^{-2x} dx is properly represented in hypothesis l7 using measure theory notation, and the conclusion P(X > 1) = e^{-2} is correctly stated as the lemma's goal. The logical flow from assumption to conclusion is preserved. The additional context about the exponential distribution provides mathematical rigor without contradicting the natural language statement.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter MeasureTheory\n\nlemma neg_ts_3\n  (X : \u211d \u2192 \u211d)\n  (lambda : \u211d)\n  (tc_1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = lambda * exp (-lambda * x)))\n  (tc_2 : lambda = 2)\n  (l1 : (\u2200 x : \u211d, x < 0 \u2192 X x = 0) \u2227 (\u2200 x : \u211d, x \u2265 0 \u2192 X x = 2 * exp (-2 * x)))\n  (a : \u211d)\n  (def_4 : integral (volume.restrict (Set.Ioi a)) X = integral volume X)\n  (l7 : integral (volume.restrict (Set.Ioi 1)) X = integral volume (fun x \u21a6 2 * exp (-2 * x))) :\n  integral (volume.restrict (Set.Ioi 1)) X \u2260 exp (-2) := by\n  rw [l7]\n  have h_int : \u222b x in Set.Ici 0, 2 * exp (-2 * x) = 1 := by\n    rw [integral_mul_left]\n    simp [integral_exp_neg_mul, \u2190 integral_exp_neg]\n    norm_num\n  have h : \u222b x, 2 * exp (-2 * x) = \u222b x in Set.Ici 0, 2 * exp (-2 * x) := by\n    refine integral_eq_integral_of_ae_eq ?_\n    apply eventually_of_forall\n    intro x\n    cases lt_or_ge x 0 with\n    | inl hx => simp [l1.1 x hx]\n    | inr hx => simp [l1.2 x hx]\n  rw [h, h_int]\n  norm_num"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_3", "label": "def_3", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_4", "label": "def_4", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_3", "label": "ts_3", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_2", "to": "def_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_2", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_4", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    