
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $\mathbf{X}$ and $\mathbf{Y}$ are any two vectors in $\R^n,$ then
\begin{equation} \label{eq:5.1.3}
|\mathbf{X}\cdot\mathbf{Y}|\le |\mathbf{X}|\,|\mathbf{Y}|,
\end{equation}
with equality  if and only if one of the vectors is a scalar
multiple of the other$.$

Proof: If $\mathbf{Y}=\mathbf{0}$,  then both sides
of \eqref{eq:5.1.3} are $\mathbf{0}$, so \eqref{eq:5.1.3} holds, with equality.
In this case,  $\mathbf{Y}=0\mathbf{X}$.
Now suppose that   $\mathbf{Y}
e\mathbf{0}$ and
 $t$ is any real number. Then
\begin{equation}\label{eq:5.1.4}
\begin{array}{rcl}
0\ar\le \dst{\sum^n_{i=1} (x_i-ty_i)^2}\\
\ar=\dst{\sum^n_{i=1} x^2_i-2t\sum^n_{i=1} x_iy_i+t^2\sum^n_{i=1}
y^2_i}\\\\
\ar=|\mathbf{X}|^2-2(\mathbf{X}\cdot\mathbf{Y})t+t^2|\mathbf{Y}|^2.
\end{array}
\end{equation}
The last expression is a second-degree polynomial $p$
in $t$. From the quadratic formula, the zeros of $p$ are
$$
t=\frac{(\mathbf{X}\cdot\mathbf{Y})\pm\sqrt{(\mathbf{X}\cdot\mathbf{Y})^2-
|\mathbf{X}|^2|\mathbf{Y}|^2}}{ |\mathbf{Y}|^2}.
$$
Hence,
\begin{equation}\label{eq:5.1.5}
(\mathbf{X}\cdot\mathbf{Y})^2\le |\mathbf{X}|^2|\mathbf{Y}|^2,
\end{equation}
because if not, then  $p$ would have two distinct real zeros  and
therefore
be negative between them (Figure~\ref{figure:5.1.1}), contradicting the
inequality \eqref{eq:5.1.4}. Taking square roots in \eqref{eq:5.1.5} yields
\eqref{eq:5.1.3} if $\mathbf{Y}
e\mathbf{0}$.
If $\mathbf{X}=t\mathbf{Y}$, then
$|\mathbf{X}\cdot\mathbf{Y}|=|\mathbf{X}||\mathbf{Y}|
=|t||\mathbf{Y}|^2$ (verify), so equality holds in \eqref{eq:5.1.3}.
Conversely, if equality holds in \eqref{eq:5.1.3}, then $p$ has the real
zero $t_0=(\mathbf{X}\cdot\mathbf{Y})/|\mathbf{Y}\|^2$, and
$$
\sum_{i=1}^n(x_i-t_0y_i)^2=0
$$

opagebreak
from \eqref{eq:5.1.4}; therefore, $\mathbf{X}=t_0\mathbf{Y}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "If $\\mathbf{X}$ and $\\mathbf{Y}$ are any two vectors in $\\R^n,$", "statement": "Premise:\n\u2022 $\\mathbf{X}$ and $\\mathbf{Y}$ are vectors in $\\mathbb{R}^n$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (X Y : Fin n \u2192 \u211d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly represents vectors in \u211d\u207f using the standard type `Fin n \u2192 \u211d`, which is the canonical way to represent n-dimensional real vectors in Lean. The variable declarations match the mathematical statement perfectly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "If $\\mathbf{Y}=\\mathbf{0}$,  then both sides of \\eqref{eq:5.1.3} are $\\mathbf{0}$, so \\eqref{eq:5.1.3} holds, with equality.", "statement": "We assume:\n\u2022 $\\mathbf{X}$ and $\\mathbf{Y}$ are vectors in $\\mathbb{R}^n$ [tc_1].\nTherefore, we conclude:\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, then $|\\mathbf{X}\\cdot\\mathbf{Y}|=0$ and $|\\mathbf{X}| |\\mathbf{Y}|=0$, so the equality $|\\mathbf{X}\\cdot\\mathbf{Y}| = |\\mathbf{X}| |\\mathbf{Y}|$ holds [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True) :\n  Y = 0 \u2192 |(X \u2b1d Y)| = 0 \u2227 (\u2016X\u2016 * \u2016Y\u2016 = 0) := by\nsorry", "lean_pass": false, "error_msg": [], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True) :\n  Y = 0 \u2192 |(X \u2b1d Y)| = 0 \u2227 (\u2016X\u2016 * \u2016Y\u2016 = 0) := by\n  intro h\n  simp [h, norm_zero, dotProduct, mul_zero, abs_zero, norm_eq_zero, Pi.zero_apply]", "lean_pass": false, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "In this case,  $\\mathbf{Y}=0\\mathbf{X}$.", "statement": "We assume:\n\u2022 $\\mathbf{X}$ and $\\mathbf{Y}$ are vectors in $\\mathbb{R}^n$ [tc_1];\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, then the equality $|\\mathbf{X}\\cdot\\mathbf{Y}| = |\\mathbf{X}| |\\mathbf{Y}|$ holds [l1].\nTherefore, we conclude:\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, then $\\mathbf{Y}$ is a scalar multiple of $\\mathbf{X}$, specifically $\\mathbf{Y}=0\\mathbf{X}$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016) :\n  Y = 0 \u2192 Y = (0 : \u211d) \u2022 X := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016) :\n  Y = 0 \u2192 Y = (0 : \u211d) \u2022 X := by\n  intro h\n  rw [h]\n  ext i\n  simp [Pi.smul_apply, smul_eq_mul, mul_zero]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all aspects of the natural language statement. The vector representations using Fin n \u2192 \u211d, the dot product as a sum, the scalar multiplication using \u2022, and the logical implication structure all accurately reflect the mathematical content. While the premise l1 is mathematically redundant for proving the conclusion, it doesn't contradict or misrepresent the natural language statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_1": {"id": "def_1", "natural_language": "Now suppose that   $\\mathbf{Y}\\ne\\mathbf{0}$ and $t$ is any real number. Then\n\\begin{equation}\\label{eq:5.1.4}\n\\begin{array}{rcl}\n0\\ar\\le \\dst{\\sum^n_{i=1} (x_i-ty_i)^2}\\\\\n\\ar=\\dst{\\sum^n_{i=1} x^2_i-2t\\sum^n_{i=1} x_iy_i+t^2\\sum^n_{i=1}\ny^2_i}\\\\\\\n\\ar=|\\mathbf{X}|^2-2(\\mathbf{X}\\cdot\\mathbf{Y})t+t^2|\\mathbf{Y}|^2.\n\\end{array}\n\\end{equation}", "statement": "We assume:\n\u2022 $\\mathbf{X}$ and $\\mathbf{Y}$ are vectors in $\\mathbb{R}^n$ [tc_1];\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, then the equality $|\\mathbf{X}\\cdot\\mathbf{Y}| = |\\mathbf{X}| |\\mathbf{Y}|$ holds [l1];\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, then $\\mathbf{Y}=0\\mathbf{X}$ [l2].\nDefinition:\n\u2022 For $\\mathbf{Y}\\ne\\mathbf{0}$ and any real number $t$, the quadratic polynomial $p(t) = |\\mathbf{X}|^2-2(\\mathbf{X}\\cdot\\mathbf{Y})t+t^2|\\mathbf{Y}|^2$ is non-negative, as it equals $\\sum^n_{i=1} (x_i-ty_i)^2$, a sum of squares [def_1].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (X Y : Fin n \u2192 \u211d)\n(tc_1 : True)\n(l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n(l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n(def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Both represent vectors in \u211d\u207f. Lean uses function type Fin n \u2192 \u211d which is equivalent to vectors in \u211d\u207f", "Both express the same condition about the dot product equality when Y is zero. Lean uses sum notation for dot product which is equivalent", "Both express that Y equals zero times X when Y is zero. Lean uses scalar multiplication notation (0 : \u211d) \u2022 X which is equivalent to 0X", "The condition Y \u2260 0 is implicit in the Lean formalization as a hypothesis in def_1", "Both allow t to be any real number, expressed as universal quantification in Lean", "Both define the same sum of squares expression, with equivalent mathematical content", "The natural language states that p(t) is non-negative, but the Lean formalization only provides an equality between two expressions without asserting non-negativity. This misses the key conclusion about non-negativity"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Both represent vectors in \u211d\u207f. Lean uses function type Fin n \u2192 \u211d which is equivalent to vectors in \u211d\u207f', 'Both express the same condition about the dot product equality when Y is zero. Lean uses sum notation for dot product which is equivalent', 'Both express that Y equals zero times X when Y is zero. Lean uses scalar multiplication notation (0 : \u211d) \u2022 X which is equivalent to 0X', 'The condition Y \u2260 0 is implicit in the Lean formalization as a hypothesis in def_1', 'Both allow t to be any real number, expressed as universal quantification in Lean', 'Both define the same sum of squares expression, with equivalent mathematical content', 'The natural language states that p(t) is non-negative, but the Lean formalization only provides an equality between two expressions without asserting non-negativity. This misses the key conclusion about non-negativity']"}, "type": "definition"}, "l3": {"id": "l3", "natural_language": "Hence,\n\\begin{equation}\\label{eq:5.1.5}\n(\\mathbf{X}\\cdot\\mathbf{Y})^2\\le |\\mathbf{X}|^2|\\mathbf{Y}|^2,\n\\end{equation}\nbecause if not, then  $p$ would have two distinct real zeros  and\ntherefore\nbe negative between them (Figure~\\ref{figure:5.1.1}), contradicting the\ninequality \\eqref{eq:5.1.4}.", "statement": "We assume:\n\u2022 $\\mathbf{X}$ and $\\mathbf{Y}$ are vectors in $\\mathbb{R}^n$ [tc_1];\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, then the equality $|\\mathbf{X}\\cdot\\mathbf{Y}| = |\\mathbf{X}| |\\mathbf{Y}|$ holds [l1];\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, then $\\mathbf{Y}=0\\mathbf{X}$ [l2];\n\u2022 For $\\mathbf{Y}\\ne\\mathbf{0}$ and any real number $t$, the quadratic polynomial $p(t) = t^2|\\mathbf{Y}|^2 - 2(\\mathbf{X}\\cdot\\mathbf{Y})t + |\\mathbf{X}|^2$ is non-negative [def_1].\nTherefore, we conclude:\n\u2022 For $\\mathbf{Y}\\ne\\mathbf{0}$, the discriminant of $p(t)$ must be non-positive. This gives $(-2(\\mathbf{X}\\cdot\\mathbf{Y}))^2 - 4(|\\mathbf{Y}|^2)(|\\mathbf{X}|^2) \\le 0$, which simplifies to $(\\mathbf{X}\\cdot\\mathbf{Y})^2 \\le |\\mathbf{X}|^2|\\mathbf{Y}|^2$ [l3].", "dependencies": ["tc_1", "l1", "l2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2)) :\n  Y \u2260 0 \u2192 (-2 * (\u2211 i, X i * Y i))^2 - 4 * (\u2016Y\u2016^2) * (\u2016X\u2016^2) \u2264 0 \u2227 ((\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2)) :\n  Y \u2260 0 \u2192 (-2 * (\u2211 i, X i * Y i))^2 - 4 * (\u2016Y\u2016^2) * (\u2016X\u2016^2) \u2264 0 \u2227 ((\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2) := by\n  intro hY\n  have h_poly_nonneg : \u2200 t : \u211d, \u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2 \u2265 0 := by\n    intro t\n    rw [def_1 hY t]\n    exact Finset.sum_nonneg (fun i _ => sq_nonneg (X i - t * Y i))\n  have h_discrim_le_zero : (-2 * (\u2211 i, X i * Y i))^2 - 4 * (\u2016Y\u2016^2) * (\u2016X\u2016^2) \u2264 0 := by\n    let a := \u2016Y\u2016^2\n    let b := -2 * (\u2211 i, X i * Y i)\n    let c := \u2016X\u2016^2\n    have h_a_pos : a > 0 := by\n      rw [norm_sq_eq_zero]\n      exact hY\n    have h_min : b^2 - 4 * a * c \u2264 0 := by\n      let t := -b / (2 * a)\n      specialize h_poly_nonneg t\n      have h_eq : a * t^2 + b * t + c = c - b^2 / (4 * a) := by\n        field_simp [mul_ne_zero two_ne_zero h_a_pos.ne']\n        ring\n      rw [h_eq] at h_poly_nonneg\n      linarith\n    exact h_min\n  constructor\n  \u00b7 exact h_discrim_le_zero\n  \u00b7 have : (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2 := by\n      rw [\u2190 mul_pow, mul_comm (\u2016X\u2016^2), \u2190 mul_assoc]\n      have h := h_discrim_le_zero\n      simp at h\n      linarith\n    exact \u27e8h_discrim_le_zero, this\u27e9", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 22, "column": 10, "endLine": 22, "endColumn": 25, "data": "unknown identifier 'norm_sq_eq_zero'"}, {"line": 22, "column": 10, "endLine": 22, "endColumn": 25, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.18270\nn : \u2115\nX Y : Fin n \u2192 \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1 :\n  Y \u2260 0 \u2192 \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t * Y i) ^ 2\nhY : Y \u2260 0\nh_poly_nonneg : \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 \u2265 0\na : \u211d := \u2016Y\u2016 ^ 2\nb : \u211d := -2 * \u2211 i : Fin n, X i * Y i\nc : \u211d := \u2016X\u2016 ^ 2\n\u22a2 a > 0"}, {"line": 27, "column": 61, "endLine": 29, "endColumn": 12, "data": "unsolved goals\nn : \u2115\nX Y : Fin n \u2192 \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1 :\n  Y \u2260 0 \u2192 \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t * Y i) ^ 2\nhY : Y \u2260 0\na : \u211d := \u2016Y\u2016 ^ 2\nb : \u211d := -2 * \u2211 i : Fin n, X i * Y i\nc : \u211d := \u2016X\u2016 ^ 2\nh_a_pos : a > 0\nt : \u211d := -b / (2 * a)\nh_poly_nonneg : \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 \u2265 0\n\u22a2 -(\u2016Y\u2016 ^ 2 * (\u2211 x : Fin n, X x * Y x) ^ 2 * \u2016Y\u2016\u207b\u00b9 ^ 2 * 8) + \u2016Y\u2016 ^ 2 * \u2016X\u2016 ^ 2 * 4 +\n      \u2016Y\u2016 ^ 4 * (\u2211 x : Fin n, X x * Y x) ^ 2 * \u2016Y\u2016\u207b\u00b9 ^ 4 * 4 =\n    \u2016Y\u2016 ^ 2 * \u2016X\u2016 ^ 2 * 4 - (\u2211 x : Fin n, X x * Y x) ^ 2 * 4"}, {"line": 30, "column": 10, "endLine": 30, "endColumn": 14, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  a * t ^ 2 + b * t + c\nn : \u2115\nX Y : Fin n \u2192 \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1 :\n  Y \u2260 0 \u2192 \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t * Y i) ^ 2\nhY : Y \u2260 0\na : \u211d := \u2016Y\u2016 ^ 2\nb : \u211d := -2 * \u2211 i : Fin n, X i * Y i\nc : \u211d := \u2016X\u2016 ^ 2\nh_a_pos : a > 0\nt : \u211d := -b / (2 * a)\nh_poly_nonneg : \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 \u2265 0\nh_eq : a * t ^ 2 + b * t + c = c - b ^ 2 / (4 * a)\n\u22a2 b ^ 2 - 4 * a * c \u2264 0"}, {"line": 36, "column": 21, "endLine": 36, "endColumn": 37, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u2016X\u2016 ^ 2 * ?b\nn : \u2115\nX Y : Fin n \u2192 \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1 :\n  Y \u2260 0 \u2192 \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t * Y i) ^ 2\nhY : Y \u2260 0\nh_poly_nonneg : \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 \u2265 0\nh_discrim_le_zero : (-2 * \u2211 i : Fin n, X i * Y i) ^ 2 - 4 * \u2016Y\u2016 ^ 2 * \u2016X\u2016 ^ 2 \u2264 0\n\u22a2 (\u2211 i : Fin n, X i * Y i) ^ 2 \u2264 (\u2016X\u2016 * \u2016Y\u2016) ^ 2"}, {"line": 40, "column": 10, "endLine": 40, "endColumn": 35, "data": "invalid constructor \u27e8...\u27e9, expected type must be an inductive type \n  Real.le\u271d ((\u2211 i : Fin n, X i * Y i) ^ 2) (\u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Vector representation using Fin n \u2192 \u211d correctly captures vectors in \u211d\u207f", "Condition l1 properly translates the zero vector case with correct dot product and norm notation", "Condition l2 correctly uses scalar multiplication notation for the linear dependence statement", "The quadratic polynomial definition is mathematically equivalent despite term reordering, and the equality to sum of squares actually provides a stronger and more precise statement than just non-negativity", "The conclusion correctly captures both the discriminant condition and the final Cauchy-Schwarz inequality with proper logical conjunction", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l3\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2)) :\n  \u2203 (Y : Fin n \u2192 \u211d), Y \u2260 0 \u2227 ((-2 * (\u2211 i, X i * Y i))^2 - 4 * (\u2016Y\u2016^2) * (\u2016X\u2016^2) > 0 \u2228 ((\u2211 i, X i * Y i)^2 > \u2016X\u2016^2 * \u2016Y\u2016^2)) := by\n  use fun _ => 1\n  constructor\n  \u00b7 intro h\n    simp at h\n    have := congr_fun h 0\n    norm_num at this\n  \u00b7 right\n    simp [norm_def]\n    simp [dotProduct]\n    rw [mul_comm]\n    apply lt_of_le_of_lt (norm_sq_le_norm_sq_of_norm_le (norm_le_pi_norm (fun i => X i) 0) (norm_zero (\u03b1 := \u211d)))\n    norm_num\n    exact zero_lt_one"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Taking square roots in \\eqref{eq:5.1.5} yields \\eqref{eq:5.1.3} if $\\mathbf{Y}\\ne\\mathbf{0}$.", "statement": "We assume:\n\u2022 $\\mathbf{X}$ and $\\mathbf{Y}$ are vectors in $\\mathbb{R}^n$ [tc_1];\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, then the equality $|\\mathbf{X}\\cdot\\mathbf{Y}| = |\\mathbf{X}| |\\mathbf{Y}|$ holds [l1];\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, then $\\mathbf{Y}=0\\mathbf{X}$ [l2];\n\u2022 For $\\mathbf{Y}\\ne\\mathbf{0}$ and any real number $t$, the quadratic polynomial $p(t)$ is non-negative [def_1];\n\u2022 For $\\mathbf{Y}\\ne\\mathbf{0}$, $(\\mathbf{X}\\cdot\\mathbf{Y})^2 \\le |\\mathbf{X}|^2|\\mathbf{Y}|^2$ [l3].\nTherefore, we conclude:\n\u2022 For $\\mathbf{Y}\\ne\\mathbf{0}$, taking the square root of both sides of the inequality in [l3] yields $|\\mathbf{X}\\cdot\\mathbf{Y}| \\le |\\mathbf{X}| |\\mathbf{Y}|$ [l4].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2) :\n  Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2) :\n  Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016 := by\n  intro h\n  have h1 := l3 h\n  rw [\u2190 pow_two (|\u2211 i, X i * Y i|), \u2190 pow_two (\u2016X\u2016 * \u2016Y\u2016)] at h1\n  exact Real.sqrt_le_sqrt h1", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 6, "endLine": 15, "endColumn": 34, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  |\u2211 i : Fin n, X i * Y i| * |\u2211 i : Fin n, X i * Y i|\nn : \u2115\nX Y : Fin n \u2192 \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1 :\n  Y \u2260 0 \u2192 \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t * Y i) ^ 2\nl3 : Y \u2260 0 \u2192 (\u2211 i : Fin n, X i * Y i) ^ 2 \u2264 \u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2\nh : Y \u2260 0\nh1 : (\u2211 i : Fin n, X i * Y i) ^ 2 \u2264 \u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2\n\u22a2 |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["Vector representation using Fin n \u2192 \u211d correctly captures n-dimensional real vectors", "Trivial condition tc_1 doesn't affect the logical meaning", "Condition l1 correctly represents the equality case when Y=0", "Condition l2 correctly uses scalar multiplication notation", "def_1 shows an equality defining the quadratic polynomial, but the natural language mentions 'non-negative'. The non-negativity is implicit in the sum of squares form, but this creates a slight structural difference", "Condition l3 correctly represents the key inequality", "The conclusion l4 correctly captures the final result", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.86 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l4\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2) :\n  \u2203 (Y : Fin n \u2192 \u211d), Y \u2260 0 \u2227 \u00ac(|\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016) := by\n  let X := fun _ : Fin n => (1 : \u211d)\n  let Y := fun _ : Fin n => (1 : \u211d)\n  use Y\n  constructor\n  \u00b7 intro h\n    simp at h\n  \u00b7 have h1 : \u2016X\u2016 = Real.sqrt (Finset.sum Finset.univ fun i => X i * X i) := rfl\n    have h2 : \u2016Y\u2016 = Real.sqrt (Finset.sum Finset.univ fun i => Y i * Y i) := rfl\n    simp [h1, h2]\n    rw [abs_of_nonneg]\n    \u00b7 simp\n      linarith\n    \u00b7 simp"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Taking square roots in \\eqref{eq:5.1.5} yields \\eqref{eq:5.1.3} if $\\mathbf{Y}\\ne\\mathbf{0}$.", "statement": "We assume:\n\u2022 $\\mathbf{X}$ and $\\mathbf{Y}$ are vectors in $\\mathbb{R}^n$ [tc_1];\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, the inequality holds with equality [l1];\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, then $\\mathbf{Y}=0\\mathbf{X}$ [l2];\n\u2022 For $\\mathbf{Y}\\ne\\mathbf{0}$ and any real number $t$, the quadratic polynomial $p(t)$ is non-negative [def_1];\n\u2022 For $\\mathbf{Y}\\ne\\mathbf{0}$, $(\\mathbf{X}\\cdot\\mathbf{Y})^2 \\le |\\mathbf{X}|^2|\\mathbf{Y}|^2$ [l3];\n\u2022 For $\\mathbf{Y}\\ne\\mathbf{0}$, $|\\mathbf{X}\\cdot\\mathbf{Y}| \\le |\\mathbf{X}| |\\mathbf{Y}|$ [l4].\nTherefore, we conclude:\n\u2022 For any two vectors $\\mathbf{X}, \\mathbf{Y} \\in \\mathbb{R}^n$, the inequality $|\\mathbf{X}\\cdot\\mathbf{Y}| \\le |\\mathbf{X}| |\\mathbf{Y}|$ holds [ts_1].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016) :\n  |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016) :\n  |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016 := by\n  by_cases h : Y = 0\n  \u00b7 rw [l1 h]\n  \u00b7 exact l4 h", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Vector representation using Fin n \u2192 \u211d correctly captures n-dimensional real vectors", "Equality case for zero vector is correctly formalized", "Zero vector as scalar multiple is properly represented with scalar multiplication notation", "Quadratic polynomial definition implicitly captures non-negativity through sum of squares representation", "Squared form of Cauchy-Schwarz inequality is accurately translated", "Absolute value form for non-zero case matches perfectly", "Final conclusion correctly states the general Cauchy-Schwarz inequality"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}, "l5": {"id": "l5", "natural_language": "If $\\mathbf{X}=t\\mathbf{Y}$, then\n$|\\mathbf{X}\\cdot\\mathbf{Y}|= |\\mathbf{X}| |\\mathbf{Y}|\n=|t||\\mathbf{Y}|^2$ (verify), so equality holds in \\eqref{eq:5.1.3}.", "statement": "We assume:\n\u2022 ... [tc_1] through [ts_1].\nTherefore, we conclude:\n\u2022 If one vector is a scalar multiple of the other (e.g., $\\mathbf{X}=t\\mathbf{Y}$ for some scalar $t$), then equality holds: $|\\mathbf{X}\\cdot\\mathbf{Y}| = |\\mathbf{X}| |\\mathbf{Y}|$ [l5].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3", "l4", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016) :\n  X = t \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016) :\n  X = t \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 := by\n  intro h\n  rw [h]\n  simp only [Pi.smul_apply, smul_eq_mul]\n  have : \u2211 i, t * Y i * Y i = t * \u2211 i, Y i * Y i := by\n    rw [Finset.mul_sum]\n    simp [mul_assoc]\n  rw [this, norm_smul, Real.norm_eq_abs]\n  simp only [norm_eq_abs, abs_mul, mul_assoc]\n  congr\n  rw [\u2190 Real.norm_eq_abs, \u2190 norm_mul]\n  simp [mul_comm]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 24, "column": 26, "endLine": 24, "endColumn": 36, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u2016?a\u2016 * \u2016?b\u2016\ncase e_a\nn : \u2115\nX Y : Fin n \u2192 \u211d\nt : \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1 :\n  Y \u2260 0 \u2192 \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t * Y i) ^ 2\nl3 : Y \u2260 0 \u2192 (\u2211 i : Fin n, X i * Y i) ^ 2 \u2264 \u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2\nl4 : Y \u2260 0 \u2192 |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nts_1 : |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nh : X = t \u2022 Y\nthis : \u2211 i : Fin n, t * Y i * Y i = t * \u2211 i : Fin n, Y i * Y i\n\u22a2 \u2016\u2211 i : Fin n, Y i * Y i\u2016 = \u2016Y\u2016 * \u2016Y\u2016"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical statement that when one vector is a scalar multiple of another, equality holds in the Cauchy-Schwarz inequality. The notation translation is accurate: scalar multiplication (t \u2022 Y), dot product (\u2211 i, X i * Y i), and norms (\u2016X\u2016, \u2016Y\u2016) properly represent the mathematical concepts. The logical structure X = t \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 precisely matches the natural language condition and conclusion. The additional type declarations and context hypotheses are appropriate formal details that don't change the semantic meaning.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter Classical\n\nlemma neg_l5\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016) :\n  \u2203 (X Y : Fin n \u2192 \u211d) (t : \u211d), X = t \u2022 Y \u2227 |\u2211 i, X i * Y i| \u2260 \u2016X\u2016 * \u2016Y\u2016 := by\n  use fun _ => 1, fun _ => 0, 1\n  simp [norm_zero, mul_zero, norm_eq_zero]\n  norm_num"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "Conversely, if equality holds in \\eqref{eq:5.1.3}, then $p$ has the real\nzero $t_0=(\\mathbf{X}\\cdot\\mathbf{Y})/|\\mathbf{Y}|\\|^2$,", "statement": "We assume:\n\u2022 ... [tc_1] through [l5].\nTherefore, we conclude:\n\u2022 If equality $|\\mathbf{X}\\cdot\\mathbf{Y}| = |\\mathbf{X}| |\\mathbf{Y}|$ holds and $\\mathbf{Y} \\ne \\mathbf{0}$, then $(\\mathbf{X}\\cdot\\mathbf{Y})^2 = |\\mathbf{X}|^2|\\mathbf{Y}|^2$. This means the discriminant of the polynomial $p(t)$ defined in [def_1] is zero, and $p(t)$ has exactly one real root $t_0 = (\\mathbf{X}\\cdot\\mathbf{Y})/|\\mathbf{Y}|^2$ [l6].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3", "l4", "ts_1", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1_hyp : Y \u2260 0 \u2192 \u2200 (t' : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t' + t'^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t' * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : X = t \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016) :\n  (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2192 (\u2211 i, X i * Y i)^2 = \u2016X\u2016^2 * \u2016Y\u2016^2 \u2227 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2) = 0 \u2227 ((\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * ((\u2211 j, X j * Y j) / \u2016Y\u2016^2) + ((\u2211 j, X j * Y j) / \u2016Y\u2016^2)^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - ((\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1_hyp : Y \u2260 0 \u2192 \u2200 (t' : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t' + t'^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t' * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : X = t \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016) :\n  (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2192 (\u2211 i, X i * Y i)^2 = \u2016X\u2016^2 * \u2016Y\u2016^2 \u2227 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2) = 0 \u2227 ((\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * ((\u2211 j, X j * Y j) / \u2016Y\u2016^2) + ((\u2211 j, X j * Y j) / \u2016Y\u2016^2)^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - ((\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2)) := by\n  intro h\n  rcases h with \u27e8h1, h2\u27e9\n  constructor\n  \u00b7 have := l3 h2\n    rw [h1, pow_two] at this \u22a2\n    exact le_antisymm this (by rw [h1, pow_two]; exact le_refl _)\n  \u00b7 constructor\n    \u00b7 have := def_1_hyp h2 ((\u2211 j, X j * Y j) / \u2016Y\u2016^2)\n      rw [this]\n      have h' : \u2016X\u2016^2 = (\u2211 i, X i * Y i)^2 / \u2016Y\u2016^2 := by\n        rw [h1, pow_two]\n        field_simp [norm_eq_zero.not.mpr h2]\n        ring\n      rw [h']\n      field_simp [norm_eq_zero.not.mpr h2]\n      ring\n    \u00b7 exact def_1_hyp h2 ((\u2211 j, X j * Y j) / \u2016Y\u2016^2)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 20, "column": 8, "endLine": 20, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  |\u2211 i : Fin n, X i * Y i|\ncase intro.left\nn : \u2115\nX Y : Fin n \u2192 \u211d\nt : \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1_hyp :\n  Y \u2260 0 \u2192 \u2200 (t' : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t' + t' ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t' * Y i) ^ 2\nl3 : Y \u2260 0 \u2192 (\u2211 i : Fin n, X i * Y i) ^ 2 \u2264 \u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2\nl4 : Y \u2260 0 \u2192 |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nts_1 : |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nl5 : X = t \u2022 Y \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nh1 : |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nh2 : Y \u2260 0\nthis : (\u2211 i : Fin n, X i * Y i) ^ 2 \u2264 \u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2\n\u22a2 (\u2211 i : Fin n, X i * Y i) ^ 2 = \u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2"}, {"line": 24, "column": 10, "endLine": 24, "endColumn": 14, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * ((\u2211 j : Fin n, X j * Y j) / \u2016Y\u2016 ^ 2) +\n    ((\u2211 j : Fin n, X j * Y j) / \u2016Y\u2016 ^ 2) ^ 2 * \u2016Y\u2016 ^ 2\ncase intro.right.left\nn : \u2115\nX Y : Fin n \u2192 \u211d\nt : \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1_hyp :\n  Y \u2260 0 \u2192 \u2200 (t' : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t' + t' ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t' * Y i) ^ 2\nl3 : Y \u2260 0 \u2192 (\u2211 i : Fin n, X i * Y i) ^ 2 \u2264 \u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2\nl4 : Y \u2260 0 \u2192 |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nts_1 : |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nl5 : X = t \u2022 Y \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nh1 : |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nh2 : Y \u2260 0\nthis :\n  \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * ((\u2211 j : Fin n, X j * Y j) / \u2016Y\u2016 ^ 2) +\n      ((\u2211 j : Fin n, X j * Y j) / \u2016Y\u2016 ^ 2) ^ 2 * \u2016Y\u2016 ^ 2 =\n    \u2211 i : Fin n, (X i - (\u2211 j : Fin n, X j * Y j) / \u2016Y\u2016 ^ 2 * Y i) ^ 2\n\u22a2 \u2211 i : Fin n, (X i - (\u2211 j : Fin n, X j * Y j) / \u2016Y\u2016 ^ 2 * Y i) ^ 2 = 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The equality (X\u00b7Y)\u00b2 = |X|\u00b2|Y|\u00b2 is correctly captured with appropriate notation for dot products and norms", "The discriminant being zero is equivalently expressed as the sum of squares being zero, which correctly represents the polynomial achieving its minimum", "The specific root t\u2080 = (X\u00b7Y)/|Y|\u00b2 is correctly represented in the polynomial equation evaluation", "The assumptions and logical structure (equality condition and Y \u2260 0) are properly captured in the hypothesis", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1_hyp : Y \u2260 0 \u2192 \u2200 (t' : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t' + t'^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t' * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : X = t \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016) :\n  \u2203 (X Y : Fin n \u2192 \u211d), (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2227 \u00ac((\u2211 i, X i * Y i)^2 = \u2016X\u2016^2 * \u2016Y\u2016^2 \u2227 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2) = 0 \u2227 ((\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * ((\u2211 j, X j * Y j) / \u2016Y\u2016^2) + ((\u2211 j, X j * Y j) / \u2016Y\u2016^2)^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - ((\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2))) := by\n  sorry"}, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "and\n$$\n\\sum_{i=1}^n(x_i-t_0y_i)^2=0\n$$\n\\nopagebreak\nfrom \\eqref{eq:5.1.4};", "statement": "We assume:\n\u2022 ... [tc_1] through [l6];\n\u2022 If equality holds and $\\mathbf{Y} \\ne \\mathbf{0}$, $p(t)$ has a single real root $t_0$ [l6].\nTherefore, we conclude:\n\u2022 At this root $t_0$, we have $p(t_0)=0$, which by relation [def_1] means $\\sum_{i=1}^n(x_i-t_0y_i)^2=0$ [l7].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3", "l4", "ts_1", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t0 : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : X = t0 \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l6 : (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2192 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2) = 0) :\n  let p (t : \u211d) := \u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2;\n  (t0 = (\u2211 i, X i * Y i) / \u2016Y\u2016^2) \u2192 Y \u2260 0 \u2192 (p t0 = 0 \u2227 (\u2211 i, (X i - t0 * Y i)^2) = 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t0 : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : X = t0 \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l6 : (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2192 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2) = 0) :\n  let p (t : \u211d) := \u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2;\n  (t0 = (\u2211 i, X i * Y i) / \u2016Y\u2016^2) \u2192 Y \u2260 0 \u2192 (p t0 = 0 \u2227 (\u2211 i, (X i - t0 * Y i)^2) = 0) := by\n  intro p ht0 hY\n  constructor\n  \u00b7 simp [p, ht0]\n    have hY2 : \u2016Y\u2016^2 \u2260 0 := by\n      contrapose! hY\n      exact norm_eq_zero.mp hY\n    field_simp [hY2]\n    rw [\u2190 mul_assoc, \u2190 mul_pow, mul_comm (\u2016Y\u2016^2), mul_assoc]\n    ring\n  \u00b7 rw [\u2190 def_1 hY t0]\n    simp [p, ht0]\n    have hY2 : \u2016Y\u2016^2 \u2260 0 := by\n      contrapose! hY\n      exact norm_eq_zero.mp hY\n    field_simp [hY2]\n    rw [\u2190 mul_assoc, \u2190 mul_pow, mul_comm (\u2016Y\u2016^2), mul_assoc]\n    ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 23, "column": 28, "endLine": 23, "endColumn": 30, "data": "application type mismatch\n  norm_eq_zero.mp hY\nargument\n  hY\nhas type\n  \u2016Y\u2016 ^ 2 = 0 : Prop\nbut is expected to have type\n  \u2016Y\u2016 = 0 : Prop"}, {"line": 25, "column": 8, "endLine": 25, "endColumn": 19, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a * (?b * ?c)\ncase left\nn : \u2115\nX Y : Fin n \u2192 \u211d\nt0 : \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1 :\n  Y \u2260 0 \u2192 \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t * Y i) ^ 2\nl3 : Y \u2260 0 \u2192 (\u2211 i : Fin n, X i * Y i) ^ 2 \u2264 \u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2\nl4 : Y \u2260 0 \u2192 |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nts_1 : |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nl5 : X = t0 \u2022 Y \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl6 :\n  |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0 \u2192 \u2211 i : Fin n, (X i - (\u2211 j : Fin n, X j * Y j) / \u2016Y\u2016 ^ 2 * Y i) ^ 2 = 0\np : \u211d \u2192 \u211d := fun t => \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2\nht0 : t0 = (\u2211 i : Fin n, X i * Y i) / \u2016Y\u2016 ^ 2\nhY : Y \u2260 0\nhY2 : \u2016Y\u2016 ^ 2 \u2260 0\n\u22a2 (\u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * \u2211 i : Fin n, X i * Y i) * (\u2016Y\u2016 ^ 2) ^ 2 +\n      (\u2211 i : Fin n, X i * Y i) ^ 2 * \u2016Y\u2016 ^ 2 * \u2016Y\u2016 ^ 2 =\n    0"}, {"line": 31, "column": 28, "endLine": 31, "endColumn": 30, "data": "application type mismatch\n  norm_eq_zero.mp hY\nargument\n  hY\nhas type\n  \u2016Y\u2016 ^ 2 = 0 : Prop\nbut is expected to have type\n  \u2016Y\u2016 = 0 : Prop"}, {"line": 33, "column": 8, "endLine": 33, "endColumn": 19, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a * (?b * ?c)\ncase right\nn : \u2115\nX Y : Fin n \u2192 \u211d\nt0 : \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1 :\n  Y \u2260 0 \u2192 \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t * Y i) ^ 2\nl3 : Y \u2260 0 \u2192 (\u2211 i : Fin n, X i * Y i) ^ 2 \u2264 \u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2\nl4 : Y \u2260 0 \u2192 |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nts_1 : |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nl5 : X = t0 \u2022 Y \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl6 :\n  |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0 \u2192 \u2211 i : Fin n, (X i - (\u2211 j : Fin n, X j * Y j) / \u2016Y\u2016 ^ 2 * Y i) ^ 2 = 0\np : \u211d \u2192 \u211d := fun t => \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2\nht0 : t0 = (\u2211 i : Fin n, X i * Y i) / \u2016Y\u2016 ^ 2\nhY : Y \u2260 0\nhY2 : \u2016Y\u2016 ^ 2 \u2260 0\n\u22a2 (\u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * \u2211 i : Fin n, X i * Y i) * (\u2016Y\u2016 ^ 2) ^ 2 +\n      (\u2211 i : Fin n, X i * Y i) ^ 2 * \u2016Y\u2016 ^ 2 * \u2016Y\u2016 ^ 2 =\n    0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all the logical components from the natural language. It properly establishes that at the root t\u2080, both p(t\u2080)=0 and the sum of squares \u2211(x\u1d62-t\u2080y\u1d62)\u00b2=0, connected through relation def_1. The preconditions (Y\u22600) and the specific form of t\u2080 from l6 are appropriately included. The mathematical relationship between p(t\u2080)=0 and the sum of squares being zero is correctly formalized through the def_1 equality.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l7\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t0 : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : X = t0 \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l6 : (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2192 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2) = 0) :\n  let p (t : \u211d) := \u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2;\n  \u2203 (t0' : \u211d), t0' = (\u2211 i, X i * Y i) / \u2016Y\u2016^2 \u2227 \u2203 (hY : Y \u2260 0), \u00ac(p t0' = 0 \u2227 (\u2211 i, (X i - t0' * Y i)^2) = 0) := by\n  use (\u2211 i, X i * Y i) / \u2016Y\u2016^2\n  constructor\n  \u00b7 rfl\n  \u00b7 use 1\n    constructor\n    \u00b7 intro h\n      exact h\n    \u00b7 intro h\n      simp [p] at h\n      field_simp at h\n      ring_nf at h\n      contradiction"}, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "therefore, $\\mathbf{X}=t_0\\mathbf{Y}$.", "statement": "We assume:\n\u2022 ... [tc_1] through [l7];\n\u2022 $\\sum_{i=1}^n(x_i-t_0y_i)^2=0$ [l7].\nTherefore, we conclude:\n\u2022 Since the sum of squares of real numbers is zero, each term must be zero: $x_i - t_0y_i = 0$ for all $i=1, \\dots, n$. This implies $\\mathbf{X}=t_0\\mathbf{Y}$ [l8].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3", "l4", "ts_1", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t0 : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : X = t0 \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l6 : (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2192 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2) = 0)\n  (l7 : (\u2211 i, (X i - t0 * Y i)^2) = 0) :\n  X = t0 \u2022 Y := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t0 : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : X = t0 \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l6 : (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2192 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2) = 0)\n  (l7 : (\u2211 i, (X i - t0 * Y i)^2) = 0) :\n  X = t0 \u2022 Y := by\n  funext i\n  have h : (X i - t0 * Y i)^2 = 0 := by\n    have : \u2200 i \u2208 Finset.univ, 0 \u2264 (X i - t0 * Y i)^2 := by\n      intro i _\n      exact sq_nonneg (X i - t0 * Y i)\n    rw [Finset.sum_eq_zero_iff_of_nonneg this] at l7\n    exact l7 i (Finset.mem_univ i)\n  rw [pow_eq_zero_iff] at h\n  rw [h.1]\n  simp [smul_apply]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 26, "column": 6, "endLine": 26, "endColumn": 9, "data": "invalid projection, structure has only 0 field(s)\n  h\nhas type\n  X i - t0 * Y i = 0"}, {"line": 26, "column": 6, "endLine": 26, "endColumn": 9, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.19194\ncase h\nn : \u2115\nX Y : Fin n \u2192 \u211d\nt0 : \u211d\ntc_1 : True\nl1 : Y = 0 \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl2 : Y = 0 \u2192 Y = 0 \u2022 X\ndef_1 :\n  Y \u2260 0 \u2192 \u2200 (t : \u211d), \u2016X\u2016 ^ 2 - (2 * \u2211 i : Fin n, X i * Y i) * t + t ^ 2 * \u2016Y\u2016 ^ 2 = \u2211 i : Fin n, (X i - t * Y i) ^ 2\nl3 : Y \u2260 0 \u2192 (\u2211 i : Fin n, X i * Y i) ^ 2 \u2264 \u2016X\u2016 ^ 2 * \u2016Y\u2016 ^ 2\nl4 : Y \u2260 0 \u2192 |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nts_1 : |\u2211 i : Fin n, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016\nl5 : X = t0 \u2022 Y \u2192 |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016\nl6 :\n  |\u2211 i : Fin n, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0 \u2192 \u2211 i : Fin n, (X i - (\u2211 j : Fin n, X j * Y j) / \u2016Y\u2016 ^ 2 * Y i) ^ 2 = 0\nl7 : \u2211 i : Fin n, (X i - t0 * Y i) ^ 2 = 0\ni : Fin n\nh : X i - t0 * Y i = 0\n\u22a2 X i = (t0 \u2022 Y) i"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The premise l7 correctly formalizes the sum of squares equation from the natural language.", "The intermediate reasoning step (sum of squares = 0 implies each term = 0) is a standard mathematical principle that would be applied in the proof, though not explicitly stated as a separate assumption.", "The conclusion X = t0 \u2022 Y correctly represents the vector equation using proper Lean scalar multiplication notation.", "The overall logical structure properly captures the implication from the sum of squares being zero to the vectors being scalar multiples. The additional context premises don't interfere with this core logical relationship.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l8\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t0 : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1 : Y \u2260 0 \u2192 \u2200 (t : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t + t^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : X = t0 \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l6 : (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2192 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2) = 0)\n  (l7 : (\u2211 i, (X i - t0 * Y i)^2) = 0) :\n  \u00ac (X = t0 \u2022 Y) := by\n  intro h\n  have : \u2200 i, X i = t0 * Y i := by\n    intro i\n    exact congr_fun h i\n  have : (\u2211 i, (X i - t0 * Y i)^2) = \u2211 i, 0 := by\n    congr; ext i\n    rw [this i]\n    ring\n  simp [Finset.sum_const_zero] at this\n  rw [l7] at this\n  contradiction"}, "type": "lemma"}, "ts_2": {"id": "ts_2", "natural_language": "with equality  if and only if one of the vectors is a scalar\nmultiple of the other$.$", "statement": "We assume:\n\u2022 ... [tc_1] through [l8];\n\u2022 If $\\mathbf{Y}=\\mathbf{0}$, it is a scalar multiple of $\\mathbf{X}$ and equality holds [l1, l2];\n\u2022 If one vector is a scalar multiple of the other, equality holds [l5];\n\u2022 If equality holds and $\\mathbf{Y}\\ne\\mathbf{0}$, then $\\mathbf{X}$ is a scalar multiple of $\\mathbf{Y}$ [l8].\nTherefore, we conclude:\n\u2022 Equality in $|\\mathbf{X}\\cdot\\mathbf{Y}|\\le |\\mathbf{X}| |\\mathbf{Y}|$ holds if and only if one of the vectors is a scalar multiple of the other [ts_2].", "dependencies": ["tc_1", "l1", "l2", "def_1", "l3", "l4", "ts_1", "l5", "l6", "l7", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  {n : \u2115} (X Y : Fin n \u2192 \u211d) (t t0 : \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1_hyp : Y \u2260 0 \u2192 \u2200 (t' : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t' + t'^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t' * Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : X = t \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l6 : (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2192 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) * Y i)^2) = 0)\n  (l7 : (t0 = (\u2211 i, X i * Y i) / \u2016Y\u2016^2) \u2192 Y \u2260 0 \u2192 (let p (t' : \u211d) := \u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t' + t'^2 * \u2016Y\u2016^2; p t0 = 0 \u2227 (\u2211 i, (X i - t0 * Y i)^2) = 0))\n  (l8 : t0 = (\u2211 i, X i * Y i) / \u2016Y\u2016^2 \u2192 Y \u2260 0 \u2192 (\u2211 i, (X i - t0 * Y i)^2) = 0 \u2192 X = t0 \u2022 Y) :\n  (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016) \u2194 (\u2203 (c : \u211d), X = c \u2022 Y \u2228 Y = c \u2022 X) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  {n : \u2115} (X Y : Fin n \u2192 \u211d)\n  (tc_1 : True)\n  (l1 : Y = 0 \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l2 : Y = 0 \u2192 Y = (0 : \u211d) \u2022 X)\n  (def_1_hyp : Y \u2260 0 \u2192 \u2200 (t' : \u211d), (\u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t' + t'^2 * \u2016Y\u2016^2) = (\u2211 i, (X i - t' \u2022 Y i)^2))\n  (l3 : Y \u2260 0 \u2192 (\u2211 i, X i * Y i)^2 \u2264 \u2016X\u2016^2 * \u2016Y\u2016^2)\n  (l4 : Y \u2260 0 \u2192 |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (ts_1 : |\u2211 i, X i * Y i| \u2264 \u2016X\u2016 * \u2016Y\u2016)\n  (l5 : \u2200 t, X = t \u2022 Y \u2192 |\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016)\n  (l6 : (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016 \u2227 Y \u2260 0) \u2192 (\u2211 i, (X i - ( (\u2211 j, X j * Y j) / \u2016Y\u2016^2) \u2022 Y i)^2) = 0)\n  (l7 : \u2200 t0, (t0 = (\u2211 i, X i * Y i) / \u2016Y\u2016^2) \u2192 Y \u2260 0 \u2192 (let p (t' : \u211d) := \u2016X\u2016^2 - 2 * (\u2211 i, X i * Y i) * t' + t'^2 * \u2016Y\u2016^2; p t0 = 0 \u2227 (\u2211 i, (X i - t0 \u2022 Y i)^2) = 0))\n  (l8 : \u2200 t0, (t0 = (\u2211 i, X i * Y i) / \u2016Y\u2016^2) \u2192 Y \u2260 0 \u2192 (\u2211 i, (X i - t0 \u2022 Y i)^2) = 0 \u2192 X = t0 \u2022 Y) :\n  (|\u2211 i, X i * Y i| = \u2016X\u2016 * \u2016Y\u2016) \u2194 (\u2203 (c : \u211d), X = c \u2022 Y \u2228 Y = c \u2022 X) := by\n  constructor\n  \u00b7 intro h\n    by_cases hY : Y = 0\n    \u00b7 exact \u27e80, Or.inr (l2 hY)\u27e9\n    \u00b7 let t0 := (\u2211 i, X i * Y i) / \u2016Y\u2016^2\n      have h0 := l6 \u27e8h, hY\u27e9\n      have h1 : \u2211 i, (X i - t0 \u2022 Y i)^2 = 0 := by\n        simp only [t0]\n        exact h0\n      exact \u27e8t0, Or.inl (l8 t0 rfl hY h1)\u27e9\n  \u00b7 intro h\n    cases' h with c hc\n    cases' hc with hX hY\n    \u00b7 exact l5 c hX\n    \u00b7 rw [hY]\n      simp only [norm_smul, abs_mul, norm_norm]\n      rw [mul_comm, mul_assoc, \u2190abs_mul, mul_comm (\u2016X\u2016), \u2190mul_assoc, \u2190norm_smul]\n      simp [Pi.zero_apply, norm_zero, mul_zero]\n      rw [\u2190hY, smul_eq_mul, mul_comm]\n      simp [norm_smul, abs_mul]\n      rw [mul_assoc]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 17, "endLine": 14, "endColumn": 22, "data": "typeclass instance problem is stuck, it is often due to metavariables\n  HSMul ?m.6445 (Fin n \u2192 \u211d) (Fin n \u2192 \u211d)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The main theorem statement correctly captures the biconditional relationship between Cauchy-Schwarz equality and scalar multiple conditions.", "The Y=0 case is properly handled with both equality and scalar multiple conditions correctly formalized.", "The scalar multiple implies equality condition (l5) only covers one direction explicitly, though the overall formalization may handle both directions through other lemmas.", "The condition l8 for equality implying scalar multiple relationship is more complex in Lean than suggested by the natural language, requiring intermediate steps through sum of squares rather than being a direct implication.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: ['The main theorem statement correctly captures the biconditional relationship between Cauchy-Schwarz equality and scalar multiple conditions.', 'The Y=0 case is properly handled with both equality and scalar multiple conditions correctly formalized.', 'The scalar multiple implies equality condition (l5) only covers one direction explicitly, though the overall formalization may handle both directions through other lemmas.', 'The condition l8 for equality implying scalar multiple relationship is more complex in Lean than suggested by the natural language, requiring intermediate steps through sum of squares rather than being a direct implication.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    