
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $(a_n)$ be a sequence defined by $a_n = \frac{3n+1}{n+1}$. The limit of the sequence $(a_n)$ is $3$.

Proof: To find the limit of the sequence $(a_n)$, we evaluate the expression $\lim_{n 	o \infty} \frac{3n+1}{n+1}$. We can divide both the numerator and the denominator by the highest power of $n$, which is $n$. This gives us $\lim_{n 	o \infty} \frac{(3n/n)+(1/n)}{(n/n)+(1/n)} = \lim_{n 	o \infty} \frac{3+1/n}{1+1/n}$. We know that as $n$ approaches infinity, the term $1/n$ approaches $0$. Therefore, we can substitute $0$ for $1/n$ in the expression, which gives us $\frac{3+0}{1+0}$. This simplifies to $3$. So, the limit of the sequence $(a_n)$ is $3$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $(a_n)$ be a sequence defined by $a_n = \\frac{3n+1}{n+1}$.", "statement": "Premise:\n\u2022 $(a_n)_{n \\in \\mathbb{N}}$ is a real sequence defined by $a_n = \\frac{3n+1}{n+1}$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'variable (a : \u2115 \u2192 \u211d)' perfectly captures that (a_n) is a real sequence indexed by natural numbers", "The Lean formula '(tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))' exactly matches the mathematical formula a_n = (3n+1)/(n+1) for all n \u2208 \u2115", "The well-definedness of the sequence is implicitly captured by the Lean type system and the universal quantification over all natural numbers, ensuring the sequence is properly defined"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "We can divide both the numerator and the denominator by the highest power of $n$, which is $n$. This gives us $\\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)}$", "statement": "We assume:\n\u2022 $(a_n)_{n \\in \\mathbb{N}}$ is a real sequence defined by $a_n = \\frac{3n+1}{n+1}$ [tc_1].\nTherefore, we conclude:\n\u2022 $\\lim_{n \\to \\infty} a_n = \\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)}$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1)) :\n  Filter.Tendsto (fun n => (3 * n + 1) / (n + 1)) Filter.atTop (fun n => ((3 * n / n) + (1 / n)) / ((n / n) + (1 / n))) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 8, "column": 63, "endLine": 8, "endColumn": 119, "data": "application type mismatch\n  Tendsto (fun n => (3 * n + 1) / (n + 1)) atTop fun n => (3 * n / n + 1 / n) / (n / n + 1 / n)\nargument\n  fun n => (3 * n / n + 1 / n) / (n / n + 1 / n)\nhas type\n  \u2115 \u2192 \u2115 : Type\nbut is expected to have type\n  Filter \u2115 : Type"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1)) :\n  Filter.Tendsto a atTop (nhds 3) := by\n  simp only [tc_1]\n  have : (fun n : \u2115 => (3 * n + 1) / (n + 1)) = (fun n : \u2115 => (3 + 1/(n:\u211d)) / (1 + 1/(n:\u211d))) := by\n    ext n\n    field_simp\n    ring\n  rw [this]\n  have : Filter.Tendsto (fun n => 1/(n : \u211d)) atTop (nhds 0) :=\n    tendsto_one_div_atTop_nhds_0_nat\n  have h\u2081 : Filter.Tendsto (fun n => 3 + 1/(n : \u211d)) atTop (nhds (3 + 0)) :=\n    Tendsto.add_const 3 this\n  have h\u2082 : Filter.Tendsto (fun n => 1 + 1/(n : \u211d)) atTop (nhds (1 + 0)) :=\n    Tendsto.add_const 1 this\n  simp_rw [add_zero] at h\u2081 h\u2082\n  exact Tendsto.div h\u2081 h\u2082 (by norm_num)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 9, "column": 2, "endLine": 9, "endColumn": 18, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "This gives us $\\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)} = \\lim_{n \\to \\infty} \\frac{3+1/n}{1+1/n}$.", "statement": "We assume:\n\u2022 $(a_n)_{n \\in \\mathbb{N}}$ is a real sequence defined by $a_n = \\frac{3n+1}{n+1}$ [tc_1];\n\u2022 $\\lim_{n \\to \\infty} a_n = \\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)}$ [l1].\nTherefore, we conclude:\n\u2022 $\\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)} = \\lim_{n \\to \\infty} \\frac{3+1/n}{1+1/n}$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))\n  (l1 : Filter.Tendsto a Filter.atTop (nhds 3)) :\n  Filter.Tendsto (fun n \u21a6 ((3 * n / n) + (1 / n)) / ((n / n) + (1 / n))) Filter.atTop (nhds ((3 + 1 / n) / (1 + 1 / n))) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 3}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))\n  (l1 : Filter.Tendsto a Filter.atTop (nhds 3)) :\n  Filter.Tendsto (fun n \u21a6 ((3 * n / n) + (1 / n)) / ((n / n) + (1 / n))) Filter.atTop (nhds 3) := by\n  simp_rw [div_self (by exact Nat.cast_ne_zero.mpr (ne_of_gt (Nat.succ_pos _))), \n           mul_div_cancel_left\u2080 (by exact Nat.cast_ne_zero.mpr (ne_of_gt (Nat.succ_pos _))), one_div]\n  have : Filter.Tendsto (fun n \u21a6 (3 + 1 / n) / (1 + 1 / n)) Filter.atTop (nhds ((3 + 0) / (1 + 0))) := by\n    refine tendsto_div (tendsto_add_const_right _ _ (tendsto_const_nhds.add (tendsto_one_div_atTop_nhds_0_nat)))\n      (tendsto_add_const_right _ _ (tendsto_const_nhds.add (tendsto_one_div_atTop_nhds_0_nat))) ?_\n    intro n; field_simp; ring_nf\n  simp at this; exact this", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 52, "endLine": 10, "endColumn": 60, "data": "ambiguous, possible interpretations \n  _root_.ne_of_gt (succ_pos ?m.6633) : succ ?m.6633 \u2260 0\n  \n  Nat.ne_of_gt (succ_pos ?m.6646) : succ ?m.6646 \u2260 0"}, {"line": 10, "column": 11, "endLine": 10, "endColumn": 79, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition tc_1 is correctly formalized as a universal quantification over natural numbers.", "The natural language l1 describes an equality between two limit expressions, but the Lean formalization directly states that sequence a tends to 3, completely omitting the algebraic manipulation aspect mentioned in the natural language.", "The natural language l2 expresses an equality between two limits, but the Lean formalization incorrectly states that the expression tends to '(3 + 1 / n) / (1 + 1 / n)' which still contains the variable n. This cannot be a proper limit value since n is the variable approaching infinity.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The sequence definition tc_1 is correctly formalized as a universal quantification over natural numbers.', 'The natural language l1 describes an equality between two limit expressions, but the Lean formalization directly states that sequence a tends to 3, completely omitting the algebraic manipulation aspect mentioned in the natural language.', \"The natural language l2 expresses an equality between two limits, but the Lean formalization incorrectly states that the expression tends to '(3 + 1 / n) / (1 + 1 / n)' which still contains the variable n. This cannot be a proper limit value since n is the variable approaching infinity.\"]"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "We know that as $n$ approaches infinity, the term $1/n$ approaches $0$.", "statement": "We assume:\n\u2022 $(a_n)_{n \\in \\mathbb{N}}$ is a real sequence defined by $a_n = \\frac{3n+1}{n+1}$ [tc_1];\n\u2022 $\\lim_{n \\to \\infty} a_n = \\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)}$ [l1];\n\u2022 $\\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)} = \\lim_{n \\to \\infty} \\frac{3+1/n}{1+1/n}$ [l2].\nTherefore, we conclude:\n\u2022 $\\lim_{n \\to \\infty} (1/n) = 0$ [l3].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))\n  (l1 : Filter.Tendsto a Filter.atTop (nhds 3))\n  (l2 : Filter.Tendsto (fun n \u21a6 ((3 * n / n) + (1 / n)) / ((n / n) + (1 / n))) Filter.atTop (nhds ((3 + 1 / n) / (1 + 1 / n)))) :\n  Filter.Tendsto (fun n \u21a6 1 / n) Filter.atTop (nhds 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))\n  (l1 : Filter.Tendsto a Filter.atTop (nhds 3))\n  (l2 : Filter.Tendsto (fun n \u21a6 (3 + (1 / n)) / (1 + (1 / n))) Filter.atTop (nhds 3)) :\n  Filter.Tendsto (fun n \u21a6 1 / n) Filter.atTop (nhds 0) := by\n  have h1 : \u2200 n : \u2115, (1 / n) = (3 + (1 / n)) / (1 + (1 / n)) - 3 / (1 + (1 / n)) := by\n    intro n\n    have hn : n \u2260 0 \u2192 (n:\u211d) \u2260 0 := Nat.cast_ne_zero.mpr\n    field_simp [hn (Nat.pos_iff_ne_zero.mp (Nat.succ_pos n))]\n    ring\n  simp_rw [h1]\n  apply Filter.Tendsto.sub\n  exact l2\n  have h2 : Filter.Tendsto (fun n \u21a6 3 / (1 + (1 / n))) Filter.atTop (nhds 3) := by\n    rw [show (3:\u211d) / (1 + 1 / n) = 3 * (1 + 1 / n)\u207b\u00b9 by rfl]\n    apply Filter.Tendsto.const_mul\n    apply Filter.Tendsto.inv\u2080\n    \u00b7 apply Filter.Tendsto.add\n      \u00b7 exact Filter.Tendsto_const_nhds\n      \u00b7 exact Filter.Tendsto.div Filter.Tendsto_const_nhds Filter.Tendsto_id Filter.Tendsto_id\n    \u00b7 intro n\n      norm_num\n      apply add_pos\n      \u00b7 norm_num\n      \u00b7 exact one_div_pos.mpr (Nat.cast_pos.mpr (Nat.succ_pos n))\n  exact h2", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 43, "endLine": 14, "endColumn": 59, "data": "application type mismatch\n  Nat.pos_iff_ne_zero.mp (succ_pos n)\nargument\n  succ_pos n\nhas type\n  0 < n.succ : Prop\nbut is expected to have type\n  0 < n : Prop"}, {"line": 14, "column": 4, "endLine": 14, "endColumn": 61, "data": "simp made no progress"}, {"line": 16, "column": 11, "endLine": 16, "endColumn": 13, "data": "tactic 'simp' failed, nested error:\nmaximum recursion depth has been reached\nuse `set_option maxRecDepth <num>` to increase limit\nuse `set_option diagnostics true` to get diagnostic information"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition is correctly formalized with proper universal quantification over natural numbers.", "The natural language states an equality between two limit expressions, but the Lean formalization directly asserts that the limit of sequence a is 3, completely omitting the intermediate algebraic form mentioned in the natural language.", "The natural language shows a limit equality between two expressions, but the Lean formalization incorrectly states that the left expression tends to a right expression that still contains the variable n, rather than to a constant limit value.", "The conclusion about the limit of 1/n being 0 is correctly formalized using Filter.Tendsto.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The sequence definition is correctly formalized with proper universal quantification over natural numbers.', 'The natural language states an equality between two limit expressions, but the Lean formalization directly asserts that the limit of sequence a is 3, completely omitting the intermediate algebraic form mentioned in the natural language.', 'The natural language shows a limit equality between two expressions, but the Lean formalization incorrectly states that the left expression tends to a right expression that still contains the variable n, rather than to a constant limit value.', 'The conclusion about the limit of 1/n being 0 is correctly formalized using Filter.Tendsto.']"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Therefore, we can substitute $0$ for $1/n$ in the expression, which gives us $\\frac{3+0}{1+0}$.", "statement": "We assume:\n\u2022 $(a_n)_{n \\in \\mathbb{N}}$ is a real sequence defined by $a_n = \\frac{3n+1}{n+1}$ [tc_1];\n\u2022 $\\lim_{n \\to \\infty} a_n = \\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)}$ [l1];\n\u2022 $\\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)} = \\lim_{n \\to \\infty} \\frac{3+1/n}{1+1/n}$ [l2];\n\u2022 $\\lim_{n \\to \\infty} (1/n) = 0$ [l3].\nTherefore, we conclude:\n\u2022 $\\lim_{n \\to \\infty} \\frac{3+1/n}{1+1/n} = \\frac{3+0}{1+0}$ [l4].", "dependencies": ["tc_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))\n  (l1 : Filter.Tendsto a Filter.atTop (nhds 3))\n  (l2 : Filter.Tendsto (fun n \u21a6 ((3 * n / n) + (1 / n)) / ((n / n) + (1 / n))) Filter.atTop (nhds ((3 + 1 / n) / (1 + 1 / n))))\n  (l3 : Filter.Tendsto (fun n \u21a6 1 / n) Filter.atTop (nhds 0)) :\n  Filter.Tendsto (fun n \u21a6 (3 + 1 / n) / (1 + 1 / n)) Filter.atTop (nhds ((3 + 0) / (1 + 0))) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))\n  (l1 : Filter.Tendsto a Filter.atTop (nhds 3))\n  (l2 : Filter.Tendsto (fun n \u21a6 ((3 * n / n) + (1 / n)) / ((n / n) + (1 / n))) Filter.atTop (nhds ((3 + 1 / n) / (1 + 1 / n))))\n  (l3 : Filter.Tendsto (fun n \u21a6 1 / n) Filter.atTop (nhds 0)) :\n  Filter.Tendsto (fun n \u21a6 (3 + 1 / n) / (1 + 1 / n)) Filter.atTop (nhds ((3 + 0) / (1 + 0))) := by\n  have h1 : Filter.Tendsto (fun n \u21a6 3 + (1 / n)) Filter.atTop (nhds (3 + 0)) := by\n    convert Tendsto.add tendsto_const_nhds l3\n    simp\n  have h2 : Filter.Tendsto (fun n \u21a6 1 + (1 / n)) Filter.atTop (nhds (1 + 0)) := by\n    convert Tendsto.add tendsto_const_nhds l3\n    simp\n  convert Tendsto.div h1 h2 (by norm_num)\n  simp [ne_of_gt zero_lt_one]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 4, "endLine": 14, "endColumn": 8, "data": "no goals to be solved"}, {"line": 17, "column": 4, "endLine": 17, "endColumn": 8, "data": "no goals to be solved"}, {"line": 18, "column": 29, "endLine": 18, "endColumn": 40, "data": "unsolved goals\nn : \u2115\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n : \u2115), a n = (3 * \u2191n + 1) / (\u2191n + 1)\nl1 : Tendsto a atTop (\ud835\udcdd 3)\nl2 : Tendsto (fun n => (3 * n / n + 1 / n) / (n / n + 1 / n)) atTop (\ud835\udcdd ((3 + 1 / n) / (1 + 1 / n)))\nl3 : Tendsto (fun n => 1 / n) atTop (\ud835\udcdd 0)\nh1 : Tendsto (fun n => 3 + 1 / n) atTop (\ud835\udcdd (3 + 0))\nh2 : Tendsto (fun n => 1 + 1 / n) atTop (\ud835\udcdd (1 + 0))\n\u22a2 \u00ac1 = 0"}, {"line": 19, "column": 8, "endLine": 19, "endColumn": 16, "data": "ambiguous, possible interpretations \n  _root_.ne_of_gt zero_lt_one : 1 \u2260 0\n  \n  Nat.ne_of_gt zero_lt_one : 1 \u2260 0"}, {"line": 19, "column": 2, "endLine": 19, "endColumn": 29, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition is correctly formalized with the exact same mathematical expression.", "The natural language states an equality between two limits, but the Lean formalization only states that the limit of a_n tends to 3, missing the equality relationship with the transformed expression.", "The natural language expresses an equality between two limit expressions, but the Lean formalization incorrectly states that one expression tends to the other expression (which contains a free variable n), rather than expressing the equality of their limits.", "The limit statement for 1/n approaching 0 is correctly captured using Filter.Tendsto.", "The final conclusion correctly expresses that the limit of the fraction tends to (3+0)/(1+0), which matches the natural language statement.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The sequence definition is correctly formalized with the exact same mathematical expression.', 'The natural language states an equality between two limits, but the Lean formalization only states that the limit of a_n tends to 3, missing the equality relationship with the transformed expression.', 'The natural language expresses an equality between two limit expressions, but the Lean formalization incorrectly states that one expression tends to the other expression (which contains a free variable n), rather than expressing the equality of their limits.', 'The limit statement for 1/n approaching 0 is correctly captured using Filter.Tendsto.', 'The final conclusion correctly expresses that the limit of the fraction tends to (3+0)/(1+0), which matches the natural language statement.']"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "This simplifies to $3$.", "statement": "We assume:\n\u2022 $(a_n)_{n \\in \\mathbb{N}}$ is a real sequence defined by $a_n = \\frac{3n+1}{n+1}$ [tc_1];\n\u2022 $\\lim_{n \\to \\infty} a_n = \\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)}$ [l1];\n\u2022 $\\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)} = \\lim_{n \\to \\infty} \\frac{3+1/n}{1+1/n}$ [l2];\n\u2022 $\\lim_{n \\to \\infty} (1/n) = 0$ [l3];\n\u2022 $\\lim_{n \\to \\infty} \\frac{3+1/n}{1+1/n} = \\frac{3+0}{1+0}$ [l4].\nTherefore, we conclude:\n\u2022 $\\frac{3+0}{1+0} = 3$ [l5].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))\n  (l1 : Filter.Tendsto a Filter.atTop (nhds 3))\n  (l2 : Filter.Tendsto (fun n \u21a6 ((3 * n / n) + (1 / n)) / ((n / n) + (1 / n))) Filter.atTop (nhds ((3 + 1 / n) / (1 + 1 / n))))\n  (l3 : Filter.Tendsto (fun n \u21a6 1 / n) Filter.atTop (nhds 0))\n  (l4 : Filter.Tendsto (fun n \u21a6 (3 + 1 / n) / (1 + 1 / n)) Filter.atTop (nhds ((3 + 0) / (1 + 0)))) :\n  (3 + 0) / (1 + 0) = 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))\n  (l1 : Filter.Tendsto a Filter.atTop (nhds 3))\n  (l2 : Filter.Tendsto (fun n \u21a6 ((3 * n / n) + (1 / n)) / ((n / n) + (1 / n))) Filter.atTop (nhds ((3 + 1 / n) / (1 + 1 / n))))\n  (l3 : Filter.Tendsto (fun n \u21a6 1 / n) Filter.atTop (nhds 0))\n  (l4 : Filter.Tendsto (fun n \u21a6 (3 + 1 / n) / (1 + 1 / n)) Filter.atTop (nhds ((3 + 0) / (1 + 0)))) :\n  (3 + 0) / (1 + 0) = 3 := by\n  field_simp", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The sequence definition is correctly formalized with proper universal quantification over natural numbers.", "The natural language states an equality between two limit expressions, but the Lean formalization only captures that the sequence tends to 3, completely missing the algebraic manipulation step that shows the equivalence of the two limit expressions.", "The natural language expresses an equality between two limits, but the Lean formalization incorrectly states that the left expression tends to '(3 + 1 / n) / (1 + 1 / n)' which still contains the variable n, rather than properly expressing the limit equality or convergence.", "The basic limit of 1/n to 0 is correctly formalized using Filter.Tendsto.", "The limit evaluation step is correctly captured, showing the sequence tends to the evaluated expression.", "The final arithmetic simplification is correctly stated as an equality."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The sequence definition is correctly formalized with proper universal quantification over natural numbers.', 'The natural language states an equality between two limit expressions, but the Lean formalization only captures that the sequence tends to 3, completely missing the algebraic manipulation step that shows the equivalence of the two limit expressions.', \"The natural language expresses an equality between two limits, but the Lean formalization incorrectly states that the left expression tends to '(3 + 1 / n) / (1 + 1 / n)' which still contains the variable n, rather than properly expressing the limit equality or convergence.\", 'The basic limit of 1/n to 0 is correctly formalized using Filter.Tendsto.', 'The limit evaluation step is correctly captured, showing the sequence tends to the evaluated expression.', 'The final arithmetic simplification is correctly stated as an equality.']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "So, the limit of the sequence $(a_n)$ is $3$.", "statement": "We assume:\n\u2022 $(a_n)_{n \\in \\mathbb{N}}$ is a real sequence defined by $a_n = \\frac{3n+1}{n+1}$ [tc_1];\n\u2022 $\\lim_{n \\to \\infty} a_n = \\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)}$ [l1];\n\u2022 $\\lim_{n \\to \\infty} \\frac{(3n/n)+(1/n)}{(n/n)+(1/n)} = \\lim_{n \\to \\infty} \\frac{3+1/n}{1+1/n}$ [l2];\n\u2022 $\\lim_{n \\to \\infty} (1/n) = 0$ [l3];\n\u2022 $\\lim_{n \\to \\infty} \\frac{3+1/n}{1+1/n} = \\frac{3+0}{1+0}$ [l4];\n\u2022 $\\frac{3+0}{1+0} = 3$ [l5].\nTherefore, we conclude:\n\u2022 The limit of the sequence $(a_n)$ is $3$ [ts_1].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))\n  (l1 : Filter.Tendsto a Filter.atTop (nhds 3))\n  (l2 : Filter.Tendsto (fun n \u21a6 ((3 * n / n) + (1 / n)) / ((n / n) + (1 / n))) Filter.atTop (nhds ((3 + 1 / n) / (1 + 1 / n))))\n  (l3 : Filter.Tendsto (fun n \u21a6 1 / n) Filter.atTop (nhds 0))\n  (l4 : Filter.Tendsto (fun n \u21a6 (3 + 1 / n) / (1 + 1 / n)) Filter.atTop (nhds ((3 + 0) / (1 + 0))))\n  (l5 : (3 + 0) / (1 + 0) = 3) :\n  Filter.Tendsto a Filter.atTop (nhds 3) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = (3 * n + 1) / (n + 1))\n  (l1 : Filter.Tendsto a Filter.atTop (nhds 3))\n  (l2 : Filter.Tendsto (fun n \u21a6 ((3 * n / n) + (1 / n)) / ((n / n) + (1 / n))) Filter.atTop (nhds ((3 + 1 / n) / (1 + 1 / n))))\n  (l3 : Filter.Tendsto (fun n \u21a6 1 / n) Filter.atTop (nhds 0))\n  (l4 : Filter.Tendsto (fun n \u21a6 (3 + 1 / n) / (1 + 1 / n)) Filter.atTop (nhds ((3 + 0) / (1 + 0))))\n  (l5 : (3 + 0) / (1 + 0) = 3) :\n  Filter.Tendsto a Filter.atTop (nhds 3) := by\n  simp_rw [tc_1]\n  have : \u2200 n > 0, (3 * n + 1) / (n + 1) = (3 + 1 / n) / (1 + 1 / n) := by\n    intro n hn\n    field_simp\n    ring\n  simp_rw [this _ (Nat.zero_lt_succ _)]\n  exact l4.trans (congr_arg nhds l5)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 11, "endLine": 14, "endColumn": 15, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition is correctly formalized with proper type annotations.", "The natural language describes an equality between two limit expressions, but Lean directly states the limit value. The intermediate algebraic step is missing.", "The Lean formalization has a free variable 'n' in the target of the limit, which is mathematically incorrect. The target should be a constant value.", "The limit of 1/n to 0 is correctly formalized using Filter.Tendsto.", "Similar to l2, the Lean formalization has a free variable 'n' in the target expression, making it mathematically invalid.", "The arithmetic simplification is correctly stated as an equality.", "The final conclusion correctly states that the sequence tends to 3.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The sequence definition is correctly formalized with proper type annotations.', 'The natural language describes an equality between two limit expressions, but Lean directly states the limit value. The intermediate algebraic step is missing.', \"The Lean formalization has a free variable 'n' in the target of the limit, which is mathematically incorrect. The target should be a constant value.\", 'The limit of 1/n to 0 is correctly formalized using Filter.Tendsto.', \"Similar to l2, the Lean formalization has a free variable 'n' in the target expression, making it mathematically invalid.\", 'The arithmetic simplification is correctly stated as an equality.', 'The final conclusion correctly states that the sequence tends to 3.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    