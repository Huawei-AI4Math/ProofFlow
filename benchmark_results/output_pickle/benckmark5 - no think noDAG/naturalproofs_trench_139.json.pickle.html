
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $\mathbf{X},$ $\mathbf{Y},$ and
$\mathbf{Z}$ are members of $\R^n$ and $a$ is a scalar, then
\begin{alist}
\item % (a)
 $|a\mathbf{X}|=|a|\,|\mathbf{X}|.$
\item % (b)
 $|\mathbf{X}|\ge0,$ with equality if and only if $\mathbf{X}=
\mathbf{0}.$
\item % (c)
 $|\mathbf{X}-\mathbf{Y}|\ge0,$ with equality if and only if
$\mathbf{X}=\mathbf{Y}.$
\item % (d)
$\mathbf{X}\cdot\mathbf{Y}=\mathbf{Y}\cdot\mathbf{X}.$
\item % (e)
 $\mathbf{X}\cdot (\mathbf{Y}+\mathbf{Z})=\mathbf{X}\cdot\mathbf{Y}+
\mathbf{X}\cdot\mathbf{Z}.$
\item % (f)
 $(c\mathbf{X})\cdot\mathbf{Y}=\mathbf{X}\cdot (c\mathbf{Y})=
c(\mathbf{X}\cdot\mathbf{Y}).$
\end{alist}

Proof: The line segment is given by
$$
\mathbf{X}=t\mathbf{X}_2+(1-t)\mathbf{X}_1,\quad 0<t<1.
$$
Suppose that $r>0$. If
$$
|\mathbf{X}_1-\mathbf{X}_0|<r,\quad |\mathbf{X}_2-\mathbf{X}_0|<r,
$$
and $0<t<1$, then
\begin{eqnarray*}
|\mathbf{X}-\mathbf{X}_0|\ar=|t\mathbf{X}_2+(1-t)\mathbf{X}_1-t\mathbf{X}_0-(1-t)\mathbf{X}_0|\\
\ar=|t(\mathbf{X}_2-\mathbf{X}_0)+(1-t)\mathbf{X}_1-\mathbf{X}_0)|\\
\ar\le  t|\mathbf{X}_2-\mathbf{X}_0|+(1-t)|\mathbf{X}_1-\mathbf{X}_0|\\
\ar< tr+(1-t)r=r.
\end{eqnarray*}
\vskip-2em
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "If $\\mathbf{X},$ $\\mathbf{Y},$ and $\\mathbf{Z}$ are members of $\\R^n$ and $a$ is a scalar...", "statement": "Premise:\n\u2022 Let $\\mathbf{X}_0, \\mathbf{X}_1, \\mathbf{X}_2$ be vectors in $\\mathbb{R}^n$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical statement. EuclideanSpace \u211d (Fin n) is the appropriate Lean representation of \u211d\u207f, and the variable names X0, X1, X2 correspond to the mathematical notation. The explicit declaration of n as a natural number is an additional detail that is logically consistent and expected in formal mathematics."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "$|a\\mathbf{X}|=|a|\\,|\\mathbf{X}|.$", "statement": "Premise:\n\u2022 Let $\\mathbf{X}_0, \\mathbf{X}_1, \\mathbf{X}_2$ be vectors in $\\mathbb{R}^n$ [tc_1].\n\u2022 The norm $|\\cdot|$ on $\\mathbb{R}^n$ satisfies $|a\\mathbf{V}|=|a|\\,|\\mathbf{V}|$ for any scalar $a$ and vector $\\mathbf{V}$, and the triangle inequality $|\\mathbf{V}+\\mathbf{W}| \\le |\\mathbf{V}|+|\\mathbf{W}|$ for any vectors $\\mathbf{V}, \\mathbf{W}$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))\n(tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), \u2225a \u2022 V\u2225 = |a| * \u2225V\u2225 \u2227 \u2225V + W\u2225 \u2264 \u2225V\u2225 + \u2225W\u2225)", "lean_pass": false, "error_msg": [], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "Suppose that $r>0$.", "statement": "Premise:\n\u2022 Let $\\mathbf{X}_0, \\mathbf{X}_1, \\mathbf{X}_2$ be vectors in $\\mathbb{R}^n$ [tc_1].\n\u2022 The norm $|\\cdot|$ on $\\mathbb{R}^n$ satisfies properties including the triangle inequality [tc_2].\n\u2022 $r$ is a real number such that $r>0$ [tc_3].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))\n(tc_1 : True)\n(tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n(r : \u211d) (tc_3 : r > 0)", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.67, "semantic_feedback": ["The natural language specifies vectors in \u211d\u207f, while Lean uses EuclideanSpace \u211d (Fin n). While these are mathematically equivalent representations of n-dimensional real vector spaces, EuclideanSpace is a more specific type in Lean that comes with additional structure (inner product, norm, etc.). This is a minor notational difference but captures the same mathematical concept.", "The Lean formalization correctly captures the norm properties. It explicitly states both the homogeneity property (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) and the triangle inequality (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016), which matches the natural language requirement that the norm satisfies properties including the triangle inequality.", "The Lean formalization perfectly matches the natural language condition, declaring r as a real number with the constraint r > 0."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_4": {"id": "tc_4", "natural_language": "If $|\\mathbf{X}_1-\\mathbf{X}_0|<r,\\quad |\\mathbf{X}_2-\\mathbf{X}_0|<r,", "statement": "Premise:\n\u2022 Let $\\mathbf{X}_0, \\mathbf{X}_1, \\mathbf{X}_2$ be vectors in $\\mathbb{R}^n$ [tc_1].\n\u2022 The norm $|\\cdot|$ on $\\mathbb{R}^n$ satisfies properties including the triangle inequality [tc_2].\n\u2022 $r$ is a real number such that $r>0$ [tc_3].\n\u2022 $|\\mathbf{X}_1-\\mathbf{X}_0|<r$ and $|\\mathbf{X}_2-\\mathbf{X}_0|<r$ [tc_4].", "dependencies": ["tc_1", "tc_2", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))\n(tc_1 : True)\n(tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n(r : \u211d) (tc_3 : r > 0)\n(tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.75, "semantic_feedback": ["The Lean formalization correctly represents vectors in \u211d\u207f using EuclideanSpace \u211d (Fin n), which is the standard Lean representation for finite-dimensional real vector spaces. The tc_1 : True is just a placeholder and doesn't affect the mathematical content.", "The Lean formalization includes both scalar multiplication property and triangle inequality for the norm, which is more comprehensive than just mentioning triangle inequality in the natural language. However, it captures the essential requirement that the norm satisfies standard properties including triangle inequality.", "The Lean formalization perfectly captures that r is a positive real number.", "The Lean formalization correctly represents both distance conditions using the norm notation \u2016\u00b7\u2016, which is equivalent to the absolute value notation |\u00b7| used in the natural language for vector norms."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "The line segment is given by\n$$\n\\mathbf{X}=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1,\\quad 0<t<1.\n$$", "statement": "Definition:\n\u2022 Let $\\mathbf{X}_0, \\mathbf{X}_1, \\mathbf{X}_2$ be vectors in $\\mathbb{R}^n$ [tc_1].\n\u2022 The norm $|\\cdot|$ on $\\mathbb{R}^n$ satisfies properties including the triangle inequality [tc_2].\n\u2022 $r$ is a real number such that $r>0$ [tc_3].\n\u2022 $|\\mathbf{X}_1-\\mathbf{X}_0|<r$ and $|\\mathbf{X}_2-\\mathbf{X}_0|<r$ [tc_4].\n\u2022 A vector $\\mathbf{X}$ is defined as $\\mathbf{X}=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for a scalar $t$ such that $0<t<1$ [def_1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))\n(tc_1 : True)\n(tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n(r : \u211d) (tc_3 : r > 0)\n(tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n(X : EuclideanSpace \u211d (Fin n)) (t : \u211d) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.83, "semantic_feedback": ["The natural language uses $\\mathbb{R}^n$ while Lean uses EuclideanSpace \u211d (Fin n). These are mathematically equivalent but use different representations - EuclideanSpace is Lean's standard way to represent finite-dimensional real vector spaces with inner products.", "The Lean formalization correctly captures the norm properties including triangle inequality and scalar multiplication property, which encompasses the natural language requirement.", "Both specify r as a positive real number in exactly the same way.", "Both express the same distance constraints using appropriate notation (| | vs \u2016 \u2016 for norms).", "The constraint 0 < t < t < 1 is captured in the Lean definition within def_1.", "The definition of X as the convex combination is properly captured in Lean using scalar multiplication notation (\u2022) which is equivalent to the natural language expression."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "$|\\mathbf{X}-\\mathbf{X}_0|=|t\\mathbf{X}_2+(1-t)\\mathbf{X}_1-t\\mathbf{X}_0-(1-t)\\mathbf{X}_0|$", "statement": "We assume:\n\u2022 Let $\\mathbf{X}_0, \\mathbf{X}_1, \\mathbf{X}_2$ be vectors in $\\mathbb{R}^n$ [tc_1].\n\u2022 The norm on $\\mathbb{R}^n$ satisfies certain properties [tc_2].\n\u2022 $r>0$ [tc_3].\n\u2022 $|\\mathbf{X}_1-\\mathbf{X}_0|<r$ and $|\\mathbf{X}_2-\\mathbf{X}_0|<r$ [tc_4].\n\u2022 $\\mathbf{X}=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $0<t<1$ [def_1].\nTherefore, we conclude:\n\u2022 $|\\mathbf{X}-\\mathbf{X}_0| = |t\\mathbf{X}_2+(1-t)\\mathbf{X}_1-t\\mathbf{X}_0-(1-t)\\mathbf{X}_0|$ [l1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (t : \u211d) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1) :\n  \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (t : \u211d) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1) :\n  \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 := by\n  rw [def_1.1]\n  congr 1\n  simp only [sub_add_eq_sub_sub, smul_sub, sub_right_inj]\n  have h : X0 = t \u2022 X0 + (1 - t) \u2022 X0 := by rw [add_smul, one_smul]; simp\n  rw [h, sub_add_sub_cancel]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 48, "endLine": 16, "endColumn": 56, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  (?r + ?s) \u2022 ?x\nn : \u2115\nX0 X1 X2 : EuclideanSpace \u211d (Fin n)\ntc_1 : True\ntc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), \u2016a \u2022 V\u2016 = |a| * \u2016V\u2016 \u2227 \u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016\nr : \u211d\ntc_3 : r > 0\ntc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r\nX : EuclideanSpace \u211d (Fin n)\nt : \u211d\ndef_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1\n\u22a2 X0 = t \u2022 X0 + (1 - t) \u2022 X0"}, {"line": 17, "column": 9, "endLine": 17, "endColumn": 27, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a - ?b + (?b - ?c)\ncase e_a\nn : \u2115\nX0 X1 X2 : EuclideanSpace \u211d (Fin n)\ntc_1 : True\ntc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), \u2016a \u2022 V\u2016 = |a| * \u2016V\u2016 \u2227 \u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016\nr : \u211d\ntc_3 : r > 0\ntc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r\nX : EuclideanSpace \u211d (Fin n)\nt : \u211d\ndef_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1\nh : X0 = t \u2022 X0 + (1 - t) \u2022 X0\n\u22a2 t \u2022 X2 + (1 - t) \u2022 X1 - (t \u2022 X0 + (1 - t) \u2022 X0) =\n    t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 (t \u2022 X0 + (1 - t) \u2022 X0) - (1 - t) \u2022 (t \u2022 X0 + (1 - t) \u2022 X0)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1: The Lean formalization correctly represents vectors in \u211d\u207f using EuclideanSpace \u211d (Fin n). The dummy condition (tc_1 : True) doesn't affect the mathematical meaning.", "tc_2: The norm properties are correctly formalized with homogeneity \u2016a \u2022 V\u2016 = |a| * \u2016V\u2016 and triangle inequality \u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016, which are the essential norm properties mentioned in natural language.", "tc_3: The condition r > 0 is directly and correctly translated.", "tc_4: Both norm conditions \u2016X1 - X0\u2016 < r and \u2016X2 - X0\u2016 < r are correctly captured using conjunction.", "def_1: The definition X = t \u2022 X2 + (1 - t) \u2022 X1 with constraints 0 < t < 1 is perfectly formalized using scalar multiplication notation and conjunction of bounds.", "l1: The conclusion correctly expands X - X\u2080 by substituting the definition and distributing the subtraction, maintaining mathematical equivalence with the natural language statement.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l1\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (t : \u211d) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1) :\n  \u00ac(\u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016) := by\n  intro h\n  have hX : X = t \u2022 X2 + (1 - t) \u2022 X1 := def_1.1\n  rw [hX] at h\n  simp at h\n  have h' : \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 \u2264 t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016 := by\n    rw [\u2190 norm_smul t (X2 - X0), \u2190 norm_smul (1 - t) (X1 - X0)]\n    exact (tc_2 1 (t \u2022 (X2 - X0)) ((1 - t) \u2022 (X1 - X0))).2\n  have : \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 < r := by\n    apply lt_of_le_of_lt h''\n    apply add_lt_add\n    \u00b7 exact mul_lt_mul_of_pos_left tc_4.2 def_1.2.1\n    \u00b7 exact mul_lt_mul_of_pos_left tc_4.1 (by linarith [def_1.2.2])\n  rw [\u2190 h] at this\n  exact lt_irrefl _ this"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "=|t(\\mathbf{X}_2-\\mathbf{X}_0)+(1-t)\\mathbf{X}_1-\\mathbf{X}_0)|", "statement": "We assume:\n\u2022 All previous premises from [tc_1] to [tc_4] and definition [def_1].\n\u2022 $|\\mathbf{X}-\\mathbf{X}_0| = |t\\mathbf{X}_2+(1-t)\\mathbf{X}_1-t\\mathbf{X}_0-(1-t)\\mathbf{X}_0|$ [l1].\nTherefore, we conclude:\n\u2022 $|t\\mathbf{X}_2+(1-t)\\mathbf{X}_1-t\\mathbf{X}_0-(1-t)\\mathbf{X}_0| = |t(\\mathbf{X}_2-\\mathbf{X}_0)+(1-t)(\\mathbf{X}_1-\\mathbf{X}_0)|$ [l2].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (t : \u211d) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)\n  (l1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016) :\n  \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (t : \u211d) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)\n  (l1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016) :\n  \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 := by\n  simp only [sub_smul, smul_sub]\n  rw [\u2190 add_sub_assoc, sub_sub, sub_right_comm, sub_sub, add_sub_assoc]\n  simp [add_sub_right_comm, sub_add_eq_sub_sub, sub_right_inj]\n  rw [add_comm (t \u2022 X2), add_assoc, \u2190 add_assoc (X1 - X0), add_comm (t \u2022 X2), add_assoc]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 17, "column": 25, "endLine": 17, "endColumn": 34, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a + ?b + ?c\nn : \u2115\nX0 X1 X2 : EuclideanSpace \u211d (Fin n)\ntc_1 : True\ntc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), \u2016a \u2022 V\u2016 = |a| * \u2016V\u2016 \u2227 \u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016\nr : \u211d\ntc_3 : r > 0\ntc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r\nX : EuclideanSpace \u211d (Fin n)\nt : \u211d\ndef_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1\nl1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016\n\u22a2 \u2016X1 - X0 - t \u2022 X1 + t \u2022 X2\u2016 = \u2016t \u2022 X2 - t \u2022 X0 + (X1 - t \u2022 X1 - (X0 - t \u2022 X0))\u2016"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization perfectly captures the mathematical content of the natural language statement. The conclusion shows the same algebraic manipulation - factoring out scalar multiples from a norm expression. The use of scalar multiplication notation (\u2022) and norm notation (\u2016\u00b7\u2016) are standard Lean conventions that correspond exactly to the mathematical operations described in natural language. All referenced assumptions and definitions are properly included as parameters. The logical structure and mathematical meaning are preserved completely.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n))\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (t : \u211d) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)\n  (l1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016) :\n  \u00ac(\u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016) := by\n  intro h\n  simp only [sub_smul, smul_sub, \u2190 add_sub_assoc, sub_left_inj] at h\n  have : t \u2022 X2 + (1 - t) \u2022 X1 - X0 = t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0) := by\n    simp only [sub_smul, smul_sub, \u2190 add_sub_assoc, sub_left_inj]\n  rw [this] at h\n  exact (ne_of_lt (lt_irrefl _)).symm h"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "\\le  t|\\mathbf{X}_2-\\mathbf{X}_0|+(1-t)|\\mathbf{X}_1-\\mathbf{X}_0|", "statement": "We assume:\n\u2022 All previous premises [tc_1]-[tc_4], definition [def_1], and lemmas [l1]-[l2].\n\u2022 The expression for $|\\mathbf{X}-\\mathbf{X}_0|$ is equivalent to $|t(\\mathbf{X}_2-\\mathbf{X}_0)+(1-t)(\\mathbf{X}_1-\\mathbf{X}_0)|$ [l1, l2].\nTherefore, we conclude:\n\u2022 $|t(\\mathbf{X}_2-\\mathbf{X}_0)+(1-t)(\\mathbf{X}_1-\\mathbf{X}_0)| \\le t|\\mathbf{X}_2-\\mathbf{X}_0|+(1-t)|\\mathbf{X}_1-\\mathbf{X}_0|$ [l3].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n)) (t : \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)\n  (l1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016)\n  (l2 : \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016) :\n  \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 \u2264 t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n)) (t : \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)\n  (l1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016)\n  (l2 : \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016) :\n  \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 \u2264 t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016 := by\n  have h1 := tc_2 t (X2 - X0) ((1 - t) \u2022 (X1 - X0))\n  have h2 := tc_2 (1 - t) (X1 - X0) (0 \u2022 (X1 - X0))\n  simp at h1 h2\n  rw [norm_smul] at h2\n  have ht : |t| = t := abs_of_pos def_1.2.1\n  have h1t : |1 - t| = 1 - t := abs_of_pos (sub_pos.mpr def_1.2.2)\n  rw [ht, h1t] at h1 h2\n  rw [\u2190 h1.1, \u2190 h2.1]\n  exact h1.2", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 21, "column": 6, "endLine": 21, "endColumn": 8, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  |t|\nn : \u2115\nX0 X1 X2 : EuclideanSpace \u211d (Fin n)\nt : \u211d\ntc_1 : True\ntc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), \u2016a \u2022 V\u2016 = |a| * \u2016V\u2016 \u2227 \u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016\nr : \u211d\ntc_3 : r > 0\ntc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r\nX : EuclideanSpace \u211d (Fin n)\ndef_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1\nl1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016\nl2 : \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016\nh1 : \u2016t \u2022 (X2 - X0)\u2016 = t * \u2016X2 - X0\u2016 \u2227 \u2016X2 - X0 + (1 - t) \u2022 (X1 - X0)\u2016 \u2264 \u2016X2 - X0\u2016 + \u2016(1 - t) \u2022 (X1 - X0)\u2016\nh2 : \u20161 - t\u2016 * \u2016X1 - X0\u2016 = |1 - t| * \u2016X1 - X0\u2016\nht : |t| = t\nh1t : |1 - t| = 1 - t\n\u22a2 \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 \u2264 t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The mathematical inequality, the chain of equivalences through l1 and l2, and all referenced assumptions are properly included. The differences in notation (\u2016\u00b7\u2016 vs |\u00b7|, \u2022 vs implicit multiplication, * vs \u00b7) are standard translation conventions between natural language mathematics and Lean. The logical structure and mathematical meaning are preserved completely.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l3\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n)) (t : \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)\n  (l1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016)\n  (l2 : \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016) :\n  \u00ac (\u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 \u2264 t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016) := by\n  simp [norm_add_le, norm_smul]\n  intro h\n  have := tc_2 t (X2 - X0) ((1 - t) \u2022 (X1 - X0))\n  simp at this\n  exact not_le_of_lt (lt_of_not_ge h) this.2"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "< tr+(1-t)r", "statement": "We assume:\n\u2022 All previous premises [tc_1]-[tc_4], definition [def_1], and lemmas [l1]-[l3].\n\u2022 $|\\mathbf{X}-\\mathbf{X}_0|$ is less than or equal to $t|\\mathbf{X}_2-\\mathbf{X}_0|+(1-t)|\\mathbf{X}_1-\\mathbf{X}_0|$ [l1, l2, l3].\nTherefore, we conclude:\n\u2022 $t|\\mathbf{X}_2-\\mathbf{X}_0|+(1-t)|\\mathbf{X}_1-\\mathbf{X}_0| < tr+(1-t)r$ [l4].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "def_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n)) (t : \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)\n  (l1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016)\n  (l2 : \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016)\n  (l3 : \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 \u2264 t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016) :\n  t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016 < t * r + (1 - t) * r := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n)) (t : \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (r : \u211d) (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (X : EuclideanSpace \u211d (Fin n)) (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)\n  (l1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016)\n  (l2 : \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016)\n  (l3 : \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 \u2264 t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016) :\n  t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016 < t * r + (1 - t) * r := by\n  have h1 := tc_4.1\n  have h2 := tc_4.2\n  have ht1 := def_1.2.1\n  have ht2 := def_1.2.2\n  apply _root_.add_lt_add\n  \u00b7 exact mul_lt_mul_of_pos_left h2 ht1\n  \u00b7 exact mul_lt_mul_of_pos_left h1 (sub_pos.mpr ht2)", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical content of the natural language statement. The goal inequality matches exactly, all referenced premises are properly included as hypotheses, and the key assumption about the norm inequality is correctly represented through the lemma chain l1-l3. The additional mathematical constraints (like r > 0, bounds on t, etc.) are logically necessary and consistent additions that don't contradict the natural language statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "=r.", "statement": "We assume:\n\u2022 All previous premises [tc_1]-[tc_4], definition [def_1], and lemmas [l1]-[l4].\n\u2022 The upper bound for $|\\mathbf{X}-\\mathbf{X}_0|$ is less than $tr+(1-t)r$ [l1, l2, l3, l4].\nTherefore, we conclude:\n\u2022 $tr+(1-t)r = r$ [l5].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "def_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (t r : \u211d) :\n  t * r + (1 - t) * r = r := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (t r : \u211d) :\n  t * r + (1 - t) * r = r := by\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The mathematical identity is perfectly captured (tr+(1-t)r = r \u2261 t * r + (1 - t) * r = r), but the Lean formalization treats this as a standalone algebraic identity rather than a conclusion derived from previous geometric context about upper bounds. While mathematically equivalent and valid, this represents a structural difference in how the result is presented - as an independent fact versus a derived conclusion."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: ['The mathematical identity is perfectly captured (tr+(1-t)r = r \u2261 t * r + (1 - t) * r = r), but the Lean formalization treats this as a standalone algebraic identity rather than a conclusion derived from previous geometric context about upper bounds. While mathematically equivalent and valid, this represents a structural difference in how the result is presented - as an independent fact versus a derived conclusion.']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "|\\mathbf{X}-\\mathbf{X}_0|\\ar=|t\\mathbf{X}_2+(1-t)\\mathbf{X}_1-t\\mathbf{X}_0-(1-t)\\mathbf{X}_0|\\n\\ar=|t(\\mathbf{X}_2-\\mathbf{X}_0)+(1-t)\\mathbf{X}_1-\\mathbf{X}_0)|\\n\\ar\\le  t|\\mathbf{X}_2-\\mathbf{X}_0|+(1-t)|\\mathbf{X}_1-\\mathbf{X}_0|\\n\\ar< tr+(1-t)r=r.", "statement": "We assume:\n\u2022 All previous premises [tc_1]-[tc_4], definition [def_1], and lemmas [l1]-[l5].\n\u2022 The chain of relations: $|\\mathbf{X}-\\mathbf{X}_0| = |t(\\mathbf{X}_2-\\mathbf{X}_0)+(1-t)(\\mathbf{X}_1-\\mathbf{X}_0)| \\le t|\\mathbf{X}_2-\\mathbf{X}_0|+(1-t)|\\mathbf{X}_1-\\mathbf{X}_0| < tr+(1-t)r = r$ [l1, l2, l3, l4, l5].\nTherefore, we conclude:\n\u2022 $|\\mathbf{X}-\\mathbf{X}_0|<r$ [ts_1].", "dependencies": ["tc_1", "tc_2", "tc_3", "tc_4", "def_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n)) (X : EuclideanSpace \u211d (Fin n)) (t : \u211d) (r : \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)\n  (l1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016)\n  (l2 : \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016)\n  (l3 : \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 \u2264 t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016)\n  (l4 : t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016 < t * r + (1 - t) * r)\n  (l5 : t * r + (1 - t) * r = r) :\n  \u2016X - X0\u2016 < r := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115} (X0 X1 X2 : EuclideanSpace \u211d (Fin n)) (X : EuclideanSpace \u211d (Fin n)) (t : \u211d) (r : \u211d)\n  (tc_1 : True)\n  (tc_2 : \u2200 (a : \u211d) (V W : EuclideanSpace \u211d (Fin n)), (\u2016a \u2022 V\u2016 = |a| * \u2016V\u2016) \u2227 (\u2016V + W\u2016 \u2264 \u2016V\u2016 + \u2016W\u2016))\n  (tc_3 : r > 0)\n  (tc_4 : \u2016X1 - X0\u2016 < r \u2227 \u2016X2 - X0\u2016 < r)\n  (def_1 : X = t \u2022 X2 + (1 - t) \u2022 X1 \u2227 0 < t \u2227 t < 1)\n  (l1 : \u2016X - X0\u2016 = \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016)\n  (l2 : \u2016t \u2022 X2 + (1 - t) \u2022 X1 - t \u2022 X0 - (1 - t) \u2022 X0\u2016 = \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016)\n  (l3 : \u2016t \u2022 (X2 - X0) + (1 - t) \u2022 (X1 - X0)\u2016 \u2264 t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016)\n  (l4 : t * \u2016X2 - X0\u2016 + (1 - t) * \u2016X1 - X0\u2016 < t * r + (1 - t) * r)\n  (l5 : t * r + (1 - t) * r = r) :\n  \u2016X - X0\u2016 < r := by\n  rw [l1, l2]\n  have h := lt_of_le_of_lt l3 l4\n  rwa [l5] at h", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations and types correctly capture all mathematical objects mentioned in the natural language, using appropriate Euclidean space and real number types.", "The premises tc_1 through tc_4 are properly formalized, including the triangle inequality, scalar multiplication properties, positive radius constraint, and the key assumption that both X1 and X2 are within distance r of X0.", "The definition def_1 correctly formalizes X as a proper convex combination of X1 and X2 with parameter t in (0,1).", "The chain of relations l1-l5 accurately captures the mathematical reasoning chain from the natural language, with appropriate intermediate steps that maintain logical equivalence. The notation \u2016\u00b7\u2016 correctly corresponds to |\u00b7| for vector norms.", "The conclusion perfectly matches the natural language statement, correctly asserting that the norm of X-X0 is less than r."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_4", "label": "tc_4", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "tc_4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    