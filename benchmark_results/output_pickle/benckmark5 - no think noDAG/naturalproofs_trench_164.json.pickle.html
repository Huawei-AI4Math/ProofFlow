
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $f$ be continuous at $\mathbf{X}_1=(x_{11},x_{21}, \dots, x_{n1})$
and $\mathbf{X}_2=(x_{12},x_{22}, \dots,x_{n2})$ and differentiable on the
line segment $L$ from $\mathbf{X}_1$ to $\mathbf{X}_2.$ Then
\begin{equation} \label{eq:5.4.21}
f(\mathbf{X}_2)-f(\mathbf{X}_1)=\sum_{i=1}^n f_{x_i} (\mathbf{X}_0)(x_{i2}-x_{i1})=(d_{\mathbf{X}_0}f)(\mathbf{X}_2
-\mathbf{X}_1)
\end{equation}
for some $\mathbf{X}_0$ on $L$ distinct
from $\mathbf{X}_1$ and $\mathbf{X}_2$.

We can assume the following statement(s) without a proof. 

If $f$ is continuous on the closed interval $[a,b]$ and differentiable
on the open interval $(a,b),$ then
$$
f'(c)=\frac{f(b)-f(a)}{ b-a}
$$
for some $c$ in $(a,b).$

Proof: An equation of $L$ is
$$
\mathbf{X}=\mathbf{X}(t)=t\mathbf{X}_2+(1-t)\mathbf{X}_1,\quad 0\le t\le1.
$$
Our hypotheses imply that the function
$$
h(t)=f(\mathbf{X}(t))
$$
is continuous on $[0,1]$ and differentiable on $(0,1)$.  Since
$$
x_i(t)=tx_{i2}+(1-t)x_{i1},
$$
\eqref{eq:5.4.20} implies that
$$
h'(t)=\sum_{i=1}^n f_{x_i}(\mathbf{X}(t))(x_{i2}-x_{i1}),\quad 0<t<1.
$$
From the mean value theorem for functions of one variable
(Theorem~\ref{thmtype:2.3.11}),
$$
h(1)-h(0)=h'(t_0)
$$
for some $t_0\in (0,1)$.  Since $h(1)=f(\mathbf{X}_2)$ and
$h(0)=f(\mathbf{X}_1)$, this implies \eqref{eq:5.4.21} with
$\mathbf{X}_0=\mathbf{X}(t_0)$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $f$ be continuous at $\\mathbf{X}_1=(x_{11},x_{21}, \\dots, x_{n1})$ and $\\mathbf{X}_2=(x_{12},x_{22}, \\dots,x_{n2})$ and differentiable on the line segment $L$ from $\\mathbf{X}_1$ to $\\mathbf{X}_2$.", "statement": "Premise:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$, and let $\\mathbf{X}_1=(x_{11}, \\dots, x_{n1})$ and $\\mathbf{X}_2=(x_{12}, \\dots, x_{n2})$ be points in $\\mathbb{R}^n$. $f$ is continuous at $\\mathbf{X}_1$ and $\\mathbf{X}_2$ and differentiable on the line segment $L$ from $\\mathbf{X}_1$ to $\\mathbf{X}_2$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n(tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))", "lean_pass": true, "error_msg": [], "tries": 3}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean type `(Fin n \u2192 \u211d) \u2192 \u211d` correctly represents a function from \u211d\u207f to \u211d, where `Fin n \u2192 \u211d` is the standard way to represent n-dimensional real vectors in Lean", "The Lean declarations `X1 X2 : Fin n \u2192 \u211d` correctly represent points in \u211d\u207f. The specific component notation from the natural language is just explanatory and doesn't change the mathematical meaning", "The Lean conditions `ContinuousAt f X1 \u2227 ContinuousAt f X2` exactly match the natural language requirement that f is continuous at both points", "The Lean condition `DifferentiableOn \u211d f (segment \u211d X1 X2)` perfectly captures the requirement that f is differentiable on the line segment L from X\u2081 to X\u2082, where `segment \u211d X1 X2` is the standard Lean representation of a line segment"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "If $f$ is continuous on the closed interval $[a,b]$ and differentiable on the open interval $(a,b),$ then\n$$\\n f'(c)=\\frac{f(b)-f(a)}{ b-a}\n$$\nfor some $c$ in $(a,b).$", "statement": "Premise:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$, and let $\\mathbf{X}_1=(x_{11}, \\dots, x_{n1})$ and $\\mathbf{X}_2=(x_{12}, \\dots, x_{n2})$ be points in $\\mathbb{R}^n$. $f$ is continuous at $\\mathbf{X}_1$ and $\\mathbf{X}_2$ and differentiable on the line segment $L$ from $\\mathbf{X}_1$ to $\\mathbf{X}_2$ [tc_1].\n\u2022 The Mean Value Theorem for a single-variable function $g$: If $g$ is continuous on the closed interval $[a,b]$ and differentiable on the open interval $(a,b),$ then there exists some $c \\in (a,b)$ such that $g'(c)=\\frac{g(b)-g(a)}{ b-a}$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {\u03b1 : Type*} [LinearOrderedField \u03b1] [TopologicalSpace \u03b1] [Differentiable \u211d \u03b1]\n  (g : \u211d \u2192 \u03b1) (a b : \u211d)\n(tc_2 : ContinuousOn g (Set.Icc a b) \u2227 DifferentiableOn \u211d g (Set.Ioo a b) \u2192\n  \u2203 c \u2208 Set.Ioo a b, HasDerivAt g (deriv g c) c \u2227 (g b - g a) / (b - a) = (deriv g c))", "lean_pass": false, "error_msg": [{"line": 4, "column": 66, "endLine": 4, "endColumn": 84, "data": "invalid binder annotation, type is not a class instance\n  Differentiable \u211d ?m.530\nuse the command `set_option checkBinderAnnotations false` to disable the check"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "An equation of $L$ is\n$$\n\\mathbf{X}=\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1,\\quad 0\\le t\\le1.\n$$", "statement": "We assume:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$... differentiable on $L$ [tc_1];\n\u2022 The Mean Value Theorem for a single-variable function... [tc_2].\nDefinition:\n\u2022 The line segment $L$ is parameterized by $\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $t \\in [0,1]$ [def_1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n(tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n(tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n\ndef def_1 (t : \u211d) (ht : t \u2208 Set.Icc 0 1) : Fin n \u2192 \u211d :=\nt \u2022 X2 + (1 - t) \u2022 X1", "lean_pass": true, "error_msg": [], "tries": 3}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that f is a function from \u211d\u207f to \u211d (represented as (Fin n \u2192 \u211d) \u2192 \u211d) and is differentiable on the line segment L (represented as segment \u211d X1 X2). The additional continuity conditions at endpoints are mathematically consistent extra details.", "The Lean formalization provides an explicit statement of the Mean Value Theorem with all necessary conditions (continuity on closed interval, differentiability on open interval) and conclusion (existence of point where derivative equals average rate of change).", "The Lean definition def_1 correctly represents the line segment parameterization X(t) = tX\u2082 + (1-t)X\u2081 for t \u2208 [0,1], using scalar multiplication notation (\u2022) which is equivalent to the mathematical expression."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "def_2": {"id": "def_2", "natural_language": "Our hypotheses imply that the function\n$$\nh(t)=f(\\mathbf{X}(t))\n$$", "statement": "We assume:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$... differentiable on $L$ [tc_1];\n\u2022 The Mean Value Theorem for a single-variable function... [tc_2];\n\u2022 The line segment $L$ is parameterized by $\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $t \\in [0,1]$ [def_1].\nDefinition:\n\u2022 Define the single-variable function $h(t) = f(\\mathbf{X}(t))$ for $t \\in [0,1]$ [def_2].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n(tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n(tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n(def_1 : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n\ndef def_2 (t : \u211d) (ht : t \u2208 Set.Icc 0 1) : \u211d :=\nf (def_1 t ht)", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures f as a function from \u211d\u207f to \u211d (using Fin n \u2192 \u211d) and includes differentiability on the line segment L (segment \u211d X1 X2). The additional continuity conditions are consistent extra details.", "The Lean formalization provides an explicit statement of the Mean Value Theorem with all necessary conditions (continuity on closed interval, differentiability on open interval) and conclusion (existence of point where derivative equals average rate of change).", "The Lean parameterization uses scalar multiplication notation (t \u2022 X2 + (1 - t) \u2022 X1) which is equivalent to the mathematical notation t\ud835\udc17\u2082+(1-t)\ud835\udc17\u2081, and correctly specifies the domain as Set.Icc 0 1 (the closed interval [0,1]).", "The Lean definition def_2 correctly defines h(t) = f(\ud835\udc17(t)) for t \u2208 [0,1] by composing f with def_1, maintaining the proper domain restriction."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Our hypotheses imply that the function\n$$\nh(t)=f(\\mathbf{X}(t))\n$$\nis continuous on $[0,1]$ and differentiable on $(0,1)$.", "statement": "We assume:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$... differentiable on $L$ [tc_1];\n\u2022 The Mean Value Theorem for a single-variable function... [tc_2];\n\u2022 The line segment $L$ is parameterized by $\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $t \\in [0,1]$ [def_1];\n\u2022 Define the single-variable function $h(t) = f(\\mathbf{X}(t))$ for $t \\in [0,1]$ [def_2].\nTherefore, we conclude:\n\u2022 The function $h(t)$ is continuous on $[0,1]$ and differentiable on $(0,1)$ [l1].", "dependencies": ["tc_1", "tc_2", "def_1", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1_aux : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2_aux : \u2200 (t : \u211d) (ht : t \u2208 Set.Icc 0 1), \u211d := fun t ht => f (def_1_aux t ht)) :\n  ContinuousOn (fun t => def_2_aux t (Set.mem_Icc.mpr \u27e8le_rfl, le_rfl\u27e9)) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2_aux t (Set.mem_Icc.mpr \u27e8le_rfl, le_rfl\u27e9)) (Set.Ioo 0 1) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 11, "column": 156, "endLine": 11, "endColumn": 162, "data": "application type mismatch\n  \u27e8?m.5640, le_rfl\u27e9\nargument\n  le_rfl\nhas type\n  ?m.5644 \u2264 ?m.5644 : Prop\nbut is expected to have type\n  t \u2264 1 : Prop"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1_aux : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2_aux : \u2200 (t : \u211d) (ht : t \u2208 Set.Icc 0 1), \u211d := fun t ht => f (def_1_aux t ht)) :\n  ContinuousOn (fun t => def_2_aux t (by simp [le_refl])) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2_aux t (by simp [le_refl])) (Set.Ioo 0 1) := by\n  constructor\n  \u00b7 refine ContinuousOn.comp (fun t ht => ?_) (continuousOn_id.add (continuousOn_const.sub continuousOn_id)) (by simp)\n    exact tc_1.1.comp_continuousOn (Continuous.continuousOn (continuous_add (continuous_smul_right X2) (continuous_smul_right X1)))\n  \u00b7 refine DifferentiableOn.comp (fun t ht => ?_) (differentiableOn_id.add (differentiableOn_const.sub differentiableOn_id)) (by simp)\n    exact tc_1.2.2.comp (differentiableAt_id.add (differentiableAt_const.sub differentiableAt_id)) (fun t ht => segment_subset (by simp) (by simp) ht)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 38, "endLine": 11, "endColumn": 55, "data": "unsolved goals\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1_aux : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2_aux : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1_aux t ht)\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 11, "column": 116, "endLine": 11, "endColumn": 133, "data": "unsolved goals\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1_aux : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2_aux : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1_aux t ht)\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 13, "column": 110, "endLine": 13, "endColumn": 117, "data": "unsolved goals\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1_aux : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2_aux : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1_aux t ht)\n\u22a2 Set.MapsTo (fun x => x + (?m.16957 - x)) ?m.17599 ?m.13836"}, {"line": 15, "column": 76, "endLine": 15, "endColumn": 122, "data": "invalid field notation, type is not of the form (C ...) where C is a constant\n  differentiableOn_const\nhas type\n  \u2200 (c : ?m.64016), DifferentiableOn ?m.63816 (fun x => c) ?m.64209"}, {"line": 15, "column": 126, "endLine": 15, "endColumn": 133, "data": "unsolved goals\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1_aux : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2_aux : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1_aux t ht)\n\u22a2 Set.MapsTo (fun y => y + ?m.61840 y) ?m.61841 ?m.60124"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Since\n$$\nx_i(t)=tx_{i2}+(1-t)x_{i1},\n$$", "statement": "We assume:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$... differentiable on $L$ [tc_1];\n\u2022 The Mean Value Theorem for a single-variable function... [tc_2];\n\u2022 The line segment $L$ is parameterized by $\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $t \\in [0,1]$ [def_1];\n\u2022 Define the single-variable function $h(t) = f(\\mathbf{X}(t))$ for $t \\in [0,1]$ [def_2];\n\u2022 The function $h(t)$ is continuous on $[0,1]$ and differentiable on $(0,1)$ [l1].\nTherefore, we conclude:\n\u2022 The $i$-th component of $\\mathbf{X}(t)$ is given by $x_i(t)=tx_{i2}+(1-t)x_{i1}$ for $i=1, \\dots, n$ [l2].", "dependencies": ["tc_1", "tc_2", "def_1", "def_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1_param : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2_param : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 \u211d := fun t ht => f (def_1_param t ht))\n  (l1 : ContinuousOn (fun (t : \u211d) => def_2_param t (by simp)) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun (t : \u211d) => def_2_param t (by simp)) (Set.Ioo 0 1)) :\n  \u2200 (i : Fin n) (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (def_1_param t (by simp)) i = t * (X2 i) + (1 - t) * (X1 i) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 11, "column": 52, "endLine": 11, "endColumn": 59, "data": "unsolved goals\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1_param t ht)\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 11, "column": 128, "endLine": 11, "endColumn": 135, "data": "unsolved goals\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1_param t ht)\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 12, "column": 59, "endLine": 12, "endColumn": 66, "data": "unsolved goals\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1_param t ht)\nl1 : ContinuousOn (fun t => def_2_param t \u22ef) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2_param t \u22ef) (Set.Ioo 0 1)\ni : Fin n\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1_param : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2_param : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 \u211d := fun t ht => f (def_1_param t ht))\n  (l1 : ContinuousOn (fun (t : \u211d) => def_2_param t (by simp)) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun (t : \u211d) => def_2_param t (by simp)) (Set.Ioo 0 1)) :\n  \u2200 (i : Fin n) (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (def_1_param t (by simp)) i = t * (X2 i) + (1 - t) * (X1 i) := by\n  intro i t ht\n  have : t \u2208 Set.Icc 0 1 := ht\n  simp [def_1_param]\n  rw [Pi.add_apply, Pi.smul_apply, Pi.smul_apply]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 52, "endLine": 11, "endColumn": 59, "data": "unsolved goals\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1_param t ht)\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 11, "column": 128, "endLine": 11, "endColumn": 135, "data": "unsolved goals\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1_param t ht)\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 12, "column": 59, "endLine": 12, "endColumn": 66, "data": "unsolved goals\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2_param : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1_param t ht)\nl1 : ContinuousOn (fun t => def_2_param t \u22ef) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2_param t \u22ef) (Set.Ioo 0 1)\ni : Fin n\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 15, "column": 2, "endLine": 15, "endColumn": 20, "data": "invalid argument, variable is not a proposition or let-declaration"}, {"line": 15, "column": 2, "endLine": 15, "endColumn": 20, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "implies that\n$$\nh'(t)=\\sum_{i=1}^n f_{x_i}(\\mathbf{X}(t))(x_{i2}-x_{i1}),\\quad 0<t<1.\n$$", "statement": "We assume:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$... differentiable on $L$ [tc_1];\n\u2022 The Mean Value Theorem for a single-variable function... [tc_2];\n\u2022 The line segment $L$ is parameterized by $\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $t \\in [0,1]$ [def_1];\n\u2022 Define the single-variable function $h(t) = f(\\mathbf{X}(t))$ for $t \\in [0,1]$ [def_2];\n\u2022 The function $h(t)$ is continuous on $[0,1]$ and differentiable on $(0,1)$ [l1];\n\u2022 The $i$-th component of $\\mathbf{X}(t)$ is given by $x_i(t)=tx_{i2}+(1-t)x_{i1}$ for $i=1, \\dots, n$ [l2].\nTherefore, we conclude:\n\u2022 The derivative of $h(t)$ is $h'(t)=\\sum_{i=1}^n f_{x_i}(\\mathbf{X}(t))(x_{i2}-x_{i1})$ for $t \\in (0,1)$ [l3].", "dependencies": ["tc_1", "tc_2", "def_1", "def_2", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1 : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2 : \u2200 (t : \u211d) (ht : t \u2208 Set.Icc 0 1), \u211d := fun t ht => f (def_1 t ht))\n  (l1 : (ContinuousOn (fun t => def_2 t (by sorry)) (Set.Icc 0 1)) \u2227 (DifferentiableOn \u211d (fun t => def_2 t (by sorry)) (Set.Ioo 0 1)))\n  (l2 : \u2200 (t : \u211d) (i : Fin n), (def_1 t (by sorry)) i = t * (X2 i) + (1 - t) * (X1 i)) :\n  \u2200 (t : \u211d), t \u2208 Set.Ioo 0 1 \u2192 HasDerivAt (fun s => def_2 s (by sorry)) (\u2211 i : Fin n, (partialDeriv f i (def_1 t (by sorry))) * ((X2 i) - (X1 i))) t := by\nsorry", "lean_pass": false, "error_msg": [{"line": 13, "column": 87, "endLine": 13, "endColumn": 124, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.6087"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1 : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2 : \u211d \u2192 \u211d := fun t => f (def_1 t (mem_Icc_of_Ioo (by simp))))\n  (l1 : ContinuousOn def\u2082 (Set.Icc 0 1) \u2227 DifferentiableOn \u211d def\u2082 (Set.Ioo 0 1))\n  (l2 : \u2200 (t : \u211d) (i : Fin n), (def_1 t (mem_Icc_of_Ioo (by simp))) i = t * (X2 i) + (1 - t) * (X1 i)) :\n  \u2200 (t : \u211d), t \u2208 Set.Ioo 0 1 \u2192 HasDerivAt def\u2082 (\u2211 i : Fin n, (fderiv \u211d f (def_1 t (mem_Icc_of_Ioo (by simp))) (Pi.single i (X2 i - X1 i)))) t := by\n  intro t ht\n  have hX : \u2200 s \u2208 Set.Icc 0 1, def_1 s (mem_Icc_of_Ioo (by simp)) = fun i => s * X2 i + (1 - s) * X1 i := by\n    intro s _; ext i; exact l2 s i\n  simp_rw [def\u2082, hX t (mem_Icc_of_Ioo ht)]\n  have hdiff : DifferentiableAt \u211d (fun s => f (fun i => s * X2 i + (1 - s) * X1 i)) t := by\n    apply DifferentiableOn.differentiableAt (l1.2) ht\n  have hderiv : deriv (fun s => f (fun i => s * X2 i + (1 - s) * X1 i)) t = \n      \u2211 i, fderiv \u211d f (fun i => t * X2 i + (1 - t) * X1 i) (Pi.single i (X2 i - X1 i)) := by\n    rw [deriv_funext hdiff]\n    apply fderiv.comp_deriv\n    \u00b7 exact hdiff\n    \u00b7 apply DifferentiableAt.hasFDerivAt\n      apply DifferentiableAt.const_add\n      apply DifferentiableAt.mul_const\n      exact differentiableAt_id'\n  rw [\u2190 hderiv]\n  exact (l1.2.differentiableAt ht).hasDerivAt", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 10, "column": 41, "endLine": 10, "endColumn": 65, "data": "function expected at\n  mem_Icc_of_Ioo\nterm has type\n  ?m.3052"}, {"line": 12, "column": 41, "endLine": 12, "endColumn": 65, "data": "function expected at\n  mem_Icc_of_Ioo\nterm has type\n  ?m.3052"}, {"line": 13, "column": 83, "endLine": 13, "endColumn": 107, "data": "function expected at\n  mem_Icc_of_Ioo\nterm has type\n  ?m.3052"}, {"line": 15, "column": 40, "endLine": 15, "endColumn": 64, "data": "function expected at\n  mem_Icc_of_Ioo\nterm has type\n  x\u271d"}, {"line": 17, "column": 11, "endLine": 17, "endColumn": 15, "data": "invalid argument, variable is not a proposition or let-declaration"}, {"line": 17, "column": 11, "endLine": 17, "endColumn": 15, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "From the mean value theorem for functions of one variable (Theorem~\\ref{thmtype:2.3.11}),\n$$\nh(1)-h(0)=h'(t_0)\n$$\nfor some $t_0\\in (0,1)$.", "statement": "We assume:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$... differentiable on $L$ [tc_1];\n\u2022 The Mean Value Theorem for a single-variable function... [tc_2];\n\u2022 The line segment $L$ is parameterized by $\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $t \\in [0,1]$ [def_1];\n\u2022 Define the single-variable function $h(t) = f(\\mathbf{X}(t))$ for $t \\in [0,1]$ [def_2];\n\u2022 The function $h(t)$ is continuous on $[0,1]$ and differentiable on $(0,1)$ [l1];\n\u2022 The derivative of $h(t)$ is $h'(t)=\\sum_{i=1}^n f_{x_i}(\\mathbf{X}(t))(x_{i2}-x_{i1})$ for $t \\in (0,1)$ [l3].\nTherefore, we conclude:\n\u2022 There exists some $t_0 \\in (0,1)$ such that $h(1)-h(0)=h'(t_0)$ [l4].", "dependencies": ["tc_1", "tc_2", "def_1", "def_2", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1_aux : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2_aux : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 \u211d := fun t ht => f (def_1_aux t ht))\n  (l1 : ContinuousOn (fun t => def_2_aux t (by sorry)) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2_aux t (by sorry)) (Set.Ioo 0 1))\n  (l3 : \u2200 (t : \u211d), t \u2208 Set.Ioo 0 1 \u2192 (deriv (fun s => def_2_aux s (by sorry)) t) = \u2211 i : Fin n, (partialDeriv f i (def_1_aux t (by sorry))) * (X2 i - X1 i)) :\n  \u2203 (t0 : \u211d), t0 \u2208 Set.Ioo 0 1 \u2227 (def_2_aux 1 (by norm_num)) - (def_2_aux 0 (by norm_num)) = (deriv (fun t => def_2_aux t (by sorry)) t0) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 12, "column": 97, "endLine": 12, "endColumn": 138, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.4378"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousOn f (segment \u211d X1 X2) \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1_aux : \u211d \u2192 (Fin n \u2192 \u211d) := fun t => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2_aux : \u211d \u2192 \u211d := fun t => f (def_1_aux t))\n  (l1 : ContinuousOn def_2_aux (Set.Icc 0 1) \u2227 DifferentiableOn \u211d def_2_aux (Set.Ioo 0 1))\n  (l3 : \u2200 (t : \u211d), t \u2208 Set.Ioo 0 1 \u2192 (deriv def_2_aux t) = \u2211 i : Fin n, (fderiv \u211d f (def_1_aux t)) (Pi.single i (X2 i - X1 i))) :\n  \u2203 (t0 : \u211d), t0 \u2208 Set.Ioo 0 1 \u2227 def_2_aux 1 - def_2_aux 0 = deriv def_2_aux t0 := by\n  obtain \u27e8t0, ht0, h\u27e9 := tc_2 def_2_aux 0 1 l1.1 l1.2\n  refine \u27e8t0, ht0, ?_\u27e9\n  simp only [sub_zero, div_one] at h\n  rw [h]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Since $h(1)=f(\\mathbf{X}_2)$ and $h(0)=f(\\mathbf{X}_1)$", "statement": "We assume:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$... differentiable on $L$ [tc_1];\n\u2022 The Mean Value Theorem for a single-variable function... [tc_2];\n\u2022 The line segment $L$ is parameterized by $\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $t \\in [0,1]$ [def_1];\n\u2022 Define the single-variable function $h(t) = f(\\mathbf{X}(t))$ for $t \\in [0,1]$ [def_2];\n\u2022 The function $h(t)$ is continuous on $[0,1]$ and differentiable on $(0,1)$ [l1];\n\u2022 The derivative of $h(t)$ is $h'(t)=\\sum_{i=1}^n f_{x_i}(\\mathbf{X}(t))(x_{i2}-x_{i1})$ for $t \\in (0,1)$ [l3];\n\u2022 There exists some $t_0 \\in (0,1)$ such that $h(1)-h(0)=h'(t_0)$ [l4].\nTherefore, we conclude:\n\u2022 $h(1)=f(\\mathbf{X}_2)$ and $h(0)=f(\\mathbf{X}_1)$ [l5].", "dependencies": ["tc_1", "tc_2", "def_1", "def_2", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1 : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2 : \u2200 (t : \u211d) (ht : t \u2208 Set.Icc 0 1), \u211d := fun t ht => f (def_1 t ht))\n  (l1 : ContinuousOn (fun t => def_2 t (by sorry)) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2 t (by sorry)) (Set.Ioo 0 1))\n  (l2 : \u2200 i : Fin n, \u2200 t : \u211d, t \u2208 Set.Icc 0 1 \u2192 (def_1 t (by sorry)) i = t * (X2 i) + (1 - t) * (X1 i))\n  (l3 : \u2200 t : \u211d, t \u2208 Set.Ioo 0 1 \u2192 deriv (fun s => def_2 s (by sorry)) t = \u2211 i : Fin n, (partialDeriv i f (def_1 t (by sorry))) * ((X2 i) - (X1 i)))\n  (l4 : \u2203 (t0 : \u211d), t0 \u2208 Set.Ioo 0 1 \u2227 (def_2 1 (by sorry)) - (def_2 0 (by sorry)) = deriv (fun t => def_2 t (by sorry)) t0) :\n  def_2 1 (by sorry) = f X2 \u2227 def_2 0 (by sorry) = f X1 := by\nsorry", "lean_pass": false, "error_msg": [{"line": 13, "column": 89, "endLine": 13, "endColumn": 126, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.4893"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1 : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2 : \u211d \u2192 \u211d := fun t => f (t \u2022 X2 + (1 - t) \u2022 X1))\n  (l1 : ContinuousOn def_2 (Set.Icc 0 1) \u2227 DifferentiableOn \u211d def_2 (Set.Ioo 0 1))\n  (l2 : \u2200 i : Fin n, \u2200 t : \u211d, t \u2208 Set.Icc 0 1 \u2192 (def_1 t (by sorry)) i = t * (X2 i) + (1 - t) * (X1 i))\n  (l3 : \u2200 t : \u211d, t \u2208 Set.Ioo 0 1 \u2192 deriv def_2 t = \u2211 i : Fin n, (fderiv \u211d f (t \u2022 X2 + (1 - t) \u2022 X1) (Pi.single i (X2 i - X1 i))))\n  (l4 : \u2203 (t0 : \u211d), t0 \u2208 Set.Ioo 0 1 \u2227 def_2 1 - def_2 0 = deriv def_2 t0) :\n  def_2 1 = f X2 \u2227 def_2 0 = f X1 := by\n  constructor\n  \u00b7 rw [def_2]\n    simp [one_smul, sub_self, zero_smul, add_zero]\n  \u00b7 rw [def_2]\n    simp [zero_smul, sub_zero, one_smul, zero_add]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 17, "column": 8, "endLine": 17, "endColumn": 13, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  \u211d\ncase left\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam (\u211d \u2192 \u211d) fun t => f (t \u2022 X2 + (1 - t) \u2022 X1)\nl1 : ContinuousOn def_2 (Set.Icc 0 1) \u2227 DifferentiableOn \u211d def_2 (Set.Ioo 0 1)\nl2 : \u2200 (i : Fin n), \u2200 t \u2208 Set.Icc 0 1, def_1 t \u22ef i = t * X2 i + (1 - t) * X1 i\nl3 : \u2200 t \u2208 Set.Ioo 0 1, deriv def_2 t = \u2211 i : Fin n, (fderiv \u211d f (t \u2022 X2 + (1 - t) \u2022 X1)) (Pi.single i (X2 i - X1 i))\nl4 : \u2203 t0 \u2208 Set.Ioo 0 1, def_2 1 - def_2 0 = deriv def_2 t0\n\u22a2 def_2 1 = f X2"}, {"line": 19, "column": 8, "endLine": 19, "endColumn": 13, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  \u211d\ncase right\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam (\u211d \u2192 \u211d) fun t => f (t \u2022 X2 + (1 - t) \u2022 X1)\nl1 : ContinuousOn def_2 (Set.Icc 0 1) \u2227 DifferentiableOn \u211d def_2 (Set.Ioo 0 1)\nl2 : \u2200 (i : Fin n), \u2200 t \u2208 Set.Icc 0 1, def_1 t \u22ef i = t * X2 i + (1 - t) * X1 i\nl3 : \u2200 t \u2208 Set.Ioo 0 1, deriv def_2 t = \u2211 i : Fin n, (fderiv \u211d f (t \u2022 X2 + (1 - t) \u2022 X1)) (Pi.single i (X2 i - X1 i))\nl4 : \u2203 t0 \u2208 Set.Ioo 0 1, def_2 1 - def_2 0 = deriv def_2 t0\n\u22a2 def_2 0 = f X1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "lemma"}, "def_3": {"id": "def_3", "natural_language": "this implies (5.4.21) with $\\mathbf{X}_0=\\mathbf{X}(t_0)$", "statement": "We assume:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$... differentiable on $L$ [tc_1];\n\u2022 The Mean Value Theorem for a single-variable function... [tc_2];\n\u2022 The line segment $L$ is parameterized by $\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $t \\in [0,1]$ [def_1];\n\u2022 Define the single-variable function $h(t) = f(\\mathbf{X}(t))$ for $t \\in [0,1]$ [def_2];\n\u2022 The function $h(t)$ is continuous on $[0,1]$ and differentiable on $(0,1)$ [l1];\n\u2022 The derivative of $h(t)$ is $h'(t)=\\sum_{i=1}^n f_{x_i}(\\mathbf{X}(t))(x_{i2}-x_{i1})$ for $t \\in (0,1)$ [l3];\n\u2022 There exists some $t_0 \\in (0,1)$ such that $h(1)-h(0)=h'(t_0)$ [l4];\n\u2022 $h(1)=f(\\mathbf{X}_2)$ and $h(0)=f(\\mathbf{X}_1)$ [l5].\nDefinition:\n\u2022 Define $\\mathbf{X}_0 = \\mathbf{X}(t_0)$, where $t_0$ is the value from `l4` [def_3].", "dependencies": ["tc_1", "tc_2", "def_1", "def_2", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n(tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n(tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n\ndef def_1 (t : \u211d) : Fin n \u2192 \u211d :=\nt \u2022 X2 + (1 - t) \u2022 X1\n\ndef def_2 (t : \u211d) : \u211d :=\nf (def_1 t)\n\nvariable\n(l1 : ContinuousOn (def_2) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (def_2) (Set.Ioo 0 1))\n(l3 : \u2200 t \u2208 Set.Ioo 0 1, HasDerivAt (def_2) (\u2211 i : Fin n, partialDeriv f i (def_1 t) * (X2 i - X1 i)) t)\n(l4 : \u2203 t0 : \u211d, t0 \u2208 Set.Ioo 0 1 \u2227 (def_2 1) - (def_2 0) = (deriv (def_2) t0))\n(l5 : def_2 1 = f X2 \u2227 def_2 0 = f X1)\n\nnoncomputable def def_3 : Fin n \u2192 \u211d :=\n  let t0_val := (l4).choose\n  def_1 t0_val", "lean_pass": false, "error_msg": [{"line": 13, "column": 2, "endLine": 13, "endColumn": 11, "data": "application type mismatch\n  f (def_1 ?m.8079)\nargument\n  def_1 ?m.8079\nhas type\n  (Fin ?m.7368 \u2192 \u211d) \u2192 \u211d \u2192 Fin ?m.7368 \u2192 \u211d : Type\nbut is expected to have type\n  Fin n \u2192 \u211d : Type"}, {"line": 13, "column": 9, "endLine": 13, "endColumn": 10, "data": "application type mismatch\n  def_1 t\nargument\n  t\nhas type\n  \u211d : Type\nbut is expected to have type\n  Fin ?m.7368 \u2192 \u211d : Type"}, {"line": 17, "column": 58, "endLine": 17, "endColumn": 84, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.16554"}, {"line": 23, "column": 2, "endLine": 23, "endColumn": 14, "data": "type mismatch\n  def_1 ?m.31024\nhas type\n  (Fin ?m.30315 \u2192 \u211d) \u2192 \u211d \u2192 Fin ?m.30315 \u2192 \u211d : Type\nbut is expected to have type\n  Fin n \u2192 \u211d : Type"}, {"line": 23, "column": 8, "endLine": 23, "endColumn": 14, "data": "application type mismatch\n  def_1 t0_val\nargument\n  t0_val\nhas type\n  \u211d : Type\nbut is expected to have type\n  Fin ?m.30315 \u2192 \u211d : Type"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "ts_1": {"id": "ts_1", "natural_language": "this implies (5.4.21) with $\\mathbf{X}_0=\\mathbf{X}(t_0)$", "statement": "We assume:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$... differentiable on $L$ [tc_1];\n\u2022 The Mean Value Theorem for a single-variable function... [tc_2];\n\u2022 The line segment $L$ is parameterized by $\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $t \\in [0,1]$ [def_1];\n\u2022 Define the single-variable function $h(t) = f(\\mathbf{X}(t))$ for $t \\in [0,1]$ [def_2];\n\u2022 The function $h(t)$ is continuous on $[0,1]$ and differentiable on $(0,1)$ [l1];\n\u2022 The derivative of $h(t)$ is $h'(t)=\\sum_{i=1}^n f_{x_i}(\\mathbf{X}(t))(x_{i2}-x_{i1})$ for $t \\in (0,1)$ [l3];\n\u2022 There exists some $t_0 \\in (0,1)$ such that $h(1)-h(0)=h'(t_0)$ [l4];\n\u2022 $h(1)=f(\\mathbf{X}_2)$ and $h(0)=f(\\mathbf{X}_1)$ [l5];\n\u2022 Define $\\mathbf{X}_0 = \\mathbf{X}(t_0)$, where $t_0$ is the value from `l4` [def_3].\nTherefore, we conclude:\n\u2022 There exists a point $\\mathbf{X}_0$ on the line segment $L$ distinct from $\\mathbf{X}_1$ and $\\mathbf{X}_2$ such that $f(\\mathbf{X}_2)-f(\\mathbf{X}_1)=\\sum_{i=1}^n f_{x_i} (\\mathbf{X}_0)(x_{i2}-x_{i1})$ [ts_1].", "dependencies": ["tc_1", "tc_2", "def_1", "def_2", "l1", "l2", "l3", "l4", "l5", "def_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1 : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2 : \u2200 (t : \u211d) (ht : t \u2208 Set.Icc 0 1), \u211d := fun t ht => f (def_1 t ht))\n  (l1 : ContinuousOn (fun t => def_2 t (by simp)) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2 t (by simp)) (Set.Ioo 0 1))\n  (l2 : \u2200 (i : Fin n) (t : \u211d) (ht : t \u2208 Set.Icc 0 1), (def_1 t ht) i = t * (X2 i) + (1 - t) * (X1 i))\n  (l3 : \u2200 (t : \u211d) (ht : t \u2208 Set.Ioo 0 1), HasDerivAt (fun t' => def_2 t' (by simp)) (\u2211 i : Fin n, (partialDeriv f (def_1 t ht) i) * ((X2 i) - (X1 i))) t)\n  (l4 : \u2203 (t0 : \u211d), t0 \u2208 Set.Ioo 0 1 \u2227 (def_2 1 (by simp)) - (def_2 0 (by simp)) = (deriv (fun t' => def_2 t' (by simp))) t0)\n  (l5 : (def_2 1 (by simp)) = f X2 \u2227 (def_2 0 (by simp)) = f X1)\n  (def_3 : \u2203 (t0 : \u211d), t0 \u2208 Set.Ioo 0 1 \u2227 let X0 := def_1 t0 (by simp) ; True) :\n  \u2203 (X0 : Fin n \u2192 \u211d), X0 \u2208 segment \u211d X1 X2 \u2227 X0 \u2260 X1 \u2227 X0 \u2260 X2 \u2227 (f X2 - f X1) = (\u2211 i : Fin n, (partialDeriv f X0 i) * ((X2 i) - (X1 i))) := by\nsorry", "lean_pass": false, "error_msg": [{"line": 13, "column": 99, "endLine": 13, "endColumn": 128, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.6427"}, {"line": 17, "column": 96, "endLine": 17, "endColumn": 115, "data": "function expected at\n  partialDeriv\nterm has type\n  ?m.6427"}, {"line": 11, "column": 40, "endLine": 11, "endColumn": 47, "data": "unsolved goals\npartialDeriv : ?m.6427\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1 t ht)\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 11, "column": 104, "endLine": 11, "endColumn": 111, "data": "unsolved goals\npartialDeriv : ?m.6427\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1 t ht)\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 13, "column": 74, "endLine": 13, "endColumn": 81, "data": "unsolved goals\npartialDeriv : ?m.6427\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1 t ht)\nl1 : ContinuousOn (fun t => def_2 t \u22ef) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2 t \u22ef) (Set.Ioo 0 1)\nl2 : \u2200 (i : Fin n) (t : \u211d) (ht : t \u2208 Set.Icc 0 1), def_1 t ht i = t * X2 i + (1 - t) * X1 i\nt : \u211d\nht : t \u2208 Set.Ioo 0 1\nt' : \u211d\n\u22a2 0 \u2264 t' \u2227 t' \u2264 1"}, {"line": 14, "column": 111, "endLine": 14, "endColumn": 118, "data": "unsolved goals\npartialDeriv : ?m.6427\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1 t ht)\nl1 : ContinuousOn (fun t => def_2 t \u22ef) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2 t \u22ef) (Set.Ioo 0 1)\nl2 : \u2200 (i : Fin n) (t : \u211d) (ht : t \u2208 Set.Icc 0 1), def_1 t ht i = t * X2 i + (1 - t) * X1 i\nl3 : \u2200 t \u2208 Set.Ioo 0 1, HasDerivAt (fun t' => def_2 t' \u22ef) (\u2211 i : Fin n, sorry * (X2 i - X1 i)) t\nt0 t' : \u211d\n\u22a2 0 \u2264 t' \u2227 t' \u2264 1"}, {"line": 16, "column": 62, "endLine": 16, "endColumn": 69, "data": "unsolved goals\npartialDeriv : ?m.6427\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1 t ht)\nl1 : ContinuousOn (fun t => def_2 t \u22ef) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2 t \u22ef) (Set.Ioo 0 1)\nl2 : \u2200 (i : Fin n) (t : \u211d) (ht : t \u2208 Set.Icc 0 1), def_1 t ht i = t * X2 i + (1 - t) * X1 i\nl3 : \u2200 t \u2208 Set.Ioo 0 1, HasDerivAt (fun t' => def_2 t' \u22ef) (\u2211 i : Fin n, sorry * (X2 i - X1 i)) t\nl4 : \u2203 t0 \u2208 Set.Ioo 0 1, def_2 1 \u22ef - def_2 0 \u22ef = deriv (fun t' => def_2 t' \u22ef) t0\nl5 : def_2 1 \u22ef = f X2 \u2227 def_2 0 \u22ef = f X1\nt0 : \u211d\n\u22a2 0 \u2264 t0 \u2227 t0 \u2264 1"}], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1 : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d) := fun t _ => t \u2022 X2 + (1 - t) \u2022 X1)\n  (def_2 : \u2200 (t : \u211d) (ht : t \u2208 Set.Icc 0 1), \u211d := fun t ht => f (def_1 t ht))\n  (l1 : ContinuousOn (fun t => def_2 t (by simp [mem_Icc])) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2 t (by simp [mem_Icc])) (Set.Ioo 0 1))\n  (l2 : \u2200 (i : Fin n) (t : \u211d) (ht : t \u2208 Set.Icc 0 1), (def_1 t ht) i = t * (X2 i) + (1 - t) * (X1 i))\n  (l3 : \u2200 (t : \u211d) (ht : t \u2208 Set.Ioo 0 1), HasDerivAt (fun t' => def_2 t' (Ioo_subset_Icc_self ht)) (\u2211 i : Fin n, (fderiv \u211d f (def_1 t ht) (Pi.single i 1)) * ((X2 i) - (X1 i))) t)\n  (l4 : \u2203 (t0 : \u211d), t0 \u2208 Set.Ioo 0 1 \u2227 def_2 1 (by simp [mem_Icc]) - def_2 0 (by simp [mem_Icc]) = deriv (fun t' => def_2 t' (Ioo_subset_Icc_self ht0)) t0)\n  (l5 : def_2 1 (by simp [mem_Icc]) = f X2 \u2227 def_2 0 (by simp [mem_Icc]) = f X1)\n  (def_3 : \u2203 (t0 : \u211d), t0 \u2208 Set.Ioo 0 1 \u2227 let X0 := def_1 t0 (Ioo_subset_Icc_self ht0) ; True) :\n  \u2203 (X0 : Fin n \u2192 \u211d), X0 \u2208 segment \u211d X1 X2 \u2227 X0 \u2260 X1 \u2227 X0 \u2260 X2 \u2227 (f X2 - f X1) = (\u2211 i : Fin n, (fderiv \u211d f X0 (Pi.single i 1)) * ((X2 i) - (X1 i))) := by\n  obtain \u27e8t0, ht0, _\u27e9 := def_3\n  let X0 := def_1 t0 (Ioo_subset_Icc_self ht0)\n  use X0\n  constructor\n  \u00b7 simp [segment_eq_image', ht0.1, ht0.2]\n    use t0\n    simp [ht0.1, ht0.2]\n  constructor\n  \u00b7 intro h\n    have : t0 = 0 := by\n      have := congr_fun h 0\n      simp [def_1, l2] at this\n      linarith\n    linarith [ht0.1]\n  constructor\n  \u00b7 intro h\n    have : t0 = 1 := by\n      have := congr_fun h 0\n      simp [def_1, l2] at this\n      linarith\n    linarith [ht0.2]\n  \u00b7 obtain \u27e8t0', ht0', heq\u27e9 := l4\n    rw [l5.1, l5.2] at heq\n    have := l3 t0' ht0'\n    simp [deriv] at heq\n    rw [heq] at this\n    exact this.hasDerivAt.unique (HasDerivAt.const_sub _ _)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 134, "endLine": 13, "endColumn": 136, "data": "application type mismatch\n  def_1 t ht\nargument\n  ht\nhas type\n  t \u2208 Set.Ioo 0 1 : Prop\nbut is expected to have type\n  t \u2208 Set.Icc 0 1 : Prop"}, {"line": 13, "column": 74, "endLine": 13, "endColumn": 96, "data": "function expected at\n  Ioo_subset_Icc_self\nterm has type\n  ?m.5856"}, {"line": 14, "column": 126, "endLine": 14, "endColumn": 149, "data": "function expected at\n  Ioo_subset_Icc_self\nterm has type\n  ?m.5856"}, {"line": 16, "column": 62, "endLine": 16, "endColumn": 85, "data": "function expected at\n  Ioo_subset_Icc_self\nterm has type\n  ?m.5856"}, {"line": 11, "column": 49, "endLine": 11, "endColumn": 56, "data": "unknown identifier 'mem_Icc'"}, {"line": 11, "column": 40, "endLine": 11, "endColumn": 57, "data": "unsolved goals\nIoo_subset_Icc_self : ?m.5856\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1 t ht)\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 11, "column": 123, "endLine": 11, "endColumn": 130, "data": "unknown identifier 'mem_Icc'"}, {"line": 11, "column": 114, "endLine": 11, "endColumn": 131, "data": "unsolved goals\nIoo_subset_Icc_self : ?m.5856\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1 t ht)\nt : \u211d\n\u22a2 0 \u2264 t \u2227 t \u2264 1"}, {"line": 14, "column": 57, "endLine": 14, "endColumn": 64, "data": "unknown identifier 'mem_Icc'"}, {"line": 14, "column": 87, "endLine": 14, "endColumn": 94, "data": "unknown identifier 'mem_Icc'"}, {"line": 15, "column": 26, "endLine": 15, "endColumn": 33, "data": "unknown identifier 'mem_Icc'"}, {"line": 15, "column": 63, "endLine": 15, "endColumn": 70, "data": "unknown identifier 'mem_Icc'"}, {"line": 19, "column": 22, "endLine": 19, "endColumn": 45, "data": "function expected at\n  Ioo_subset_Icc_self\nterm has type\n  x\u271d"}, {"line": 24, "column": 4, "endLine": 24, "endColumn": 23, "data": "simp made no progress"}, {"line": 28, "column": 26, "endLine": 28, "endColumn": 27, "data": "failed to synthesize\n  OfNat (Fin n) 0\nnumerals are polymorphic in Lean, but the numeral `0` cannot be used in a context where the expected type is\n  Fin n\ndue to the absence of the instance above\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 29, "column": 6, "endLine": 29, "endColumn": 30, "data": "invalid argument, variable is not a proposition or let-declaration"}, {"line": 30, "column": 6, "endLine": 30, "endColumn": 14, "data": "linarith failed to find a contradiction\ncase h1.h\nx\u271d : Sort u_1\nIoo_subset_Icc_self : x\u271d\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1 t ht)\nl1 : ContinuousOn (fun t => def_2 t \u22ef) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2 t \u22ef) (Set.Ioo 0 1)\nl2 : \u2200 (i : Fin n) (t : \u211d) (ht : t \u2208 Set.Icc 0 1), def_1 t ht i = t * X2 i + (1 - t) * X1 i\nl3 :\n  \u2200 t \u2208 Set.Ioo 0 1,\n    HasDerivAt (fun t' => def_2 t' \u22ef) (\u2211 i : Fin n, (fderiv \u211d f (def_1 t \u22ef)) (Pi.single i 1) * (X2 i - X1 i)) t\nl4 : \u2203 t0 \u2208 Set.Ioo 0 1, def_2 1 \u22ef - def_2 0 \u22ef = deriv (fun t' => def_2 t' \u22ef) t0\nl5 : def_2 1 \u22ef = f X2 \u2227 def_2 0 \u22ef = f X1\nt0 : \u211d\nht0 : t0 \u2208 Set.Ioo 0 1\nright\u271d :\n  let X0 := def_1 t0 \u22ef;\n  True\nX0 : Fin n \u2192 \u211d := def_1 t0 \u22ef\nh : X0 = X1\nthis : X0 sorry = X1 sorry\na\u271d : t0 < 0\n\u22a2 False failed"}, {"line": 35, "column": 26, "endLine": 35, "endColumn": 27, "data": "failed to synthesize\n  OfNat (Fin n) 0\nnumerals are polymorphic in Lean, but the numeral `0` cannot be used in a context where the expected type is\n  Fin n\ndue to the absence of the instance above\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 36, "column": 6, "endLine": 36, "endColumn": 30, "data": "invalid argument, variable is not a proposition or let-declaration"}, {"line": 37, "column": 6, "endLine": 37, "endColumn": 14, "data": "linarith failed to find a contradiction\ncase h1.h\nx\u271d : Sort u_1\nIoo_subset_Icc_self : x\u271d\nn : \u2115\nf : (Fin n \u2192 \u211d) \u2192 \u211d\nX1 X2 : Fin n \u2192 \u211d\ntc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2)\ntc_2 :\n  \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d),\n    ContinuousOn g (Set.Icc a b) \u2192\n      DifferentiableOn \u211d g (Set.Ioo a b) \u2192 \u2203 c \u2208 Set.Ioo a b, deriv g c = (g b - g a) / (b - a)\ndef_1 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 Fin n \u2192 \u211d) fun t x => t \u2022 X2 + (1 - t) \u2022 X1\ndef_2 : optParam ((t : \u211d) \u2192 t \u2208 Set.Icc 0 1 \u2192 \u211d) fun t ht => f (def_1 t ht)\nl1 : ContinuousOn (fun t => def_2 t \u22ef) (Set.Icc 0 1) \u2227 DifferentiableOn \u211d (fun t => def_2 t \u22ef) (Set.Ioo 0 1)\nl2 : \u2200 (i : Fin n) (t : \u211d) (ht : t \u2208 Set.Icc 0 1), def_1 t ht i = t * X2 i + (1 - t) * X1 i\nl3 :\n  \u2200 t \u2208 Set.Ioo 0 1,\n    HasDerivAt (fun t' => def_2 t' \u22ef) (\u2211 i : Fin n, (fderiv \u211d f (def_1 t \u22ef)) (Pi.single i 1) * (X2 i - X1 i)) t\nl4 : \u2203 t0 \u2208 Set.Ioo 0 1, def_2 1 \u22ef - def_2 0 \u22ef = deriv (fun t' => def_2 t' \u22ef) t0\nl5 : def_2 1 \u22ef = f X2 \u2227 def_2 0 \u22ef = f X1\nt0 : \u211d\nht0 : t0 \u2208 Set.Ioo 0 1\nright\u271d :\n  let X0 := def_1 t0 \u22ef;\n  True\nX0 : Fin n \u2192 \u211d := def_1 t0 \u22ef\nh : X0 = X2\nthis : X0 sorry = X2 sorry\na\u271d : t0 < 1\n\u22a2 False failed"}, {"line": 42, "column": 4, "endLine": 42, "endColumn": 23, "data": "tactic 'simp' failed, nested error:\nmaximum recursion depth has been reached\nuse `set_option maxRecDepth <num>` to increase limit\nuse `set_option diagnostics true` to get diagnostic information"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}, "ts_2": {"id": "ts_2", "natural_language": "this implies (5.4.21) with $\\mathbf{X}_0=\\mathbf{X}(t_0)$", "statement": "We assume:\n\u2022 Let $f$ be a function from $\\mathbb{R}^n$ to $\\mathbb{R}$... differentiable on $L$ [tc_1];\n\u2022 The Mean Value Theorem for a single-variable function... [tc_2];\n\u2022 The line segment $L$ is parameterized by $\\mathbf{X}(t)=t\\mathbf{X}_2+(1-t)\\mathbf{X}_1$ for $t \\in [0,1]$ [def_1];\n\u2022 Define the single-variable function $h(t) = f(\\mathbf{X}(t))$ for $t \\in [0,1]$ [def_2];\n\u2022 The function $h(t)$ is continuous on $[0,1]$ and differentiable on $(0,1)$ [l1];\n\u2022 The derivative of $h(t)$ is $h'(t)=\\sum_{i=1}^n f_{x_i}(\\mathbf{X}(t))(x_{i2}-x_{i1})$ for $t \\in (0,1)$ [l3];\n\u2022 There exists some $t_0 \\in (0,1)$ such that $h(1)-h(0)=h'(t_0)$ [l4];\n\u2022 $h(1)=f(\\mathbf{X}_2)$ and $h(0)=f(\\mathbf{X}_1)$ [l5];\n\u2022 Define $\\mathbf{X}_0 = \\mathbf{X}(t_0)$, where $t_0$ is the value from `l4` [def_3];\n\u2022 There exists a point $\\mathbf{X}_0$ on the line segment $L$ distinct from $\\mathbf{X}_1$ and $\\mathbf{X}_2$ such that $f(\\mathbf{X}_2)-f(\\mathbf{X}_1)=\\sum_{i=1}^n f_{x_i} (\\mathbf{X}_0)(x_{i2}-x_{i1})$ [ts_1].\nTherefore, we conclude:\n\u2022 The equality $f(\\mathbf{X}_2)-f(\\mathbf{X}_1)=(d_{\\mathbf{X}_0}f)(\\mathbf{X}_2-\\mathbf{X}_1)$ holds [ts_2].", "dependencies": ["tc_1", "tc_2", "def_1", "def_2", "l1", "l2", "l3", "l4", "l5", "def_3", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1_param : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d))\n  (def_2_param : \u2200 (t : \u211d) (ht : t \u2208 Set.Icc 0 1), \u211d)\n  (l1 : (ContinuousOn (fun t => def_2_param t (by aesop_tactic)) (Set.Icc 0 1)) \u2227 (DifferentiableOn \u211d (fun t => def_2_param t (by aesop_tactic)) (Set.Ioo 0 1)))\n  (l3 : \u2200 (t : \u211d), t \u2208 Set.Ioo 0 1 \u2192 deriv (fun t' => def_2_param t' (by aesop_tactic)) t = \u2211 i : Fin n, (partialDeriv i f (def_1_param t (by aesop_tactic))) * (X2 i - X1 i))\n  (l4 : \u2203 (t0 : \u211d), t0 \u2208 Set.Ioo 0 1 \u2227 (def_2_param 1 (by norm_num)) - (def_2_param 0 (by norm_num)) = deriv (fun t' => def_2_param t' (by aesop_tactic)) t0)\n  (l5 : (def_2_param 1 (by norm_num)) = f X2 \u2227 (def_2_param 0 (by norm_num)) = f X1)\n  (def_3_t0 : \u211d) (def_3_t0_prop : def_3_t0 \u2208 Set.Ioo 0 1 \u2227 (def_2_param 1 (by norm_num)) - (def_2_param 0 (by norm_num)) = deriv (fun t' => def_2_param t' (by aesop_tactic)) def_3_t0)\n  (def_3_X0 : Fin n \u2192 \u211d) (def_3_X0_eq : def_3_X0 = def_1_param def_3_t0 (by norm_num))\n  (ts_1 : \u2203 (X0 : Fin n \u2192 \u211d), X0 \u2208 segment \u211d X1 X2 \u2227 X0 \u2260 X1 \u2227 X0 \u2260 X2 \u2227 f X2 - f X1 = \u2211 i : Fin n, (partialDeriv i f X0) * (X2 i - X1 i))\n  (h_diff : DifferentiableAt \u211d f def_3_X0) :\n  f X2 - f X1 = (fderiv \u211d f def_3_X0) (X2 - X1) := by\n  sorry", "lean_pass": false, "error_msg": [], "tries": 5}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  {n : \u2115} (f : (Fin n \u2192 \u211d) \u2192 \u211d) (X1 X2 : Fin n \u2192 \u211d)\n  (tc_1 : ContinuousAt f X1 \u2227 ContinuousAt f X2 \u2227 DifferentiableOn \u211d f (segment \u211d X1 X2))\n  (tc_2 : \u2200 (g : \u211d \u2192 \u211d) (a b : \u211d), ContinuousOn g (Set.Icc a b) \u2192 DifferentiableOn \u211d g (Set.Ioo a b) \u2192 (\u2203 (c : \u211d), c \u2208 Set.Ioo a b \u2227 (deriv g c) = (g b - g a) / (b - a)))\n  (def_1_param : \u2200 (t : \u211d), t \u2208 Set.Icc 0 1 \u2192 (Fin n \u2192 \u211d))\n  (def_2_param : \u2200 (t : \u211d) (ht : t \u2208 Set.Icc 0 1), \u211d)\n  (l1 : (ContinuousOn (fun t => def_2_param t (by aesop_tactic)) (Set.Icc 0 1)) \u2227 (DifferentiableOn \u211d (fun t => def_2_param t (by aesop_tactic)) (Set.Ioo 0 1)))\n  (l3 : \u2200 (t : \u211d), t \u2208 Set.Ioo 0 1 \u2192 deriv (fun t' => def_2_param t' (by aesop_tactic)) t = \u2211 i : Fin n, (partialDeriv i f (def_1_param t (by aesop_tactic))) * (X2 i - X1 i))\n  (l4 : \u2203 (t0 : \u211d), t0 \u2208 Set.Ioo 0 1 \u2227 (def_2_param 1 (by norm_num)) - (def_2_param 0 (by norm_num)) = deriv (fun t' => def_2_param t' (by aesop_tactic)) t0)\n  (l5 : (def_2_param 1 (by norm_num)) = f X2 \u2227 (def_2_param 0 (by norm_num)) = f X1)\n  (def_3_t0 : \u211d) (def_3_t0_prop : def_3_t0 \u2208 Set.Ioo 0 1 \u2227 (def_2_param 1 (by norm_num)) - (def_2_param 0 (by norm_num)) = deriv (fun t' => def_2_param t' (by aesop_tactic)) def_3_t0)\n  (def_3_X0 : Fin n \u2192 \u211d) (def_3_X0_eq : def_3_X0 = def_1_param def_3_t0 (by norm_num))\n  (ts_1 : \u2203 (X0 : Fin n \u2192 \u211d), X0 \u2208 segment \u211d X1 X2 \u2227 X0 \u2260 X1 \u2227 X0 \u2260 X2 \u2227 f X2 - f X1 = \u2211 i : Fin n, (partialDeriv i f X0) * (X2 i - X1 i))\n  (h_diff : DifferentiableAt \u211d f def_3_X0) :\n  f X2 - f X1 = (fderiv \u211d f def_3_X0) (X2 - X1) := by\n  have h_eq : f X2 - f X1 = \u2211 i : Fin n, (partialDeriv i f def_3_X0) * (X2 i - X1 i) := by\n    rw [\u2190 l5.1, \u2190 l5.2]\n    have := def_3_t0_prop.2\n    rw [l3 def_3_t0 def_3_t0_prop.1] at this\n    rw [def_3_X0_eq]\n    exact this\n  rw [h_eq]\n  simp only [fderiv_eq_hasFDerivAt_deriv h_diff]\n  rw [ContinuousLinearMap.coe_apply']\n  simp only [ContinuousLinearMap.coe_smulRight', ContinuousLinearMap.id_apply]\n  rw [\u2190 Pi.smul_def]\n  congr\n  funext i\n  rw [partialDeriv]\n  rfl", "lean_pass": false, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#fa2c07", "highlight": {"background": "#8dafcc", "border": "#fa2c07"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_3", "label": "def_3", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#fa2c07", "highlight": {"background": "#a3c2a8", "border": "#fa2c07"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#fa2c07", "highlight": {"background": "#a3c2a8", "border": "#fa2c07"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    