
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $X$ be a continuous random variable with a probability density function (PDF) given by $f(x) = kx^2$ for $x \in [0, 2]$ and $f(x) = 0$ otherwise. Then, the expected value of $X$ is $E[X] = \frac{3}{2}$ and the variance of $X$ is $Var(X) = \frac{3}{20}$.

Proof: From the definition of a PDF, the total probability must be 1, so we have the condition $\int_0^2 kx^2 \,dx = 1$. By solving the integral, we find $k[\frac{x^3}{3}]_0^2 = 1$, which gives $k(\frac{8}{3}) = 1$ and therefore $k = \frac{3}{8}$. The expected value is defined as $E[X] = \int_0^2 x f(x) \,dx$. Substituting our function and the derived value of $k$, the integral for the expected value becomes $E[X] = \int_0^2 x (\frac{3}{8}x^2) \,dx = \frac{3}{8} \int_0^2 x^3 \,dx$. Evaluating this integral gives the expected value $E[X] = \frac{3}{8} [\frac{x^4}{4}]_0^2 = \frac{3}{2}$. Similarly, the second moment is defined as $E[X^2] = \int_0^2 x^2 f(x) \,dx$. Substituting the function and $k$, this becomes $E[X^2] = \int_0^2 x^2 (\frac{3}{8}x^2) \,dx = \frac{3}{8} \int_0^2 x^4 \,dx$. The result of this integral is $E[X^2] = \frac{3}{8} [\frac{x^5}{5}]_0^2 = \frac{12}{5}$. The variance is defined by the formula $Var(X) = E[X^2] - (E[X])^2$. Using our computed values for $E[X^2]$ and $E[X]$, the variance is $Var(X) = \frac{12}{5} - (\frac{3}{2})^2 = \frac{3}{20}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $X$ be a continuous random variable with a probability density function (PDF) given by $f(x) = kx^2$ for $x \\in [0, 2]$ and $f(x) = 0$ otherwise.", "statement": "Premise:\n\u2022 $X$ is a continuous random variable with a probability density function (PDF) given by $f(x) = kx^2$ for $x \\in [0, 2]$ and $f(x) = 0$ otherwise [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization does not mention the random variable X or its continuity properties. Only the function f is declared.", "The condition f(x) = kx^2 for x \u2208 [0,2] is perfectly captured in Lean using Set.Icc 0 2 for the closed interval [0,2].", "The condition f(x) = 0 outside [0,2] is perfectly captured in the Lean formalization.", "The Lean formalization does not include any conditions that establish f as a probability density function (such as non-negativity, measurability, or integration to 1)."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization does not mention the random variable X or its continuity properties. Only the function f is declared.', 'The condition f(x) = kx^2 for x \u2208 [0,2] is perfectly captured in Lean using Set.Icc 0 2 for the closed interval [0,2].', 'The condition f(x) = 0 outside [0,2] is perfectly captured in the Lean formalization.', 'The Lean formalization does not include any conditions that establish f as a probability density function (such as non-negativity, measurability, or integration to 1).']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "From the definition of a PDF, the total probability must be 1, so we have the condition $\\int_0^2 kx^2 \\,dx = 1$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with a probability density function (PDF) given by $f(x) = kx^2$ for $x \\in [0, 2]$ and $f(x) = 0$ otherwise [tc_1].\nTherefore, we conclude:\n\u2022 The total probability over the support of the PDF must be 1, which means $\\int_{-\\infty}^{\\infty} f(x) \\,dx = 1$. Since $f(x)$ is non-zero only on $[0, 2]$, this simplifies to $\\int_0^2 kx^2 \\,dx = 1$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0)) :\n  \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0)) :\n  \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1 := by\n  have h : \u222b x in Set.Icc 0 2, f x = 1 := by\n    rw [\u2190 integral_eq_integral_of_forall_mem_null_set (fun x hx => tc_1.2 x hx) (compl_subset_iff_not_mem.mp (by simp))]\n    simp [tc_1.1]\n    rw [integral_mul_left]\n    simp [integral_def]\n    norm_num\n  rw [\u2190 h]\n  refine integral_congr_ae (ae_of_all _ (fun x hx => ?_))\n  simp [tc_1.1 hx]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 10, "endLine": 11, "endColumn": 53, "data": "unknown identifier 'integral_eq_integral_of_forall_mem_None_set'"}, {"line": 11, "column": 8, "endLine": 11, "endColumn": 119, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.2346\nf : \u211d \u2192 \u211d\nk : \u211d\ntc_1 : (\u2200 x \u2208 Set.Icc 0 2, f x = k * x ^ 2) \u2227 \u2200 x \u2209 Set.Icc 0 2, f x = 0\n\u22a2 \u222b (x : \u211d) in Set.Icc 0 2, f x = 1"}, {"line": 17, "column": 9, "endLine": 17, "endColumn": 26, "data": "unknown identifier 'integral_congr_ae'"}, {"line": 18, "column": 2, "endLine": 18, "endColumn": 18, "data": "no goals to be solved"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The PDF definition is correctly formalized using universal quantifiers over the appropriate intervals, perfectly capturing the piecewise nature of the function.", "The normalization condition is correctly stated as an integral equation. While the natural language explains the derivation from the total probability requirement, the Lean formalization captures the essential mathematical content that the integral of the PDF over its support equals 1.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0)) :\n  \u00ac (\u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1) := by\n  simp only [integral_mul_right, integral_pow]\n  norm_num\n  field_simp\n  nlinarith"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "By solving the integral, we find $k[\\frac{x^3}{3}]_0^2 = 1$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with a PDF given by $f(x) = kx^2$ for $x \\in [0, 2]$ and $f(x) = 0$ otherwise [tc_1];\n\u2022 The total probability is 1, so $\\int_0^2 kx^2 \\,dx = 1$ [l1].\nTherefore, we conclude:\n\u2022 $k[\\frac{x^3}{3}]_0^2 = 1$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1) :\n  k * (2^3 / 3 - 0^3 / 3) = 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1) :\n  k * (2^3 / 3 - 0^3 / 3) = 1 := by\n  have h : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = k * \u222b (x : \u211d) in Set.Icc 0 2, x^2 := by\n    simp [integral_mul_left]\n  rw [h] at l1\n  have h2 : \u222b (x : \u211d) in Set.Icc 0 2, x^2 = (2^3 / 3 - 0^3 / 3) := by\n    rw [integral_pow_two]\n    simp [intervalIntegral.integral_of_le (by linarith)]\n  rw [h2] at l1\n  exact l1", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 12, "column": 10, "endLine": 12, "endColumn": 27, "data": "unknown identifier 'integral_mul_left'"}, {"line": 12, "column": 4, "endLine": 12, "endColumn": 28, "data": "simp made no progress"}, {"line": 15, "column": 8, "endLine": 15, "endColumn": 24, "data": "unknown identifier 'integral_pow_two'"}, {"line": 15, "column": 8, "endLine": 15, "endColumn": 24, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.10633\nf : \u211d \u2192 \u211d\nk : \u211d\ntc_1 : (\u2200 x \u2208 Set.Icc 0 2, f x = k * x ^ 2) \u2227 \u2200 x \u2209 Set.Icc 0 2, f x = 0\nl1 : k * \u222b (x : \u211d) in Set.Icc 0 2, x ^ 2 = 1\nh : \u222b (x : \u211d) in Set.Icc 0 2, k * x ^ 2 = k * \u222b (x : \u211d) in Set.Icc 0 2, x ^ 2\n\u22a2 \u222b (x : \u211d) in Set.Icc 0 2, x ^ 2 = 2 ^ 3 / 3 - 0 ^ 3 / 3"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The PDF definition is correctly formalized as a conjunction of two universal statements covering the piecewise nature of the function, with Set.Icc 0 2 properly representing the closed interval [0,2].", "The normalization condition is accurately represented as a definite integral over the specified interval with the correct integrand.", "The conclusion correctly expands the fundamental theorem of calculus evaluation, showing k times the difference of the antiderivative evaluated at the bounds.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1) :\n  \u00ac(k * (2^3 / 3 - 0^3 / 3) = 1) := by\n  simp [l1]\n  have h : \u222b (x : \u211d) in Set.Icc 0 2, x^2 = (8/3) := by\n    simp_rw [\u2190 rpow_nat_cast]\n    rw [integral_rpow]\n    norm_num\n  rw [\u2190 h]\n  simp [integral_mul_left]\n  intro h'\n  have := congr_arg (fun x => x / (8/3)) h'\n  field_simp at this\n  simp at this"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "which gives $k(\\frac{8}{3}) = 1$ and therefore $k = \\frac{3}{8}$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with a PDF given by $f(x) = kx^2$ for $x \\in [0, 2]$ and $f(x) = 0$ otherwise [tc_1];\n\u2022 The total probability is 1, so $\\int_0^2 kx^2 \\,dx = 1$ [l1];\n\u2022 The solved integral is $k[\\frac{x^3}{3}]_0^2 = 1$ [l2].\nTherefore, we conclude:\n\u2022 $k = \\frac{3}{8}$ [l3].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1) :\n  k = 3 / 8 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1) :\n  k = 3 / 8 := by\n  have h : k * (8 / 3) = 1 := by\n    rw [pow_three] at l2\n    simp [pow_zero] at l2\n    rw [sub_zero] at l2\n    exact l2\n  field_simp at h\n  rw [mul_comm] at h\n  rw [\u2190 mul_one_div, h]\n  field_simp\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 8, "endLine": 15, "endColumn": 16, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a - 0\nf : \u211d \u2192 \u211d\nk : \u211d\ntc_1 : (\u2200 x \u2208 Set.Icc 0 2, f x = k * x ^ 2) \u2227 \u2200 x \u2209 Set.Icc 0 2, f x = 0\nl1 : \u222b (x : \u211d) in Set.Icc 0 2, k * x ^ 2 = 1\nl2 : k * (2 * (2 * 2) / 3) = 1\n\u22a2 k * (8 / 3) = 1"}, {"line": 19, "column": 21, "endLine": 19, "endColumn": 22, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  8 * k\nf : \u211d \u2192 \u211d\nk : \u211d\ntc_1 : (\u2200 x \u2208 Set.Icc 0 2, f x = k * x ^ 2) \u2227 \u2200 x \u2209 Set.Icc 0 2, f x = 0\nl1 : \u222b (x : \u211d) in Set.Icc 0 2, k * x ^ 2 = 1\nl2 : k * (2 ^ 3 / 3 - 0 ^ 3 / 3) = 1\nh : 8 * k = 3\n\u22a2 k = 3 * (1 / 8)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The PDF definition is correctly formalized as a conjunction of two universal quantifications over the appropriate intervals", "The normalization condition is properly represented as an integral equation over the closed interval [0,2]", "The integral evaluation correctly represents the fundamental theorem of calculus application with proper arithmetic", "The conclusion k = 3/8 is directly and correctly translated", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l3\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1) :\n  \u00ac k = 3 / 8 := by\n  intro h\n  rw [h] at l2\n  field_simp at l2\n  norm_num at l2"}, "type": "lemma"}, "def_1": {"id": "def_1", "natural_language": "The expected value is defined as $E[X] = \\int_0^2 x f(x) \\,dx$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with a PDF given by $f(x) = kx^2$ for $x \\in [0, 2]$ and $f(x) = 0$ otherwise [tc_1];\n\u2022 The total probability is 1, so $\\int_0^2 kx^2 \\,dx = 1$ [l1];\n\u2022 The solved integral is $k[\\frac{x^3}{3}]_0^2 = 1$ [l2];\n\u2022 $k = \\frac{3}{8}$ [l3].\nDefinition:\n\u2022 The expected value is defined as $E[X] = \\int_{-\\infty}^{\\infty} x f(x) \\,dx$. Given the support of $f(x)$, this is $E[X] = \\int_0^2 x f(x) \\,dx$ [def_1].", "dependencies": ["tc_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the piecewise definition of the PDF using logical conjunction and set membership conditions", "The Lean integral notation over Set.Icc 0 2 correctly represents the integral from 0 to 2", "The Lean expression k * (2^3 / 3 - 0^3 / 3) correctly represents the evaluation of the antiderivative at the bounds", "The equality k = 3 / 8 is directly represented in Lean", "The Lean formalization correctly shows the equivalence between the infinite integral and the restricted integral, which captures both the definition of expected value and the conclusion about the support", "This is the same statement as condition 5, representing both the definition and the conclusion that the integral can be restricted to the support [0,2]"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l4": {"id": "l4", "natural_language": "Substituting our function and the derived value of $k$, the integral for the expected value becomes $E[X] = \\int_0^2 x (\\frac{3}{8}x^2) \\,dx = \\frac{3}{8} \\int_0^2 x^3 \\,dx$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with a PDF given by $f(x) = kx^2$ for $x \\in [0, 2]$ and $f(x) = 0$ otherwise [tc_1];\n\u2022 The total probability is 1, so $\\int_0^2 kx^2 \\,dx = 1$ [l1];\n\u2022 The solved integral is $k[\\frac{x^3}{3}]_0^2 = 1$ [l2];\n\u2022 $k = \\frac{3}{8}$ [l3];\n\u2022 The expected value is $E[X] = \\int_0^2 x f(x) \\,dx$ [def_1].\nTherefore, we conclude:\n\u2022 $E[X] = \\frac{3}{8} \\int_0^2 x^3 \\,dx$ [l4].", "dependencies": ["tc_1", "l1", "l2", "l3", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x) :\n  \u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x) :\n  \u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3 := by\n  rw [\u2190 l3]\n  simp_rw [tc_1.1]\n  simp only [mul_assoc]\n  congr\n  ext x\n  rw [mul_comm (k) (x), mul_assoc]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 11, "endLine": 15, "endColumn": 17, "data": "simp made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The PDF definition tc_1 correctly captures the piecewise function using logical quantifiers and set membership", "The normalization condition l1 accurately represents the integral constraint", "The integral evaluation l2 properly represents the fundamental theorem of calculus application", "The constant value l3 directly matches the natural language", "The expected value definition def_1 correctly captures that the integral over all reals equals the integral over [0,2] due to the support of f", "The conclusion l4 accurately represents the final mathematical statement to be proven", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l4\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x) :\n  \u00ac (\u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3) := by\n  simp [tc_1.1]\n  rw [l3]\n  simp [integral_mul_left]\n  rw [\u2190 l1]\n  simp [integral_mul_left]\n  field_simp\n  norm_cast\n  rw [l2]\n  norm_num"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Evaluating this integral gives the expected value $E[X] = \\frac{3}{8} [\\frac{x^4}{4}]_0^2 = \\frac{3}{2}$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with a PDF given by $f(x) = kx^2$ for $x \\in [0, 2]$ and $f(x) = 0$ otherwise [tc_1];\n\u2022 The total probability is 1, so $\\int_0^2 kx^2 \\,dx = 1$ [l1];\n\u2022 The solved integral is $k[\\frac{x^3}{3}]_0^2 = 1$ [l2];\n\u2022 $k = \\frac{3}{8}$ [l3];\n\u2022 The expected value is $E[X] = \\int_0^2 x f(x) \\,dx$ [def_1];\n\u2022 $E[X] = \\frac{3}{8} \\int_0^2 x^3 \\,dx$ [l4].\nTherefore, we conclude:\n\u2022 $E[X] = \\frac{3}{2}$ [ts_1].", "dependencies": ["tc_1", "l1", "l2", "l3", "def_1", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x)\n  (l4 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3) :\n  \u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 2 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x)\n  (l4 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3) :\n  \u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 2 := by\n  rw [l4]\n  have : \u222b (x : \u211d) in Set.Icc 0 2, x^3 = (2^4 / 4 - 0^4 / 4) := by\n    simp [integral_pow, show 3 = 2 + 1 by rfl]\n    rw [integral_def]\n    simp\n    norm_num\n  rw [this]\n  norm_num\n  rw [l3]\n  field_simp\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 8, "endLine": 18, "endColumn": 20, "data": "unknown identifier 'integral_def'"}, {"line": 18, "column": 8, "endLine": 18, "endColumn": 20, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.11199\nf : \u211d \u2192 \u211d\nk : \u211d\ntc_1 : (\u2200 x \u2208 Set.Icc 0 2, f x = k * x ^ 2) \u2227 \u2200 x \u2209 Set.Icc 0 2, f x = 0\nl1 : \u222b (x : \u211d) in Set.Icc 0 2, k * x ^ 2 = 1\nl2 : k * (2 ^ 3 / 3 - 0 ^ 3 / 3) = 1\nl3 : k = 3 / 8\ndef_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x\nl4 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 8 * \u222b (x : \u211d) in Set.Icc 0 2, x ^ 3\n\u22a2 \u222b (x : \u211d) in Set.Icc 0 2, x ^ 3 = 2 ^ 4 / 4"}, {"line": 23, "column": 6, "endLine": 23, "endColumn": 8, "data": "no goals to be solved"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The piecewise PDF definition is correctly captured using logical quantifiers over the closed interval [0,2]", "The normalization integral condition is properly formalized", "The antiderivative evaluation is correctly represented using the fundamental theorem of calculus", "The constant k value is directly translated", "The expected value definition correctly shows equivalence between the full integral and the restricted integral", "The substitution step properly incorporates both k=3/8 and the PDF form", "The final conclusion correctly states the result, using integral notation which is equivalent to E[X] given the context", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_1\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x)\n  (l4 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3) :\n  \u00ac (\u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 2) := by\n  rw [l4]\n  have : \u222b (x : \u211d) in Set.Icc 0 2, x^3 = 4 := by\n    simp [integral_pow, show (3 : \u2115) = 2 + 1 by rfl]\n    norm_num\n  rw [this]\n  field_simp [l3]\n  norm_num"}, "type": "solution"}, "def_2": {"id": "def_2", "natural_language": "Similarly, the second moment is defined as $E[X^2] = \\int_0^2 x^2 f(x) \\,dx$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with a PDF given by $f(x) = kx^2$ for $x \\in [0, 2]$ and $f(x) = 0$ otherwise [tc_1];\n\u2022 The total probability is 1, so $\\int_0^2 kx^2 \\,dx = 1$ [l1];\n\u2022 The solved integral is $k[\\frac{x^3}{3}]_0^2 = 1$ [l2];\n\u2022 $k = \\frac{3}{8}$ [l3];\n\u2022 The expected value is $E[X] = \\int_0^2 x f(x) \\,dx$ [def_1];\n\u2022 $E[X] = \\frac{3}{8} \\int_0^2 x^3 \\,dx$ [l4];\n\u2022 $E[X] = \\frac{3}{2}$ [ts_1].\nDefinition:\n\u2022 The second moment is defined as $E[X^2] = \\int_{-\\infty}^{\\infty} x^2 f(x) \\,dx$. Given the support of $f(x)$, this is $E[X^2] = \\int_0^2 x^2 f(x) \\,dx$ [def_2].", "dependencies": ["tc_1", "l1", "l2", "l3", "def_1", "l4", "ts_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x)\n  (l4 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3)\n  (ts_1 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 2)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the PDF definition with the conjunction of conditions for inside and outside the interval [0,2]", "The normalization property is implicitly captured through the integral constraint l1", "The integral equation is correctly formalized using Set.Icc 0 2 for the interval [0,2]", "The antiderivative evaluation is correctly expressed as k * (2^3 / 3 - 0^3 / 3) = 1", "The value of k is correctly stated as 3/8", "The expected value definition is correctly formalized, showing the equivalence between the full integral and the restricted integral over the support", "The substitution step is correctly captured, showing E[X] equals (3/8) times the integral of x^3", "The final result for E[X] = 3/2 is correctly formalized", "The second moment definition is correctly formalized, showing the equivalence between the full integral and the restricted integral over the support"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l5": {"id": "l5", "natural_language": "Substituting the function and $k$, this becomes $E[X^2] = \\int_0^2 x^2 (\\frac{3}{8}x^2) \\,dx = \\frac{3}{8} \\int_0^2 x^4 \\,dx$.", "statement": "We assume:\n\u2022 $X$ is a continuous random variable with a PDF given by $f(x) = kx^2$ for $x \\in [0, 2]$ and $f(x) = 0$ otherwise [tc_1];\n\u2022 $k = \\frac{3}{8}$ [l3];\n\u2022 The second moment is $E[X^2] = \\int_0^2 x^2 f(x) \\,dx$ [def_2].\nTherefore, we conclude:\n\u2022 $E[X^2] = \\frac{3}{8} \\int_0^2 x^4 \\,dx$ [l5].", "dependencies": ["tc_1", "l1", "l2", "l3", "def_1", "l4", "ts_1", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l3 : k = 3 / 8)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x) :\n  \u222b (x : \u211d), x^2 * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l3 : k = 3 / 8)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x) :\n  \u222b (x : \u211d), x^2 * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4 := by\n  rw [def_2]\n  have h : \u2200 x \u2208 Set.Icc (0:\u211d) 2, x^2 * f x = k * x^4 := by\n    intro x hx\n    rw [tc_1.1 x hx]\n    ring\n  conv => \n    enter [2, x]\n    rw [h x (by simp)]\n  simp_rw [integral_mul_left]\n  rw [l3]", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 14, "endLine": 18, "endColumn": 15, "data": "invalid 'ext' conv tactic, function or arrow expected\n  3 / 8 * \u222b (x : \u211d) in Set.Icc 0 2, x ^ 4 : \u211d"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The PDF definition is correctly formalized as a piecewise function using universal quantifiers and the closed interval Set.Icc 0 2", "The parameter value k = 3/8 is correctly represented", "The second moment definition correctly expresses the equivalence between the full integral and the restricted integral over [0,2]", "The conclusion correctly represents the substitution of f(x) = (3/8)x\u00b2 into the integral, yielding (3/8)\u222bx\u2074dx", "The overall logical structure perfectly captures the mathematical reasoning from assumptions to conclusion", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l5\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l3 : k = 3 / 8)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x) :\n  \u00ac (\u222b (x : \u211d), x^2 * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4) := by\n  simp [tc_1, l3, def_2]\n  rw [MeasureTheory.set_integral_congr_ae MeasurableSet.univ (by simp [Filter.mem_ae_iff])]\n  intro x hx\n  simp [(tc_1.1 x hx)]\n  simp_rw [mul_assoc]\n  rw [integral_mul_left]\n  norm_num\n  rw [integral_pow]\n  norm_num\n  simp [integral_const_mul]\n  norm_num\n  field_simp\n  norm_num"}, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "The result of this integral is $E[X^2] = \\frac{3}{8} [\\frac{x^5}{5}]_0^2 = \\frac{12}{5}$.", "statement": "We assume:\n\u2022 $E[X^2] = \\frac{3}{8} \\int_0^2 x^4 \\,dx$ [l5].\nTherefore, we conclude:\n\u2022 $E[X^2] = \\frac{12}{5}$ [l6].", "dependencies": ["tc_1", "l1", "l2", "l3", "def_1", "l4", "ts_1", "def_2", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l3 : k = 3 / 8)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x)\n  (l5 : \u222b (x : \u211d), x^2 * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4) :\n  \u222b (x : \u211d), x^2 * f x = 12 / 5 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l3 : k = 3 / 8)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x)\n  (l5 : \u222b (x : \u211d), x^2 * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4) :\n  \u222b (x : \u211d), x^2 * f x = 12 / 5 := by\n  rw [l5]\n  have h : \u222b (x : \u211d) in Set.Icc 0 2, x^4 = (32 / 5) := by\n    calc\n      \u222b x in 0..2, x^4 = (2^5 - 0^5)/5 := by apply integral_pow 4\n      _ = 32/5 := by norm_num\n  rw [h, l3]\n  norm_num\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 6, "endLine": 16, "endColumn": 22, "data": "failed to synthesize\n  NormedAddCommGroup \u2115\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 16, "column": 6, "endLine": 16, "endColumn": 22, "data": "failed to synthesize\n  MeasureTheory.MeasureSpace \u2115\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 16, "column": 13, "endLine": 16, "endColumn": 17, "data": "invalid projection, structure has only 1 field(s)\n  0.\nhas type\n  Float"}, {"line": 18, "column": 9, "endLine": 18, "endColumn": 11, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  k\nf : \u211d \u2192 \u211d\nk : \u211d\ntc_1 : (\u2200 x \u2208 Set.Icc 0 2, f x = k * x ^ 2) \u2227 \u2200 x \u2209 Set.Icc 0 2, f x = 0\nl3 : k = 3 / 8\ndef_2 : \u222b (x : \u211d), x ^ 2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x ^ 2 * f x\nl5 : \u222b (x : \u211d), x ^ 2 * f x = 3 / 8 * \u222b (x : \u211d) in Set.Icc 0 2, x ^ 4\nh : \u222b (x : \u211d) in Set.Icc 0 2, x ^ 4 = 32 / 5\n\u22a2 3 / 8 * (32 / 5) = 12 / 5"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The premise is correctly formalized. The Lean representation \u222b x\u00b2 * f x is the standard mathematical definition of E[X\u00b2] for continuous random variables, and the integral bounds and coefficient match exactly.", "The conclusion is correctly formalized using the same notation as the premise, maintaining consistency. The additional context provided in the Lean formalization (function definition, domain specification) represents reasonable implicit assumptions that make the statement mathematically precise without contradicting the natural language.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l6\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l3 : k = 3 / 8)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x)\n  (l5 : \u222b (x : \u211d), x^2 * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4) :\n  \u00ac (\u222b (x : \u211d), x^2 * f x = 12 / 5) := by\n  rw [l5]\n  have h : (3/8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4 = 3/8 * (32/5) := by\n    congr\n    rw [intervalIntegral.integral_of_le (by norm_num)]\n    simp; ring_nf; norm_num\n  rw [h]\n  norm_num"}, "type": "lemma"}, "def_3": {"id": "def_3", "natural_language": "The variance is defined by the formula $Var(X) = E[X^2] - (E[X])^2$.", "statement": "We assume:\n\u2022 $E[X] = \\frac{3}{2}$ [ts_1];\n\u2022 $E[X^2] = \\frac{12}{5}$ [l6].\nDefinition:\n\u2022 The variance is defined by the formula $Var(X) = E[X^2] - (E[X])^2$ [def_3].", "dependencies": ["tc_1", "l1", "l2", "l3", "def_1", "l4", "ts_1", "def_2", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x)\n  (l4 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3)\n  (ts_1 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 2)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x)\n  (l5 : \u222b (x : \u211d), x^2 * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4)\n  (l6 : \u222b (x : \u211d), x^2 * f x = 12 / 5)\n  (def_3 : \u222b (x : \u211d), x^2 * f x - (\u222b (x : \u211d), x * f x)^2 = 12 / 5 - (3 / 2)^2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly represents E[X] = 3/2 using the integral \u222b x * f x = 3/2, which is the standard definition of expectation for continuous random variables", "The Lean formalization correctly represents E[X\u00b2] = 12/5 using the integral \u222b x\u00b2 * f x = 12/5, which is the standard definition of the second moment for continuous random variables", "The Lean formalization correctly represents the variance formula Var(X) = E[X\u00b2] - (E[X])\u00b2 by expressing it as \u222b x\u00b2 * f x - (\u222b x * f x)\u00b2 = 12/5 - (3/2)\u00b2, which substitutes the given values into the variance definition"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "ts_2": {"id": "ts_2", "natural_language": "Using our computed values for $E[X^2]$ and $E[X]$, the variance is $Var(X) = \\frac{12}{5} - (\\frac{3}{2})^2 = \\frac{3}{20}$.", "statement": "We assume:\n\u2022 $E[X] = \\frac{3}{2}$ [ts_1];\n\u2022 $E[X^2] = \\frac{12}{5}$ [l6];\n\u2022 The variance is defined by the formula $Var(X) = E[X^2] - (E[X])^2$ [def_3].\nTherefore, we conclude:\n\u2022 $Var(X) = \\frac{3}{20}$ [ts_2].", "dependencies": ["tc_1", "l1", "l2", "l3", "def_1", "l4", "ts_1", "def_2", "l5", "l6", "def_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x)\n  (l4 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3)\n  (ts_1 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 2)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x)\n  (l5 : \u222b (x : \u211d), x^2 * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4)\n  (l6 : \u222b (x : \u211d), x^2 * f x = 12 / 5)\n  (def_3 : \u222b (x : \u211d), x^2 * f x - (\u222b (x : \u211d), x * f x)^2 = 12 / 5 - (3 / 2)^2) :\n  \u222b (x : \u211d), x^2 * f x - (\u222b (x : \u211d), x * f x)^2 = 3 / 20 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_2\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x)\n  (l4 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3)\n  (ts_1 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 2)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x)\n  (l5 : \u222b (x : \u211d), x^2 * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4)\n  (l6 : \u222b (x : \u211d), x^2 * f x = 12 / 5)\n  (def_3 : \u222b (x : \u211d), x^2 * f x - (\u222b (x : \u211d), x * f x)^2 = 12 / 5 - (3 / 2)^2) :\n  \u222b (x : \u211d), x^2 * f x - (\u222b (x : \u211d), x * f x)^2 = 3 / 20 := by\n  rw [def_3]\n  rw [def_1, ts_1, l6]\n  norm_num\n  field_simp\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 21, "column": 6, "endLine": 21, "endColumn": 11, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  \u222b (x : \u211d), x * f x\nf : \u211d \u2192 \u211d\nk : \u211d\ntc_1 : (\u2200 x \u2208 Set.Icc 0 2, f x = k * x ^ 2) \u2227 \u2200 x \u2209 Set.Icc 0 2, f x = 0\nl1 : \u222b (x : \u211d) in Set.Icc 0 2, k * x ^ 2 = 1\nl2 : k * (2 ^ 3 / 3 - 0 ^ 3 / 3) = 1\nl3 : k = 3 / 8\ndef_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x\nl4 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 8 * \u222b (x : \u211d) in Set.Icc 0 2, x ^ 3\nts_1 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 2\ndef_2 : \u222b (x : \u211d), x ^ 2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x ^ 2 * f x\nl5 : \u222b (x : \u211d), x ^ 2 * f x = 3 / 8 * \u222b (x : \u211d) in Set.Icc 0 2, x ^ 4\nl6 : \u222b (x : \u211d), x ^ 2 * f x = 12 / 5\ndef_3 : \u222b (x : \u211d), x ^ 2 * f x - (\u222b (x : \u211d), x * f x) ^ 2 = 12 / 5 - (3 / 2) ^ 2\n\u22a2 12 / 5 - (3 / 2) ^ 2 = 3 / 20"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The assumption E[X] = 3/2 is correctly represented as an integral equation in the Lean formalization.", "The assumption E[X\u00b2] = 12/5 is correctly represented as an integral equation in the Lean formalization.", "The variance definition is represented as a specific numerical equation rather than a general definitional formula. While mathematically equivalent for this problem, it doesn't capture the general definitional nature expressed in the natural language.", "The conclusion Var(X) = 3/20 is correctly represented as the goal to be proven in the Lean formalization.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.75 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_ts_2\n  (f : \u211d \u2192 \u211d)\n  (k : \u211d)\n  (tc_1 : (\u2200 x, x \u2208 Set.Icc 0 2 \u2192 f x = k * x^2) \u2227 (\u2200 x, x \u2209 Set.Icc 0 2 \u2192 f x = 0))\n  (l1 : \u222b (x : \u211d) in Set.Icc 0 2, (k * x^2) = 1)\n  (l2 : k * (2^3 / 3 - 0^3 / 3) = 1)\n  (l3 : k = 3 / 8)\n  (def_1 : \u222b (x : \u211d), x * f x = \u222b (x : \u211d) in Set.Icc 0 2, x * f x)\n  (l4 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^3)\n  (ts_1 : \u222b (x : \u211d) in Set.Icc 0 2, x * f x = 3 / 2)\n  (def_2 : \u222b (x : \u211d), x^2 * f x = \u222b (x : \u211d) in Set.Icc 0 2, x^2 * f x)\n  (l5 : \u222b (x : \u211d), x^2 * f x = (3 / 8) * \u222b (x : \u211d) in Set.Icc 0 2, x^4)\n  (l6 : \u222b (x : \u211d), x^2 * f x = 12 / 5)\n  (def_3 : \u222b (x : \u211d), x^2 * f x - (\u222b (x : \u211d), x * f x)^2 = 12 / 5 - (3 / 2)^2) :\n  \u00ac (\u222b (x : \u211d), x^2 * f x - (\u222b (x : \u211d), x * f x)^2 = 3 / 20) := by\n  rw [def_3]\n  have h : 12 / 5 - (3 / 2)^2 = 3 / 20 := by norm_num\n  rw [h]\n  intro h'\n  norm_num at h'"}, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_3", "label": "def_3", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    