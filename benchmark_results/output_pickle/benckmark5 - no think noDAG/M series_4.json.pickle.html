
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $(a_n)$ be a sequence defined by $a_n = \frac{n^2-1}{3n^2+n}$. The limit of the sequence $(a_n)$ is $\frac{1}{3}$.

Proof: To find the limit of the sequence $(a_n)$, we evaluate the expression $\lim_{n 	o \infty} \frac{n^2-1}{3n^2+n}$. We can divide both the numerator and the denominator by the highest power of $n$, which is $n^2$. This gives us $\lim_{n 	o \infty} \frac{(n^2/n^2)-(1/n^2)}{(3n^2/n^2)+(n/n^2)} = \lim_{n 	o \infty} \frac{1-1/n^2}{3+1/n}$. We know that as $n$ approaches infinity, the terms $1/n^2$ and $1/n$ approach $0$. Therefore, we can substitute $0$ for these terms in the expression, which gives us $\frac{1-0}{3+0}$. This simplifies to $\frac{1}{3}$. So, the limit of the sequence $(a_n)$ is $\frac{1}{3}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $(a_n)$ be a sequence defined by $a_n = \\frac{n^2-1}{3n^2+n}$.", "statement": "Premise:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n^2-1}{3n^2+n}$ for $n \\in \\mathbb{N}$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.67, "semantic_feedback": ["The Lean declaration `(a : \u2115 \u2192 \u211d)` perfectly captures the concept of a sequence of real numbers indexed by natural numbers.", "The Lean formula with explicit type casting to reals correctly represents the mathematical expression, and the universal quantifier ensures it holds for all natural numbers.", "The well-definedness conclusion is implicitly captured in the Lean formalization through the type system and universal quantification, but it's not explicitly stated as a separate proposition. The meaning is preserved but the structure is slightly different."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "To find the limit of the sequence $(a_n)$, we evaluate the expression $\\lim_{n \\to \\infty} \\frac{n^2-1}{3n^2+n}$. We can divide both the numerator and the denominator by the highest power of $n$, which is $n^2$. This gives us $\\lim_{n \\to \\infty} \\frac{(n^2/n^2)-(1/n^2)}{(3n^2/n^2)+(n/n^2)} = \\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n}$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n^2-1}{3n^2+n}$ for $n \\in \\mathbb{N}$ [tc_1];\nTherefore, we conclude:\n\u2022 The limit of the sequence $(a_n)$ is equal to $\\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n}$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d)) :\n  Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 3}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d)) :\n  Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)) := by\n  simp_rw [tc_1]\n  have : (fun n : \u2115 => ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d)) = \n         (fun n : \u2115 => (1 - 1/(n:\u211d)^2) / (3 + 1/(n:\u211d))) := by\n    ext n\n    have h\u2081 : (n:\u211d) \u2260 0 := by exact_mod_cast (Nat.pos_iff_ne_zero.mp (Nat.pos_of_ne_zero (n.succ_ne_zero)))\n    field_simp\n    ring_nf\n    rw [\u2190 mul_div_assoc, \u2190 mul_div_assoc, div_self h\u2081, mul_one, mul_div_assoc, div_self h\u2081, mul_one]\n    ring\n  rw [this]\n  have h\u2082 : (1:\u211d)/3 = (1 - 0)/(3 + 0) := by norm_num\n  rw [h\u2082]\n  refine Tendsto.div ?_ ?_ (by norm_num) ?_\n  \u00b7 exact tendsto_const_nhds.sub (tendsto_const_div_atTop_nhds_0_nat 1)\n  \u00b7 exact tendsto_const_nhds.add (tendsto_const_div_atTop_nhds_0_nat 1)\n  \u00b7 exact ne_of_gt (by norm_num)", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 30, "endLine": 13, "endColumn": 107, "data": "mod_cast has type\n  \u00acFalse : Prop\nbut is expected to have type\n  \u00acn = 0 : Prop"}, {"line": 16, "column": 8, "endLine": 16, "endColumn": 23, "data": "no goals to be solved"}, {"line": 21, "column": 28, "endLine": 21, "endColumn": 39, "data": "unsolved goals\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n : \u2115), a n = (\u2191n ^ 2 - 1) / (3 * \u2191n ^ 2 + \u2191n)\nthis : (fun n => (\u2191n ^ 2 - 1) / (3 * \u2191n ^ 2 + \u2191n)) = fun n => (1 - 1 / \u2191n ^ 2) / (3 + 1 / \u2191n)\nh\u2082 : 1 / 3 = (1 - 0) / (3 + 0)\n\u22a2 \u00ac?m.22182 = 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition is correctly formalized with proper type annotations and mathematical structure matching the natural language exactly.", "The limit conclusion has a minor inconsistency. The natural language states the limit equals a specific expression (1-1/n\u00b2)/(3+1/n), while the Lean formalization directly uses the evaluated limit value 1/3. Although mathematically equivalent, this misses the intermediate step of expressing the limit in the transformed form mentioned in the natural language.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: ['The sequence definition is correctly formalized with proper type annotations and mathematical structure matching the natural language exactly.', 'The limit conclusion has a minor inconsistency. The natural language states the limit equals a specific expression (1-1/n\u00b2)/(3+1/n), while the Lean formalization directly uses the evaluated limit value 1/3. Although mathematically equivalent, this misses the intermediate step of expressing the limit in the transformed form mentioned in the natural language.']"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "We know that as $n$ approaches infinity, the terms $1/n^2$ and $1/n$ approach $0$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n^2-1}{3n^2+n}$ for $n \\in \\mathbb{N}$ [tc_1];\n\u2022 The limit of the sequence $(a_n)$ is equal to $\\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n}$ [l1];\nTherefore, we conclude:\n\u2022 $\\lim_{n \\to \\infty} \\frac{1}{n^2} = 0$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3))) :\n  Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3))) :\n  Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0) := by\n  have h : \u2200 n : \u2115, a n = (1 - 1 / (n^2 : \u211d)) / (3 + 1 / (n : \u211d)) := by\n    intro n\n    rw [tc_1]\n    field_simp\n    ring_nf\n    rw [div_eq_mul_inv, div_eq_mul_inv]\n    ring\n  rw [tendsto_congr' (eventually_of_forall h)] at l1\n  have : Tendsto (fun n => (1 - 1 / (n^2 : \u211d)) - (1/3) * (3 + 1 / (n : \u211d))) atTop (\ud835\udcdd 0) := by\n    convert l1 using 2\n    field_simp\n    ring\n  simp only [sub_self, neg_add_cancel_right] at this\n  have : Tendsto (fun n => - (1 / (n^2 : \u211d)) - (1 / (3 * n : \u211d))) atTop (\ud835\udcdd 0) := by\n    convert this using 2\n    ring\n  have h\u2081 : Tendsto (fun n => 1 / (3 * n : \u211d)) atTop (\ud835\udcdd 0) := by\n    simp_rw [one_div, \u2190 mul_inv]\n    apply Tendsto.const_mul (1/3)\n    exact tendsto_inv_atTop_zero.comp tendsto_nat_cast_atTop_atTop\n  have h\u2082 : Tendsto (fun n => - (1 / (n^2 : \u211d))) atTop (\ud835\udcdd 0) := by\n    rw [\u2190 neg_zero]\n    apply Tendsto.neg\n    convert Tendsto.add this h\u2081 using 1\n    simp\n  have h\u2083 : Tendsto (fun n => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0) := by\n    convert Tendsto.neg h\u2082 using 1\n    simp\n    exact tendsto_nhds_unique h\u2083 (tendsto_const_nhds (a := 0))\n  exact h\u2083", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 15, "column": 8, "endLine": 15, "endColumn": 22, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  ?a / ?b\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n : \u2115), a n = (\u2191n ^ 2 - 1) / (3 * \u2191n ^ 2 + \u2191n)\nl1 : Tendsto (fun n => a n) atTop (\ud835\udcdd (1 / 3))\nn : \u2115\n\u22a2 \u2191n ^ 2 * (\u2191n)\u207b\u00b9 * (\u2191n + \u2191n ^ 2 * 3)\u207b\u00b9 + \u2191n ^ 2 * (\u2191n + \u2191n ^ 2 * 3)\u207b\u00b9 * 3 +\n      (-((\u2191n)\u207b\u00b9 * (\u2191n + \u2191n ^ 2 * 3)\u207b\u00b9) - (\u2191n + \u2191n ^ 2 * 3)\u207b\u00b9 * 3) =\n    1 - (\u2191n)\u207b\u00b9 ^ 2"}, {"line": 18, "column": 91, "endLine": 21, "endColumn": 8, "data": "unsolved goals\ncase h.e\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n : \u2115), a n = (\u2191n ^ 2 - 1) / (3 * \u2191n ^ 2 + \u2191n)\nl1 : Tendsto (fun x => (1 - 1 / \u2191x ^ 2) / (3 + 1 / \u2191x)) atTop (\ud835\udcdd (1 / 3))\nh : \u2200 (n : \u2115), a n = (1 - 1 / \u2191n ^ 2) / (3 + 1 / \u2191n)\n\u22a2 Tendsto (fun n => n\u207b\u00b9 * (-1 / 3) - n\u207b\u00b9 ^ 2) atTop = Tendsto (fun x => (1 - 1 / \u2191x ^ 2) / (3 + 1 / \u2191x)) atTop\n\ncase h.e'_1.h.e'_3\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n : \u2115), a n = (\u2191n ^ 2 - 1) / (3 * \u2191n ^ 2 + \u2191n)\nl1 : Tendsto (fun x => (1 - 1 / \u2191x ^ 2) / (3 + 1 / \u2191x)) atTop (\ud835\udcdd (1 / 3))\nh : \u2200 (n : \u2115), a n = (1 - 1 / \u2191n ^ 2) / (3 + 1 / \u2191n)\n\u22a2 0 = 1 / 3"}, {"line": 27, "column": 22, "endLine": 27, "endColumn": 31, "data": "simp made no progress"}, {"line": 30, "column": 64, "endLine": 34, "endColumn": 8, "data": "unsolved goals\ncase h.e'_3\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n : \u2115), a n = (\u2191n ^ 2 - 1) / (3 * \u2191n ^ 2 + \u2191n)\nl1 : Tendsto (fun x => (1 - 1 / \u2191x ^ 2) / (3 + 1 / \u2191x)) atTop (\ud835\udcdd (1 / 3))\nh : \u2200 (n : \u2115), a n = (1 - 1 / \u2191n ^ 2) / (3 + 1 / \u2191n)\nthis\u271d : Tendsto (fun n => 1 - 1 / n ^ 2 - 1 / 3 * (3 + 1 / n)) atTop (\ud835\udcdd 0)\nthis : Tendsto (fun n => -(1 / n ^ 2) - 1 / (3 * n)) atTop (\ud835\udcdd 0)\nh\u2081 : Tendsto (fun n => 1 / (3 * n)) atTop (\ud835\udcdd 0)\n\u22a2 (fun x => (x ^ 2)\u207b\u00b9) = fun x => -(x ^ 2)\u207b\u00b9\n\ncase h.e'_5\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n : \u2115), a n = (\u2191n ^ 2 - 1) / (3 * \u2191n ^ 2 + \u2191n)\nl1 : Tendsto (fun x => (1 - 1 / \u2191x ^ 2) / (3 + 1 / \u2191x)) atTop (\ud835\udcdd (1 / 3))\nh : \u2200 (n : \u2115), a n = (1 - 1 / \u2191n ^ 2) / (3 + 1 / \u2191n)\nthis\u271d : Tendsto (fun n => 1 - 1 / n ^ 2 - 1 / 3 * (3 + 1 / n)) atTop (\ud835\udcdd 0)\nthis : Tendsto (fun n => -(1 / n ^ 2) - 1 / (3 * n)) atTop (\ud835\udcdd 0)\nh\u2081 : Tendsto (fun n => 1 / (3 * n)) atTop (\ud835\udcdd 0)\n\u22a2 \ud835\udcdd 0 = \ud835\udcdd (0 + 0)"}, {"line": 38, "column": 30, "endLine": 38, "endColumn": 32, "data": "unknown identifier 'h\u2083'"}, {"line": 38, "column": 53, "endLine": 38, "endColumn": 61, "data": "invalid argument name 'a' for function 'tendsto_const_nhds'"}, {"line": 38, "column": 10, "endLine": 38, "endColumn": 62, "data": "failed to synthesize\n  T2Space (Filter \u211d)\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 39, "column": 2, "endLine": 39, "endColumn": 10, "data": "type mismatch\n  h\u2083\nhas type\n  Tendsto (fun (n : \u211d) => 1 / n ^ 2) atTop (\ud835\udcdd 0) : Prop\nbut is expected to have type\n  Tendsto (fun (n : \u2115) => 1 / \u2191n ^ 2) atTop (\ud835\udcdd 0) : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition tc_1 correctly captures the mathematical formula with appropriate type annotations for natural numbers and real numbers.", "The limit assumption l1 directly states the limit is 1/3, while the natural language presents it as equal to the limit of the expression (1-1/n\u00b2)/(3+1/n). Although mathematically equivalent, this misses the structural relationship that appears to be part of the logical argument.", "The conclusion l2 perfectly captures the statement that the limit of 1/n\u00b2 as n approaches infinity equals 0, using the correct Lean syntax for limits and convergence.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.67 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l2\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3))) :\n  \u00ac Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0) := by\n  have h : Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0) := by\n    simp_rw [one_div]\n    apply tendsto_inv_atTop_zero\n    exact tendsto_pow_atTop_atTop_of_one_lt one_lt_two\n  exact h.not"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "We know that as $n$ approaches infinity, the terms $1/n^2$ and $1/n$ approach $0$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n^2-1}{3n^2+n}$ for $n \\in \\mathbb{N}$ [tc_1];\n\u2022 The limit of the sequence $(a_n)$ is equal to $\\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n}$ [l1];\n\u2022 $\\lim_{n \\to \\infty} \\frac{1}{n^2} = 0$ [l2];\nTherefore, we conclude:\n\u2022 $\\lim_{n \\to \\infty} \\frac{1}{n} = 0$ [l3].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)))\n  (l2 : Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0)) :\n  Tendsto (fun n : \u2115 => 1 / (n : \u211d)) atTop (\ud835\udcdd 0) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)))\n  (l2 : Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0)) :\n  Tendsto (fun n : \u2115 => 1 / (n : \u211d)) atTop (\ud835\udcdd 0) := by\n  have h : \u2200 n : \u2115, a n = (1 - 1/(n^2 : \u211d)) / (3 + 1/(n : \u211d)) := by\n    intro n\n    rw [tc_1]\n    field_simp\n    congr 1\n    ring\n  rw [tendsto_congr' (eventually_of_forall h)] at l1\n  have h1 : Tendsto (fun n : \u2115 => (1 - 1/(n^2 : \u211d))) atTop (\ud835\udcdd 1) := by\n    convert Tendsto.sub tendsto_const_nhds l2\n    simp\n  have h2 : Tendsto (fun n : \u2115 => (3 + 1/(n : \u211d))) atTop (\ud835\udcdd 3) := by\n    convert Tendsto.add tendsto_const_nhds (tendsto_inv_atTop_zero.comp tendsto_nat_cast_atTop_atTop)\n    simp\n  have := tendsto_nhds_unique l1 (Tendsto.div h1 h2 (by norm_num))\n  exact tendsto_inv_atTop_zero.comp tendsto_nat_cast_atTop_atTop", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition is correctly formalized with appropriate type casting from natural numbers to reals.", "The natural language states that the limit of a_n equals the limit of (1-1/n\u00b2)/(3+1/n), but the Lean code assumes the limit is directly 1/3. This skips the intermediate step and changes the logical structure.", "The limit assumption for 1/n\u00b2 is perfectly captured in the Lean formalization.", "The conclusion about the limit of 1/n is correctly stated in both versions.", "While the overall logical structure is preserved (proving a limit statement from given assumptions), there's a disconnect in the reasoning chain. The natural language suggests the conclusion follows from the premises about a_n, but mathematically this connection is not clear, and the Lean formalization reflects this logical gap.", "Wrong dependencies in Lean4 tactics!"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The sequence definition is correctly formalized with appropriate type casting from natural numbers to reals.', 'The natural language states that the limit of a_n equals the limit of (1-1/n\u00b2)/(3+1/n), but the Lean code assumes the limit is directly 1/3. This skips the intermediate step and changes the logical structure.', 'The limit assumption for 1/n\u00b2 is perfectly captured in the Lean formalization.', 'The conclusion about the limit of 1/n is correctly stated in both versions.', \"While the overall logical structure is preserved (proving a limit statement from given assumptions), there's a disconnect in the reasoning chain. The natural language suggests the conclusion follows from the premises about a_n, but mathematically this connection is not clear, and the Lean formalization reflects this logical gap.\"]"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Therefore, we can substitute $0$ for these terms in the expression, which gives us $\\frac{1-0}{3+0}$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n^2-1}{3n^2+n}$ for $n \\in \\mathbb{N}$ [tc_1];\n\u2022 The limit of the sequence $(a_n)$ is equal to $\\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n}$ [l1];\n\u2022 $\\lim_{n \\to \\infty} \\frac{1}{n^2} = 0$ [l2];\n\u2022 $\\lim_{n \\to \\infty} \\frac{1}{n} = 0$ [l3];\nTherefore, we conclude:\n\u2022 $\\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n} = \\frac{1-0}{3+0}$ [l4].", "dependencies": ["tc_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)))\n  (l2 : Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0))\n  (l3 : Tendsto (fun n : \u2115 => 1 / (n : \u211d)) atTop (\ud835\udcdd 0)) :\n  Tendsto (fun n : \u2115 => (1 - 1 / (n^2 : \u211d)) / (3 + 1 / (n : \u211d))) atTop (\ud835\udcdd ((1 - 0) / (3 + 0))) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)))\n  (l2 : Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0))\n  (l3 : Tendsto (fun n : \u2115 => 1 / (n : \u211d)) atTop (\ud835\udcdd 0)) :\n  Tendsto (fun n : \u2115 => (1 - 1 / (n^2 : \u211d)) / (3 + 1 / (n : \u211d))) atTop (\ud835\udcdd ((1 - 0) / (3 + 0))) := by\n  have h1 : Tendsto (fun n : \u2115 => 1 - 1 / (n^2 : \u211d)) atTop (\ud835\udcdd (1 - 0)) := by\n    apply Tendsto.sub tendsto_const_nhds l2\n  have h2 : Tendsto (fun n : \u2115 => 3 + 1 / (n : \u211d)) atTop (\ud835\udcdd (3 + 0)) := by\n    apply Tendsto.add tendsto_const_nhds l3\n  apply Tendsto.div h1 h2 (by simp [show (3 : \u211d) \u2260 0 by norm_num])", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The sequence definition tc_1 correctly captures the mathematical formula with appropriate type annotations.", "The assumption l1 has a major inconsistency. The natural language states that the limit of (a_n) equals the limit of the transformed expression, but the Lean version directly assumes the limit is 1/3, missing the intermediate relationship.", "The auxiliary limit l2 correctly formalizes the limit of 1/n\u00b2 approaching 0.", "The auxiliary limit l3 correctly formalizes the limit of 1/n approaching 0.", "The conclusion l4 perfectly captures the limit calculation showing the transformed expression approaches (1-0)/(3+0)."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The sequence definition tc_1 correctly captures the mathematical formula with appropriate type annotations.', 'The assumption l1 has a major inconsistency. The natural language states that the limit of (a_n) equals the limit of the transformed expression, but the Lean version directly assumes the limit is 1/3, missing the intermediate relationship.', 'The auxiliary limit l2 correctly formalizes the limit of 1/n\u00b2 approaching 0.', 'The auxiliary limit l3 correctly formalizes the limit of 1/n approaching 0.', 'The conclusion l4 perfectly captures the limit calculation showing the transformed expression approaches (1-0)/(3+0).']"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "This simplifies to $\\frac{1}{3}$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n^2-1}{3n^2+n}$ for $n \\in \\mathbb{N}$ [tc_1];\n\u2022 The limit of the sequence $(a_n)$ is equal to $\\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n}$ [l1];\n\u2022 $\\lim_{n \\to \\infty} \\frac{1}{n^2} = 0$ [l2];\n\u2022 $\\lim_{n \\to \\infty} \\frac{1}{n} = 0$ [l3];\n\u2022 $\\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n} = \\frac{1-0}{3+0}$ [l4];\nTherefore, we conclude:\n\u2022 $\\frac{1-0}{3+0} = \\frac{1}{3}$ [l5].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)))\n  (l2 : Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0))\n  (l3 : Tendsto (fun n : \u2115 => 1 / (n : \u211d)) atTop (\ud835\udcdd 0))\n  (l4 : Tendsto (fun n : \u2115 => (1 - 1 / (n^2 : \u211d)) / (3 + 1 / (n : \u211d))) atTop (\ud835\udcdd ((1 - 0) / (3 + 0)))) :\n  (1 - 0) / (3 + 0) = 1 / 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)))\n  (l2 : Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0))\n  (l3 : Tendsto (fun n : \u2115 => 1 / (n : \u211d)) atTop (\ud835\udcdd 0))\n  (l4 : Tendsto (fun n : \u2115 => (1 - 1 / (n^2 : \u211d)) / (3 + 1 / (n : \u211d))) atTop (\ud835\udcdd ((1 - 0) / (3 + 0)))) :\n  (1 - 0) / (3 + 0) = 1 / 3 := by\n  simp only [sub_zero, add_zero, div_one]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.8, "semantic_feedback": ["The sequence definition tc_1 correctly captures the mathematical formula with appropriate type annotations.", "The limit statement l1 directly states that a_n tends to 1/3, but the natural language describes this as a two-step process where the limit of a_n equals the limit of the transformed expression (1-1/n\u00b2)/(3+1/n). The intermediate equality is missing from the Lean formalization.", "The auxiliary limit l2 for 1/n\u00b2 \u2192 0 is correctly formalized using Tendsto.", "The auxiliary limit l3 for 1/n \u2192 0 is correctly formalized using Tendsto.", "The limit evaluation l4 correctly formalizes the convergence of the transformed expression to (1-0)/(3+0), and the final arithmetic l5 proving (1-0)/(3+0) = 1/3 matches perfectly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "So, the limit of the sequence $(a_n)$ is $\\frac{1}{3}$.", "statement": "We assume:\n\u2022 $(a_n)$ is a sequence of real numbers defined by $a_n = \\frac{n^2-1}{3n^2+n}$ for $n \\in \\mathbb{N}$ [tc_1];\n\u2022 The limit of the sequence $(a_n)$ is equal to $\\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n}$ [l1];\n\u2022 $\\lim_{n \\to \\infty} \\frac{1}{n^2} = 0$ [l2];\n\u2022 $\\lim_{n \\to \\infty} \\frac{1}{n} = 0$ [l3];\n\u2022 $\\lim_{n \\to \\infty} \\frac{1-1/n^2}{3+1/n} = \\frac{1-0}{3+0}$ [l4];\n\u2022 $\\frac{1-0}{3+0} = \\frac{1}{3}$ [l5];\nTherefore, we conclude:\n\u2022 The limit of the sequence $(a_n)$ is $\\frac{1}{3}$ [ts_1].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l1 : Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)))\n  (l2 : Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0))\n  (l3 : Tendsto (fun n : \u2115 => 1 / (n : \u211d)) atTop (\ud835\udcdd 0))\n  (l4 : Tendsto (fun n : \u2115 => (1 - 1 / (n^2 : \u211d)) / (3 + 1 / (n : \u211d))) atTop (\ud835\udcdd ((1 - 0) / (3 + 0))))\n  (l5 : (1 - 0) / (3 + 0) = 1 / 3) :\n  Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d)\n  (tc_1 : \u2200 n : \u2115, a n = ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d))\n  (l2 : Tendsto (fun n : \u2115 => 1 / (n^2 : \u211d)) atTop (\ud835\udcdd 0))\n  (l3 : Tendsto (fun n : \u2115 => 1 / (n : \u211d)) atTop (\ud835\udcdd 0))\n  (l4 : Tendsto (fun n : \u2115 => (1 - 1 / (n^2 : \u211d)) / (3 + 1 / (n : \u211d))) atTop (\ud835\udcdd ((1 - 0) / (3 + 0))))\n  (l5 : (1 - 0) / (3 + 0) = 1 / 3) :\n  Tendsto (fun n : \u2115 => a n) atTop (\ud835\udcdd (1/3)) := by\n  simp_rw [tc_1]\n  have : \u2200 n : \u2115, ((n^2 - 1) : \u211d) / ((3*n^2 + n) : \u211d) = (1 - 1 / (n^2 : \u211d)) / (3 + 1 / (n : \u211d)) := by\n    intro n\n    have hn : (n:\u211d) \u2260 0 := by exact_mod_cast (Nat.pos_iff_ne_zero.mp (Nat.zero_lt_succ n))\n    field_simp\n    ring\n  simp_rw [this]\n  rwa [l5] at l4", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 30, "endLine": 16, "endColumn": 90, "data": "mod_cast has type\n  \u00acFalse : Prop\nbut is expected to have type\n  \u00acn = 0 : Prop"}, {"line": 20, "column": 7, "endLine": 20, "endColumn": 9, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  (1 - 0) / (3 + 0)\na : \u2115 \u2192 \u211d\ntc_1 : \u2200 (n : \u2115), a n = (\u2191n ^ 2 - 1) / (3 * \u2191n ^ 2 + \u2191n)\nl2 : Tendsto (fun n => 1 / \u2191n ^ 2) atTop (\ud835\udcdd 0)\nl3 : Tendsto (fun n => 1 / \u2191n) atTop (\ud835\udcdd 0)\nl4 : Tendsto (fun n => (1 - 1 / \u2191n ^ 2) / (3 + 1 / \u2191n)) atTop (\ud835\udcdd ((1 - 0) / (3 + 0)))\nl5 : (1 - 0) / (3 + 0) = 1 / 3\nthis : \u2200 (n : \u2115), (\u2191n ^ 2 - 1) / (3 * \u2191n ^ 2 + \u2191n) = (1 - 1 / \u2191n ^ 2) / (3 + 1 / \u2191n)\n\u22a2 Tendsto (fun n => (1 - 1 / \u2191n ^ 2) / (3 + 1 / \u2191n)) atTop (\ud835\udcdd (1 / 3))"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The sequence definition tc_1 correctly captures the mathematical formula with appropriate type annotations.", "The assumption l1 directly states that a_n tends to 1/3, but the natural language states that the limit of a_n equals the limit of a different expression (1-1/n\u00b2)/(3+1/n). This missing intermediate step changes the logical structure of the argument.", "The individual limit statements l2 and l3 are correctly formalized using Tendsto.", "The limit evaluation l4 correctly captures the substitution of limits into the transformed expression.", "The arithmetic simplification l5 is correctly stated.", "The final conclusion ts_1 correctly states that the sequence tends to 1/3.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The sequence definition tc_1 correctly captures the mathematical formula with appropriate type annotations.', 'The assumption l1 directly states that a_n tends to 1/3, but the natural language states that the limit of a_n equals the limit of a different expression (1-1/n\u00b2)/(3+1/n). This missing intermediate step changes the logical structure of the argument.', 'The individual limit statements l2 and l3 are correctly formalized using Tendsto.', 'The limit evaluation l4 correctly captures the substitution of limits into the transformed expression.', 'The arithmetic simplification l5 is correctly stated.', 'The final conclusion ts_1 correctly states that the sequence tends to 1/3.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    