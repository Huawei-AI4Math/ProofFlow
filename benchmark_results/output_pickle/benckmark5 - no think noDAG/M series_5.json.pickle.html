
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $(a_n)$ be an arithmetic sequence with $a_3=10$ and $a_7=22$. Let $S_n$ be the sum of the first $n$ terms of $(a_n)$. Then the sum of the first $10$ terms, $S_{10}$, is $175$.

Proof: First, we find the common difference $d$ and the first term $a_1$ of the arithmetic sequence. The formula for the $n$-th term is $a_n = a_1 + (n-1)d$. We are given $a_3 = 10$ and $a_7 = 22$. We can write these as $10=a_1+2d$ and $22=a_1+6d$. Subtracting the first equation from the second gives $12=4d$, so $d=3$. Substituting $d=3$ into the first equation gives $10=a_1+2(3)$, so $a_1=4$. Next, we find the expression for the $n$-th term, $a_n$. Using $a_1=4$ and $d=3$, we get $a_n=4+(n-1)3=4+3n-3=3n+1$. Now, we find the sum of the first 10 terms, $S_{10}$. The formula for the sum of an arithmetic series is $S_n = \frac{n}{2}(a_1+a_n)$. For $n=10$, we need to find $a_{10}$. We use the expression for $a_n$ to find $a_{10}=3(10)+1=31$. Finally, we use the sum formula for $n=10$ with $a_1=4$ and $a_{10}=31$. We have $S_{10}=\frac{10}{2}(4+31)=5(35)=175$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $(a_n)$ be an arithmetic sequence ... Let $S_n$ be the sum of the first $n$ terms of $(a_n)$.", "statement": "Premise:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n(tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the arithmetic sequence property using the general term formula with common difference (a 2 - a 1)", "The Lean formalization correctly defines S_n as the sum of first n terms using the appropriate indexing"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "with $a_3=10$ and $a_7=22$.", "statement": "Premise:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 For the sequence $(a_n)$, we have $a_3=10$ and $a_7=22$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures both the arithmetic sequence property using the general formula a_n + (m-n)*(a_2 - a_1) = a_m and the sum definition using finite sum notation. This is mathematically equivalent to the natural language statement.", "The condition a_3 = 10 is directly and exactly represented in the Lean formalization.", "The condition a_7 = 22 is directly and exactly represented in the Lean formalization."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "The formula for the $n$-th term is $a_n = a_1 + (n-1)d$.", "statement": "Definition:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 For the sequence $(a_n)$, we have $a_3=10$ and $a_7=22$ [tc_2]\n\u2022 The formula for the n-th term of an arithmetic sequence $(a_n)$ is $a_n = a_1 + (n-1)d$, where $a_1$ is the first term and $d$ is the common difference [def_1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization captures both the arithmetic sequence property and sum definition, but expresses the arithmetic sequence condition differently. Instead of using the standard form a_n = a_1 + (n-1)d, it uses the equivalent but less direct formula a_n + (m-n)*(a_2 - a_1) = a_m. The sum definition matches perfectly.", "The Lean formalization exactly matches the natural language condition a_3 = 10.", "The Lean formalization exactly matches the natural language condition a_7 = 22.", "The Lean formalization has a major logical issue. The def_1 states that for ANY sequence a and ANY values a1 and d, the formula a_n = a1 + (n-1)*d holds. This is incorrect - it should define what it means for a specific sequence to be arithmetic, not claim that every sequence follows this formula with arbitrary parameters."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization captures both the arithmetic sequence property and sum definition, but expresses the arithmetic sequence condition differently. Instead of using the standard form a_n = a_1 + (n-1)d, it uses the equivalent but less direct formula a_n + (m-n)*(a_2 - a_1) = a_m. The sum definition matches perfectly.', 'The Lean formalization exactly matches the natural language condition a_3 = 10.', 'The Lean formalization exactly matches the natural language condition a_7 = 22.', 'The Lean formalization has a major logical issue. The def_1 states that for ANY sequence a and ANY values a1 and d, the formula a_n = a1 + (n-1)*d holds. This is incorrect - it should define what it means for a specific sequence to be arithmetic, not claim that every sequence follows this formula with arbitrary parameters.']"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "We can write these as $10=a_1+2d$.", "statement": "We assume:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 For the sequence $(a_n)$, we have $a_3=10$ and $a_7=22$ [tc_2]\n\u2022 The formula for the n-th term of an arithmetic sequence $(a_n)$ is $a_n = a_1 + (n-1)d$, where $a_1$ is the first term and $d$ is the common difference [def_1]\nTherefore, we conclude:\n\u2022 $10 = a_1 + 2d$ [l1].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d) :\n  10 = a 1 + 2 * (a 2 - a 1) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d) :\n  10 = a 1 + 2 * (a 2 - a 1) := by\n  have h := tc_1.1 1 3\n  simp at h\n  rw [\u2190 tc_2.1, h]\n  simp", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 13, "column": 16, "endLine": 13, "endColumn": 17, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  a 1 + (3 - 1) * (a 2 - a 1)\na S : \u2115 \u2192 \u211d\ntc_1 : (\u2200 (n m : \u2115), a n + (\u2191m - \u2191n) * (a 2 - a 1) = a m) \u2227 \u2200 (n : \u2115), S n = \u2211 i \u2208 Finset.range n, a (i + 1)\ntc_2 : a 3 = 10 \u2227 a 7 = 22\ndef_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (\u2191n - 1) * d\nh : a 1 + (3 - 1) * (a 2 - a 1) = a 3\n\u22a2 a 3 = a 1 + 2 * (a 2 - a 1)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1: The arithmetic sequence property and sum formula are correctly captured, though using a different but equivalent formulation for the arithmetic sequence condition.", "tc_2: Perfect direct translation of the given term values.", "def_1: Captures the general arithmetic sequence formula but doesn't properly connect the abstract parameters a1 and d to the specific sequence a.", "l1: Major inconsistency because the conclusion uses 'a 1' from the specific sequence while def_1 introduces disconnected universally quantified variables 'a1' and 'd'. The mathematical equivalence of 'd' and '(a 2 - a 1)' is correct, but the logical structure fails to properly connect the general formula to the specific sequence.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['tc_1: The arithmetic sequence property and sum formula are correctly captured, though using a different but equivalent formulation for the arithmetic sequence condition.', 'tc_2: Perfect direct translation of the given term values.', \"def_1: Captures the general arithmetic sequence formula but doesn't properly connect the abstract parameters a1 and d to the specific sequence a.\", \"l1: Major inconsistency because the conclusion uses 'a 1' from the specific sequence while def_1 introduces disconnected universally quantified variables 'a1' and 'd'. The mathematical equivalence of 'd' and '(a 2 - a 1)' is correct, but the logical structure fails to properly connect the general formula to the specific sequence.\"]"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "and $22=a_1+6d$.", "statement": "We assume:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 For the sequence $(a_n)$, we have $a_3=10$ and $a_7=22$ [tc_2]\n\u2022 The formula for the n-th term of an arithmetic sequence $(a_n)$ is $a_n = a_1 + (n-1)d$, where $a_1$ is the first term and $d$ is the common difference [def_1]\n\u2022 $10 = a_1 + 2d$ [l1]\nTherefore, we conclude:\n\u2022 $22 = a_1 + 6d$ [l2].", "dependencies": ["tc_1", "tc_2", "def_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1)) :\n  22 = a 1 + 6 * (a 2 - a 1) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1)) :\n  22 = a 1 + 6 * (a 2 - a 1) := by\n  have hd : a 2 - a 1 = (a 2 - a 1) := by rfl\n  rw [\u2190 tc_2.2, def_1 7 (a 1) (a 2 - a 1)]\n  simp\n  have : 7 - 1 = 6 := by norm_num\n  rw [this]\n  rw [\u2190 l1]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 16, "column": 6, "endLine": 16, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  7 - 1\na S : \u2115 \u2192 \u211d\ntc_1 : (\u2200 (n m : \u2115), a n + (\u2191m - \u2191n) * (a 2 - a 1) = a m) \u2227 \u2200 (n : \u2115), S n = \u2211 i \u2208 Finset.range n, a (i + 1)\ntc_2 : a 3 = 10 \u2227 a 7 = 22\ndef_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (\u2191n - 1) * d\nl1 : 10 = a 1 + 2 * (a 2 - a 1)\nhd : a 2 - a 1 = a 2 - a 1\nthis : 7 - 1 = 6\n\u22a2 7 - 1 = 6 \u2228 a 2 - a 1 = 0"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The arithmetic sequence property and sum formula are correctly formalized in Lean.", "The specific values a_3=10 and a_7=22 are perfectly captured.", "The definition introduces disconnected parameters a1 and d instead of relating to the specific sequence a. It should connect a1 to a(1) and d to the common difference of sequence a.", "The equation correctly uses (a 2 - a 1) as the common difference, which is equivalent to the natural language's d.", "The conclusion correctly translates the natural language statement, maintaining the same mathematical relationship.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The arithmetic sequence property and sum formula are correctly formalized in Lean.', 'The specific values a_3=10 and a_7=22 are perfectly captured.', 'The definition introduces disconnected parameters a1 and d instead of relating to the specific sequence a. It should connect a1 to a(1) and d to the common difference of sequence a.', \"The equation correctly uses (a 2 - a 1) as the common difference, which is equivalent to the natural language's d.\", 'The conclusion correctly translates the natural language statement, maintaining the same mathematical relationship.']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Subtracting the first equation from the second gives $12=4d$.", "statement": "We assume:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 For the sequence $(a_n)$, we have $a_3=10$ and $a_7=22$ [tc_2]\n\u2022 The formula for the n-th term of an arithmetic sequence $(a_n)$ is $a_n = a_1 + (n-1)d$, where $a_1$ is the first term and $d$ is the common difference [def_1]\n\u2022 $10 = a_1 + 2d$ [l1]\n\u2022 $22 = a_1 + 6d$ [l2]\nTherefore, we conclude:\n\u2022 $12 = 4d$ [l3].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1)) :\n  12 = 4 * (a 2 - a 1) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1)) :\n  12 = 4 * (a 2 - a 1) := by\n  have h : a 2 - a 1 = (a 2 - a 1) := by rfl\n  linear_combination (l2) - (l1)", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The arithmetic sequence property is correctly formalized using (a 2 - a 1) as the common difference, which is mathematically equivalent to using variable d", "The specific values a\u2083=10 and a\u2087=22 are exactly captured in both natural language and Lean", "The general arithmetic sequence formula is correctly formalized with explicit type declarations", "The equation 10 = a\u2081 + 2d is correctly represented using (a 2 - a 1) for the common difference", "The equation 22 = a\u2081 + 6d is correctly represented using (a 2 - a 1) for the common difference", "The conclusion 12 = 4d is correctly represented using (a 2 - a 1) for the common difference"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "so $d=3$.", "statement": "We assume:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 For the sequence $(a_n)$, we have $a_3=10$ and $a_7=22$ [tc_2]\n\u2022 The formula for the n-th term of an arithmetic sequence $(a_n)$ is $a_n = a_1 + (n-1)d$, where $a_1$ is the first term and $d$ is the common difference [def_1]\n\u2022 $10 = a_1 + 2d$ [l1]\n\u2022 $22 = a_1 + 6d$ [l2]\n\u2022 $12 = 4d$ [l3]\nTherefore, we conclude:\n\u2022 $d=3$ [l4].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1)) :\n  (a 2 - a 1) = 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1)) :\n  (a 2 - a 1) = 3 := by\n  have h : 4 * (a 2 - a 1) = 12 := by\n    rw [\u2190 l3]\n  rw [\u2190 mul_right_inj' (by norm_num : (4 : \u211d) \u2260 0), h]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The arithmetic sequence condition uses an equivalent but different formulation (direct recurrence relation vs. first term + common difference formula). The sum formula correctly captures the natural language meaning.", "Direct translation with correct logical conjunction.", "Perfect semantic match with appropriate type declarations for the general arithmetic sequence formula.", "Correct translation using (a 2 - a 1) as the common difference, which is mathematically equivalent to d.", "Correct translation using (a 2 - a 1) as the common difference, which is mathematically equivalent to d.", "Correct translation using (a 2 - a 1) as the common difference, which is mathematically equivalent to d.", "The conclusion correctly states that the common difference equals 3, using the consistent notation (a 2 - a 1) instead of d."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Substituting $d=3$ into the first equation gives $10=a_1+2(3)$.", "statement": "We assume:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 For the sequence $(a_n)$, we have $a_3=10$ and $a_7=22$ [tc_2]\n\u2022 The formula for the n-th term of an arithmetic sequence $(a_n)$ is $a_n = a_1 + (n-1)d$, where $a_1$ is the first term and $d$ is the common difference [def_1]\n\u2022 $10 = a_1 + 2d$ [l1]\n\u2022 $22 = a_1 + 6d$ [l2]\n\u2022 $12 = 4d$ [l3]\n\u2022 $d=3$ [l4]\nTherefore, we conclude:\n\u2022 $10 = a_1 + 2(3)$ [l5].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3) :\n  10 = a 1 + 2 * 3 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3) :\n  10 = a 1 + 2 * 3 := by\n  rw [l4] at l1\n  exact l1", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The arithmetic sequence definition and sum formula are correctly formalized in Lean.", "The given conditions a_3=10 and a_7=22 are perfectly captured.", "The general arithmetic sequence formula introduces disconnected parameters a1 and d that don't relate to the specific sequence a, making it logically inconsistent with the context.", "The substitution equations correctly use (a 2 - a 1) as the common difference, which is mathematically equivalent to d.", "The solving steps for the common difference are correctly represented.", "The final conclusion is perfectly matched between natural language and Lean."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The arithmetic sequence definition and sum formula are correctly formalized in Lean.', 'The given conditions a_3=10 and a_7=22 are perfectly captured.', \"The general arithmetic sequence formula introduces disconnected parameters a1 and d that don't relate to the specific sequence a, making it logically inconsistent with the context.\", 'The substitution equations correctly use (a 2 - a 1) as the common difference, which is mathematically equivalent to d.', 'The solving steps for the common difference are correctly represented.', 'The final conclusion is perfectly matched between natural language and Lean.']"}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "so $a_1=4$.", "statement": "We assume:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 For the sequence $(a_n)$, we have $a_3=10$ and $a_7=22$ [tc_2]\n\u2022 The formula for the n-th term of an arithmetic sequence $(a_n)$ is $a_n = a_1 + (n-1)d$, where $a_1$ is the first term and $d$ is the common difference [def_1]\n\u2022 $10 = a_1 + 2d$ [l1]\n\u2022 $22 = a_1 + 6d$ [l2]\n\u2022 $12 = 4d$ [l3]\n\u2022 $d=3$ [l4]\n\u2022 $10 = a_1 + 2(3)$ [l5]\nTherefore, we conclude:\n\u2022 $a_1=4$ [l6].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3)\n  (l5 : 10 = a 1 + 2 * 3) :\n  a 1 = 4 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3)\n  (l5 : 10 = a 1 + 2 * 3) :\n  a 1 = 4 := by\n  linarith [l5]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 0.0, "semantic_feedback": ["tc_1: The arithmetic sequence property and sum formula are correctly formalized in Lean", "tc_2: The given conditions a_3=10 and a_7=22 are perfectly captured", "def_1: The Lean formalization introduces independent parameters a1 and d that are disconnected from the actual sequence a, creating a logical inconsistency with how the natural language intends to use this formula", "l1: Uses (a 2 - a 1) instead of d for common difference, which is mathematically equivalent but different notation", "l2: Same notation difference as l1 - uses (a 2 - a 1) instead of d", "l3: Same notation difference - uses (a 2 - a 1) instead of d", "l5: Same notation difference - uses (a 2 - a 1) instead of d", "l6: The conclusion a_1=4 is perfectly captured in both versions"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['tc_1: The arithmetic sequence property and sum formula are correctly formalized in Lean', 'tc_2: The given conditions a_3=10 and a_7=22 are perfectly captured', 'def_1: The Lean formalization introduces independent parameters a1 and d that are disconnected from the actual sequence a, creating a logical inconsistency with how the natural language intends to use this formula', 'l1: Uses (a 2 - a 1) instead of d for common difference, which is mathematically equivalent but different notation', 'l2: Same notation difference as l1 - uses (a 2 - a 1) instead of d', 'l3: Same notation difference - uses (a 2 - a 1) instead of d', 'l5: Same notation difference - uses (a 2 - a 1) instead of d', 'l6: The conclusion a_1=4 is perfectly captured in both versions']"}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "Using $a_1=4$ and $d=3$, we get $a_n=4+(n-1)3=4+3n-3=3n+1$.", "statement": "We assume:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 For the sequence $(a_n)$, we have $a_3=10$ and $a_7=22$ [tc_2]\n\u2022 The formula for the n-th term of an arithmetic sequence $(a_n)$ is $a_n = a_1 + (n-1)d$, where $a_1$ is the first term and $d$ is the common difference [def_1]\n\u2022 $d=3$ [l4]\n\u2022 $a_1=4$ [l6]\nTherefore, we conclude:\n\u2022 $a_n = 3n + 1$ [l7].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3)\n  (l5 : 10 = a 1 + 2 * 3)\n  (l6 : a 1 = 4) :\n  \u2200 n, a n = 3 * n + 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l7\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3)\n  (l5 : 10 = a 1 + 2 * 3)\n  (l6 : a 1 = 4) :\n  \u2200 n, a n = 3 * n + 1 := by\n  intro n\n  have d : \u211d := a 2 - a 1\n  have d_eq : d = 3 := l4\n  have a1_eq : a 1 = 4 := l6\n  rw [def_1 n (a 1) d, a1_eq, d_eq]\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 19, "column": 23, "endLine": 19, "endColumn": 25, "data": "type mismatch\n  l4\nhas type\n  a 2 - a 1 = 3 : Prop\nbut is expected to have type\n  d = 3 : Prop"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The arithmetic sequence property and sum formula are correctly captured in Lean, though using a different but equivalent formulation for the arithmetic sequence condition.", "The given conditions a\u2083=10 and a\u2087=22 are directly and correctly translated.", "The general formula definition introduces generic variables a1 and d that are not properly connected to the specific sequence a being analyzed, making it somewhat disconnected from the context.", "The derived value d=3 is correctly represented as (a 2 - a 1) = 3.", "The derived value a\u2081=4 is correctly stated as a 1 = 4.", "The final conclusion a\u2099 = 3n + 1 is correctly formalized as \u2200 n, a n = 3 * n + 1.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=0.83 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma not_l7\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3)\n  (l5 : 10 = a 1 + 2 * 3)\n  (l6 : a 1 = 4) :\n  \u00ac \u2200 n, a n = 3 * n + 1 := by\n  intro h\n  have h1 : a 2 = 3 * 2 + 1 := h 2\n  have h2 : a 2 = a 1 + (2 - 1) * (a 2 - a 1) := by\n    rw [\u2190 l4, \u2190 l6]\n    simp\n  rw [h1, l6, l4] at h2\n  norm_num at h2"}, "type": "lemma"}, "def_2": {"id": "def_2", "natural_language": "The formula for the sum of an arithmetic series is $S_n = \\frac{n}{2}(a_1+a_n)$.", "statement": "Definition:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 For the sequence $(a_n)$, we have $a_3=10$ and $a_7=22$ [tc_2]\n\u2022 The formula for the n-th term of an arithmetic sequence $(a_n)$ is $a_n = a_1 + (n-1)d$, where $a_1$ is the first term and $d$ is the common difference [def_1]\n\u2022 $d=3$ [l4]\n\u2022 $a_1=4$ [l6]\n\u2022 $a_n = 3n + 1$ [l7]\n\u2022 The formula for the sum of the first $n$ terms of an arithmetic series is $S_n = \\frac{n}{2}(a_1+a_n)$ [def_2].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5", "l6", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3)\n  (l5 : 10 = a 1 + 2 * 3)\n  (l6 : a 1 = 4)\n  (l7 : \u2200 n, a n = 3 * n + 1)\n  (def_2 : \u2200 (n : \u2115), S n = (n : \u211d) / 2 * (a 1 + a n))", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization uses (a 2 - a 1) to represent the common difference instead of explicitly defining d as a separate variable. While mathematically equivalent for arithmetic sequences, this is a structural difference from the natural language which refers to 'd' as the common difference.", "The Lean condition tc_2 exactly matches the natural language condition a_3=10 and a_7=22.", "The Lean def_1 introduces additional parameters (a1, d) that are not bound to the sequence being discussed, making it a general statement rather than specifically about the sequence a. The natural language refers to the specific sequence's first term and common difference.", "The Lean def_2 correctly captures the sum formula S_n = n/2 * (a_1 + a_n), matching the natural language definition.", "The Lean l4 expresses d=3 as (a 2 - a 1) = 3, which is mathematically equivalent but uses a different representation than the natural language conclusion d=3.", "The Lean l6 exactly matches the natural language conclusion a_1=4.", "The Lean l7 exactly matches the natural language conclusion a_n = 3n + 1."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean formalization uses (a 2 - a 1) to represent the common difference instead of explicitly defining d as a separate variable. While mathematically equivalent for arithmetic sequences, this is a structural difference from the natural language which refers to 'd' as the common difference.\", 'The Lean condition tc_2 exactly matches the natural language condition a_3=10 and a_7=22.', \"The Lean def_1 introduces additional parameters (a1, d) that are not bound to the sequence being discussed, making it a general statement rather than specifically about the sequence a. The natural language refers to the specific sequence's first term and common difference.\", 'The Lean def_2 correctly captures the sum formula S_n = n/2 * (a_1 + a_n), matching the natural language definition.', 'The Lean l4 expresses d=3 as (a 2 - a 1) = 3, which is mathematically equivalent but uses a different representation than the natural language conclusion d=3.', 'The Lean l6 exactly matches the natural language conclusion a_1=4.', 'The Lean l7 exactly matches the natural language conclusion a_n = 3n + 1.']"}, "type": "definition"}, "l8": {"id": "l8", "natural_language": "We use the expression for $a_n$ to find $a_{10}=3(10)+1=31$.", "statement": "We assume:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 $a_n = 3n + 1$ [l7]\nTherefore, we conclude:\n\u2022 $a_{10} = 31$ [l8].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5", "l6", "l7", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3)\n  (l5 : 10 = a 1 + 2 * 3)\n  (l6 : a 1 = 4)\n  (l7 : \u2200 n, a n = 3 * n + 1)\n  (def_2 : \u2200 (n : \u2115), S n = (n : \u211d) / 2 * (a 1 + a n)) :\n  a 10 = 31 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l8\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3)\n  (l5 : 10 = a 1 + 2 * 3)\n  (l6 : a 1 = 4)\n  (l7 : \u2200 n, a n = 3 * n + 1)\n  (def_2 : \u2200 (n : \u2115), S n = (n : \u211d) / 2 * (a 1 + a n)) :\n  a 10 = 31 := by\n  rw [l7]\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.67, "semantic_feedback": ["The arithmetic sequence definition in Lean is mathematically correct but includes many extra assumptions (tc_2, def_1, l1-l6, def_2) not mentioned in the natural language. While these don't contradict the natural language, they represent a much more elaborate setup than what's described.", "The formula a_n = 3n + 1 is correctly represented in Lean as 'l7 : \u2200 n, a n = 3 * n + 1', capturing the exact mathematical meaning.", "The conclusion a_10 = 31 is correctly represented as the goal to prove 'a 10 = 31', which matches the natural language statement perfectly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Finally, we use the sum formula for $n=10$ with $a_1=4$ and $a_{10}=31$. We have $S_{10}=\\frac{10}{2}(4+31)=5(35)=175$.", "statement": "We assume:\n\u2022 $(a_n)$ is an arithmetic sequence and $S_n$ is the sum of its first $n$ terms [tc_1]\n\u2022 $a_1=4$ [l6]\n\u2022 The formula for the sum of the first $n$ terms of an arithmetic series is $S_n = \\frac{n}{2}(a_1+a_n)$ [def_2]\n\u2022 $a_{10} = 31$ [l8]\nTherefore, we conclude:\n\u2022 $S_{10} = 175$ [ts_1].", "dependencies": ["tc_1", "tc_2", "def_1", "l1", "l2", "l3", "l4", "l5", "l6", "l7", "def_2", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3)\n  (l5 : 10 = a 1 + 2 * 3)\n  (l6 : a 1 = 4)\n  (l7 : \u2200 n, a n = 3 * n + 1)\n  (def_2 : \u2200 (n : \u2115), S n = (n : \u211d) / 2 * (a 1 + a n))\n  (l8 : a 10 = 31) :\n  S 10 = 175 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (tc_1 : (\u2200 n m, a n + (m - n) * (a 2 - a 1) = a m) \u2227 (\u2200 n, S n = (\u2211 i in Finset.range n, a (i + 1))))\n  (tc_2 : a 3 = 10 \u2227 a 7 = 22)\n  (def_1 : \u2200 (n : \u2115) (a1 d : \u211d), a n = a1 + (n - 1) * d)\n  (l1 : 10 = a 1 + 2 * (a 2 - a 1))\n  (l2 : 22 = a 1 + 6 * (a 2 - a 1))\n  (l3 : 12 = 4 * (a 2 - a 1))\n  (l4 : (a 2 - a 1) = 3)\n  (l5 : 10 = a 1 + 2 * 3)\n  (l6 : a 1 = 4)\n  (l7 : \u2200 n, a n = 3 * n + 1)\n  (def_2 : \u2200 (n : \u2115), S n = (n : \u211d) / 2 * (a 1 + a n))\n  (l8 : a 10 = 31) :\n  S 10 = 175 := by\n  rw [def_2, l6, l8]\n  simp\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The arithmetic sequence definition and sum formula in tc_1 correctly capture the mathematical meaning, though expressed in formal logic notation", "The condition a 1 = 4 perfectly matches the natural language statement a\u2081=4", "The sum formula def_2 correctly translates the mathematical formula S\u2099 = n/2(a\u2081+a\u2099)", "The condition a 10 = 31 perfectly matches a\u2081\u2080 = 31", "The conclusion S 10 = 175 correctly represents S\u2081\u2080 = 175. The Lean formalization includes additional intermediate steps and constraints (tc_2, l1-l5, l7) that are mathematically consistent and help establish the proof structure, which is acceptable as extra logical detail"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    