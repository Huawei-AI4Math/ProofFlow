
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $n$ is an odd integer, then $n^2 \equiv 1 \pmod{8}$.

Proof: Since $n$ is odd, we can write $n = 2k + 1$ for some integer $k$. Then $n^2 = (2k + 1)^2 = 4k^2 + 4k + 1$. We can factor this as $n^2 = 4k(k + 1) + 1$. Now, either $k$ is even or $k$ is odd. If $k$ is even, then $k + 1$ is odd, and if $k$ is odd, then $k + 1$ is even. In either case, $k(k + 1)$ is even, so $k(k + 1) = 2m$ for some integer $m$. Therefore $n^2 = 4(2m) + 1 = 8m + 1$, which means $n^2 \equiv 1 \pmod{8}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "If $n$ is an odd integer", "statement": "Premise:\n\u2022 $n$ is an odd integer [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (n : \u2124)\n(tc_1 : n % 2 = 1)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that n is an odd integer using the standard mathematical definition n % 2 = 1, with n declared as an integer type", "The Lean formalization correctly contains no conclusions, matching the natural language statement that no conclusions are derived in this premise step"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "Since $n$ is odd, we can write $n = 2k + 1$ for some integer $k$.", "statement": "We assume:\n\u2022 $n$ is an odd integer [tc_1].\nTherefore, we conclude:\n\u2022 There exists an integer $k$ such that $n = 2k + 1$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (n : \u2124)\n  (tc_1 : n % 2 = 1) :\n  \u2203 k : \u2124, n = 2 * k + 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l1\n  (n : \u2124)\n  (tc_1 : n % 2 = 1) :\n  \u2203 k : \u2124, n = 2 * k + 1 := by\n  use (n - 1) / 2\n  have h : (n - 1) % 2 = 0 := by\n    rw [Int.emod_sub_emod]\n    simp [tc_1]\n  rw [Int.ediv_add_emod (n - 1) 2, h]\n  simp\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 11, "column": 8, "endLine": 11, "endColumn": 25, "data": "unknown constant 'Int.emod_sub_emod'"}, {"line": 11, "column": 8, "endLine": 11, "endColumn": 25, "data": "tactic 'rewrite' failed, equality or iff proof expected\n  ?m.513\nn : \u2124\ntc_1 : n % 2 = 1\n\u22a2 (n - 1) % 2 = 0"}, {"line": 13, "column": 6, "endLine": 13, "endColumn": 33, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  2 * ((n - 1) / 2) + (n - 1) % 2\ncase h\nn : \u2124\ntc_1 : n % 2 = 1\nh : (n - 1) % 2 = 0\n\u22a2 n = 2 * ((n - 1) / 2) + 1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures the natural language statement. The condition 'n is odd' is properly represented as 'n % 2 = 1', which is the standard mathematical definition of oddness in modular arithmetic. The conclusion correctly states the existence of integer k such that n = 2*k + 1, which is mathematically equivalent to the natural language version. The logical structure (premise \u2192 conclusion) is preserved.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma neg_l1\n  (n : \u2124)\n  (tc_1 : n % 2 = 1) :\n  \u00ac \u2203 k : \u2124, n = 2 * k + 1 := by\n  intro h\n  obtain \u27e8k, hk\u27e9 := h\n  rw [hk] at tc_1\n  have : (2 * k + 1) % 2 = 1 % 2 := by rw [tc_1]\n  simp [Int.mul_emod_right, Int.add_emod] at this\n  norm_num at this"}, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Then $n^2 = (2k + 1)^2 = 4k^2 + 4k + 1$.", "statement": "We assume:\n\u2022 $n$ is an odd integer [tc_1];\n\u2022 There exists an integer $k$ such that $n = 2k + 1$ [l1].\nTherefore, we conclude:\n\u2022 $n^2 = 4k^2 + 4k + 1$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1) :\n  \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l2\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1) :\n  \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1 := by\n  obtain \u27e8k, hk\u27e9 := l1\n  use k\n  rw [hk]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all components from the natural language. The variable n is properly declared as an integer with the oddness condition represented as n % 2 = 1. The existential assumption about k is directly translated. The conclusion correctly expresses that there exists an integer k satisfying the quadratic equation, which is the appropriate formalization of the natural language statement. The explicit existential quantification in the conclusion is mathematically sound and necessary in formal logic."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "We can factor this as $n^2 = 4k(k + 1) + 1$.", "statement": "We assume:\n\u2022 $n$ is an odd integer [tc_1];\n\u2022 There exists an integer $k$ such that $n = 2k + 1$ [l1];\n\u2022 $n^2 = 4k^2 + 4k + 1$ [l2].\nTherefore, we conclude:\n\u2022 $n^2 = 4k(k + 1) + 1$ [l3].", "dependencies": ["tc_1", "l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1)\n  (l2 : \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1) :\n  \u2203 k : \u2124, n^2 = 4 * k * (k + 1) + 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l3\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1)\n  (l2 : \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1) :\n  \u2203 k : \u2124, n^2 = 4 * k * (k + 1) + 1 := by\n  obtain \u27e8k, hk\u27e9 := l2\n  use k\n  rw [hk]\n  ring", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The variable declaration and odd integer constraint are correctly captured using integer type and modular arithmetic.", "The existential statement for l1 is perfectly translated from natural language to Lean.", "The equation l2 is mathematically correct but introduces a separate existential quantifier where the natural language implies the same k from l1 should be used.", "The conclusion l3 is mathematically equivalent to l2 through factoring, but the separate existential quantification doesn't capture the deductive relationship implied in the natural language."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: ['The variable declaration and odd integer constraint are correctly captured using integer type and modular arithmetic.', 'The existential statement for l1 is perfectly translated from natural language to Lean.', 'The equation l2 is mathematically correct but introduces a separate existential quantifier where the natural language implies the same k from l1 should be used.', \"The conclusion l3 is mathematically equivalent to l2 through factoring, but the separate existential quantification doesn't capture the deductive relationship implied in the natural language.\"]"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Now, either $k$ is even or $k$ is odd. If $k$ is even, then $k + 1$ is odd, and if $k$ is odd, then $k + 1$ is even. In either case, $k(k + 1)$ is even", "statement": "We assume:\n\u2022 $n$ is an odd integer [tc_1];\n\u2022 There exists an integer $k$ such that $n = 2k + 1$ [l1];\n\u2022 $n^2 = 4k^2 + 4k + 1$ [l2];\n\u2022 $n^2 = 4k(k + 1) + 1$ [l3].\nTherefore, we conclude:\n\u2022 The product $k(k + 1)$ is an even integer [l4].", "dependencies": ["tc_1", "l1", "l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1)\n  (l2 : \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1)\n  (l3 : \u2203 k : \u2124, n^2 = 4 * k * (k + 1) + 1) :\n  \u2203 m : \u2124, k * (k + 1) = 2 * m := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l4\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1)\n  (l2 : \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1)\n  (l3 : \u2203 k : \u2124, n^2 = 4 * k * (k + 1) + 1) :\n  \u2203 m : \u2124, k * (k + 1) = 2 * m := by\n  obtain \u27e8k, hk\u27e9 := l1\n  cases Int.even_or_odd k with\n  | inl h => \n    obtain \u27e8m, hm\u27e9 := h\n    use m * (2 * m + 1)\n    rw [hm]\n    ring\n  | inr h =>\n    obtain \u27e8m, hm\u27e9 := h\n    use (2 * m + 1) * m\n    rw [hm]\n    ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 17, "column": 8, "endLine": 17, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  k\ncase h\nk\u271d n : \u2124\ntc_1 : n % 2 = 1\nl2 : \u2203 k, n ^ 2 = 4 * k ^ 2 + 4 * k + 1\nl3 : \u2203 k, n ^ 2 = 4 * k * (k + 1) + 1\nk : \u2124\nhk : n = 2 * k + 1\nm : \u2124\nhm : k = m + m\n\u22a2 k\u271d * (k\u271d + 1) = 2 * (m * (2 * m + 1))"}, {"line": 22, "column": 8, "endLine": 22, "endColumn": 10, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  k\ncase h\nk\u271d n : \u2124\ntc_1 : n % 2 = 1\nl2 : \u2203 k, n ^ 2 = 4 * k ^ 2 + 4 * k + 1\nl3 : \u2203 k, n ^ 2 = 4 * k * (k + 1) + 1\nk : \u2124\nhk : n = 2 * k + 1\nm : \u2124\nhm : k = 2 * m + 1\n\u22a2 k\u271d * (k\u271d + 1) = 2 * ((2 * m + 1) * m)"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The oddness condition is correctly formalized using modular arithmetic with integer type declaration.", "The existential statement for k is perfectly captured with proper quantification.", "The equation is mathematically correct, but introduces a new existential quantifier instead of referring to the k from l1 as implied in natural language.", "Same issue as l2 - mathematically correct but creates a new local k instead of referencing the established k.", "The conclusion attempts to reference a free variable k that is not in scope, since the previous statements each bound their own local k variables. This creates a logical gap between the premises and conclusion.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The oddness condition is correctly formalized using modular arithmetic with integer type declaration.', 'The existential statement for k is perfectly captured with proper quantification.', 'The equation is mathematically correct, but introduces a new existential quantifier instead of referring to the k from l1 as implied in natural language.', 'Same issue as l2 - mathematically correct but creates a new local k instead of referencing the established k.', 'The conclusion attempts to reference a free variable k that is not in scope, since the previous statements each bound their own local k variables. This creates a logical gap between the premises and conclusion.']"}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "so $k(k + 1) = 2m$ for some integer $m$.", "statement": "We assume:\n\u2022 $n$ is an odd integer [tc_1];\n\u2022 There exists an integer $k$ such that $n = 2k + 1$ [l1];\n\u2022 $n^2 = 4k^2 + 4k + 1$ [l2];\n\u2022 $n^2 = 4k(k + 1) + 1$ [l3];\n\u2022 The product $k(k + 1)$ is an even integer [l4].\nTherefore, we conclude:\n\u2022 There exists an integer $m$ such that $k(k + 1) = 2m$ [l5].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1)\n  (l2 : \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1)\n  (l3 : \u2203 k : \u2124, n^2 = 4 * k * (k + 1) + 1)\n  (l4 : \u2203 m : \u2124, k * (k + 1) = 2 * m) :\n  \u2203 m : \u2124, k * (k + 1) = 2 * m := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l5\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1)\n  (l2 : \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1)\n  (l3 : \u2203 k : \u2124, n^2 = 4 * k * (k + 1) + 1)\n  (l4 : \u2203 m : \u2124, k * (k + 1) = 2 * m) :\n  \u2203 m : \u2124, k * (k + 1) = 2 * m := by\n  exact l4", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["tc_1 correctly represents 'n is an odd integer' using modular arithmetic (n % 2 = 1)", "l1 correctly captures the existential statement about k with proper mathematical notation", "l2 correctly represents the equation n\u00b2 = 4k\u00b2 + 4k + 1", "l3 correctly represents the factored form n\u00b2 = 4k(k + 1) + 1", "l4 has a major inconsistency: the natural language states 'k(k + 1) is an even integer' but the Lean formalization jumps directly to the existential form that should be the conclusion. Additionally, variable k is not properly scoped - it's bound within existential quantifiers in previous statements but used freely here.", "The conclusion itself is correctly stated, but suffers from the same variable scope issue where k is not properly bound from the previous existential statements."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"tc_1 correctly represents 'n is an odd integer' using modular arithmetic (n % 2 = 1)\", 'l1 correctly captures the existential statement about k with proper mathematical notation', 'l2 correctly represents the equation n\u00b2 = 4k\u00b2 + 4k + 1', 'l3 correctly represents the factored form n\u00b2 = 4k(k + 1) + 1', \"l4 has a major inconsistency: the natural language states 'k(k + 1) is an even integer' but the Lean formalization jumps directly to the existential form that should be the conclusion. Additionally, variable k is not properly scoped - it's bound within existential quantifiers in previous statements but used freely here.\", 'The conclusion itself is correctly stated, but suffers from the same variable scope issue where k is not properly bound from the previous existential statements.']"}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "Therefore $n^2 = 4(2m) + 1 = 8m + 1$,", "statement": "We assume:\n\u2022 $n$ is an odd integer [tc_1];\n\u2022 There exists an integer $k$ such that $n = 2k + 1$ [l1];\n\u2022 $n^2 = 4k^2 + 4k + 1$ [l2];\n\u2022 $n^2 = 4k(k + 1) + 1$ [l3];\n\u2022 The product $k(k + 1)$ is an even integer [l4];\n\u2022 There exists an integer $m$ such that $k(k + 1) = 2m$ [l5].\nTherefore, we conclude:\n\u2022 $n^2 = 8m + 1$ for the integer $m$ from l5 [l6].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1)\n  (l2 : \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1)\n  (l3 : \u2203 k : \u2124, n^2 = 4 * k * (k + 1) + 1)\n  (l4 : \u2203 m : \u2124, k * (k + 1) = 2 * m)\n  (l5 : \u2203 m : \u2124, k * (k + 1) = 2 * m) :\n  \u2203 k m : \u2124, n^2 = 8 * m + 1 := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma l6\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1)\n  (l2 : \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1)\n  (l3 : \u2203 k : \u2124, n^2 = 4 * k * (k + 1) + 1)\n  (l4 : \u2203 k : \u2124, \u2203 m : \u2124, k * (k + 1) = 2 * m)\n  (l5 : \u2203 k : \u2124, \u2203 m : \u2124, k * (k + 1) = 2 * m) :\n  \u2203 m : \u2124, n^2 = 8 * m + 1 := by\n  rcases l1 with \u27e8k, rfl\u27e9\n  rcases l4 with \u27e8k', \u27e8m, hm\u27e9\u27e9\n  have h : (2 * k + 1)^2 = 4 * k * (k + 1) + 1 := by ring\n  rw [h]\n  have : \u2203 m', k * (k + 1) = 2 * m' := by\n    use (k * (k + 1)) / 2\n    exact Int.mul_ediv_cancel' (Int.two_mul_ediv_two_of_even (even_mul_succ_self k))\n  rcases this with \u27e8m', hm'\u27e9\n  rw [hm']\n  use m'\n  ring", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 20, "column": 81, "endLine": 20, "endColumn": 82, "data": "application type mismatch\n  even_mul_succ_self k\nargument\n  k\nhas type\n  \u2124 : Type\nbut is expected to have type\n  \u2115 : Type"}, {"line": 20, "column": 31, "endLine": 20, "endColumn": 84, "data": "application type mismatch\n  Int.mul_ediv_cancel' (Int.two_mul_ediv_two_of_even ?m.4480)\nargument\n  Int.two_mul_ediv_two_of_even ?m.4480\nhas type\n  2 * (?m.3752 / 2) = ?m.3752 : Prop\nbut is expected to have type\n  ?m.3528 \u2223 ?m.3529 : Prop"}, {"line": 22, "column": 6, "endLine": 22, "endColumn": 9, "data": "tactic 'rewrite' failed, did not find instance of the pattern in the target expression\n  k * (k + 1)\ncase intro.intro.intro.intro\nl5 : \u2203 k m, k * (k + 1) = 2 * m\nk : \u2124\ntc_1 : (2 * k + 1) % 2 = 1\nl2 : \u2203 k_1, (2 * k + 1) ^ 2 = 4 * k_1 ^ 2 + 4 * k_1 + 1\nl3 : \u2203 k_1, (2 * k + 1) ^ 2 = 4 * k_1 * (k_1 + 1) + 1\nk' m : \u2124\nhm : k' * (k' + 1) = 2 * m\nh : (2 * k + 1) ^ 2 = 4 * k * (k + 1) + 1\nm' : \u2124\nhm' : k * (k + 1) = 2 * m'\n\u22a2 \u2203 m, 4 * k * (k + 1) + 1 = 8 * m + 1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1 correctly represents 'n is odd' using modular arithmetic", "l1 correctly captures the existential statement for odd number representation", "l2 has correct mathematical content but introduces separate existential quantifier for k instead of using the k from l1", "l3 has correct mathematical content but again introduces separate existential quantifier for k", "l4 is incorrectly formalized - it should state that k(k+1) is even (\u2203 k : \u2124, Even (k * (k + 1))), not introduce variable m. This represents l5 instead of l4", "l5 is identical to the incorrect l4 formalization, creating a duplicate instead of being the distinct statement it should be", "The conclusion has correct mathematical content but unnecessarily introduces existential quantifier for k, and the scope of variables is unclear", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"tc_1 correctly represents 'n is odd' using modular arithmetic\", 'l1 correctly captures the existential statement for odd number representation', 'l2 has correct mathematical content but introduces separate existential quantifier for k instead of using the k from l1', 'l3 has correct mathematical content but again introduces separate existential quantifier for k', 'l4 is incorrectly formalized - it should state that k(k+1) is even (\u2203 k : \u2124, Even (k * (k + 1))), not introduce variable m. This represents l5 instead of l4', 'l5 is identical to the incorrect l4 formalization, creating a duplicate instead of being the distinct statement it should be', 'The conclusion has correct mathematical content but unnecessarily introduces existential quantifier for k, and the scope of variables is unclear']"}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "which means $n^2 \\equiv 1 \\pmod{8}$.", "statement": "We assume:\n\u2022 $n$ is an odd integer [tc_1];\n\u2022 There exists an integer $k$ such that $n = 2k + 1$ [l1];\n\u2022 $n^2 = 4k^2 + 4k + 1$ [l2];\n\u2022 $n^2 = 4k(k + 1) + 1$ [l3];\n\u2022 The product $k(k + 1)$ is an even integer [l4];\n\u2022 There exists an integer $m$ such that $k(k + 1) = 2m$ [l5];\n\u2022 $n^2 = 8m + 1$ for some integer $m$ [l6].\nTherefore, we conclude:\n\u2022 $n^2 \\equiv 1 \\pmod{8}$ [ts_1].", "dependencies": ["tc_1", "l1", "l2", "l3", "l4", "l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1)\n  (l2 : \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1)\n  (l3 : \u2203 k : \u2124, n^2 = 4 * k * (k + 1) + 1)\n  (l4 : \u2203 m : \u2124, k * (k + 1) = 2 * m)\n  (l5 : \u2203 m : \u2124, k * (k + 1) = 2 * m)\n  (l6 : \u2203 k m : \u2124, n^2 = 8 * m + 1) :\n  n^2 \u2261 1 [ZMOD 8] := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nlemma ts_1\n  (n : \u2124)\n  (tc_1 : n % 2 = 1)\n  (l1 : \u2203 k : \u2124, n = 2 * k + 1)\n  (l2 : \u2203 k : \u2124, n^2 = 4 * k^2 + 4 * k + 1)\n  (l3 : \u2203 k : \u2124, n^2 = 4 * k * (k + 1) + 1)\n  (l4 : \u2203 k : \u2124, \u2203 m : \u2124, k * (k + 1) = 2 * m)\n  (l5 : \u2203 k : \u2124, \u2203 m : \u2124, k * (k + 1) = 2 * m)\n  (l6 : \u2203 k m : \u2124, n^2 = 8 * m + 1) :\n  n^2 \u2261 1 [ZMOD 8] := by\n  obtain \u27e8k, m, h\u27e9 := l6\n  rw [show n^2 \u2261 1 [ZMOD 8] \u2194 n^2 % 8 = 1 % 8 by rfl]\n  rw [h]\n  norm_num", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 14, "column": 22, "endLine": 18, "endColumn": 10, "data": "unsolved goals\ncase intro.intro\nn : \u2124\ntc_1 : n % 2 = 1\nl1 : \u2203 k, n = 2 * k + 1\nl2 : \u2203 k, n ^ 2 = 4 * k ^ 2 + 4 * k + 1\nl3 : \u2203 k, n ^ 2 = 4 * k * (k + 1) + 1\nl4 l5 : \u2203 k m, k * (k + 1) = 2 * m\nk m : \u2124\nh : n ^ 2 = 8 * m + 1\n\u22a2 (8 * m + 1) % 8 = 1"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["tc_1 correctly represents 'n is odd' using modular arithmetic", "l1 correctly captures the existential statement for odd number representation", "l2 correctly represents the algebraic expansion of n\u00b2", "l3 correctly represents the factored form of the expression", "l4 has a major issue: variable k is not properly bound since it was existentially quantified in previous statements, making this reference invalid", "l5 is identical to l4 and has the same scoping issue with variable k, plus it's redundant", "l6 correctly represents the final form n\u00b2 = 8m + 1 with proper existential quantification", "ts_1 correctly represents the modular arithmetic conclusion", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"tc_1 correctly represents 'n is odd' using modular arithmetic\", 'l1 correctly captures the existential statement for odd number representation', 'l2 correctly represents the algebraic expansion of n\u00b2', 'l3 correctly represents the factored form of the expression', 'l4 has a major issue: variable k is not properly bound since it was existentially quantified in previous statements, making this reference invalid', \"l5 is identical to l4 and has the same scoping issue with variable k, plus it's redundant\", 'l6 correctly represents the final form n\u00b2 = 8m + 1 with proper existential quantification', 'ts_1 correctly represents the modular arithmetic conclusion']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    