
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for all $a, b \\in \\mathbb{R}^{+}$, the following inequality holds: $4(a^3 + b^3) \\geq (a + b)^3$.

Proof: Expand $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$. Then $4(a^3+b^3) - (a+b)^3 = 4a^3+4b^3 - (a^3+3a^2b+3ab^2+b^3) = 3a^3 - 3a^2b - 3ab^2 + 3b^3 = a^3 - a^2b - ab^2 + b^3 = (a^2 - b^2)(a-b) = (a-b)^2(a+b) \geq 0$. Since $a+b>0$ and $(a-b)^2\ge 0$ for all positive $a,b$, the inequality holds: $4(a^3+b^3) \ge (a+b)^3$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for all $a, b \\in \\mathbb{R}^{+}$", "statement": "Premise:\n\u2022 a and b are positive real numbers ($a > 0, b > 0$) [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem_condition\nvariable (a b : \u211d) (ha : a > 0) (hb : b > 0)", "lean_pass": false, "error_msg": [{"line": 7, "column": 0, "endLine": 7, "endColumn": 17, "data": "unexpected identifier; expected command"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "Expand $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$.", "statement": "We assume:\n\u2022 a and b are real numbers (from tc_1) [tc_1]\nTherefore, we conclude:\n\u2022 $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (a b : \u211d) : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (a b : \u211d) : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3 := by\n  have h1 : (a + b)^3 = (a + b)^2 * (a + b) := by\n    ring_nf\n    <;>\n    simp [pow_two, pow_three]\n    <;>\n    ring_nf\n  \n  have h2 : (a + b)^2 = a^2 + 2*a*b + b^2 := by\n    have h2\u2081 : (a + b) ^ 2 = a ^ 2 + 2 * a * b + b ^ 2 := by\n      ring_nf\n    rw [h2\u2081]\n  \n  have h3 : (a + b)^3 = (a^2 + 2*a*b + b^2) * (a + b) := by\n    rw [h1]\n    rw [h2]\n    <;>\n    ring_nf\n    <;>\n    simp [pow_two, pow_three]\n    <;>\n    ring_nf\n  \n  have h4 : (a^2 + 2*a*b + b^2) * (a + b) = a^3 + 3*a^2*b + 3*a*b^2 + b^3 := by\n    have h4\u2081 : (a ^ 2 + 2 * a * b + b ^ 2) * (a + b) = a ^ 3 + 3 * a ^ 2 * b + 3 * a * b ^ 2 + b ^ 3 := by\n      ring_nf\n    rw [h4\u2081]\n    <;>\n    ring_nf\n  \n  have h5 : (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3 := by\n    calc\n      (a + b) ^ 3 = (a ^ 2 + 2 * a * b + b ^ 2) * (a + b) := by rw [h3]\n      _ = a ^ 3 + 3 * a ^ 2 * b + 3 * a * b ^ 2 + b ^ 3 := by rw [h4]\n  \n  rw [h5]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization perfectly captures the natural language statement. The variable types are correctly specified as real numbers (\u211d), and the mathematical identity (a+b)\u00b3 = a\u00b3 + 3a\u00b2b + 3ab\u00b2 + b\u00b3 is accurately represented with proper syntax. The logical structure as a universal theorem about real numbers is preserved. The only differences are notational (explicit multiplication symbols in Lean) which are necessary for proper parsing and do not change the mathematical meaning."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Then $4(a^3+b^3) - (a+b)^3 = 4a^3+4b^3 - (a^3+3a^2b+3ab^2+b^3) = 3a^3 - 3a^2b - 3ab^2 + 3b^3$", "statement": "We assume:\n\u2022 a and b are real numbers (from tc_1) [tc_1]\n\u2022 $(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$ [l1]\nTherefore, we conclude:\n\u2022 $4(a^3+b^3) - (a+b)^3 = 3a^3 - 3a^2b - 3ab^2 + 3b^3$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) :\n  4 * (a^3 + b^3) \u2265 (a + b)^3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) :\n  4 * (a^3 + b^3) \u2265 (a + b)^3 := by\n  have h_main : 4 * (a^3 + b^3) - (a + b)^3 = 3 * (a + b) * (a - b)^2 := by\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try nlinarith [sq_nonneg (a - b)]) <;>\n    (try ring_nf at *) <;>\n    (try nlinarith [sq_nonneg (a - b)])\n    <;>\n    linarith\n  \n  have h_nonneg : 3 * (a + b) * (a - b)^2 \u2265 0 := by\n    have h\u2081 : 0 \u2264 (a - b) ^ 2 := sq_nonneg (a - b)\n    have h\u2082 : 0 < a + b := by linarith\n    have h\u2083 : 0 \u2264 3 * (a + b) := by positivity\n    have h\u2084 : 0 \u2264 3 * (a + b) * (a - b) ^ 2 := by\n      nlinarith\n    linarith\n  \n  have h_final : 4 * (a^3 + b^3) \u2265 (a + b)^3 := by\n    have h\u2081 : 4 * (a ^ 3 + b ^ 3) - (a + b) ^ 3 \u2265 0 := by\n      linarith\n    linarith\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language describes an algebraic identity showing that 4(a\u00b3+b\u00b3) - (a+b)\u00b3 equals a specific expression, while the Lean formalization proves an inequality 4(a\u00b3+b\u00b3) \u2265 (a+b)\u00b3. This represents a fundamental change in the mathematical statement being proved - from an equality/identity to an inequality relationship. Additionally, the Lean version introduces positivity constraints (a > 0, b > 0) not mentioned in the natural language, and ignores the binomial expansion premise that was explicitly stated."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language describes an algebraic identity showing that 4(a\u00b3+b\u00b3) - (a+b)\u00b3 equals a specific expression, while the Lean formalization proves an inequality 4(a\u00b3+b\u00b3) \u2265 (a+b)\u00b3. This represents a fundamental change in the mathematical statement being proved - from an equality/identity to an inequality relationship. Additionally, the Lean version introduces positivity constraints (a > 0, b > 0) not mentioned in the natural language, and ignores the binomial expansion premise that was explicitly stated.']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "$3a^3 - 3a^2b - 3ab^2 + 3b^3 = (a^2 - b^2)(a-b)$", "statement": "We assume:\n\u2022 a and b are real numbers (from tc_1) [tc_1]\nTherefore, we conclude:\n\u2022 $3a^3 - 3a^2b - 3ab^2 + 3b^3 = (a^2 - b^2)(a-b)$ [l3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b : \u211d) :\n  3 * a^3 - 3 * a^2 * b - 3 * a * b^2 + 3 * b^3 = (a^2 - b^2) * (a - b) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b : \u211d) :\n  3 * a^3 - 3 * a^2 * b - 3 * a * b^2 + 3 * b^3 = (a^2 - b^2) * (a - b) := by\n  have h\u2081 : (a^2 - b^2) * (a - b) = a^3 - a^2 * b - a * b^2 + b^3 := by\n    ring_nf\n    <;>\n    linarith [sq_nonneg (a - b), sq_nonneg (a + b)]\n  \n  have h\u2082 : 3 * a^3 - 3 * a^2 * b - 3 * a * b^2 + 3 * b^3 = 3 * (a^3 - a^2 * b - a * b^2 + b^3) := by\n    ring_nf\n    <;>\n    linarith [sq_nonneg (a - b), sq_nonneg (a + b)]\n  \n  have h\u2083 : 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) = (a ^ 2 - b ^ 2) * (a - b) \u2192 a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3 = 0 := by\n    intro h\n    have h\u2084 : 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) = (a ^ 2 - b ^ 2) * (a - b) := h\n    have h\u2085 : (a ^ 2 - b ^ 2) * (a - b) = a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3 := h\u2081\n    have h\u2086 : 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) = a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3 := by linarith\n    have h\u2087 : a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3 = 0 := by linarith\n    exact h\u2087\n  \n  have h\u2084 : 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) = (a ^ 2 - b ^ 2) * (a - b) := by\n    have h\u2085 : 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = (a ^ 2 - b ^ 2) * (a - b) := by\n      -- We need to prove that 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = (a ^ 2 - b ^ 2) * (a - b)\n      -- Let's try to find a counterexample where this doesn't hold.\n      -- Take a = 1, b = 0:\n      -- LHS = 3 * 1 - 0 - 0 + 0 = 3\n      -- RHS = (1 - 0) * (1 - 0) = 1\n      -- 3 \u2260 1, so the statement is false.\n      -- However, we are supposed to prove it, which means we must have made a mistake in our reasoning.\n      -- Wait, maybe the original problem is not correctly stated, or perhaps it's missing some conditions.\n      -- Alternatively, perhaps the intended identity is different.\n      -- Let me check again:\n      -- 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3)\n      -- (a ^ 2 - b ^ 2) * (a - b) = a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3\n      -- So, the statement becomes 3 * X = X, where X = a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3.\n      -- This implies that X = 0, which is not always true.\n      -- Therefore, the statement as given is false.\n      -- But since we are trying to prove it, and it's false, we need to find another approach.\n      -- Maybe there's a typo in the problem statement, and it should be:\n      -- 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = 3 * (a ^ 2 - b ^ 2) * (a - b)\n      -- Or perhaps it should be:\n      -- a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3 = (a ^ 2 - b ^ 2) * (a - b)\n      -- In any case, as it stands, the statement is false, and we cannot prove it.\n      -- So, the best we can do is to use a sorry here, acknowledging that we cannot prove it.\n      sorry\n    have h\u2086 : 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) = 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 := by\n      ring_nf\n      <;>\n      linarith [sq_nonneg (a - b), sq_nonneg (a + b)]\n    linarith\n  \n  have h\u2085 : a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3 = 0 := by\n    have h\u2086 : 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) = (a ^ 2 - b ^ 2) * (a - b) := h\u2084\n    have h\u2087 : a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3 = 0 := h\u2083 h\u2086\n    exact h\u2087\n  \n  -- We need to prove that 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = (a ^ 2 - b ^ 2) * (a - b)\n  -- We know that 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) = (a ^ 2 - b ^ 2) * (a - b) from h\u2084\n  -- And we know that a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3 = 0 from h\u2085\n  -- So, 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) = 0\n  -- Therefore, (a ^ 2 - b ^ 2) * (a - b) = 0\n  -- But we need to prove that 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = (a ^ 2 - b ^ 2) * (a - b)\n  -- We can use h\u2082 to rewrite 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 as 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3)\n  -- And we know that 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) = (a ^ 2 - b ^ 2) * (a - b) from h\u2084\n  -- So, 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = (a ^ 2 - b ^ 2) * (a - b)\n  have h\u2086 : 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) := by\n    ring_nf\n    <;>\n    linarith [sq_nonneg (a - b), sq_nonneg (a + b)]\n  \n  have h\u2087 : 3 * (a ^ 3 - a ^ 2 * b - a * b ^ 2 + b ^ 3) = (a ^ 2 - b ^ 2) * (a - b) := by\n    linarith\n  \n  have h\u2088 : 3 * a ^ 3 - 3 * a ^ 2 * b - 3 * a * b ^ 2 + 3 * b ^ 3 = (a ^ 2 - b ^ 2) * (a - b) := by\n    linarith\n  \n  linarith", "lean_pass": true, "lean_verify": false, "error_msg": [], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization perfectly captures the natural language statement. The variable declarations match (a, b as real numbers), and the mathematical equation is identical in both versions, with Lean using explicit multiplication operators. While the equation itself appears to be mathematically incorrect (the coefficients don't match when the right side is expanded), both the natural language and Lean versions contain exactly the same statement, so the formalization is faithful to the source.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "NL statement", "error_report": "Formalization appears correct (score=1.0 > 0.6), and the prover could prove the NEGATION of the NL lemma. The NL statement is likely incorrect."}, "solved_negation": {"lean_verify": true, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3_negated :\n  \u00ac (\u2200 (a b : \u211d), 3 * a^3 - 3 * a^2 * b - 3 * a * b^2 + 3 * b^3 = (a^2 - b^2) * (a - b)) := by\n  intro h\n  have h\u2081 := h 2 1\n  norm_num at h\u2081\n  <;> linarith"}, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "$(a^2 - b^2)(a-b) = (a-b)^2(a+b)$", "statement": "We assume:\n\u2022 a and b are real numbers (from tc_1) [tc_1]\nTherefore, we conclude:\n\u2022 $(a^2 - b^2)(a-b) = (a-b)^2(a+b)$ [l4].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 (a b : \u211d) : (a^2 - b^2) * (a - b) = (a - b)^2 * (a + b) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 (a b : \u211d) : (a^2 - b^2) * (a - b) = (a - b)^2 * (a + b) := by\n  have h\u2081 : (a^2 - b^2) = (a - b) * (a + b) := by\n    have h\u2081 : (a - b) * (a + b) = a ^ 2 - b ^ 2 := by\n      ring\n    linarith\n  \n  have h\u2082 : (a^2 - b^2) * (a - b) = (a - b) * (a + b) * (a - b) := by\n    calc\n      (a ^ 2 - b ^ 2) * (a - b) = ((a - b) * (a + b)) * (a - b) := by rw [h\u2081]\n      _ = (a - b) * (a + b) * (a - b) := by ring\n      _ = (a - b) * (a + b) * (a - b) := by ring\n  \n  have h\u2083 : (a^2 - b^2) * (a - b) = (a - b)^2 * (a + b) := by\n    calc\n      (a ^ 2 - b ^ 2) * (a - b) = (a - b) * (a + b) * (a - b) := by rw [h\u2082]\n      _ = (a - b) * (a - b) * (a + b) := by ring\n      _ = (a - b) ^ 2 * (a + b) := by ring\n  \n  apply h\u2083", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures both the assumption that a and b are real numbers and the algebraic identity. The mathematical equation is identical in meaning, with only notational differences (multiplication symbols and exponentiation). The logical structure as a universal statement over real numbers is preserved."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Since $a+b>0$", "statement": "We assume:\n\u2022 a and b are positive real numbers ($a > 0, b > 0$) [tc_1]\nTherefore, we conclude:\n\u2022 $a+b > 0$ [l5].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) : 0 < a + b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) : 0 < a + b := by\n  have h_main : 0 < a + b := by\n    -- Use the fact that the sum of two positive numbers is positive\n    linarith\n  -- The result follows directly from the above step\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization perfectly captures the mathematical content and logical structure of the natural language statement. The variables a and b are correctly declared as real numbers, the positivity constraints are properly encoded as hypotheses (using equivalent notation 0 < a instead of a > 0), and the conclusion 0 < a + b correctly represents a + b > 0. The theorem structure appropriately models the assume-therefore logical flow from the natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "and $(a-b)^2\\ge 0$ for all positive $a,b$", "statement": "We assume:\n\u2022 a and b are real numbers (from tc_1) [tc_1]\nTherefore, we conclude:\n\u2022 $(a-b)^2 \\ge 0$ [l6].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 (a b : \u211d) (h : a > 0 \u2227 b > 0) : (a - b)^2 \u2265 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 (a b : \u211d) (h : a > 0 \u2227 b > 0) : (a - b)^2 \u2265 0 := by\n  have h_main : (a - b)^2 \u2265 0 := by\n    -- Use the fact that the square of any real number is non-negative.\n    nlinarith [sq_nonneg (a - b)]\n  \n  -- The main statement directly follows from the established fact.\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the natural language statement. While it includes an additional constraint (a > 0 \u2227 b > 0) not mentioned in the natural language, this extra condition is logically consistent and doesn't contradict the original statement. The variable declarations (a b : \u211d) properly match the assumption that a and b are real numbers, and the conclusion (a - b)^2 \u2265 0 is identical to the natural language version. The extra positivity constraint, though mathematically unnecessary for this particular conclusion, falls under acceptable additional conditions."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "$(a-b)^2(a+b) \\geq 0$", "statement": "We assume:\n\u2022 $a+b > 0$ [l5]\n\u2022 $(a-b)^2 \\ge 0$ [l6]\nTherefore, we conclude:\n\u2022 $(a-b)^2(a+b) \\ge 0$ [l7].", "dependencies": ["l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l7 (a b : \u211d) (l5 : a + b > 0) (l6 : (a - b)^2 \u2265 0) : (a - b)^2 * (a + b) \u2265 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l7 (a b : \u211d) (l5 : a + b > 0) (l6 : (a - b)^2 \u2265 0) : (a - b)^2 * (a + b) \u2265 0 := by\n  have h1 : a + b \u2265 0 := by\n    -- Since a + b > 0, it is also true that a + b \u2265 0.\n    linarith\n  \n  have h2 : (a - b)^2 * (a + b) \u2265 0 := by\n    -- The product of two non-negative numbers is non-negative.\n    have h3 : (a - b)^2 \u2265 0 := l6\n    have h4 : a + b \u2265 0 := h1\n    -- Using the fact that both factors are non-negative, their product is non-negative.\n    nlinarith\n  \n  -- The final result follows directly from h2.\n  exact h2", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The variables a and b are properly typed as real numbers, both assumptions l5 and l6 are accurately represented with their correct labels, and the conclusion l7 is semantically identical (with explicit multiplication notation). The logical structure of assumptions leading to a conclusion is properly maintained through the theorem format."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Since $a+b>0$ and $(a-b)^2\\ge 0$ for all positive $a,b$, the inequality holds: $4(a^3+b^3) \\ge (a+b)^3$.", "statement": "We assume:\n\u2022 $4(a^3+b^3) - (a+b)^3 = 3a^3 - 3a^2b - 3ab^2 + 3b^3$ [l2]\n\u2022 $3a^3 - 3a^2b - 3ab^2 + 3b^3 = (a^2 - b^2)(a-b)$ [l3]\n\u2022 $(a^2 - b^2)(a-b) = (a-b)^2(a+b)$ [l4]\n\u2022 $(a-b)^2(a+b) \\ge 0$ [l7]\nTherefore, we conclude:\n\u2022 $4(a^3+b^3) \\ge (a+b)^3$ [ts_1].", "dependencies": ["l2", "l3", "l4", "l7"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) :\n  4 * (a^3 + b^3) \u2265 (a + b)^3 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (a b : \u211d) (ha : 0 < a) (hb : 0 < b) :\n  4 * (a^3 + b^3) \u2265 (a + b)^3 := by\n  have h_main : 4 * (a^3 + b^3) - (a + b)^3 = 3 * (a + b) * (a - b)^2 := by\n    have h\u2081 : (a + b) ^ 3 = a ^ 3 + b ^ 3 + 3 * a * b * (a + b) := by\n      ring\n    have h\u2082 : 4 * (a ^ 3 + b ^ 3) - (a + b) ^ 3 = 3 * (a ^ 3 + b ^ 3) - 3 * a * b * (a + b) := by\n      linarith\n    have h\u2083 : 3 * (a ^ 3 + b ^ 3) - 3 * a * b * (a + b) = 3 * (a + b) * (a - b) ^ 2 := by\n      have h\u2084 : a ^ 3 + b ^ 3 = (a + b) * (a ^ 2 - a * b + b ^ 2) := by\n        ring\n      rw [h\u2084]\n      ring_nf\n      <;>\n      nlinarith [sq_nonneg (a - b), sq_nonneg (a + b)]\n    linarith\n  \n  have h_nonneg : 0 \u2264 3 * (a + b) * (a - b)^2 := by\n    have h\u2081 : 0 \u2264 (a - b) ^ 2 := sq_nonneg (a - b)\n    have h\u2082 : 0 < a + b := by linarith\n    have h\u2083 : 0 \u2264 3 * (a + b) := by positivity\n    have h\u2084 : 0 \u2264 3 * (a + b) * (a - b) ^ 2 := by\n      nlinarith\n    exact h\u2084\n  \n  have h_final : 4 * (a^3 + b^3) \u2265 (a + b)^3 := by\n    have h\u2081 : 4 * (a ^ 3 + b ^ 3) - (a + b) ^ 3 = 3 * (a + b) * (a - b) ^ 2 := h_main\n    have h\u2082 : 0 \u2264 3 * (a + b) * (a - b) ^ 2 := h_nonneg\n    have h\u2083 : 4 * (a ^ 3 + b ^ 3) - (a + b) ^ 3 \u2265 0 := by linarith\n    linarith\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The main theorem statement 4(a\u00b3+b\u00b3) \u2265 (a+b)\u00b3 is correctly captured in Lean. However, the Lean formalization adds positivity constraints (ha : 0 < a) (hb : 0 < b) that are not mentioned in the natural language. Additionally, while the natural language provides a complete algebraic proof with intermediate steps [l2]-[l7], the Lean formalization contains only 'by sorry' with no proof content. The added constraints are mathematically reasonable but represent a deviation from the original statement, and the missing proof structure means significant mathematical content from the natural language is not represented in the Lean code."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The main theorem statement 4(a\u00b3+b\u00b3) \u2265 (a+b)\u00b3 is correctly captured in Lean. However, the Lean formalization adds positivity constraints (ha : 0 < a) (hb : 0 < b) that are not mentioned in the natural language. Additionally, while the natural language provides a complete algebraic proof with intermediate steps [l2]-[l7], the Lean formalization contains only 'by sorry' with no proof content. The added constraints are mathematically reasonable but represent a deviation from the original statement, and the missing proof structure means significant mathematical content from the natural language is not represented in the Lean code.\"]"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#fa2c07", "highlight": {"background": "#eba0a0", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    