
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: If $a$ and $b$ are any two real numbers$,$ then
\begin{equation} \label{eq:1.1.4}
|a-b|\ge\big||a|-|b|\big|
\end{equation}
and
\begin{equation} \label{eq:1.1.5}
|a+b|\ge\big||a|-|b|\big|.
\end{equation}

Proof: Replacing $a$ by $a-b$ in \eqref{eq:1.1.3} yields
$$
|a|\le|a-b|+|b|,
$$
so
\begin{equation} \label{eq:1.1.6}
|a-b|\ge|a|-|b|.
\end{equation}
Interchanging $a$ and $b$ here yields
$$
|b-a|\ge|b|-|a|,
$$
which is equivalent to
\begin{equation} \label{eq:1.1.7}
|a-b|\ge|b|-|a|,
\end{equation}
since $|b-a|=|a-b|$. Since
$$
\big||a|-|b|\big|=
\left\{\casespace\begin{array}{l} |a|-|b|\mbox{\quad if \quad} |a|>|b|,\\[2\jot]
 |b|-|a|\mbox{\quad if \quad} |b|>|a|,
\end{array}\right.
$$
\eqref{eq:1.1.6} and \eqref{eq:1.1.7} imply \eqref{eq:1.1.4}. Replacing
$b$ by $-b$  in \eqref{eq:1.1.4} yields \eqref{eq:1.1.5}, since
$|-b|=|b|$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "If $a$ and $b$ are any two real numbers", "statement": "Premise:\n\u2022 $a$ and $b$ are any two real numbers [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_1 : \n  \u2200 (a b : \u211d), abs (a - b) \u2265 abs (abs a - abs b) \u2227 abs (a + b) \u2265 abs (abs a - abs b) := by sorry", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language only establishes that a and b are real numbers as a premise with no conclusions, but the Lean formalization introduces a complete theorem with specific inequalities involving absolute values (abs (a - b) \u2265 abs (abs a - abs b) \u2227 abs (a + b) \u2265 abs (abs a - abs b)) that are not mentioned in the natural language statement at all. This is a major inconsistency as the Lean version adds substantial mathematical content not present in the original statement."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language only establishes that a and b are real numbers as a premise with no conclusions, but the Lean formalization introduces a complete theorem with specific inequalities involving absolute values (abs (a - b) \u2265 abs (abs a - abs b) \u2227 abs (a + b) \u2265 abs (abs a - abs b)) that are not mentioned in the natural language statement at all. This is a major inconsistency as the Lean version adds substantial mathematical content not present in the original statement.']"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Replacing $a$ by $a-b$ in \\eqref{eq:1.1.3}", "statement": "Definition:\n\u2022 The proof relies on a previously established result, referenced as (1.1.3), which is the triangle inequality: for any real numbers $x, y$, $|x+y| \\le |x| + |y|$ [def_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem triangle_ineq : \u2200 x y : \u211d, |x + y| \u2264 |x| + |y| := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization uses universal quantification '\u2200 x y : \u211d' which correctly captures 'x and y are real numbers' in formal logic", "The triangle inequality expression is identical in both the natural language and Lean formalization"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Replacing $a$ by $a-b$ in \\eqref{eq:1.1.3} yields\n$$\n|a|\\le|a-b|+|b|,\n$$", "statement": "We assume:\n\u2022 $a$ and $b$ are real numbers [tc_1].\n\u2022 For any real numbers $x, y$, $|x+y| \\le |x| + |y|$ (Triangle Inequality) [def_1].\nTherefore, we conclude:\n\u2022 $|a| \\le |a-b|+|b|$ [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (a b : \u211d) (tc_1 : \u2200 (a b : \u211d), abs (a - b) \u2265 abs (abs a - abs b) \u2227 abs (a + b) \u2265 abs (abs a - abs b)) \n  (def_1 : \u2200 x y : \u211d, abs (x + y) \u2264 abs x + abs y) : \n  abs a \u2264 abs (a - b) + abs b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (a b : \u211d) (tc_1 : \u2200 (a b : \u211d), abs (a - b) \u2265 abs (abs a - abs b) \u2227 abs (a + b) \u2265 abs (abs a - abs b)) \n  (def_1 : \u2200 x y : \u211d, abs (x + y) \u2264 abs x + abs y) : \n  abs a \u2264 abs (a - b) + abs b := by\n  have h_main : abs a \u2264 abs (a - b) + abs b := by\n    have h\u2081 : abs a = abs ((a - b) + b) := by\n      ring_nf\n      <;> simp [abs_add, abs_sub_comm]\n      <;> ring_nf\n    rw [h\u2081]\n    have h\u2082 : abs ((a - b) + b) \u2264 abs (a - b) + abs b := def_1 (a - b) b\n    linarith\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language states that tc_1 represents the assumption that 'a and b are real numbers', but the Lean formalization defines tc_1 as a complex mathematical property involving reverse triangle inequalities. The variable declarations (a b : \u211d) correctly capture that a and b are real numbers, but tc_1 introduces additional mathematical constraints not mentioned in the natural language.", "The triangle inequality is perfectly captured in Lean. The natural language states '|x+y| \u2264 |x| + |y|' for any real numbers x, y, and the Lean formalization exactly matches this with '\u2200 x y : \u211d, abs (x + y) \u2264 abs x + abs y'.", "The conclusion is perfectly captured. The natural language states '|a| \u2264 |a-b|+|b|' and the Lean formalization exactly matches this with 'abs a \u2264 abs (a - b) + abs b'."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The natural language states that tc_1 represents the assumption that 'a and b are real numbers', but the Lean formalization defines tc_1 as a complex mathematical property involving reverse triangle inequalities. The variable declarations (a b : \u211d) correctly capture that a and b are real numbers, but tc_1 introduces additional mathematical constraints not mentioned in the natural language.\", \"The triangle inequality is perfectly captured in Lean. The natural language states '|x+y| \u2264 |x| + |y|' for any real numbers x, y, and the Lean formalization exactly matches this with '\u2200 x y : \u211d, abs (x + y) \u2264 abs x + abs y'.\", \"The conclusion is perfectly captured. The natural language states '|a| \u2264 |a-b|+|b|' and the Lean formalization exactly matches this with 'abs a \u2264 abs (a - b) + abs b'.\"]"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "so\n\\begin{equation} \\label{eq:1.1.6}\n|a-b|\\ge|a|-|b|.\n\\end{equation}", "statement": "We assume:\n\u2022 $a$ and $b$ are real numbers [tc_1].\n\u2022 $|a| \\le |a-b|+|b|$ [l1].\nTherefore, we conclude:\n\u2022 $|a-b| \\ge |a|-|b|$ [l2].", "dependencies": ["tc_1", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (a b : \u211d) \n  (tc_1 : \u2200 (a b : \u211d), abs (a - b) \u2265 abs (abs a - abs b) \u2227 abs (a + b) \u2265 abs (abs a - abs b))\n  (l1 : abs a \u2264 abs (a - b) + abs b) :\n  abs (a - b) \u2265 abs a - abs b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (a b : \u211d) \n  (tc_1 : \u2200 (a b : \u211d), abs (a - b) \u2265 abs (abs a - abs b) \u2227 abs (a + b) \u2265 abs (abs a - abs b))\n  (l1 : abs a \u2264 abs (a - b) + abs b) :\n  abs (a - b) \u2265 abs a - abs b := by\n  have h_main : abs a - abs b \u2264 abs (a - b) := by\n    have h2 : abs a \u2264 abs (a - b) + abs b := l1\n    -- Subtract abs b from both sides to get abs a - abs b \u2264 abs (a - b)\n    linarith [abs_nonneg (a - b), abs_nonneg b]\n  \n  -- Since abs a - abs b \u2264 abs (a - b), we can directly conclude the desired inequality.\n  linarith [abs_nonneg (a - b)]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language states that tc_1 refers to 'a and b are real numbers', but the Lean formalization assigns tc_1 to a triangle inequality statement '\u2200 (a b : \u211d), abs (a - b) \u2265 abs (abs a - abs b) \u2227 abs (a + b) \u2265 abs (abs a - abs b)' that is never mentioned in the natural language. This introduces contradicting logical content.", "The assumption l1 is correctly formalized as 'abs a \u2264 abs (a - b) + abs b', which perfectly matches the natural language statement '|a| \u2264 |a-b|+|b|'.", "The conclusion l2 is correctly formalized as 'abs (a - b) \u2265 abs a - abs b', which perfectly matches the natural language statement '|a-b| \u2265 |a|-|b|'."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The natural language states that tc_1 refers to 'a and b are real numbers', but the Lean formalization assigns tc_1 to a triangle inequality statement '\u2200 (a b : \u211d), abs (a - b) \u2265 abs (abs a - abs b) \u2227 abs (a + b) \u2265 abs (abs a - abs b)' that is never mentioned in the natural language. This introduces contradicting logical content.\", \"The assumption l1 is correctly formalized as 'abs a \u2264 abs (a - b) + abs b', which perfectly matches the natural language statement '|a| \u2264 |a-b|+|b|'.\", \"The conclusion l2 is correctly formalized as 'abs (a - b) \u2265 abs a - abs b', which perfectly matches the natural language statement '|a-b| \u2265 |a|-|b|'.\"]"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Interchanging $a$ and $b$ here yields\n$$\n|b-a|\\ge|b|-|a|,\n$$", "statement": "We assume:\n\u2022 $a$ and $b$ are real numbers [tc_1].\n\u2022 For any two real numbers $x, y$, $|x-y| \\ge |x|-|y|$ [l2].\nTherefore, we conclude:\n\u2022 $|b-a| \\ge |b|-|a|$ [l3].", "dependencies": ["tc_1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b : \u211d) \n  (l2 : \u2200 (x y : \u211d), abs (x - y) \u2265 abs x - abs y) :\n  abs (b - a) \u2265 abs b - abs a := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b : \u211d) \n  (l2 : \u2200 (x y : \u211d), abs (x - y) \u2265 abs x - abs y) :\n  abs (b - a) \u2265 abs b - abs a := by\n  have h_main : abs (b - a) \u2265 abs b - abs a := by\n    have h\u2081 : abs (b - a) \u2265 abs b - abs a := l2 b a\n    exact h\u2081\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify a and b as real numbers, matching the natural language statement", "The universal quantification and inequality structure perfectly captures the general assumption about absolute values", "The conclusion correctly instantiates the general lemma with variables b and a, preserving the exact mathematical relationship"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "since $|b-a|=|a-b|$", "statement": "We assume:\n\u2022 $a$ and $b$ are real numbers [tc_1].\nTherefore, we conclude:\n\u2022 $|b-a| = |a-b|$ [l4].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 (a b : \u211d) :\n  abs (b - a) = abs (a - b) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4 (a b : \u211d) :\n  abs (b - a) = abs (a - b) := by\n  have h_main : abs (a - b) = abs (b - a) := by\n    have h\u2081 : a - b = -(b - a) := by ring\n    rw [h\u2081]\n    rw [abs_neg]\n    <;>\n    simp [abs_sub_comm]\n    <;>\n    linarith\n  \n  have h_final : abs (b - a) = abs (a - b) := by\n    linarith\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations correctly capture that a and b are real numbers using Lean's real number type \u211d.", "The mathematical statement is perfectly translated with abs function representing absolute value and the equality relationship preserved exactly.", "The theorem structure appropriately formalizes the mathematical claim from the natural language, with the logical meaning fully preserved."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "which is equivalent to\n\\begin{equation} \\label{eq:1.1.7}\n|a-b|\\ge|b|-|a|,\n\\end{equation}", "statement": "We assume:\n\u2022 $a$ and $b$ are real numbers [tc_1].\n\u2022 $|b-a| \\ge |b|-|a|$ [l3].\n\u2022 $|b-a| = |a-b|$ [l4].\nTherefore, we conclude:\n\u2022 $|a-b| \\ge |b|-|a|$ [l5].", "dependencies": ["tc_1", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 (a b : \u211d) \n  (tc_1 : \u2200 (x y : \u211d), abs (x - y) \u2265 abs x - abs y)\n  (l3 : abs (b - a) \u2265 abs b - abs a)\n  (l4 : abs (b - a) = abs (a - b)) :\n  abs (a - b) \u2265 abs b - abs a := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 (a b : \u211d) \n  (tc_1 : \u2200 (x y : \u211d), abs (x - y) \u2265 abs x - abs y)\n  (l3 : abs (b - a) \u2265 abs b - abs a)\n  (l4 : abs (b - a) = abs (a - b)) :\n  abs (a - b) \u2265 abs b - abs a := by\n  have h_main : abs (a - b) \u2265 abs b - abs a := by\n    have h\u2081 : abs (a - b) = abs (b - a) := by\n      rw [l4]\n      <;>\n      simp [abs_sub_comm]\n      <;>\n      linarith\n    have h\u2082 : abs (b - a) \u2265 abs b - abs a := l3\n    linarith\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.8, "semantic_feedback": ["Variable declarations for real numbers a and b are correctly formalized.", "The natural language states a specific inequality for a and b, but Lean formalizes this as a universal statement for all real numbers. While mathematically equivalent in effect, this is a structural difference from the direct translation.", "The assumption l3 about |b-a| \u2265 |b|-|a| is perfectly captured.", "The equality |b-a| = |a-b| is correctly formalized.", "The conclusion |a-b| \u2265 |b|-|a| is perfectly captured."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_2": {"id": "def_2", "natural_language": "Since\n$$\n\\big||a|-|b|\\big|=\n\\left\\{\\casespace\\begin{array}{l} |a|-|b|\\mbox{\\quad if \\quad} |a|>|b|,\\\\[2\\jot]\n |b|-|a|\\mbox{\\quad if \\quad} |b|>|a|,\n\\end{array}\\right.\n$$", "statement": "Definition:\n\u2022 For any real number $x$, the absolute value $|x|$ is defined as $x$ if $x \\ge 0$ and $-x$ if $x < 0$. This implies that $||a|-|b||$ equals $|a|-|b|$ if $|a| \\ge |b|$, and $-(|a|-|b|) = |b|-|a|$ if $|a| < |b|$ [def_2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (def_2 : \u2200 a b : \u211d, \n  abs (abs a - abs b) = \n    if abs a \u2265 abs b then abs a - abs b else abs b - abs a)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization does not include the basic definition that |x| = x when x \u2265 0. This fundamental condition is completely missing.", "The Lean formalization does not include the basic definition that |x| = -x when x < 0. This fundamental condition is completely missing.", "The Lean formalization correctly captures that abs(abs a - abs b) = abs a - abs b when abs a \u2265 abs b.", "The Lean formalization correctly captures that abs(abs a - abs b) = abs b - abs a when abs a < abs b, which is equivalent to -(abs a - abs b)."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization does not include the basic definition that |x| = x when x \u2265 0. This fundamental condition is completely missing.', 'The Lean formalization does not include the basic definition that |x| = -x when x < 0. This fundamental condition is completely missing.', 'The Lean formalization correctly captures that abs(abs a - abs b) = abs a - abs b when abs a \u2265 abs b.', 'The Lean formalization correctly captures that abs(abs a - abs b) = abs b - abs a when abs a < abs b, which is equivalent to -(abs a - abs b).']"}, "type": "definition"}, "ts_1": {"id": "ts_1", "natural_language": "\\eqref{eq:1.1.6} and \\eqref{eq:1.1.7} imply \\eqref{eq:1.1.4}.", "statement": "We assume:\n\u2022 $a$ and $b$ are real numbers [tc_1].\n\u2022 $|a-b| \\ge |a|-|b|$ [l2].\n\u2022 $|a-b| \\ge |b|-|a|$ [l5].\n\u2022 The definition of absolute value [def_2].\nTherefore, we conclude:\n\u2022 $|a-b| \\ge ||a|-|b||$ [ts_1].", "dependencies": ["tc_1", "l2", "l5", "def_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (a b : \u211d) \n  (tc_1 : \u2200 (x y : \u211d), abs (x - y) \u2265 abs x - abs y) \n  (l2 : abs (a - b) \u2265 abs a - abs b) \n  (l5 : abs (a - b) \u2265 abs b - abs a) \n  (def_2 : \u2200 a b : \u211d, abs (abs a - abs b) = if abs a \u2265 abs b then abs a - abs b else abs b - abs a) :\n  abs (a - b) \u2265 abs (abs a - abs b) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (a b : \u211d) \n  (tc_1 : \u2200 (x y : \u211d), abs (x - y) \u2265 abs x - abs y) \n  (l2 : abs (a - b) \u2265 abs a - abs b) \n  (l5 : abs (a - b) \u2265 abs b - abs a) \n  (def_2 : \u2200 a b : \u211d, abs (abs a - abs b) = if abs a \u2265 abs b then abs a - abs b else abs b - abs a) :\n  abs (a - b) \u2265 abs (abs a - abs b) := by\n  have h_main : abs (a - b) \u2265 abs (abs a - abs b) := by\n    have h\u2081 : abs (abs a - abs b) = if abs a \u2265 abs b then abs a - abs b else abs b - abs a := by\n      apply def_2\n    rw [h\u2081]\n    split_ifs with h\n    \u00b7 -- Case: abs a \u2265 abs b\n      -- Here, the if statement evaluates to abs a - abs b\n      -- We need to show that abs (a - b) \u2265 abs a - abs b, which is given by l2\n      linarith\n    \u00b7 -- Case: abs a < abs b\n      -- Here, the if statement evaluates to abs b - abs a\n      -- We need to show that abs (a - b) \u2265 abs b - abs a, which is given by l5\n      have h\u2082 : abs a < abs b := by\n        by_contra h\u2082\n        -- If abs a \u2265 abs b, then we would have h : abs a \u2265 abs b, which contradicts the split_ifs condition\n        have h\u2083 : abs a \u2265 abs b := by linarith\n        contradiction\n      -- Use l5 to conclude the proof\n      linarith\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.8, "semantic_feedback": ["The natural language associates [tc_1] with declaring a and b as real numbers, but in Lean, tc_1 is formalized as a general theorem about absolute value inequalities for any real numbers. While the mathematical content is consistent, the labeling doesn't match the natural language description.", "The inequality |a-b| \u2265 |a|-|b| is correctly formalized as abs (a - b) \u2265 abs a - abs b.", "The inequality |a-b| \u2265 |b|-|a| is correctly formalized as abs (a - b) \u2265 abs b - abs a.", "The definition of absolute value is properly captured with the conditional expression that defines abs(|a|-|b|) based on which absolute value is larger.", "The conclusion |a-b| \u2265 ||a|-|b|| is correctly formalized as abs (a - b) \u2265 abs (abs a - abs b)."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}, "l6": {"id": "l6", "natural_language": "since\n$|-b|=|b|$", "statement": "We assume:\n\u2022 $b$ is a real number [tc_1].\nTherefore, we conclude:\n\u2022 $|-b| = |b|$ [l6].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 (b : \u211d) : abs (-b) = abs b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6 (b : \u211d) : abs (-b) = abs b := by\n  have h_main : abs (-b) = abs b := by\n    -- Consider the two cases for the sign of `b`\n    cases' le_or_lt 0 b with hb hb\n    \u00b7 -- Case 1: `b \u2265 0`\n      -- Since `b \u2265 0`, `-b \u2264 0`\n      have h\u2081 : abs (-b) = -(-b) := by\n        rw [abs_of_nonpos] <;> linarith\n      -- Simplify `-(-b)` to `b`\n      have h\u2082 : abs (-b) = b := by\n        rw [h\u2081]\n        <;> ring_nf\n        <;> linarith\n      -- Since `b \u2265 0`, `abs b = b`\n      have h\u2083 : abs b = b := by\n        rw [abs_of_nonneg hb]\n      -- Combine the results to get `abs (-b) = abs b`\n      linarith\n    \u00b7 -- Case 2: `b < 0`\n      -- Since `b < 0`, `-b > 0`\n      have h\u2081 : abs (-b) = -b := by\n        rw [abs_of_pos] <;> linarith\n      -- Since `b < 0`, `abs b = -b`\n      have h\u2082 : abs b = -b := by\n        rw [abs_of_neg hb]\n        <;> linarith\n      -- Combine the results to get `abs (-b) = abs b`\n      linarith\n  -- The main result follows directly from the cases above\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The assumption that b is a real number is properly declared as (b : \u211d), and the conclusion |-b| = |b| is accurately represented as abs (-b) = abs b. The use of 'abs' instead of vertical bar notation is standard Lean syntax for absolute value and maintains the same mathematical meaning."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_2": {"id": "ts_2", "natural_language": "Replacing\n$b$ by $-b$  in \\eqref{eq:1.1.4} yields \\eqref{eq:1.1.5}, since\n$|-b|=|b|$.", "statement": "We assume:\n\u2022 $a$ and $b$ are real numbers [tc_1].\n\u2022 For any two real numbers $x, y$, $|x-y| \\ge ||x|-|y||$ [ts_1].\n\u2022 For any real number $y$, $|-y| = |y|$ [l6].\nTherefore, we conclude:\n\u2022 $|a+b| \\ge ||a|-|b||$ [ts_2].", "dependencies": ["tc_1", "ts_1", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2 (a b : \u211d)\n  (ts_1 : \u2200 (x y : \u211d), abs (x - y) \u2265 abs (abs x - abs y))\n  (l6 : \u2200 (y : \u211d), abs (-y) = abs y) :\n  abs (a + b) \u2265 abs (abs a - abs b) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2 (a b : \u211d)\n  (ts_1 : \u2200 (x y : \u211d), abs (x - y) \u2265 abs (abs x - abs y))\n  (l6 : \u2200 (y : \u211d), abs (-y) = abs y) :\n  abs (a + b) \u2265 abs (abs a - abs b) := by\n  have h_main : abs (a + b) \u2265 abs (abs a - abs b) := by\n    have h1 : abs (a - (-b)) \u2265 abs (abs a - abs (-b)) := ts_1 a (-b)\n    have h2 : abs (a - (-b)) = abs (a + b) := by\n      ring_nf at h1 \u22a2\n      <;> simp_all [abs_sub_comm]\n      <;> linarith\n    have h3 : abs (abs a - abs (-b)) = abs (abs a - abs b) := by\n      have h4 : abs (-b) = abs b := l6 b\n      rw [h4]\n      <;>\n      simp_all\n      <;>\n      linarith\n    have h5 : abs (a + b) \u2265 abs (abs a - abs b) := by\n      calc\n        abs (a + b) = abs (a - (-b)) := by rw [h2]\n        _ \u2265 abs (abs a - abs (-b)) := h1\n        _ = abs (abs a - abs b) := by rw [h3]\n    exact h5\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify a and b as real numbers", "Assumption ts_1 is accurately formalized with proper universal quantification and nested absolute values", "Assumption l6 correctly captures the absolute value property for negation", "Conclusion ts_2 properly represents the target inequality with correct absolute value nesting", "Overall logical structure and theorem format correctly reflects the natural language reasoning"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "ts_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    