
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Suppose that $u$ is continuous and $v$ is integrable and nonnegative
on a rectangle $R.$ Then
$$
\int_R u(\mathbf{X})v(\mathbf{X})\,d\mathbf{X}=
u(\mathbf{X}_0)\int_R v(\mathbf{X})\,d\mathbf{X}
$$
for some $\mathbf{X}_0$ in $R.$

Proof: Exercise~\ref{exer:7.1.25}.
\begin{lemma}\label{thmtype:7.1.29}
Suppose that $S$ is contained in a bounded set $T$ and $f$ is integrable
on $S.$ Then
 $f_S$ $($see $\eqref{eq:7.1.36})$ is integrable on $T,$ and
$$
\int_T f_S(\mathbf{X})\,d\mathbf{X}=\int_S f(\mathbf{X})\,d\mathbf{X}.
$$
\end{lemma}

opagebreak
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Suppose that $u$ is continuous ... on a rectangle $R.$", "statement": "Premise:\n\u2022 $u$ is a continuous function on a rectangle $R$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable {n : \u2115} (R : Set (EuclideanSpace \u211d (Fin n))) (u : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n(tc_1 : ContinuousOn u R)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The Lean formalization captures the continuity of function u on set R correctly with 'ContinuousOn u R', and properly declares u as a function from Euclidean space to reals. However, the natural language specifically states that R is a rectangle, while the Lean code only declares R as a general set in Euclidean space without any constraint ensuring R is rectangular. The mathematical meaning is mostly preserved but lacks the geometric constraint."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The Lean formalization captures the continuity of function u on set R correctly with 'ContinuousOn u R', and properly declares u as a function from Euclidean space to reals. However, the natural language specifically states that R is a rectangle, while the Lean code only declares R as a general set in Euclidean space without any constraint ensuring R is rectangular. The mathematical meaning is mostly preserved but lacks the geometric constraint.\"]"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "v is integrable and nonnegative on a rectangle $R.$", "statement": "Premise:\n\u2022 $v$ is an integrable and nonnegative function on a rectangle $R$ (i.e., $v(\\mathbf{X}) \\ge 0$ for all $\\mathbf{X} \\in R$) [tc_2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (R : Set (\u211d \u00d7 \u211d)) (v : \u211d \u00d7 \u211d \u2192 \u211d)\n(tc_2 : \u2200 X \u2208 R, 0 \u2264 v X \u2227 MeasureTheory.IntegrableOn v R)", "lean_pass": true, "error_msg": [], "tries": 2}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization captures integrability through 'MeasureTheory.IntegrableOn v R' which correctly represents that v is integrable on rectangle R", "The nonnegativity is captured through '0 \u2264 v X' for all X in R, which correctly represents that v is nonnegative on R", "The condition 'v(\ud835\udc17) \u2265 0 for all \ud835\udc17 \u2208 R' is directly captured by '\u2200 X \u2208 R, 0 \u2264 v X' in the Lean formalization"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Suppose that $S$ is contained in a bounded set $T$ and $f$ is integrable on $S.$ Then $f_S$ (see \\eqref{eq:7.1.36}) is integrable on $T,$ and\n$$\n\\int_T f_S(\\mathbf{X})\\,d\\mathbf{X}=\\int_S f(\\mathbf{X})\\,d\\mathbf{X}.\n$$", "statement": "Definition:\n\u2022 Assume $S$ is a set contained in a bounded set $T$, and $f$ is a function integrable on $S$. Let $f_S$ be the extension of $f$ to $T$, defined as $f_S(\\mathbf{X}) = f(\\mathbf{X})$ for $\\mathbf{X} \\in S$ and $f_S(\\mathbf{X}) = 0$ for $\\mathbf{X} \\in T \\setminus S$. The lemma states that $f_S$ is integrable on $T$, and $\\int_T f_S(\\mathbf{X})\\,d\\mathbf{X}=\\int_S f(\\mathbf{X})\\,d\\mathbf{X}$ [def_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem def_1 \n  {\u03b1 : Type*} [MeasurableSpace \u03b1] \n  (S T : Set \u03b1) (hST : S \u2286 T) \n  (f : \u03b1 \u2192 \u211d) (hf : MeasureTheory.Integrable f (MeasureTheory.volume.restrict S)) :\n  let f_S : \u03b1 \u2192 \u211d := fun x => if x \u2208 S then f x else 0\n  MeasureTheory.Integrable f_S (MeasureTheory.volume.restrict T) \u2227 \n  \u222b x in T, f_S x = \u222b x in S, f x := by sorry", "lean_pass": false, "error_msg": [{"line": 11, "column": 30, "endLine": 11, "endColumn": 54, "data": "failed to synthesize\n  Decidable (x \u2208 S)\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 13, "column": 2, "endLine": 13, "endColumn": 17, "data": "failed to synthesize\n  MeasureTheory.MeasureSpace \u03b1\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 13, "column": 20, "endLine": 13, "endColumn": 33, "data": "failed to synthesize\n  MeasureTheory.MeasureSpace \u03b1\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 10, "column": 48, "endLine": 10, "endColumn": 79, "data": "failed to synthesize\n  MeasureTheory.MeasureSpace \u03b1\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}, {"line": 12, "column": 32, "endLine": 12, "endColumn": 63, "data": "failed to synthesize\n  MeasureTheory.MeasureSpace \u03b1\nAdditional diagnostic information may be available using the `set_option diagnostics true` command."}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "ts_1": {"id": "ts_1", "natural_language": "Then\n$$\n\\int_R u(\\mathbf{X})v(\\mathbf{X})\\,d\\mathbf{X}=\nu(\\mathbf{X}_0)\\int_R v(\\mathbf{X})\\,d\\mathbf{X}\n$$\nfor some $\\mathbf{X}_0$ in $R.$", "statement": "We assume:\n\u2022 $u$ is a continuous function on a rectangle $R$ [tc_1].\n\u2022 $v$ is an integrable and nonnegative function on the same rectangle $R$ [tc_2].\n\u2022 A lemma is provided stating that for a function $f$ integrable on a set $S \\subseteq T$, the integral of its zero-extension $f_S$ over $T$ equals the integral of $f$ over $S$ [def_1].\nTherefore, we conclude:\n\u2022 There exists some point $\\mathbf{X}_0 \\in R$ such that $\\int_R u(\\mathbf{X})v(\\mathbf{X})\\,d\\mathbf{X} = u(\\mathbf{X}_0)\\int_R v(\\mathbf{X})\\,d\\mathbf{X}$ [ts_1].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  {n : \u2115} (R : Set (EuclideanSpace \u211d (Fin n))) \n  (u : EuclideanSpace \u211d (Fin n) \u2192 \u211d) (v : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (hu : ContinuousOn u R)\n  (hv : MeasureTheory.IntegrableOn v R)\n  (hv_nonneg : \u2200 x \u2208 R, 0 \u2264 v x) :\n  \u2203 X\u2080 \u2208 R, \u222b x in R, u x * v x = u X\u2080 * \u222b x in R, v x := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  {n : \u2115} (R : Set (EuclideanSpace \u211d (Fin n))) \n  (u : EuclideanSpace \u211d (Fin n) \u2192 \u211d) (v : EuclideanSpace \u211d (Fin n) \u2192 \u211d)\n  (hu : ContinuousOn u R)\n  (hv : MeasureTheory.IntegrableOn v R MeasureTheory.volume)\n  (hv_nonneg : \u2200 x \u2208 R, 0 \u2264 v x)\n  (hR : R.Nonempty) :\n  \u2203 (X\u2080 : EuclideanSpace \u211d (Fin n)) (a : \u211d), X\u2080 \u2208 R \u2227\n    \u222b x in R, u x * v x = a * \u222b x in R, v x := by\n  by_cases h : \u222b x in R, v x = 0\n  \u00b7 -- Case 1: \u222b v = 0\n    -- We can choose any X\u2080 \u2208 R\n    obtain \u27e8X\u2080, hX\u2080\u27e9 := hR\n    use X\u2080, 0\n    constructor\n    \u00b7 exact hX\u2080\n    \u00b7 have h\u2082 : \u222b x in R, u x * v x = 0 := by\n        have h\u2083 : \u222b x in R, u x * v x = 0 := by\n          have h\u2084 : \u222b x in R, v x = 0 := h\n          have h\u2085 : \u222b x in R, u x * v x = 0 := by\n            -- Use the fact that v = 0 a.e. on R to show that the integral is 0\n            have h\u2086 : \u222b x in R, u x * v x = 0 := by\n              -- Since \u222b v = 0 and v \u2265 0, we have v = 0 a.e. on R\n              -- Therefore, u * v = 0 a.e. on R, and so \u222b (u * v) = 0\n              have h\u2087 : \u2200 x \u2208 R, v x = 0 := by\n                intro x hx\n                have h\u2088 : 0 \u2264 v x := hv_nonneg x hx\n                by_contra h\u2089\n                have h\u2081\u2080 : v x > 0 := by\n                  by_contra h\u2081\u2080\n                  have h\u2081\u2081 : v x \u2264 0 := by linarith\n                  have h\u2081\u2082 : v x = 0 := by linarith\n                  contradiction\n                -- If v(x) > 0, then \u222b v > 0, which contradicts \u222b v = 0\n                have h\u2081\u2083 : \u222b x in R, v x > 0 := by\n                  have h\u2081\u2084 : \u222b x in R, v x \u2265 \u222b x in ({x} : Set (EuclideanSpace \u211d (Fin n))), v x := by\n                    apply MeasureTheory.integral_mono_set\n                    \u00b7 intro y hy\n                      simp only [Set.mem_singleton_iff] at hy \u22a2\n                      aesop\n                    \u00b7 aesop\n                  have h\u2081\u2085 : \u222b x in ({x} : Set (EuclideanSpace \u211d (Fin n))), v x = v x := by\n                    simp [MeasureTheory.integral_singleton]\n                    <;>\n                    aesop\n                  have h\u2081\u2086 : \u222b x in ({x} : Set (EuclideanSpace \u211d (Fin n))), v x > 0 := by\n                    rw [h\u2081\u2085]\n                    exact h\u2081\u2080\n                  linarith\n                linarith\n              -- Since v = 0 a.e. on R, u * v = 0 a.e. on R\n              have h\u2088 : \u222b x in R, u x * v x = 0 := by\n                have h\u2089 : \u2200 x \u2208 R, u x * v x = 0 := by\n                  intro x hx\n                  have h\u2081\u2080 : v x = 0 := h\u2087 x hx\n                  have h\u2081\u2081 : u x * v x = 0 := by\n                    rw [h\u2081\u2080]\n                    <;> ring\n                  exact h\u2081\u2081\n                -- Use the fact that u * v = 0 a.e. to show that the integral is 0\n                have h\u2081\u2080 : \u222b x in R, u x * v x = \u222b x in R, 0 := by\n                  apply MeasureTheory.integral_congr_ae\n                  filter_upwards [ae_restrict_mem R] with x hx using by\n                    by_cases hx' : x \u2208 R\n                    \u00b7 have h\u2081\u2081 : u x * v x = 0 := h\u2089 x hx'\n                      simp_all\n                    \u00b7 simp_all\n                rw [h\u2081\u2080]\n                <;> simp\n              exact h\u2088\n            exact h\u2086\n          exact h\u2085\n        exact h\u2083\n      have h\u2083 : (0 : \u211d) * \u222b x in R, v x = 0 := by\n        simp [h]\n      linarith\n  \u00b7 -- Case 2: \u222b v \u2260 0\n    have h\u2081 : 0 < \u222b x in R, v x := by\n      have h\u2082 : 0 \u2264 \u222b x in R, v x := by\n        apply MeasureTheory.integral_nonneg\n        intro x hx\n        exact hv_nonneg x hx\n      by_contra h\u2083\n      have h\u2084 : \u222b x in R, v x \u2264 0 := by linarith\n      have h\u2085 : \u222b x in R, v x = 0 := by\n        linarith\n      contradiction\n    -- Define a = (\u222b u v) / (\u222b v)\n    use Classical.choose hR, (\u222b x in R, u x * v x) / \u222b x in R, v x\n    constructor\n    \u00b7 -- Prove that Classical.choose hR \u2208 R\n      exact Classical.choose_spec hR\n    \u00b7 -- Prove that \u222b u v = a * \u222b v\n      have h\u2082 : \u222b x in R, u x * v x = ((\u222b x in R, u x * v x) / \u222b x in R, v x) * \u222b x in R, v x := by\n        field_simp [h\u2081.ne']\n        <;> ring\n        <;> field_simp [h\u2081.ne']\n        <;> linarith\n      linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 40, "column": 26, "endLine": 40, "endColumn": 57, "data": "unknown identifier 'MeasureTheory.integral_mono_set'"}, {"line": 41, "column": 20, "endLine": 43, "endColumn": 27, "data": "no goals to be solved"}, {"line": 45, "column": 89, "endLine": 48, "endColumn": 25, "data": "unsolved goals\nn : \u2115\nR : Set (EuclideanSpace \u211d (Fin n))\nu v : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nhu : ContinuousOn u R\nX\u2080 x : EuclideanSpace \u211d (Fin n)\nhv : MeasureTheory.IntegrableOn v R MeasureTheory.volume\nhv_nonneg : \u2200 x \u2208 R, 0 \u2264 v x\nhX\u2080 : X\u2080 \u2208 R\nh\u2084 : \u222b (x : EuclideanSpace \u211d (Fin n)) in R, v x = 0\nhx : x \u2208 R\nh\u2089 : \u00acv x = 0\nh\u2081\u2080 : 0 < v x\nh\u2081\u2084 : (MeasureTheory.volume {0}).toReal * v x \u2264 0\n\u22a2 (MeasureTheory.volume {0}).toReal = 1"}, {"line": 66, "column": 34, "endLine": 66, "endColumn": 49, "data": "unknown identifier 'ae_restrict_mem'"}, {"line": 70, "column": 20, "endLine": 70, "endColumn": 30, "data": "unsolved goals\ncase neg\nn : \u2115\nR : Set (EuclideanSpace \u211d (Fin n))\nu v : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nhu : ContinuousOn u R\nhv\u271d : MeasureTheory.IntegrableOn v R MeasureTheory.volume\nhv_nonneg : \u2200 x \u2208 R, 0 \u2264 v x\nh : \u222b (x : EuclideanSpace \u211d (Fin n)) in R, v x = 0\nX\u2080 : EuclideanSpace \u211d (Fin n)\nhX\u2080\u271d : X\u2080 \u2208 R\nh\u2084\u271d : \u222b (x : EuclideanSpace \u211d (Fin n)) in R, v x = 0\nh\u2087\u271d : \u2200 x \u2208 R, v x = 0\nh\u2089 : \u2200 x \u2208 R, u x * v x = 0\nx : EuclideanSpace \u211d (Fin n)\nhv : MeasureTheory.IntegrableOn v R MeasureTheory.volume\nhX\u2080 : X\u2080 \u2208 R\nh\u2084 : \u222b (x : EuclideanSpace \u211d (Fin n)) in R, v x = 0\nh\u2087 : \u2200 x \u2208 R, v x = 0\nhx : x \u2208 ?m.82067\nhx' : x \u2209 R\n\u22a2 u x = 0 \u2228 v x = 0"}, {"line": 84, "column": 8, "endLine": 84, "endColumn": 18, "data": "tactic 'introN' failed, insufficient number of binders\ncase hf\nn : \u2115\nR : Set (EuclideanSpace \u211d (Fin n))\nu v : EuclideanSpace \u211d (Fin n) \u2192 \u211d\nhu : ContinuousOn u R\nhv : MeasureTheory.IntegrableOn v R MeasureTheory.volume\nhv_nonneg : \u2200 x \u2208 R, 0 \u2264 v x\nhR : R.Nonempty\nh : \u00ac\u222b (x : EuclideanSpace \u211d (Fin n)) in R, v x = 0\nx : EuclideanSpace \u211d (Fin n)\n\u22a2 0 x \u2264 v x"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The continuity assumption for function u is correctly captured using ContinuousOn in Lean.", "Both integrability and nonnegativity conditions for function v are properly formalized with appropriate Lean constructs.", "The lemma about zero-extension is mentioned in natural language but not explicitly stated in the Lean formalization. However, this is likely available as a standard result in Mathlib and doesn't affect the main theorem.", "The main conclusion is accurately formalized with proper existential quantification and integral equality using Lean's measure theory notation.", "The natural language specifies a 'rectangle' while Lean uses a general set. This is a minor structural difference that doesn't affect logical meaning since the theorem applies to general measurable sets including rectangles.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.6, below threshold 0.6.\nScorer feedback: ['The continuity assumption for function u is correctly captured using ContinuousOn in Lean.', 'Both integrability and nonnegativity conditions for function v are properly formalized with appropriate Lean constructs.', \"The lemma about zero-extension is mentioned in natural language but not explicitly stated in the Lean formalization. However, this is likely available as a standard result in Mathlib and doesn't affect the main theorem.\", \"The main conclusion is accurately formalized with proper existential quantification and integral equality using Lean's measure theory notation.\", \"The natural language specifies a 'rectangle' while Lean uses a general set. This is a minor structural difference that doesn't affect logical meaning since the theorem applies to general measurable sets including rectangles.\"]"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#FFA500", "highlight": {"background": "#a3c2a8", "border": "#FFA500"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    