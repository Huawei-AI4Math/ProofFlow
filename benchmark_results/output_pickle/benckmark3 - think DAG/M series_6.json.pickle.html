
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $(a_n)$ be a sequence such that $a_n = \frac{1}{n^2}$. Let $S_N = \sum_{n=1}^{N} a_n$ be the partial sum of the series. Then for any integer $N \geq 2$, the inequality $S_N \leq 2 - \frac{1}{N}$ holds.

Proof: The proof is by induction. First, for the base case $N=2$, we have $S_2 = \sum_{n=1}^{2} \frac{1}{n^2} = \frac{1}{1^2} + \frac{1}{2^2} = 1 + \frac{1}{4} = 1.25$. The right side of the inequality is $2-\frac{1}{2}=1.5$. Since $1.25 \leq 1.5$, the inequality holds for $N=2$. Now for the inductive step, assume the inequality holds for some integer $k \geq 2$, i.e., $S_k \leq 2 - \frac{1}{k}$. We want to show it holds for $k+1$, i.e., $S_{k+1} \leq 2 - \frac{1}{k+1}$. We know that $S_{k+1} = S_k + a_{k+1} = S_k + \frac{1}{(k+1)^2}$. From the inductive hypothesis, $S_k \leq 2 - \frac{1}{k}$. So we have $S_{k+1} \leq 2 - \frac{1}{k} + \frac{1}{(k+1)^2}$. To prove the inequality, we need to show that $2 - \frac{1}{k} + \frac{1}{(k+1)^2} \leq 2 - \frac{1}{k+1}$. This simplifies to showing that $-\frac{1}{k} + \frac{1}{(k+1)^2} \leq -\frac{1}{k+1}$. We can rearrange this to show $\frac{1}{k+1} - \frac{1}{k} + \frac{1}{(k+1)^2} \leq 0$. To combine these terms, we use a common denominator of $k(k+1)^2$. We get $\frac{k(k+1) - (k+1)^2 + k}{k(k+1)^2} \leq 0$. The numerator is $k^2+k-(k^2+2k+1)+k = k^2+k-k^2-2k-1+k = -1$. So we need to show that $\frac{-1}{k(k+1)^2} \leq 0$. Since $k \geq 2$, the denominator $k(k+1)^2$ is always positive. Therefore, the fraction is always negative, which is less than or equal to zero. Thus, the inequality holds for $k+1$ and by induction, for all $N \geq 2$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let (a_n) be a sequence such that a_n = \frac{1}{n^2}.", "statement": "Premise:\n\u2022 (a_n) is a sequence of real numbers such that for any integer n \u2265 1, a_n = 1/n^2 [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / n^2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.45, "semantic_feedback": ["The natural language refers to 'real numbers' and 'integers', but Lean uses natural numbers (\u2115). Since the condition n \u2265 1 is specified, natural numbers are sufficient and mathematically equivalent for this context, but it's not a direct translation of 'integers'", "The natural language specifies 'integer n \u2265 1' but Lean uses 'n : \u2115, n \u2265 1'. Natural numbers with n \u2265 1 are equivalent to positive integers in this context, but the type is different from what's literally stated", "The formula a_n = 1/n^2 is correctly captured in Lean as 'a n = 1 / n^2', but the domain difference (integers vs natural numbers) creates a minor inconsistency with the literal statement", "The conclusion that the sequence is defined with the explicit formula is perfectly captured by the Lean formalization"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.45, below threshold 0.6.\nScorer feedback: [\"The natural language refers to 'real numbers' and 'integers', but Lean uses natural numbers (\u2115). Since the condition n \u2265 1 is specified, natural numbers are sufficient and mathematically equivalent for this context, but it's not a direct translation of 'integers'\", \"The natural language specifies 'integer n \u2265 1' but Lean uses 'n : \u2115, n \u2265 1'. Natural numbers with n \u2265 1 are equivalent to positive integers in this context, but the type is different from what's literally stated\", \"The formula a_n = 1/n^2 is correctly captured in Lean as 'a n = 1 / n^2', but the domain difference (integers vs natural numbers) creates a minor inconsistency with the literal statement\", 'The conclusion that the sequence is defined with the explicit formula is perfectly captured by the Lean formalization']"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "Let S_N = \\sum_{n=1}^{N} a_n be the partial sum of the series.", "statement": "Premise:\n\u2022 (a_n) is a sequence of real numbers where for any integer n \u2265 1, a_n = 1/n^2 [tc_1].\n\u2022 S_N is the partial sum of the series (a_n), defined as S_N = \u2211_{n=1}^{N} a_n for any integer N \u2265 1 [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\n(tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / n^2)\ntheorem tc_2 : \u2200 N : \u2115, N \u2265 2 \u2192 \n  (\u2211 n in Finset.Icc 1 N, a n) \u2264 2 - 1 / N := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean theorem implicitly uses a sequence 'a' but doesn't explicitly declare it as a sequence of real numbers in the theorem statement", "The natural language states a_n = 1/n^2 as a given condition, but the Lean theorem doesn't include this definition - it just uses 'a n' without specifying what 'a' represents", "The natural language introduces S_N as a named partial sum, while Lean directly uses sum notation without the intermediate variable name", "The natural language specifies N \u2265 1 for the sum definition, but Lean requires N \u2265 2. Also, Lean uses Finset.Icc 1 N which is equivalent to the sum from 1 to N", "The natural language explicitly states there are no new conclusions (just definitions), but the Lean theorem proves a substantial inequality result about the partial sums"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean theorem implicitly uses a sequence 'a' but doesn't explicitly declare it as a sequence of real numbers in the theorem statement\", \"The natural language states a_n = 1/n^2 as a given condition, but the Lean theorem doesn't include this definition - it just uses 'a n' without specifying what 'a' represents\", 'The natural language introduces S_N as a named partial sum, while Lean directly uses sum notation without the intermediate variable name', 'The natural language specifies N \u2265 1 for the sum definition, but Lean requires N \u2265 2. Also, Lean uses Finset.Icc 1 N which is equivalent to the sum from 1 to N', 'The natural language explicitly states there are no new conclusions (just definitions), but the Lean theorem proves a substantial inequality result about the partial sums']"}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "for the base case N=2, we have S_2 = \\sum_{n=1}^{2} \frac{1}{n^2} = \frac{1}{1^2} + \frac{1}{2^2} = 1 + \frac{1}{4} = 1.25.", "statement": "We assume:\n\u2022 (a_n) is a sequence where a_n = 1/n^2 [tc_1].\n\u2022 S_N = \u2211_{n=1}^{N} a_n [tc_2].\nTherefore, we conclude:\n\u2022 For N=2, the partial sum S_2 is equal to 1.25 [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 : \n  let a : \u2115 \u2192 \u211d := fun n => 1 / n^2\n  let S : \u2115 \u2192 \u211d := fun N => \u2211 n in Finset.Icc 1 N, a n\n  S 2 = 1.25 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 : \n  let a : \u2115 \u2192 \u211d := fun n => 1 / n^2\n  let S : \u2115 \u2192 \u211d := fun N => \u2211 n in Finset.Icc 1 N, a n\n  S 2 = 1.25 := by\n  intro a S\n  have h_sum : S 2 = (1 : \u211d) + (1 : \u211d) / 4 := by\n    simp only [S, a]\n    norm_num [Finset.sum_Icc_succ_top]\n    <;>\n    (try norm_num) <;>\n    (try ring_nf) <;>\n    (try field_simp) <;>\n    (try norm_cast) <;>\n    (try ring_nf) <;>\n    (try norm_num)\n    <;>\n    rfl\n  \n  have h_final : S 2 = 1.25 := by\n    rw [h_sum]\n    norm_num\n    <;>\n    (try ring_nf) <;>\n    (try norm_num) <;>\n    (try linarith)\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The sequence definition a_n = 1/n\u00b2 is correctly formalized as 'fun n => 1 / n^2' with appropriate type annotations.", "The partial sum S_N = \u2211_{n=1}^{N} a_n is accurately represented using 'Finset.Icc 1 N' which correctly captures the summation from 1 to N inclusive.", "The conclusion that S_2 = 1.25 is directly and correctly stated in the theorem. The Lean formalization completely captures the mathematical content of the natural language statement."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "The right side of the inequality is 2-\frac{1}{2}=1.5. Since 1.25 \\leq 1.5, the inequality holds for N=2.", "statement": "We assume:\n\u2022 For N=2, the partial sum S_2 is equal to 1.25 [l1].\nTherefore, we conclude:\n\u2022 The inequality S_N \u2264 2 - 1/N holds for N=2, i.e., S_2 \u2264 2 - 1/2 [l2].", "dependencies": ["l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 \n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (h_a : \u2200 n, a n = 1 / n^2)\n  (h_S : \u2200 N, S N = \u2211 n in Finset.Icc 1 N, a n)\n  (l1 : S 2 = 1.25) :\n  S 2 \u2264 2 - 1/2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 \n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (h_a : \u2200 n, a n = 1 / n^2)\n  (h_S : \u2200 N, S N = \u2211 n in Finset.Icc 1 N, a n)\n  (l1 : S 2 = 1.25) :\n  S 2 \u2264 2 - 1/2 := by\n  have h_S2 : S 2 = 5 / 4 := by\n    have h1 : S 2 = \u2211 n in Finset.Icc 1 2, a n := by\n      rw [h_S]\n      <;> simp\n    rw [h1]\n    have h2 : \u2211 n in Finset.Icc 1 2, a n = a 1 + a 2 := by\n      simp [Finset.sum_Icc_succ_top]\n      <;> norm_num\n      <;> rfl\n    rw [h2]\n    have h3 : a 1 = 1 := by\n      rw [h_a]\n      norm_num\n    have h4 : a 2 = 1 / 4 := by\n      rw [h_a]\n      norm_num\n    rw [h3, h4]\n    norm_num\n    <;> simp_all [h_a]\n    <;> norm_num\n    <;> rfl\n  \n  have h_main : S 2 \u2264 2 - 1 / 2 := by\n    rw [h_S2]\n    norm_num\n    <;>\n    linarith\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the mathematical context with explicit sequence and partial sum definitions. The extra mathematical details (a_n = 1/n\u00b2 and sum formula) are logically consistent additions that provide necessary rigor.", "The given condition S_2 = 1.25 is exactly translated from natural language to Lean as 'l1 : S 2 = 1.25'.", "The conclusion S_2 \u2264 2 - 1/2 is precisely captured in the Lean theorem statement, maintaining the exact mathematical relationship described in natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_1": {"id": "def_1", "natural_language": "assume the inequality holds for some integer k \\geq 2, i.e., S_k \\leq 2 - \frac{1}{k}.", "statement": "Definition:\n\u2022 Let k be an integer such that k \u2265 2. We assume the inductive hypothesis: S_k \u2264 2 - 1/k [def_1].", "dependencies": ["tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem def_1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (ha : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / n^2)\n  (hS : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.Icc 1 N, a n) :\n  \u2200 k : \u2115, k \u2265 2 \u2192 S k \u2264 2 - 1 / k := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language specifies k as an integer, but Lean uses \u2115 (natural numbers). While natural numbers are a subset of integers, this is a type difference that could matter in some contexts.", "The condition k \u2265 2 is exactly the same in both versions.", "The natural language mentions assuming an inductive hypothesis, but the Lean formalization doesn't structure this as an inductive proof or assumption. Instead, it provides explicit definitions for a and S that weren't mentioned in the natural language statement. The Lean version treats this as a theorem to be proven rather than an assumed hypothesis.", "The conclusion S_k \u2264 2 - 1/k is identical in both the natural language and Lean formalization."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The natural language specifies k as an integer, but Lean uses \u2115 (natural numbers). While natural numbers are a subset of integers, this is a type difference that could matter in some contexts.', 'The condition k \u2265 2 is exactly the same in both versions.', \"The natural language mentions assuming an inductive hypothesis, but the Lean formalization doesn't structure this as an inductive proof or assumption. Instead, it provides explicit definitions for a and S that weren't mentioned in the natural language statement. The Lean version treats this as a theorem to be proven rather than an assumed hypothesis.\", 'The conclusion S_k \u2264 2 - 1/k is identical in both the natural language and Lean formalization.']"}, "type": "definition"}, "l3": {"id": "l3", "natural_language": "We know that S_{k+1} = S_k + a_{k+1} = S_k + \frac{1}{(k+1)^2}.", "statement": "We assume:\n\u2022 (a_n) is a sequence where a_n = 1/n^2 [tc_1].\n\u2022 S_N = \u2211_{n=1}^{N} a_n [tc_2].\nTherefore, we conclude:\n\u2022 For any integer k \u2265 1, S_{k+1} = S_k + 1/(k+1)^2 [l3].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 \n  (a : \u2115 \u2192 \u211d) \n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / n^2)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.Icc 1 N, a n) :\n  \u2200 k : \u2115, k \u2265 1 \u2192 S (k + 1) = S k + 1 / (k + 1)^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 \n  (a : \u2115 \u2192 \u211d) \n  (tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / n^2)\n  (S : \u2115 \u2192 \u211d)\n  (tc_2 : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.Icc 1 N, a n) :\n  \u2200 k : \u2115, k \u2265 1 \u2192 S (k + 1) = S k + 1 / (k + 1)^2 := by\n  intro k hk\n  have h_sum_split : \u2211 n in Finset.Icc 1 (k + 1), a n = \u2211 n in Finset.Icc 1 k, a n + a (k + 1) := by\n    have h\u2081 : \u2211 n in Finset.Icc 1 (k + 1), a n = \u2211 n in Finset.Icc 1 k, a n + a (k + 1) := by\n      have h\u2082 : Finset.Icc 1 (k + 1) = Finset.Icc 1 k \u222a {k + 1} := by\n        apply Finset.ext\n        intro x\n        simp [Finset.mem_Icc, Finset.mem_singleton]\n        <;>\n        (try omega) <;>\n        (try\n          {\n            cases' le_or_lt x k with h h <;>\n            simp_all [Nat.lt_succ_iff] <;>\n            (try omega) <;>\n            (try\n              {\n                omega\n              })\n          }) <;>\n        (try\n          {\n            omega\n          })\n      rw [h\u2082]\n      have h\u2083 : Disjoint (Finset.Icc 1 k) ({k + 1} : Finset \u2115) := by\n        apply Finset.disjoint_left.mpr\n        intro x hx\u2081 hx\u2082\n        simp [Finset.mem_Icc, Finset.mem_singleton] at hx\u2081 hx\u2082\n        <;> omega\n      rw [Finset.sum_union h\u2083]\n      <;> simp [Finset.sum_singleton]\n      <;>\n      (try omega)\n    exact h\u2081\n  \n  have h_S_k_plus_1 : S (k + 1) = \u2211 n in Finset.Icc 1 (k + 1), a n := by\n    have h\u2081 : (k + 1 : \u2115) \u2265 1 := by\n      omega\n    have h\u2082 : S (k + 1) = \u2211 n in Finset.Icc 1 (k + 1), a n := by\n      apply tc_2\n      <;> omega\n    rw [h\u2082]\n  \n  have h_S_k : S k = \u2211 n in Finset.Icc 1 k, a n := by\n    have h\u2081 : S k = \u2211 n in Finset.Icc 1 k, a n := by\n      have h\u2082 : k \u2265 1 := hk\n      have h\u2083 : S k = \u2211 n in Finset.Icc 1 k, a n := by\n        apply tc_2\n        <;> omega\n      exact h\u2083\n    exact h\u2081\n  \n  have h_a_k_plus_1 : a (k + 1) = 1 / (k + 1 : \u211d)^2 := by\n    have h\u2081 : (k + 1 : \u2115) \u2265 1 := by\n      omega\n    have h\u2082 : a (k + 1) = 1 / (k + 1 : \u2115)^2 := by\n      have h\u2083 : a (k + 1) = 1 / (k + 1 : \u2115)^2 := by\n        apply tc_1\n        <;> omega\n      exact h\u2083\n    have h\u2083 : (1 : \u211d) / (k + 1 : \u211d)^2 = (1 : \u211d) / (k + 1 : \u211d)^2 := by rfl\n    have h\u2084 : (a (k + 1) : \u211d) = (1 : \u211d) / (k + 1 : \u211d)^2 := by\n      norm_cast at h\u2082 \u22a2\n      <;>\n      (try simp_all [Nat.cast_add, Nat.cast_one, pow_two])\n      <;>\n      (try field_simp at h\u2082 \u22a2)\n      <;>\n      (try ring_nf at h\u2082 \u22a2)\n      <;>\n      (try norm_num at h\u2082 \u22a2)\n      <;>\n      (try simp_all [Nat.cast_add, Nat.cast_one, pow_two])\n      <;>\n      (try linarith)\n    exact_mod_cast h\u2084\n  \n  have h_main : S (k + 1) = S k + 1 / (k + 1 : \u211d)^2 := by\n    calc\n      S (k + 1) = \u2211 n in Finset.Icc 1 (k + 1), a n := by rw [h_S_k_plus_1]\n      _ = \u2211 n in Finset.Icc 1 k, a n + a (k + 1) := by rw [h_sum_split]\n      _ = S k + a (k + 1) := by rw [h_S_k]\n      _ = S k + (1 / (k + 1 : \u211d)^2) := by rw [h_a_k_plus_1]\n  \n  have h_final : S (k + 1) = S k + 1 / (k + 1 : \u211d)^2 := h_main\n  have h_cast : (1 : \u211d) / (k + 1 : \u211d)^2 = (1 : \u211d) / (k + 1 : \u211d)^2 := by rfl\n  -- Convert the final result to the required form by casting natural numbers to reals.\n  have h_cast_final : S (k + 1) = S k + 1 / (k + 1 : \u211d)^2 := by\n    simpa [h_cast] using h_final\n  -- Since Lean automatically handles the coercion from \u2115 to \u211d in the division, we can directly use the result.\n  have h_final_nat : S (k + 1) = S k + 1 / (k + 1 : \u2115)^2 := by\n    norm_cast at h_cast_final \u22a2\n    <;>\n    (try simp_all [Nat.cast_add, Nat.cast_one, pow_two]) <;>\n    (try field_simp at h_cast_final \u22a2) <;>\n    (try ring_nf at h_cast_final \u22a2) <;>\n    (try norm_num at h_cast_final \u22a2) <;>\n    (try linarith)\n  -- Simplify the expression to match the required form.\n  norm_num at h_final_nat \u22a2\n  <;>\n  (try simp_all [Nat.cast_add, Nat.cast_one, pow_two]) <;>\n  (try field_simp at h_final_nat \u22a2) <;>\n  (try ring_nf at h_final_nat \u22a2) <;>\n  (try norm_num at h_final_nat \u22a2) <;>\n  (try linarith)\n  <;>\n  (try assumption)", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The sequence definition is correctly formalized. The additional constraint n \u2265 1 is mathematically appropriate since 1/n^2 is undefined at n=0.", "The partial sum definition accurately captures the summation from 1 to N. The use of Finset.Icc correctly represents the closed interval [1,N], and the constraint N \u2265 1 is consistent with the mathematical context.", "The recurrence relation is perfectly captured. Using natural numbers instead of integers is appropriate given the constraint k \u2265 1, and the mathematical relationship S_{k+1} = S_k + 1/(k+1)^2 is exactly preserved."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "From the inductive hypothesis, S_k \\leq 2 - \frac{1}{k}$. So we have S_{k+1} \\leq 2 - \frac{1}{k} + \frac{1}{(k+1)^2}.", "statement": "We assume:\n\u2022 For an integer k \u2265 2, S_k \u2264 2 - 1/k [def_1].\n\u2022 For any integer k \u2265 1, S_{k+1} = S_k + 1/(k+1)^2 [l3].\nTherefore, we conclude:\n\u2022 For an integer k \u2265 2, S_{k+1} \u2264 2 - 1/k + 1/(k+1)^2 [l4].", "dependencies": ["def_1", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (ha : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n : \u211d)^2)\n  (hS : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.Icc 1 N, a n)\n  (def_1 : \u2200 k : \u2115, k \u2265 2 \u2192 S k \u2264 2 - 1 / (k : \u211d))\n  (l3 : \u2200 k : \u2115, k \u2265 1 \u2192 S (k + 1) = S k + 1 / ((k + 1) : \u211d)^2) :\n  \u2200 k : \u2115, k \u2265 2 \u2192 S (k + 1) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (ha : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n : \u211d)^2)\n  (hS : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.Icc 1 N, a n)\n  (def_1 : \u2200 k : \u2115, k \u2265 2 \u2192 S k \u2264 2 - 1 / (k : \u211d))\n  (l3 : \u2200 k : \u2115, k \u2265 1 \u2192 S (k + 1) = S k + 1 / ((k + 1) : \u211d)^2) :\n  \u2200 k : \u2115, k \u2265 2 \u2192 S (k + 1) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 := by\n  intro k hk\n  have h1 : S (k + 1) = S k + 1 / ((k + 1) : \u211d)^2 := by\n    have h1_1 : k \u2265 1 := by linarith\n    have h1_2 : S (k + 1) = S k + 1 / ((k + 1) : \u211d)^2 := l3 k h1_1\n    exact h1_2\n  \n  have h2 : S k \u2264 2 - 1 / (k : \u211d) := by\n    have h2_1 : k \u2265 2 := hk\n    have h2_2 : S k \u2264 2 - 1 / (k : \u211d) := def_1 k h2_1\n    exact h2_2\n  \n  have h3 : S (k + 1) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 := by\n    have h3_1 : S (k + 1) = S k + 1 / ((k + 1) : \u211d)^2 := h1\n    rw [h3_1]\n    have h3_2 : S k \u2264 2 - 1 / (k : \u211d) := h2\n    have h3_3 : (1 : \u211d) / ((k + 1 : \u2115) : \u211d)^2 \u2265 0 := by positivity\n    -- Use the fact that the additional term is non-negative to add it to both sides of the inequality\n    linarith\n  \n  exact h3", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The assumption def_1 (S_k \u2264 2 - 1/k for k \u2265 2) is correctly formalized with identical mathematical meaning", "The recurrence relation l3 (S_{k+1} = S_k + 1/(k+1)\u00b2) is perfectly captured in the Lean formalization", "The conclusion about S_{k+1} \u2264 2 - 1/k + 1/(k+1)\u00b2 is directly and accurately translated", "The additional definitions (ha, hS) in Lean provide consistent mathematical context without contradicting the natural language statements"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "To prove the inequality, we need to show that 2 - \frac{1}{k} + \frac{1}{(k+1)^2} \\leq 2 - \frac{1}{k+1}. This simplifies to showing that -\frac{1}{k} + \frac{1}{(k+1)^2} \\leq -\frac{1}{k+1}. We can rearrange this to show \frac{1}{k+1} - \frac{1}{k} + \frac{1}{(k+1)^2} \\leq 0. To combine these terms, we use a common denominator of k(k+1)^2. We get \frac{k(k+1) - (k+1)^2 + k}{k(k+1)^2} \\leq 0. The numerator is k^2+k-(k^2+2k+1)+k = k^2+k-k^2-2k-1+k = -1. So we need to show that \frac{-1}{k(k+1)^2} \\leq 0. Since k \\geq 2, the denominator k(k+1)^2 is always positive. Therefore, the fraction is always negative, which is less than or equal to zero.", "statement": "We assume:\n\u2022 k is an integer such that k \u2265 2 [def_1].\nTherefore, we conclude:\n\u2022 The inequality 2 - 1/k + 1/(k+1)^2 \u2264 2 - 1/(k+1) holds [l5].", "dependencies": ["def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 (k : \u2115) (hk : k \u2265 2) : \n  2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 \u2264 2 - 1 / ((k + 1) : \u211d) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 (k : \u2115) (hk : k \u2265 2) : \n  2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 \u2264 2 - 1 / ((k + 1) : \u211d) := by\n  have h\u2080 : (k : \u211d) \u2265 2 := by\n    exact_mod_cast hk\n  \n  have h\u2081 : (k : \u211d) + 1 > 0 := by\n    have h\u2081 : (k : \u211d) \u2265 2 := h\u2080\n    linarith\n  \n  have h\u2082 : (k : \u211d) > 0 := by\n    have h\u2082 : (k : \u211d) \u2265 2 := h\u2080\n    linarith\n  \n  have h\u2083 : (k : \u211d) * ((k : \u211d) + 1) > 0 := by\n    have h\u2083 : (k : \u211d) > 0 := h\u2082\n    have h\u2084 : (k : \u211d) + 1 > 0 := h\u2081\n    positivity\n  \n  have h\u2084 : (k : \u211d) * ((k : \u211d) + 1) ^ 2 > 0 := by\n    have h\u2084 : (k : \u211d) > 0 := h\u2082\n    have h\u2085 : (k : \u211d) + 1 > 0 := h\u2081\n    positivity\n  \n  have h\u2085 : (1 : \u211d) / (k : \u211d) - 1 / ((k + 1 : \u211d)) = 1 / ((k : \u211d) * ((k : \u211d) + 1)) := by\n    have h\u2085 : (k : \u211d) \u2260 0 := by linarith\n    have h\u2086 : (k : \u211d) + 1 \u2260 0 := by linarith\n    have h\u2087 : (k : \u211d) * ((k : \u211d) + 1) \u2260 0 := by positivity\n    field_simp [h\u2085, h\u2086, h\u2087]\n    <;> ring_nf\n    <;> field_simp [h\u2085, h\u2086, h\u2087]\n    <;> ring_nf\n    <;> linarith\n  \n  have h\u2086 : 1 / ((k + 1 : \u211d)) ^ 2 \u2264 1 / ((k : \u211d) * ((k : \u211d) + 1)) := by\n    have h\u2086 : 0 < (k : \u211d) := by positivity\n    have h\u2087 : 0 < (k : \u211d) + 1 := by positivity\n    have h\u2088 : 0 < (k : \u211d) * ((k : \u211d) + 1) := by positivity\n    have h\u2089 : 0 < ((k : \u211d) + 1) ^ 2 := by positivity\n    have h\u2081\u2080 : (k : \u211d) * ((k : \u211d) + 1) \u2264 ((k : \u211d) + 1) ^ 2 := by\n      nlinarith\n    have h\u2081\u2081 : 1 / ((k + 1 : \u211d)) ^ 2 \u2264 1 / ((k : \u211d) * ((k : \u211d) + 1)) := by\n      apply one_div_le_one_div_of_le\n      \u00b7 positivity\n      \u00b7 nlinarith\n    exact h\u2081\u2081\n  \n  have h\u2087 : 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 \u2264 2 - 1 / ((k + 1) : \u211d) := by\n    have h\u2087 : 1 / ((k + 1 : \u211d)) ^ 2 \u2264 1 / ((k : \u211d) * ((k : \u211d) + 1)) := h\u2086\n    have h\u2088 : (1 : \u211d) / (k : \u211d) - 1 / ((k + 1 : \u211d)) = 1 / ((k : \u211d) * ((k : \u211d) + 1)) := h\u2085\n    have h\u2089 : 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 \u2264 2 - 1 / ((k + 1) : \u211d) := by\n      have h\u2081\u2080 : 1 / ((k + 1 : \u211d)) ^ 2 \u2264 (1 : \u211d) / (k : \u211d) - 1 / ((k + 1 : \u211d)) := by\n        linarith\n      have h\u2081\u2081 : 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 \u2264 2 - 1 / ((k + 1) : \u211d) := by\n        -- Use the fact that 1 / ((k + 1 : \u211d)) ^ 2 \u2264 (1 : \u211d) / (k : \u211d) - 1 / ((k + 1 : \u211d))\n        -- to prove the main inequality by linear arithmetic\n        have h\u2081\u2082 : 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 \u2264 2 - 1 / (k : \u211d) + ((1 : \u211d) / (k : \u211d) - 1 / ((k + 1 : \u211d))) := by\n          linarith\n        have h\u2081\u2083 : 2 - 1 / (k : \u211d) + ((1 : \u211d) / (k : \u211d) - 1 / ((k + 1 : \u211d))) = 2 - 1 / ((k + 1) : \u211d) := by\n          ring_nf\n          <;> field_simp [h\u2082.ne', h\u2081.ne']\n          <;> ring_nf\n          <;> field_simp [h\u2082.ne', h\u2081.ne']\n          <;> linarith\n        linarith\n      exact h\u2081\u2081\n    exact h\u2089\n  \n  exact h\u2087", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.5, "semantic_feedback": ["The natural language specifies 'k is an integer' but Lean uses natural numbers (\u2115). However, given the constraint k \u2265 2, this difference doesn't affect the mathematical meaning since natural numbers \u2265 2 and integers \u2265 2 behave identically for this inequality.", "The inequality statement is perfectly captured in Lean, with appropriate type coercions to real numbers for the arithmetic operations. The mathematical structure and meaning are identical to the natural language."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.5, below threshold 0.6.\nScorer feedback: [\"The natural language specifies 'k is an integer' but Lean uses natural numbers (\u2115). However, given the constraint k \u2265 2, this difference doesn't affect the mathematical meaning since natural numbers \u2265 2 and integers \u2265 2 behave identically for this inequality.\", 'The inequality statement is perfectly captured in Lean, with appropriate type coercions to real numbers for the arithmetic operations. The mathematical structure and meaning are identical to the natural language.']"}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "Thus, the inequality holds for k+1", "statement": "We assume:\n\u2022 For an integer k \u2265 2, S_{k+1} \u2264 2 - 1/k + 1/(k+1)^2 [l4].\n\u2022 For an integer k \u2265 2, 2 - 1/k + 1/(k+1)^2 \u2264 2 - 1/(k+1) [l5].\nTherefore, we conclude:\n\u2022 For an integer k \u2265 2, S_{k+1} \u2264 2 - 1/(k+1) [l6].", "dependencies": ["l4", "l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (S : \u2115 \u2192 \u211d)\n  (k : \u2115)\n  (hk : k \u2265 2)\n  (l4 : S (k + 1) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2)\n  (l5 : 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 \u2264 2 - 1 / ((k + 1) : \u211d)) :\n  S (k + 1) \u2264 2 - 1 / ((k + 1) : \u211d) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (S : \u2115 \u2192 \u211d)\n  (k : \u2115)\n  (hk : k \u2265 2)\n  (l4 : S (k + 1) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2)\n  (l5 : 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 \u2264 2 - 1 / ((k + 1) : \u211d)) :\n  S (k + 1) \u2264 2 - 1 / ((k + 1) : \u211d) := by\n  have h_main : S (k + 1) \u2264 2 - 1 / ((k + 1) : \u211d) := by\n    have h\u2081 : S (k + 1) \u2264 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 := l4\n    have h\u2082 : 2 - 1 / (k : \u211d) + 1 / ((k + 1) : \u211d)^2 \u2264 2 - 1 / ((k + 1) : \u211d) := l5\n    -- Use the transitivity of the \u2264 relation to combine the two inequalities\n    linarith\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Function S and variable k with constraint k \u2265 2 are correctly declared and typed", "Assumption l4 is perfectly captured with correct mathematical expression and necessary type coercions", "Assumption l5 is correctly formalized with the exact same inequality", "Conclusion l6 matches the natural language statement precisely", "The overall logical structure (assumptions \u2192 conclusion via transitivity) is perfectly preserved"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "and by induction, for all N \\geq 2.", "statement": "We assume:\n\u2022 The inequality S_N \u2264 2 - 1/N holds for the base case N=2 [l2].\n\u2022 It is proven that for any integer k \u2265 2, if S_k \u2264 2 - 1/k [def_1], then S_{k+1} \u2264 2 - 1/(k+1) [l6].\nTherefore, we conclude:\n\u2022 For any integer N \u2265 2, the inequality S_N \u2264 2 - 1/N holds [ts_1].", "dependencies": ["l2", "def_1", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (ha : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n : \u211d)^2)\n  (hS : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.Icc 1 N, a n)\n  (l2 : S 2 \u2264 2 - 1/2)\n  (def_1 : \u2200 k : \u2115, k \u2265 2 \u2192 S k \u2264 2 - 1 / (k : \u211d))\n  (l6 : \u2200 k : \u2115, k \u2265 2 \u2192 S (k + 1) \u2264 2 - 1 / ((k + 1) : \u211d)) :\n  \u2200 N : \u2115, N \u2265 2 \u2192 S N \u2264 2 - 1 / (N : \u211d) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a : \u2115 \u2192 \u211d) (S : \u2115 \u2192 \u211d)\n  (ha : \u2200 n : \u2115, n \u2265 1 \u2192 a n = 1 / (n : \u211d)^2)\n  (hS : \u2200 N : \u2115, N \u2265 1 \u2192 S N = \u2211 n in Finset.Icc 1 N, a n)\n  (l2 : S 2 \u2264 2 - 1/2)\n  (def_1 : \u2200 k : \u2115, k \u2265 2 \u2192 S k \u2264 2 - 1 / (k : \u211d))\n  (l6 : \u2200 k : \u2115, k \u2265 2 \u2192 S (k + 1) \u2264 2 - 1 / ((k + 1) : \u211d)) :\n  \u2200 N : \u2115, N \u2265 2 \u2192 S N \u2264 2 - 1 / (N : \u211d) := by\n  intro N hN\n  have h : S N \u2264 2 - 1 / (N : \u211d) := by\n    have h\u2081 : S N \u2264 2 - 1 / (N : \u211d) := by\n      -- Apply def_1 with k := N\n      have h\u2082 : N \u2265 2 := hN\n      have h\u2083 : S N \u2264 2 - 1 / (N : \u211d) := def_1 N h\u2082\n      exact h\u2083\n    exact h\u2081\n  exact h", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The base case l2 is correctly formalized as S 2 \u2264 2 - 1/2, matching the natural language exactly.", "The inductive hypothesis def_1 is stated as a universal assumption rather than as the hypothesis part of an implication in the inductive step. This breaks the logical structure of induction.", "The inductive step l6 is stated as an independent universal statement rather than as the conclusion of an implication from the inductive hypothesis. The natural language clearly indicates this should be the 'then' part of an if-then statement.", "The final conclusion ts_1 correctly captures the desired result that S_N \u2264 2 - 1/N for all N \u2265 2."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The base case l2 is correctly formalized as S 2 \u2264 2 - 1/2, matching the natural language exactly.', 'The inductive hypothesis def_1 is stated as a universal assumption rather than as the hypothesis part of an implication in the inductive step. This breaks the logical structure of induction.', \"The inductive step l6 is stated as an independent universal statement rather than as the conclusion of an implication from the inductive hypothesis. The natural language clearly indicates this should be the 'then' part of an if-then statement.\", 'The final conclusion ts_1 correctly captures the desired result that S_N \u2264 2 - 1/N for all N \u2265 2.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    