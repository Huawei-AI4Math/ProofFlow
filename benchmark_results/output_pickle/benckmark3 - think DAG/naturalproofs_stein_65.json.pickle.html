
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Suppose~$n$ is the area of a right
triangle with rational side lengths $a, b, c$, with
$a\leq b<c$.
Let $A=(c/2)^2$.  Then
$$A-n, \quad A,\, 	ext{ and } A+n$$
are all perfect squares of rational numbers.

Proof: We have
\begin{eqnarray*}
a^2+b^2&=&c^2\\
\frac{1}{2}ab&=&n
\end{eqnarray*}
Add or subtract $4$ times the second equation to the first to get
\begin{eqnarray*}
a^2\pm2ab +b^2&=&c^2\pm 4n\\
(a\pm b)^2 &=& c^2 \pm 4n\\
\left(\frac{a\pm b}{2}\right)^2 &=&
   \left( \frac{c}{2}\right)^2 \pm n \\
  &=& A \pm n
\end{eqnarray*}
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Suppose~$n$ is the area of a right triangle with rational side lengths $a, b, c$, with $a\\leq b<c$.", "statement": "Premise:\n\u2022 Let there be a right triangle with rational side lengths $a, b, c$ such that $a,b,c \\in \\mathbb{Q}$, $a,b,c>0$ and $a \\le b < c$, and let $n$ be its area [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c n : \u211a)\n(tc_1 : a > 0 \u2227 b > 0 \u2227 c > 0 \u2227 a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 n = (1/2) * a * b)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization declares variables a, b, c which represent the triangle's side lengths, matching the natural language condition", "The Lean variables are declared as type \u211a (rationals), perfectly matching the condition that a, b, c \u2208 \u211a", "The Lean condition 'a > 0 \u2227 b > 0 \u2227 c > 0' exactly matches the natural language condition that all side lengths are positive", "The Lean condition 'a \u2264 b \u2227 b < c' exactly matches the ordering condition a \u2264 b < c from the natural language", "The Lean variable n and its definition in the conjunction captures that n represents the area of the triangle", "The Lean condition 'a^2 + b^2 = c^2' exactly matches the Pythagorean theorem conclusion from the natural language", "The Lean condition 'n = (1/2) * a * b' exactly matches the area formula conclusion n = \u00bdab from the natural language"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "Let $A=(c/2)^2$.", "statement": "Definition:\n\u2022 Given the hypotenuse $c$ of the right triangle from [tc_1], we define $A = (c/2)^2$ [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem def_1\n  (a b c n : \u211a)\n  (ha : a > 0) (hb : b > 0) (hc : c > 0)\n  (hab : a \u2264 b) (hbc : b < c)\n  (h_right : a^2 + b^2 = c^2)\n  (h_area : n = (1/2) * a * b) :\n  let A := (c/2)^2\n  (\u2203 r : \u211a, r^2 = A - n) \u2227 \n  (\u2203 r : \u211a, r^2 = A) \u2227 \n  (\u2203 r : \u211a, r^2 = A + n) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly captures the condition about having a right triangle with hypotenuse c. The additional constraints (positivity, ordering, Pythagorean theorem) are consistent with defining a proper right triangle and are acceptable extra details.", "The natural language presents a simple definition A = (c/2)^2, but the Lean formalization makes this a local definition within a theorem that concludes with complex statements about existence of square roots of A-n, A, and A+n. The Lean version goes far beyond the simple definition stated in the natural language."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly captures the condition about having a right triangle with hypotenuse c. The additional constraints (positivity, ordering, Pythagorean theorem) are consistent with defining a proper right triangle and are acceptable extra details.', 'The natural language presents a simple definition A = (c/2)^2, but the Lean formalization makes this a local definition within a theorem that concludes with complex statements about existence of square roots of A-n, A, and A+n. The Lean version goes far beyond the simple definition stated in the natural language.']"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "a^2+b^2&=&c^2", "statement": "We assume:\n\u2022 There is a right triangle with side lengths $a, b$ and hypotenuse $c$ [tc_1].\nTherefore, we conclude:\n\u2022 $a^2 + b^2 = c^2$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (a b c : \u211a)\n  (ha : a > 0) (hb : b > 0) (hc : c > 0)\n  (h_right : a^2 + b^2 = c^2) :\n  a^2 + b^2 = c^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (a b c : \u211a)\n  (ha : a > 0) (hb : b > 0) (hc : c > 0)\n  (h_right : a^2 + b^2 = c^2) :\n  a^2 + b^2 = c^2 := by\n  have h_main : a^2 + b^2 = c^2 := by\n    exact h_right\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization fundamentally misrepresents the logical structure of the natural language. The natural language presents a deductive argument where the Pythagorean theorem is derived from the premise of having a right triangle. However, the Lean code assumes the Pythagorean theorem as a hypothesis and then proves the same theorem, creating a tautological structure. The key logical component - that a\u00b2 + b\u00b2 = c\u00b2 follows from the geometric property of being a right triangle - is completely missing from the formalization."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization fundamentally misrepresents the logical structure of the natural language. The natural language presents a deductive argument where the Pythagorean theorem is derived from the premise of having a right triangle. However, the Lean code assumes the Pythagorean theorem as a hypothesis and then proves the same theorem, creating a tautological structure. The key logical component - that a\u00b2 + b\u00b2 = c\u00b2 follows from the geometric property of being a right triangle - is completely missing from the formalization.']"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "\\frac{1}{2}ab&=&n", "statement": "We assume:\n\u2022 There is a right triangle with non-hypotenuse side lengths $a, b$ and area $n$ [tc_1].\nTherefore, we conclude:\n\u2022 $n = \frac{1}{2}ab$ [l2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 \n  (a b c n : \u211a) \n  (ha : a > 0) (hb : b > 0) (hc : c > 0)\n  (h_order : a \u2264 b \u2227 b < c)\n  (h_right : a^2 + b^2 = c^2)\n  (h_area : n = (1/2) * a * b) :\n  n = (1/2) * a * b := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 \n  (a b c n : \u211a) \n  (ha : a > 0) (hb : b > 0) (hc : c > 0)\n  (h_order : a \u2264 b \u2227 b < c)\n  (h_right : a^2 + b^2 = c^2)\n  (h_area : n = (1/2) * a * b) :\n  n = (1/2) * a * b := by\n  have h_main : n = (1/2) * a * b := by\n    exact h_area\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The triangle setup with variables a, b (non-hypotenuse sides), c (hypotenuse), and area n is correctly formalized with appropriate type declarations and constraints.", "The right triangle property is properly captured using the Pythagorean theorem a\u00b2 + b\u00b2 = c\u00b2.", "The area relationship is correctly formalized as n = (1/2) * a * b in the hypothesis h_area.", "The conclusion n = (1/2) * a * b matches the natural language exactly.", "The logical structure is problematic: the Lean formalization assumes n = (1/2) * a * b as a hypothesis and then tries to prove the same statement as the conclusion, creating a tautology. The natural language suggests this should be derived from the triangle properties, not assumed."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The triangle setup with variables a, b (non-hypotenuse sides), c (hypotenuse), and area n is correctly formalized with appropriate type declarations and constraints.', 'The right triangle property is properly captured using the Pythagorean theorem a\u00b2 + b\u00b2 = c\u00b2.', 'The area relationship is correctly formalized as n = (1/2) * a * b in the hypothesis h_area.', 'The conclusion n = (1/2) * a * b matches the natural language exactly.', 'The logical structure is problematic: the Lean formalization assumes n = (1/2) * a * b as a hypothesis and then tries to prove the same statement as the conclusion, creating a tautology. The natural language suggests this should be derived from the triangle properties, not assumed.']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Add or subtract $4$ times the second equation to the first to get\n...\na^2\\pm2ab +b^2&=&c^2\\pm 4n", "statement": "We assume:\n\u2022 For rational numbers a, b, c, the equation $a^2 + b^2 = c^2$ holds [l1].\n\u2022 For rational numbers a, b and n, the equation $n = \frac{1}{2}ab$ holds [l2].\nTherefore, we conclude:\n\u2022 $a^2 \\pm 2ab + b^2 = c^2 \\pm 4n$ [l3].", "dependencies": ["l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (a b c n : \u211a)\n  (h1 : a^2 + b^2 = c^2)\n  (h2 : n = (1/2) * a * b) :\n  (a^2 + 2*a*b + b^2 = c^2 + 4*n) \u2227 (a^2 - 2*a*b + b^2 = c^2 - 4*n) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (a b c n : \u211a)\n  (h1 : a^2 + b^2 = c^2)\n  (h2 : n = (1/2) * a * b) :\n  (a^2 + 2*a*b + b^2 = c^2 + 4*n) \u2227 (a^2 - 2*a*b + b^2 = c^2 - 4*n) := by\n  have h4n : 4 * n = 2 * a * b := by\n    rw [h2]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try ring_nf at *) <;>\n    (try linarith) <;>\n    (try field_simp at *) <;>\n    (try norm_num at *) <;>\n    (try nlinarith)\n    <;>\n    ring_nf\n    <;>\n    norm_num\n    <;>\n    linarith\n  \n  have h3_left : a^2 + 2*a*b + b^2 = c^2 + 4*n := by\n    have h3 : a^2 + 2*a*b + b^2 = (a^2 + b^2) + 2*a*b := by ring\n    rw [h3]\n    have h4 : (a^2 + b^2) + 2*a*b = c^2 + 2*a*b := by\n      rw [h1]\n      <;> ring\n    rw [h4]\n    have h5 : c^2 + 2*a*b = c^2 + 4*n := by\n      have h6 : 2*a*b = 4*n := by\n        linarith\n      linarith\n    linarith\n  \n  have h3_right : a^2 - 2*a*b + b^2 = c^2 - 4*n := by\n    have h3 : a^2 - 2*a*b + b^2 = (a^2 + b^2) - 2*a*b := by ring\n    rw [h3]\n    have h4 : (a^2 + b^2) - 2*a*b = c^2 - 2*a*b := by\n      rw [h1]\n      <;> ring\n    rw [h4]\n    have h5 : c^2 - 2*a*b = c^2 - 4*n := by\n      have h6 : 2*a*b = 4*n := by\n        linarith\n      linarith\n    linarith\n  \n  exact \u27e8h3_left, h3_right\u27e9", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical content from the natural language. The variable declarations, assumptions h1 and h2, and the conclusion are all accurately represented. The expansion of the \u00b1 notation into explicit conjunction of both cases is the standard and correct approach in formal mathematics. All logical relationships and mathematical equations are preserved."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "(a\\pm b)^2 &=& c^2 \\pm 4n", "statement": "We assume:\n\u2022 For rational numbers a, b, c, n, the equation $a^2 \\pm 2ab + b^2 = c^2 \\pm 4n$ holds [l3].\nTherefore, we conclude:\n\u2022 $(a \\pm b)^2 = c^2 \\pm 4n$ [l4].", "dependencies": ["l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a b c n : \u211a)\n  (h1 : a^2 + b^2 = c^2)\n  (h2 : n = (1/2) * a * b) :\n  (a + b)^2 = c^2 + 4*n \u2227 (a - b)^2 = c^2 - 4*n := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a b c n : \u211a)\n  (h1 : a^2 + b^2 = c^2)\n  (h2 : n = (1/2) * a * b) :\n  (a + b)^2 = c^2 + 4*n \u2227 (a - b)^2 = c^2 - 4*n := by\n  have h3 : 4 * n = 2 * a * b := by\n    have h3\u2081 : 4 * n = 4 * ((1 / 2 : \u211a) * a * b) := by rw [h2]\n    have h3\u2082 : 4 * ((1 / 2 : \u211a) * a * b) = 2 * a * b := by\n      ring_nf\n      <;> norm_num\n      <;> linarith\n    linarith\n  \n  have h4 : (a + b)^2 = c^2 + 4*n := by\n    have h4\u2081 : (a + b)^2 = a^2 + 2*a*b + b^2 := by\n      ring\n    have h4\u2082 : a^2 + 2*a*b + b^2 = (a^2 + b^2) + 2*a*b := by\n      ring\n    have h4\u2083 : (a^2 + b^2) + 2*a*b = c^2 + 2*a*b := by\n      rw [h1]\n      <;> ring\n    have h4\u2084 : c^2 + 2*a*b = c^2 + 4*n := by\n      have h4\u2084\u2081 : 2 * a * b = 4 * n := by\n        linarith\n      linarith\n    calc\n      (a + b)^2 = a^2 + 2*a*b + b^2 := by rw [h4\u2081]\n      _ = (a^2 + b^2) + 2*a*b := by rw [h4\u2082]\n      _ = c^2 + 2*a*b := by rw [h4\u2083]\n      _ = c^2 + 4*n := by rw [h4\u2084]\n  \n  have h5 : (a - b)^2 = c^2 - 4*n := by\n    have h5\u2081 : (a - b)^2 = a^2 - 2*a*b + b^2 := by\n      ring\n    have h5\u2082 : a^2 - 2*a*b + b^2 = (a^2 + b^2) - 2*a*b := by\n      ring\n    have h5\u2083 : (a^2 + b^2) - 2*a*b = c^2 - 2*a*b := by\n      rw [h1]\n      <;> ring\n    have h5\u2084 : c^2 - 2*a*b = c^2 - 4*n := by\n      have h5\u2084\u2081 : 2 * a * b = 4 * n := by\n        linarith\n      linarith\n    calc\n      (a - b)^2 = a^2 - 2*a*b + b^2 := by rw [h5\u2081]\n      _ = (a^2 + b^2) - 2*a*b := by rw [h5\u2082]\n      _ = c^2 - 2*a*b := by rw [h5\u2083]\n      _ = c^2 - 4*n := by rw [h5\u2084]\n  \n  exact \u27e8h4, h5\u27e9", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly interprets the ambiguous natural language premise by providing specific mathematical constraints (h1 and h2) that make the stated relationship mathematically valid. The constraints a^2 + b^2 = c^2 and n = (1/2) * a * b are consistent with the general form a^2 \u00b1 2ab + b^2 = c^2 \u00b1 4n mentioned in natural language.", "The conclusion in Lean perfectly captures the natural language statement (a \u00b1 b)^2 = c^2 \u00b1 4n by explicitly stating both cases: (a + b)^2 = c^2 + 4*n and (a - b)^2 = c^2 - 4*n. The conjunction properly represents the \u00b1 notation from the natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "\\left(\\frac{a\\pm b}{2}\\right)^2 &=& \n   \\left( \\frac{c}{2}\\right)^2 \\pm n", "statement": "We assume:\n\u2022 For rational numbers a, b, c, n, the equation $(a \\pm b)^2 = c^2 \\pm 4n$ holds [l4].\nTherefore, we conclude:\n\u2022 $(\frac{a \\pm b}{2})^2 = (\frac{c}{2})^2 \\pm n$ [l5].", "dependencies": ["l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (a b c n : \u211a)\n  (h1 : (a + b)^2 = c^2 + 4*n)\n  (h2 : (a - b)^2 = c^2 - 4*n) :\n  ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (a b c n : \u211a)\n  (h1 : (a + b)^2 = c^2 + 4*n)\n  (h2 : (a - b)^2 = c^2 - 4*n) :\n  ((a + b) / 2)^2 = (c / 2)^2 + n \u2227 ((a - b) / 2)^2 = (c / 2)^2 - n := by\n  have h3 : ((a + b) / 2)^2 = (c / 2)^2 + n := by\n    have h3\u2081 : ((a + b) / 2) ^ 2 = (a + b) ^ 2 / 4 := by\n      ring\n    have h3\u2082 : (c / 2) ^ 2 + n = (c ^ 2 / 4 : \u211a) + n := by\n      ring\n    rw [h3\u2081]\n    have h3\u2083 : (a + b) ^ 2 = c ^ 2 + 4 * n := h1\n    rw [h3\u2083]\n    ring_nf at *\n    <;> linarith\n  \n  have h4 : ((a - b) / 2)^2 = (c / 2)^2 - n := by\n    have h4\u2081 : ((a - b) / 2) ^ 2 = (a - b) ^ 2 / 4 := by\n      ring\n    have h4\u2082 : (c / 2) ^ 2 - n = (c ^ 2 / 4 : \u211a) - n := by\n      ring\n    rw [h4\u2081]\n    have h4\u2083 : (a - b) ^ 2 = c ^ 2 - 4 * n := h2\n    rw [h4\u2083]\n    ring_nf at *\n    <;> linarith\n  \n  exact \u27e8h3, h4\u27e9", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all mathematical content from the natural language. The compact '\u00b1' notation in the natural language is appropriately expanded into explicit separate equations in Lean, which is the standard formal approach. All variable types, assumptions, and conclusions are accurately represented. The logical structure (assumption \u2192 conclusion) is preserved through the theorem format with hypotheses and goal."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "&=& A \\pm n", "statement": "We assume:\n\u2022 For rational numbers a, b, c, n, the equation $(\frac{a \\pm b}{2})^2 = (\frac{c}{2})^2 \\pm n$ holds [l5].\n\u2022 $A = (c/2)^2$ [def_1].\nTherefore, we conclude:\n\u2022 $(\frac{a \\pm b}{2})^2 = A \\pm n$ [l6].", "dependencies": ["l5", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (a b c n : \u211a)\n  (h1 : (a + b)^2 = c^2 + 4*n)\n  (h2 : (a - b)^2 = c^2 - 4*n)\n  (A : \u211a)\n  (hA : A = (c/2)^2) :\n  ((a + b) / 2)^2 = A + n \u2227 ((a - b) / 2)^2 = A - n := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (a b c n : \u211a)\n  (h1 : (a + b)^2 = c^2 + 4*n)\n  (h2 : (a - b)^2 = c^2 - 4*n)\n  (A : \u211a)\n  (hA : A = (c/2)^2) :\n  ((a + b) / 2)^2 = A + n \u2227 ((a - b) / 2)^2 = A - n := by\n  have h3 : ((a + b) / 2)^2 = A + n := by\n    have h3\u2081 : ((a + b) / 2)^2 = (a + b)^2 / 4 := by\n      ring_nf\n      <;> field_simp\n      <;> ring_nf\n    rw [h3\u2081]\n    have h3\u2082 : (a + b)^2 = c^2 + 4*n := h1\n    rw [h3\u2082]\n    have h3\u2083 : (c^2 + 4*n : \u211a) / 4 = (c/2)^2 + n := by\n      ring_nf\n      <;> field_simp\n      <;> ring_nf\n      <;> linarith\n    rw [h3\u2083]\n    have h3\u2084 : A = (c/2)^2 := hA\n    rw [h3\u2084]\n    <;> ring_nf\n  \n  have h4 : ((a - b) / 2)^2 = A - n := by\n    have h4\u2081 : ((a - b) / 2)^2 = (a - b)^2 / 4 := by\n      ring_nf\n      <;> field_simp\n      <;> ring_nf\n    rw [h4\u2081]\n    have h4\u2082 : (a - b)^2 = c^2 - 4*n := h2\n    rw [h4\u2082]\n    have h4\u2083 : (c^2 - 4*n : \u211a) / 4 = (c/2)^2 - n := by\n      ring_nf\n      <;> field_simp\n      <;> ring_nf\n      <;> linarith\n    rw [h4\u2083]\n    have h4\u2084 : A = (c/2)^2 := hA\n    rw [h4\u2084]\n    <;> ring_nf\n  \n  exact \u27e8h3, h4\u27e9", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all the mathematical content from the natural language. While the hypotheses h1 and h2 are expressed in a different algebraic form than the natural language premise [l5], they are mathematically equivalent (the Lean version multiplies both sides by 4 to clear denominators). The definition of A and the conclusion are perfectly aligned. The formalization is logically sound and complete."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "\\left(\\frac{a\\pm b}{2}\\right)^2 = ... = A \\pm n", "statement": "We assume:\n\u2022 $a, b$ are rational numbers [tc_1].\n\u2022 The equation $(\frac{a + b}{2})^2 = A + n$ holds [l6].\nTherefore, we conclude:\n\u2022 $A+n$ is a perfect square of a rational number [ts_1].", "dependencies": ["tc_1", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a b c n A : \u211a)\n  (h1 : a \u2264 b \u2227 b < c)\n  (h2 : a^2 + b^2 = c^2)\n  (h3 : n = (1/2) * a * b)\n  (h4 : A = (c/2)^2) :\n  (\u2203 q : \u211a, A - n = q^2) \u2227 (\u2203 q : \u211a, A = q^2) \u2227 (\u2203 q : \u211a, A + n = q^2) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a b c n A : \u211a)\n  (h1 : a \u2264 b \u2227 b < c)\n  (h2 : a^2 + b^2 = c^2)\n  (h3 : n = (1/2) * a * b)\n  (h4 : A = (c/2)^2) :\n  (\u2203 q : \u211a, A - n = q^2) \u2227 (\u2203 q : \u211a, A = q^2) \u2227 (\u2203 q : \u211a, A + n = q^2) := by\n  have h5 : A + n = ((a + b)/2)^2 := by\n    rw [h4, h3]\n    have h5\u2081 : (c / 2 : \u211a) ^ 2 + (1 / 2 : \u211a) * a * b = ((a + b) / 2 : \u211a) ^ 2 := by\n      have h5\u2082 : c ^ 2 = a ^ 2 + b ^ 2 := by\n        linarith\n      have h5\u2083 : (c : \u211a) ^ 2 = a ^ 2 + b ^ 2 := by\n        norm_cast at h5\u2082 \u22a2 <;> linarith\n      field_simp [pow_two]\n      ring_nf at h5\u2083 \u22a2\n      nlinarith [sq_nonneg (a - b)]\n    linarith\n  \n  have h6 : A - n = ((a - b)/2)^2 := by\n    rw [h4, h3]\n    have h6\u2081 : (c / 2 : \u211a) ^ 2 - (1 / 2 : \u211a) * a * b = ((a - b) / 2 : \u211a) ^ 2 := by\n      have h6\u2082 : c ^ 2 = a ^ 2 + b ^ 2 := by\n        linarith\n      have h6\u2083 : (c : \u211a) ^ 2 = a ^ 2 + b ^ 2 := by\n        norm_cast at h6\u2082 \u22a2 <;> linarith\n      field_simp [pow_two]\n      ring_nf at h6\u2083 \u22a2\n      nlinarith [sq_nonneg (a - b)]\n    linarith\n  \n  have h7 : A = (c/2)^2 := by\n    rw [h4]\n    <;> ring_nf\n  \n  have h8 : (\u2203 q : \u211a, A - n = q^2) \u2227 (\u2203 q : \u211a, A = q^2) \u2227 (\u2203 q : \u211a, A + n = q^2) := by\n    refine' \u27e8\u27e8(a - b) / 2, _\u27e9, \u27e8c / 2, _\u27e9, \u27e8(a + b) / 2, _\u27e9\u27e9\n    \u00b7 -- Prove A - n = ((a - b)/2)^2\n      rw [h6]\n      <;> ring_nf\n    \u00b7 -- Prove A = (c/2)^2\n      rw [h7]\n      <;> ring_nf\n    \u00b7 -- Prove A + n = ((a + b)/2)^2\n      rw [h5]\n      <;> ring_nf\n  \n  exact h8", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations correctly include a, b as rationals. Extra variables c, n, A are acceptable additions.", "The key premise equation (a+b)/2)^2 = A + n from the natural language is completely missing from the Lean formalization. Instead, the Lean code introduces entirely different hypotheses about Pythagorean triples.", "The conclusion about A+n being a perfect square is correctly captured as \u2203 q : \u211a, A + n = q^2.", "The Lean formalization introduces additional hypotheses not mentioned in natural language, but this is acceptable as extra context.", "The Lean formalization proves additional conclusions beyond what's stated in natural language, but this is acceptable as extra results."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['Variable declarations correctly include a, b as rationals. Extra variables c, n, A are acceptable additions.', 'The key premise equation (a+b)/2)^2 = A + n from the natural language is completely missing from the Lean formalization. Instead, the Lean code introduces entirely different hypotheses about Pythagorean triples.', 'The conclusion about A+n being a perfect square is correctly captured as \u2203 q : \u211a, A + n = q^2.', 'The Lean formalization introduces additional hypotheses not mentioned in natural language, but this is acceptable as extra context.', \"The Lean formalization proves additional conclusions beyond what's stated in natural language, but this is acceptable as extra results.\"]"}, "solved_negation": null, "type": "solution"}, "ts_2": {"id": "ts_2", "natural_language": "\\left(\\frac{a\\pm b}{2}\\right)^2 = ... = A \\pm n", "statement": "We assume:\n\u2022 $a, b$ are rational numbers [tc_1].\n\u2022 The equation $(\frac{a - b}{2})^2 = A - n$ holds [l6].\nTherefore, we conclude:\n\u2022 $A-n$ is a perfect square of a rational number [ts_2].", "dependencies": ["tc_1", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2\n  (a b c n A : \u211a)\n  (tc_1 : a > 0 \u2227 b > 0 \u2227 c > 0 \u2227 a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 n = (1/2) * a * b)\n  (l6 : ((a + b) / 2)^2 = A + n \u2227 ((a - b) / 2)^2 = A - n) :\n  \u2203 q : \u211a, q^2 = A - n := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_2\n  (a b c n A : \u211a)\n  (tc_1 : a > 0 \u2227 b > 0 \u2227 c > 0 \u2227 a \u2264 b \u2227 b < c \u2227 a^2 + b^2 = c^2 \u2227 n = (1/2) * a * b)\n  (l6 : ((a + b) / 2)^2 = A + n \u2227 ((a - b) / 2)^2 = A - n) :\n  \u2203 q : \u211a, q^2 = A - n := by\n  have h_main : \u2203 (q : \u211a), q^2 = A - n := by\n    refine' \u27e8(a - b) / 2, _\u27e9\n    have h\u2081 : ((a - b) / 2 : \u211a) ^ 2 = A - n := by\n      -- Extract the second part of the conjunction in l6\n      have h\u2082 : ((a - b) / 2 : \u211a) ^ 2 = A - n := l6.2\n      exact h\u2082\n    -- The square of (a - b)/2 is A - n by the given condition\n    exact h\u2081\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.75, "semantic_feedback": ["Variable type declarations correctly capture the rational number requirement for a, b, with acceptable additional variables c, n, A.", "The key equation component has a structural difference - natural language mentions only ((a-b)/2)^2 = A-n, while Lean formalization includes this as part of a conjunction with ((a+b)/2)^2 = A+n. This adds logical content not present in the natural language statement.", "The tc_1 condition in Lean provides additional Pythagorean triple constraints that are referenced but not specified in natural language - this is acceptable extra detail.", "The conclusion perfectly matches - both express that A-n is a perfect square of a rational number using equivalent formulations."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}, "ts_3": {"id": "ts_3", "natural_language": "Let $A=(c/2)^2$.", "statement": "We assume:\n\u2022 $c$ is a rational number [tc_1].\n\u2022 $A = (c/2)^2$ [def_1].\nTherefore, we conclude:\n\u2022 $A$ is a perfect square of a rational number [ts_3].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem theorem_1\n  (a b c n : \u211a)\n  (ha : a > 0) (hb : b > 0) (hc : c > 0)\n  (hab : a \u2264 b) (hbc : b < c)\n  (h_right : a^2 + b^2 = c^2)\n  (h_area : n = (1/2) * a * b) :\n  let A := (c/2)^2\n  (\u2203 r : \u211a, r^2 = A - n) \u2227 \n  (\u2203 r : \u211a, r^2 = A) \u2227 \n  (\u2203 r : \u211a, r^2 = A + n) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem theorem_1\n  (a b c n : \u211a)\n  (ha : a > 0) (hb : b > 0) (hc : c > 0)\n  (hab : a \u2264 b) (hbc : b < c)\n  (h_right : a^2 + b^2 = c^2)\n  (h_area : n = (1/2) * a * b) :\n  let A := (c/2)^2\n  (\u2203 r : \u211a, r^2 = A - n) \u2227 \n  (\u2203 r : \u211a, r^2 = A) \u2227 \n  (\u2203 r : \u211a, r^2 = A + n) := by\n  intro A\n  have h\u2081 : \u2203 (r : \u211a), r^2 = A - n := by\n    use (a - b) / 2\n    have h\u2081\u2081 : A = (c / 2) ^ 2 := rfl\n    have h\u2081\u2082 : n = (1 / 2) * a * b := h_area\n    have h\u2081\u2083 : a ^ 2 + b ^ 2 = c ^ 2 := h_right\n    calc\n      ((a - b) / 2 : \u211a) ^ 2 = ((a - b) ^ 2) / 4 := by ring\n      _ = (a ^ 2 - 2 * a * b + b ^ 2) / 4 := by ring\n      _ = (c ^ 2 - 2 * a * b) / 4 := by\n        have h\u2081\u2084 : a ^ 2 + b ^ 2 = c ^ 2 := h_right\n        have h\u2081\u2085 : a ^ 2 - 2 * a * b + b ^ 2 = c ^ 2 - 2 * a * b := by\n          linarith\n        rw [h\u2081\u2085]\n        <;> ring\n      _ = (c / 2 : \u211a) ^ 2 - (1 / 2 : \u211a) * a * b := by\n        ring_nf\n        <;> field_simp\n        <;> ring_nf\n        <;> linarith\n      _ = A - n := by\n        rw [h\u2081\u2081, h\u2081\u2082]\n        <;> ring_nf\n        <;> field_simp\n        <;> ring_nf\n        <;> linarith\n  \n  have h\u2082 : \u2203 (r : \u211a), r^2 = A := by\n    use c / 2\n    <;> simp [A]\n    <;> ring_nf\n    <;> field_simp\n    <;> ring_nf\n  \n  have h\u2083 : \u2203 (r : \u211a), r^2 = A + n := by\n    use (a + b) / 2\n    have h\u2083\u2081 : A = (c / 2) ^ 2 := rfl\n    have h\u2083\u2082 : n = (1 / 2) * a * b := h_area\n    have h\u2083\u2083 : a ^ 2 + b ^ 2 = c ^ 2 := h_right\n    calc\n      ((a + b) / 2 : \u211a) ^ 2 = ((a + b) ^ 2) / 4 := by ring\n      _ = (a ^ 2 + 2 * a * b + b ^ 2) / 4 := by ring\n      _ = (c ^ 2 + 2 * a * b) / 4 := by\n        have h\u2083\u2084 : a ^ 2 + b ^ 2 = c ^ 2 := h_right\n        have h\u2083\u2085 : a ^ 2 + 2 * a * b + b ^ 2 = c ^ 2 + 2 * a * b := by\n          linarith\n        rw [h\u2083\u2085]\n        <;> ring\n      _ = (c / 2 : \u211a) ^ 2 + (1 / 2 : \u211a) * a * b := by\n        ring_nf\n        <;> field_simp\n        <;> ring_nf\n        <;> linarith\n      _ = A + n := by\n        rw [h\u2083\u2081, h\u2083\u2082]\n        <;> ring_nf\n        <;> field_simp\n        <;> ring_nf\n        <;> linarith\n  \n  exact \u27e8h\u2081, h\u2082, h\u2083\u27e9", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the core logical meaning from the natural language. The premise that c is rational is satisfied (with the additional constraint c > 0), the definition A = (c/2)^2 is exactly preserved, and the conclusion that A is a perfect square of a rational number is present as '\u2203 r : \u211a, r^2 = A'. While the Lean code contains substantial additional context (Pythagorean triple setup and conclusions about A-n and A+n), these extra components do not contradict the natural language statement and are logically consistent additions. The core mathematical claim from the natural language is fully contained within the Lean formalization."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_2", "label": "ts_2", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_3", "label": "ts_3", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "ts_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    