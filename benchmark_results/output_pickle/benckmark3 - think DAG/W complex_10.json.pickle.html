
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z$ be a complex number. If $z=x+iy$ for real numbers $x, y$, $|z+1| = |z-i|$, and $|z| = \sqrt{2}$, then $z^2 = -2i$.

Proof: Given $z=x+iy$, the condition $|z+1| = |z-i|$ implies $(x+1)^2+y^2 = x^2+(y-1)^2$, which simplifies to $x+y=0$. The condition $|z|=\sqrt{2}$ implies $x^2+y^2=2$. By substituting $y=-x$ into the second equation, we get $x^2+(-x)^2=2$, which simplifies to $x^2=1$. We express $z^2$ in terms of $x$ using $y=-x$: $z^2 = (x+iy)^2 = x^2-y^2+2ixy = x^2-(-x)^2+2ix(-x) = -2ix^2$. Finally, substituting $x^2=1$ into this expression yields $z^2=-2i$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z$ be a complex number. If $z=x+iy$ for real numbers $x, y$", "statement": "Premise:\n\u2022 $z$ is a complex number, and $x, y$ are real numbers such that $z=x+iy$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102) (x y : \u211d) (tc_1 : z = x + y * I)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration `(z : \u2102)` correctly captures that z is a complex number", "The Lean declaration `(x y : \u211d)` correctly captures that x and y are real numbers", "The Lean condition `z = x + y * I` correctly captures the mathematical statement z = x + iy, where `I` is the standard notation for the imaginary unit in Lean's complex number library"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "$|z+1| = |z-i|$", "statement": "Premise:\n\u2022 $z$ is a complex number such that $z=x+iy$ for real numbers $x, y$ [tc_1].\n\u2022 $|z+1| = |z-i|$ [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem tc_2\n  (z : \u2102) (x y : \u211d)\n  (h : z = x + y * I) :\n  Complex.abs (z + 1) = Complex.abs (z - I) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly captures that z is a complex number equal to x + y*I where x and y are real numbers. The notation y * I is equivalent to iy.", "The natural language presents |z+1| = |z-i| as a given condition/premise, but the Lean formalization treats this as the conclusion to be proved (it appears after the colon as the theorem's goal). This is a fundamental logical inconsistency - the natural language assumes this equality holds, while Lean aims to prove it."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly captures that z is a complex number equal to x + y*I where x and y are real numbers. The notation y * I is equivalent to iy.', \"The natural language presents |z+1| = |z-i| as a given condition/premise, but the Lean formalization treats this as the conclusion to be proved (it appears after the colon as the theorem's goal). This is a fundamental logical inconsistency - the natural language assumes this equality holds, while Lean aims to prove it.\"]"}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "$|z| = \\sqrt{2}$", "statement": "Premise:\n\u2022 $z$ is a complex number such that $z=x+iy$ for real numbers $x, y$ [tc_1].\n\u2022 $|z| = \\sqrt{2}$ [tc_3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102) (x y : \u211d)\n(tc_1 : z = x + y * Complex.I)\n(tc_3 : Complex.abs z = Real.sqrt 2)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures that z is a complex number (z : \u2102), x and y are real numbers (x y : \u211d), and z equals x + iy (z = x + y * Complex.I). The notation Complex.I for the imaginary unit i is the standard Lean representation.", "The Lean formalization correctly represents the absolute value condition using Complex.abs z = Real.sqrt 2, which directly corresponds to |z| = \u221a2 in the mathematical notation."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "the condition $|z+1| = |z-i|$ implies $(x+1)^2+y^2 = x^2+(y-1)^2$", "statement": "We assume:\n\u2022 $z$ is a complex number such that $z=x+iy$ for real numbers $x, y$ [tc_1].\n\u2022 $|z+1| = |z-i|$ [tc_2].\nTherefore, we conclude:\n\u2022 $(x+1)^2+y^2 = x^2+(y-1)^2$ [l1].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * Complex.I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - Complex.I)) :\n  (x + 1)^2 + y^2 = x^2 + (y - 1)^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1\n  (z : \u2102) (x y : \u211d)\n  (tc_1 : z = x + y * Complex.I)\n  (tc_2 : Complex.abs (z + 1) = Complex.abs (z - Complex.I)) :\n  (x + 1)^2 + y^2 = x^2 + (y - 1)^2 := by\n  have h1 : (Complex.abs (z + 1))^2 = (x + 1 : \u211d)^2 + (y : \u211d)^2 := by\n    have h\u2081 : z + 1 = (x + 1 : \u2102) + (y : \u2102) * Complex.I := by\n      rw [tc_1]\n      simp [Complex.ext_iff, pow_two]\n      <;> ring_nf <;> simp [Complex.ext_iff, pow_two] <;> norm_num <;>\n        simp_all [Complex.ext_iff, pow_two] <;> ring_nf <;> norm_num <;>\n          linarith\n    have h\u2082 : (Complex.abs (z + 1)) ^ 2 = (x + 1 : \u211d) ^ 2 + (y : \u211d) ^ 2 := by\n      rw [h\u2081]\n      simp [Complex.sq_abs, Complex.normSq]\n      <;> ring_nf <;> simp [Complex.ext_iff, pow_two] <;> norm_num <;>\n        simp_all [Complex.ext_iff, pow_two] <;> ring_nf <;> norm_num <;>\n          linarith\n    exact h\u2082\n  \n  have h2 : (Complex.abs (z - Complex.I))^2 = (x : \u211d)^2 + (y - 1 : \u211d)^2 := by\n    have h\u2082 : z - Complex.I = (x : \u2102) + (y - 1 : \u2102) * Complex.I := by\n      rw [tc_1]\n      simp [Complex.ext_iff, pow_two]\n      <;> ring_nf <;> simp [Complex.ext_iff, pow_two] <;> norm_num <;>\n        simp_all [Complex.ext_iff, pow_two] <;> ring_nf <;> norm_num <;>\n          linarith\n    have h\u2083 : (Complex.abs (z - Complex.I)) ^ 2 = (x : \u211d) ^ 2 + (y - 1 : \u211d) ^ 2 := by\n      rw [h\u2082]\n      simp [Complex.sq_abs, Complex.normSq]\n      <;> ring_nf <;> simp [Complex.ext_iff, pow_two] <;> norm_num <;>\n        simp_all [Complex.ext_iff, pow_two] <;> ring_nf <;> norm_num <;>\n          linarith\n    exact h\u2083\n  \n  have h3 : (Complex.abs (z + 1))^2 = (Complex.abs (z - Complex.I))^2 := by\n    rw [tc_2]\n    <;> simp [pow_two]\n  \n  have h4 : (x + 1 : \u211d)^2 + (y : \u211d)^2 = (x : \u211d)^2 + (y - 1 : \u211d)^2 := by\n    have h\u2084 : (x + 1 : \u211d)^2 + (y : \u211d)^2 = (x : \u211d)^2 + (y - 1 : \u211d)^2 := by\n      calc\n        (x + 1 : \u211d) ^ 2 + (y : \u211d) ^ 2 = (Complex.abs (z + 1)) ^ 2 := by\n          rw [h1]\n          <;> simp [Complex.ext_iff, pow_two]\n          <;> ring_nf\n          <;> norm_num\n          <;> simp_all [Complex.ext_iff, pow_two]\n          <;> ring_nf\n          <;> norm_num\n          <;> linarith\n        _ = (Complex.abs (z - Complex.I)) ^ 2 := by rw [h3]\n        _ = (x : \u211d) ^ 2 + (y - 1 : \u211d) ^ 2 := by\n          rw [h2]\n          <;> simp [Complex.ext_iff, pow_two]\n          <;> ring_nf\n          <;> norm_num\n          <;> simp_all [Complex.ext_iff, pow_two]\n          <;> ring_nf\n          <;> norm_num\n          <;> linarith\n    exact h\u2084\n  \n  have h5 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2 := by\n    norm_cast at h4 \u22a2\n    <;>\n    (try ring_nf at h4 \u22a2) <;>\n    (try simp_all [Complex.ext_iff, pow_two]) <;>\n    (try norm_num at h4 \u22a2) <;>\n    (try linarith) <;>\n    (try nlinarith)\n    <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two]\n        <;> ring_nf at *\n        <;> norm_num at *\n        <;> linarith\n      })\n  \n  exact h5", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The complex number representation z = x + iy is correctly formalized with proper type declarations for complex and real numbers.", "The absolute value constraint |z+1| = |z-i| is accurately represented using Complex.abs with the correct complex expressions.", "The algebraic conclusion (x+1)\u00b2+y\u00b2 = x\u00b2+(y-1)\u00b2 is identically represented in both natural language and Lean."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "which simplifies to $x+y=0$", "statement": "We assume:\n\u2022 For real numbers $x, y$, we have $(x+1)^2+y^2 = x^2+(y-1)^2$ [l1].\nTherefore, we conclude:\n\u2022 $x+y=0$ [l2].", "dependencies": ["l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (x y : \u211d)\n  (h : (x + 1)^2 + y^2 = x^2 + (y - 1)^2) :\n  x + y = 0 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (x y : \u211d)\n  (h : (x + 1)^2 + y^2 = x^2 + (y - 1)^2) :\n  x + y = 0 := by\n  have h\u2081 : 2 * x = -2 * y := by\n    have h\u2082 : (x + 1) ^ 2 + y ^ 2 = x ^ 2 + (y - 1) ^ 2 := h\n    have h\u2083 : x ^ 2 + 2 * x + 1 + y ^ 2 = x ^ 2 + y ^ 2 - 2 * y + 1 := by\n      ring_nf at h\u2082 \u22a2\n      linarith\n    have h\u2084 : 2 * x = -2 * y := by\n      linarith\n    exact h\u2084\n  \n  have h\u2082 : x + y = 0 := by\n    have h\u2083 : 2 * x = -2 * y := h\u2081\n    have h\u2084 : x = -y := by\n      -- Divide both sides by 2 to get x = -y\n      linarith\n    -- Substitute x = -y into x + y to get 0\n    linarith\n  \n  exact h\u2082", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The assumption is perfectly captured. The Lean formalization correctly declares x and y as real numbers and states the equation (x + 1)^2 + y^2 = x^2 + (y - 1)^2 as hypothesis h, which directly corresponds to the natural language premise.", "The conclusion x + y = 0 is identically represented in both the natural language and Lean formalization.", "The logical structure is perfectly preserved. The natural language presents this as 'we assume... therefore we conclude...', and the Lean theorem structure captures this as a hypothesis leading to a conclusion, maintaining the same logical flow."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "The condition $|z|=\\sqrt{2}$ implies $x^2+y^2=2$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $z=x+iy$ for real numbers $x, y$ [tc_1].\n\u2022 $|z| = \\sqrt{2}$ [tc_3].\nTherefore, we conclude:\n\u2022 $x^2+y^2=2$ [l3].", "dependencies": ["tc_1", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 \n  (z : \u2102) (x y : \u211d) \n  (h1 : z = x + y * Complex.I)\n  (h2 : Complex.abs z = Real.sqrt 2) :\n  x^2 + y^2 = 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 \n  (z : \u2102) (x y : \u211d) \n  (h1 : z = x + y * Complex.I)\n  (h2 : Complex.abs z = Real.sqrt 2) :\n  x^2 + y^2 = 2 := by\n  have h3 : Complex.abs z = Real.sqrt (x^2 + y^2) := by\n    rw [h1]\n    simp [Complex.abs, Complex.normSq, Real.sqrt_eq_iff_sq_eq, sq, mul_comm]\n    <;> ring_nf\n    <;> field_simp [Real.sqrt_eq_iff_sq_eq, sq_nonneg, add_nonneg, mul_self_nonneg]\n    <;> ring_nf\n    <;> norm_cast\n    <;> field_simp [Real.sqrt_eq_iff_sq_eq, sq_nonneg, add_nonneg, mul_self_nonneg]\n    <;> ring_nf\n    <;> norm_cast\n  \n  have h4 : Real.sqrt (x^2 + y^2) = Real.sqrt 2 := by\n    have h4 : Complex.abs z = Real.sqrt 2 := h2\n    have h5 : Complex.abs z = Real.sqrt (x^2 + y^2) := h3\n    linarith\n  \n  have h5 : x^2 + y^2 = 2 := by\n    have h6 : Real.sqrt (x^2 + y^2) = Real.sqrt 2 := h4\n    have h7 : x^2 + y^2 = 2 := by\n      have h8 : Real.sqrt (x^2 + y^2) = Real.sqrt 2 := h6\n      have h9 : Real.sqrt (x^2 + y^2) ^ 2 = Real.sqrt 2 ^ 2 := by rw [h8]\n      have h10 : Real.sqrt (x^2 + y^2) ^ 2 = x^2 + y^2 := by\n        rw [Real.sq_sqrt (by\n          -- Prove that x^2 + y^2 is non-negative\n          nlinarith [sq_nonneg x, sq_nonneg y]\n        )]\n      have h11 : Real.sqrt 2 ^ 2 = (2 : \u211d) := by\n        norm_num [Real.sqrt_eq_iff_sq_eq]\n      nlinarith\n    exact h7\n  \n  exact h5", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The complex number representation z = x + iy is correctly formalized as z = x + y * Complex.I with proper type declarations for real and complex numbers.", "The modulus condition |z| = \u221a2 is accurately represented using Complex.abs z = Real.sqrt 2, which are the standard Lean equivalents for complex absolute value and real square root.", "The conclusion x\u00b2 + y\u00b2 = 2 is identically represented in both natural language and Lean formalization."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "By substituting $y=-x$ into the second equation, we get $x^2+(-x)^2=2$", "statement": "We assume:\n\u2022 For real numbers $x, y$, we have $x+y=0$, which implies $y=-x$ [l2].\n\u2022 For the same real numbers $x, y$, we have $x^2+y^2=2$ [l3].\nTherefore, we conclude:\n\u2022 $x^2+(-x)^2=2$ [l4].", "dependencies": ["l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (x y : \u211d)\n  (h1 : x + y = 0)  -- from l2\n  (h2 : x^2 + y^2 = 2)  -- from l3\n  (h3 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)  -- hypothesis from l2\n  (h4 : Complex.abs (x + y * Complex.I) = Real.sqrt 2)  -- hypothesis from l3\n  : x^2 + (-x)^2 = 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (x y : \u211d)\n  (h1 : x + y = 0)\n  (h2 : x^2 + y^2 = 2)\n  (h3 : (x + 1)^2 + y^2 = x^2 + (y - 1)^2)\n  (h4 : Complex.abs (x + y * Complex.I) = Real.sqrt 2)\n  : x^2 + (-x)^2 = 2 := by\n  have h5 : y = -x := by\n    have h5\u2081 : y = -x := by\n      -- Solve for y using the equation x + y = 0\n      linarith\n    exact h5\u2081\n  \n  have h6 : x^2 + (-x)^2 = 2 := by\n    have h6\u2081 : x ^ 2 + (-x) ^ 2 = 2 * x ^ 2 := by ring\n    have h6\u2082 : x ^ 2 = 1 := by\n      -- Substitute y = -x into x\u00b2 + y\u00b2 = 2\n      have h6\u2083 : x ^ 2 + (-x) ^ 2 = 2 := by\n        calc\n          x ^ 2 + (-x) ^ 2 = x ^ 2 + y ^ 2 := by\n            -- Substitute y = -x\n            rw [h5]\n            <;> ring\n          _ = 2 := by rw [h2]\n      -- Simplify to get 2x\u00b2 = 2\n      have h6\u2084 : x ^ 2 + (-x) ^ 2 = 2 * x ^ 2 := by ring\n      have h6\u2085 : 2 * x ^ 2 = 2 := by linarith\n      -- Solve for x\u00b2\n      nlinarith\n    -- Compute x\u00b2 + (-x)\u00b2 = 2x\u00b2 = 2\n    nlinarith\n  \n  exact h6", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.8, "semantic_feedback": ["The declaration of real numbers x, y and the hypothesis x + y = 0 correctly captures the natural language assumption.", "The implicit relationship y = -x is correctly derivable from the given hypothesis h1.", "The constraint x\u00b2 + y\u00b2 = 2 is perfectly formalized as hypothesis h2.", "The conclusion x\u00b2 + (-x)\u00b2 = 2 exactly matches the natural language statement.", "The Lean formalization includes two additional hypotheses (h3 and h4) involving complex numbers and expanded expressions that are not mentioned in the natural language. While these don't contradict the core logic, they add unnecessary complexity to what should be a simple substitution proof."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "which simplifies to $x^2=1$.", "statement": "We assume:\n\u2022 For a real number $x$, we have $x^2+(-x)^2=2$ [l4].\nTherefore, we conclude:\n\u2022 $x^2=1$ [l5].", "dependencies": ["l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 (x : \u211d) (l4 : x^2 + (-x)^2 = 2) : x^2 = 1 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5 (x : \u211d) (l4 : x^2 + (-x)^2 = 2) : x^2 = 1 := by\n  have h : 2 * x ^ 2 = 2 := by\n    have h\u2081 : x ^ 2 + (-x) ^ 2 = 2 := l4\n    have h\u2082 : 2 * x ^ 2 = x ^ 2 + (-x) ^ 2 := by\n      ring_nf\n    linarith\n  \n  have h\u2082 : x ^ 2 = 1 := by\n    have h\u2083 : x ^ 2 = 1 := by\n      apply mul_left_cancel\u2080 (show (2 : \u211d) \u2260 0 by norm_num)\n      linarith\n    exact h\u2083\n  \n  exact h\u2082", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The variable x is properly declared as a real number, the assumption x\u00b2 + (-x)\u00b2 = 2 is correctly represented as a hypothesis, and the conclusion x\u00b2 = 1 is properly stated as the theorem's goal. The logical structure of assumption leading to conclusion is preserved, and the mathematical content is identical between both representations."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l6": {"id": "l6", "natural_language": "We express $z^2$ in terms of $x$ using $y=-x$: $z^2 = (x+iy)^2 = x^2-y^2+2ixy = x^2-(-x)^2+2ix(-x) = -2ix^2$.", "statement": "We assume:\n\u2022 $z$ is a complex number, and $x, y$ are real numbers such that $z=x+iy$ [tc_1].\n\u2022 For the same real numbers $x, y$, we have $x+y=0$, which implies $y=-x$ [l2].\nTherefore, we conclude:\n\u2022 $z^2 = -2ix^2$ [l6].", "dependencies": ["tc_1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (z : \u2102) (x y : \u211d) \n  (h1 : z = x + y * Complex.I)\n  (h2 : x + y = 0) :\n  z^2 = -2 * Complex.I * x^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (z : \u2102) (x y : \u211d) \n  (h1 : z = x + y * Complex.I)\n  (h2 : x + y = 0) :\n  z^2 = -2 * Complex.I * x^2 := by\n  have h3 : y = -x := by\n    have h3\u2081 : y = -x := by\n      have h3\u2082 : x + y = 0 := h2\n      linarith\n    exact h3\u2081\n  \n  have h4 : z = x + (-x) * Complex.I := by\n    rw [h1]\n    rw [h3]\n    <;> ring_nf\n    <;> simp [Complex.ext_iff, pow_two]\n    <;> norm_num\n    <;> simp_all [Complex.ext_iff, pow_two]\n    <;> norm_num\n    <;> linarith\n  \n  have h5 : z ^ 2 = -2 * Complex.I * x ^ 2 := by\n    rw [h4]\n    simp [Complex.ext_iff, pow_two, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I]\n    <;> ring_nf\n    <;> simp [Complex.ext_iff, pow_two, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I]\n    <;> norm_num\n    <;>\n    (try\n      {\n        constructor <;>\n        ring_nf at * <;>\n        simp_all [Complex.ext_iff, pow_two, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I] <;>\n        norm_num <;>\n        linarith\n      }) <;>\n    (try\n      {\n        simp_all [Complex.ext_iff, pow_two, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I]\n        <;>\n        norm_num <;>\n        ring_nf at * <;>\n        linarith\n      })\n    <;>\n    (try\n      {\n        norm_num at *\n        <;>\n        simp_all [Complex.ext_iff, pow_two, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I]\n        <;>\n        ring_nf at *\n        <;>\n        linarith\n      })\n  \n  rw [h5]\n  <;>\n  simp_all [Complex.ext_iff, pow_two, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I, Complex.I_mul_I]\n  <;>\n  norm_num\n  <;>\n  linarith", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the complex number representation with proper type declarations for z as complex and x,y as real numbers, along with the constraint z = x + y*i.", "The constraint x + y = 0 is accurately represented in the hypothesis h2. The natural language mentions the implication y = -x, but this is derivable from the given constraint, so the Lean formalization captures the essential logical content.", "The conclusion z^2 = -2*Complex.I*x^2 perfectly matches the natural language statement z^2 = -2ix^2, with Complex.I being the standard Lean representation for the imaginary unit i."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Finally, substituting $x^2=1$ into this expression yields $z^2=-2i$.", "statement": "We assume:\n\u2022 For some real number $x$, we have established $x^2=1$ [l5].\n\u2022 For a complex number $z$ and the same real number $x$, we have $z^2 = -2ix^2$ [l6].\nTherefore, we conclude:\n\u2022 $z^2=-2i$ [ts_1].", "dependencies": ["l5", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 \n  (x : \u211d) (z : \u2102)\n  (h_l5 : x^2 = 1)\n  (h_l6 : z^2 = -2 * Complex.I * x^2) :\n  z^2 = -2 * Complex.I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 \n  (x : \u211d) (z : \u2102)\n  (h_l5 : x^2 = 1)\n  (h_l6 : z^2 = -2 * Complex.I * x^2) :\n  z^2 = -2 * Complex.I := by\n  have h_x_sq_complex : (x^2 : \u2102) = 1 := by\n    norm_cast\n    <;> simp [h_l5]\n    <;> norm_num\n  \n  have h_z_sq : z^2 = -2 * Complex.I := by\n    have h1 : z^2 = -2 * Complex.I * (x^2 : \u2102) := by\n      -- Convert the given equation to use complex numbers explicitly\n      norm_cast at h_l6 \u22a2\n      <;> simp_all [Complex.ext_iff, pow_two, mul_assoc, mul_comm, mul_left_comm]\n      <;> ring_nf at *\n      <;> norm_num at *\n      <;>\n      (try norm_num) <;>\n      (try linarith) <;>\n      (try simp_all [Complex.ext_iff, pow_two, mul_assoc, mul_comm, mul_left_comm]) <;>\n      (try ring_nf at *) <;>\n      (try norm_num at *) <;>\n      (try linarith)\n      <;>\n      (try\n        {\n          simp_all [Complex.ext_iff, pow_two, mul_assoc, mul_comm, mul_left_comm]\n          <;> norm_num at * <;>\n          (try ring_nf at *) <;>\n          (try norm_num at *) <;>\n          (try linarith)\n        })\n      <;>\n      (try\n        {\n          simp_all [Complex.ext_iff, pow_two, mul_assoc, mul_comm, mul_left_comm]\n          <;> norm_num at * <;>\n          (try ring_nf at *) <;>\n          (try norm_num at *) <;>\n          (try linarith)\n        })\n    -- Substitute x\u00b2 = 1 into the equation\n    calc\n      z ^ 2 = -2 * Complex.I * (x ^ 2 : \u2102) := h1\n      _ = -2 * Complex.I * 1 := by rw [h_x_sq_complex]\n      _ = -2 * Complex.I := by\n        ring_nf\n        <;> simp [Complex.ext_iff, pow_two, mul_assoc, mul_comm, mul_left_comm]\n        <;> norm_num\n  \n  exact h_z_sq", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly specify x as real and z as complex", "First assumption x\u00b2 = 1 is properly captured as hypothesis h_l5", "Second assumption z\u00b2 = -2ix\u00b2 is correctly formalized with proper complex number notation", "Conclusion z\u00b2 = -2i is accurately represented using Complex.I", "The logical structure properly sets up the substitution argument from assumptions to conclusion"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    