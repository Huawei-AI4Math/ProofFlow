
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $z$ be a complex number. If $\operatorname{Re}(z) = 2$ and $\operatorname{Im}(z) = 3$, then $|e^{z^2}| = e^{-5}$.

Proof: From the conditions $\operatorname{Re}(z) = 2$ and $\operatorname{Im}(z) = 3$, we can write $z = 2+3i$. We then compute the square of $z$, which is $z^2 = (2+3i)^2 = -5+12i$. Now we consider the expression $e^{z^2}$, which is $e^{-5+12i}$. The modulus of a complex exponential $e^{a+ib}$ is $e^a$, so we find that $|e^{z^2}| = |e^{-5+12i}| = e^{-5}$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $z$ be a complex number. If $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$", "statement": "Premise:\n\u2022 $z$ is a complex number such that $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (z : \u2102)\n(tc_1 : z.re = 2 \u2227 z.im = 3)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean declaration 'variable (z : \u2102)' correctly captures that z is a complex number", "The Lean condition 'z.re = 2' in the conjunction perfectly matches the mathematical condition Re(z) = 2", "The Lean condition 'z.im = 3' in the conjunction perfectly matches the mathematical condition Im(z) = 3", "Both the natural language and Lean formalization contain no conclusions, only premise conditions"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "From the conditions $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$, we can write $z = 2+3i$.", "statement": "We assume:\n\u2022 $z$ is a complex number such that $\\operatorname{Re}(z) = 2$ and $\\operatorname{Im}(z) = 3$ [tc_1].\nTherefore, we conclude:\n\u2022 $z = 2+3i$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (z : \u2102) (h : z.re = 2 \u2227 z.im = 3) : z = 2 + 3 * I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 (z : \u2102) (h : z.re = 2 \u2227 z.im = 3) : z = 2 + 3 * Complex.I := by\n  have h_re : z.re = (2 + 3 * Complex.I).re := by\n    simp [Complex.ext_iff, Complex.I_re, Complex.I_im, h]\n    <;> norm_num <;>\n    (try simp_all) <;>\n    (try linarith)\n    <;>\n    (try ring_nf at * <;> simp_all)\n    <;>\n    (try nlinarith)\n  \n  have h_im : z.im = (2 + 3 * Complex.I).im := by\n    simp [Complex.ext_iff, Complex.I_re, Complex.I_im, h]\n    <;> norm_num <;>\n    (try simp_all) <;>\n    (try linarith)\n    <;>\n    (try ring_nf at * <;> simp_all)\n    <;>\n    (try nlinarith)\n  \n  have h_main : z = 2 + 3 * Complex.I := by\n    apply Complex.ext <;>\n    (try simp_all [Complex.ext_iff, Complex.I_re, Complex.I_im]) <;>\n    (try norm_num at *) <;>\n    (try linarith)\n    <;>\n    (try ring_nf at * <;> simp_all)\n    <;>\n    (try nlinarith)\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 3}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly and completely captures the mathematical content and logical structure of the natural language statement. The complex number z is properly typed, the assumptions about real and imaginary parts are accurately represented using conjunction, and the conclusion correctly expresses the complex number in standard form. The theorem structure appropriately represents the deductive reasoning from hypothesis to conclusion."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "We then compute the square of $z$, which is $z^2 = (2+3i)^2 = -5+12i$.", "statement": "We assume:\n\u2022 $z = 2+3i$ [l1].\nTherefore, we conclude:\n\u2022 $z^2 = -5+12i$ [l2].", "dependencies": ["l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (z : \u2102) (l1 : z = 2 + 3 * I) : z^2 = -5 + 12 * I := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 (z : \u2102) (l1 : z = 2 + 3 * I) : z^2 = -5 + 12 * I := by\n  have h_main : z^2 = -5 + 12 * I := by\n    rw [l1]\n    -- Expand the square using the definition of complex multiplication\n    simp [pow_two, Complex.ext_iff, Complex.mul_re, Complex.mul_im, Complex.ofReal_add, Complex.ofReal_mul,\n      Complex.ofReal_ofNat]\n    <;> norm_num <;>\n    (try ring_nf) <;>\n    (try norm_num) <;>\n    (try simp_all [Complex.ext_iff, pow_two, Complex.mul_re, Complex.mul_im, Complex.ofReal_add, Complex.ofReal_mul,\n      Complex.ofReal_ofNat]) <;>\n    (try norm_num) <;>\n    (try linarith)\n    <;>\n    simp_all [Complex.ext_iff, pow_two, Complex.mul_re, Complex.mul_im, Complex.ofReal_add, Complex.ofReal_mul,\n      Complex.ofReal_ofNat]\n    <;>\n    norm_num\n    <;>\n    linarith\n  \n  exact h_main", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 18, "column": 4, "endLine": 19, "endColumn": 27, "data": "simp_all made no progress"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The Lean formalization correctly captures all components of the natural language statement. The assumption z = 2 + 3i is properly represented as a hypothesis, and the conclusion z\u00b2 = -5 + 12i is correctly stated as the theorem goal. The notational differences (3*I vs 3i, z^2 vs z\u00b2) are standard Lean mathematical notation and preserve the exact mathematical meaning.", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "NL statement", "error_report": "Formalization appears correct (score=1.0 > 0.6), and the prover could prove the NEGATION of the NL lemma. The NL statement is likely incorrect."}, "solved_negation": {"lean_verify": true, "lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nexample : \u2203 (I z : \u2102), z = 2 + 3 * I \u2227 z^2 \u2260 -5 + 12 * I := by\n  use 0, 2\n  constructor\n  \u00b7 -- Prove that 2 = 2 + 3 * 0\n    norm_num [Complex.ext_iff, pow_two]\n    <;>\n    simp [Complex.ext_iff, pow_two]\n    <;>\n    norm_num\n  \u00b7 -- Prove that (2 : \u2102)^2 \u2260 (-5 : \u2102) + 12 * (0 : \u2102)\n    intro h\n    simp [Complex.ext_iff, pow_two] at h\n    <;>\n    norm_num at h <;>\n    (try contradiction) <;>\n    (try linarith)\n    <;>\n    (try {\n      norm_num at h <;>\n      simp_all [Complex.ext_iff, pow_two] <;>\n      norm_num <;>\n      linarith\n    })"}, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "The modulus of a complex exponential $e^{a+ib}$ is $e^a$", "statement": "We assume:\n\u2022 (general knowledge of complex exponentiation)\nTherefore, we conclude:\n\u2022 For any real numbers $a$ and $b$, $|e^{a+ib}| = e^a$ [l3].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b : \u211d) : Complex.abs (Complex.exp (a + b * Complex.I)) = Real.exp a := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3 (a b : \u211d) : Complex.abs (Complex.exp (a + b * Complex.I)) = Real.exp a := by\n  have h_main : Complex.abs (Complex.exp (a + b * Complex.I)) = Real.exp (a + b * Complex.I).re := by\n    rw [Complex.abs_exp]\n    <;>\n    simp [Complex.ext_iff, Complex.I_mul_I]\n    <;>\n    ring_nf\n    <;>\n    simp [Complex.ext_iff, Complex.I_mul_I]\n    <;>\n    norm_num\n  \n  have h_re : (a + b * Complex.I).re = a := by\n    simp [Complex.ext_iff, Complex.I_mul_I]\n    <;> ring_nf\n    <;> simp [Complex.ext_iff, Complex.I_mul_I]\n    <;> norm_num\n    <;> linarith\n  \n  have h_final : Complex.abs (Complex.exp (a + b * Complex.I)) = Real.exp a := by\n    rw [h_main]\n    rw [h_re]\n    <;>\n    simp [Complex.ext_iff, Complex.I_mul_I]\n    <;>\n    ring_nf\n    <;>\n    simp [Complex.ext_iff, Complex.I_mul_I]\n    <;>\n    norm_num\n  \n  apply h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the natural language statement. The variables a and b are properly declared as real numbers, the complex exponential e^(a+ib) is correctly represented as Complex.exp (a + b * Complex.I), the modulus operation is properly expressed as Complex.abs, and the right-hand side e^a is correctly represented as Real.exp a. The mathematical meaning is preserved exactly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "so we find that $|e^{z^2}| = |e^{-5+12i}| = e^{-5}$.", "statement": "We assume:\n\u2022 $z^2 = -5+12i$ [l2].\n\u2022 For any real numbers $a$ and $b$, $|e^{a+ib}| = e^a$ [l3].\nTherefore, we conclude:\n\u2022 $|e^{z^2}| = e^{-5}$ [ts_1].", "dependencies": ["l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (z : \u2102) \n  (l2 : z^2 = -5 + 12 * Complex.I)\n  (l3 : \u2200 a b : \u211d, Complex.abs (Complex.exp (a + b * Complex.I)) = Real.exp a) :\n  Complex.abs (Complex.exp (z^2)) = Real.exp (-5) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (z : \u2102) \n  (l2 : z^2 = -5 + 12 * Complex.I)\n  (l3 : \u2200 a b : \u211d, Complex.abs (Complex.exp (a + b * Complex.I)) = Real.exp a) :\n  Complex.abs (Complex.exp (z^2)) = Real.exp (-5) := by\n  have h1 : Complex.abs (Complex.exp (z^2)) = Complex.abs (Complex.exp (-5 + 12 * Complex.I)) := by\n    rw [l2]\n    <;>\n    simp [Complex.ext_iff, pow_two]\n    <;>\n    norm_num\n    <;>\n    simp_all [Complex.exp_re, Complex.exp_im, Complex.abs, Complex.normSq, Real.exp_neg, Real.exp_add,\n      Real.exp_sub, Real.exp_log, Real.exp_mul, mul_comm]\n    <;>\n    ring_nf at *\n    <;>\n    norm_num at *\n    <;>\n    simp_all [Complex.ext_iff, pow_two]\n    <;>\n    norm_num\n    <;>\n    linarith\n  \n  have h2 : Complex.abs (Complex.exp (-5 + 12 * Complex.I)) = Real.exp (-5) := by\n    have h2\u2081 : Complex.abs (Complex.exp (-5 + 12 * Complex.I)) = Real.exp (-5) := by\n      -- Use the given property l3 to directly compute the absolute value of the complex exponential\n      have h2\u2082 : Complex.abs (Complex.exp (-5 + 12 * Complex.I)) = Real.exp (-5) := by\n        -- Apply the property l3 with a = -5 and b = 12\n        have h2\u2083 : Complex.abs (Complex.exp (-5 + 12 * Complex.I)) = Real.exp (-5) := by\n          -- Use the given property l3\n          simpa [Complex.ext_iff, pow_two] using l3 (-5 : \u211d) (12 : \u211d)\n        -- The result follows directly from l3\n        exact h2\u2083\n      -- The result follows directly from l3\n      exact h2\u2082\n    -- The result follows directly from l3\n    exact h2\u2081\n  \n  have h3 : Complex.abs (Complex.exp (z^2)) = Real.exp (-5) := by\n    rw [h1]\n    rw [h2]\n  \n  exact h3", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The explicit type declaration for z as a complex number is a helpful addition that doesn't alter the mathematical meaning.", "The equation z^2 = -5 + 12i is correctly formalized using Lean's complex number notation.", "The universal statement about the absolute value of complex exponentials is accurately captured with proper type annotations.", "The conclusion correctly applies complex absolute value and exponential functions to reach the real result.", "The overall logical structure properly translates the assumption-conclusion format into Lean's theorem framework."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    