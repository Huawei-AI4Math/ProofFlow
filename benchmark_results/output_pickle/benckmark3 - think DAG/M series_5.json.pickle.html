
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Let $(a_n)$ be an arithmetic sequence with $a_3=10$ and $a_7=22$. Let $S_n$ be the sum of the first $n$ terms of $(a_n)$. Then the sum of the first $10$ terms, $S_{10}$, is $175$.

Proof: First, we find the common difference $d$ and the first term $a_1$ of the arithmetic sequence. The formula for the $n$-th term is $a_n = a_1 + (n-1)d$. We are given $a_3 = 10$ and $a_7 = 22$. We can write these as $10=a_1+2d$ and $22=a_1+6d$. Subtracting the first equation from the second gives $12=4d$, so $d=3$. Substituting $d=3$ into the first equation gives $10=a_1+2(3)$, so $a_1=4$. Next, we find the expression for the $n$-th term, $a_n$. Using $a_1=4$ and $d=3$, we get $a_n=4+(n-1)3=4+3n-3=3n+1$. Now, we find the sum of the first 10 terms, $S_{10}$. The formula for the sum of an arithmetic series is $S_n = \frac{n}{2}(a_1+a_n)$. For $n=10$, we need to find $a_{10}$. We use the expression for $a_n$ to find $a_{10}=3(10)+1=31$. Finally, we use the sum formula for $n=10$ with $a_1=4$ and $a_{10}=31$. We have $S_{10}=\frac{10}{2}(4+31)=5(35)=175$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let (a_n) be an arithmetic sequence", "statement": "Premise:\n\u2022 (a_n) is an arithmetic sequence with first term a\u2081 and common difference d [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem arithmetic_sequence_sum : \n  \u2200 (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d),\n  (\u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1) * d) \u2192\n  a 3 = 10 \u2192\n  a 7 = 22 \u2192\n  (\u2211 i in Finset.range 10, a (i + 1)) = 175 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly captures the arithmetic sequence definition with first term a\u2081 and common difference d using the standard formula a_n = a\u2081 + (n-1)d", "The Lean theorem introduces specific conditions a 3 = 10 and a 7 = 22 that are completely absent from the natural language statement", "The Lean theorem concludes with a sum calculation that equals 175, which is not mentioned anywhere in the natural language premise"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly captures the arithmetic sequence definition with first term a\u2081 and common difference d using the standard formula a_n = a\u2081 + (n-1)d', 'The Lean theorem introduces specific conditions a 3 = 10 and a 7 = 22 that are completely absent from the natural language statement', 'The Lean theorem concludes with a sum calculation that equals 175, which is not mentioned anywhere in the natural language premise']"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "with a_3=10 and a_7=22.", "statement": "Premise:\n\u2022 For the arithmetic sequence (a_n) [tc_1], we have a\u2083 = 10 and a\u2087 = 22 [tc_2].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem arithmetic_sequence_sum : \n  \u2200 (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d),\n  (\u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1) * d) \u2192\n  a 3 = 10 \u2192\n  a 7 = 22 \u2192\n  (\u2211 i in Finset.range 10, a (i + 1)) = 175 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly captures the arithmetic sequence concept by explicitly defining it with the standard formula a n = a\u2081 + (n - 1) * d, which is the mathematical definition of an arithmetic sequence", "Both the natural language and Lean state that a\u2083 = 10, with only notational differences in subscript representation", "Both the natural language and Lean state that a\u2087 = 22, with only notational differences in subscript representation", "The natural language explicitly states there are no conclusions derived yet and this is just establishing premises, but the Lean formalization introduces a conclusion that the sum of the first 10 terms equals 175, which contradicts the stated intent of the natural language"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly captures the arithmetic sequence concept by explicitly defining it with the standard formula a n = a\u2081 + (n - 1) * d, which is the mathematical definition of an arithmetic sequence', 'Both the natural language and Lean state that a\u2083 = 10, with only notational differences in subscript representation', 'Both the natural language and Lean state that a\u2087 = 22, with only notational differences in subscript representation', 'The natural language explicitly states there are no conclusions derived yet and this is just establishing premises, but the Lean formalization introduces a conclusion that the sum of the first 10 terms equals 175, which contradicts the stated intent of the natural language']"}, "type": "condition"}, "tc_3": {"id": "tc_3", "natural_language": "Let S_n be the sum of the first n terms of (a_n).", "statement": "Premise:\n\u2022 For the arithmetic sequence (a_n) [tc_1], S_n is defined as the sum of its first n terms [tc_3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a : \u2115 \u2192 \u211d)\nvariable (a\u2081 d : \u211d)\n\n(tc_1 : \u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1) * d)\n(tc_2 : a 3 = 10)\n(tc_3 : a 7 = 22)\n\ntheorem arithmetic_sequence_sum : \n  (\u2211 i in Finset.range 10, a (i + 1)) = 175 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean theorem contains no condition stating that (a_n) is an arithmetic sequence, which is a fundamental requirement from the natural language", "The Lean theorem does not define S_n as the sum of first n terms - it only shows a specific sum with n=10 equaling 175", "The Lean theorem does not establish the general relationship that S_n = a_1 + a_2 + ... + a_n, instead it only provides a specific numerical result for n=10"]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean theorem contains no condition stating that (a_n) is an arithmetic sequence, which is a fundamental requirement from the natural language', 'The Lean theorem does not define S_n as the sum of first n terms - it only shows a specific sum with n=10 equaling 175', 'The Lean theorem does not establish the general relationship that S_n = a_1 + a_2 + ... + a_n, instead it only provides a specific numerical result for n=10']"}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "The formula for the n-th term is a_n = a_1 + (n-1)d.", "statement": "Definition:\n\u2022 Given an arithmetic sequence (a_n) [tc_1], the formula for its n-th term is a_n = a\u2081 + (n-1)d, where a\u2081 is the first term and d is the common difference [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem arithmetic_sequence_sum : \n  \u2200 (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d),\n  (\u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1) * d) \u2192\n  a 3 = 10 \u2192\n  a 7 = 22 \u2192\n  (\u2211 i in Finset.range 10, a (i + 1)) = 175 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization correctly declares an arithmetic sequence (a_n) as a function from naturals to reals", "The Lean formalization correctly declares a\u2081 as the first term parameter of type real", "The Lean formalization correctly declares d as the common difference parameter of type real", "The natural language only defines the general formula a_n = a\u2081 + (n-1)d, but the Lean theorem introduces specific numerical conditions (a 3 = 10, a 7 = 22) and a sum conclusion that are completely absent from the natural language definition. This is a major departure from the stated mathematical content."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization correctly declares an arithmetic sequence (a_n) as a function from naturals to reals', 'The Lean formalization correctly declares a\u2081 as the first term parameter of type real', 'The Lean formalization correctly declares d as the common difference parameter of type real', 'The natural language only defines the general formula a_n = a\u2081 + (n-1)d, but the Lean theorem introduces specific numerical conditions (a 3 = 10, a 7 = 22) and a sum conclusion that are completely absent from the natural language definition. This is a major departure from the stated mathematical content.']"}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "We are given a_3 = 10 and a_7 = 22. We can write these as 10=a_1+2d and 22=a_1+6d.", "statement": "We assume:\n\u2022 For the arithmetic sequence (a_n) [tc_1], we have a\u2083 = 10 [tc_2]\n\u2022 The formula for the n-th term is a_n = a\u2081 + (n-1)d [def_1]\nTherefore, we conclude:\n\u2022 10 = a\u2081 + 2d [l1].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem arithmetic_sequence : \n  \u2200 (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d),\n  (\u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1) * d) \u2192\n  a 3 = 10 \u2192\n  a 7 = 22 \u2192\n  10 = a\u2081 + 2 * d := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem arithmetic_sequence : \n  \u2200 (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d),\n  (\u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1) * d) \u2192\n  a 3 = 10 \u2192\n  a 7 = 22 \u2192\n  10 = a\u2081 + 2 * d := by\n  intro a a\u2081 d h_formula h_a3 h_a7\n  have h1 : a 3 = a\u2081 + (3 - 1 : \u2115) * d := by\n    have h\u2081 : a 3 = a\u2081 + (3 - 1 : \u2115) * d := by\n      have h\u2082 : (3 : \u2115) \u2265 1 := by norm_num\n      have h\u2083 : a 3 = a\u2081 + (3 - 1 : \u2115) * d := by\n        have h\u2084 := h_formula 3 h\u2082\n        norm_num at h\u2084 \u22a2\n        <;>\n        (try ring_nf at h\u2084 \u22a2) <;>\n        (try simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_sub]) <;>\n        (try norm_num at h\u2084 \u22a2) <;>\n        (try linarith) <;>\n        (try simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_sub]) <;>\n        (try norm_num at h\u2084 \u22a2) <;>\n        (try linarith)\n        <;>\n        (try ring_nf at h\u2084 \u22a2 <;> simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_sub] <;> norm_num at h\u2084 \u22a2 <;> linarith)\n        <;>\n        (try\n          {\n            simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_sub]\n            <;>\n            norm_num at *\n            <;>\n            linarith\n          })\n      exact h\u2083\n    exact h\u2081\n  \n  have h2 : (3 - 1 : \u2115) = 2 := by\n    norm_num\n    <;>\n    simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_sub]\n    <;>\n    norm_num at *\n    <;>\n    linarith\n  \n  have h3 : a 3 = a\u2081 + 2 * d := by\n    have h\u2083 : a 3 = a\u2081 + (3 - 1 : \u2115) * d := h1\n    have h\u2084 : (3 - 1 : \u2115) = 2 := h2\n    have h\u2085 : a 3 = a\u2081 + 2 * d := by\n      calc\n        a 3 = a\u2081 + (3 - 1 : \u2115) * d := h\u2083\n        _ = a\u2081 + 2 * d := by\n          rw [h\u2084]\n          <;> norm_num\n          <;>\n          (try ring_nf) <;>\n          (try simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_sub]) <;>\n          (try norm_num) <;>\n          (try linarith)\n          <;>\n          (try ring_nf at * <;> simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_sub] <;> norm_num at * <;> linarith)\n          <;>\n          (try\n            {\n              simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_sub]\n              <;>\n              norm_num at *\n              <;>\n              linarith\n            })\n    exact h\u2085\n  \n  have h4 : 10 = a\u2081 + 2 * d := by\n    have h\u2084 : a 3 = 10 := h_a3\n    have h\u2085 : a 3 = a\u2081 + 2 * d := h3\n    linarith\n  \n  exact h4", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The arithmetic sequence concept is correctly formalized through the function definition and arithmetic sequence formula, with an appropriate domain constraint n \u2265 1", "The condition a\u2083 = 10 is perfectly captured as a 3 = 10, with only notational differences", "The arithmetic sequence formula is correctly formalized with the same mathematical meaning, including a reasonable indexing constraint", "The conclusion 10 = a\u2081 + 2d is perfectly matched in the Lean formalization"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "We are given a_3 = 10 and a_7 = 22. We can write these as 10=a_1+2d and 22=a_1+6d.", "statement": "We assume:\n\u2022 For the arithmetic sequence (a_n) [tc_1], we have a\u2087 = 22 [tc_2]\n\u2022 The formula for the n-th term is a_n = a\u2081 + (n-1)d [def_1]\nTherefore, we conclude:\n\u2022 22 = a\u2081 + 6d [l2].", "dependencies": ["tc_1", "tc_2", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 :\n  \u2200 (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d),\n  (\u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1) * d) \u2192\n  a 7 = 22 \u2192\n  22 = a\u2081 + 6 * d := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2 :\n  \u2200 (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d),\n  (\u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1) * d) \u2192\n  a 7 = 22 \u2192\n  22 = a\u2081 + 6 * d := by\n  intro a a\u2081 d h_formula h_a7\n  have h1 : a 7 = a\u2081 + 6 * d := by\n    have h2 : a 7 = a\u2081 + (7 - 1 : \u2115) * d := by\n      have h3 : (7 : \u2115) \u2265 1 := by norm_num\n      have h4 : a 7 = a\u2081 + (7 - 1 : \u2115) * d := by\n        specialize h_formula 7 (by norm_num)\n        -- Simplify the expression using the given formula\n        norm_num at h_formula \u22a2\n        <;> simpa using h_formula\n      exact h4\n    -- Convert the natural number multiplication to real number multiplication\n    have h5 : (a\u2081 + (7 - 1 : \u2115) * d : \u211d) = a\u2081 + 6 * d := by\n      norm_num\n      <;> ring_nf\n      <;> simp [mul_comm]\n      <;> norm_cast\n      <;> ring_nf\n    -- Combine the results to get the final expression\n    linarith\n  \n  have h2 : 22 = a\u2081 + 6 * d := by\n    have h3 : a 7 = 22 := h_a7\n    have h4 : a 7 = a\u2081 + 6 * d := h1\n    linarith\n  \n  exact h2", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The arithmetic sequence assumption is correctly formalized with appropriate type declarations and the defining property as a universal quantification.", "The condition a\u2087 = 22 is directly and accurately translated to a 7 = 22.", "The general arithmetic sequence formula is correctly captured with explicit multiplication notation.", "The conclusion 22 = a\u2081 + 6d is perfectly represented, correctly showing the substitution of n=7 into the general formula."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Subtracting the first equation from the second gives 12=4d, so d=3.", "statement": "We assume:\n\u2022 10 = a\u2081 + 2d [l1]\n\u2022 22 = a\u2081 + 6d [l2]\nTherefore, we conclude:\n\u2022 The common difference is d = 3 [l3].", "dependencies": ["l1", "l2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (a\u2081 d : \u211d)\n  (l1 : 10 = a\u2081 + 2 * d)\n  (l2 : 22 = a\u2081 + 6 * d) :\n  d = 3 := by\n  sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l3\n  (a\u2081 d : \u211d)\n  (l1 : 10 = a\u2081 + 2 * d)\n  (l2 : 22 = a\u2081 + 6 * d) :\n  d = 3 := by\n  have h_sub : (22 : \u211d) - 10 = (a\u2081 + 6 * d) - (a\u2081 + 2 * d) := by\n    have h1 : (22 : \u211d) = a\u2081 + 6 * d := by\n      norm_num at l2 \u22a2\n      <;> linarith\n    have h2 : (10 : \u211d) = a\u2081 + 2 * d := by\n      norm_num at l1 \u22a2\n      <;> linarith\n    -- Subtract the two equations to eliminate a\u2081\n    have h3 : (22 : \u211d) - 10 = (a\u2081 + 6 * d) - (a\u2081 + 2 * d) := by\n      linarith\n    exact h3\n  \n  have h_simplify : (12 : \u211d) = 4 * d := by\n    have h3 : (22 : \u211d) - 10 = (a\u2081 + 6 * d) - (a\u2081 + 2 * d) := h_sub\n    norm_num at h3 \u22a2\n    <;> linarith\n  \n  have h_final : d = 3 := by\n    have h4 : (12 : \u211d) = 4 * d := h_simplify\n    have h5 : d = 3 := by\n      apply mul_left_cancel\u2080 (show (4 : \u211d) \u2260 0 by norm_num)\n      linarith\n    exact h5\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations appropriately specify real number types, which is mathematically sound even though not explicitly mentioned in natural language", "First assumption l1 correctly formalizes the equation 10 = a\u2081 + 2d with explicit multiplication notation", "Second assumption l2 correctly formalizes the equation 22 = a\u2081 + 6d with explicit multiplication notation", "The theorem goal d = 3 perfectly captures the natural language conclusion about the common difference"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "Substituting d=3 into the first equation gives 10=a_1+2(3), so a_1=4.", "statement": "We assume:\n\u2022 10 = a\u2081 + 2d [l1]\n\u2022 The common difference is d = 3 [l3]\nTherefore, we conclude:\n\u2022 The first term is a\u2081 = 4 [l4].", "dependencies": ["l1", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d)\n  (h_arith : \u2200 n : \u2115, a n = a\u2081 + (n - 1 : \u211d) * d)\n  (h_a3 : a 3 = 10)\n  (h_a7 : a 7 = 22)\n  (l3 : d = 3) :\n  a\u2081 = 4 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d)\n  (h_arith : \u2200 n : \u2115, a n = a\u2081 + (n - 1 : \u211d) * d)\n  (h_a3 : a 3 = 10)\n  (h_a7 : a 7 = 22)\n  (l3 : d = 3) :\n  a\u2081 = 4 := by\n  have h1 : a 3 = a\u2081 + 2 * d := by\n    have h1\u2081 : a 3 = a\u2081 + (3 - 1 : \u211d) * d := by\n      have h1\u2082 := h_arith 3\n      norm_num at h1\u2082 \u22a2\n      <;> linarith\n    -- Simplify the expression (3 - 1 : \u211d) * d to 2 * d\n    have h1\u2082 : (3 - 1 : \u211d) * d = 2 * d := by norm_num\n    -- Substitute back into the equation\n    rw [h1\u2081, h1\u2082]\n    <;> ring_nf\n    <;> linarith\n  \n  have h2 : a\u2081 + 2 * d = 10 := by\n    linarith\n  \n  have h3 : a\u2081 + 6 = 10 := by\n    have h3\u2081 : d = 3 := l3\n    have h3\u2082 : a\u2081 + 2 * d = 10 := h2\n    rw [h3\u2081] at h3\u2082\n    ring_nf at h3\u2082 \u22a2\n    linarith\n  \n  have h4 : a\u2081 = 4 := by\n    have h4\u2081 : a\u2081 + 6 = 10 := h3\n    linarith\n  \n  exact h4", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The premise '10 = a\u2081 + 2d' is correctly captured through the combination of 'h_a3 : a 3 = 10' and the arithmetic sequence formula, which expands to the same mathematical relationship.", "The premise 'd = 3' is directly and accurately represented as 'l3 : d = 3'.", "The conclusion 'a\u2081 = 4' is directly and accurately captured as the theorem's conclusion.", "The Lean formalization includes an additional condition 'h_a7 : a 7 = 22' not mentioned in the natural language, but this is consistent with the other given conditions and doesn't contradict the logical structure. Extra conditions are acceptable as noted in the guidelines."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "Using a_1=4 and d=3, we get a_n=4+(n-1)3=4+3n-3=3n+1.", "statement": "We assume:\n\u2022 The general formula for the n-th term is a_n = a\u2081 + (n-1)d [def_1]\n\u2022 The common difference is d = 3 [l3]\n\u2022 The first term is a\u2081 = 4 [l4]\nTherefore, we conclude:\n\u2022 The specific formula for the n-th term of this sequence is a_n = 3n + 1 [l5].", "dependencies": ["def_1", "l3", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d)\n  (h_arith : \u2200 n : \u2115, a n = a\u2081 + (n - 1 : \u211d) * d)\n  (h_a3 : a 3 = 10)\n  (h_a7 : a 7 = 22)\n  (l3 : d = 3)\n  (l4 : a\u2081 = 4) :\n  \u2200 n : \u2115, a n = 3 * n + 1 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d)\n  (h_arith : \u2200 n : \u2115, a n = a\u2081 + (n - 1 : \u211d) * d)\n  (h_a3 : a 3 = 10)\n  (h_a7 : a 7 = 22)\n  (l3 : d = 3)\n  (l4 : a\u2081 = 4) :\n  \u2200 n : \u2115, a n = 3 * n + 1 := by\n  have h_main : \u2200 (n : \u2115), a n = 3 * n + 1 := by\n    intro n\n    have h\u2081 : a n = a\u2081 + (n - 1 : \u211d) * d := h_arith n\n    rw [h\u2081]\n    have h\u2082 : a\u2081 = 4 := l4\n    have h\u2083 : d = 3 := l3\n    rw [h\u2082, h\u2083]\n    -- Simplify the expression 4 + (n - 1 : \u211d) * 3 to 3 * n + 1\n    have h\u2084 : (n : \u211d) - 1 = (n : \u211d) - 1 := rfl\n    -- Expand and simplify the expression\n    ring_nf at h\u2081 \u22a2\n    <;> simp [h\u2082, h\u2083] at h\u2081 \u22a2 <;>\n    (try norm_num at h\u2081 \u22a2) <;>\n    (try ring_nf at h\u2081 \u22a2) <;>\n    (try field_simp at h\u2081 \u22a2) <;>\n    (try norm_cast at h\u2081 \u22a2) <;>\n    (try linarith) <;>\n    (try\n      {\n        simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_zero]\n        <;> ring_nf at *\n        <;> norm_num at *\n        <;> linarith\n      })\n    <;>\n    (try\n      {\n        simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_zero]\n        <;> ring_nf at *\n        <;> norm_num at *\n        <;> linarith\n      })\n    <;>\n    (try\n      {\n        simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_zero]\n        <;> ring_nf at *\n        <;> norm_num at *\n        <;> linarith\n      })\n    <;>\n    (try\n      {\n        simp_all [Nat.cast_add, Nat.cast_one, Nat.cast_mul, Nat.cast_zero]\n        <;> ring_nf at *\n        <;> norm_num at *\n        <;> linarith\n      })\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The general arithmetic sequence formula is correctly captured in both the natural language and Lean formalization.", "The common difference d = 3 is identically represented in both versions.", "The first term a\u2081 = 4 is identically represented in both versions.", "The conclusion a_n = 3n + 1 is correctly formalized as the goal to prove.", "The Lean formalization includes additional consistent hypotheses (h_a3 and h_a7) that are mathematically derivable from the given conditions, which is acceptable as extra logical detail."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_2": {"id": "def_2", "natural_language": "The formula for the sum of an arithmetic series is S_n = \\frac{n}{2}(a_1+a_n).", "statement": "Definition:\n\u2022 Given an arithmetic sequence (a_n) [tc_1] and its sum S_n [tc_3], the formula for the sum is S_n = (n/2) * (a\u2081 + a_n) [def_2].", "dependencies": ["tc_1", "tc_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem arithmetic_sequence_sum : \n  \u2200 (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d),\n  (\u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1) * d) \u2192\n  a 3 = 10 \u2192\n  a 7 = 22 \u2192\n  (\u2211 i in Finset.range 10, a (i + 1)) = 175 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean declares an arithmetic sequence function with explicit formula definition, which is more detailed than just 'given an arithmetic sequence' but captures the same concept with additional mathematical rigor", "The natural language mentions 'given its sum S_n' as a condition, but the Lean theorem doesn't declare or reference a general sum variable S_n", "The natural language concludes with the general formula S_n = (n/2) * (a\u2081 + a_n), but the Lean theorem concludes with a specific numerical calculation (sum of first 10 terms equals 175) rather than establishing the general formula. This is a completely different type of conclusion."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The Lean declares an arithmetic sequence function with explicit formula definition, which is more detailed than just 'given an arithmetic sequence' but captures the same concept with additional mathematical rigor\", \"The natural language mentions 'given its sum S_n' as a condition, but the Lean theorem doesn't declare or reference a general sum variable S_n\", 'The natural language concludes with the general formula S_n = (n/2) * (a\u2081 + a_n), but the Lean theorem concludes with a specific numerical calculation (sum of first 10 terms equals 175) rather than establishing the general formula. This is a completely different type of conclusion.']"}, "type": "definition"}, "l6": {"id": "l6", "natural_language": "For n=10, we need to find a_{10}. We use the expression for a_n to find a_{10}=3(10)+1=31.", "statement": "We assume:\n\u2022 The specific formula for the n-th term is a_n = 3n + 1 [l5]\nTherefore, we conclude:\n\u2022 The 10th term is a\u2081\u2080 = 31 [l6].", "dependencies": ["l5"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (a : \u2115 \u2192 \u211d)\n  (l5 : \u2200 n : \u2115, a n = 3 * n + 1) :\n  a 10 = 31 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (a : \u2115 \u2192 \u211d)\n  (l5 : \u2200 n : \u2115, a n = 3 * n + 1) :\n  a 10 = 31 := by\n  have h_main : a 10 = 31 := by\n    have h\u2081 : a 10 = 3 * (10 : \u211d) + 1 := by\n      have h\u2082 := l5 10\n      norm_cast at h\u2082 \u22a2\n      <;> simp_all [mul_comm]\n      <;> ring_nf at *\n      <;> linarith\n    rw [h\u2081]\n    norm_num\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The formula definition is correctly formalized with universal quantification over natural numbers, and the mathematical expression exactly matches the natural language.", "The conclusion about the 10th term being 31 is perfectly captured in the Lean goal statement.", "The logical structure of assumption-to-conclusion reasoning is properly represented as a theorem with hypothesis and goal."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Finally, we use the sum formula for n=10 with a_1=4 and a_{10}=31. We have S_{10}=\\frac{10}{2}(4+31)=5(35)=175.", "statement": "We assume:\n\u2022 The first term is a\u2081 = 4 [l4]\n\u2022 The formula for the sum is S_n = (n/2) * (a\u2081 + a_n) [def_2]\n\u2022 The 10th term is a\u2081\u2080 = 31 [l6]\nTherefore, we conclude:\n\u2022 The sum of the first 10 terms is S\u2081\u2080 = 175 [ts_1].", "dependencies": ["l4", "def_2", "l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d)\n  (h_arith : \u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1 : \u211d) * d)\n  (l4 : a\u2081 = 4)\n  (def_2 : \u2200 n : \u2115, n \u2265 1 \u2192 (\u2211 i in Finset.range n, a (i + 1)) = (n : \u211d) / 2 * (a\u2081 + a n))\n  (l6 : a 10 = 31) :\n  (\u2211 i in Finset.range 10, a (i + 1)) = 175 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a : \u2115 \u2192 \u211d) (a\u2081 d : \u211d)\n  (h_arith : \u2200 n : \u2115, n \u2265 1 \u2192 a n = a\u2081 + (n - 1 : \u211d) * d)\n  (l4 : a\u2081 = 4)\n  (def_2 : \u2200 n : \u2115, n \u2265 1 \u2192 (\u2211 i in Finset.range n, a (i + 1)) = (n : \u211d) / 2 * (a\u2081 + a n))\n  (l6 : a 10 = 31) :\n  (\u2211 i in Finset.range 10, a (i + 1)) = 175 := by\n  have h_sum : (\u2211 i in Finset.range 10, a (i + 1)) = (10 : \u211d) / 2 * (a\u2081 + a 10) := by\n    have h\u2081 : (\u2211 i in Finset.range 10, a (i + 1)) = (10 : \u211d) / 2 * (a\u2081 + a 10) := by\n      have h\u2082 : (\u2211 i in Finset.range 10, a (i + 1)) = (10 : \u211d) / 2 * (a\u2081 + a 10) := by\n        -- Use the given sum formula for n = 10\n        have h\u2083 : (\u2211 i in Finset.range 10, a (i + 1)) = (10 : \u211d) / 2 * (a\u2081 + a 10) := by\n          -- Apply the sum formula for n = 10\n          have h\u2084 : (10 : \u2115) \u2265 1 := by norm_num\n          have h\u2085 : (\u2211 i in Finset.range 10, a (i + 1)) = (10 : \u211d) / 2 * (a\u2081 + a 10) := by\n            -- Use the given sum formula\n            calc\n              (\u2211 i in Finset.range 10, a (i + 1)) = (10 : \u211d) / 2 * (a\u2081 + a 10) := by\n                -- Apply def_2 with n = 10\n                have h\u2086 := def_2 10 (by norm_num)\n                norm_num at h\u2086 \u22a2\n                <;> simp_all [Finset.sum_range_succ]\n                <;> ring_nf at *\n                <;> linarith\n              _ = (10 : \u211d) / 2 * (a\u2081 + a 10) := by rfl\n          exact h\u2085\n        exact h\u2083\n      exact h\u2082\n    exact h\u2081\n  \n  have h_final : (\u2211 i in Finset.range 10, a (i + 1)) = 175 := by\n    have h\u2081 : (\u2211 i in Finset.range 10, a (i + 1)) = (10 : \u211d) / 2 * (a\u2081 + a 10) := h_sum\n    rw [h\u2081]\n    have h\u2082 : a\u2081 = 4 := l4\n    have h\u2083 : a 10 = 31 := l6\n    rw [h\u2082, h\u2083]\n    norm_num\n    <;> linarith\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The first term condition a\u2081 = 4 is correctly captured in both representations.", "The sum formula is mathematically equivalent - S_n notation in natural language corresponds to the explicit sum notation in Lean.", "The 10th term condition a\u2081\u2080 = 31 is correctly represented as a(10) = 31 in Lean.", "The conclusion about S\u2081\u2080 = 175 is correctly formalized using explicit sum notation. The additional arithmetic sequence hypothesis in Lean provides helpful context without contradicting the natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_3", "label": "tc_3", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "tc_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "tc_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_3", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    