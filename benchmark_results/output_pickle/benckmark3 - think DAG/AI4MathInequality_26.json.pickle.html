
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for any triangle with side lengths $a, b, c$ and semi-perimeter $s$, the following inequality holds: $a^{2}(s-a) + b^{2}(s-a) + c^{2}(s-a) \\leq \\frac{3}{2} a b c$.

Proof: Let $E=a^{2}(s-a)+b^{2}(s-b)+c^{2}(s-c)$ with $s=	frac{a+b+c}{2}$. Substituting $s-a=	frac{b+c-a}{2}$ and similar expressions gives $2E=(a^{2}b+a^{2}c+b^{2}a+b^{2}c+c^{2}a+c^{2}b)-(a^{3}+b^{3}+c^{3})$. On the other hand, expanding $(b+c-a)(c+a-b)(a+b-c)$ yields the same expression but with an extra $-2abc$, so $2E=(b+c-a)(c+a-b)(a+b-c)+2abc$, hence $E=	frac{(b+c-a)(c+a-b)(a+b-c)}{2}+abc$. To prove $E\leq 	frac{3}{2}abc$ it suffices to show $(b+c-a)(c+a-b)(a+b-c)\leq abc$. Setting $a=	frac{y+z}{2},\;b=	frac{x+z}{2},\;c=	frac{x+y}{2}$ with $x,y,z>0$, this becomes $8xyz\leq (x+y)(y+z)(z+x)$. Expanding the right-hand side gives $2xyz+(x^{2}y+xy^{2}+y^{2}z+yz^{2}+z^{2}x+x^{2}z)$, so the inequality reduces to $6xyz\leq x^{2}y+xy^{2}+y^{2}z+yz^{2}+z^{2}x+x^{2}z$. Grouping terms shows the right-hand side equals $x(y^{2}+z^{2})+y(x^{2}+z^{2})+z(x^{2}+y^{2})$, which is at least $2yzx+2xzy+2xy z=6xyz$ by AMâ€“GM. Therefore the inequality holds, and we conclude $E\leq	frac{3}{2}abc$.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">ðŸ“Š</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "for any triangle with side lengths $a, b, c$", "statement": "Premise:\n\u2022 a, b, c are the side lengths of a triangle, which are positive real numbers satisfying the triangle inequalities (a+b>c, a+c>b, b+c>a) [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 a + c > b \u2227 b + c > a)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization declares a, b, c as real numbers (\u211d) which matches the natural language statement that they are side lengths of a triangle and real numbers", "The condition '0 < a \u2227 0 < b \u2227 0 < c' in tc_1 perfectly captures that a, b, c are positive real numbers", "The condition 'a + b > c' in tc_1 exactly matches the triangle inequality a + b > c", "The condition 'a + c > b' in tc_1 exactly matches the triangle inequality a + c > b", "The condition 'b + c > a' in tc_1 exactly matches the triangle inequality b + c > a"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "def_1": {"id": "def_1", "natural_language": "with $s=\\frac{a+b+c}{2}$", "statement": "Definition:\n\u2022 Given side lengths a, b, c, the semi-perimeter s is defined as s = (a+b+c)/2 [def_1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c)\n  (h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a) :\n  let s := (a + b + c) / 2\n  a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c) \u2264 (3/2) * a * b * c := by sorry", "lean_pass": false, "error_msg": [{"line": 7, "column": 7, "endLine": 7, "endColumn": 9, "data": "unexpected token '('; expected identifier"}], "tries": 5}, "solved_lemma": {}, "score": {"semantic_score": 0, "semantic_feedback": "Failed Lean syntax check already."}, "error_report": {"error_type": "Formalization", "error_report": "Formalized statement is not a valid Lean4 statement"}, "type": "definition"}, "def_2": {"id": "def_2", "natural_language": "Let $E=a^{2}(s-a)+b^{2}(s-b)+c^{2}(s-c)$", "statement": "Definition:\n\u2022 Let E be the expression E = a\u00b2(s-a) + b\u00b2(s-b) + c\u00b2(s-c) [def_2].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat Classical Polynomial\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem def_2 (a b c : \u211d) (h_pos : 0 < a \u2227 0 < b \u2227 0 < c) \n  (h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a) :\n  let s := (a + b + c) / 2\n  let E := a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c)\n  E = a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c) := by sorry", "lean_pass": true, "error_msg": [], "tries": 4}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization declares a, b, c as real numbers, which matches the natural language stating they are variables. The additional type specification and constraints (positivity and triangle inequality) are extra details not contradicting the natural language.", "The Lean formalization defines s as (a + b + c) / 2, which is a specific mathematical definition consistent with the natural language stating s is a variable. The natural language doesn't specify what s represents, so this additional detail is acceptable.", "The Lean conclusion E = a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c) perfectly matches the natural language conclusion E = a\u00b2(s-a) + b\u00b2(s-b) + c\u00b2(s-c). The notation is equivalent (^ vs \u00b2 and * vs implicit multiplication)."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l1": {"id": "l1", "natural_language": "Substituting $s-a=\\frac{b+c-a}{2}$ and similar expressions", "statement": "We assume:\n\u2022 a, b, c are the side lengths of a triangle [tc_1]\n\u2022 s is the semi-perimeter s = (a+b+c)/2 [def_1]\nTherefore, we conclude:\n\u2022 The expressions s-a, s-b, s-c can be written as s-a = (b+c-a)/2, s-b = (c+a-b)/2, and s-c = (a+b-c)/2 [l1].", "dependencies": ["tc_1", "def_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  (a b c : \u211d) \n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 a + c > b \u2227 b + c > a)\n  (s : \u211d)\n  (def_1 : s = (a + b + c) / 2) :\n  (s - a = (b + c - a) / 2) \u2227 (s - b = (c + a - b) / 2) \u2227 (s - c = (a + b - c) / 2) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l1 \n  (a b c : \u211d) \n  (tc_1 : 0 < a \u2227 0 < b \u2227 0 < c \u2227 a + b > c \u2227 a + c > b \u2227 b + c > a)\n  (s : \u211d)\n  (def_1 : s = (a + b + c) / 2) :\n  (s - a = (b + c - a) / 2) \u2227 (s - b = (c + a - b) / 2) \u2227 (s - c = (a + b - c) / 2) := by\n  have h1 : s - a = (b + c - a) / 2 := by\n    rw [def_1]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try ring_nf at *) <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n  \n  have h2 : s - b = (c + a - b) / 2 := by\n    rw [def_1]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try ring_nf at *) <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n  \n  have h3 : s - c = (a + b - c) / 2 := by\n    rw [def_1]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try ring_nf at *) <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n  \n  exact \u27e8h1, h2, h3\u27e9", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The triangle condition is correctly expanded from the natural language concept to include all necessary mathematical constraints (positivity and triangle inequalities). This is an appropriate mathematical formalization.", "The semi-perimeter definition is translated exactly as stated in the natural language.", "The three equalities for s-a, s-b, and s-c are correctly formalized with proper logical conjunction.", "The real number type declarations are appropriate mathematical assumptions consistent with triangle geometry, even though not explicitly stated in the natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "gives $2E=(a^{2}b+a^{2}c+b^{2}a+b^{2}c+c^{2}a+c^{2}b)-(a^{3}+b^{3}+c^{3})$", "statement": "We assume:\n\u2022 E = a\u00b2(s-a) + b\u00b2(s-b) + c\u00b2(s-c) [def_2]\n\u2022 s-a = (b+c-a)/2, s-b = (c+a-b)/2, s-c = (a+b-c)/2 [l1]\nTherefore, we conclude:\n\u2022 2*E = (a\u00b2b + a\u00b2c + b\u00b2a + b\u00b2c + c\u00b2a + c\u00b2b) - (a\u00b3 + b\u00b3 + c\u00b3) [l2].", "dependencies": ["def_2", "l1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c) \n  (h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a)\n  (s : \u211d)\n  (h_s : s = (a + b + c) / 2)\n  (E : \u211d)\n  (h_E : E = a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c))\n  (h_l1 : s - a = (b + c - a) / 2 \u2227 s - b = (c + a - b) / 2 \u2227 s - c = (a + b - c) / 2) :\n  2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l2\n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c) \n  (h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a)\n  (s : \u211d)\n  (h_s : s = (a + b + c) / 2)\n  (E : \u211d)\n  (h_E : E = a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c))\n  (h_l1 : s - a = (b + c - a) / 2 \u2227 s - b = (c + a - b) / 2 \u2227 s - c = (a + b - c) / 2) :\n  2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) := by\n  have h2E : 2 * E = a^2 * (b + c - a) + b^2 * (c + a - b) + c^2 * (a + b - c) := by\n    have h1 : 2 * E = 2 * (a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c)) := by\n      rw [h_E]\n      <;> ring_nf\n    rw [h1]\n    have h2 : s - a = (b + c - a) / 2 := h_l1.1\n    have h3 : s - b = (c + a - b) / 2 := h_l1.2.1\n    have h4 : s - c = (a + b - c) / 2 := h_l1.2.2\n    rw [h2, h3, h4]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try nlinarith [h_pos.1, h_pos.2.1, h_pos.2.2, h_triangle.1, h_triangle.2.1, h_triangle.2.2])\n  \n  have h_main : 2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) := by\n    have h\u2081 : 2 * E = a^2 * (b + c - a) + b^2 * (c + a - b) + c^2 * (a + b - c) := h2E\n    rw [h\u2081]\n    have h\u2082 : a^2 * (b + c - a) + b^2 * (c + a - b) + c^2 * (a + b - c) = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) := by\n      ring_nf\n      <;>\n      (try norm_num) <;>\n      (try linarith) <;>\n      (try nlinarith [h_pos.1, h_pos.2.1, h_pos.2.2, h_triangle.1, h_triangle.2.1, h_triangle.2.2])\n    rw [h\u2082]\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try nlinarith [h_pos.1, h_pos.2.1, h_pos.2.2, h_triangle.1, h_triangle.2.1, h_triangle.2.2])\n  \n  rw [h_main]", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations are appropriately typed as real numbers, matching the mathematical context", "Definition of E is exactly captured with correct mathematical notation translation (\u00b2 to ^2, implicit multiplication to explicit *)", "All three semi-perimeter relationships from l1 are correctly formalized using conjunction", "The conclusion l2 is precisely translated with proper operator precedence and mathematical notation. Additional constraints (positivity, triangle inequality, semi-perimeter definition) are mathematically consistent additions that don't alter the core logical meaning"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "On the other hand, expanding $(b+c-a)(c+a-b)(a+b-c)$ yields the same expression but with an extra $-2abc$", "statement": "We assume:\n\u2022 a, b, c are real numbers [tc_1]\nTherefore, we conclude:\n\u2022 The expansion of (b+c-a)(c+a-b)(a+b-c) is (a\u00b2b + a\u00b2c + b\u00b2a + b\u00b2c + c\u00b2a + c\u00b2b) - (a\u00b3 + b\u00b3 + c\u00b3) - 2abc [l3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n(h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a)\n\ntheorem l3 : \n  (b + c - a) * (c + a - b) * (a + b - c) = \n  (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (a b c : \u211d)\n\ntheorem l3 : \n  (b + c - a) * (c + a - b) * (a + b - c) = \n  (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c := by\n  have h_main : (b + c - a) * (c + a - b) * (a + b - c) = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c := by\n    ring_nf\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 4}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures the natural language statement. The variables a, b, c are properly declared as real numbers, and the theorem statement exactly matches the algebraic expansion claimed in the natural language. The additional triangle inequality constraint (h_triangle) is an extra condition not mentioned in the natural language, but such additional constraints are acceptable according to the guidelines and do not alter the core mathematical meaning of the algebraic identity."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "so $2E=(b+c-a)(c+a-b)(a+b-c)+2abc$, hence $E=\\frac{(b+c-a)(c+a-b)(a+b-c)}{2}+abc$", "statement": "We assume:\n\u2022 2*E = (a\u00b2b + a\u00b2c + ...) - (a\u00b3 + b\u00b3 + c\u00b3) [l2]\n\u2022 (b+c-a)(c+a-b)(a+b-c) = (a\u00b2b + a\u00b2c + ...) - (a\u00b3 + b\u00b3 + c\u00b3) - 2abc [l3]\nTherefore, we conclude:\n\u2022 E = (b+c-a)(c+a-b)(a+b-c)/2 + abc [l4].", "dependencies": ["l2", "l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c) \n  (h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a)\n  (s : \u211d)\n  (h_s : s = (a + b + c) / 2)\n  (E : \u211d)\n  (h_E : E = a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c))\n  (l2 : 2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3))\n  (l3 : (b + c - a) * (c + a - b) * (a + b - c) = \n        (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c) :\n  E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l4\n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c) \n  (h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a)\n  (s : \u211d)\n  (h_s : s = (a + b + c) / 2)\n  (E : \u211d)\n  (h_E : E = a^2 * (s - a) + b^2 * (s - b) + c^2 * (s - c))\n  (l2 : 2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3))\n  (l3 : (b + c - a) * (c + a - b) * (a + b - c) = \n        (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c) :\n  E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c := by\n  have h_step1 : (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) = (b + c - a) * (c + a - b) * (a + b - c) + 2 * a * b * c := by\n    have h\u2081 : (b + c - a) * (c + a - b) * (a + b - c) = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) - 2 * a * b * c := l3\n    have h\u2082 : (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) = (b + c - a) * (c + a - b) * (a + b - c) + 2 * a * b * c := by\n      linarith\n    exact h\u2082\n  \n  have h_step2 : 2 * E = (b + c - a) * (c + a - b) * (a + b - c) + 2 * a * b * c := by\n    have h\u2082 : 2 * E = (a^2 * b + a^2 * c + b^2 * a + b^2 * c + c^2 * a + c^2 * b) - (a^3 + b^3 + c^3) := l2\n    rw [h\u2082]\n    linarith\n  \n  have h_step3 : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c := by\n    have h\u2083 : 2 * E = (b + c - a) * (c + a - b) * (a + b - c) + 2 * a * b * c := h_step2\n    have h\u2084 : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c := by\n      have h\u2085 : E = ((b + c - a) * (c + a - b) * (a + b - c) + 2 * a * b * c) / 2 := by\n        linarith\n      have h\u2086 : ((b + c - a) * (c + a - b) * (a + b - c) + 2 * a * b * c) / 2 = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c := by\n        ring\n      linarith\n    exact h\u2084\n  \n  rw [h_step3]\n  <;>\n  norm_num", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The variable declarations and constraints (positivity, triangle inequality) are reasonable mathematical context additions that don't contradict the natural language.", "The assumption l2 correctly formalizes the natural language statement, with explicit expansion of the '...' notation to show all six terms a\u00b2b + a\u00b2c + b\u00b2a + b\u00b2c + c\u00b2a + c\u00b2b.", "The assumption l3 perfectly matches the natural language statement with correct expansion of terms and the subtraction of 2abc.", "The conclusion l4 exactly matches the natural language conclusion. The additional definition of E and semi-perimeter s are extra context that don't contradict the stated logical relationships."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l5": {"id": "l5", "natural_language": "To prove $E\\leq \\frac{3}{2}abc$ it suffices to show $(b+c-a)(c+a-b)(a+b-c)\\leq abc$.", "statement": "We assume:\n\u2022 E = (b+c-a)(c+a-b)(a+b-c)/2 + abc [l4]\nTherefore, we conclude:\n\u2022 The inequality E \u2264 (3/2)abc holds if and only if (b+c-a)(c+a-b)(a+b-c) \u2264 abc [l5].", "dependencies": ["l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c) \n  (h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a)\n  (E : \u211d)\n  (h_E : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c)\n  (l4 : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c) :\n  E \u2264 (3/2) * a * b * c \u2194 (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l5\n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c) \n  (h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a)\n  (E : \u211d)\n  (h_E : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c)\n  (l4 : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c) :\n  E \u2264 (3/2) * a * b * c \u2194 (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by\n  have h_forward : E \u2264 (3/2) * a * b * c \u2192 (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by\n    intro h\n    have h\u2081 : (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c \u2264 (3 / 2) * a * b * c := by\n      linarith [h_E, h]\n    have h\u2082 : (b + c - a) * (c + a - b) * (a + b - c) / 2 \u2264 (1 / 2 : \u211d) * a * b * c := by\n      linarith\n    have h\u2083 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by\n      linarith\n    exact h\u2083\n  \n  have h_backward : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c \u2192 E \u2264 (3/2) * a * b * c := by\n    intro h\n    have h\u2081 : (b + c - a) * (c + a - b) * (a + b - c) / 2 \u2264 (1 / 2 : \u211d) * a * b * c := by\n      linarith\n    have h\u2082 : (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c \u2264 (3 / 2) * a * b * c := by\n      linarith\n    have h\u2083 : E \u2264 (3 / 2) * a * b * c := by\n      linarith [h_E]\n    exact h\u2083\n  \n  have h_main : E \u2264 (3/2) * a * b * c \u2194 (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by\n    constructor\n    \u00b7 -- Prove the forward direction: E \u2264 (3/2)abc \u2192 (b+c-a)(c+a-b)(a+b-c) \u2264 abc\n      intro h\n      exact h_forward h\n    \u00b7 -- Prove the backward direction: (b+c-a)(c+a-b)(a+b-c) \u2264 abc \u2192 E \u2264 (3/2)abc\n      intro h\n      exact h_backward h\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["Variable declarations correctly capture the mathematical context with appropriate real number types", "Positivity constraints are additional but mathematically reasonable assumptions not contradicting the natural language", "Triangle inequality constraints are additional but contextually appropriate given the mathematical expressions", "The definition of E perfectly matches the natural language expression l4", "The l4 hypothesis is redundant with h_E but doesn't affect correctness", "The main biconditional statement l5 perfectly captures the natural language conclusion"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "def_3": {"id": "def_3", "natural_language": "Setting $a=\\frac{y+z}{2},\\;b=\\frac{x+z}{2},\\;c=\\frac{x+y}{2}$ with $x,y,z>0$", "statement": "Definition:\n\u2022 Introduce a change of variables (Ravi substitution) where a = (y+z)/2, b = (x+z)/2, c = (x+y)/2. The condition that a,b,c form a triangle [tc_1] is equivalent to x, y, z being positive real numbers [def_3].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem def_3 (x y z a b c : \u211d) \n  (h : a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2) :\n  (x > 0 \u2227 y > 0 \u2227 z > 0) \u2194 \n  (a > 0 \u2227 b > 0 \u2227 c > 0 \u2227 a + b > c \u2227 a + c > b \u2227 b + c > a) := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The equation a = (y+z)/2 is exactly represented in the Lean hypothesis h", "The equation b = (x+z)/2 is exactly represented in the Lean hypothesis h", "The equation c = (x+y)/2 is exactly represented in the Lean hypothesis h", "The condition that a,b,c form a triangle is correctly formalized as the standard triangle inequalities (a + b > c \u2227 a + c > b \u2227 b + c > a) plus positivity conditions (a > 0 \u2227 b > 0 \u2227 c > 0)", "The conclusion that x, y, z are positive real numbers is exactly captured as x > 0 \u2227 y > 0 \u2227 z > 0 in the Lean formalization"]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "definition"}, "l6": {"id": "l6", "natural_language": "this becomes $8xyz\\leq (x+y)(y+z)(z+x)$", "statement": "We assume:\n\u2022 The inequality to prove is (b+c-a)(c+a-b)(a+b-c) \u2264 abc [l5]\n\u2022 The substitution a=(y+z)/2, b=(x+z)/2, c=(x+y)/2 with x,y,z > 0 [def_3]\nTherefore, we conclude:\n\u2022 The inequality is equivalent to 8xyz \u2264 (x+y)(y+z)(z+x) [l6].", "dependencies": ["l5", "def_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (x y z a b c : \u211d)\n  (h_def_3 : a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2)\n  (h_pos : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (h_l5 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c) :\n  8 * x * y * z \u2264 (x + y) * (y + z) * (z + x) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l6\n  (x y z a b c : \u211d)\n  (h_def_3 : a = (y + z) / 2 \u2227 b = (x + z) / 2 \u2227 c = (x + y) / 2)\n  (h_pos : x > 0 \u2227 y > 0 \u2227 z > 0)\n  (h_l5 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c) :\n  8 * x * y * z \u2264 (x + y) * (y + z) * (z + x) := by\n  have h1 : b + c - a = x := by\n    have h\u2081 : a = (y + z) / 2 := h_def_3.1\n    have h\u2082 : b = (x + z) / 2 := h_def_3.2.1\n    have h\u2083 : c = (x + y) / 2 := h_def_3.2.2\n    rw [h\u2081, h\u2082, h\u2083]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try ring_nf at *) <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n  \n  have h2 : c + a - b = y := by\n    have h\u2081 : a = (y + z) / 2 := h_def_3.1\n    have h\u2082 : b = (x + z) / 2 := h_def_3.2.1\n    have h\u2083 : c = (x + y) / 2 := h_def_3.2.2\n    rw [h\u2081, h\u2082, h\u2083]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try ring_nf at *) <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n  \n  have h3 : a + b - c = z := by\n    have h\u2081 : a = (y + z) / 2 := h_def_3.1\n    have h\u2082 : b = (x + z) / 2 := h_def_3.2.1\n    have h\u2083 : c = (x + y) / 2 := h_def_3.2.2\n    rw [h\u2081, h\u2082, h\u2083]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try ring_nf at *) <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n  \n  have h4 : a * b * c = (x + y) * (y + z) * (z + x) / 8 := by\n    have h\u2081 : a = (y + z) / 2 := h_def_3.1\n    have h\u2082 : b = (x + z) / 2 := h_def_3.2.1\n    have h\u2083 : c = (x + y) / 2 := h_def_3.2.2\n    rw [h\u2081, h\u2082, h\u2083]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith) <;>\n    (try ring_nf at *) <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n  \n  have h5 : x * y * z \u2264 (x + y) * (y + z) * (z + x) / 8 := by\n    have h\u2085 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := h_l5\n    have h\u2085\u2081 : (b + c - a) * (c + a - b) * (a + b - c) = x * y * z := by\n      calc\n        (b + c - a) * (c + a - b) * (a + b - c) = x * y * z := by\n          rw [h1, h2, h3]\n          <;> ring_nf\n        _ = x * y * z := by ring\n    have h\u2085\u2082 : a * b * c = (x + y) * (y + z) * (z + x) / 8 := h4\n    have h\u2085\u2083 : x * y * z \u2264 (x + y) * (y + z) * (z + x) / 8 := by\n      linarith\n    exact h\u2085\u2083\n  \n  have h6 : 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x) := by\n    have h\u2086 : x * y * z \u2264 (x + y) * (y + z) * (z + x) / 8 := h5\n    have h\u2087 : 8 * (x * y * z) \u2264 (x + y) * (y + z) * (z + x) := by\n      -- Multiply both sides by 8 to eliminate the fraction\n      have h\u2087\u2081 : 8 * (x * y * z) \u2264 8 * ((x + y) * (y + z) * (z + x) / 8) := by\n        -- Use the fact that multiplying by a positive number preserves the inequality\n        have h\u2087\u2082 : 0 < (8 : \u211d) := by norm_num\n        nlinarith\n      -- Simplify the right-hand side\n      have h\u2087\u2083 : 8 * ((x + y) * (y + z) * (z + x) / 8) = (x + y) * (y + z) * (z + x) := by\n        ring\n      -- Combine the inequalities\n      linarith\n    -- Rearrange the left-hand side to match the desired form\n    have h\u2088 : 8 * x * y * z = 8 * (x * y * z) := by ring\n    rw [h\u2088]\n    linarith\n  \n  exact h6", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization excellently captures all components of the natural language statement. The variable declarations, substitution definitions, original inequality, and target conclusion are all precisely represented. The logical structure properly reflects the assumption-conclusion relationship described in the natural language. The additional formal elements (type declarations, hypothesis naming) enhance the formalization without introducing any inconsistencies."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l7": {"id": "l7", "natural_language": "Expanding the right-hand side gives $2xyz+(x^{2}y+xy^{2}+y^{2}z+yz^{2}+z^{2}x+x^{2}z)$, so the inequality reduces to $6xyz\\leq x^{2}y+xy^{2}+y^{2}z+yz^{2}+z^{2}x+x^{2}z$.", "statement": "We assume:\n\u2022 The inequality to prove is 8xyz \u2264 (x+y)(y+z)(z+x) [l6]\nTherefore, we conclude:\n\u2022 This inequality is algebraically equivalent to 6xyz \u2264 x\u00b2y + xy\u00b2 + y\u00b2z + yz\u00b2 + z\u00b2x + xz\u00b2 [l7].", "dependencies": ["l6"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l7\n  (x y z : \u211d)\n  (h_pos : x > 0 \u2227 y > 0 \u2227 z > 0) :\n  (8 * x * y * z \u2264 (x + y) * (y + z) * (z + x)) \u2194 \n  (6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x^2 * z) := by\nsorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l7\n  (x y z : \u211d)\n  (h_pos : x > 0 \u2227 y > 0 \u2227 z > 0) :\n  (8 * x * y * z \u2264 (x + y) * (y + z) * (z + x)) \u2194 \n  (6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x^2 * z) := by\n  have h_expand : (x + y) * (y + z) * (z + x) = x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x^2 * z + 2 * x * y * z := by\n    have h1 : (x + y) * (y + z) * (z + x) = (x + y) * ((y + z) * (z + x)) := by ring\n    rw [h1]\n    have h2 : (y + z) * (z + x) = y * z + y * x + z * z + z * x := by ring\n    rw [h2]\n    have h3 : (x + y) * (y * z + y * x + z * z + z * x) = x * (y * z) + x * (y * x) + x * (z * z) + x * (z * x) + y * (y * z) + y * (y * x) + y * (z * z) + y * (z * x) := by ring\n    rw [h3]\n    ring_nf\n    <;>\n    (try norm_num) <;>\n    (try linarith [h_pos.1, h_pos.2.1, h_pos.2.2]) <;>\n    (try ring_nf at *) <;>\n    (try nlinarith [h_pos.1, h_pos.2.1, h_pos.2.2])\n  \n  have h_main : (8 * x * y * z \u2264 (x + y) * (y + z) * (z + x)) \u2194 (6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x^2 * z) := by\n    constructor\n    \u00b7 -- Prove the forward direction: 8xyz \u2264 (x+y)(y+z)(z+x) \u2192 6xyz \u2264 x\u00b2y + xy\u00b2 + y\u00b2z + yz\u00b2 + z\u00b2x + x\u00b2z\n      intro h\n      have h\u2081 : 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x) := h\n      have h\u2082 : (x + y) * (y + z) * (z + x) = x ^ 2 * y + x * y ^ 2 + y ^ 2 * z + y * z ^ 2 + z ^ 2 * x + x ^ 2 * z + 2 * x * y * z := h_expand\n      rw [h\u2082] at h\u2081\n      -- Subtract 2xyz from both sides to get the desired inequality\n      have h\u2083 : 6 * x * y * z \u2264 x ^ 2 * y + x * y ^ 2 + y ^ 2 * z + y * z ^ 2 + z ^ 2 * x + x ^ 2 * z := by\n        linarith [h_pos.1, h_pos.2.1, h_pos.2.2]\n      exact h\u2083\n    \u00b7 -- Prove the reverse direction: 6xyz \u2264 x\u00b2y + xy\u00b2 + y\u00b2z + yz\u00b2 + z\u00b2x + x\u00b2z \u2192 8xyz \u2264 (x+y)(y+z)(z+x)\n      intro h\n      have h\u2081 : 6 * x * y * z \u2264 x ^ 2 * y + x * y ^ 2 + y ^ 2 * z + y * z ^ 2 + z ^ 2 * x + x ^ 2 * z := h\n      have h\u2082 : (x + y) * (y + z) * (z + x) = x ^ 2 * y + x * y ^ 2 + y ^ 2 * z + y * z ^ 2 + z ^ 2 * x + x ^ 2 * z + 2 * x * y * z := h_expand\n      -- Add 2xyz to both sides to get the desired inequality\n      have h\u2083 : 8 * x * y * z \u2264 (x + y) * (y + z) * (z + x) := by\n        calc\n          8 * x * y * z = 6 * x * y * z + 2 * x * y * z := by ring\n          _ \u2264 (x ^ 2 * y + x * y ^ 2 + y ^ 2 * z + y * z ^ 2 + z ^ 2 * x + x ^ 2 * z) + 2 * x * y * z := by\n            linarith [h_pos.1, h_pos.2.1, h_pos.2.2]\n          _ = x ^ 2 * y + x * y ^ 2 + y ^ 2 * z + y * z ^ 2 + z ^ 2 * x + x ^ 2 * z + 2 * x * y * z := by ring\n          _ = (x + y) * (y + z) * (z + x) := by\n            rw [h\u2082]\n            <;> ring\n      exact h\u2083\n  \n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization accurately captures the mathematical equivalence between the two inequalities using a biconditional statement. The expressions 8xyz \u2264 (x+y)(y+z)(z+x) and 6xyz \u2264 x\u00b2y + xy\u00b2 + y\u00b2z + yz\u00b2 + z\u00b2x + xz\u00b2 are correctly formalized. The additional positivity constraints (x > 0 \u2227 y > 0 \u2227 z > 0) and real number type declarations are reasonable mathematical assumptions that don't contradict the natural language statement. The biconditional (\u2194) perfectly represents the 'algebraically equivalent' relationship described in natural language."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "l8": {"id": "l8", "natural_language": "Grouping terms shows the right-hand side equals $x(y^{2}+z^{2})+y(x^{2}+z^{2})+z(x^{2}+y^{2})$, which is at least $2yzx+2xzy+2xy z=6xyz$ by AM\u2013GM.", "statement": "We assume:\n\u2022 x, y, z are positive real numbers [def_3]\nTherefore, we conclude:\n\u2022 The inequality 6xyz \u2264 x\u00b2y + xy\u00b2 + y\u00b2z + yz\u00b2 + z\u00b2x + xz\u00b2 is true [l8].", "dependencies": ["def_3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l8 (x y z : \u211d) (h : x > 0 \u2227 y > 0 \u2227 z > 0) :\n  6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x * z^2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l8 (x y z : \u211d) (h : x > 0 \u2227 y > 0 \u2227 z > 0) :\n  6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x * z^2 := by\n  have h\u2081 : x^2 * y + y * z^2 \u2265 2 * x * y * z := by\n    have h\u2081 : 0 \u2264 y * (x - z)^2 := by\n      -- Prove that y * (x - z)^2 is non-negative\n      have h\u2082 : 0 \u2264 (x - z)^2 := sq_nonneg (x - z)\n      have h\u2083 : 0 < y := by linarith\n      nlinarith\n    -- Expand and rearrange the inequality to match the desired form\n    nlinarith [sq_nonneg (x - z)]\n  \n  have h\u2082 : y^2 * z + z * x^2 \u2265 2 * x * y * z := by\n    have h\u2082 : 0 \u2264 z * (y - x)^2 := by\n      have h\u2083 : 0 \u2264 (y - x)^2 := sq_nonneg (y - x)\n      have h\u2084 : 0 < z := by linarith\n      nlinarith\n    nlinarith [sq_nonneg (y - x)]\n  \n  have h\u2083 : z^2 * x + x * y^2 \u2265 2 * x * y * z := by\n    have h\u2083 : 0 \u2264 x * (z - y)^2 := by\n      have h\u2084 : 0 \u2264 (z - y)^2 := sq_nonneg (z - y)\n      have h\u2085 : 0 < x := by linarith\n      nlinarith\n    nlinarith [sq_nonneg (z - y)]\n  \n  have h_main : x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x * z^2 \u2265 6 * x * y * z := by\n    have h\u2084 : x^2 * y + y * z^2 \u2265 2 * x * y * z := h\u2081\n    have h\u2085 : y^2 * z + z * x^2 \u2265 2 * x * y * z := h\u2082\n    have h\u2086 : z^2 * x + x * y^2 \u2265 2 * x * y * z := h\u2083\n    have h\u2087 : x^2 * y + y * z^2 + (y^2 * z + z * x^2) + (z^2 * x + x * y^2) \u2265 2 * x * y * z + 2 * x * y * z + 2 * x * y * z := by\n      linarith\n    have h\u2088 : x^2 * y + y * z^2 + (y^2 * z + z * x^2) + (z^2 * x + x * y^2) = x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x * z^2 := by\n      ring\n    have h\u2089 : 2 * x * y * z + 2 * x * y * z + 2 * x * y * z = 6 * x * y * z := by ring\n    linarith\n  \n  linarith", "lean_pass": false, "lean_verify": false, "error_msg": [{"line": 35, "column": 139, "endLine": 36, "endColumn": 10, "data": "unsolved goals\nx y z : \u211d\nh : x > 0 \u2227 y > 0 \u2227 z > 0\nh\u2081 : x ^ 2 * y + y * z ^ 2 \u2265 2 * x * y * z\nh\u2082 : y ^ 2 * z + z * x ^ 2 \u2265 2 * x * y * z\nh\u2083 : z ^ 2 * x + x * y ^ 2 \u2265 2 * x * y * z\nh\u2084 : x ^ 2 * y + y * z ^ 2 \u2265 2 * x * y * z\nh\u2085 : y ^ 2 * z + z * x ^ 2 \u2265 2 * x * y * z\nh\u2086 : z ^ 2 * x + x * y ^ 2 \u2265 2 * x * y * z\nh\u2087 :\n  x ^ 2 * y + y * z ^ 2 + (y ^ 2 * z + z * x ^ 2) + (z ^ 2 * x + x * y ^ 2) \u2265\n    2 * x * y * z + 2 * x * y * z + 2 * x * y * z\n\u22a2 x * y ^ 2 + x * z ^ 2 + x ^ 2 * y + x ^ 2 * z + y * z ^ 2 + y ^ 2 * z =\n    x * y ^ 2 + x * z ^ 2 * 2 + x ^ 2 * y + y * z ^ 2 + y ^ 2 * z"}], "tries": 5}, "score": {"semantic_score": 0, "semantic_feedback": ["The variable declarations and positivity constraints are correctly captured. The Lean formalization properly declares x, y, z as real numbers and includes the hypothesis that all three are positive, which exactly matches the natural language assumption.", "The inequality statement is perfectly translated. All terms on both sides of the inequality match exactly between the natural language and Lean formalization, with proper mathematical notation conversion (e.g., x\u00b2 to x^2, xyz to x * y * z).", "The tactics contained syntactic mistakes, so final score is 0."]}, "error_report": {"error_type": "Prover", "error_report": "Formalization appears correct (score=1.0 > 0.6), but the prover could neither prove the lemma nor its negation. This may be due to prover limitations, missing lemmas, or incomplete context."}, "solved_negation": {"lean_verify": false, "lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem l8 (x y z : \u211d) (h : x > 0 \u2227 y > 0 \u2227 z > 0) :\n  6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x * z^2 := by\n  have h\u2081 : x * (y - z)^2 + y * (z - x)^2 + z * (x - y)^2 = x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x * z^2 - 6 * x * y * z := by\n    ring_nf\n    <;>\n    (try norm_num)\n    <;>\n    (try linarith)\n    <;>\n    (try nlinarith)\n  \n  have h\u2082 : x * (y - z)^2 + y * (z - x)^2 + z * (x - y)^2 \u2265 0 := by\n    have h\u2082\u2081 : 0 \u2264 x * (y - z) ^ 2 := by\n      have h\u2082\u2081\u2081 : 0 \u2264 (y - z) ^ 2 := sq_nonneg (y - z)\n      have h\u2082\u2081\u2082 : 0 < x := by linarith\n      nlinarith\n    have h\u2082\u2082 : 0 \u2264 y * (z - x) ^ 2 := by\n      have h\u2082\u2082\u2081 : 0 \u2264 (z - x) ^ 2 := sq_nonneg (z - x)\n      have h\u2082\u2082\u2082 : 0 < y := by linarith\n      nlinarith\n    have h\u2082\u2083 : 0 \u2264 z * (x - y) ^ 2 := by\n      have h\u2082\u2083\u2081 : 0 \u2264 (x - y) ^ 2 := sq_nonneg (x - y)\n      have h\u2082\u2083\u2082 : 0 < z := by linarith\n      nlinarith\n    linarith\n  \n  have h\u2083 : x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x * z^2 - 6 * x * y * z \u2265 0 := by\n    linarith\n  \n  have h\u2084 : 6 * x * y * z \u2264 x^2 * y + x * y^2 + y^2 * z + y * z^2 + z^2 * x + x * z^2 := by\n    linarith\n  \n  linarith"}, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Therefore the inequality holds, and we conclude $E\\leq\\frac{3}{2}abc$.", "statement": "We assume:\n\u2022 E \u2264 (3/2)abc is equivalent to (b+c-a)(c+a-b)(a+b-c) \u2264 abc [l5]\n\u2022 (b+c-a)(c+a-b)(a+b-c) \u2264 abc is equivalent to 8xyz \u2264 (x+y)(y+z)(z+x) [l6]\n\u2022 8xyz \u2264 (x+y)(y+z)(z+x) is equivalent to 6xyz \u2264 x\u00b2y + ... + xz\u00b2 [l7]\n\u2022 6xyz \u2264 x\u00b2y + ... + xz\u00b2 is true [l8]\nTherefore, we conclude:\n\u2022 E \u2264 (3/2)abc [ts_1].", "dependencies": ["l5", "l6", "l7", "l8"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c) \n  (h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a)\n  (E : \u211d)\n  (h_E : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c)\n  (l5 : E \u2264 (3/2) * a * b * c \u2194 (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c)\n  (l6 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c \u2194 \n        8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x))\n  (l7 : 8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x) \u2194 \n        6 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 \n        ((y + z) / 2)^2 * ((x + z) / 2) + ((y + z) / 2) * ((x + z) / 2)^2 + \n        ((x + z) / 2)^2 * ((x + y) / 2) + ((x + z) / 2) * ((x + y) / 2)^2 + \n        ((x + y) / 2)^2 * ((y + z) / 2) + ((x + y) / 2) * ((y + z) / 2)^2)\n  (l8 : 6 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 \n        ((y + z) / 2)^2 * ((x + z) / 2) + ((y + z) / 2) * ((x + z) / 2)^2 + \n        ((x + z) / 2)^2 * ((x + y) / 2) + ((x + z) / 2) * ((x + y) / 2)^2 + \n        ((x + y) / 2)^2 * ((y + z) / 2) + ((x + y) / 2) * ((y + z) / 2)^2) :\n  E \u2264 (3/2) * a * b * c := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1\n  (a b c : \u211d) \n  (h_pos : 0 < a \u2227 0 < b \u2227 0 < c) \n  (h_triangle : a + b > c \u2227 a + c > b \u2227 b + c > a)\n  (E : \u211d)\n  (h_E : E = (b + c - a) * (c + a - b) * (a + b - c) / 2 + a * b * c)\n  (l5 : E \u2264 (3/2) * a * b * c \u2194 (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c)\n  (l6 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c \u2194 \n        8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x))\n  (l7 : 8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x) \u2194 \n        6 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 \n        ((y + z) / 2)^2 * ((x + z) / 2) + ((y + z) / 2) * ((x + z) / 2)^2 + \n        ((x + z) / 2)^2 * ((x + y) / 2) + ((x + z) / 2) * ((x + y) / 2)^2 + \n        ((x + y) / 2)^2 * ((y + z) / 2) + ((x + y) / 2) * ((y + z) / 2)^2)\n  (l8 : 6 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 \n        ((y + z) / 2)^2 * ((x + z) / 2) + ((y + z) / 2) * ((x + z) / 2)^2 + \n        ((x + z) / 2)^2 * ((x + y) / 2) + ((x + z) / 2) * ((x + y) / 2)^2 + \n        ((x + y) / 2)^2 * ((y + z) / 2) + ((x + y) / 2) * ((y + z) / 2)^2) :\n  E \u2264 (3/2) * a * b * c := by\n  have h9 : 8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x) := by\n    have h9\u2081 : 6 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 ((y + z) / 2)^2 * ((x + z) / 2) + ((y + z) / 2) * ((x + z) / 2)^2 + ((x + z) / 2)^2 * ((x + y) / 2) + ((x + z) / 2) * ((x + y) / 2)^2 + ((x + y) / 2)^2 * ((y + z) / 2) + ((x + y) / 2) * ((y + z) / 2)^2 := by\n      exact l8\n    have h9\u2082 : (8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x)) \u2194 (6 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 ((y + z) / 2)^2 * ((x + z) / 2) + ((y + z) / 2) * ((x + z) / 2)^2 + ((x + z) / 2)^2 * ((x + y) / 2) + ((x + z) / 2) * ((x + y) / 2)^2 + ((x + y) / 2)^2 * ((y + z) / 2) + ((x + y) / 2) * ((y + z) / 2)^2) := by\n      exact l7\n    have h9\u2083 : 8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x) := by\n      have h9\u2084 : 6 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 ((y + z) / 2)^2 * ((x + z) / 2) + ((y + z) / 2) * ((x + z) / 2)^2 + ((x + z) / 2)^2 * ((x + y) / 2) + ((x + z) / 2) * ((x + y) / 2)^2 + ((x + y) / 2)^2 * ((y + z) / 2) + ((x + y) / 2) * ((y + z) / 2)^2 := l8\n      have h9\u2085 : (8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x)) \u2194 (6 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 ((y + z) / 2)^2 * ((x + z) / 2) + ((y + z) / 2) * ((x + z) / 2)^2 + ((x + z) / 2)^2 * ((x + y) / 2) + ((x + z) / 2) * ((x + y) / 2)^2 + ((x + y) / 2)^2 * ((y + z) / 2) + ((x + y) / 2) * ((y + z) / 2)^2) := l7\n      have h9\u2086 : 8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x) := by\n        have h9\u2087 : 6 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 ((y + z) / 2)^2 * ((x + z) / 2) + ((y + z) / 2) * ((x + z) / 2)^2 + ((x + z) / 2)^2 * ((x + y) / 2) + ((x + z) / 2) * ((x + y) / 2)^2 + ((x + y) / 2)^2 * ((y + z) / 2) + ((x + y) / 2) * ((y + z) / 2)^2 := l8\n        have h9\u2088 : (8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x)) \u2194 (6 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 ((y + z) / 2)^2 * ((x + z) / 2) + ((y + z) / 2) * ((x + z) / 2)^2 + ((x + z) / 2)^2 * ((x + y) / 2) + ((x + z) / 2) * ((x + y) / 2)^2 + ((x + y) / 2)^2 * ((y + z) / 2) + ((x + y) / 2) * ((y + z) / 2)^2) := l7\n        -- Use the fact that the RHS of l7 is true to deduce that the LHS of l7 is true\n        have h9\u2089 : 8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x) := by\n          rw [h9\u2088] at *\n          exact h9\u2087\n        exact h9\u2089\n      exact h9\u2086\n    exact h9\u2083\n  \n  have h10 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by\n    have h10\u2081 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c \u2194 8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x) := by\n      exact l6\n    have h10\u2082 : 8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x) := h9\n    have h10\u2083 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by\n      have h10\u2084 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c \u2194 8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x) := l6\n      have h10\u2085 : 8 * ((y + z) / 2) * ((x + z) / 2) * ((x + y) / 2) \u2264 (x + y) * (y + z) * (z + x) := h9\n      have h10\u2086 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by\n        rw [h10\u2084] at *\n        exact h10\u2085\n      exact h10\u2086\n    exact h10\u2083\n  \n  have h11 : E \u2264 (3/2) * a * b * c := by\n    have h11\u2081 : E \u2264 (3/2) * a * b * c \u2194 (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := by\n      exact l5\n    have h11\u2082 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := h10\n    have h11\u2083 : E \u2264 (3/2) * a * b * c := by\n      have h11\u2084 : E \u2264 (3/2) * a * b * c \u2194 (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := l5\n      have h11\u2085 : (b + c - a) * (c + a - b) * (a + b - c) \u2264 a * b * c := h10\n      have h11\u2086 : E \u2264 (3/2) * a * b * c := by\n        rw [h11\u2084] at *\n        exact h11\u2085\n      exact h11\u2086\n    exact h11\u2083\n  \n  exact h11", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["Variable declarations and mathematical constraints (positivity, triangle inequality) are appropriate additions that don't contradict the natural language.", "The definition of E, while not explicit in natural language, provides necessary context for the equivalences to be meaningful.", "Statement l5 correctly captures the equivalence between E \u2264 (3/2)abc and (b+c-a)(c+a-b)(a+b-c) \u2264 abc.", "Statement l6 has major issues: variables x, y, z are introduced without defining their relationship to a, b, c, and the left side uses ((y+z)/2) * ((x+z)/2) * ((x+y)/2) instead of xyz as stated in natural language.", "Statement l7 continues the same problems with undefined variable relationships and incorrect expressions that don't match the natural language 'xyz' notation.", "Statement l8 maintains the same structural inconsistencies with the natural language description.", "The final goal correctly states E \u2264 (3/2) * a * b * c as intended."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"Variable declarations and mathematical constraints (positivity, triangle inequality) are appropriate additions that don't contradict the natural language.\", 'The definition of E, while not explicit in natural language, provides necessary context for the equivalences to be meaningful.', 'Statement l5 correctly captures the equivalence between E \u2264 (3/2)abc and (b+c-a)(c+a-b)(a+b-c) \u2264 abc.', 'Statement l6 has major issues: variables x, y, z are introduced without defining their relationship to a, b, c, and the left side uses ((y+z)/2) * ((x+z)/2) * ((x+y)/2) instead of xyz as stated in natural language.', \"Statement l7 continues the same problems with undefined variable relationships and incorrect expressions that don't match the natural language 'xyz' notation.\", 'Statement l8 maintains the same structural inconsistencies with the natural language description.', 'The final goal correctly states E \u2264 (3/2) * a * b * c as intended.']"}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_1", "label": "def_1", "color": {"background": "#cfb795", "border": "#fa2c07", "highlight": {"background": "#cfb795", "border": "#fa2c07"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_2", "label": "def_2", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l5", "label": "l5", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "def_3", "label": "def_3", "color": {"background": "#cfb795", "border": "#00ff00", "highlight": {"background": "#cfb795", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l6", "label": "l6", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l7", "label": "l7", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l8", "label": "l8", "color": {"background": "#8dafcc", "border": "#FFA500", "highlight": {"background": "#8dafcc", "border": "#FFA500"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "def_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "def_3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "def_2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "l5", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l5", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "l6", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "def_3", "to": "l8", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "l7", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l6", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l7", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l8", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    