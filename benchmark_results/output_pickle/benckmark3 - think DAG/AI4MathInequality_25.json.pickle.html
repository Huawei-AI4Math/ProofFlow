
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Proof Graph Visualization</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                display: flex;
                height: 100vh;
                background: #f0f0f0;
            }
            
            #left-panel {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: white;
                border-right: 2px solid #ddd;
                height: 100vh;
                overflow: hidden;
            }
            
            #proof-str-panel {
                background: #f8f9fa;
                border-bottom: 2px solid #ddd;
                padding: 15px;
                height: 200px;
                overflow-y: auto;
                flex-shrink: 0;
            }
            
            #proof-str-title {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            #proof-str-content {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                background: white;
                padding: 12px;
                border-radius: 4px;
                border: 1px solid #e2e8f0;
            }
            
            #graph-container {
                flex: 1;
                position: relative;
                background: white;
                min-height: 0;
                overflow: hidden;
            }
            
            #mynetwork {
                width: 100%;
                height: 100%;
            }
            
            #info-panel {
                width: 40%;
                max-width: 600px;
                background: white;
                overflow-y: auto;
                padding: 20px;
                box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            }
            
            #info-panel.hidden {
                display: none;
            }
            
            .info-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
            }
            
            .info-header h2 {
                margin: 0;
                font-size: 24px;
            }
            
            .info-header .node-type {
                opacity: 0.9;
                font-size: 14px;
                margin-top: 5px;
            }
            
            .field-group {
                background: #f8f9fa;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            
            .field-name {
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 8px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .field-value {
                color: #4a5568;
                line-height: 1.6;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 13px;
            }
            
            .field-value.code {
                color: #4a5568;
                padding: 12px;
                border-radius: 4px;
                overflow-x: auto;
            }
            
            .sub-dict {
                background: #ffffff;
                border: 1px solid #e2e8f0;
                border-radius: 4px;
                padding: 10px;
                margin: 8px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            
            .sub-dict-title {
                font-weight: 600;
                color: #4a5568;
                margin-bottom: 8px;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .sub-dict-content {
                color: #2d3748;
                line-height: 1.5;
                font-size: 12px;
            }
            
            .placeholder {
                text-align: center;
                color: #718096;
                padding: 40px;
                font-size: 18px;
            }
            
            .placeholder-icon {
                font-size: 48px;
                margin-bottom: 20px;
                opacity: 0.3;
            }
            
            #toggle-panel {
                position: absolute;
                right: 10px;
                top: 10px;
                z-index: 1000;
                background: #667eea;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.3s;
            }
            
            #toggle-panel:hover {
                background: #764ba2;
            }
            
            .legend {
                position: absolute;
                top: 20px;
                left: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 100;
                max-width: 300px;
            }
            
            .legend-section {
                margin-bottom: 15px;
            }
            
            .legend-section:last-child {
                margin-bottom: 0;
            }
            
            .legend-title {
                font-weight: 600;
                font-size: 12px;
                color: #2d3748;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 4px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            
            .legend-item:last-child {
                margin-bottom: 0;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
            
            .resizer {
                background: #ddd;
                cursor: col-resize;
                width: 4px;
                height: 100%;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1000;
            }
            
            .resizer:hover {
                background: #bbb;
            }
            
            .resizer-vertical {
                background: #ddd;
                cursor: row-resize;
                height: 4px;
                width: 100%;
                position: absolute;
                bottom: 0;
                left: 0;
                z-index: 1000;
            }
            
            .resizer-vertical:hover {
                background: #bbb;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div id="left-panel">
                <div id="proof-str-panel">
                    <div id="proof-str-title">Informal theorem and proof</div>
                    <div id="proof-str-content">Theorem: Prove that for any angles $\\alpha, \\beta, \\gamma$ of a triangle and any real number $t$, the following inequality holds: $\\cos \\alpha + t(\\cos \\beta + \\cos \\gamma) \\leq 1 + \\frac{t^2}{2}$.

Proof: Let $\alpha, eta, \gamma$ be the angles of a triangle, so $\alpha + eta + \gamma = \pi$ and $\alpha, eta, \gamma \in (0, \pi)$, which gives $\cos\alpha = -\cos(eta+\gamma)$. Consider the non-negative expression $(\coseta + \cos\gamma - t)^2 + (\sineta - \sin\gamma)^2 \ge 0$. Expanding and grouping terms using $\cos^2 x + \sin^2 x = 1$ and the angle addition formula $\cos(eta+\gamma) = \coseta \cos\gamma - \sineta \sin\gamma$, we obtain $2 + t^2 + 2\cos(eta+\gamma) - 2t(\coseta + \cos\gamma) \ge 0$, which rearranges to $-\cos(eta+\gamma) + t(\coseta + \cos\gamma) \le 1 + rac{t^2}{2}$. Substituting $-\cos(eta+\gamma) = \cos\alpha$ yields $\cos\alpha + t(\coseta + \cos\gamma) \le 1 + rac{t^2}{2}$, completing the proof.
</div>
                    <div class="resizer-vertical" id="vertical-resizer"></div>
                </div>
                <div id="graph-container">
                    <button id="toggle-panel" onclick="togglePanel()">Toggle Info Panel</button>
                    <div class="legend">
                        <div class="legend-section">
                            <div class="legend-title">Node Types</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #eba0a0;"></div>
                                <span>Theorem Conditions (tc)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #cfb795 ;"></div>
                                <span>Theorem Definitions (def)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #8dafcc;"></div>
                                <span>Lemmas (l)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #a3c2a8;"></div>
                                <span>Theorem Solutions (ts)</span>
                            </div>

                        </div>
                        <div class="legend-section">
                            <div class="legend-title">Verification Status</div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #fa2c07;"></div>
                                <span>Formalization failed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #FFA500;"></div>
                                <span>Formalization passed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #FFFFFF; border: 2px solid #00ff00;"></div>
                                <span>Fully verified</span>
                            </div>
                        </div>
                    </div>
                    <div id="mynetwork"></div>
                </div>
            </div>
            
            <div class="resizer" id="horizontal-resizer"></div>
            
            <div id="info-panel">
                <div id="info-content">
                    <div class="placeholder">
                        <div class="placeholder-icon">📊</div>
                        <p>Click on a node to view its details</p>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            // Store node information
            var nodeInfo = {"tc_1": {"id": "tc_1", "natural_language": "Let $\\alpha, \\beta, \\gamma$ be the angles of a triangle, so $\\alpha + \\beta + \\gamma = \\pi$ and $\\alpha, \\beta, \\gamma \\in (0, \\pi)$", "statement": "Premise:\n\u2022 $\\alpha, \\beta, \\gamma$ are angles of a triangle, which implies $\\alpha, \\beta, \\gamma \\in (0, \\pi)$ and $\\alpha + \\beta + \\gamma = \\pi$ [tc_1].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem triangle_angles_inequality (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 \u2208 Set.Ioo 0 Real.pi \u2227 \u03b2 \u2208 Set.Ioo 0 Real.pi \u2227 \u03b3 \u2208 Set.Ioo 0 Real.pi \u2227 \u03b1 + \u03b2 + \u03b3 = Real.pi) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 4}, "solved_lemma": {}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The natural language states that \u03b1, \u03b2, \u03b3 are angles of a triangle as a condition, but in Lean this is formalized as explicit constraints in the hypothesis rather than a semantic statement about being triangle angles. More critically, the Lean theorem introduces an additional variable t that doesn't appear in the natural language at all.", "The natural language concludes that \u03b1, \u03b2, \u03b3 \u2208 (0, \u03c0), but the Lean theorem treats this as a hypothesis/condition rather than a conclusion. The Lean theorem instead concludes with a completely different inequality involving cosines.", "The natural language concludes that \u03b1 + \u03b2 + \u03b3 = \u03c0, but again the Lean theorem treats this as a hypothesis rather than a conclusion. The actual conclusion in Lean is about cosines and an inequality that doesn't appear anywhere in the natural language."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: [\"The natural language states that \u03b1, \u03b2, \u03b3 are angles of a triangle as a condition, but in Lean this is formalized as explicit constraints in the hypothesis rather than a semantic statement about being triangle angles. More critically, the Lean theorem introduces an additional variable t that doesn't appear in the natural language at all.\", 'The natural language concludes that \u03b1, \u03b2, \u03b3 \u2208 (0, \u03c0), but the Lean theorem treats this as a hypothesis/condition rather than a conclusion. The Lean theorem instead concludes with a completely different inequality involving cosines.', \"The natural language concludes that \u03b1 + \u03b2 + \u03b3 = \u03c0, but again the Lean theorem treats this as a hypothesis rather than a conclusion. The actual conclusion in Lean is about cosines and an inequality that doesn't appear anywhere in the natural language.\"]"}, "type": "condition"}, "tc_2": {"id": "tc_2", "natural_language": "for any angles $\\alpha, \\beta, \\gamma$ of a triangle and any real number $t$", "statement": "Premise:\n\u2022 $t$ is a real number [tc_2].", "dependencies": [], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\nvariable (t : \u211d) (tc_2 : t \u2208 Set.univ)", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly declares t as a real number with (t : \u211d). The additional condition (tc_2 : t \u2208 Set.univ) is redundant but logically consistent since every real number belongs to the universal set.", "Both the natural language and Lean formalization have no conclusions to derive, which matches perfectly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "type": "condition"}, "l1": {"id": "l1", "natural_language": "which gives $\\cos\\alpha = -\\cos(\\beta+\\gamma)$", "statement": "We assume:\n\u2022 $\\alpha, \\beta, \\gamma$ are angles of a triangle with $\\alpha + \\beta + \\gamma = \\pi$ [tc_1].\nTherefore, we conclude:\n\u2022 $\\cos\\alpha = -\\cos(\\beta+\\gamma)$ [l1].", "dependencies": ["tc_1"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem triangle_angles_inequality (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 \u2208 Set.Ioo 0 Real.pi \u2227 \u03b2 \u2208 Set.Ioo 0 Real.pi \u2227 \u03b3 \u2208 Set.Ioo 0 Real.pi \u2227 \u03b1 + \u03b2 + \u03b3 = Real.pi) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem triangle_angles_inequality (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 \u2208 Set.Ioo 0 Real.pi \u2227 \u03b2 \u2208 Set.Ioo 0 Real.pi \u2227 \u03b3 \u2208 Set.Ioo 0 Real.pi \u2227 \u03b1 + \u03b2 + \u03b3 = Real.pi) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by\n  have h_sum : \u03b2 + \u03b3 = Real.pi - \u03b1 := by\n    have h\u2081 : \u03b1 + \u03b2 + \u03b3 = Real.pi := h_triangle.2.2.2\n    linarith\n  \n  have h_cos_sum : Real.cos \u03b2 + Real.cos \u03b3 = 2 * Real.cos ((\u03b2 + \u03b3) / 2) * Real.cos ((\u03b2 - \u03b3) / 2) := by\n    have h\u2081 : Real.cos \u03b2 = Real.cos (((\u03b2 + \u03b3) / 2) + ((\u03b2 - \u03b3) / 2)) := by\n      ring_nf\n      <;> field_simp\n      <;> ring_nf\n    have h\u2082 : Real.cos \u03b3 = Real.cos (((\u03b2 + \u03b3) / 2) - ((\u03b2 - \u03b3) / 2)) := by\n      ring_nf\n      <;> field_simp\n      <;> ring_nf\n    rw [h\u2081, h\u2082]\n    have h\u2083 : Real.cos (((\u03b2 + \u03b3) / 2) + ((\u03b2 - \u03b3) / 2)) + Real.cos (((\u03b2 + \u03b3) / 2) - ((\u03b2 - \u03b3) / 2)) = 2 * Real.cos ((\u03b2 + \u03b3) / 2) * Real.cos ((\u03b2 - \u03b3) / 2) := by\n      have h\u2084 : Real.cos (((\u03b2 + \u03b3) / 2) + ((\u03b2 - \u03b3) / 2)) + Real.cos (((\u03b2 + \u03b3) / 2) - ((\u03b2 - \u03b3) / 2)) = 2 * Real.cos ((\u03b2 + \u03b3) / 2) * Real.cos ((\u03b2 - \u03b3) / 2) := by\n        have h\u2085 : Real.cos (((\u03b2 + \u03b3) / 2) + ((\u03b2 - \u03b3) / 2)) = Real.cos ((\u03b2 + \u03b3) / 2) * Real.cos ((\u03b2 - \u03b3) / 2) - Real.sin ((\u03b2 + \u03b3) / 2) * Real.sin ((\u03b2 - \u03b3) / 2) := by\n          rw [Real.cos_add]\n        have h\u2086 : Real.cos (((\u03b2 + \u03b3) / 2) - ((\u03b2 - \u03b3) / 2)) = Real.cos ((\u03b2 + \u03b3) / 2) * Real.cos ((\u03b2 - \u03b3) / 2) + Real.sin ((\u03b2 + \u03b3) / 2) * Real.sin ((\u03b2 - \u03b3) / 2) := by\n          rw [Real.cos_sub]\n        rw [h\u2085, h\u2086]\n        ring_nf\n        <;>\n        linarith [Real.cos_le_one ((\u03b2 + \u03b3) / 2), Real.cos_le_one ((\u03b2 - \u03b3) / 2),\n          Real.sin_le_one ((\u03b2 + \u03b3) / 2), Real.sin_le_one ((\u03b2 - \u03b3) / 2)]\n      linarith\n    linarith\n  \n  have h_cos_sum_sq_le : (Real.cos \u03b2 + Real.cos \u03b3)^2 \u2264 2 * (1 - Real.cos \u03b1) := by\n    have h1 : (Real.cos \u03b2 + Real.cos \u03b3) ^ 2 = (2 * Real.cos ((\u03b2 + \u03b3) / 2) * Real.cos ((\u03b2 - \u03b3) / 2)) ^ 2 := by\n      rw [h_cos_sum]\n    rw [h1]\n    have h2 : (2 * Real.cos ((\u03b2 + \u03b3) / 2) * Real.cos ((\u03b2 - \u03b3) / 2)) ^ 2 \u2264 (2 * Real.cos ((\u03b2 + \u03b3) / 2)) ^ 2 := by\n      have h3 : Real.cos ((\u03b2 - \u03b3) / 2) ^ 2 \u2264 1 := by\n        nlinarith [Real.cos_sq_add_sin_sq ((\u03b2 - \u03b3) / 2)]\n      have h4 : 0 \u2264 (2 * Real.cos ((\u03b2 + \u03b3) / 2)) ^ 2 := by\n        nlinarith [Real.cos_sq_add_sin_sq ((\u03b2 + \u03b3) / 2)]\n      nlinarith [Real.cos_sq_add_sin_sq ((\u03b2 - \u03b3) / 2)]\n    have h3 : (2 * Real.cos ((\u03b2 + \u03b3) / 2)) ^ 2 = 4 * Real.cos ((\u03b2 + \u03b3) / 2) ^ 2 := by ring\n    rw [h3] at h2\n    have h4 : 4 * Real.cos ((\u03b2 + \u03b3) / 2) ^ 2 \u2264 2 * (1 - Real.cos \u03b1) := by\n      have h5 : \u03b2 + \u03b3 = Real.pi - \u03b1 := h_sum\n      have h6 : (\u03b2 + \u03b3) / 2 = (Real.pi - \u03b1) / 2 := by linarith\n      have h7 : Real.cos ((\u03b2 + \u03b3) / 2) = Real.cos ((Real.pi - \u03b1) / 2) := by rw [h6]\n      have h8 : Real.cos ((Real.pi - \u03b1) / 2) = Real.sin (\u03b1 / 2) := by\n        have h9 : Real.cos ((Real.pi - \u03b1) / 2) = Real.sin (\u03b1 / 2) := by\n          rw [\u2190 Real.sin_pi_div_two_sub]\n          congr 1\n          ring_nf\n          <;> field_simp\n          <;> ring_nf\n        rw [h9]\n      have h9 : Real.cos ((\u03b2 + \u03b3) / 2) = Real.sin (\u03b1 / 2) := by rw [h7, h8]\n      rw [h9]\n      have h10 : 4 * Real.sin (\u03b1 / 2) ^ 2 = 2 * (1 - Real.cos \u03b1) := by\n        have h11 : Real.cos \u03b1 = Real.cos (2 * (\u03b1 / 2)) := by ring\n        rw [h11]\n        have h12 : Real.cos (2 * (\u03b1 / 2)) = 2 * Real.cos (\u03b1 / 2) ^ 2 - 1 := by\n          rw [Real.cos_two_mul]\n          <;> ring_nf\n        rw [h12]\n        have h13 : Real.sin (\u03b1 / 2) ^ 2 = 1 - Real.cos (\u03b1 / 2) ^ 2 := by\n          nlinarith [Real.sin_sq_add_cos_sq (\u03b1 / 2)]\n        nlinarith [Real.sin_sq_add_cos_sq (\u03b1 / 2)]\n      nlinarith [Real.sin_sq_add_cos_sq (\u03b1 / 2)]\n    nlinarith\n  \n  have h_main : t^2 / 2 - t * (Real.cos \u03b2 + Real.cos \u03b3) + (1 - Real.cos \u03b1) \u2265 0 := by\n    have h\u2081 : t^2 / 2 - t * (Real.cos \u03b2 + Real.cos \u03b3) + (1 - Real.cos \u03b1) \u2265 t^2 / 2 - t * (Real.cos \u03b2 + Real.cos \u03b3) + (Real.cos \u03b2 + Real.cos \u03b3)^2 / 2 := by\n      -- Use the fact that (cos \u03b2 + cos \u03b3)^2 \u2264 2(1 - cos \u03b1) to establish the inequality\n      nlinarith [h_cos_sum_sq_le]\n    have h\u2082 : t^2 / 2 - t * (Real.cos \u03b2 + Real.cos \u03b3) + (Real.cos \u03b2 + Real.cos \u03b3)^2 / 2 \u2265 0 := by\n      -- Complete the square to show that the expression is always non-negative\n      have h\u2083 : t^2 / 2 - t * (Real.cos \u03b2 + Real.cos \u03b3) + (Real.cos \u03b2 + Real.cos \u03b3)^2 / 2 = (1 / 2 : \u211d) * (t - (Real.cos \u03b2 + Real.cos \u03b3))^2 := by\n        ring_nf\n        <;> field_simp\n        <;> ring_nf\n      rw [h\u2083]\n      -- Since (t - (cos \u03b2 + cos \u03b3))^2 \u2265 0 and 1/2 > 0, the expression is non-negative\n      nlinarith [sq_nonneg (t - (Real.cos \u03b2 + Real.cos \u03b3))]\n    -- Combine the two inequalities to get the final result\n    linarith\n  \n  have h_final : Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by\n    have h\u2081 : t^2 / 2 - t * (Real.cos \u03b2 + Real.cos \u03b3) + (1 - Real.cos \u03b1) \u2265 0 := h_main\n    have h\u2082 : Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by\n      linarith\n    exact h\u2082\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 2}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The triangle angle conditions are correctly formalized. The Lean code properly specifies that \u03b1, \u03b2, \u03b3 are angles in (0, \u03c0) that sum to \u03c0, which accurately captures the natural language requirement that they are angles of a triangle.", "The conclusion is completely different from the natural language. The natural language states a trigonometric identity cos \u03b1 = -cos(\u03b2+\u03b3), but the Lean formalization proves an inequality cos \u03b1 + t(cos \u03b2 + cos \u03b3) \u2264 1 + t\u00b2/2 involving an additional parameter t. These are entirely different mathematical statements with no apparent relationship."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The triangle angle conditions are correctly formalized. The Lean code properly specifies that \u03b1, \u03b2, \u03b3 are angles in (0, \u03c0) that sum to \u03c0, which accurately captures the natural language requirement that they are angles of a triangle.', 'The conclusion is completely different from the natural language. The natural language states a trigonometric identity cos \u03b1 = -cos(\u03b2+\u03b3), but the Lean formalization proves an inequality cos \u03b1 + t(cos \u03b2 + cos \u03b3) \u2264 1 + t\u00b2/2 involving an additional parameter t. These are entirely different mathematical statements with no apparent relationship.']"}, "solved_negation": null, "type": "lemma"}, "l2": {"id": "l2", "natural_language": "Consider the non-negative expression $(\\cos\\beta + \\cos\\gamma - t)^2 + (\\sin\\beta - \\sin\\gamma)^2 \\ge 0$.", "statement": "We assume:\n\u2022 $\\beta, \\gamma$ are angles of a triangle [tc_1] and $t$ is a real number [tc_2].\nTherefore, we conclude:\n\u2022 $(\\cos\\beta + \\cos\\gamma - t)^2 + (\\sin\\beta - \\sin\\gamma)^2 \\ge 0$ [l2].", "dependencies": ["tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem triangle_angles_inequality (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 + \u03b2 + \u03b3 = Real.pi \u2227 \n                \u03b1 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b2 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b3 \u2208 Set.Ioo 0 Real.pi) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem triangle_angles_inequality (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 + \u03b2 + \u03b3 = Real.pi \u2227 \n                \u03b1 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b2 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b3 \u2208 Set.Ioo 0 Real.pi) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by\n  have h_discriminant : (Real.cos \u03b2 + Real.cos \u03b3)^2 - 2 * (1 - Real.cos \u03b1) \u2264 0 := by\n    have h1 : \u03b1 = Real.pi - (\u03b2 + \u03b3) := by linarith\n    have h2 : Real.cos \u03b1 = -Real.cos (\u03b2 + \u03b3) := by\n      rw [h1]\n      rw [Real.cos_pi_sub]\n      <;> ring_nf\n      <;> simp [Real.cos_add]\n      <;> ring_nf\n    have h3 : (Real.cos \u03b2 + Real.cos \u03b3)^2 + 2 * Real.cos \u03b1 \u2264 2 := by\n      have h4 : (Real.cos \u03b2 + Real.cos \u03b3)^2 + 2 * Real.cos \u03b1 = (Real.cos \u03b2 + Real.cos \u03b3)^2 + 2 * (-Real.cos (\u03b2 + \u03b3)) := by rw [h2]\n      rw [h4]\n      have h5 : (Real.cos \u03b2 + Real.cos \u03b3)^2 + 2 * (-Real.cos (\u03b2 + \u03b3)) = (Real.cos \u03b2 + Real.cos \u03b3)^2 - 2 * Real.cos (\u03b2 + \u03b3) := by ring\n      rw [h5]\n      have h6 : Real.cos (\u03b2 + \u03b3) = Real.cos \u03b2 * Real.cos \u03b3 - Real.sin \u03b2 * Real.sin \u03b3 := by\n        rw [Real.cos_add]\n      rw [h6]\n      have h7 : (Real.cos \u03b2 + Real.cos \u03b3)^2 - 2 * (Real.cos \u03b2 * Real.cos \u03b3 - Real.sin \u03b2 * Real.sin \u03b3) = Real.cos \u03b2 ^ 2 + Real.cos \u03b3 ^ 2 + 2 * Real.sin \u03b2 * Real.sin \u03b3 := by\n        ring_nf\n        <;>\n        (try\n          {\n            nlinarith [Real.sin_sq_add_cos_sq \u03b2, Real.sin_sq_add_cos_sq \u03b3]\n          })\n        <;>\n        (try\n          {\n            linarith [Real.sin_le_one \u03b2, Real.sin_le_one \u03b3, Real.cos_le_one \u03b2, Real.cos_le_one \u03b3]\n          })\n      rw [h7]\n      have h8 : Real.cos \u03b2 ^ 2 + Real.cos \u03b3 ^ 2 + 2 * Real.sin \u03b2 * Real.sin \u03b3 \u2264 2 := by\n        nlinarith [Real.sin_sq_add_cos_sq \u03b2, Real.sin_sq_add_cos_sq \u03b3,\n          sq_nonneg (Real.sin \u03b2 - Real.sin \u03b3),\n          Real.sin_le_one \u03b2, Real.sin_le_one \u03b3, Real.cos_le_one \u03b2, Real.cos_le_one \u03b3]\n      linarith\n    nlinarith [Real.sin_sq_add_cos_sq \u03b1, Real.sin_sq_add_cos_sq \u03b2, Real.sin_sq_add_cos_sq \u03b3]\n  \n  have h_main : 1 + t^2 / 2 - (Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3)) \u2265 0 := by\n    have h\u2081 : 0 \u2264 (t - (Real.cos \u03b2 + Real.cos \u03b3)) ^ 2 := sq_nonneg _\n    have h\u2082 : (Real.cos \u03b2 + Real.cos \u03b3) ^ 2 - 2 * (1 - Real.cos \u03b1) \u2264 0 := h_discriminant\n    nlinarith [sq_nonneg (t - (Real.cos \u03b2 + Real.cos \u03b3)),\n      Real.cos_le_one \u03b1, Real.cos_le_one \u03b2, Real.cos_le_one \u03b3,\n      Real.neg_one_le_cos \u03b1, Real.neg_one_le_cos \u03b2, Real.neg_one_le_cos \u03b3]\n  \n  have h_final : Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by\n    linarith\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The variable assumptions have a minor inconsistency - the natural language only mentions \u03b2, \u03b3 as triangle angles while Lean includes an additional angle \u03b1. However, the triangle constraints are properly formalized.", "The conclusion statements represent completely different mathematical claims. The natural language states (cos \u03b2 + cos \u03b3 - t)\u00b2 + (sin \u03b2 - sin \u03b3)\u00b2 \u2265 0, which is a sum of squares inequality, while the Lean formalization states cos \u03b1 + t * (cos \u03b2 + cos \u03b3) \u2264 1 + t\u00b2/2, which is an entirely different inequality. This is a major inconsistency as the core mathematical content does not match."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The variable assumptions have a minor inconsistency - the natural language only mentions \u03b2, \u03b3 as triangle angles while Lean includes an additional angle \u03b1. However, the triangle constraints are properly formalized.', 'The conclusion statements represent completely different mathematical claims. The natural language states (cos \u03b2 + cos \u03b3 - t)\u00b2 + (sin \u03b2 - sin \u03b3)\u00b2 \u2265 0, which is a sum of squares inequality, while the Lean formalization states cos \u03b1 + t * (cos \u03b2 + cos \u03b3) \u2264 1 + t\u00b2/2, which is an entirely different inequality. This is a major inconsistency as the core mathematical content does not match.']"}, "solved_negation": null, "type": "lemma"}, "l3": {"id": "l3", "natural_language": "Expanding and grouping terms using $\\cos^2 x + \\sin^2 x = 1$ and the angle addition formula $\\cos(\\beta+\\gamma) = \\cos\\beta \\cos\\gamma - \\sin\\beta \\sin\\gamma$, we obtain $2 + t^2 + 2\\cos(\\beta+\\gamma) - 2t(\\cos\\beta + \\cos\\gamma) \\ge 0$", "statement": "We assume:\n\u2022 $(\\cos\\beta + \\cos\\gamma - t)^2 + (\\sin\\beta - \\sin\\gamma)^2 \\ge 0$ [l2].\n\u2022 $\\beta, \\gamma$ are angles, and $t$ is a real number [tc_1, tc_2].\nTherefore, we conclude:\n\u2022 $2 + t^2 + 2\\cos(\\beta+\\gamma) - 2t(\\cos\\beta + \\cos\\gamma) \\ge 0$ [l3].", "dependencies": ["l2", "tc_1", "tc_2"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem triangle_angles_inequality (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 + \u03b2 + \u03b3 = Real.pi \u2227 \n                \u03b1 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b2 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b3 \u2208 Set.Ioo 0 Real.pi) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem triangle_angles_inequality (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 + \u03b2 + \u03b3 = Real.pi \u2227 \n                \u03b1 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b2 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b3 \u2208 Set.Ioo 0 Real.pi) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by\n  have h_sum : \u03b2 + \u03b3 = Real.pi - \u03b1 := by\n    have h\u2081 : \u03b1 + \u03b2 + \u03b3 = Real.pi := h_triangle.1\n    have h\u2082 : \u03b2 + \u03b3 = Real.pi - \u03b1 := by linarith\n    exact h\u2082\n  \n  have h_cos_sum : Real.cos (\u03b2 + \u03b3) = -Real.cos \u03b1 := by\n    have h\u2081 : Real.cos (\u03b2 + \u03b3) = Real.cos (Real.pi - \u03b1) := by rw [h_sum]\n    have h\u2082 : Real.cos (Real.pi - \u03b1) = -Real.cos \u03b1 := by\n      rw [Real.cos_pi_sub]\n    rw [h\u2081, h\u2082]\n    <;>\n    (try ring_nf) <;>\n    (try linarith [h_triangle.1, h_triangle.2.1.1, h_triangle.2.1.2, h_triangle.2.2.1, h_triangle.2.2.2])\n    <;>\n    (try simp_all [Real.cos_add, Real.cos_sub, Real.sin_add, Real.sin_sub])\n    <;>\n    (try ring_nf at *)\n    <;>\n    (try linarith)\n  \n  have h_square_nonneg : (Real.cos \u03b2 + Real.cos \u03b3 - t)^2 + (Real.sin \u03b2 - Real.sin \u03b3)^2 \u2265 0 := by\n    nlinarith [sq_nonneg (Real.cos \u03b2 + Real.cos \u03b3 - t), sq_nonneg (Real.sin \u03b2 - Real.sin \u03b3)]\n  \n  have h_expansion : 2 + 2 * Real.cos (\u03b2 + \u03b3) + t^2 - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0 := by\n    have h\u2081 : (Real.cos \u03b2 + Real.cos \u03b3 - t) ^ 2 + (Real.sin \u03b2 - Real.sin \u03b3) ^ 2 \u2265 0 := h_square_nonneg\n    have h\u2082 : (Real.cos \u03b2 + Real.cos \u03b3 - t) ^ 2 + (Real.sin \u03b2 - Real.sin \u03b3) ^ 2 = 2 + 2 * (Real.cos \u03b2 * Real.cos \u03b3 - Real.sin \u03b2 * Real.sin \u03b3) + t ^ 2 - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) := by\n      nlinarith [Real.cos_sq_add_sin_sq \u03b2, Real.cos_sq_add_sin_sq \u03b3,\n        sq_nonneg (Real.cos \u03b2 + Real.cos \u03b3), sq_nonneg (Real.sin \u03b2 - Real.sin \u03b3)]\n    have h\u2083 : 2 + 2 * (Real.cos \u03b2 * Real.cos \u03b3 - Real.sin \u03b2 * Real.sin \u03b3) + t ^ 2 - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0 := by\n      linarith\n    have h\u2084 : Real.cos (\u03b2 + \u03b3) = Real.cos \u03b2 * Real.cos \u03b3 - Real.sin \u03b2 * Real.sin \u03b3 := by\n      rw [Real.cos_add]\n      <;> ring\n    have h\u2085 : 2 + 2 * Real.cos (\u03b2 + \u03b3) + t ^ 2 - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0 := by\n      linarith\n    exact h\u2085\n  \n  have h_substituted : 2 - 2 * Real.cos \u03b1 + t^2 - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0 := by\n    have h\u2081 : 2 + 2 * Real.cos (\u03b2 + \u03b3) + t ^ 2 - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0 := h_expansion\n    have h\u2082 : Real.cos (\u03b2 + \u03b3) = -Real.cos \u03b1 := h_cos_sum\n    have h\u2083 : 2 + 2 * (-Real.cos \u03b1) + t ^ 2 - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0 := by\n      rw [h\u2082] at h\u2081\n      linarith\n    linarith\n  \n  have h_main : 1 + t^2 / 2 - (Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3)) \u2265 0 := by\n    have h\u2081 : 2 - 2 * Real.cos \u03b1 + t ^ 2 - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0 := h_substituted\n    have h\u2082 : 1 + t ^ 2 / 2 - (Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3)) \u2265 0 := by\n      nlinarith [Real.cos_le_one \u03b1, Real.cos_le_one \u03b2, Real.cos_le_one \u03b3]\n    exact h\u2082\n  \n  have h_final : Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by\n    have h\u2081 : 1 + t ^ 2 / 2 - (Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3)) \u2265 0 := h_main\n    linarith\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 0.0, "semantic_feedback": ["The Lean formalization is fundamentally different from the natural language statement. The natural language describes a mathematical derivation starting from a specific inequality assumption about cosines and sines, leading to a conclusion about an expression involving cos(\u03b2+\u03b3). However, the Lean formalization introduces triangle angle constraints not mentioned in the natural language, omits the key starting assumption entirely, ignores the intermediate conclusion, and arrives at a completely different final inequality involving cos \u03b1. The mathematical content, logical flow, and conclusions are entirely different between the two versions."]}, "error_report": {"error_type": "Formalizer", "error_report": "Formalization is likely incorrect: semantic score is 0.0, below threshold 0.6.\nScorer feedback: ['The Lean formalization is fundamentally different from the natural language statement. The natural language describes a mathematical derivation starting from a specific inequality assumption about cosines and sines, leading to a conclusion about an expression involving cos(\u03b2+\u03b3). However, the Lean formalization introduces triangle angle constraints not mentioned in the natural language, omits the key starting assumption entirely, ignores the intermediate conclusion, and arrives at a completely different final inequality involving cos \u03b1. The mathematical content, logical flow, and conclusions are entirely different between the two versions.']"}, "solved_negation": null, "type": "lemma"}, "l4": {"id": "l4", "natural_language": "which rearranges to $-\\cos(\\beta+\\gamma) + t(\\cos\\beta + \\cos\\gamma) \\le 1 + \\frac{t^2}{2}$", "statement": "We assume:\n\u2022 $2 + t^2 + 2\\cos(\\beta+\\gamma) - 2t(\\cos\\beta + \\cos\\gamma) \\ge 0$ [l3].\nTherefore, we conclude:\n\u2022 $-\\cos(\\beta+\\gamma) + t(\\cos\\beta + \\cos\\gamma) \\le 1 + \\frac{t^2}{2}$ [l4].", "dependencies": ["l3"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem triangle_angles_inequality (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 + \u03b2 + \u03b3 = Real.pi \u2227 \n                \u03b1 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b2 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b3 \u2208 Set.Ioo 0 Real.pi)\n  (l3 : 2 + t^2 + 2 * Real.cos (\u03b2 + \u03b3) - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem triangle_angles_inequality (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 + \u03b2 + \u03b3 = Real.pi \u2227 \n                \u03b1 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b2 \u2208 Set.Ioo 0 Real.pi \u2227 \n                \u03b3 \u2208 Set.Ioo 0 Real.pi)\n  (l3 : 2 + t^2 + 2 * Real.cos (\u03b2 + \u03b3) - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by\n  have h_cos_sum : Real.cos (\u03b2 + \u03b3) = -Real.cos \u03b1 := by\n    have h\u2081 : \u03b2 + \u03b3 = Real.pi - \u03b1 := by\n      have h\u2082 : \u03b1 + \u03b2 + \u03b3 = Real.pi := h_triangle.1\n      linarith\n    have h\u2082 : Real.cos (\u03b2 + \u03b3) = Real.cos (Real.pi - \u03b1) := by rw [h\u2081]\n    rw [h\u2082]\n    have h\u2083 : Real.cos (Real.pi - \u03b1) = -Real.cos \u03b1 := by\n      rw [Real.cos_pi_sub]\n    rw [h\u2083]\n    <;>\n    (try norm_num) <;>\n    (try linarith [h_triangle.2.1.1, h_triangle.2.1.2, h_triangle.2.2.1.1, h_triangle.2.2.1.2, h_triangle.2.2.2.1, h_triangle.2.2.2.2])\n  \n  have h_main_ineq : 2 + t^2 - 2 * Real.cos \u03b1 - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0 := by\n    have h\u2084 : 2 + t^2 + 2 * Real.cos (\u03b2 + \u03b3) - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0 := l3\n    have h\u2085 : Real.cos (\u03b2 + \u03b3) = -Real.cos \u03b1 := h_cos_sum\n    rw [h\u2085] at h\u2084\n    ring_nf at h\u2084 \u22a2\n    linarith\n  \n  have h_final : Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by\n    have h\u2085 : 2 + t ^ 2 - 2 * Real.cos \u03b1 - 2 * t * (Real.cos \u03b2 + Real.cos \u03b3) \u2265 0 := h_main_ineq\n    have h\u2086 : Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t ^ 2 / 2 := by\n      nlinarith [sq_nonneg (t - 1)]\n    exact h\u2086\n  \n  exact h_final", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The assumption l3 is correctly translated from natural language to Lean with proper mathematical notation and operator precedence.", "The conclusion appears different at first glance (cos \u03b1 vs -cos(\u03b2+\u03b3)), but they are mathematically equivalent given the triangle constraint \u03b1 + \u03b2 + \u03b3 = \u03c0 that is included in the Lean formalization. The Lean version includes additional context (triangle angle constraints) that makes the formalization more complete and mathematically rigorous while preserving the logical meaning."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "lemma"}, "ts_1": {"id": "ts_1", "natural_language": "Substituting $-\\cos(\\beta+\\gamma) = \\cos\\alpha$ yields $\\cos\\alpha + t(\\cos\\beta + \\cos\\gamma) \\le 1 + \\frac{t^2}{2}$", "statement": "We assume:\n\u2022 $\\cos\\alpha = -\\cos(\\beta+\\gamma)$ [l1].\n\u2022 $-\\cos(\\beta+\\gamma) + t(\\cos\\beta + \\cos\\gamma) \\le 1 + \\frac{t^2}{2}$ [l4].\nTherefore, we conclude:\n\u2022 $\\cos\\alpha + t(\\cos\\beta + \\cos\\gamma) \\le 1 + \\frac{t^2}{2}$ [ts_1].", "dependencies": ["l1", "l4"], "formalization": {"lean_code": "import Mathlib\nimport Aesop\n\nset_option maxHeartbeats 0\n\nopen BigOperators Real Nat Topology Rat\n\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 + \u03b2 + \u03b3 = Real.pi)\n  (h_positive : \u03b1 > 0 \u2227 \u03b2 > 0 \u2227 \u03b3 > 0)\n  (l1 : Real.cos \u03b1 = -Real.cos (\u03b2 + \u03b3))\n  (l4 : -Real.cos (\u03b2 + \u03b3) + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by sorry", "lean_pass": true, "error_msg": [], "tries": 1}, "solved_lemma": {"lean_code": "import Mathlib\nimport Aesop\nset_option maxHeartbeats 0\nopen BigOperators Real Nat Topology Rat Filter\n\ntheorem ts_1 (\u03b1 \u03b2 \u03b3 t : \u211d) \n  (h_triangle : \u03b1 + \u03b2 + \u03b3 = Real.pi)\n  (h_positive : \u03b1 > 0 \u2227 \u03b2 > 0 \u2227 \u03b3 > 0)\n  (l1 : Real.cos \u03b1 = -Real.cos (\u03b2 + \u03b3))\n  (l4 : -Real.cos (\u03b2 + \u03b3) + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2) :\n  Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t^2 / 2 := by\n  have h_main : Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) \u2264 1 + t ^ 2 / 2 := by\n    have h2 : Real.cos \u03b1 + t * (Real.cos \u03b2 + Real.cos \u03b3) = -Real.cos (\u03b2 + \u03b3) + t * (Real.cos \u03b2 + Real.cos \u03b3) := by\n      rw [l1]\n      <;> ring\n    rw [h2]\n    -- The left-hand side is now identical to the left-hand side of l4, so we can directly use l4\n    linarith\n  exact h_main", "lean_pass": true, "lean_verify": true, "error_msg": [], "tries": 1}, "score": {"semantic_score": 1.0, "semantic_feedback": ["The Lean formalization correctly captures all the mathematical content from the natural language. The core assumptions (l1 and l4) and conclusion (ts_1) are faithfully represented. The additional triangle-related hypotheses (h_triangle and h_positive) provide extra context that is mathematically consistent and likely necessary for the broader proof framework, but they don't contradict or alter the fundamental logical relationship expressed in the natural language. The substitution-based reasoning structure is preserved perfectly."]}, "error_report": {"error_type": null, "error_report": "Natural-language lemma and formalization appear consistent (lean_verify = True)."}, "solved_negation": null, "type": "solution"}};
            
            // Create nodes and edges
            var nodes = new vis.DataSet([{"id": "tc_1", "label": "tc_1", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "tc_2", "label": "tc_2", "color": {"background": "#eba0a0", "border": "#00ff00", "highlight": {"background": "#eba0a0", "border": "#00ff00"}}, "shape": "box", "size": 30, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l1", "label": "l1", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l2", "label": "l2", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l3", "label": "l3", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "l4", "label": "l4", "color": {"background": "#8dafcc", "border": "#00ff00", "highlight": {"background": "#8dafcc", "border": "#00ff00"}}, "shape": "dot", "size": 25, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}, {"id": "ts_1", "label": "ts_1", "color": {"background": "#a3c2a8", "border": "#00ff00", "highlight": {"background": "#a3c2a8", "border": "#00ff00"}}, "shape": "star", "size": 40, "font": {"size": 14, "color": "#000000"}, "labelHighlightBold": false, "borderWidth": 3, "chosen": false}]);
            var edges = new vis.DataSet([{"from": "tc_1", "to": "l1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_1", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l2", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "tc_2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l1", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l2", "to": "l3", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l3", "to": "l4", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}, {"from": "l4", "to": "ts_1", "arrows": "to", "color": {"color": "#666666", "highlight": "#666666", "hover": "#666666"}, "width": 2}]);
            
            // Create network
            var container = document.getElementById('mynetwork');
            var data = {
                nodes: nodes,
                edges: edges
            };
            
            var options = {
                physics: {
                    enabled: true,
                    solver: 'hierarchicalRepulsion',
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 200,
                        springConstant: 0.01,
                        nodeDistance: 150,
                        damping: 0.09
                    }
                },
                edges: {
                    smooth: {
                        type: 'continuous',
                        forceDirection: 'none'
                    },
                    color: {
                        color: '#666666',
                        highlight: '#666666',
                        hover: '#666666'
                    },
                    width: 2
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    navigationButtons: true,
                    keyboard: true
                },
                nodes: {
                    font: {
                        size: 14,
                        color: '#000000'
                    },
                    labelHighlightBold: false,
                    chosen: false,
                    shapeProperties: {
                        useBorderWithImage: false
                    },
                    scaling: {
                        label: {
                            enabled: true,
                            min: 8,
                            max: 20,
                            maxVisible: 20,
                            drawThreshold: 5
                        }
                    }
                }
            };
            
            var network = new vis.Network(container, data, options);
            
            // Format field value for display
            function formatFieldValue(value, fieldName) {
                if (value === null || value === undefined) {
                    return 'N/A';
                }
                
                // Handle objects (dictionaries) as sub-boxes
                if (typeof value === 'object' && !Array.isArray(value)) {
                    var html = '';
                    for (var key in value) {
                        if (value.hasOwnProperty(key)) {
                            var subValue = value[key];
                            var subValueStr = '';
                            
                            if (typeof subValue === 'object' &&
                                    !Array.isArray(subValue)) {
                                // Nested object - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else if (Array.isArray(subValue)) {
                                // Array - show as JSON
                                subValueStr = JSON.stringify(subValue, null, 2);
                            } else {
                                // Primitive value
                                subValueStr = String(subValue);
                            }
                            
                            // Replace escaped newlines and tabs with actual characters
                            subValueStr = subValueStr.replace(/\\n/g, '\n');
                            subValueStr = subValueStr.replace(/\\t/g, '\t');
                            subValueStr = subValueStr.replace(/\t/g, '\t');
                            
                            html += '<div class="sub-dict">';
                            html += '<div class="sub-dict-title">' + key + '</div>';
                            html += '<div class="sub-dict-content">' + subValueStr + '</div>';
                            html += '</div>';
                        }
                    }
                    return html;
                }
                
                // Convert to string for primitive values and arrays
                var strValue = String(value);
                
                // Handle arrays
                if (Array.isArray(value)) {
                    strValue = JSON.stringify(value, null, 2);
                }
                
                // Replace escaped newlines and tabs with actual characters
                strValue = strValue.replace(/\\n/g, '\n');
                strValue = strValue.replace(/\\t/g, '\t');
                strValue = strValue.replace(/\t/g, '\t');
                
                return strValue;
            }
            
            // Handle node click events
            network.on("click", function(params) {
                if (params.nodes.length > 0) {
                    var nodeId = params.nodes[0];
                    var info = nodeInfo[nodeId];
                    
                    if (info) {
                        var html = '<div class="info-header">';
                        html += '<h2>' + nodeId + '</h2>';
                        var nodeType = info.type || 'unknown';
                        var capitalizedType = nodeType.charAt(0).toUpperCase() +
                            nodeType.slice(1);
                        html += '<div class="node-type">Type: ' + capitalizedType +
                            '</div>';
                        html += '</div>';
                        
                        // Add all fields
                        for (var key in info) {
                            if (key === 'type' || key === 'id') continue;
                            
                            var fieldName = key.replace(/_/g, ' ')
                                .replace(/\b\w/g, function(l) {
                                    return l.toUpperCase();
                                });
                            var fieldValue = formatFieldValue(info[key], fieldName);
                            
                            if (fieldValue && fieldValue !== 'N/A') {
                                // Special formatting for code fields
                                var isCode = key.includes('code') ||
                                    key.includes('lean') ||
                                    key.includes('statement');
                                
                                html += '<div class="field-group">';
                                html += '<div class="field-name">' + fieldName +
                                    '</div>';
                                html += '<div class="field-value' +
                                    (isCode ? ' code' : '') + '">' +
                                    fieldValue + '</div>';
                                html += '</div>';
                            }
                        }
                        
                        document.getElementById('info-content')
                            .innerHTML = html;
                    }
                }
            });
            
            // Toggle panel function
            function togglePanel() {
                var panel = document.getElementById('info-panel');
                panel.classList.toggle('hidden');
                
                // Resize network when panel is toggled
                setTimeout(function() {
                    network.fit();
                }, 300);
            }
            
            // Initial network fit
            network.once('stabilized', function() {
                network.fit();
            });
            
            // Resizable panels functionality
            function makeResizable() {
                const verticalResizer = document.getElementById('vertical-resizer');
                const horizontalResizer = document.getElementById('horizontal-resizer');
                const proofPanel = document.getElementById('proof-str-panel');
                const graphContainer = document.getElementById('graph-container');
                const infoPanel = document.getElementById('info-panel');
                const leftPanel = document.getElementById('left-panel');
                
                let isVerticalResizing = false;
                let isHorizontalResizing = false;
                
                // Vertical resizer (between proof panel and graph)
                verticalResizer.addEventListener('mousedown', function(e) {
                    isVerticalResizing = true;
                    document.addEventListener('mousemove', verticalResize);
                    document.addEventListener('mouseup', stopVerticalResize);
                    e.preventDefault();
                });
                
                function verticalResize(e) {
                    if (!isVerticalResizing) return;
                    
                    const containerHeight = leftPanel.offsetHeight;
                    const newHeight = e.clientY - leftPanel.offsetTop;
                    const minHeight = 100;
                    const maxHeight = containerHeight - 100;
                    
                    if (newHeight >= minHeight && newHeight <= maxHeight) {
                        proofPanel.style.height = newHeight + 'px';
                        graphContainer.style.height = (containerHeight - newHeight) + 'px';
                        network.fit();
                    }
                }
                
                function stopVerticalResize() {
                    isVerticalResizing = false;
                    document.removeEventListener('mousemove', verticalResize);
                    document.removeEventListener('mouseup', stopVerticalResize);
                }
                
                // Horizontal resizer (between left and right panels)
                horizontalResizer.addEventListener('mousedown', function(e) {
                    isHorizontalResizing = true;
                    document.addEventListener('mousemove', horizontalResize);
                    document.addEventListener('mouseup', stopHorizontalResize);
                    e.preventDefault();
                });
                
                function horizontalResize(e) {
                    if (!isHorizontalResizing) return;
                    
                    const containerWidth = document.querySelector('.container').offsetWidth;
                    const newWidth = e.clientX - leftPanel.offsetLeft;
                    const minWidth = 300;
                    const maxWidth = containerWidth - 300;
                    
                    if (newWidth >= minWidth && newWidth <= maxWidth) {
                        leftPanel.style.flex = 'none';
                        leftPanel.style.width = newWidth + 'px';
                        infoPanel.style.width = (containerWidth - newWidth) + 'px';
                        network.fit();
                    }
                }
                
                function stopHorizontalResize() {
                    isHorizontalResizing = false;
                    document.removeEventListener('mousemove', horizontalResize);
                    document.removeEventListener('mouseup', stopHorizontalResize);
                }
            }
            
            // Initialize resizable panels
            makeResizable();
        </script>
    </body>
    </html>
    